/*! For license information please see XianTu.js.LICENSE.txt */
(()=>{var e={22:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.account-container[data-v-5ebbff06] {\n  width: 100%;\n  height: 100vh;\n  min-height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n  box-sizing: border-box;\n  overflow: auto;\n}\n.account-panel[data-v-5ebbff06] {\n  width: 100%;\n  max-width: 900px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 16px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  padding: 2.5rem;\n  color: var(--color-text);\n}\n.header[data-v-5ebbff06] {\n  margin-bottom: 1.5rem;\n}\n.title-row[data-v-5ebbff06] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n}\n.title[data-v-5ebbff06] {\n  margin: 0;\n  font-family: var(--font-family-serif);\n  font-size: 2rem;\n  color: var(--color-primary);\n}\n.status[data-v-5ebbff06] {\n  padding: 0.35rem 0.9rem;\n  border-radius: 999px;\n  border: 1px solid var(--color-border);\n  font-size: 0.85rem;\n}\n.status.ok[data-v-5ebbff06] {\n  border-color: rgba(34, 197, 94, 0.4);\n  color: #22c55e;\n}\n.status.warn[data-v-5ebbff06] {\n  border-color: rgba(251, 191, 36, 0.4);\n  color: #fbbf24;\n}\n.subtitle[data-v-5ebbff06] {\n  margin: 0.6rem 0 0;\n  color: var(--color-text-secondary);\n}\n.sections[data-v-5ebbff06] {\n  display: grid;\n  gap: 1rem;\n}\n.section[data-v-5ebbff06] {\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  background: var(--color-surface-light);\n  overflow: hidden;\n}\n.section-title[data-v-5ebbff06] {\n  list-style: none;\n  padding: 0.85rem 1rem;\n  font-weight: 700;\n  color: var(--color-text);\n  cursor: pointer;\n}\n.section-title[data-v-5ebbff06]::-webkit-details-marker {\n  display: none;\n}\n.section-body[data-v-5ebbff06] {\n  padding: 0 1rem 1rem;\n}\n.info-list[data-v-5ebbff06] {\n  display: grid;\n  gap: 0.6rem;\n}\n.info-row[data-v-5ebbff06] {\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n  padding-bottom: 0.6rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.info-row[data-v-5ebbff06]:last-child {\n  border-bottom: none;\n  padding-bottom: 0;\n}\n.info-label[data-v-5ebbff06] {\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n}\n.info-value[data-v-5ebbff06] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.info-empty[data-v-5ebbff06] {\n  color: var(--color-text-muted);\n  font-size: 0.9rem;\n  padding: 0.3rem 0;\n}\n.actions[data-v-5ebbff06] {\n  margin-top: 2rem;\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n}\n.btn[data-v-5ebbff06] {\n  flex: 1;\n  padding: 0.9rem 1rem;\n  border-radius: 10px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.btn[data-v-5ebbff06]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n}\n.btn-secondary[data-v-5ebbff06] {\n  background: var(--color-surface);\n}\n.btn.danger[data-v-5ebbff06] {\n  border-color: rgba(239, 68, 68, 0.4);\n  background: rgba(239, 68, 68, 0.12);\n  color: #ef4444;\n}\n.btn.danger[data-v-5ebbff06]:hover {\n  background: rgba(239, 68, 68, 0.18);\n}\n.loading[data-v-5ebbff06] {\n  color: var(--color-text-secondary);\n}\n.backend-locked[data-v-5ebbff06] {\n  padding: 1rem 1.25rem;\n  border-radius: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n}\n@media (max-width: 768px) {\n.account-panel[data-v-5ebbff06] {\n    padding: 2rem 1.5rem;\n}\n.title-row[data-v-5ebbff06] {\n    flex-direction: column;\n    align-items: flex-start;\n}\n}\n",""]);const s=i},47:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.legacy-modal-overlay[data-v-a38a6a5a] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.55);\n  backdrop-filter: blur(6px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10050;\n  padding: 1rem;\n}\n.legacy-modal[data-v-a38a6a5a] {\n  width: 100%;\n  max-width: 860px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 14px 40px rgba(0, 0, 0, 0.35);\n}\n.legacy-modal-header[data-v-a38a6a5a] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.9rem 1rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.title[data-v-a38a6a5a] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 700;\n}\n.icon-btn[data-v-a38a6a5a] {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  padding: 0.25rem;\n  border-radius: 8px;\n}\n.icon-btn[data-v-a38a6a5a]:hover {\n  background: rgba(255, 255, 255, 0.06);\n  color: var(--color-text);\n}\n.legacy-modal-body[data-v-a38a6a5a] {\n  padding: 1rem;\n}\n.hint[data-v-a38a6a5a] {\n  margin: 0 0 0.75rem;\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n  line-height: 1.5;\n}\n.file-row[data-v-a38a6a5a] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n}\n.file-name[data-v-a38a6a5a] {\n  font-size: 0.9rem;\n  color: var(--color-text);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.file-name.muted[data-v-a38a6a5a] {\n  color: var(--color-text-secondary);\n}\n.result[data-v-a38a6a5a] {\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  padding: 0.9rem;\n  background: rgba(255, 255, 255, 0.02);\n}\n.summary-grid[data-v-a38a6a5a] {\n  display: grid;\n  grid-template-columns: repeat(4, minmax(0, 1fr));\n  gap: 0.6rem;\n  margin-bottom: 0.75rem;\n}\n.kv[data-v-a38a6a5a] {\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  padding: 0.6rem 0.7rem;\n  background: rgba(0, 0, 0, 0.12);\n}\n.k[data-v-a38a6a5a] {\n  display: block;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.v[data-v-a38a6a5a] {\n  display: block;\n  font-weight: 700;\n  margin-top: 0.15rem;\n}\n.details[data-v-a38a6a5a] {\n  margin-top: 0.6rem;\n}\n.chips[data-v-a38a6a5a] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.35rem;\n  margin-top: 0.5rem;\n}\n.chip[data-v-a38a6a5a] {\n  border: 1px solid var(--color-border);\n  padding: 0.2rem 0.5rem;\n  border-radius: 999px;\n  font-size: 0.8rem;\n}\n.errors[data-v-a38a6a5a] {\n  margin: 0.5rem 0 0;\n  padding-left: 1.1rem;\n  color: #ffb4b4;\n}\n.json-preview[data-v-a38a6a5a] {\n  margin: 0.5rem 0 0;\n  max-height: 220px;\n  overflow: auto;\n  padding: 0.75rem;\n  background: var(--color-code-bg);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;\n  font-size: 0.8rem;\n}\n.legacy-modal-actions[data-v-a38a6a5a] {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 0.5rem;\n  padding: 0.9rem 1rem;\n  border-top: 1px solid var(--color-border);\n}\n.btn[data-v-a38a6a5a] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.4rem;\n  padding: 0.55rem 0.8rem;\n  border-radius: 10px;\n  border: 1px solid var(--color-border);\n  background: var(--color-primary);\n  color: #fff;\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n.btn[data-v-a38a6a5a]:disabled {\n  opacity: 0.45;\n  cursor: not-allowed;\n}\n.btn.btn-secondary[data-v-a38a6a5a] {\n  background: transparent;\n  color: var(--color-text);\n}\n.btn.btn-secondary[data-v-a38a6a5a]:hover {\n  background: rgba(255, 255, 255, 0.06);\n}\n@media (max-width: 760px) {\n.summary-grid[data-v-a38a6a5a] {\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n}\n}\n",""]);const s=i},76:e=>{"use strict";e.exports=Function.prototype.call},100:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useAPIManagementStore:()=>o});var a=n(810),r=n(4061);const o=(0,a.nY)("apiManagement",()=>{const e=(0,r.ref)([]),t=(0,r.ref)([{type:"main",apiId:"default"},{type:"memory_summary",apiId:"default"},{type:"text_optimization",apiId:"default"},{type:"cot",apiId:"default"},{type:"world_generation",apiId:"default"},{type:"quest_generation",apiId:"default"},{type:"npc_generation",apiId:"default"},{type:"split_generation_step2",apiId:"default"}]),n=(0,r.computed)(()=>e.value.filter(e=>e.enabled)),a=()=>{try{const n={apiConfigs:e.value,apiAssignments:t.value};localStorage.setItem("api_management_config",JSON.stringify(n))}catch(e){console.error("[APIç®¡ç†] ä¿å­˜é…ç½®å¤±è´¥:",e)}};return{apiConfigs:e,apiAssignments:t,enabledAPIs:n,loadFromStorage:()=>{try{const n=localStorage.getItem("api_management_config");if(n){const a=JSON.parse(n);e.value=a.apiConfigs||[];const r=[{type:"main",apiId:"default"},{type:"memory_summary",apiId:"default"},{type:"text_optimization",apiId:"default"},{type:"cot",apiId:"default"},{type:"world_generation",apiId:"default"},{type:"quest_generation",apiId:"default"},{type:"npc_generation",apiId:"default"},{type:"split_generation_step2",apiId:"default"}],o=a.apiAssignments||[],i=[];r.forEach(e=>{const t=o.find(t=>t.type===e.type);i.push(t||e)}),t.value=i}0===e.value.length&&e.value.push({id:"default",name:"é»˜è®¤API",provider:"openai",url:"https://api.openai.com",apiKey:"",model:"gpt-4o",temperature:.7,maxTokens:16e3,enabled:!0})}catch(e){console.error("[APIç®¡ç†] åŠ è½½é…ç½®å¤±è´¥:",e)}},saveToStorage:a,addAPI:t=>{const n={...t,id:`api_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};return e.value.push(n),a(),n.id},updateAPI:(t,n)=>{const r=e.value.findIndex(e=>e.id===t);-1!==r&&(e.value[r]={...e.value[r],...n},a())},deleteAPI:n=>{if("default"===n)throw new Error("ä¸èƒ½åˆ é™¤é»˜è®¤APIé…ç½®");t.value.forEach(e=>{e.apiId===n&&(e.apiId="default")}),e.value=e.value.filter(e=>e.id!==n),a()},assignAPI:(e,n)=>{const r=t.value.find(t=>t.type===e);r?r.apiId=n:t.value.push({type:e,apiId:n}),a()},getAPIForType:n=>{const a=t.value.find(e=>e.type===n);if(!a)return null;return e.value.find(e=>e.id===a.apiId&&e.enabled)||e.value.find(e=>"default"===e.id)||null},toggleAPI:t=>{const n=e.value.find(e=>e.id===t);n&&(n.enabled=!n.enabled,a())},exportConfig:()=>({apiConfigs:e.value,apiAssignments:t.value,exportTime:(new Date).toISOString()}),importConfig:n=>{try{n.apiConfigs&&Array.isArray(n.apiConfigs)&&(e.value=n.apiConfigs),n.apiAssignments&&Array.isArray(n.apiAssignments)&&(t.value=n.apiAssignments),a()}catch(e){throw console.error("[APIç®¡ç†] å¯¼å…¥é…ç½®å¤±è´¥:",e),e}}}})},228:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function a(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,a,o,i){if("function"!=typeof a)throw new TypeError("The listener must be a function");var s=new r(a,o||e,i),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function i(e,t){0===--e._eventsCount?e._events=new a:delete e._events[t]}function s(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,a,r=[];if(0===this._eventsCount)return r;for(a in e=this._events)t.call(e,a)&&r.push(n?a.slice(1):a);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,a=this._events[t];if(!a)return[];if(a.fn)return[a.fn];for(var r=0,o=a.length,i=new Array(o);r<o;r++)i[r]=a[r].fn;return i},s.prototype.listenerCount=function(e){var t=n?n+e:e,a=this._events[t];return a?a.fn?1:a.length:0},s.prototype.emit=function(e,t,a,r,o,i){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,d=this._events[s],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,a),!0;case 4:return d.fn.call(d.context,t,a,r),!0;case 5:return d.fn.call(d.context,t,a,r,o),!0;case 6:return d.fn.call(d.context,t,a,r,o,i),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var m,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,a);break;case 4:d[c].fn.call(d[c].context,t,a,r);break;default:if(!l)for(m=1,l=new Array(u-1);m<u;m++)l[m-1]=arguments[m];d[c].fn.apply(d[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,a,r){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||a&&s.context!==a||i(this,o);else{for(var l=0,c=[],d=s.length;l<d;l++)(s[l].fn!==t||r&&!s[l].once||a&&s[l].context!==a)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:i(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&i(this,t)):(this._events=new a,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},329:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.online-travel-panel[data-v-28e21ad0] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n}\n.notice[data-v-28e21ad0] {\n  margin: 1rem;\n  padding: 1rem;\n  border-radius: 8px;\n  text-align: center;\n}\n.error-indicator[data-v-28e21ad0] { background: rgba(239,68,68,0.1); color: #ef4444; border: 1px solid rgba(239,68,68,0.3);\n}\n.warning-indicator[data-v-28e21ad0] { background: rgba(245,158,11,0.1); color: #f59e0b; border: 1px solid rgba(245,158,11,0.3);\n}\n\n/* Tabs */\n.tabs-header[data-v-28e21ad0] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-surface);\n}\n.tabs-nav[data-v-28e21ad0] { display: flex; gap: 0.25rem;\n}\n.tab-btn[data-v-28e21ad0] {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  padding: 0.5rem 1rem;\n  border: none;\n  background: transparent;\n  color: var(--color-text-secondary);\n  font-size: 0.875rem;\n  cursor: pointer;\n  border-radius: 6px;\n  transition: all 0.15s;\n}\n.tab-btn[data-v-28e21ad0]:hover { background: var(--color-background); color: var(--color-text);\n}\n.tab-btn.active[data-v-28e21ad0] { background: var(--color-primary); color: #fff;\n}\n.header-actions[data-v-28e21ad0] { display: flex; gap: 0.5rem;\n}\n.action-btn[data-v-28e21ad0] {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  padding: 0.45rem 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n.action-btn[data-v-28e21ad0]:hover { border-color: var(--color-primary);\n}\n.action-btn[data-v-28e21ad0]:disabled { opacity: 0.5; cursor: not-allowed;\n}\n.action-btn.primary[data-v-28e21ad0] { background: var(--color-primary); border-color: var(--color-primary); color: #fff;\n}\n.action-btn.sm[data-v-28e21ad0] { padding: 0.35rem 0.6rem; font-size: 0.75rem;\n}\n.tab-content[data-v-28e21ad0] { flex: 1; overflow-y: auto; padding: 1rem;\n}\n\n/* Travel Tab */\n.travel-layout[data-v-28e21ad0] {\n  display: grid;\n  grid-template-columns: 1fr 1.5fr;\n  gap: 1rem;\n  height: 100%;\n}\n\n/* å·¦ä¾§ä¸–ç•Œåˆ—è¡¨é¢æ¿ */\n.worlds-list-panel[data-v-28e21ad0] {\n  display: flex;\n  flex-direction: column;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  overflow: hidden;\n  max-height: 600px;\n}\n.filter-bar[data-v-28e21ad0] {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  border-bottom: 1px solid var(--color-border);\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n.search-box[data-v-28e21ad0] {\n  flex: 1;\n}\n.search-input[data-v-28e21ad0] {\n  width: 100%;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text);\n  font-size: 0.875rem;\n}\n.search-input[data-v-28e21ad0]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n}\n.filter-select[data-v-28e21ad0] {\n  padding: 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text);\n  font-size: 0.875rem;\n  cursor: pointer;\n}\n.travel-points-bar[data-v-28e21ad0] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  border-bottom: 1px solid var(--color-border);\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n.points-icon[data-v-28e21ad0] {\n  color: var(--color-primary);\n}\n.points-label[data-v-28e21ad0] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.points-value[data-v-28e21ad0] {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n.worlds-list[data-v-28e21ad0] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n}\n.loading-state[data-v-28e21ad0],\n.empty-state[data-v-28e21ad0] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-28e21ad0] {\n  opacity: 0.4;\n  margin-bottom: 1rem;\n}\n.world-card[data-v-28e21ad0] {\n  padding: 0.75rem;\n  margin-bottom: 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  background: var(--color-background);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.world-card[data-v-28e21ad0]:hover {\n  border-color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n.world-card.selected[data-v-28e21ad0] {\n  border-color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.1);\n  box-shadow: 0 0 0 1px var(--color-primary);\n}\n.world-info[data-v-28e21ad0] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.owner-name[data-v-28e21ad0] {\n  font-weight: 600;\n  font-size: 0.9375rem;\n  color: var(--color-text);\n}\n.world-meta[data-v-28e21ad0] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.badge[data-v-28e21ad0] {\n  padding: 0.2rem 0.5rem;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 500;\n}\n.badge-public[data-v-28e21ad0] {\n  background: rgba(34, 197, 94, 0.15);\n  color: #22c55e;\n}\n.badge-hidden[data-v-28e21ad0] {\n  background: rgba(245, 158, 11, 0.15);\n  color: #f59e0b;\n}\n.badge-locked[data-v-28e21ad0] {\n  background: rgba(239, 68, 68, 0.15);\n  color: #ef4444;\n}\n.world-id[data-v-28e21ad0] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.load-more-btn[data-v-28e21ad0] {\n  width: 100%;\n  padding: 0.75rem;\n  margin-top: 0.5rem;\n  border: 1px dashed var(--color-border);\n  border-radius: 6px;\n  background: transparent;\n  color: var(--color-text-secondary);\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.load-more-btn[data-v-28e21ad0]:hover:not(:disabled) {\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n.load-more-btn[data-v-28e21ad0]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* å³ä¾§ç©¿è¶Šæ“ä½œé¢æ¿ */\n.travel-action-panel[data-v-28e21ad0] {\n  display: flex;\n  flex-direction: column;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  padding: 1.5rem;\n}\n.selected-world-detail h3[data-v-28e21ad0] {\n  margin: 0 0 1rem 0;\n  font-size: 1.25rem;\n  color: var(--color-text);\n}\n.detail-info[data-v-28e21ad0] {\n  margin-bottom: 1.5rem;\n}\n.info-row[data-v-28e21ad0] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 0;\n  border-bottom: 1px solid var(--color-border);\n}\n.info-row[data-v-28e21ad0]:last-child {\n  border-bottom: none;\n}\n.info-label[data-v-28e21ad0] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.info-value[data-v-28e21ad0] {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--color-text);\n}\n.invite-code-section[data-v-28e21ad0] {\n  margin-bottom: 1.5rem;\n}\n.invite-code-section label[data-v-28e21ad0] {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.invite-code-input[data-v-28e21ad0] {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text);\n  font-size: 0.875rem;\n}\n.invite-code-input[data-v-28e21ad0]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n}\n.action-buttons[data-v-28e21ad0] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.session-info-box[data-v-28e21ad0] {\n  padding: 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n.session-label[data-v-28e21ad0] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  margin-bottom: 0.5rem;\n}\n.empty-selection[data-v-28e21ad0] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem 1rem;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.empty-selection .empty-icon[data-v-28e21ad0] {\n  opacity: 0.3;\n  margin-bottom: 1rem;\n}\n.my-world-info[data-v-28e21ad0] {\n  margin-top: 2rem;\n  padding: 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  background: var(--color-background);\n  width: 100%;\n  max-width: 300px;\n}\n.info-title[data-v-28e21ad0] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-weight: 600;\n  margin-bottom: 0.75rem;\n  color: var(--color-text);\n}\n.muted[data-v-28e21ad0] {\n  color: var(--color-text-secondary);\n  font-size: 0.8rem;\n}\n\n/* Map Tab */\n.empty-state[data-v-28e21ad0] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 300px;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-28e21ad0] { opacity: 0.4; margin-bottom: 1rem;\n}\n.map-layout[data-v-28e21ad0] { display: grid; grid-template-columns: 1.5fr 1fr; gap: 1rem; height: 100%;\n}\n.map-canvas[data-v-28e21ad0] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  padding: 0.5rem;\n}\n.poi-map[data-v-28e21ad0] { width: 100%; height: 350px;\n}\n.edge-line[data-v-28e21ad0] { stroke: var(--color-border); stroke-width: 2;\n}\n.node[data-v-28e21ad0] { cursor: pointer;\n}\n.node circle[data-v-28e21ad0] { fill: rgba(var(--color-primary-rgb),0.15); stroke: var(--color-primary); stroke-width: 2;\n}\n.node text[data-v-28e21ad0] { font-size: 11px; fill: var(--color-text);\n}\n.node.reachable circle[data-v-28e21ad0] { fill: rgba(34,197,94,0.15); stroke: #22c55e;\n}\n.node.active circle[data-v-28e21ad0] { fill: rgba(var(--color-accent-rgb),0.25); stroke: var(--color-accent);\n}\n.poi-sidebar[data-v-28e21ad0] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n}\n.current-loc[data-v-28e21ad0] { font-weight: 600; margin-bottom: 0.75rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--color-border);\n}\n.poi-list[data-v-28e21ad0] { flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 0.4rem;\n}\n.poi-item[data-v-28e21ad0] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  cursor: pointer;\n  transition: all 0.15s;\n}\n.poi-item[data-v-28e21ad0]:hover:not(:disabled) { border-color: var(--color-primary);\n}\n.poi-item[data-v-28e21ad0]:disabled { opacity: 0.5; cursor: not-allowed;\n}\n.poi-item.active[data-v-28e21ad0] { background: rgba(var(--color-accent-rgb),0.1); border-color: var(--color-accent);\n}\n.poi-item.reachable[data-v-28e21ad0] { border-color: #22c55e;\n}\n.poi-name[data-v-28e21ad0] { font-weight: 500; font-size: 0.875rem;\n}\n.poi-meta[data-v-28e21ad0] { font-size: 0.75rem; color: var(--color-text-secondary);\n}\n\n/* Reports Tab */\n.reports-header[data-v-28e21ad0] { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;\n}\n.report-list[data-v-28e21ad0] { display: flex; flex-direction: column; gap: 0.5rem;\n}\n.report-item[data-v-28e21ad0] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  font-size: 0.875rem;\n}\n.badge[data-v-28e21ad0] { padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 500;\n}\n.badge.unread[data-v-28e21ad0] { background: rgba(245,158,11,0.15); color: #f59e0b;\n}\n.badge.read[data-v-28e21ad0] { background: rgba(107,114,128,0.15); color: #6b7280;\n}\n.muted[data-v-28e21ad0] { color: var(--color-text-secondary); font-size: 0.8rem;\n}\n@media (max-width: 768px) {\n.travel-layout[data-v-28e21ad0] {\n    grid-template-columns: 1fr;\n    gap: 0.75rem;\n}\n.worlds-list-panel[data-v-28e21ad0] {\n    max-height: 40vh;\n}\n.filter-bar[data-v-28e21ad0] {\n    flex-direction: column;\n    gap: 0.5rem;\n}\n.travel-action-panel[data-v-28e21ad0] {\n    padding: 1rem;\n}\n.map-layout[data-v-28e21ad0] {\n    grid-template-columns: 1fr;\n}\n.poi-map[data-v-28e21ad0] {\n    height: 250px;\n}\n}\n",""]);const s=i},406:(e,t,n)=>{"use strict";n.d(t,{Ps:()=>a,lS:()=>o,qh:()=>r});const a='\n# ã€æ•°æ®ç»“æ„å®šä¹‰ã€‘å®Œæ•´SaveDataç»“æ„\n\n## 1. è§’è‰²ï¼ˆV3ï¼šè§’è‰².*ï¼‰\n\n### 1.1 èº«ä»½ï¼ˆMostly Read-onlyï¼Œè·¯å¾„ï¼š`è§’è‰².èº«ä»½`ï¼‰\n- åå­—: string (åªè¯»)\n- æ€§åˆ«: "ç”·"|"å¥³"|"å…¶ä»–" (åªè¯»)\n- å¹´é¾„: number (è‡ªåŠ¨è®¡ç®—ï¼Œç¦æ”¹)\n- å‡ºç”Ÿæ—¥æœŸ: {å¹´, æœˆ, æ—¥, å°æ—¶?, åˆ†é’Ÿ?} (åªè¯»)\n- ä¸–ç•Œ: string (åªè¯»)\n- ç§æ—: string (é»˜è®¤"äººæ—")\n- å¤©èµ„: string (åªè¯»)\n- å‡ºç”Ÿ: string|{åç§°, æè¿°} (åªè¯»)\n- çµæ ¹: string|{åç§°, å“çº§, æè¿°, å±æ€§[], ä¿®ç‚¼åŠ æˆ} (åªè¯»)\n- å¤©èµ‹: [{åç§°, æè¿°}] (åªè¯»)\n- å…ˆå¤©å…­å¸: {æ ¹éª¨, çµæ€§, æ‚Ÿæ€§, æ°”è¿, é­…åŠ›, å¿ƒæ€§} (åªè¯»ï¼Œ1-10)\n- åå¤©å…­å¸: {æ ¹éª¨, çµæ€§, æ‚Ÿæ€§, æ°”è¿, é­…åŠ›, å¿ƒæ€§} (å¯ä¿®æ”¹ï¼Œç”¨add)\n\n### 1.2 å±æ€§ï¼ˆModifiableï¼Œè·¯å¾„ï¼š`è§’è‰².å±æ€§`ï¼‰\n- å¢ƒç•Œ: {åç§°, é˜¶æ®µ, å½“å‰è¿›åº¦, ä¸‹ä¸€çº§æ‰€éœ€, çªç ´æè¿°} (ç”¨setæ›´æ–°æ•´ä¸ªå¯¹è±¡ï¼Œçªç ´æ—¶å¿…é¡»æ›´æ–°çªç ´æè¿°)\n- å£°æœ›: number (ç”¨add)\n- æ°”è¡€: {å½“å‰, ä¸Šé™} (å½“å‰ç”¨addï¼Œä¸Šé™çªç ´æ—¶ç”¨add)\n- çµæ°”: {å½“å‰, ä¸Šé™} (å½“å‰ç”¨addï¼Œä¸Šé™çªç ´æ—¶ç”¨add)\n- ç¥è¯†: {å½“å‰, ä¸Šé™} (å½“å‰ç”¨addï¼Œä¸Šé™çªç ´æ—¶ç”¨add)\n- å¯¿å‘½: {å½“å‰, ä¸Šé™} (å½“å‰è‡ªåŠ¨å¢åŠ ï¼Œä¸Šé™çªç ´æ—¶ç”¨add)\n\n### 1.3 ä½ç½®ï¼ˆè·¯å¾„ï¼š`è§’è‰².ä½ç½®`ï¼‰\n- ä½ç½®: {æè¿°:"å¤§é™†Â·åœ°ç‚¹", x, y} (ç”¨setæ›´æ–°æ•´ä¸ªå¯¹è±¡ï¼Œä¸‰ä¸ªå­—æ®µå¿…é¡»åŒæ—¶è®¾ç½®)\n  æ³¨æ„ï¼šx/y ä½¿ç”¨æ¸¸æˆåæ ‡ç³»ç»Ÿï¼ˆåƒç´ åæ ‡ï¼‰\n  - x: æ¨ªåæ ‡ï¼ŒèŒƒå›´ 0-10000\n  - y: çºµåæ ‡ï¼ŒèŒƒå›´ 0-10000\n  - å…·ä½“èŒƒå›´ç”±ä¸–ç•Œåœ°å›¾é…ç½®å†³å®šï¼Œå‚è€ƒ"åœ°å›¾åæ ‡ç³»ç»Ÿ"ç« èŠ‚\n\n### 1.4 æ•ˆæœï¼ˆbuff/debuffï¼Œæ•°ç»„ï¼›è·¯å¾„ï¼š`è§’è‰².æ•ˆæœ`ï¼‰\n- æ•ˆæœ: [{çŠ¶æ€åç§°, ç±»å‹:"buff"|"debuff", ç”Ÿæˆæ—¶é—´, æŒç»­æ—¶é—´åˆ†é’Ÿ, çŠ¶æ€æè¿°, å¼ºåº¦?, æ¥æº?}]\n  - åªèƒ½ç”¨ push æ·»åŠ ï¼›è¿‡æœŸç”±ç³»ç»Ÿæ¸…ç†\n  - ç”Ÿæˆæ—¶é—´ä½¿ç”¨å½“å‰ `å…ƒæ•°æ®.æ—¶é—´`\n\n### 1.5 è£…å¤‡ï¼ˆEquipmentï¼Œè·¯å¾„ï¼š`è§’è‰².è£…å¤‡`ï¼‰\n- è£…å¤‡1: string|null (è£…å¤‡IDæˆ–null)\n- è£…å¤‡2: string|null\n- è£…å¤‡3: string|null\n- è£…å¤‡4: string|null\n- è£…å¤‡5: string|null\n- è£…å¤‡6: string|null\n\n\n## 2. å¤§é“ï¼ˆModifiableï¼Œè·¯å¾„ï¼š`è§’è‰².å¤§é“`ï¼‰\n- å¤§é“åˆ—è¡¨: {é“å: DaoDataå¯¹è±¡}\n\n### DaoDataå¯¹è±¡å¿…éœ€å­—æ®µ\n- é“å: string (å¦‚"å‰‘é“"ã€"ä¸¹é“")\n- æè¿°: string (å¤§é“æè¿°)\n- é˜¶æ®µåˆ—è¡¨: DaoStage[] (å¤§é“çš„æ‰€æœ‰é˜¶æ®µå®šä¹‰ï¼Œæ•°ç»„)\n- æ˜¯å¦è§£é”: boolean (æ˜¯å¦å·²è§£é”æ­¤é“)\n- å½“å‰é˜¶æ®µ: number (é˜¶æ®µç´¢å¼•ï¼Œ0ä¸º"å…¥é—¨")\n- å½“å‰ç»éªŒ: number (å½“å‰ç»éªŒå€¼)\n- æ€»ç»éªŒ: number (æ€»ç´¯è®¡ç»éªŒ)\n\n### DaoStageå¯¹è±¡å­—æ®µ\n- é˜¶æ®µå: string (å¦‚"å…¥é—¨"ã€"å°æˆ"ã€"å¤§æˆ"ç­‰)\n- éœ€æ±‚ç»éªŒ: number\n- æ„Ÿæ‚Ÿæ¡ç›®?: string[] (é˜¶æ®µæ„Ÿæ‚Ÿ)\n- çªç ´éœ€æ±‚?: string (çªç ´æ¡ä»¶æè¿°)\n\nè·¯å¾„ç¤ºä¾‹ï¼š\n- set `è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.å‰‘é“` {"é“å":"å‰‘é“","æè¿°":"ä»¥å‰‘å…¥é“","é˜¶æ®µåˆ—è¡¨":[{"é˜¶æ®µå":"å…¥é—¨","éœ€æ±‚ç»éªŒ":100}],"æ˜¯å¦è§£é”":true,"å½“å‰é˜¶æ®µ":0,"å½“å‰ç»éªŒ":0,"æ€»ç»éªŒ":0}\n- add `è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.å‰‘é“.å½“å‰ç»éªŒ` 100\n\n\n## 3. èƒŒåŒ…ä¸ç‰©å“ (Inventory & Items - Modifiableï¼Œè·¯å¾„ï¼š`è§’è‰².èƒŒåŒ…`)\n\n### 3.1 èƒŒåŒ… (Inventory)\n- çµçŸ³: {ä¸‹å“:number, ä¸­å“:number, ä¸Šå“:number, æå“:number} (ç”¨addå¢å‡)\n- ç‰©å“: {ç‰©å“ID: Itemå¯¹è±¡} (ç”¨setæ·»åŠ å®Œæ•´ç‰©å“å¯¹è±¡ï¼Œç”¨deleteåˆ é™¤)\n\n**ã€ç‰©å“æ“ä½œæ–¹å¼ã€‘**\n- æ·»åŠ æ–°ç‰©å“: {"action":"set", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.{ç‰©å“ID}", "value":{å®Œæ•´ç‰©å“å¯¹è±¡}}\n- åˆ é™¤ç‰©å“: {"action":"delete", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.{ç‰©å“ID}"}\n- ä¿®æ”¹ç‰©å“æ•°é‡: {"action":"add", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.{ç‰©å“ID}.æ•°é‡", "value":å¢å‡å€¼}\n- ä¿®æ”¹ç‰©å“å±æ€§: {"action":"set", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.{ç‰©å“ID}.å±æ€§å", "value":"æ–°å€¼"}\n\nç¤ºä¾‹ï¼š\n- æ·»åŠ ç‰©å“: {"action":"set", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.item_jade_001", "value":{"ç‰©å“ID":"item_jade_001","åç§°":"è¡€ç‰","ç±»å‹":"å…¶ä»–","å“è´¨":{"quality":"ç„","grade":5},"æ•°é‡":1,"æè¿°":"ä¸€å—æŸ“è¡€çš„ç‰ä½©"}}\n- ä¿®æ”¹æè¿°: {"action":"set", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.item_jade_001.æè¿°", "value":"ç‰ä½©ä¸Šçš„è¡€æ¸å·²è¢«çµæ°”å‡€åŒ–"}\n- ä¿®æ”¹ä½¿ç”¨æ•ˆæœ: {"action":"set", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.item_jade_001.ä½¿ç”¨æ•ˆæœ", "value":"å¯ä»¥æ³¨å…¥çµæ°”æ¿€æ´»"}\n- å¢åŠ æ•°é‡: {"action":"add", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.item_jade_001.æ•°é‡", "value":1}\n\n### 3.2 ç‰©å“ç±»å‹ (Item Types)\n\n#### 3.2.1 è£…å¤‡ç‰©å“\nå®Œæ•´ç»“æ„: {ç‰©å“ID:string, åç§°:string, ç±»å‹:"è£…å¤‡", å“è´¨:{quality:"å‡¡"|"é»„"|"ç„"|"åœ°"|"å¤©"|"ä»™"|"ç¥", grade:0-10}, æ•°é‡:number, æè¿°:string, è£…å¤‡å¢å¹…?:object, ç‰¹æ®Šæ•ˆæœ?:string, å·²è£…å¤‡:boolean}\n\nå­—æ®µè¯´æ˜:\n- ç‰©å“ID: string (å¿…å¡«ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼: equip_æ—¶é—´æˆ³_éšæœºæ•°)\n- åç§°: string (å¿…å¡«ï¼Œè£…å¤‡åç§°)\n- ç±»å‹: "è£…å¤‡" (å¿…å¡«ï¼Œå›ºå®šå€¼)\n- å“è´¨: object (å¿…å¡«)\n  - quality: "å‡¡"|"é»„"|"ç„"|"åœ°"|"å¤©"|"ä»™"|"ç¥" (å“è´¨ç­‰çº§)\n  - grade: number (å“çº§ï¼Œ0-10ï¼Œ0=æ®‹ç¼ºï¼Œ1-3=ä¸‹å“ï¼Œ4-6=ä¸­å“ï¼Œ7-9=ä¸Šå“ï¼Œ10=æå“)\n- æ•°é‡: number (å¿…å¡«ï¼Œé€šå¸¸ä¸º1ï¼Œè£…å¤‡ä¸å¯å åŠ )\n- æè¿°: string (å¿…å¡«ï¼Œè£…å¤‡æè¿°)\n- è£…å¤‡å¢å¹…: object (å¯é€‰ï¼Œå±æ€§åŠ æˆå¯¹è±¡)\n  - æ ¼å¼: {"åå¤©å…­å¸": {"æ ¹éª¨": 2, "çµæ€§": 1}, "æ°”è¡€ä¸Šé™": 50, "çµæ°”ä¸Šé™": 30}\n  - åå¤©å…­å¸: object (å¯é€‰ï¼Œå…­å¸åŠ æˆ)\n  - æ°”è¡€ä¸Šé™: number (å¯é€‰)\n  - çµæ°”ä¸Šé™: number (å¯é€‰)\n  - ç¥è¯†ä¸Šé™: number (å¯é€‰)\n- ç‰¹æ®Šæ•ˆæœ: string (å¯é€‰ï¼Œæè¿°è£…å¤‡çš„ç‰¹æ®Šèƒ½åŠ›)\n  - ç¤ºä¾‹: "æ”»å‡»æ—¶æœ‰10%å‡ ç‡è§¦å‘ç«ç„°ä¼¤å®³"\n- å·²è£…å¤‡: boolean (å¿…å¡«ï¼Œtrue=å·²è£…å¤‡ï¼Œfalse=æœªè£…å¤‡)\n\n#### 3.2.2 åŠŸæ³•ç‰©å“\nå®Œæ•´ç»“æ„: {ç‰©å“ID:string, åç§°:string, ç±»å‹:"åŠŸæ³•", å“è´¨:{quality:"å‡¡"|"é»„"|"ç„"|"åœ°"|"å¤©"|"ä»™"|"ç¥", grade:0-10}, æ•°é‡:number, æè¿°:string, åŠŸæ³•æ•ˆæœ:string, åŠŸæ³•æŠ€èƒ½:array, ä¿®ç‚¼è¿›åº¦:number, å·²è§£é”æŠ€èƒ½:array, å·²è£…å¤‡:boolean}\n\nå­—æ®µè¯´æ˜:\n- ç‰©å“ID: string (å¿…å¡«ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼: gongfa_æ—¶é—´æˆ³_éšæœºæ•°)\n- åç§°: string (å¿…å¡«ï¼ŒåŠŸæ³•åç§°)\n- ç±»å‹: "åŠŸæ³•" (å¿…å¡«ï¼Œå›ºå®šå€¼)\n- å“è´¨: object (å¿…å¡«ï¼ŒåŒè£…å¤‡)\n- æ•°é‡: number (å¿…å¡«ï¼Œé€šå¸¸ä¸º1ï¼ŒåŠŸæ³•ä¸å¯å åŠ )\n- æè¿°: string (å¿…å¡«ï¼ŒåŠŸæ³•æè¿°)\n- åŠŸæ³•æ•ˆæœ: string (å¿…å¡«ï¼Œæè¿°åŠŸæ³•çš„æ•ˆæœ)\n  - ç¤ºä¾‹: "ä¿®ç‚¼é€Ÿåº¦æå‡300%ï¼Œå¯¹é­…æƒ‘ç±»æœ¯æ³•å®Œå…¨å…ç–«ï¼Œå¹¶èƒ½åå‘æŒæ§æ–½æœ¯è€…å¿ƒç¥"\n- åŠŸæ³•æŠ€èƒ½: array (å¿…å¡«ï¼ŒæŠ€èƒ½åˆ—è¡¨ï¼Œä¸å¯ä¸ºç©ºï¼›è‡³å°‘1ä¸ªï¼Œä¸”ç¬¬1ä¸ªæŠ€èƒ½ç†Ÿç»ƒåº¦è¦æ±‚=0)\n  - å…ƒç´ æ ¼å¼: {æŠ€èƒ½åç§°:string, æŠ€èƒ½æè¿°:string, ç†Ÿç»ƒåº¦è¦æ±‚:number, æ¶ˆè€—?:string}\n  - ç¤ºä¾‹: [{"æŠ€èƒ½åç§°":"åŸºç¡€å‰‘æ°”","æŠ€èƒ½æè¿°":"å‡èšçµåŠ›å½¢æˆå‰‘æ°”æ”»å‡»","ç†Ÿç»ƒåº¦è¦æ±‚":0,"æ¶ˆè€—":"çµæ°”10ç‚¹"},{"æŠ€èƒ½åç§°":"å¾¡å‰‘æœ¯","æŠ€èƒ½æè¿°":"å¾¡ä½¿é£å‰‘æ”»æ•Œ","ç†Ÿç»ƒåº¦è¦æ±‚":30,"æ¶ˆè€—":"çµæ°”50ç‚¹"}]\n- ä¿®ç‚¼è¿›åº¦: number (å¿…å¡«ï¼Œ0-100ï¼Œè¡¨ç¤ºä¿®ç‚¼ç™¾åˆ†æ¯”)\n- å·²è§£é”æŠ€èƒ½: array (å¿…å¡«ï¼Œå·²è§£é”çš„æŠ€èƒ½åç§°åˆ—è¡¨ï¼Œå¯ä»¥ä¸ºç©ºæ•°ç»„[])\n  - ç¤ºä¾‹: ["åŸºç¡€å‰‘æ°”", "å¾¡å‰‘æœ¯"]\n- å·²è£…å¤‡: boolean (å¿…å¡«ï¼Œtrue=æ­£åœ¨ä¿®ç‚¼ï¼Œfalse=æœªä¿®ç‚¼)\n\né‡è¦: ä¿®ç‚¼è¿›åº¦å’Œå·²è§£é”æŠ€èƒ½å­˜å‚¨åœ¨èƒŒåŒ…ç‰©å“ä¸­ï¼Œç”¨add/setä¿®æ”¹\nç¤ºä¾‹: {"action":"add", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.gongfa_001.ä¿®ç‚¼è¿›åº¦", "value":10}\n\n#### 3.2.3 æ¶ˆè€—å“ä¸ææ–™\nå®Œæ•´ç»“æ„: {ç‰©å“ID:string, åç§°:string, ç±»å‹:"ä¸¹è¯"|"ææ–™"|"å…¶ä»–", å“è´¨:{quality:"å‡¡"|"é»„"|"ç„"|"åœ°"|"å¤©"|"ä»™"|"ç¥", grade:0-10}, æ•°é‡:number, æè¿°:string, ä½¿ç”¨æ•ˆæœ?:string}\n\nå­—æ®µè¯´æ˜:\n- ç‰©å“ID: string (å¿…å¡«ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œæ ¼å¼: item_æ—¶é—´æˆ³_éšæœºæ•°)\n- åç§°: string (å¿…å¡«ï¼Œç‰©å“åç§°)\n- ç±»å‹: "ä¸¹è¯"|"ææ–™"|"å…¶ä»–" (å¿…å¡«)\n  - ä¸¹è¯: å¯ç›´æ¥ä½¿ç”¨çš„æ¶ˆè€—å“ï¼Œå¦‚å›å¤ä¸¹ã€å¢ç›Šä¸¹ç­‰\n  - ææ–™: ç”¨äºç‚¼ä¸¹ã€ç‚¼å™¨ç­‰çš„åŸææ–™\n  - å…¶ä»–: ä»»åŠ¡ç‰©å“ã€æ”¶è—å“ç­‰æ‚é¡¹\n- å“è´¨: object (å¿…å¡«ï¼ŒåŒè£…å¤‡)\n- æ•°é‡: number (å¿…å¡«ï¼Œå¯å åŠ )\n- æè¿°: string (å¿…å¡«ï¼Œç‰©å“æè¿°)\n- ä½¿ç”¨æ•ˆæœ: string (å¯é€‰ï¼Œæè¿°ç‰©å“çš„ä½¿ç”¨æ•ˆæœï¼›ä¸¹è¯ç±»å»ºè®®å¡«å†™ï¼Œææ–™ç±»é€šå¸¸æ²¡æœ‰)\n  - ç¤ºä¾‹: "æ¢å¤500ç‚¹æ°”è¡€ï¼Œå¹¶åœ¨1å°æ—¶å†…æå‡æ°”è¡€æ¢å¤é€Ÿåº¦50%"\n\n### 3.3 è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•ï¼ˆå½“å‰ä¿®ç‚¼å¼•ç”¨ï¼‰\n**ã€ä¸¥ç¦ä¿®æ”¹ã€‘æ­¤å­—æ®µåªå­˜å‚¨å¼•ç”¨ï¼Œä¸å­˜å‚¨ä»»ä½•æ•°æ®ï¼**\n- ç‰©å“ID: string (æŒ‡å‘èƒŒåŒ…ä¸­çš„åŠŸæ³•ID)\n- åç§°: string\n\n**ã€å…³é”®è§„åˆ™ã€‘ä¿®ç‚¼åŠŸæ³•çš„ä½ç½®å’Œä¿®æ”¹æ–¹å¼ï¼š**\n- [é”™è¯¯] é”™è¯¯ï¼šä¿®æ”¹"è§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}"ä»¥å¤–çš„ä½ç½®æ¥â€œä¼ªé€ è¿›åº¦â€\n- [æ­£ç¡®] æ­£ç¡®ï¼šä¿®æ”¹"è§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}"å­—æ®µ\n- ä¿®ç‚¼è¿›åº¦å­˜å‚¨ä½ç½®ï¼šè§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}.ä¿®ç‚¼è¿›åº¦\n- å·²è§£é”æŠ€èƒ½å­˜å‚¨ä½ç½®ï¼šè§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}.å·²è§£é”æŠ€èƒ½\n- åŠŸæ³•æŠ€èƒ½åˆ—è¡¨å­˜å‚¨ä½ç½®ï¼šè§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}.åŠŸæ³•æŠ€èƒ½\n\nç¤ºä¾‹æ“ä½œï¼š\n- å¢åŠ ä¿®ç‚¼è¿›åº¦: {"action":"add", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.gongfa_001.ä¿®ç‚¼è¿›åº¦", "value":10}\n- è§£é”æ–°æŠ€èƒ½: {"action":"push", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.gongfa_001.å·²è§£é”æŠ€èƒ½", "value":"å¾¡å‰‘æœ¯"}\n\n### 3.4 è§’è‰².æŠ€èƒ½.æŒæ¡æŠ€èƒ½ï¼ˆåªè¯»ï¼‰\n**ã€å®Œå…¨åªè¯»ã€‘æ­¤å­—æ®µç”±ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—ï¼ŒAIä¸¥ç¦é€šè¿‡tavern_commandsä¿®æ”¹ï¼**\n- [{æŠ€èƒ½åç§°, æŠ€èƒ½æè¿°, æ¥æº, æ¶ˆè€—, ç†Ÿç»ƒåº¦, ä½¿ç”¨æ¬¡æ•°}]\n\n**ã€å…³é”®è§„åˆ™ã€‘æŒæ¡æŠ€èƒ½çš„ä½ç½®å’Œæ¥æºï¼š**\n- [é”™è¯¯] é”™è¯¯ï¼šç›´æ¥ set/push "è§’è‰².æŠ€èƒ½.æŒæ¡æŠ€èƒ½" æ•°ç»„\n- [é”™è¯¯] é”™è¯¯ï¼šä¿®æ”¹ "è§’è‰².æŠ€èƒ½.æŒæ¡æŠ€èƒ½" ä¸­çš„æŠ€èƒ½åç§°/æè¿°/æ¥æº/æ¶ˆè€—\n\n**ã€æ•°æ®æ¥æºã€‘æŒæ¡æŠ€èƒ½ä»å“ªé‡Œæ¥ï¼š**\n- ç³»ç»Ÿè‡ªåŠ¨ä»"è§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}.å·²è§£é”æŠ€èƒ½"ä¸­æå–\n- å½“åŠŸæ³•è£…å¤‡åï¼Œå·²è§£é”çš„æŠ€èƒ½ä¼šè‡ªåŠ¨å‡ºç°åœ¨"è§’è‰².æŠ€èƒ½.æŒæ¡æŠ€èƒ½"ä¸­\n- æŠ€èƒ½çš„åŸºç¡€ä¿¡æ¯ï¼ˆåç§°ã€æè¿°ã€æ¶ˆè€—ï¼‰æ¥è‡ª"è§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}.åŠŸæ³•æŠ€èƒ½"æ•°ç»„\n\n\n## 4. å…³ç³»ï¼ˆNPCæ¡£æ¡ˆå­—å…¸ï¼Œå¯ä¿®æ”¹ï¼Œè·¯å¾„ï¼š`ç¤¾äº¤.å…³ç³»`ï¼‰\n\n### ğŸš¨ ã€æœ€é«˜ä¼˜å…ˆçº§ã€‘NPC åˆ›å»ºè§„åˆ™ ğŸš¨\n**æ–°å¢ NPC å¿…é¡»ä¸€æ¬¡æ€§åˆ›å»ºå®Œæ•´å¯¹è±¡ï¼Œä¸èƒ½åˆ†æ­¥æ·»åŠ ï¼**\n\n- **[æ­£ç¡®]** ä½¿ç”¨ set æ“ä½œåˆ›å»ºå®Œæ•´çš„ NPC å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ\n- **[é”™è¯¯]** å…ˆåˆ›å»ºç©ºå¯¹è±¡ï¼Œå†é€ä¸ªæ·»åŠ å­—æ®µ\n- **[é”™è¯¯]** åªæ·»åŠ éƒ¨åˆ†å­—æ®µï¼Œç¼ºå°‘å¿…éœ€å­—æ®µ\n- **[å¼ºåˆ¶]** NPCå¯¹è±¡é‡Œå¿…é¡»åŒ…å« `åå­—` å­—æ®µï¼Œä¸”ä¸è·¯å¾„ä¸­çš„NPCåä¸€è‡´\n\n### âœ… ã€NPCæ•°é‡å¾ˆå¤šæ—¶çš„"æœ€å°å¯ç”¨å­—æ®µ"ã€‘\nå½“å…³ç³»æ•°æ®å¾ˆå¤šã€ä¸Šä¸‹æ–‡ç´§å¼ æ—¶ï¼Œå…è®¸ç²¾ç®€æè¿°æ€§å­—æ®µï¼Œä½† **ä»¥ä¸‹å­—æ®µç»ä¸èƒ½ç¼ºå¤±**ï¼ˆå¦åˆ™å‰ç«¯å¯èƒ½æ— æ³•å±•ç¤º/ç³»ç»Ÿä¼šæ¸…ç†ä¸ºæ— æ•ˆæ•°æ®ï¼‰ï¼š\n- `åå­—`ã€`æ€§åˆ«`ã€`å‡ºç”Ÿæ—¥æœŸ`ã€`å¢ƒç•Œ`ã€`ä¸ç©å®¶å…³ç³»`ã€`å¥½æ„Ÿåº¦`\n- `å½“å‰ä½ç½®.æè¿°`ã€`å½“å‰å¤–è²ŒçŠ¶æ€`ã€`å½“å‰å†…å¿ƒæƒ³æ³•`\n- `è®°å¿†`ï¼ˆæ•°ç»„ï¼Œå¯ä¸ºç©ºæ•°ç»„ï¼‰ã€`èƒŒåŒ…`ã€`å®æ—¶å…³æ³¨`\n\n**ç¤ºä¾‹ - æ­£ç¡®åšæ³•ï¼š**\n```json\n{"action":"set", "key":"ç¤¾äº¤.å…³ç³».å¼ ä¸‰", "value":{"åå­—":"å¼ ä¸‰","æ€§åˆ«":"ç”·","å¹´é¾„":25,"å‡ºç”Ÿæ—¥æœŸ":{"å¹´":975,"æœˆ":3,"æ—¥":15},"ç§æ—":"äººæ—","å‡ºç”Ÿ":"æ•£ä¿®","å¤–è²Œæè¿°":"...","æ€§æ ¼ç‰¹å¾":["..."],"å¢ƒç•Œ":{"åç§°":"ç­‘åŸº","é˜¶æ®µ":"åˆæœŸ"},"çµæ ¹":{"åç§°":"ç«çµæ ¹","å“çº§":"ä¸­å“"},"å¤©èµ‹":[],"å…ˆå¤©å…­å¸":{"æ ¹éª¨":5,"çµæ€§":6,"æ‚Ÿæ€§":5,"æ°”è¿":4,"é­…åŠ›":5,"å¿ƒæ€§":6},"ä¸ç©å®¶å…³ç³»":"é™Œç”Ÿäºº","å¥½æ„Ÿåº¦":0,"äººæ ¼åº•çº¿":["..."],"è®°å¿†":[],"è®°å¿†æ€»ç»“":[],"å½“å‰ä½ç½®":{"æè¿°":"...","x":5000,"y":5000},"åŠ¿åŠ›å½’å±":"æ— ","å½“å‰å¤–è²ŒçŠ¶æ€":"...","å½“å‰å†…å¿ƒæƒ³æ³•":"...","èƒŒåŒ…":{"çµçŸ³":{"ä¸‹å“":0,"ä¸­å“":0,"ä¸Šå“":0,"æå“":0},"ç‰©å“":{}},"å®æ—¶å…³æ³¨":false}}\n```\n\n**ç¤ºä¾‹ - é”™è¯¯åšæ³•ï¼ˆä¸¥ç¦ï¼‰ï¼š**\n```\nâŒ é”™è¯¯ï¼šå…ˆåˆ›å»ºç©ºå¯¹è±¡\n{"action":"set", "key":"ç¤¾äº¤.å…³ç³».å¼ ä¸‰", "value":{}}\nâŒ é”™è¯¯ï¼šå†æ·»åŠ å­—æ®µ\n{"action":"set", "key":"ç¤¾äº¤.å…³ç³».å¼ ä¸‰.åå­—", "value":"å¼ ä¸‰"}\n```\n\n---\n\n### NPC æ•°æ®ç»“æ„\n- {NPCåå­—: NPCæ¡£æ¡ˆå¯¹è±¡}\n  - åå­—: string\n  - æ€§åˆ«: "ç”·"|"å¥³"|"å…¶ä»–"\n  - å¹´é¾„: number (è‡ªåŠ¨è®¡ç®—)\n  - å‡ºç”Ÿæ—¥æœŸ: {å¹´, æœˆ, æ—¥}\n  - ç§æ—: string\n  - å‡ºç”Ÿ: string\n  - å¤–è²Œæè¿°: string\n  - æ€§æ ¼ç‰¹å¾: [string]\n  - å¢ƒç•Œ: {åç§°, é˜¶æ®µ, å½“å‰è¿›åº¦?, ä¸‹ä¸€çº§æ‰€éœ€?, çªç ´æè¿°?} (ç”¨setæ›´æ–°æ•´ä¸ªå¯¹è±¡)\n  - çµæ ¹: {åç§°, å“çº§}\n  - å¤©èµ‹: [{åç§°, æè¿°}]\n  - å…ˆå¤©å…­å¸: {æ ¹éª¨, çµæ€§, æ‚Ÿæ€§, æ°”è¿, é­…åŠ›, å¿ƒæ€§}\n  - ä¸ç©å®¶å…³ç³»: string\n  - å¥½æ„Ÿåº¦: number (-100~100ï¼Œç”¨add)\n  - äººæ ¼åº•çº¿: [string]\n  - è®°å¿†: [string] (ç”¨pushæ·»åŠ ã€‚éµå¾ªã€è®°å¿†ç”Ÿæˆé“å¾‹ã€‘ï¼šç®€æ´ã€ä¸é‡å¤ã€ç»“æ„åŒ–æ‘˜è¦)\n  - è®°å¿†æ€»ç»“: [string]\n  - å½“å‰ä½ç½®: {æè¿°, x, y}\n  - åŠ¿åŠ›å½’å±: string\n  - å½“å‰å¤–è²ŒçŠ¶æ€: string (ç”¨setå®æ—¶æ›´æ–°)\n  - å½“å‰å†…å¿ƒæƒ³æ³•: string (ç”¨setå®æ—¶æ›´æ–°)\n  - èƒŒåŒ…: {çµçŸ³, ç‰©å“}\n  - ç§å¯†ä¿¡æ¯?: PrivacyProfile (NSFWï¼›ä»…å½“ ç³»ç»Ÿ.nsfwMode=true ä¸” æ€§åˆ«ç¬¦åˆ ç³»ç»Ÿ.nsfwGenderFilter æ‰ç”Ÿæˆ)\n  - å®æ—¶å…³æ³¨: boolean\n\n### NSFWï¼šPrivacyProfileï¼ˆç§å¯†ä¿¡æ¯æ¨¡å—ï¼‰\n- æ˜¯å¦ä¸ºå¤„å¥³: boolean\n- èº«ä½“éƒ¨ä½: [BodyPartDevelopment] (æ•°ç»„ï¼›æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯¹è±¡)\n- æ€§æ ¼å€¾å‘: string\n- æ€§å–å‘: string\n- æ€§ç™–å¥½: [string]\n- æ€§æ¸´æœ›ç¨‹åº¦: number (0-100)\n- å½“å‰æ€§çŠ¶æ€: string\n- ä½“æ¶²åˆ†æ³ŒçŠ¶æ€: string\n- æ€§äº¤æ€»æ¬¡æ•°: number\n- æ€§ä¼´ä¾£åå•: [string]\n- æœ€è¿‘ä¸€æ¬¡æ€§è¡Œä¸ºæ—¶é—´: string\n- ç‰¹æ®Šä½“è´¨: [string]\n\n### NSFWï¼šBodyPartDevelopmentï¼ˆèº«ä½“éƒ¨ä½å¼€å‘æ¡ç›®ï¼‰\n- éƒ¨ä½åç§°: string (å¦‚ï¼šèƒ¸éƒ¨/å°ç©´/èŠç©´/å˜´å”‡/è€³æœµç­‰)\n- æ•æ„Ÿåº¦: number (0-100)\n- å¼€å‘åº¦: number (0-100ï¼›ç»Ÿä¸€ä½¿ç”¨â€œå¼€å‘åº¦â€å­—æ®µå)\n- ç‰¹æ®Šå°è®°?: string\n- ç‰¹å¾æè¿°: string\n\n\n## 5. è®°å¿† (Player Memory - Read-only, DO NOT MODIFY)\n**æ ¸å¿ƒè§„åˆ™**: AIä¸¥ç¦é€šè¿‡ `tavern_commands` ä¿®æ”¹ä»»ä½•è®°å¿†å­—æ®µã€‚è®°å¿†ç”±ç³»ç»Ÿæ ¹æ®å“åº”JSONä¸­çš„ `mid_term_memory` å­—æ®µè‡ªåŠ¨å¤„ç†ã€‚\n\n**æ•°æ®ç»“æ„ (ä»…ä¾›å‚è€ƒ)**:\n- çŸ­æœŸè®°å¿†: [string]\n- ä¸­æœŸè®°å¿†: [string]\n- é•¿æœŸè®°å¿†: [string]\n\n\n## 6. ä¸–ç•Œï¼ˆWorld - Modifiableï¼›è”æœºæ¨¡å¼é€šå¸¸åªè¯»ï¼‰\n- åœ°å›¾: {continents[], factions[], features[]}\n- å¤§é™†ä¿¡æ¯: [{åç§°, æè¿°, åœ°ç†ç‰¹å¾, ...}] (åªè¯»,ç”±ä¸–ç•Œç”Ÿæˆå™¨åˆ›å»º)\n- åŠ¿åŠ›ä¿¡æ¯: [{...}] (å¯ä¿®æ”¹,ä¸–ç•Œä¸­çš„å®—é—¨ã€ä¸–å®¶ç­‰)\n  - id: string|number (å¯é€‰)\n  - åç§°: string\n  - ç±»å‹: "ä¿®ä»™å®—é—¨"|"é­”é“å®—é—¨"|"ä¿®ä»™ä¸–å®¶"|...\n  - ç­‰çº§: "è¶…çº§"|"ä¸€æµ"|"äºŒæµ"|"ä¸‰æµ"\n  - ä½ç½®: string | {x, y}\n  - æè¿°: string\n  - ç‰¹è‰²: [string]\n  - ä¸ç©å®¶å…³ç³»: "æ•Œå¯¹"|"ä¸­ç«‹"|"å‹å¥½" (ç”¨setä¿®æ”¹)\n  - å£°æœ›å€¼: number (ç”¨addä¿®æ”¹)\n  - å¯å¦åŠ å…¥: boolean\n  - åŠ å…¥æ¡ä»¶: [string]\n  - åŠ å…¥å¥½å¤„: [string]\n  - æˆå‘˜æ•°é‡: { æ€»æ•°, æŒ‰å¢ƒç•Œ, æŒ‰èŒä½ } (ç”¨setä¿®æ”¹æ•´ä¸ªå¯¹è±¡)\n    - æ€»æ•°: number\n    - æŒ‰å¢ƒç•Œ: { "ç»ƒæ°”": number, "ç­‘åŸº": number, ... }\n    - æŒ‰èŒä½: { "å¤–é—¨å¼Ÿå­": number, "å†…é—¨å¼Ÿå­": number, ... }\n  - é¢†å¯¼å±‚: { å®—ä¸», å®—ä¸»ä¿®ä¸º, å‰¯å®—ä¸»?, é•¿è€æ•°é‡?, æœ€å¼ºä¿®ä¸º, ç»¼åˆæˆ˜åŠ›? } (ç”¨setä¿®æ”¹)\n    - å®—ä¸»: string (å¯èƒ½å› ä¸ºå‰§æƒ…æ›´æ¢)\n    - å®—ä¸»ä¿®ä¸º: string (ä¾‹å¦‚: "å…ƒå©´åæœŸ",å¯èƒ½çªç ´)\n    - ç»¼åˆæˆ˜åŠ›: number (1-100)\n  - åŠ¿åŠ›èŒƒå›´è¯¦æƒ…: { æ§åˆ¶åŒºåŸŸ, å½±å“èŒƒå›´, æˆ˜ç•¥ä»·å€¼ } (ç”¨setä¿®æ”¹)\n    - æ§åˆ¶åŒºåŸŸ: [string]\n    - å½±å“èŒƒå›´: string\n    - æˆ˜ç•¥ä»·å€¼: number (1-10)\n\n  é‡è¦ï¼šä¿®æ”¹åŠ¿åŠ›ä¿¡æ¯æ—¶ä½¿ç”¨è·¯å¾„: ä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯[ç´¢å¼•].å­—æ®µå\n  ç¤ºä¾‹-ä¿®æ”¹å®—ä¸»: {"action":"set", "key":"ä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯[0].é¢†å¯¼å±‚.å®—ä¸»", "value":"æ–°å®—ä¸»åå­—"}\n  ç¤ºä¾‹-å¢åŠ å£°æœ›: {"action":"add", "key":"ä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯[2].å£°æœ›å€¼", "value":50}\n  ç¤ºä¾‹-æ”¹å˜å…³ç³»: {"action":"set", "key":"ä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯[1].ä¸ç©å®¶å…³ç³»", "value":"å‹å¥½"}\n  ç¤ºä¾‹-æ›´æ–°æˆå‘˜: {"action":"set", "key":"ä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯[0].æˆå‘˜æ•°é‡", "value":{"æ€»æ•°":500,"æŒ‰å¢ƒç•Œ":{"ç»ƒæ°”":300,"ç­‘åŸº":150},"æŒ‰èŒä½":{"å¤–é—¨å¼Ÿå­":400,"å†…é—¨å¼Ÿå­":100}}}\n\n- åœ°ç‚¹ä¿¡æ¯: [{åç§°, ç±»å‹, ä½ç½®, coordinates, ...}] (å¯ä¿®æ”¹,ç”¨äºæ·»åŠ æ–°å‘ç°çš„åœ°ç‚¹)\n  é‡è¦ï¼šæ·»åŠ æ–°åœ°ç‚¹ä½¿ç”¨pushæ“ä½œ\n  ç¤ºä¾‹-æ·»åŠ åœ°ç‚¹: {"action":"push", "key":"ä¸–ç•Œ.ä¿¡æ¯.åœ°ç‚¹ä¿¡æ¯", "value":{"åç§°":"xxç§˜å¢ƒ","ç±»å‹":"ç§˜å¢ƒ","ä½ç½®":"ä¸œç„å¤§é™†Â·åŒ—éƒ¨","coordinates":{"x":7500,"y":3000},"æè¿°":"...","å®‰å…¨ç­‰çº§":"å±é™©","å¼€æ”¾çŠ¶æ€":"æœªå‘ç°"}}\n\n\n## 7. æ—¶é—´ï¼ˆGameTimeï¼Œè·¯å¾„ï¼šå…ƒæ•°æ®.æ—¶é—´ï¼‰\n\n### 7.1 æ—¶é—´\n- å¹´: number\n- æœˆ: number (1-12)\n- æ—¥: number (1-30)\n- å°æ—¶: number (0-23)\n- åˆ†é’Ÿ: number (0-59) (ç”¨addæ¨è¿›ï¼Œè‡ªåŠ¨è¿›ä½)\n\n### 7.2 å®—é—¨ç³»ç»Ÿï¼ˆè·¯å¾„ï¼šç¤¾äº¤.å®—é—¨ï¼‰\n**æ³¨æ„**: ç¤¾äº¤.å®—é—¨ æ˜¯ V3 ç»“æ„çš„å®—é—¨ç³»ç»Ÿï¼Œå¼€å±€æ—¶ç©å®¶æœªåŠ å…¥å®—é—¨æ—¶åº”ä¸º nullï¼ˆä¸è¦è®¾ç½®ä¸ºç©ºå¯¹è±¡ {}ï¼‰ã€‚\nAI å¼€å±€åˆå§‹åŒ–æ—¶**ä¸è¦ä¿®æ”¹** ç¤¾äº¤.å®—é—¨ï¼Œä¿æŒä¸º null å³å¯ã€‚ç©å®¶åŠ å…¥å®—é—¨åç”±ç³»ç»Ÿè‡ªåŠ¨å¡«å……ã€‚\n\n\n## 8. ä»»åŠ¡ï¼ˆQuest System - Modifiableï¼Œè·¯å¾„ï¼šç¤¾äº¤.ä»»åŠ¡ï¼‰\n- é…ç½®: {å¯ç”¨ç³»ç»Ÿä»»åŠ¡, ç³»ç»Ÿä»»åŠ¡ç±»å‹, è‡ªåŠ¨åˆ·æ–°, é»˜è®¤ä»»åŠ¡æ•°é‡}\n- å½“å‰ä»»åŠ¡åˆ—è¡¨: [ä»»åŠ¡å¯¹è±¡] (åŒ…å«æ‰€æœ‰ä»»åŠ¡ï¼Œç”¨pushæ·»åŠ æ–°ä»»åŠ¡ã€‚ä»»åŠ¡æ˜¯å¦å®Œæˆç”±å…¶å†…éƒ¨çš„\'ä»»åŠ¡çŠ¶æ€\'å­—æ®µå†³å®š)\n- ä»»åŠ¡ç»Ÿè®¡: {å®Œæˆæ€»æ•°, å„ç±»å‹å®Œæˆ: Record<ä»»åŠ¡ç±»å‹, number>}\n\n### 8.1 ä»»åŠ¡å¯¹è±¡ç»“æ„ (Quest Object)\n- ä»»åŠ¡ID: string (å”¯ä¸€ID, æ ¼å¼: quest_ç±»å‹_æ—¶é—´æˆ³)\n- ä»»åŠ¡åç§°: string\n- ä»»åŠ¡æè¿°: string\n- ä»»åŠ¡ç±»å‹: "å®—é—¨"|"å¥‡é‡"|"æ—¥å¸¸"|"ç³»ç»Ÿä»»åŠ¡"|"é“ä¾£åŸ¹å…»"|"ä¿®ä¸ºæå‡"|"æ”¶é›†èµ„æº"|"æˆ˜æ–—æŒ‘æˆ˜" (æ— ä¸»æ¬¡ä¹‹åˆ†)\n- ä»»åŠ¡çŠ¶æ€: "è¿›è¡Œä¸­"|"å·²å®Œæˆ"|"å·²å¤±è´¥"\n- ç›®æ ‡åˆ—è¡¨: [ç›®æ ‡å¯¹è±¡]\n  - æè¿°: string (ä¾‹: "å‡»è´¥3åªé»‘é£ç‹¼")\n  - ç±»å‹: "å‡»æ€"|"é‡‡é›†"|"å¯¹è¯"|"åˆ°è¾¾"|"ä½¿ç”¨ç‰©å“"\n  - ç›®æ ‡ID: string (ä¾‹: "monster_é»‘é£ç‹¼", "item_çµè‰")\n  - éœ€æ±‚æ•°é‡: number\n  - å½“å‰è¿›åº¦: number (ç”¨addæ›´æ–°)\n  - å·²å®Œæˆ: boolean\n- å¥–åŠ±: {å¥–åŠ±å¯¹è±¡}\n  - ä¿®ä¸º?: number\n  - çµçŸ³?: {ä¸‹å“?, ä¸­å“?, ä¸Šå“?, æå“?}\n  - ç‰©å“?: [{ç‰©å“ID, åç§°, æ•°é‡}]\n  - å£°æœ›?: {åŠ¿åŠ›åç§°, å˜åŒ–å€¼}\n  - å±æ€§åŠ æˆ?: {åå¤©å…­å¸}\n  - å¥½æ„Ÿåº¦?: {NPCåç§°, å˜åŒ–å€¼}\n- å‘å¸ƒè€…?: string (NPCåç§°æˆ–"ç³»ç»Ÿ")\n- åˆ›å»ºæ—¶é—´: {æ—¶é—´å¯¹è±¡} or string\n- å®Œæˆæ—¶é—´?: {æ—¶é—´å¯¹è±¡} or string\n- AIç”Ÿæˆ: boolean (é€šå¸¸ä¸ºtrue)\n\n\n## 9. ç³»ç»Ÿé…ç½® (System Config - Read-only)\n- nsfwMode: boolean\n- nsfwGenderFilter: "all"|"female"|"male"\n\n\n## 10. èº«ä½“éƒ¨ä½å¼€å‘ (NSFW - Modifiable)\n- èº«ä½“éƒ¨ä½å¼€å‘?: {éƒ¨ä½åç§°: {ç‰¹å¾æè¿°}} (ä»…NSFWï¼›ç©å®¶èº«ä½“éƒ¨ä½å¼€å‘çš„ç®€åŒ–ç»“æ„)\n\n'.trim();function r(e){return e.split("\n").filter(e=>!/nsfw|ç§å¯†ä¿¡æ¯|èº«ä½“éƒ¨ä½å¼€å‘|privacy/i.test(e)).join("\n").trim()}function o(e){return e?a:r(a)}},414:e=>{"use strict";e.exports=Math.round},453:(e,t,n)=>{"use strict";var a,r=n(9612),o=n(9383),i=n(1237),s=n(9290),l=n(9538),c=n(8068),d=n(9675),u=n(5345),m=n(1514),p=n(8968),f=n(6188),g=n(8002),h=n(5880),v=n(414),b=n(3093),y=Function,x=function(e){try{return y('"use strict"; return ('+e+").constructor;")()}catch(e){}},k=n(5795),w=n(655),E=function(){throw new d},N=k?function(){try{return E}catch(e){try{return k(arguments,"callee").get}catch(e){return E}}}():E,S=n(4039)(),V=n(3628),_=n(1064),C=n(8648),A=n(1002),D=n(76),T={},B="undefined"!=typeof Uint8Array&&V?V(Uint8Array):a,I={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?a:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?a:ArrayBuffer,"%ArrayIteratorPrototype%":S&&V?V([][Symbol.iterator]()):a,"%AsyncFromSyncIteratorPrototype%":a,"%AsyncFunction%":T,"%AsyncGenerator%":T,"%AsyncGeneratorFunction%":T,"%AsyncIteratorPrototype%":T,"%Atomics%":"undefined"==typeof Atomics?a:Atomics,"%BigInt%":"undefined"==typeof BigInt?a:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?a:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?a:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?a:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":o,"%eval%":eval,"%EvalError%":i,"%Float16Array%":"undefined"==typeof Float16Array?a:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?a:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?a:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?a:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":T,"%Int8Array%":"undefined"==typeof Int8Array?a:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?a:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?a:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":S&&V?V(V([][Symbol.iterator]())):a,"%JSON%":"object"==typeof JSON?JSON:a,"%Map%":"undefined"==typeof Map?a:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&S&&V?V((new Map)[Symbol.iterator]()):a,"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":k,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?a:Promise,"%Proxy%":"undefined"==typeof Proxy?a:Proxy,"%RangeError%":s,"%ReferenceError%":l,"%Reflect%":"undefined"==typeof Reflect?a:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?a:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&S&&V?V((new Set)[Symbol.iterator]()):a,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?a:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":S&&V?V(""[Symbol.iterator]()):a,"%Symbol%":S?Symbol:a,"%SyntaxError%":c,"%ThrowTypeError%":N,"%TypedArray%":B,"%TypeError%":d,"%Uint8Array%":"undefined"==typeof Uint8Array?a:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?a:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?a:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?a:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?a:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?a:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?a:WeakSet,"%Function.prototype.call%":D,"%Function.prototype.apply%":A,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":_,"%Math.abs%":m,"%Math.floor%":p,"%Math.max%":f,"%Math.min%":g,"%Math.pow%":h,"%Math.round%":v,"%Math.sign%":b,"%Reflect.getPrototypeOf%":C};if(V)try{null.error}catch(e){var z=V(V(e));I["%Error.prototype%"]=z}var M=function e(t){var n;if("%AsyncFunction%"===t)n=x("async function () {}");else if("%GeneratorFunction%"===t)n=x("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=x("async function* () {}");else if("%AsyncGenerator%"===t){var a=e("%AsyncGeneratorFunction%");a&&(n=a.prototype)}else if("%AsyncIteratorPrototype%"===t){var r=e("%AsyncGenerator%");r&&V&&(n=V(r.prototype))}return I[t]=n,n},P={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},R=n(6743),$=n(9957),O=R.call(D,Array.prototype.concat),L=R.call(A,Array.prototype.splice),F=R.call(D,String.prototype.replace),j=R.call(D,String.prototype.slice),U=R.call(D,RegExp.prototype.exec),q=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,G=/\\(\\)?/g,H=function(e,t){var n,a=e;if($(P,a)&&(a="%"+(n=P[a])[0]+"%"),$(I,a)){var r=I[a];if(r===T&&(r=M(a)),void 0===r&&!t)throw new d("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:a,value:r}}throw new c("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new d('"allowMissing" argument must be a boolean');if(null===U(/^%?[^%]*%?$/,e))throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=function(e){var t=j(e,0,1),n=j(e,-1);if("%"===t&&"%"!==n)throw new c("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new c("invalid intrinsic syntax, expected opening `%`");var a=[];return F(e,q,function(e,t,n,r){a[a.length]=n?F(r,G,"$1"):t||e}),a}(e),a=n.length>0?n[0]:"",r=H("%"+a+"%",t),o=r.name,i=r.value,s=!1,l=r.alias;l&&(a=l[0],L(n,O([0,1],l)));for(var u=1,m=!0;u<n.length;u+=1){var p=n[u],f=j(p,0,1),g=j(p,-1);if(('"'===f||"'"===f||"`"===f||'"'===g||"'"===g||"`"===g)&&f!==g)throw new c("property names with quotes must have matching quotes");if("constructor"!==p&&m||(s=!0),$(I,o="%"+(a+="."+p)+"%"))i=I[o];else if(null!=i){if(!(p in i)){if(!t)throw new d("base intrinsic for "+e+" exists, but the property is not available.");return}if(k&&u+1>=n.length){var h=k(i,p);i=(m=!!h)&&"get"in h&&!("originalValue"in h.get)?h.get:i[p]}else m=$(i,p),i=i[p];m&&!s&&(I[o]=i)}}return i}},473:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(660),n.b),d=new URL(n(1530),n.b),u=i()(r()),m=l()(c),p=l()(d);u.push([e.id,`\n.save-panel[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: var(--color-background);\n  overflow: hidden;\n  padding: 1rem;\n  gap: 1rem;\n  position: relative;\n}\n\n/* å·¥å…·æ ç§»é™¤ï¼šç»Ÿä¸€åˆ°é¡¶æ åŠ¨ä½œ */\n\n/* å¤´éƒ¨ */\n.panel-header[data-v-6158b81f] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: white;\n  border-radius: 0.75rem;\n  border: 1px solid #bae6fd;\n  flex-shrink: 0;\n}\n.header-left[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.header-icon[data-v-6158b81f] {\n  font-size: 1.5rem;\n}\n.header-info[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.panel-title[data-v-6158b81f] {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #0369a1;\n}\n.save-subtitle[data-v-6158b81f] {\n  font-size: 0.875rem;\n  color: #0284c7;\n}\n.header-actions[data-v-6158b81f] {\n  display: flex;\n  gap: 0.5rem;\n}\n.action-btn[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid #bae6fd;\n  border-radius: 0.5rem;\n  background: white;\n  color: #0369a1;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.875rem;\n}\n.action-btn[data-v-6158b81f]:hover {\n  background: #f0f9ff;\n  border-color: #0284c7;\n}\n.action-btn.primary[data-v-6158b81f] {\n  background: #0284c7;\n  border-color: #0284c7;\n  color: white;\n}\n.action-btn.primary[data-v-6158b81f]:hover {\n  background: #0369a1;\n}\n.action-btn[data-v-6158b81f]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.animate-spin[data-v-6158b81f] {\n  animation: spin-6158b81f 1s linear infinite;\n}\n@keyframes spin-6158b81f {\nfrom {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* å­˜æ¡£å®¹å™¨ */\n.saves-container[data-v-6158b81f] {\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n  padding: 0 0.5rem 3rem 0.5rem;\n\n  /* æ»šåŠ¨æ¡æ ·å¼ */\n  scrollbar-width: thin;\n  scrollbar-color: rgba(2, 132, 199, 0.3) rgba(243, 244, 246, 0.5);\n}\n.saves-container[data-v-6158b81f]::-webkit-scrollbar {\n  width: 8px;\n}\n.saves-container[data-v-6158b81f]::-webkit-scrollbar-track {\n  background: rgba(243, 244, 246, 0.5);\n  border-radius: 4px;\n}\n.saves-container[data-v-6158b81f]::-webkit-scrollbar-thumb {\n  background: rgba(2, 132, 199, 0.3);\n  border-radius: 4px;\n  transition: background 0.2s ease;\n}\n.saves-container[data-v-6158b81f]::-webkit-scrollbar-thumb:hover {\n  background: rgba(2, 132, 199, 0.5);\n}\n\n/* åŒºå—æ ·å¼ */\n.current-save-section[data-v-6158b81f],\n.saves-section[data-v-6158b81f],\n.operations-section[data-v-6158b81f] {\n  margin-bottom: 1.5rem;\n  background: white;\n  border-radius: 0.75rem;\n  border: 1px solid #bae6fd;\n  overflow: hidden;\n}\n.section-header[data-v-6158b81f] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.25rem;\n  background: #f0f9ff;\n  border-bottom: 1px solid #bae6fd;\n}\n.header-actions[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.section-title[data-v-6158b81f] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #0369a1;\n}\n.saves-count[data-v-6158b81f] {\n  font-size: 0.875rem;\n  color: #0c4a6e;\n  background: white;\n  padding: 0.25rem 0.75rem;\n  border-radius: 0.5rem;\n  font-weight: 600;\n  border: 1px solid #bae6fd;\n}\n.saves-count.online-badge[data-v-6158b81f] {\n  background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);\n  color: #065f46;\n  border-color: #a7f3d0;\n}\n\n/* å½“å‰å­˜æ¡£å¡ç‰‡ */\n.current-save-card[data-v-6158b81f] {\n  padding: 1.25rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.save-preview[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.save-preview.small[data-v-6158b81f] {\n  gap: 0.75rem;\n}\n.preview-avatar[data-v-6158b81f] {\n  width: 3rem;\n  height: 3rem;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #0284c7, #0369a1);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  font-size: 1.25rem;\n}\n.preview-avatar.small[data-v-6158b81f] {\n  width: 2.5rem;\n  height: 2.5rem;\n  font-size: 1rem;\n}\n.preview-info[data-v-6158b81f] {\n  flex: 1;\n}\n.character-name[data-v-6158b81f] {\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #0369a1;\n  margin-bottom: 0.25rem;\n}\n.save-name[data-v-6158b81f] {\n  font-size: 1rem;\n  font-weight: 700;\n  color: #1e40af;\n  margin-bottom: 0.15rem;\n}\n.character-name-small[data-v-6158b81f] {\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: #64748b;\n  margin-bottom: 0.15rem;\n}\n.character-details[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.detail-separator[data-v-6158b81f] {\n  color: #cbd5e1;\n}\n.save-time[data-v-6158b81f] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n\n/* ç‰¹æ®Šå­˜æ¡£è¯´æ˜æç¤º */\n.save-hint[data-v-6158b81f] {\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  margin-top: 0.25rem;\n  display: inline-block;\n  font-weight: 500;\n}\n.save-hint.auto[data-v-6158b81f] {\n  background: rgba(16, 185, 129, 0.1);\n  color: #059669;\n  border: 1px solid rgba(16, 185, 129, 0.2);\n}\n.save-hint.last[data-v-6158b81f] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #2563eb;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n\n/* å½“å‰è¿›åº¦çš„ç‰¹æ®Šå­˜æ¡£è¯´æ˜ */\n.current-save-hint[data-v-6158b81f] {\n  font-size: 0.875rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 6px;\n  margin-top: 0.75rem;\n  display: block;\n  font-weight: 500;\n  line-height: 1.5;\n}\n.current-save-hint.auto[data-v-6158b81f] {\n  background: rgba(16, 185, 129, 0.1);\n  color: #059669;\n  border-left: 3px solid #10b981;\n}\n.current-save-hint.last[data-v-6158b81f] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #2563eb;\n  border-left: 3px solid #3b82f6;\n}\n.save-stats[data-v-6158b81f] {\n  display: flex;\n  gap: 2rem;\n}\n.stat-item[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.stat-label[data-v-6158b81f] {\n  font-size: 0.75rem;\n  color: #64748b;\n  font-weight: 500;\n}\n.stat-value[data-v-6158b81f] {\n  font-size: 0.875rem;\n  color: #0369a1;\n  font-weight: 600;\n}\n\n/* å­˜æ¡£åˆ—è¡¨ */\n.loading-state[data-v-6158b81f],\n.empty-state[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  text-align: center;\n}\n.loading-spinner[data-v-6158b81f],\n.empty-icon[data-v-6158b81f] {\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n}\n.loading-text[data-v-6158b81f],\n.empty-text[data-v-6158b81f] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: #0369a1;\n  margin-bottom: 0.5rem;\n}\n.empty-hint[data-v-6158b81f] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.saves-list[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  padding: 1rem;\n}\n.save-card[data-v-6158b81f] {\n  border: 1px solid #e0f2fe;\n  border-radius: 0.5rem;\n  background: #f8fafc;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.save-card[data-v-6158b81f]:hover {\n  background: #f0f9ff;\n  border-color: #bae6fd;\n  transform: translateY(-1px);\n}\n.save-card.active[data-v-6158b81f] {\n  background: #e0f2fe;\n  border-color: #0284c7;\n}\n.card-header[data-v-6158b81f] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  border-bottom: 1px solid #e0f2fe;\n}\n.card-actions[data-v-6158b81f] {\n  display: flex;\n  gap: 0.5rem;\n}\n.card-btn[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2rem;\n  height: 2rem;\n  border: 1px solid #bae6fd;\n  border-radius: 0.375rem;\n  background: white;\n  color: #0284c7;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.card-btn[data-v-6158b81f]:hover {\n  background: #f0f9ff;\n  border-color: #0284c7;\n}\n.card-btn[data-v-6158b81f]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.card-btn.primary[data-v-6158b81f] {\n  color: #10b981;\n  border-color: #d1fae5;\n}\n.card-btn.primary[data-v-6158b81f]:hover {\n  background: #f0fdf4;\n  border-color: #10b981;\n}\n.card-btn.danger[data-v-6158b81f] {\n  color: #ef4444;\n  border-color: #fecaca;\n}\n.card-btn.danger[data-v-6158b81f]:hover {\n  background: #fef2f2;\n  border-color: #ef4444;\n}\n.card-btn.warning[data-v-6158b81f] {\n  color: #f59e0b;\n  border-color: #fef3c7;\n}\n.card-btn.warning[data-v-6158b81f]:hover {\n  background: #fffbeb;\n  border-color: #f59e0b;\n}\n.card-btn.info[data-v-6158b81f] {\n  color: #0284c7;\n  border-color: #bae6fd;\n}\n.card-btn.info[data-v-6158b81f]:hover {\n  background: #f0f9ff;\n  border-color: #0284c7;\n}\n\n/* æ–°å»ºå­˜æ¡£æŒ‰é’® */\n.new-save-btn[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2rem;\n  height: 2rem;\n  border: 1px solid #10b981;\n  border-radius: 0.375rem;\n  background: white;\n  color: #10b981;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.new-save-btn[data-v-6158b81f]:hover {\n  background: #f0fdf4;\n  border-color: #059669;\n  color: #059669;\n}\n.new-save-btn[data-v-6158b81f]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.card-content[data-v-6158b81f] {\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.save-details[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.detail-row[data-v-6158b81f] {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.875rem;\n}\n.detail-label[data-v-6158b81f] {\n  color: #64748b;\n}\n.detail-value[data-v-6158b81f] {\n  color: #0369a1;\n  font-weight: 500;\n}\n\n/* æ“ä½œåˆ—è¡¨ */\n.operations-list[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n}\n.operation-btn[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border-radius: 0.5rem;\n}\n.operation-btn[data-v-6158b81f]:hover {\n  background: #f0f9ff;\n}\n.operation-btn.primary[data-v-6158b81f] {\n  background: linear-gradient(135deg, #0369a1 0%, #0284c7 100%);\n  color: white;\n}\n.operation-btn.primary[data-v-6158b81f]:hover {\n  background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(3, 105, 161, 0.3);\n}\n.operation-btn.primary .btn-title[data-v-6158b81f],\n.operation-btn.primary .btn-desc[data-v-6158b81f] {\n  color: white;\n}\n.operation-btn.danger[data-v-6158b81f]:hover {\n  background: #fef2f2;\n  color: #ef4444;\n}\n.operation-btn[data-v-6158b81f]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.btn-content[data-v-6158b81f] {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 0.25rem;\n}\n.btn-title[data-v-6158b81f] {\n  font-weight: 500;\n  color: #0369a1;\n}\n.btn-desc[data-v-6158b81f] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.operation-btn.danger .btn-title[data-v-6158b81f] {\n  color: #ef4444;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 640px) {\n.save-stats[data-v-6158b81f] {\n    gap: 1rem;\n}\n.card-header[data-v-6158b81f] {\n    flex-direction: column;\n    gap: 1rem;\n    align-items: stretch;\n}\n.save-preview[data-v-6158b81f] {\n    justify-content: center;\n}\n.card-actions[data-v-6158b81f] {\n    justify-content: center;\n}\n.header-actions .btn-text[data-v-6158b81f] {\n    display: none;\n}\n}\n\n/* æ·±è‰²ä¸»é¢˜ */\n[data-theme='dark'] .save-panel[data-v-6158b81f] {\n  background: var(--color-background);\n}\n[data-theme='dark'] .panel-header[data-v-6158b81f],\n[data-theme='dark'] .current-save-section[data-v-6158b81f],\n[data-theme='dark'] .saves-section[data-v-6158b81f],\n[data-theme='dark'] .operations-section[data-v-6158b81f] {\n  background: #1e293b;\n  border-color: #475569;\n}\n\n/* å­˜æ¡£åå›¾æ ‡æ ·å¼ */\n.auto-save-icon[data-v-6158b81f],\n.last-save-icon[data-v-6158b81f] {\n  display: inline-block;\n  margin-right: 0.25rem;\n  vertical-align: middle;\n}\n.auto-save-icon[data-v-6158b81f] {\n  color: #10b981;\n}\n.last-save-icon[data-v-6158b81f] {\n  color: #3b82f6;\n}\n[data-theme='dark'] .section-header[data-v-6158b81f] {\n  background: #334155;\n  border-bottom-color: #475569;\n}\n[data-theme='dark'] .panel-title[data-v-6158b81f],\n[data-theme='dark'] .section-title[data-v-6158b81f],\n[data-theme='dark'] .character-name[data-v-6158b81f],\n[data-theme='dark'] .save-name[data-v-6158b81f] {\n  color: #0ea5e9;\n}\n[data-theme='dark'] .character-name-small[data-v-6158b81f] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .save-subtitle[data-v-6158b81f],\n[data-theme='dark'] .saves-count[data-v-6158b81f] {\n  color: #38bdf8;\n}\n[data-theme='dark'] .saves-count.online-badge[data-v-6158b81f] {\n  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2) 0%, rgba(5, 150, 105, 0.2) 100%);\n  color: #6ee7b7;\n  border-color: rgba(16, 185, 129, 0.4);\n}\n[data-theme='dark'] .action-btn[data-v-6158b81f],\n[data-theme='dark'] .card-btn[data-v-6158b81f] {\n  background: #374151;\n  border-color: #475569;\n  color: #0ea5e9;\n}\n[data-theme='dark'] .action-btn[data-v-6158b81f]:hover,\n[data-theme='dark'] .card-btn[data-v-6158b81f]:hover {\n  background: #4b5563;\n}\n[data-theme='dark'] .card-btn.primary[data-v-6158b81f] {\n  color: #10b981;\n  border-color: #065f46;\n}\n[data-theme='dark'] .card-btn.primary[data-v-6158b81f]:hover {\n  background: #065f46;\n}\n[data-theme='dark'] .card-btn.warning[data-v-6158b81f] {\n  color: #f59e0b;\n  border-color: #78350f;\n}\n[data-theme='dark'] .card-btn.warning[data-v-6158b81f]:hover {\n  background: #78350f;\n}\n[data-theme='dark'] .card-btn.info[data-v-6158b81f] {\n  color: #0ea5e9;\n  border-color: #0c4a6e;\n}\n[data-theme='dark'] .card-btn.info[data-v-6158b81f]:hover {\n  background: #0c4a6e;\n}\n[data-theme='dark'] .new-save-btn[data-v-6158b81f] {\n  background: #374151;\n  border-color: #10b981;\n  color: #10b981;\n}\n[data-theme='dark'] .new-save-btn[data-v-6158b81f]:hover {\n  background: #065f46;\n  border-color: #059669;\n}\n[data-theme='dark'] .save-card[data-v-6158b81f] {\n  background: #374151;\n  border-color: #4b5563;\n}\n[data-theme='dark'] .save-card[data-v-6158b81f]:hover {\n  background: #4b5563;\n}\n[data-theme='dark'] .save-card.active[data-v-6158b81f] {\n  background: #1e40af;\n  border-color: #0ea5e9;\n}\n[data-theme='dark'] .operation-btn[data-v-6158b81f]:hover {\n  background: #374151;\n}\n[data-theme='dark'] .btn-title[data-v-6158b81f] {\n  color: #e5e7eb;\n}\n\n/* è‡ªåŠ¨å­˜æ¡£è®¾ç½® */\n.auto-save-settings-section[data-v-6158b81f] {\n  margin-bottom: 1.5rem;\n  background: white;\n  border-radius: 0.75rem;\n  border: 1px solid #bae6fd;\n  overflow: hidden;\n}\n.settings-list[data-v-6158b81f] {\n  padding: 0.5rem;\n}\n.setting-item[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-radius: 0.5rem;\n  transition: background 0.2s ease;\n}\n.setting-item[data-v-6158b81f]:hover {\n  background: #f8fafc;\n}\n.setting-info[data-v-6158b81f] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.setting-name[data-v-6158b81f] {\n  font-weight: 500;\n  color: #1e293b;\n}\n.setting-desc[data-v-6158b81f] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.setting-control[data-v-6158b81f] {\n  display: flex;\n  align-items: center;\n}\n\n/* å¼€å…³æ ·å¼ */\n.setting-switch[data-v-6158b81f] {\n  position: relative;\n  display: inline-block;\n  width: 44px;\n  height: 24px;\n}\n.setting-switch input[data-v-6158b81f] {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n.switch-slider[data-v-6158b81f] {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #cbd5e1;\n  transition: 0.2s;\n  border-radius: 24px;\n}\n.switch-slider[data-v-6158b81f]:before {\n  position: absolute;\n  content: '';\n  height: 18px;\n  width: 18px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  transition: 0.2s;\n  border-radius: 50%;\n}\ninput:checked + .switch-slider[data-v-6158b81f] {\n  background-color: #3b82f6;\n}\ninput:checked + .switch-slider[data-v-6158b81f]:before {\n  transform: translateX(20px);\n}\n\n/* ä¸‹æ‹‰é€‰æ‹©æ¡†æ ·å¼ */\n.setting-select[data-v-6158b81f] {\n  padding: 0.5rem 2rem 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  background-color: white;\n  background-image: url(${m});\n  background-repeat: no-repeat;\n  background-position: right 0.75rem center;\n  background-size: 12px;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: border-color 0.2s ease;\n  appearance: none;\n  min-width: 120px;\n}\n.setting-select[data-v-6158b81f]:hover {\n  border-color: #94a3b8;\n}\n.setting-select[data-v-6158b81f]:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n[data-theme='dark'] .auto-save-settings-section[data-v-6158b81f] {\n  background: #1e293b;\n  border-color: #475569;\n}\n[data-theme='dark'] .setting-item[data-v-6158b81f]:hover {\n  background: #334155;\n}\n[data-theme='dark'] .setting-name[data-v-6158b81f] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .setting-desc[data-v-6158b81f] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .switch-slider[data-v-6158b81f] {\n  background-color: #4b5563;\n}\n[data-theme='dark'] .setting-select[data-v-6158b81f] {\n  background-color: #374151;\n  border-color: #4b5563;\n  color: #e5e7eb;\n  background-image: url(${p});\n}\n.interval-input[data-v-6158b81f] {\n  width: 60px;\n  padding: 0.5rem;\n  border-radius: 8px;\n  border: 1px solid #d1d5db;\n  text-align: center;\n  margin-right: 0.5rem;\n}\n.unit-label[data-v-6158b81f] {\n  color: #64748b;\n}\n[data-theme='dark'] .interval-input[data-v-6158b81f] {\n  background-color: #374151;\n  border-color: #4b5563;\n  color: #e5e7eb;\n}\n[data-theme='dark'] .unit-label[data-v-6158b81f] {\n  color: #94a3b8;\n}\n`,""]);const f=u},477:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n/* ä¸»å®¹å™¨ */\n.preview-container[data-v-67e93ce4] {\n  height: 100%;\n  padding: 2rem;\n  box-sizing: border-box;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.preview-container[data-v-67e93ce4]::-webkit-scrollbar { width: 6px;\n}\n.preview-container[data-v-67e93ce4]::-webkit-scrollbar-track { background: transparent;\n}\n.preview-container[data-v-67e93ce4]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n\n/* æ ‡é¢˜ */\n.title[data-v-67e93ce4] {\n  text-align: center;\n  color: #93c5fd;\n  margin: 0 0 0.5rem 0;\n  font-family: var(--font-family-serif);\n  font-size: 2rem;\n  font-weight: 600;\n  text-shadow: 0 0 20px rgba(147, 197, 253, 0.3);\n}\n.subtitle[data-v-67e93ce4] {\n  text-align: center;\n  color: #94a3b8;\n  margin: 0 0 2rem 0;\n  font-size: 1rem;\n  font-style: italic;\n}\n\n/* ç½‘æ ¼å¸ƒå±€ */\n.preview-grid[data-v-67e93ce4] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 1.5rem;\n}\n\n/* åŸºç¡€å¡ç‰‡æ ·å¼ */\n.preview-item[data-v-67e93ce4] {\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  transition: all 0.25s ease;\n}\n.preview-item[data-v-67e93ce4]:hover {\n  background: rgba(30, 41, 59, 0.7);\n  border-color: rgba(147, 197, 253, 0.2);\n}\n.preview-item h3[data-v-67e93ce4] {\n  margin: 0;\n  color: #93c5fd;\n  border-bottom: 1px solid rgba(147, 197, 253, 0.2);\n  padding-bottom: 0.5rem;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n.preview-item p[data-v-67e93ce4] {\n  margin: 0;\n  font-size: 1rem;\n  color: #f1f5f9;\n  line-height: 1.5;\n}\n.preview-item h4[data-v-67e93ce4] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #bfdbfe;\n}\n.item-description[data-v-67e93ce4] {\n  font-size: 0.9rem !important;\n  color: #94a3b8 !important;\n  margin-top: 0.5rem !important;\n}\n.talents-item li .item-description[data-v-67e93ce4] {\n  margin-top: 0.25rem !important;\n  padding-left: 0.5rem;\n  border-left: 2px solid rgba(147, 197, 253, 0.3);\n}\n\n/* åå­—è¾“å…¥ */\n.name-item[data-v-67e93ce4], .race-item[data-v-67e93ce4] {\n  grid-column: span 2;\n}\n@media (min-width: 769px) {\n.name-item[data-v-67e93ce4], .race-item[data-v-67e93ce4] {\n    grid-column: 1 / -1;\n}\n}\n.name-item label[data-v-67e93ce4] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #93c5fd;\n  margin-bottom: 0.5rem;\n  display: block;\n}\n.name-item input[data-v-67e93ce4], .input-field input[data-v-67e93ce4] {\n  width: 100%;\n  background: rgba(30, 41, 59, 0.6);\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  color: #f1f5f9;\n  padding: 0.75rem;\n  border-radius: 8px;\n  font-size: 1rem;\n  box-sizing: border-box;\n  transition: all 0.25s ease;\n}\n.input-field input[data-v-67e93ce4] {\n  background: rgba(30, 41, 59, 0.4);\n}\n.name-item input[data-v-67e93ce4]:focus, .input-field input[data-v-67e93ce4]:focus {\n  outline: none;\n  border-color: #93c5fd;\n  box-shadow: 0 0 0 2px rgba(147, 197, 253, 0.1);\n}\n\n/* åªè¯»è¾“å…¥æ¡†æ ·å¼ */\n.readonly-input[data-v-67e93ce4] {\n  background: rgba(30, 41, 59, 0.3) !important;\n  cursor: not-allowed !important;\n  opacity: 0.7;\n  user-select: none;\n}\n.readonly-input[data-v-67e93ce4]:focus {\n  border-color: rgba(147, 197, 253, 0.2) !important;\n  box-shadow: none !important;\n}\n\n/* åå­—æç¤ºæ–‡å­— */\n.name-hint[data-v-67e93ce4] {\n  font-size: 0.85rem;\n  color: #94a3b8;\n  margin-top: 0.5rem;\n  display: block;\n}\n\n/* æ€§åˆ«é€‰æ‹© */\n.gender-control[data-v-67e93ce4] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.gender-label[data-v-67e93ce4] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 8px;\n  color: #f1f5f9;\n  background: rgba(30, 41, 59, 0.4);\n  border: 1px solid transparent;\n  transition: all 0.25s ease;\n}\n.gender-label[data-v-67e93ce4]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(147, 197, 253, 0.2);\n}\n.gender-label input[type="radio"][data-v-67e93ce4] {\n  width: 16px;\n  height: 16px;\n  margin: 0;\n  accent-color: #93c5fd;\n}\n\n/* å¼€å±€æ¨¡å¼é€‰æ‹© */\n.streaming-control[data-v-67e93ce4] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.streaming-label[data-v-67e93ce4] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem;\n  border-radius: 4px;\n  color: var(--color-text);\n  transition: all 0.2s ease;\n}\n.streaming-label[data-v-67e93ce4]:hover {\n  background: var(--color-surface-light);\n}\n.streaming-label input[type="radio"][data-v-67e93ce4] {\n  width: 16px;\n  height: 16px;\n  margin: 0;\n  accent-color: var(--color-primary);\n}\n.streaming-hint[data-v-67e93ce4] {\n  font-size: 0.85rem !important;\n  color: var(--color-text-secondary) !important;\n  margin-top: 0.5rem !important;\n  padding: 0.5rem;\n  background: var(--color-surface-light);\n  border-radius: 4px;\n  border-left: 3px solid var(--color-primary);\n  line-height: 1.4;\n}\n\n/* ç”Ÿæˆæ–¹å¼é€‰æ‹© */\n.generate-mode-control[data-v-67e93ce4] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.generate-mode-label[data-v-67e93ce4] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem;\n  border-radius: 4px;\n  color: var(--color-text);\n  transition: all 0.2s ease;\n}\n.generate-mode-label[data-v-67e93ce4]:hover {\n  background: var(--color-surface-light);\n}\n.generate-mode-label input[type="radio"][data-v-67e93ce4] {\n  width: 16px;\n  height: 16px;\n  margin: 0;\n  accent-color: var(--color-primary);\n}\n.generate-mode-hint[data-v-67e93ce4] {\n  font-size: 0.85rem !important;\n  color: var(--color-text-secondary) !important;\n  margin-top: 0.5rem !important;\n  padding: 0.5rem;\n  background: var(--color-surface-light);\n  border-radius: 4px;\n  border-left: 3px solid var(--color-primary);\n  line-height: 1.4;\n}\n\n/* å¹´é¾„æ§åˆ¶ */\n.age-control[data-v-67e93ce4] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n}\n.age-btn[data-v-67e93ce4] {\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  background: rgba(30, 41, 59, 0.6);\n  color: #93c5fd;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.25s ease;\n}\n.age-btn[data-v-67e93ce4]:hover:not(:disabled) {\n  background: rgba(59, 130, 246, 0.3);\n  border-color: #93c5fd;\n  color: #bfdbfe;\n}\n.age-btn[data-v-67e93ce4]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.age-display[data-v-67e93ce4] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #f1f5f9;\n  min-width: 60px;\n  text-align: center;\n}\n.age-input[data-v-67e93ce4] {\n  width: 80px;\n  padding: 0.5rem;\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  border-radius: 8px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #f1f5f9;\n  font-size: 1.1rem;\n  font-weight: 600;\n  text-align: center;\n  transition: all 0.25s ease;\n}\n.age-input[data-v-67e93ce4]:focus {\n  outline: none;\n  border-color: #93c5fd;\n  box-shadow: 0 0 0 2px rgba(147, 197, 253, 0.1);\n}\n.age-input[data-v-67e93ce4]::-webkit-inner-spin-button,\n.age-input[data-v-67e93ce4]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.age-input[type="number"][data-v-67e93ce4] {\n  -moz-appearance: textfield;\n}\n.age-unit[data-v-67e93ce4] {\n  font-size: 1rem;\n  color: #94a3b8;\n  font-weight: 500;\n}\n\n/* åˆ—è¡¨æ ·å¼ */\n.preview-item ul[data-v-67e93ce4] {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n}\n.preview-item li[data-v-67e93ce4] {\n  margin-bottom: 0.75rem;\n  padding: 0.75rem;\n  background: rgba(30, 41, 59, 0.4);\n  border-radius: 8px;\n  color: #f1f5f9;\n  line-height: 1.4;\n  border: 1px solid transparent;\n  transition: all 0.25s ease;\n}\n.preview-item li[data-v-67e93ce4]:hover {\n  background: rgba(51, 65, 85, 0.5);\n  border-color: rgba(147, 197, 253, 0.15);\n}\n.preview-item li strong[data-v-67e93ce4] {\n  display: block;\n  margin-bottom: 0.25rem;\n  color: #93c5fd;\n}\n\n/* äº‘ç«¯ä¿¡æ¯ */\n.cloud-info-item[data-v-67e93ce4] {\n  text-align: center;\n  background: rgba(30, 41, 59, 0.3);\n  border: 1px dashed rgba(147, 197, 253, 0.3);\n}\n.cloud-info-text[data-v-67e93ce4] {\n  font-size: 0.95rem;\n  color: #94a3b8;\n  line-height: 1.6;\n  font-style: italic;\n}\n\n/* å“åº”å¼ */\n@media (max-width: 768px) {\n.preview-container[data-v-67e93ce4] {\n    padding: 1rem;\n}\n.preview-grid[data-v-67e93ce4] {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n}\n.gender-control[data-v-67e93ce4] {\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-around;\n}\n.gender-label[data-v-67e93ce4] {\n    flex: 1;\n    min-width: 80px;\n    justify-content: center;\n}\n}\n@media (min-width: 769px) and (max-width: 1024px) {\n.preview-grid[data-v-67e93ce4] {\n    grid-template-columns: repeat(2, 1fr);\n}\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .preview-item[data-v-67e93ce4] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .preview-item[data-v-67e93ce4]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .preview-item h3[data-v-67e93ce4] {\n  color: #2563eb;\n  border-bottom-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .preview-item h4[data-v-67e93ce4] {\n  color: #1e40af;\n}\n[data-theme="light"] .preview-item p[data-v-67e93ce4] {\n  color: #1e293b;\n}\n[data-theme="light"] .title[data-v-67e93ce4] {\n  color: #2563eb;\n}\n[data-theme="light"] .subtitle[data-v-67e93ce4] {\n  color: #475569;\n}\n[data-theme="light"] .name-item label[data-v-67e93ce4] {\n  color: #2563eb;\n}\n[data-theme="light"] .name-item input[data-v-67e93ce4],\n[data-theme="light"] .input-field input[data-v-67e93ce4] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #1e293b;\n}\n[data-theme="light"] .gender-label[data-v-67e93ce4] {\n  background: rgba(255, 255, 255, 0.6);\n  color: #1e293b;\n}\n[data-theme="light"] .gender-label[data-v-67e93ce4]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .age-btn[data-v-67e93ce4] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #2563eb;\n}\n[data-theme="light"] .age-btn[data-v-67e93ce4]:hover:not(:disabled) {\n  background: rgba(59, 130, 246, 0.1);\n  border-color: #3b82f6;\n}\n[data-theme="light"] .age-input[data-v-67e93ce4] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #1e293b;\n}\n[data-theme="light"] .preview-item li[data-v-67e93ce4] {\n  background: rgba(255, 255, 255, 0.6);\n  color: #1e293b;\n}\n[data-theme="light"] .preview-item li[data-v-67e93ce4]:hover {\n  background: rgba(241, 245, 249, 0.95);\n}\n[data-theme="light"] .preview-item li strong[data-v-67e93ce4] {\n  color: #2563eb;\n}\n[data-theme="light"] .cloud-info-item[data-v-67e93ce4] {\n  background: rgba(248, 250, 252, 0.6);\n  border-color: rgba(59, 130, 246, 0.3);\n}\n[data-theme="light"] .cloud-info-text[data-v-67e93ce4] {\n  color: #475569;\n}\n@media (max-width: 480px) {\n.preview-container[data-v-67e93ce4] {\n    padding: 1rem;\n}\n.title[data-v-67e93ce4] {\n    font-size: 1.6rem;\n}\n.subtitle[data-v-67e93ce4] {\n    font-size: 0.9rem;\n    margin-bottom: 1.5rem;\n}\n.preview-item[data-v-67e93ce4] {\n    padding: 1rem;\n    gap: 0.8rem;\n}\n.preview-item h3[data-v-67e93ce4] {\n    font-size: 1rem;\n}\n.preview-item h4[data-v-67e93ce4] {\n    font-size: 1rem;\n}\n.item-description[data-v-67e93ce4] {\n    font-size: 0.85rem !important;\n}\n.name-item label[data-v-67e93ce4] {\n    font-size: 1rem;\n}\n.name-item input[data-v-67e93ce4] {\n    padding: 0.6rem;\n    font-size: 0.9rem;\n}\n.gender-label[data-v-67e93ce4] {\n    font-size: 0.9rem;\n    padding: 0.4rem;\n}\n.age-control[data-v-67e93ce4] {\n    gap: 0.8rem;\n}\n.age-btn[data-v-67e93ce4] {\n    width: 28px;\n    height: 28px;\n    font-size: 0.9rem;\n}\n.age-display[data-v-67e93ce4] {\n    font-size: 1rem;\n}\n.preview-item li[data-v-67e93ce4] {\n    padding: 0.6rem;\n}\n}\n',""]);const s=i},507:(e,t,n)=>{"use strict";var a=n(453),r=n(6556),o=n(8859),i=n(9675),s=a("%Map%",!0),l=r("Map.prototype.get",!0),c=r("Map.prototype.set",!0),d=r("Map.prototype.has",!0),u=r("Map.prototype.delete",!0),m=r("Map.prototype.size",!0);e.exports=!!s&&function(){var e,t={assert:function(e){if(!t.has(e))throw new i("Side channel does not contain "+o(e))},delete:function(t){if(e){var n=u(e,t);return 0===m(e)&&(e=void 0),n}return!1},get:function(t){if(e)return l(e,t)},has:function(t){return!!e&&d(e,t)},set:function(t,n){e||(e=new s),c(e,t,n)}};return t}},508:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n/* é¡¶æ åŠ¨ä½œç»Ÿä¸€å¤„ç†ï¼Œç§»é™¤æœ¬åœ°å·¥å…·æ  */\n/* å®¹å™¨çº¦æŸé˜²æ­¢æº¢å‡º */\n.memory-center-panel[data-v-6cd84794] {\n  width: 100%;\n  max-width: 100%;\n  height: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n  container-type: inline-size;\n  margin: 0;\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem; /* ä¸ºå¯¼å‡ºåŒºåŸŸå¢åŠ é—´è· */\n}\n\n/* å¯¼å‡ºåŒºåŸŸæ ·å¼ */\n.export-section[data-v-6cd84794] {\n  padding: 1rem;\n  background: rgba(var(--color-surface-rgb), 0.5);\n  border: 1px solid rgba(var(--color-border-rgb), 0.3);\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  backdrop-filter: blur(5px);\n}\n.export-btn-main[data-v-6cd84794] {\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border: none;\n  padding: 0.6rem 1.2rem;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 600;\n  transition: all 0.2s;\n  white-space: nowrap;\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);\n}\n.export-btn-main[data-v-6cd84794]:hover {\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);\n}\n.export-hint[data-v-6cd84794] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  line-height: 1.4;\n}\n.filter-section[data-v-6cd84794] {\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n.filter-tabs[data-v-6cd84794] {\n  display: flex;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n  align-items: center;\n  margin: 0 0 1rem 0;\n  padding: 1rem;\n  background: rgba(var(--color-surface-rgb), 0.3);\n  border: 1px solid rgba(var(--color-border-rgb), 0.3);\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n}\n.filter-tabs .filter-tab[data-v-6cd84794] {\n  flex: 0 0 auto;\n  margin: 0;\n}\n.filter-tabs .settings-toggle-btn[data-v-6cd84794] {\n  margin-left: auto;\n}\n.filter-tab[data-v-6cd84794] {\n  flex-shrink: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 150px;\n  margin: 0;\n  padding: 0.75rem 1rem;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  box-sizing: border-box;\n  font-size: 0.875rem;\n  font-weight: 500;\n  min-height: 40px;\n  position: relative;\n}\n.filter-tab[data-v-6cd84794]:hover {\n  background: var(--color-surface-light);\n  border-color: var(--color-border-hover);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.filter-tab.active[data-v-6cd84794] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  border-color: var(--color-primary);\n  color: white;\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n.filter-tab .tab-icon[data-v-6cd84794] {\n  font-size: 1.1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.filter-tab .tab-name[data-v-6cd84794] {\n  font-weight: 500;\n  letter-spacing: 0.3px;\n}\n.filter-tab .tab-count[data-v-6cd84794] {\n  background: rgba(255, 255, 255, 0.2);\n  color: var(--color-text);\n  padding: 0.2rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  min-width: 20px;\n  text-align: center;\n  line-height: 1;\n}\n.filter-tab.active .tab-count[data-v-6cd84794] {\n  background: rgba(255, 255, 255, 0.25);\n  color: white;\n}\n.filter-section[data-v-6cd84794] {\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.panel-content[data-v-6cd84794] {\n  width: 100%;\n  max-width: 100%;\n  height: calc(100% - 80px);\n  overflow-y: auto;\n  overflow-x: hidden;\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n/* è®¾ç½®ç•Œé¢æ ·å¼ */\n.settings-section[data-v-6cd84794] {\n  margin: 0;\n  padding: 0;\n  background: rgba(var(--color-surface-rgb), 0.95);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  animation: fadeIn-6cd84794 0.3s ease-in-out;\n  max-width: 100%;\n  width: 100%;\n  height: 100%;\n  max-height: calc(100% - 80px);\n  box-sizing: border-box;\n  overflow: hidden;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  display: flex;\n  flex-direction: column;\n}\n.settings-header[data-v-6cd84794] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0;\n  padding: 1rem 1rem 0.5rem 1rem;\n  border-bottom: 1px solid var(--color-border);\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n  flex-shrink: 0;\n}\n.header-actions[data-v-6cd84794] {\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n}\n.export-btn[data-v-6cd84794] {\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border: none;\n  padding: 0.4rem 0.8rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s;\n  white-space: nowrap;\n  margin-right: 0.5rem;\n}\n.export-btn[data-v-6cd84794]:hover {\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n}\n.test-btn[data-v-6cd84794] {\n  background: linear-gradient(135deg, #10b981, #059669);\n  color: white;\n  border: none;\n  padding: 0.4rem 0.8rem;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s;\n  white-space: nowrap;\n}\n.test-btn[data-v-6cd84794]:hover {\n  background: linear-gradient(135deg, #059669, #047857);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);\n}\n.settings-title[data-v-6cd84794] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-primary);\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.settings-close-btn[data-v-6cd84794] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  font-size: 1.2rem;\n  padding: 0.2rem;\n  border-radius: 4px;\n  transition: var(--transition-fast);\n  flex-shrink: 0;\n}\n.settings-close-btn[data-v-6cd84794]:hover {\n  background: rgba(var(--color-danger-rgb), 0.1);\n  color: var(--color-danger);\n}\n.settings-content[data-v-6cd84794] {\n  display: block;\n  max-width: 100%;\n  overflow-y: auto;\n  overflow-x: hidden;\n  box-sizing: border-box;\n  flex: 1;\n  min-height: 0;\n  padding: 1rem;\n  scrollbar-width: thin;\n  scrollbar-color: var(--color-border) transparent;\n}\n.settings-content[data-v-6cd84794]::-webkit-scrollbar {\n  width: 8px;\n}\n.settings-content[data-v-6cd84794]::-webkit-scrollbar-track {\n  background: rgba(var(--color-border-rgb), 0.1);\n  border-radius: 4px;\n}\n.settings-content[data-v-6cd84794]::-webkit-scrollbar-thumb {\n  background: var(--color-border);\n  border-radius: 4px;\n}\n.settings-content[data-v-6cd84794]::-webkit-scrollbar-thumb:hover {\n  background: var(--color-border-hover);\n}\n.setting-item[data-v-6cd84794] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  max-width: 100%;\n  overflow: visible;\n  box-sizing: border-box;\n  margin-bottom: 1.5rem;\n}\n.setting-label[data-v-6cd84794] {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--color-text);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  max-width: 100%;\n  overflow: hidden;\n  word-wrap: break-word;\n}\n.setting-input[data-v-6cd84794] {\n  padding: 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  font-size: 0.875rem;\n  width: 100px;\n  max-width: 120px;\n  transition: var(--transition-fast);\n  box-sizing: border-box;\n}\n.setting-input[data-v-6cd84794]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.2);\n}\n.setting-textarea[data-v-6cd84794] {\n  padding: 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  font-size: 0.875rem;\n  width: 100%;\n  max-width: 100%;\n  transition: var(--transition-fast);\n  box-sizing: border-box;\n  resize: vertical;\n  min-height: 100px;\n  font-family: monospace;\n  line-height: 1.4;\n}\n.setting-textarea[data-v-6cd84794]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.2);\n}\n.setting-textarea[data-v-6cd84794]::placeholder {\n  color: var(--color-text-secondary);\n  opacity: 0.7;\n}\n.setting-checkbox[data-v-6cd84794] {\n  margin-right: 0.5rem;\n  accent-color: var(--color-primary);\n  flex-shrink: 0;\n}\n.setting-hint[data-v-6cd84794] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  opacity: 0.8;\n  max-width: 100%;\n  overflow: hidden;\n  word-wrap: break-word;\n}\n.settings-actions[data-v-6cd84794] {\n  display: flex;\n  gap: 0.75rem;\n  margin-top: 2rem;\n  flex-wrap: wrap;\n  max-width: 100%;\n  overflow: visible;\n  box-sizing: border-box;\n}\n\n/* æ‰‹åŠ¨æ€»ç»“åŒºåŸŸ */\n.manual-summary-section[data-v-6cd84794] {\n  margin-top: 1.5rem;\n  padding: 1rem;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.summary-info[data-v-6cd84794] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  margin-bottom: 0.75rem;\n}\n.info-text[data-v-6cd84794] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.info-hint[data-v-6cd84794] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n\n/* é€šç”¨æ“ä½œæŒ‰é’®åŸºæ ·å¼ï¼Œç¡®ä¿æœ‰æ¸…æ™°è¾¹æ¡† */\n.action-btn[data-v-6cd84794] {\n  padding: 0.5rem 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: var(--transition-fast);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  box-sizing: border-box;\n  background: var(--color-surface);\n  color: var(--color-text);\n}\n@keyframes fadeIn-6cd84794 {\nfrom {\n    opacity: 0;\n    transform: translateY(-10px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.action-btn.success[data-v-6cd84794] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  border: 1px solid rgba(var(--color-success-rgb), 0.3);\n  color: var(--color-success);\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: var(--transition-fast);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  box-sizing: border-box;\n}\n.action-btn.success[data-v-6cd84794]:hover {\n  background: rgba(var(--color-success-rgb), 0.2);\n  border-color: var(--color-success);\n}\n\n/* ä¿¡æ¯æŒ‰é’®ï¼Œç”¨äºâ€œé‡ç½®é»˜è®¤â€ç­‰æ“ä½œ */\n.action-btn.info[data-v-6cd84794] {\n  background: rgba(var(--color-info-rgb), 0.1);\n  border: 1px solid rgba(var(--color-info-rgb), 0.3);\n  color: var(--color-info);\n}\n.action-btn.info[data-v-6cd84794]:hover {\n  background: rgba(var(--color-info-rgb), 0.2);\n  border-color: var(--color-info);\n}\n.settings-toggle-btn[data-v-6cd84794] {\n  background: rgba(var(--color-surface-rgb), 0.8);\n  border: 1px solid var(--color-border);\n  padding: 0.6rem;\n  border-radius: 8px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n  backdrop-filter: blur(10px);\n}\n.settings-toggle-btn[data-v-6cd84794]:hover,\n.settings-toggle-btn.active[data-v-6cd84794] {\n  background: rgba(var(--color-primary-rgb), 0.15);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.2);\n}\n\n/* è®°å¿†å¡ç‰‡ç‰¹å®šæ ·å¼ */\n.memory-list[data-v-6cd84794] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n.memory-card[data-v-6cd84794] {\n  padding: 1rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  transition: var(--transition-fast);\n  cursor: pointer;\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n  word-wrap: break-word;\n  word-break: break-word;\n}\n.memory-card[data-v-6cd84794]:hover {\n  background: var(--color-surface-light);\n  border-color: var(--color-border-hover);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.1);\n}\n.memory-header[data-v-6cd84794] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.75rem;\n}\n.memory-actions[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.delete-memory-btn[data-v-6cd84794] {\n  background: transparent;\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 0.25rem 0.5rem;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: all 0.2s ease;\n  opacity: 0.6;\n}\n.delete-memory-btn[data-v-6cd84794]:hover {\n  opacity: 1;\n  background: rgba(220, 38, 38, 0.1);\n  border-color: #dc2626;\n  transform: scale(1.1);\n}\n.memory-type-badge[data-v-6cd84794] {\n  padding: 0.25rem 0.5rem;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text-secondary);\n}\n.badge-short[data-v-6cd84794] {\n  border-color: rgba(var(--color-warning-rgb), 0.3);\n  background: rgba(var(--color-warning-rgb), 0.1);\n  color: var(--color-warning);\n}\n.badge-medium[data-v-6cd84794] {\n  border-color: rgba(var(--color-success-rgb), 0.3);\n  background: rgba(var(--color-success-rgb), 0.1);\n  color: var(--color-success);\n}\n.badge-long[data-v-6cd84794] {\n  border-color: rgba(var(--color-info-rgb), 0.3);\n  background: rgba(var(--color-info-rgb), 0.1);\n  color: var(--color-info);\n}\n.memory-time[data-v-6cd84794] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.memory-content[data-v-6cd84794] {\n  font-size: 0.875rem;\n  color: var(--color-text);\n  line-height: 1.5;\n  margin-bottom: 0.5rem;\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  word-wrap: break-word;\n  word-break: break-word;\n}\n.memory-title[data-v-6cd84794] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-primary);\n  margin-bottom: 0.75rem;\n  text-align: center;\n  padding: 0.5rem;\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.05));\n  border-radius: 6px;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n}\n.memory-section[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  margin: 0.75rem 0 0.5rem 0;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid rgba(var(--color-border-rgb), 0.3);\n}\n.memory-icon[data-v-6cd84794] {\n  font-size: 1.2rem;\n  margin-right: 0.5rem;\n}\n.memory-section-title[data-v-6cd84794] {\n  font-weight: 600;\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.memory-item[data-v-6cd84794] {\n  margin: 0.3rem 0;\n  padding-left: 1rem;\n  color: var(--color-text);\n  line-height: 1.4;\n  position: relative;\n  width: 100%;\n  max-width: 100%;\n  overflow: hidden;\n  word-wrap: break-word;\n  word-break: break-word;\n}\n.memory-item[data-v-6cd84794]::before {\n  content: '';\n  position: absolute;\n  left: 0.25rem;\n  top: 0.6rem;\n  width: 3px;\n  height: 3px;\n  background: var(--color-accent);\n  border-radius: 50%;\n}\n.memory-importance[data-v-6cd84794] {\n  font-size: 0.75rem;\n  color: var(--color-accent);\n  font-weight: 500;\n  padding: 0.25rem 0.5rem;\n  background: rgba(var(--color-accent-rgb), 0.1);\n  border-radius: 4px;\n  border: 1px solid rgba(var(--color-accent-rgb), 0.3);\n  display: inline-block;\n}\n.empty-hint[data-v-6cd84794] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  opacity: 0.7;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 640px) {\n.memory-center-panel[data-v-6cd84794] {\n    gap: 0.75rem;\n    width: 100%;\n    max-width: 100%;\n    overflow: hidden;\n}\n.header-actions .btn-text[data-v-6cd84794] {\n    display: none;\n}\n.filter-tabs[data-v-6cd84794] {\n    gap: 0.3rem;\n}\n.filter-tab[data-v-6cd84794] {\n    max-width: 120px;\n    font-size: 0.8rem;\n}\n.memory-status[data-v-6cd84794] {\n    gap: 0.5rem;\n    padding: 0.6rem;\n    flex-direction: column;\n}\n.status-item[data-v-6cd84794] {\n    min-width: 80px;\n    flex: 1 1 100px;\n    width: 100%;\n    max-width: 100%;\n}\n.status-text[data-v-6cd84794] {\n    font-size: 0.7rem;\n    min-width: 2.5rem;\n}\n.memory-card[data-v-6cd84794] {\n    padding: 0.8rem;\n}\n.memory-content[data-v-6cd84794] {\n    font-size: 0.8rem;\n}\n.memory-header[data-v-6cd84794] {\n    flex-direction: column;\n    gap: 0.5rem;\n    align-items: flex-start;\n}\n.memory-type-badge[data-v-6cd84794] {\n    align-self: flex-start;\n}\n.memory-time[data-v-6cd84794] {\n    align-self: flex-end;\n    font-size: 0.7rem;\n}\n}\n@media (max-width: 480px) {\n.memory-center-panel[data-v-6cd84794] {\n    gap: 0.5rem;\n}\n.filter-tabs[data-v-6cd84794] {\n    gap: 0.2rem;\n}\n.filter-tab[data-v-6cd84794] {\n    max-width: 100px;\n    font-size: 0.75rem;\n    padding: 0.4rem 0.6rem;\n}\n.memory-status[data-v-6cd84794] {\n    padding: 0.5rem;\n}\n.status-item[data-v-6cd84794] {\n    gap: 0.3rem;\n}\n.status-label[data-v-6cd84794] {\n    font-size: 0.7rem;\n    min-width: 1.5rem;\n}\n.status-bar[data-v-6cd84794] {\n    height: 4px;\n}\n.status-text[data-v-6cd84794] {\n    font-size: 0.65rem;\n    min-width: 2rem;\n}\n.memory-card[data-v-6cd84794] {\n    padding: 0.6rem;\n}\n.memory-content[data-v-6cd84794] {\n    font-size: 0.75rem;\n}\n.memory-section-title[data-v-6cd84794] {\n    font-size: 0.8rem;\n}\n.memory-item[data-v-6cd84794] {\n    font-size: 0.75rem;\n    padding-left: 0.8rem;\n}\n}\n\n/* åˆ†é¡µæ§åˆ¶æ ·å¼ */\n.pagination-controls[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  padding: 1rem;\n  background: rgba(var(--color-surface-rgb), 0.5);\n  border: 1px solid rgba(var(--color-border-rgb), 0.3);\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n}\n.pagination-controls.bottom[data-v-6cd84794] {\n  margin-top: 1rem;\n  margin-bottom: 0;\n}\n.pagination-info[data-v-6cd84794] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n}\n.pagination-buttons[data-v-6cd84794] {\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n}\n.page-btn[data-v-6cd84794] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 0.5rem 0.75rem;\n  cursor: pointer;\n  font-size: 1rem;\n  transition: all 0.2s ease;\n  color: var(--color-text);\n  min-width: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.page-btn[data-v-6cd84794]:hover:not(:disabled) {\n  background: var(--color-surface-light);\n  border-color: var(--color-primary);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.2);\n}\n.page-btn[data-v-6cd84794]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.pagination-jump[data-v-6cd84794] {\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n}\n.jump-input[data-v-6cd84794] {\n  width: 70px;\n  padding: 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  font-size: 0.875rem;\n  text-align: center;\n  transition: all 0.2s ease;\n}\n.jump-input[data-v-6cd84794]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.2);\n}\n.jump-btn[data-v-6cd84794] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: white;\n  border: none;\n  border-radius: 6px;\n  padding: 0.5rem 1rem;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n.jump-btn[data-v-6cd84794]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n.vector-toolbar[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.75rem;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.vector-status[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n  color: var(--color-text);\n}\n.status-dot[data-v-6cd84794] {\n  width: 10px;\n  height: 10px;\n  border-radius: 999px;\n  background: var(--color-warning);\n  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.15);\n}\n.status-dot.enabled[data-v-6cd84794] {\n  background: var(--color-success);\n  box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.15);\n}\n.vector-actions[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.vector-content[data-v-6cd84794] {\n  padding: 1rem;\n}\n.vector-stats[data-v-6cd84794] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem 1rem;\n  margin-bottom: 0.75rem;\n  padding: 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  background: var(--color-surface);\n}\n.stats-item[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: var(--color-text);\n}\n.stats-label[data-v-6cd84794] {\n  opacity: 0.7;\n}\n.stats-value[data-v-6cd84794] {\n  font-weight: 600;\n}\n.vector-list[data-v-6cd84794] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-top: 0.75rem;\n}\n.vector-card[data-v-6cd84794] {\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  padding: 0.75rem;\n  background: var(--color-surface);\n}\n.vector-card-header[data-v-6cd84794] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.vector-badges[data-v-6cd84794] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.vector-badge[data-v-6cd84794] {\n  font-size: 0.8rem;\n  padding: 0.2rem 0.5rem;\n  border-radius: 999px;\n  background: rgba(var(--color-primary-rgb), 0.12);\n  color: var(--color-primary);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n}\n.vector-badge.secondary[data-v-6cd84794] {\n  background: rgba(148, 163, 184, 0.12);\n  color: var(--color-text);\n  border: 1px solid rgba(148, 163, 184, 0.2);\n}\n.vector-time[data-v-6cd84794] {\n  font-size: 0.8rem;\n  opacity: 0.75;\n}\n.vector-tags[data-v-6cd84794] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.35rem;\n  margin-bottom: 0.5rem;\n}\n.vector-tag[data-v-6cd84794] {\n  font-size: 0.8rem;\n  padding: 0.15rem 0.45rem;\n  border-radius: 8px;\n  background: rgba(59, 130, 246, 0.12);\n  border: 1px solid rgba(59, 130, 246, 0.2);\n  color: var(--color-text);\n}\n.vector-text[data-v-6cd84794] {\n  white-space: pre-wrap;\n  line-height: 1.6;\n  color: var(--color-text);\n}\n@media (max-width: 640px) {\n.pagination-controls[data-v-6cd84794] {\n    flex-direction: column;\n    gap: 0.75rem;\n}\n.pagination-info[data-v-6cd84794] {\n    width: 100%;\n    text-align: center;\n}\n.pagination-buttons[data-v-6cd84794] {\n    width: 100%;\n    justify-content: center;\n}\n.pagination-jump[data-v-6cd84794] {\n    width: 100%;\n    justify-content: center;\n}\n}\n",""]);const s=i},540:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},602:(e,t,n)=>{"use strict";n.d(t,{P2:()=>f});const a=(e,t)=>t.some(t=>e instanceof t);let r,o;const i=new WeakMap,s=new WeakMap,l=new WeakMap;let c={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){c=e(c)}function u(e){return"function"==typeof e?(t=e,(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(p(this),e),m(this.request)}:function(...e){return m(t.apply(p(this),e))}):(e instanceof IDBTransaction&&function(e){if(i.has(e))return;const t=new Promise((t,n)=>{const a=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",o),e.removeEventListener("abort",o)},r=()=>{t(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",r),e.addEventListener("error",o),e.addEventListener("abort",o)});i.set(e,t)}(e),a(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,c):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const a=()=>{e.removeEventListener("success",r),e.removeEventListener("error",o)},r=()=>{t(m(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",r),e.addEventListener("error",o)});return l.set(t,e),t}(e);if(s.has(e))return s.get(e);const t=u(e);return t!==e&&(s.set(e,t),l.set(t,e)),t}const p=e=>l.get(e);function f(e,t,{blocked:n,upgrade:a,blocking:r,terminated:o}={}){const i=indexedDB.open(e,t),s=m(i);return a&&i.addEventListener("upgradeneeded",e=>{a(m(i.result),e.oldVersion,e.newVersion,m(i.transaction),e)}),n&&i.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const g=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],v=new Map;function b(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,r=h.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!r&&!g.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,r?"readwrite":"readonly");let i=o.store;return a&&(i=i.index(t.shift())),(await Promise.all([i[n](...t),r&&o.done]))[0]};return v.set(t,o),o}d(e=>({...e,get:(t,n,a)=>b(t,n)||e.get(t,n,a),has:(t,n)=>!!b(t,n)||e.has(t,n)}));const y=["continue","continuePrimaryKey","advance"],x={},k=new WeakMap,w=new WeakMap,E={get(e,t){if(!y.includes(t))return e[t];let n=x[t];return n||(n=x[t]=function(...e){k.set(this,w.get(this)[t](...e))}),n}};async function*N(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;const n=new Proxy(t,E);for(w.set(n,t),l.set(n,p(t));t;)yield n,t=await(k.get(n)||t.continue()),k.delete(n)}function S(e,t){return t===Symbol.asyncIterator&&a(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&a(e,[IDBIndex,IDBObjectStore])}d(e=>({...e,get:(t,n,a)=>S(t,n)?N:e.get(t,n,a),has:(t,n)=>S(t,n)||e.has(t,n)}))},625:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-87e1862c] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  animation: fadeIn-87e1862c 0.2s ease-out;\n}\n@keyframes fadeIn-87e1862c {\nfrom {\n    opacity: 0;\n}\nto {\n    opacity: 1;\n}\n}\n.modal-content[data-v-87e1862c] {\n  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);\n  border: 1px solid rgba(255, 215, 0, 0.3);\n  border-radius: 12px;\n  width: 90%;\n  max-width: 500px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);\n  animation: slideUp-87e1862c 0.3s ease-out;\n}\n@keyframes slideUp-87e1862c {\nfrom {\n    transform: translateY(20px);\n    opacity: 0;\n}\nto {\n    transform: translateY(0);\n    opacity: 1;\n}\n}\n.modal-header[data-v-87e1862c] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px;\n  border-bottom: 1px solid rgba(255, 215, 0, 0.2);\n}\n.modal-header h3[data-v-87e1862c] {\n  margin: 0;\n  font-size: 1.25rem;\n  color: #ffd700;\n  font-weight: 600;\n}\n.close-btn[data-v-87e1862c] {\n  background: none;\n  border: none;\n  font-size: 2rem;\n  color: #999;\n  cursor: pointer;\n  line-height: 1;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: all 0.2s;\n}\n.close-btn[data-v-87e1862c]:hover {\n  background: rgba(255, 255, 255, 0.1);\n  color: #fff;\n}\n.modal-body[data-v-87e1862c] {\n  padding: 24px;\n}\n.hint[data-v-87e1862c] {\n  margin: 0 0 12px 0;\n  color: #ccc;\n  font-size: 0.95rem;\n}\n.prompt-input[data-v-87e1862c] {\n  width: 100%;\n  padding: 12px;\n  border: 1px solid rgba(255, 215, 0, 0.3);\n  border-radius: 8px;\n  background: rgba(0, 0, 0, 0.3);\n  color: #fff;\n  font-size: 0.95rem;\n  font-family: inherit;\n  resize: vertical;\n  min-height: 120px;\n  transition: border-color 0.2s, box-shadow 0.2s;\n}\n.prompt-input[data-v-87e1862c]:focus {\n  outline: none;\n  border-color: #ffd700;\n  box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.1);\n}\n.prompt-input[data-v-87e1862c]::placeholder {\n  color: #666;\n}\n.modal-footer[data-v-87e1862c] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  padding: 16px 24px;\n  border-top: 1px solid rgba(255, 215, 0, 0.2);\n}\n.cancel-btn[data-v-87e1862c],\n.submit-btn[data-v-87e1862c] {\n  padding: 10px 24px;\n  border-radius: 6px;\n  font-size: 0.95rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n}\n.cancel-btn[data-v-87e1862c] {\n  background: rgba(255, 255, 255, 0.1);\n  color: #ccc;\n}\n.cancel-btn[data-v-87e1862c]:hover {\n  background: rgba(255, 255, 255, 0.15);\n  color: #fff;\n}\n.submit-btn[data-v-87e1862c] {\n  background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);\n  color: #1a1a2e;\n  font-weight: 600;\n}\n.submit-btn[data-v-87e1862c]:hover:not(:disabled) {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);\n}\n.submit-btn[data-v-87e1862c]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n",""]);const s=i},651:(e,t,n)=>{"use strict";n.d(t,{applyEquipmentBonus:()=>i,removeEquipmentBonus:()=>s});var a=n(2224);function r(e){const t=e;return t.è§’è‰²?.å±æ€§&&"object"==typeof t.è§’è‰².å±æ€§||(t.è§’è‰²=t.è§’è‰²&&"object"==typeof t.è§’è‰²?t.è§’è‰²:{},t.è§’è‰².å±æ€§={å¢ƒç•Œ:{åç§°:"å‡¡äºº",é˜¶æ®µ:"",å½“å‰è¿›åº¦:0,ä¸‹ä¸€çº§æ‰€éœ€:100,çªç ´æè¿°:""},å£°æœ›:0,æ°”è¡€:{å½“å‰:100,ä¸Šé™:100},çµæ°”:{å½“å‰:50,ä¸Šé™:50},ç¥è¯†:{å½“å‰:10,ä¸Šé™:10},å¯¿å‘½:{å½“å‰:18,ä¸Šé™:80}}),t.è§’è‰².å±æ€§}function o(e){const t=e;return t.è§’è‰²?.èº«ä»½&&"object"==typeof t.è§’è‰².èº«ä»½||(t.è§’è‰²=t.è§’è‰²&&"object"==typeof t.è§’è‰²?t.è§’è‰²:{},t.è§’è‰².èº«ä»½={åå¤©å…­å¸:{æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0}}),{character:t.è§’è‰².èº«ä»½}}function i(e,t){try{const n=r(e),{character:i}=o(e),s=e?.è§’è‰²?.èƒŒåŒ…?.ç‰©å“,l=s?.[t];if(!l||"è£…å¤‡"!==l.ç±»å‹)return console.warn(`[è£…å¤‡å¢å¹…] ç‰©å“ ${t} ä¸æ˜¯è£…å¤‡ç±»å‹`),!1;const c=l.è£…å¤‡å¢å¹…;if(!c)return console.log(`[è£…å¤‡å¢å¹…] è£…å¤‡ ${l.åç§°} æ²¡æœ‰å±æ€§åŠ æˆ`),!0;if(console.log(`[è£…å¤‡å¢å¹…] å¼€å§‹åº”ç”¨è£…å¤‡ ${l.åç§°} çš„å±æ€§åŠ æˆ:`,c),c.æ°”è¡€ä¸Šé™&&"number"==typeof c.æ°”è¡€ä¸Šé™){const e=(0,a.get)(n,"æ°”è¡€",{å½“å‰:100,ä¸Šé™:100}),t=e.ä¸Šé™+c.æ°”è¡€ä¸Šé™;(0,a.set)(n,"æ°”è¡€.ä¸Šé™",t),console.log(`[è£…å¤‡å¢å¹…] æ°”è¡€ä¸Šé™: ${e.ä¸Šé™} -> ${t} (+${c.æ°”è¡€ä¸Šé™})`)}if(c.çµæ°”ä¸Šé™&&"number"==typeof c.çµæ°”ä¸Šé™){const e=(0,a.get)(n,"çµæ°”",{å½“å‰:100,ä¸Šé™:100}),t=e.ä¸Šé™+c.çµæ°”ä¸Šé™;(0,a.set)(n,"çµæ°”.ä¸Šé™",t),console.log(`[è£…å¤‡å¢å¹…] çµæ°”ä¸Šé™: ${e.ä¸Šé™} -> ${t} (+${c.çµæ°”ä¸Šé™})`)}if(c.ç¥è¯†ä¸Šé™&&"number"==typeof c.ç¥è¯†ä¸Šé™){const e=(0,a.get)(n,"ç¥è¯†",{å½“å‰:100,ä¸Šé™:100}),t=e.ä¸Šé™+c.ç¥è¯†ä¸Šé™;(0,a.set)(n,"ç¥è¯†.ä¸Šé™",t),console.log(`[è£…å¤‡å¢å¹…] ç¥è¯†ä¸Šé™: ${e.ä¸Šé™} -> ${t} (+${c.ç¥è¯†ä¸Šé™})`)}return c.åå¤©å…­å¸&&["æ ¹éª¨","çµæ€§","æ‚Ÿæ€§","æ°”è¿","é­…åŠ›","å¿ƒæ€§"].forEach(e=>{const t=c.åå¤©å…­å¸?.[e];if(t&&"number"==typeof t){const n=(0,a.get)(i,`åå¤©å…­å¸.${e}`,0),r=n+t;(0,a.set)(i,`åå¤©å…­å¸.${e}`,r),console.log(`[è£…å¤‡å¢å¹…] åå¤©å…­å¸.${e}: ${n} -> ${r} (+${t})`)}}),console.log(`[è£…å¤‡å¢å¹…] âœ… æˆåŠŸåº”ç”¨è£…å¤‡ ${l.åç§°} çš„å±æ€§åŠ æˆ`),!0}catch(e){return console.error("[è£…å¤‡å¢å¹…] åº”ç”¨è£…å¤‡åŠ æˆå¤±è´¥:",e),!1}}function s(e,t){try{const n=r(e),{character:i}=o(e),s=e?.è§’è‰²?.èƒŒåŒ…?.ç‰©å“,l=s?.[t];if(!l||"è£…å¤‡"!==l.ç±»å‹)return console.warn(`[è£…å¤‡å¢å¹…] ç‰©å“ ${t} ä¸æ˜¯è£…å¤‡ç±»å‹`),!1;const c=l.è£…å¤‡å¢å¹…;if(!c)return console.log(`[è£…å¤‡å¢å¹…] è£…å¤‡ ${l.åç§°} æ²¡æœ‰å±æ€§åŠ æˆ`),!0;if(console.log(`[è£…å¤‡å¢å¹…] å¼€å§‹ç§»é™¤è£…å¤‡ ${l.åç§°} çš„å±æ€§åŠ æˆ:`,c),c.æ°”è¡€ä¸Šé™&&"number"==typeof c.æ°”è¡€ä¸Šé™){const e=(0,a.get)(n,"æ°”è¡€",{å½“å‰:100,ä¸Šé™:100}),t=Math.max(1,e.ä¸Šé™-c.æ°”è¡€ä¸Šé™);(0,a.set)(n,"æ°”è¡€.ä¸Šé™",t),e.å½“å‰>t&&((0,a.set)(n,"æ°”è¡€.å½“å‰",t),console.log(`[è£…å¤‡å¢å¹…] æ°”è¡€å½“å‰å€¼è¶…è¿‡æ–°ä¸Šé™ï¼Œå·²è°ƒæ•´: ${e.å½“å‰} -> ${t}`)),console.log(`[è£…å¤‡å¢å¹…] æ°”è¡€ä¸Šé™: ${e.ä¸Šé™} -> ${t} (-${c.æ°”è¡€ä¸Šé™})`)}if(c.çµæ°”ä¸Šé™&&"number"==typeof c.çµæ°”ä¸Šé™){const e=(0,a.get)(n,"çµæ°”",{å½“å‰:100,ä¸Šé™:100}),t=Math.max(1,e.ä¸Šé™-c.çµæ°”ä¸Šé™);(0,a.set)(n,"çµæ°”.ä¸Šé™",t),e.å½“å‰>t&&((0,a.set)(n,"çµæ°”.å½“å‰",t),console.log(`[è£…å¤‡å¢å¹…] çµæ°”å½“å‰å€¼è¶…è¿‡æ–°ä¸Šé™ï¼Œå·²è°ƒæ•´: ${e.å½“å‰} -> ${t}`)),console.log(`[è£…å¤‡å¢å¹…] çµæ°”ä¸Šé™: ${e.ä¸Šé™} -> ${t} (-${c.çµæ°”ä¸Šé™})`)}if(c.ç¥è¯†ä¸Šé™&&"number"==typeof c.ç¥è¯†ä¸Šé™){const e=(0,a.get)(n,"ç¥è¯†",{å½“å‰:100,ä¸Šé™:100}),t=Math.max(1,e.ä¸Šé™-c.ç¥è¯†ä¸Šé™);(0,a.set)(n,"ç¥è¯†.ä¸Šé™",t),e.å½“å‰>t&&((0,a.set)(n,"ç¥è¯†.å½“å‰",t),console.log(`[è£…å¤‡å¢å¹…] ç¥è¯†å½“å‰å€¼è¶…è¿‡æ–°ä¸Šé™ï¼Œå·²è°ƒæ•´: ${e.å½“å‰} -> ${t}`)),console.log(`[è£…å¤‡å¢å¹…] ç¥è¯†ä¸Šé™: ${e.ä¸Šé™} -> ${t} (-${c.ç¥è¯†ä¸Šé™})`)}return c.åå¤©å…­å¸&&["æ ¹éª¨","çµæ€§","æ‚Ÿæ€§","æ°”è¿","é­…åŠ›","å¿ƒæ€§"].forEach(e=>{const t=c.åå¤©å…­å¸?.[e];if(t&&"number"==typeof t){const n=(0,a.get)(i,`åå¤©å…­å¸.${e}`,0),r=Math.max(0,n-t);(0,a.set)(i,`åå¤©å…­å¸.${e}`,r),console.log(`[è£…å¤‡å¢å¹…] åå¤©å…­å¸.${e}: ${n} -> ${r} (-${t})`)}}),console.log(`[è£…å¤‡å¢å¹…] âœ… æˆåŠŸç§»é™¤è£…å¤‡ ${l.åç§°} çš„å±æ€§åŠ æˆ`),!0}catch(e){return console.error("[è£…å¤‡å¢å¹…] ç§»é™¤è£…å¤‡åŠ æˆå¤±è´¥:",e),!1}}},655:e=>{"use strict";var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch(e){t=!1}e.exports=t},660:e=>{"use strict";e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2712%27 height=%2712%27 viewBox=%270 0 12 12%27%3E%3Cpath fill=%27%23374151%27 d=%27M6 9L1 4h10z%27/%3E%3C/svg%3E"},714:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.format-guide-modal-overlay[data-v-e5556466] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  backdrop-filter: blur(4px);\n  padding: 20px;\n}\n.format-guide-modal[data-v-e5556466] {\n  background: var(--color-surface);\n  border-radius: 12px;\n  width: 100%;\n  max-width: 1000px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  animation: slideUp-e5556466 0.3s ease;\n}\n@keyframes slideUp-e5556466 {\nfrom {\n    transform: translateY(20px);\n    opacity: 0;\n}\nto {\n    transform: translateY(0);\n    opacity: 1;\n}\n}\n.modal-header[data-v-e5556466] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-title[data-v-e5556466] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.close-btn[data-v-e5556466] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n.close-btn[data-v-e5556466]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n}\n.modal-body[data-v-e5556466] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0;\n}\n.format-guide-content[data-v-e5556466] {\n  display: flex;\n  height: 100%;\n}\n.quick-nav[data-v-e5556466] {\n  width: 180px;\n  border-right: 1px solid var(--color-border);\n  padding: 1rem;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  flex-shrink: 0;\n}\n.nav-btn[data-v-e5556466] {\n  padding: 0.6rem 1rem;\n  background: transparent;\n  border: none;\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  text-align: left;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n}\n.nav-btn[data-v-e5556466]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n}\n.nav-btn.active[data-v-e5556466] {\n  background: var(--color-primary);\n  color: white;\n}\n.format-sections[data-v-e5556466] {\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n.format-section[data-v-e5556466] {\n  margin-bottom: 2rem;\n}\n.section-title[data-v-e5556466] {\n  margin: 0 0 1rem 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-primary);\n  border-bottom: 2px solid var(--color-primary);\n  padding-bottom: 0.5rem;\n}\n.section-content h5[data-v-e5556466] {\n  margin: 1rem 0 0.5rem 0;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.code-block[data-v-e5556466] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 1rem;\n  margin: 0.5rem 0;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.85rem;\n  line-height: 1.6;\n  color: var(--color-text);\n  overflow-x: auto;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.example-box[data-v-e5556466] {\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border-left: 3px solid var(--color-primary);\n  padding: 1rem;\n  margin: 1rem 0;\n  border-radius: 4px;\n}\n.example-box strong[data-v-e5556466] {\n  color: var(--color-primary);\n  display: block;\n  margin-bottom: 0.5rem;\n}\n.warning-box[data-v-e5556466] {\n  background: rgba(255, 193, 7, 0.1);\n  border-left: 3px solid #ffc107;\n  padding: 1rem;\n  margin: 1rem 0;\n  border-radius: 4px;\n}\n.warning-box strong[data-v-e5556466] {\n  color: #ffc107;\n  display: block;\n  margin-bottom: 0.5rem;\n}\n.warning-box ul[data-v-e5556466] {\n  margin: 0.5rem 0 0 1.5rem;\n  padding: 0;\n}\n.warning-box li[data-v-e5556466] {\n  margin: 0.3rem 0;\n  color: var(--color-text);\n}\n.modal-footer[data-v-e5556466] {\n  display: flex;\n  gap: 0.75rem;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-background);\n}\n.copy-btn[data-v-e5556466],\n.close-footer-btn[data-v-e5556466] {\n  padding: 0.6rem 1.2rem;\n  border: none;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n}\n.copy-btn[data-v-e5556466] {\n  background: var(--color-primary);\n  color: white;\n}\n.copy-btn[data-v-e5556466]:hover {\n  background: var(--color-primary-hover);\n  transform: translateY(-1px);\n}\n.close-footer-btn[data-v-e5556466] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  color: var(--color-text);\n  margin-left: auto;\n}\n.close-footer-btn[data-v-e5556466]:hover {\n  background: var(--color-surface-hover);\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n.format-guide-modal[data-v-e5556466] {\n    max-width: 95vw;\n    max-height: 95vh;\n}\n.format-guide-content[data-v-e5556466] {\n    flex-direction: column;\n}\n.quick-nav[data-v-e5556466] {\n    width: 100%;\n    border-right: none;\n    border-bottom: 1px solid var(--color-border);\n    flex-direction: row;\n    overflow-x: auto;\n    padding: 0.75rem;\n}\n.nav-btn[data-v-e5556466] {\n    white-space: nowrap;\n}\n.format-sections[data-v-e5556466] {\n    padding: 1rem;\n}\n.modal-footer[data-v-e5556466] {\n    flex-direction: column;\n}\n.close-footer-btn[data-v-e5556466] {\n    margin-left: 0;\n}\n}\n",""]);const s=i},810:(e,t,n)=>{"use strict";n.d(t,{Ey:()=>b,nY:()=>T});var a=n(4061);const r="undefined"!=typeof window;let o;const i=e=>o=e,s=Symbol();function l(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var c;!function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"}(c||(c={}));const d=(()=>"object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:"object"==typeof globalThis?globalThis:{HTMLElement:null})();function u(e,t,n){const a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){h(a.response,t,n)},a.onerror=function(){console.error("could not download file")},a.send()}function m(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function p(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,detail:0,screenX:80,screenY:20,clientX:80,clientY:20,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null});e.dispatchEvent(n)}}const f="object"==typeof navigator?navigator:{userAgent:""},g=(()=>/Macintosh/.test(f.userAgent)&&/AppleWebKit/.test(f.userAgent)&&!/Safari/.test(f.userAgent))(),h=r?"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!g?function(e,t="download",n){const a=document.createElement("a");a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?m(a.href)?u(e,t,n):(a.target="_blank",p(a)):p(a)):(a.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(a.href)},4e4),setTimeout(function(){p(a)},0))}:"msSaveOrOpenBlob"in f?function(e,t="download",n){if("string"==typeof e)if(m(e))u(e,t,n);else{const t=document.createElement("a");t.href=e,t.target="_blank",setTimeout(function(){p(t)})}else navigator.msSaveOrOpenBlob(function(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return u(e,t,n);const r="application/octet-stream"===e.type,o=/constructor/i.test(String(d.HTMLElement))||"safari"in d,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||r&&o||g)&&"undefined"!=typeof FileReader){const t=new FileReader;t.onloadend=function(){let e=t.result;if("string"!=typeof e)throw a=null,new Error("Wrong reader.result type");e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location.assign(e),a=null},t.readAsDataURL(e)}else{const t=URL.createObjectURL(e);a?a.location.assign(t):location.href=t,a=null,setTimeout(function(){URL.revokeObjectURL(t)},4e4)}}:()=>{},{assign:v}=Object;function b(){const e=(0,a.effectScope)(!0),t=e.run(()=>(0,a.ref)({}));let n=[],r=[];const o=(0,a.markRaw)({install(e){i(o),o._a=e,e.provide(s,o),e.config.globalProperties.$pinia=o,r.forEach(e=>n.push(e)),r=[]},use(e){return this._a?n.push(e):r.push(e),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return o}const y=()=>{};function x(e,t,n,r=y){e.add(t);const o=()=>{e.delete(t)&&r()};return!n&&(0,a.getCurrentScope)()&&(0,a.onScopeDispose)(o),o}function k(e,...t){e.forEach(e=>{e(...t)})}const w=e=>e(),E=Symbol(),N=Symbol();function S(e,t){e instanceof Map&&t instanceof Map?t.forEach((t,n)=>e.set(n,t)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],o=e[n];l(o)&&l(r)&&e.hasOwnProperty(n)&&!(0,a.isRef)(r)&&!(0,a.isReactive)(r)?e[n]=S(o,r):e[n]=r}return e}const V=Symbol();function _(e){return!l(e)||!Object.prototype.hasOwnProperty.call(e,V)}const{assign:C}=Object;function A(e){return!(!(0,a.isRef)(e)||!e.effect)}function D(e,t,n={},r,o,s){let l;const d=C({actions:{}},n),u={deep:!0};let m,p,f,g=new Set,h=new Set;const v=r.state.value[e];let b;function V(t){let n;m=p=!1,"function"==typeof t?(t(r.state.value[e]),n={type:c.patchFunction,storeId:e,events:f}):(S(r.state.value[e],t),n={type:c.patchObject,payload:t,storeId:e,events:f});const o=b=Symbol();(0,a.nextTick)().then(()=>{b===o&&(m=!0)}),p=!0,k(g,n,r.state.value[e])}s||v||(r.state.value[e]={}),(0,a.ref)({});const D=s?function(){const{state:e}=n,t=e?e():{};this.$patch(e=>{C(e,t)})}:y,T=(t,n="")=>{if(E in t)return t[N]=n,t;const a=function(){i(r);const n=Array.from(arguments),o=new Set,s=new Set;let l;k(h,{args:n,name:a[N],store:I,after:function(e){o.add(e)},onError:function(e){s.add(e)}});try{l=t.apply(this&&this.$id===e?this:I,n)}catch(e){throw k(s,e),e}return l instanceof Promise?l.then(e=>(k(o,e),e)).catch(e=>(k(s,e),Promise.reject(e))):(k(o,l),l)};return a[E]=!0,a[N]=n,a},B={_p:r,$id:e,$onAction:x.bind(null,h),$patch:V,$reset:D,$subscribe(t,n={}){const o=x(g,t,n.detached,()=>i()),i=l.run(()=>(0,a.watch)(()=>r.state.value[e],a=>{("sync"===n.flush?p:m)&&t({storeId:e,type:c.direct,events:f},a)},C({},u,n)));return o},$dispose:function(){l.stop(),g.clear(),h.clear(),r._s.delete(e)}},I=(0,a.reactive)(B);r._s.set(e,I);const z=(r._a&&r._a.runWithContext||w)(()=>r._e.run(()=>(l=(0,a.effectScope)()).run(()=>t({action:T}))));for(const t in z){const n=z[t];if((0,a.isRef)(n)&&!A(n)||(0,a.isReactive)(n))s||(v&&_(n)&&((0,a.isRef)(n)?n.value=v[t]:S(n,v[t])),r.state.value[e][t]=n);else if("function"==typeof n){const e=T(n,t);z[t]=e,d.actions[t]=n}}return C(I,z),C((0,a.toRaw)(I),z),Object.defineProperty(I,"$state",{get:()=>r.state.value[e],set:e=>{V(t=>{C(t,e)})}}),r._p.forEach(e=>{C(I,l.run(()=>e({store:I,app:r._a,pinia:r,options:d})))}),v&&s&&n.hydrate&&n.hydrate(I.$state,v),m=!0,p=!0,I}function T(e,t,n){let r;const l="function"==typeof t;function c(n,c){const d=(0,a.hasInjectionContext)();return(n=n||(d?(0,a.inject)(s,null):null))&&i(n),(n=o)._s.has(e)||(l?D(e,t,r,n):function(e,t,n){const{state:r,actions:o,getters:s}=t,l=n.state.value[e];let c;c=D(e,function(){l||(n.state.value[e]=r?r():{});const t=(0,a.toRefs)(n.state.value[e]);return C(t,o,Object.keys(s||{}).reduce((t,r)=>(t[r]=(0,a.markRaw)((0,a.computed)(()=>{i(n);const t=n._s.get(e);return s[r].call(t,t)})),t),{}))},t,n,0,!0)}(e,r,n)),n._s.get(e)}return r=l?n:t,c.$id=e,c}},814:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.sect-missions[data-v-1c6fff6c] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n.player-info-bar[data-v-1c6fff6c] {\n  display: flex;\n  gap: 1.5rem;\n  padding: 0.75rem 1rem;\n  background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(168, 85, 247, 0.05));\n  border-radius: 8px;\n  border: 1px solid rgba(147, 51, 234, 0.2);\n}\n.info-item[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.info-label[data-v-1c6fff6c] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.info-value[data-v-1c6fff6c] {\n  font-weight: 600;\n  font-size: 0.9rem;\n}\n.info-value.position[data-v-1c6fff6c] { color: #9333ea;\n}\n.info-value.contribution[data-v-1c6fff6c] { color: #f59e0b;\n}\n.mission-tabs[data-v-1c6fff6c] {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.tab-btn[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  padding: 0.5rem 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.tab-btn[data-v-1c6fff6c]:hover {\n  border-color: rgba(147, 51, 234, 0.3);\n  color: var(--color-text);\n}\n.tab-btn.active[data-v-1c6fff6c] {\n  background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(168, 85, 247, 0.05));\n  border-color: rgba(147, 51, 234, 0.4);\n  color: #9333ea;\n}\n.count-badge[data-v-1c6fff6c] {\n  background: #9333ea;\n  color: white;\n  font-size: 0.7rem;\n  padding: 0.1rem 0.4rem;\n  border-radius: 10px;\n  font-weight: 600;\n}\n.mission-list[data-v-1c6fff6c] {\n  flex: 1;\n  overflow-y: auto;\n}\n.empty-state[data-v-1c6fff6c] {\n  text-align: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-1c6fff6c] {\n  opacity: 0.5;\n  margin-bottom: 0.5rem;\n}\n.empty-text[data-v-1c6fff6c] {\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n.empty-hint[data-v-1c6fff6c] {\n  font-size: 0.8rem;\n  opacity: 0.7;\n  margin-bottom: 1rem;\n}\n.ask-btn[data-v-1c6fff6c] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.6rem 1rem;\n  background: linear-gradient(135deg, #9333ea, #7c3aed);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.ask-btn[data-v-1c6fff6c]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(147, 51, 234, 0.3);\n}\n.missions[data-v-1c6fff6c] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.mission-card[data-v-1c6fff6c] {\n  padding: 1rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  transition: all 0.2s ease;\n}\n.mission-card[data-v-1c6fff6c]:hover {\n  border-color: rgba(147, 51, 234, 0.3);\n}\n.mission-card.completed[data-v-1c6fff6c] {\n  opacity: 0.7;\n}\n.mission-card.difficulty-easy[data-v-1c6fff6c] { border-left: 3px solid #22c55e;\n}\n.mission-card.difficulty-normal[data-v-1c6fff6c] { border-left: 3px solid #3b82f6;\n}\n.mission-card.difficulty-hard[data-v-1c6fff6c] { border-left: 3px solid #f59e0b;\n}\n.mission-card.difficulty-extreme[data-v-1c6fff6c] { border-left: 3px solid #ef4444;\n}\n.mission-header[data-v-1c6fff6c] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0.5rem;\n}\n.mission-title[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.mission-name[data-v-1c6fff6c] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.mission-type[data-v-1c6fff6c] {\n  font-size: 0.7rem;\n  padding: 0.15rem 0.4rem;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.mission-type.type-æ—¥å¸¸[data-v-1c6fff6c] { background: rgba(59, 130, 246, 0.1); color: #3b82f6;\n}\n.mission-type.type-å®—é—¨[data-v-1c6fff6c] { background: rgba(147, 51, 234, 0.1); color: #9333ea;\n}\n.mission-type.type-æˆ˜æ–—[data-v-1c6fff6c] { background: rgba(239, 68, 68, 0.1); color: #ef4444;\n}\n.mission-difficulty[data-v-1c6fff6c] {\n  font-size: 0.7rem;\n  padding: 0.2rem 0.5rem;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.diff-easy[data-v-1c6fff6c] { background: rgba(34, 197, 94, 0.1); color: #22c55e;\n}\n.diff-normal[data-v-1c6fff6c] { background: rgba(59, 130, 246, 0.1); color: #3b82f6;\n}\n.diff-hard[data-v-1c6fff6c] { background: rgba(245, 158, 11, 0.1); color: #f59e0b;\n}\n.diff-extreme[data-v-1c6fff6c] { background: rgba(239, 68, 68, 0.1); color: #ef4444;\n}\n.mission-desc[data-v-1c6fff6c] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  margin: 0 0 0.75rem 0;\n  line-height: 1.4;\n}\n.mission-objectives[data-v-1c6fff6c] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n  margin-bottom: 0.75rem;\n}\n.objective-item[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.objective-item.done[data-v-1c6fff6c] {\n  color: #22c55e;\n}\n.obj-icon[data-v-1c6fff6c] {\n  flex-shrink: 0;\n}\n.obj-icon.done[data-v-1c6fff6c] {\n  color: #22c55e;\n}\n.obj-text[data-v-1c6fff6c] {\n  flex: 1;\n}\n.obj-progress[data-v-1c6fff6c] {\n  font-weight: 500;\n  font-size: 0.75rem;\n}\n.mission-rewards[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n  margin-bottom: 0.75rem;\n}\n.rewards-label[data-v-1c6fff6c] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.reward-tags[data-v-1c6fff6c] {\n  display: flex;\n  gap: 0.35rem;\n  flex-wrap: wrap;\n}\n.reward-tag[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.2rem;\n  font-size: 0.7rem;\n  padding: 0.15rem 0.4rem;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.reward-tag.contribution[data-v-1c6fff6c] { background: rgba(245, 158, 11, 0.1); color: #f59e0b;\n}\n.reward-tag.experience[data-v-1c6fff6c] { background: rgba(139, 92, 246, 0.1); color: #8b5cf6;\n}\n.reward-tag.reputation[data-v-1c6fff6c] { background: rgba(59, 130, 246, 0.1); color: #3b82f6;\n}\n.reward-tag.item[data-v-1c6fff6c] { background: rgba(34, 197, 94, 0.1); color: #22c55e;\n}\n.mission-actions[data-v-1c6fff6c] {\n  display: flex;\n  justify-content: flex-end;\n}\n.action-btn[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  padding: 0.4rem 0.75rem;\n  border: none;\n  border-radius: 5px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.action-btn.accept[data-v-1c6fff6c] {\n  background: linear-gradient(135deg, #9333ea, #7c3aed);\n  color: white;\n}\n.action-btn.complete[data-v-1c6fff6c] {\n  background: linear-gradient(135deg, #22c55e, #16a34a);\n  color: white;\n}\n.action-btn[data-v-1c6fff6c]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n.status-badge[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  font-size: 0.75rem;\n  color: #22c55e;\n  font-weight: 500;\n}\n.missions-tips[data-v-1c6fff6c] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  background: rgba(59, 130, 246, 0.1);\n  border-radius: 6px;\n  font-size: 0.75rem;\n  color: #3b82f6;\n}\n",""]);const s=i},840:(e,t,n)=>{"use strict";n.d(t,{IJ:()=>f,p$:()=>p,q5:()=>m});var a=n(406),r=n(1513),o=n(8651),i=n(9990);const s='\n## è¾“å‡ºæ ¼å¼ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰\n\nä»…è¾“å‡ºä¸€ä¸ª JSON å¯¹è±¡ï¼ˆå¯ç”¨ ```json ä»£ç å›´æ åŒ…è£¹ï¼‰ï¼›ä¸è¦è¾“å‡ºä»»ä½•è§£é‡Šæ€§æ–‡å­—/æ ‡ç­¾ã€‚\n\nJSONç»“æ„ï¼š\n```json\n{\n  "text": "1200-2500å­—å¼€å±€å™äº‹ï¼ˆæ²‰æµ¸å¼ã€ç¦æ­¢åŒ…å«ä»»ä½•æ¸¸æˆæ•°æ®/JSON/æ ‡ç­¾ï¼‰",\n  "mid_term_memory": "50-100å­—æ‘˜è¦ï¼ˆå¿…å¡«ï¼Œä¸èƒ½ä¸ºç©ºï¼‰",\n  "tavern_commands": [\n    {"action":"set","key":"å…ƒæ•°æ®.æ—¶é—´","value":{"å¹´":1050,"æœˆ":1,"æ—¥":1,"å°æ—¶":8,"åˆ†é’Ÿ":0}},\n    {"action":"set","key":"è§’è‰².ä½ç½®","value":{"æè¿°":"å¤§é™†Â·åœ°ç‚¹","x":5000,"y":5000}},\n    {"action":"set","key":"è§’è‰².èƒŒåŒ….çµçŸ³","value":{"ä¸‹å“":100,"ä¸­å“":0,"ä¸Šå“":0,"æå“":0}}\n  ],\n  "action_options": ["é€‰é¡¹1","é€‰é¡¹2","é€‰é¡¹3","é€‰é¡¹4","é€‰é¡¹5"]\n}\n```\n\nè¦æ±‚ï¼š\n- text åªå†™æ•…äº‹æ­£æ–‡ï¼›ä¸è¦å¤¹å¸¦å‘½ä»¤ã€æ•°æ®ã€å˜é‡å\n- tavern_commands å¿…é¡»æ˜¯æ•°ç»„ï¼›ç”¨ {action,key,value} æ ¼å¼\n- action_options å¿…é¡»è¾“å‡º5ä¸ªä¸”ä¸èƒ½ä¸ºç©º\n- ä¸¥ç¦è¾“å‡º `<thinking>` / æ€ç»´é“¾ / æ¨ç†è¿‡ç¨‹\n'.trim(),l='\n## åˆå§‹åŒ–å‘½ä»¤ï¼ˆtavern_commandsï¼‰\n\næŒ‰é¡ºåºæ‰§è¡Œï¼š\n\n1. **æ—¶é—´** - è®¾ç½® `å…ƒæ•°æ®.æ—¶é—´`ï¼›å¹¶è®¾ç½® `è§’è‰².èº«ä»½.å‡ºç”Ÿæ—¥æœŸ`ï¼ˆå‡ºç”Ÿå¹´ = å…ƒæ•°æ®.æ—¶é—´.å¹´ - å¼€å±€å¹´é¾„ï¼‰\n2. **ä½ç½®** - è®¾ç½® `è§’è‰².ä½ç½®`ï¼Œå¿…é¡»åŒ…å« {æè¿°, x, y}ï¼Œä»å¯ç”¨åœ°ç‚¹é€‰æ‹©\n3. **å£°æœ›** - è®¾ç½® `è§’è‰².å±æ€§.å£°æœ›`ï¼ˆæ™®é€š0-10, å®—é—¨10-50, åé—¨50-100ï¼‰\n4. **éšæœºé¡¹** - è‹¥çµæ ¹/å‡ºèº«ä¸º"éšæœº"ï¼Œç”¨ `set` å†™å…¥ `è§’è‰².èº«ä»½.çµæ ¹` / `è§’è‰².èº«ä»½.å‡ºç”Ÿ` çš„å…·ä½“å†…å®¹\n5. **èµ„æº** - è®¾ç½® `è§’è‰².èƒŒåŒ….çµçŸ³` ä¸ `è§’è‰².èƒŒåŒ….ç‰©å“.{ç‰©å“ID}`ï¼›åŠŸæ³•åªä½œä¸ºâ€œç‰©å“.ç±»å‹=åŠŸæ³•â€è¿›å…¥èƒŒåŒ…\n6. **NPC** - ä»…åˆ›å»ºæ–‡æœ¬ä¸­æ˜ç¡®æåˆ°çš„é‡è¦äººç‰©ï¼ˆ0-3ä¸ªï¼‰ï¼Œå†™å…¥ `ç¤¾äº¤.å…³ç³».{npcKey}`ï¼ˆnpcKey ç”¨ npc_å§“å æ‹¼éŸ³/è‹±æ–‡å‡å¯ï¼Œä½†è¦ç¨³å®šï¼‰\n7. **å¤§é“** - è‹¥å¤©èµ‹/åŠŸæ³•å½±å“å¤§é“ï¼Œå†™å…¥ `è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.{é“å}`ï¼Œå¿…é¡»åŒ…å«å®Œæ•´å¯¹è±¡ï¼š{é“å,æè¿°,é˜¶æ®µåˆ—è¡¨:[{é˜¶æ®µå,éœ€æ±‚ç»éªŒ}],æ˜¯å¦è§£é”:true,å½“å‰é˜¶æ®µ:0,å½“å‰ç»éªŒ:0,æ€»ç»éªŒ:0}\n\nçº¦æŸï¼š\n- æ‰€æœ‰ key å¿…é¡»ä»¥ `å…ƒæ•°æ®/è§’è‰²/ç¤¾äº¤/ä¸–ç•Œ/ç³»ç»Ÿ` å¼€å¤´ï¼ˆçŸ­è·¯å¾„ï¼‰\n'.trim(),c="\n## å™äº‹è¦æ±‚\n\n- **ç¯‡å¹…**: 1200-2500å­—\n- **é£æ ¼**: é€šè¿‡è¡Œä¸ºå’Œæ„Ÿå—å±•ç°ç‰¹è´¨ï¼Œç¦æ­¢æ¸¸æˆæœ¯è¯­\n- **å¹´é¾„**: ä¸¥æ ¼ä»ç©å®¶é€‰æ‹©çš„å¹´é¾„å¼€å§‹\n- **ä¸€è‡´æ€§**: å¿…é¡»ä¸ç©å®¶é€‰æ‹©å®Œå…¨åŒ¹é…\n".trim(),d="\n## åˆå§‹èµ„æºå‚è€ƒ\n\n- **çµçŸ³**: è´«å›°0-50, æ™®é€š20-100, å®—é—¨50-300, å¯Œè£•100-500+\n- **ç‰©å“**: 1-6ä»¶ï¼ˆåŸºäºæ•…äº‹é€»è¾‘ï¼‰\n- **åŠŸæ³•**: 0-3éƒ¨ï¼ˆåŸºäºå‡ºèº«ï¼‰\n- **NPC**: 0-3ä¸ªï¼ˆåªåˆ›å»ºæ–‡æœ¬ä¸­æ˜ç¡®æåˆ°çš„ï¼‰\n- **å¢ƒç•Œ**: æœ‰ä¿®ç‚¼å†…å®¹â†’ç‚¼æ°”æœŸ, æ— ä¿®ç‚¼â†’å‡¡äºº\n".trim(),u=`\n# è§’è‰²åˆå§‹åŒ–ä»»åŠ¡\n\n${s}\n\n---\n\n${l}\n\n---\n\n${c}\n\n---\n\n${d}\n\n---\n\n# æ•°æ®ç»“æ„\n${a.Ps}\n`.trim();function m(e){return e?u:(0,a.qh)(u)}function p(e,t){const{name:n,gender:a,race:r,age:o,world:i,talentTier:s,origin:l,spiritRoot:c,talents:d,attributes:u,difficultyPrompt:m}=e,p="object"==typeof l&&null!==l,f="object"==typeof c&&null!==c,g=d.length>0?d.map(e=>`- ${e.name}: ${e.description}`).join("\n"):"æ— ",h=Object.entries(u).map(([e,t])=>`${e}:${t}`).join(", "),v=t?.availableContinents?.map(e=>`- ${e.name||e.åç§°}`).join("\n")||"(æœªç”Ÿæˆ)",b=t?.availableLocations?.slice(0,8).map(e=>`- ${e.name||e.åç§°} (${e.type||e.ç±»å‹})`).join("\n")||"(æœªç”Ÿæˆ)";return`\n# ç©å®¶è§’è‰²æ•°æ®\n\n## åŸºç¡€ä¿¡æ¯\nå§“å: ${n} | æ€§åˆ«: ${a} | ç§æ—: ${r} | å¹´é¾„: ${o}å²\n\n## ä¸–ç•Œ\n${i.name} (${i.era})\n${i.description}\n\n## å¤©èµ„\n${s.name}: ${s.description}\n\n## å‡ºèº«\n${p?l.name:l}: ${p?l.description:"(éšæœºï¼Œéœ€AIç”Ÿæˆ)"}\n\n## çµæ ¹\n${f?`${c.name} (${c.tier})`:c}: ${f?c.description:"(éšæœºï¼Œéœ€AIç”Ÿæˆ)"}\n\n## å¤©èµ‹\n${g}\n\n## å…ˆå¤©å…­å¸\n${h}\n\n---\n\n## å¯ç”¨åœ°ç‚¹\n**å¤§é™†**:\n${v}\n\n**åœ°ç‚¹**:\n${b}\n\nâš ï¸ ä½ç½®å¿…é¡»ä»ä¸Šè¿°åœ°ç‚¹é€‰æ‹©ï¼Œåæ ‡èŒƒå›´: x:0-10000, y:0-10000\n\n---\n\n## éš¾åº¦è®¾ç½®\n${m||"ã€éš¾åº¦æ¨¡å¼ï¼šæ™®é€šã€‘\n- ä¸–ç•Œéµå¾ªæ­£å¸¸ä¿®ä»™è§„åˆ™ï¼Œæœºç¼˜ä¸å±é™©å¹¶å­˜"}\n\n---\n\n## ç³»ç»Ÿè®¾ç½®\n${t?.systemSettings?.nsfwMode?`- **NSFWæ¨¡å¼**: å·²å¼€å¯\n- **ç§å¯†ä¿¡æ¯ç”ŸæˆèŒƒå›´**: ${"all"===t?.systemSettings?.nsfwGenderFilter?"æ‰€æœ‰NPC":"female"===t?.systemSettings?.nsfwGenderFilter?"ä»…å¥³æ€§NPC":"ä»…ç”·æ€§NPC"}\nâš ï¸ åˆ›å»ºNPCæ—¶ï¼Œè‹¥NPCæ€§åˆ«ç¬¦åˆä¸Šè¿°èŒƒå›´ï¼Œå¿…é¡»ç”Ÿæˆå®Œæ•´çš„"ç§å¯†ä¿¡æ¯(PrivacyProfile)"å­—æ®µ`:"- **NSFWæ¨¡å¼**: å·²å…³é—­ï¼ˆä¸ç”Ÿæˆç§å¯†ä¿¡æ¯ï¼‰"}\n\n---\n\n## è¾“å‡ºè¦æ±‚\nä¸¥æ ¼éµå¾ªç³»ç»Ÿçš„JSONè¾“å‡ºè§„åˆ™ï¼š\n- ä¸è¦è¾“å‡º \`<thinking>\` / æ€ç»´é“¾ / ä»»ä½•æ¨ç†è¿‡ç¨‹æ ‡ç­¾\n- æ­£æ–‡å†™å…¥ JSON çš„ "text" å­—æ®µï¼ˆä¸è¦å†è¾“å‡º "<narrative>" ç­‰æ ‡ç­¾ï¼‰\n- è¡ŒåŠ¨é€‰é¡¹å†™å…¥ JSON çš„ "action_options" å­—æ®µï¼ˆ5ä¸ªï¼‰\n`.trim()}async function f(){const e=await(0,r.q)([]),t=await(0,i.XH)("characterInit"),u=`# è§’è‰²åˆå§‹åŒ–ä»»åŠ¡\n\n---\n\n${s}\n\n---\n\n${l}\n\n---\n\n${c}\n\n---\n\n${d}`,{promptStorage:m}=await Promise.resolve().then(n.bind(n,4459)),p=await m.loadAll(),f=`${e}\n\n---\n\n${p.characterInit?.modified&&t?.trim()?t:u}\n`.trim();return(0,o.isTavernEnv)()?f:(0,a.qh)(f)}'\n# ä»»åŠ¡ï¼šç”Ÿæˆå±‚çº§åœ°ç‚¹å\n\nè¾“å…¥: INPUT_PLACEHOLDER\nè¾“å‡º: {"location_name": "åŒºåŸŸÂ·å»ºç­‘Â·åœºæ‰€"}\n\nè¦æ±‚:\n1. 2-3å±‚çº§ï¼Œç”¨"Â·"åˆ†éš”\n2. ä½“ç°ä¸–ç•Œç‰¹ç‚¹\n3. åªè¿”å›JSON\n'.trim()},852:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n.origin-selection-container[data-v-67f47fdd] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.loading-state[data-v-67f47fdd], .error-state[data-v-67f47fdd], .placeholder[data-v-67f47fdd] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  font-size: 1.1rem;\n  color: #94a3b8;\n  font-style: italic;\n}\n.origin-layout[data-v-67f47fdd] {\n  display: grid;\n  grid-template-columns: 1fr 2fr;\n  gap: 1.5rem;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* ========== å·¦ä¾§é¢æ¿ ========== */\n.origin-left-panel[data-v-67f47fdd] {\n  display: flex;\n  flex-direction: column;\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  overflow: hidden;\n}\n.origin-list-container[data-v-67f47fdd] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.origin-list-container[data-v-67f47fdd]::-webkit-scrollbar { width: 6px;\n}\n.origin-list-container[data-v-67f47fdd]::-webkit-scrollbar-track { background: transparent;\n}\n.origin-list-container[data-v-67f47fdd]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.origin-list-container[data-v-67f47fdd]::-webkit-scrollbar-thumb:hover { background: rgba(147, 197, 253, 0.5);\n}\n\n/* ========== é€‰é¡¹å¡æ ·å¼ ========== */\n.origin-item[data-v-67f47fdd] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.9rem 1rem;\n  margin-bottom: 0.5rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  border: 1px solid transparent;\n  background: rgba(30, 41, 59, 0.4);\n}\n.origin-item[data-v-67f47fdd]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(147, 197, 253, 0.2);\n}\n.origin-item.selected[data-v-67f47fdd] {\n  background: rgba(30, 58, 138, 0.4);\n  border-color: rgba(147, 197, 253, 0.4);\n  box-shadow: 0 0 0 1px rgba(147, 197, 253, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.origin-item.disabled[data-v-67f47fdd] {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.origin-item.disabled[data-v-67f47fdd]:hover {\n  background: rgba(30, 41, 59, 0.4);\n  border-color: transparent;\n}\n.item-content[data-v-67f47fdd] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n}\n.origin-name[data-v-67f47fdd] {\n  font-weight: 500;\n  color: #f1f5f9;\n}\n.origin-item.selected .origin-name[data-v-67f47fdd] {\n  color: #bfdbfe;\n}\n.origin-cost[data-v-67f47fdd] {\n  color: #fbbf24;\n  font-size: 0.85rem;\n  font-weight: 500;\n}\n\n/* æŒ‰é’®ç»„å®¹å™¨ */\n.action-buttons[data-v-67f47fdd] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  opacity: 0;\n  transition: opacity 0.2s;\n  margin-left: 0.5rem;\n}\n.origin-item:hover .action-buttons[data-v-67f47fdd] {\n  opacity: 1;\n}\n.edit-btn[data-v-67f47fdd], .delete-btn[data-v-67f47fdd] {\n  background: none;\n  border: none;\n  color: #64748b;\n  cursor: pointer;\n  padding: 0.35rem;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.edit-btn[data-v-67f47fdd]:hover {\n  color: #93c5fd;\n  background: rgba(147, 197, 253, 0.1);\n}\n.delete-btn[data-v-67f47fdd]:hover {\n  color: #f87171;\n  background: rgba(248, 113, 113, 0.1);\n}\n.divider[data-v-67f47fdd] {\n  height: 1px;\n  background: linear-gradient(to right, transparent, rgba(147, 197, 253, 0.2), transparent);\n  margin: 0.5rem 0;\n}\n.action-name[data-v-67f47fdd] {\n  font-weight: 500;\n}\n\n/* ========== å³ä¾§è¯¦æƒ…é¢æ¿ ========== */\n.origin-details-container[data-v-67f47fdd] {\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.origin-details[data-v-67f47fdd] {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n.origin-details h2[data-v-67f47fdd] {\n  margin: 0 0 1rem 0;\n  color: #93c5fd;\n  flex-shrink: 0;\n  font-size: 1.5rem;\n  text-shadow: 0 0 20px rgba(147, 197, 253, 0.3);\n}\n.description-scroll[data-v-67f47fdd] {\n  flex: 1;\n  overflow-y: auto;\n  line-height: 1.7;\n  margin-bottom: 1rem;\n  padding-right: 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.description-scroll[data-v-67f47fdd]::-webkit-scrollbar { width: 6px;\n}\n.description-scroll[data-v-67f47fdd]::-webkit-scrollbar-track { background: transparent;\n}\n.description-scroll[data-v-67f47fdd]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.description-scroll p[data-v-67f47fdd] {\n  margin: 0;\n  white-space: pre-wrap;\n  color: #94a3b8;\n}\n.cost-display[data-v-67f47fdd] {\n  text-align: right;\n  font-weight: 600;\n  color: #fbbf24;\n  flex-shrink: 0;\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .origin-left-panel[data-v-67f47fdd],\n[data-theme="light"] .origin-details-container[data-v-67f47fdd] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .origin-item[data-v-67f47fdd] {\n  background: rgba(255, 255, 255, 0.6);\n}\n[data-theme="light"] .origin-item[data-v-67f47fdd]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .origin-item.selected[data-v-67f47fdd] {\n  background: rgba(219, 234, 254, 0.8);\n  border-color: rgba(59, 130, 246, 0.4);\n}\n[data-theme="light"] .origin-name[data-v-67f47fdd] {\n  color: #1e293b;\n}\n[data-theme="light"] .origin-item.selected .origin-name[data-v-67f47fdd] {\n  color: #1e40af;\n}\n[data-theme="light"] .origin-details h2[data-v-67f47fdd] {\n  color: #2563eb;\n}\n[data-theme="light"] .description-scroll p[data-v-67f47fdd] {\n  color: #475569;\n}\n\n/* å“åº”å¼é€‚é… - æ‰‹æœºç«¯ä¼˜åŒ– */\n@media (max-width: 1200px) {\n.origin-layout[data-v-67f47fdd] {\n    grid-template-columns: 1fr 1.8fr;\n    gap: 1.5rem;\n}\n}\n@media (max-width: 1024px) {\n.origin-layout[data-v-67f47fdd] {\n    grid-template-columns: 1fr 1.5fr;\n    gap: 1.2rem;\n}\n.origin-details h2[data-v-67f47fdd] {\n    font-size: 1.6rem;\n}\n}\n@media (max-width: 640px) {\n.top-actions-container[data-v-67f47fdd] {\n    flex-wrap: wrap;\n    justify-content: stretch;\n}\n.top-actions-container .action-item[data-v-67f47fdd] {\n    flex-grow: 1;\n    text-align: center;\n}\n.origin-layout[data-v-67f47fdd] {\n    /* æ”¹ä¸ºå‚ç›´å †å å¸ƒå±€ */\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr;\n    gap: 1rem;\n    height: auto;\n    overflow: visible;\n    padding: 0.8rem;\n}\n.origin-left-panel[data-v-67f47fdd] {\n    order: 1;\n    max-height: 40vh;\n}\n.origin-details-container[data-v-67f47fdd] {\n    order: 2;\n    min-height: 300px;\n}\n.origin-list-container[data-v-67f47fdd] {\n    max-height: 35vh;\n    /* æ·»åŠ è§¦æ‘¸æ»šåŠ¨ä¼˜åŒ– */\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: thin;\n}\n\n  /* ä¼˜åŒ–è§¦æ‘¸ä½“éªŒ */\n.origin-item[data-v-67f47fdd],\n  .action-item[data-v-67f47fdd] {\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n}\n}\n@media (max-width: 640px) {\n.origin-layout[data-v-67f47fdd] {\n    gap: 0.8rem;\n    padding: 0.6rem;\n}\n.origin-left-panel[data-v-67f47fdd] {\n    max-height: 35vh;\n}\n.origin-list-container[data-v-67f47fdd] {\n    max-height: 30vh;\n    padding: 0.5rem;\n}\n.origin-item[data-v-67f47fdd] {\n    padding: 0.7rem;\n    font-size: 0.95rem;\n    margin-bottom: 0.4rem;\n}\n.single-actions-container[data-v-67f47fdd] {\n    padding: 0.5rem;\n    gap: 0.4rem;\n}\n.action-item[data-v-67f47fdd] {\n    padding: 0.7rem 1rem;\n    font-size: 0.9rem;\n}\n.origin-details-container[data-v-67f47fdd] {\n    padding: 1.2rem;\n    min-height: 250px;\n}\n.origin-details h2[data-v-67f47fdd] {\n    font-size: 1.4rem;\n    margin-bottom: 0.8rem;\n}\n}\n@media (max-width: 480px) {\n.top-actions-container[data-v-67f47fdd] {\n    flex-direction: column;\n    align-items: stretch;\n}\n.origin-selection-container[data-v-67f47fdd] {\n    padding: 0.4rem;\n    height: auto;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n}\n.origin-layout[data-v-67f47fdd] {\n    gap: 0.6rem;\n    padding: 0;\n    height: auto;\n    min-height: 0;\n}\n.origin-left-panel[data-v-67f47fdd] {\n    max-height: none;\n    border-radius: 6px;\n}\n.origin-list-container[data-v-67f47fdd] {\n    max-height: 26vh;\n    padding: 0.4rem;\n}\n.origin-item[data-v-67f47fdd] {\n    padding: 0.6rem 0.8rem;\n    font-size: 0.9rem;\n    margin-bottom: 0.3rem;\n    border-radius: 4px;\n}\n.origin-name[data-v-67f47fdd] {\n    font-size: 0.9rem;\n}\n.origin-cost[data-v-67f47fdd] {\n    font-size: 0.8rem;\n}\n.divider[data-v-67f47fdd] {\n    margin: 0.3rem 0;\n}\n.single-actions-container[data-v-67f47fdd] {\n    flex-direction: column;\n    gap: 0.4rem;\n    padding: 0.4rem;\n}\n.action-item[data-v-67f47fdd] {\n    padding: 0.6rem;\n    font-size: 0.85rem;\n    border-radius: 4px;\n}\n.origin-details-container[data-v-67f47fdd] {\n    padding: 1rem;\n    min-height: 200px;\n    border-radius: 6px;\n}\n.origin-details h2[data-v-67f47fdd] {\n    font-size: 1.3rem;\n    margin-bottom: 0.6rem;\n}\n.description-scroll[data-v-67f47fdd] {\n    font-size: 0.9rem;\n    line-height: 1.5;\n    padding-right: 0.3rem;\n    margin-bottom: 0.8rem;\n}\n.cost-display[data-v-67f47fdd] {\n    font-size: 1rem;\n    text-align: center;\n}\n.placeholder[data-v-67f47fdd] {\n    font-size: 1rem;\n    padding: 1rem;\n    text-align: center;\n    min-height: 150px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.top-actions-container[data-v-67f47fdd] {\n    flex-direction: column;\n    align-items: stretch;\n    padding: 0.5rem;\n}\n.top-actions-container .action-item[data-v-67f47fdd] {\n    text-align: center;\n}\n}\n\n/* é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® - æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ */\n.top-actions-container[data-v-67f47fdd] {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  border-bottom: 1px solid rgba(147, 197, 253, 0.15);\n  background: rgba(30, 41, 59, 0.3);\n  justify-content: flex-end;\n}\n.top-actions-container .action-item[data-v-67f47fdd] {\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  border-radius: 6px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #93c5fd;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  font-size: 0.9rem;\n  white-space: nowrap;\n}\n.top-actions-container .action-item[data-v-67f47fdd]:hover {\n  background: rgba(59, 130, 246, 0.2);\n  border-color: #93c5fd;\n  color: #bfdbfe;\n}\n\n/* äº®è‰²ä¸»é¢˜é¡¶éƒ¨æŒ‰é’® */\n[data-theme="light"] .top-actions-container[data-v-67f47fdd] {\n  background: rgba(241, 245, 249, 0.6);\n  border-bottom-color: rgba(59, 130, 246, 0.15);\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-67f47fdd] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #2563eb;\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-67f47fdd]:hover {\n  background: rgba(59, 130, 246, 0.1);\n  border-color: #3b82f6;\n  color: #1e40af;\n}\n@media (max-width: 360px) {\n.origin-selection-container[data-v-67f47fdd] {\n    padding: 0.3rem;\n}\n.origin-layout[data-v-67f47fdd] {\n    gap: 0.4rem;\n}\n.origin-left-panel[data-v-67f47fdd] {\n    max-height: 28vh;\n}\n.origin-list-container[data-v-67f47fdd] {\n    max-height: 24vh;\n    padding: 0.3rem;\n}\n.origin-item[data-v-67f47fdd] {\n    padding: 0.5rem 0.6rem;\n    font-size: 0.85rem;\n    margin-bottom: 0.2rem;\n}\n.origin-name[data-v-67f47fdd] {\n    font-size: 0.8rem;\n}\n.origin-cost[data-v-67f47fdd] {\n    font-size: 0.75rem;\n}\n.origin-details-container[data-v-67f47fdd] {\n    padding: 0.8rem;\n    min-height: 180px;\n}\n.origin-details h2[data-v-67f47fdd] {\n    font-size: 1.1rem;\n    margin-bottom: 0.5rem;\n}\n.description-scroll[data-v-67f47fdd] {\n    font-size: 0.85rem;\n    line-height: 1.4;\n    margin-bottom: 0.6rem;\n}\n.cost-display[data-v-67f47fdd] {\n    font-size: 0.9rem;\n}\n.action-item[data-v-67f47fdd] {\n    padding: 0.5rem;\n    font-size: 0.8rem;\n}\n.placeholder[data-v-67f47fdd] {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n    min-height: 120px;\n}\n}\n',""]);const s=i},876:(e,t,n)=>{"use strict";n.d(t,{s:()=>l});var a=n(4061);const r=localStorage.getItem("language"),o="zh"===r||"en"===r?r:"zh";r||localStorage.setItem("language","zh");const i=(0,a.ref)(o),s={æ–°å¢:"Add",ç¡®è®¤:"Confirm",å–æ¶ˆ:"Cancel",ä¿å­˜:"Save",åˆ é™¤:"Delete",ç¼–è¾‘:"Edit",å…³é—­:"Close",æœç´¢:"Search",åŠ è½½ä¸­:"Loading",é‡ç½®:"Reset",è¿”å›:"Back",ä¸‹ä¸€æ­¥:"Next",ä¸Šä¸€æ­¥:"Previous",å®Œæˆ:"Finish",è®¾ç½®:"Settings",æäº¤:"Submit",åˆ·æ–°:"Refresh",å¯¼å‡º:"Export",å¯¼å…¥:"Import",æ¸…ç©º:"Clear",æ·»åŠ :"Add",ç§»é™¤:"Remove",æ›´æ–°:"Update",æŸ¥çœ‹:"View",ä¸‹è½½:"Download",ä¸Šä¼ :"Upload",å¤åˆ¶:"Copy",ç²˜è´´:"Paste",å‰ªåˆ‡:"Cut",å…¨é€‰:"Select All",å±•å¼€:"Expand",æ”¶èµ·:"Collapse",è¯¦æƒ…:"Details",å¸®åŠ©:"Help",å…³äº:"About",è·³è¿‡:"Skip",é‡è¯•:"Retry",ä¸–ç•Œä¿¡æ¯:"World Info",é“å·:"Username",ä»¤ç‰Œ:"Password",ç¡®è®¤ä»¤ç‰Œ:"Confirm Password",è¯·è¾“å…¥æ‚¨çš„é“å·:"Enter username",è¯·è¾“å…¥æ‚¨çš„èº«ä»½ä»¤ç‰Œ:"Enter password",è¯·å†æ¬¡è¾“å…¥ä»¤ç‰Œ:"Re-enter password",åˆå…¥é“é—¨:"Register",ç™»å…¥æ´å¤©:"Login",æ³¨å†Œ:"Register",ç™»å…¥:"Login","å·²æœ‰é“å·ï¼Ÿç«‹å³ç™»å…¥":"Have account? Login","åˆæ¥ä¹åˆ°ï¼Ÿæ³¨å†Œé“å·":"New? Register","æ³¨å†Œæ–°é“å·ï¼Œè¸å…¥ä¿®ä»™ä¹‹è·¯ã€‚":"Register to begin cultivation","éªŒè¯é“å‹èº«ä»½ï¼Œä»¥ä¾¿åŒæ­¥äº‘ç«¯å¤©æœºã€‚":"Login to sync progress",æ­£å¼ç‰ˆ:"Release","ä»™è·¯æ¼«æ¼« Â· é€†è¡Œä¹å¤©":"Path to Immortality",å•æœºé—­å…³:"Offline",é¿ä¸–æ¸…ä¿®Â·å¿ƒæ— æ—éª›:"Solo Cultivation","ç‹¬å±…æ´åºœï¼Œä¸“å¿ƒè‡´å¿—ç‚¼å°±å¤§é“æ ¹åŸº":"Cultivate alone","æ‰€æœ‰è¿›åº¦æœ¬åœ°å­˜å‚¨ï¼Œæ–­ç½‘äº¦å¯ä¿®è¡Œ":"All progress saved locally",è”æœºå…±ä¿®:"Online",æœªå¼€æ”¾:"Coming Soon","åŠŸèƒ½ç ”å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…":"Under development","å½“å‰ç‰ˆæœ¬å·²å°é”è”æœºå…¥å£ï¼Œä¸å½±å“å•æœºé—­å…³ä½“éªŒ":"Online locked",å·²æˆæƒ:"Authorized",æœªæˆæƒ:"Unauthorized",è§’è‰²çŠ¶æ€:"Character",ä¿®è¡ŒçŠ¶æ€:"Cultivation",æ ¸å¿ƒæ•°å€¼:"Vitals",æ°”è¡€:"Qi",çµæ°”:"Spiritual",ç¥è¯†:"Consciousness",å¯¿å…ƒ:"Lifespan",å¢ƒç•ŒçŠ¶æ€:"Realm",å¢ƒç•Œè¿›åº¦:"Progress",å£°æœ›:"Reputation",å¤©èµ‹ç¥é€š:"Talents",çŠ¶æ€æ•ˆæœ:"Effects",ç±ç±æ— å:"Unknown","ç­‰å¾…ä»™ç¼˜ï¼Œå¼•æ°”å…¥ä½“":"Awaiting fate, drawing qi",æš‚æ— å¤©èµ‹ç¥é€š:"No talents yet",æ¸…å‡€æ— ä¸º:"Clear and tranquil",å¢:"Buff",å‡:"Debuff",è¯·é€‰æ‹©è§’è‰²å¼€å¯ä¿®ä»™ä¹‹æ—…:"Select character to begin",æ—¶:"h",åˆ†:"m",åˆ†é’Ÿ:"min",è‡ªå®šä¹‰å¤©èµ‹:"Custom Talent","å¤©èµ‹ã€Š":'Talent "',"ã€‹çš„è¯¦ç»†æè¿°æš‚æœªå¼€æ”¾ï¼Œè¯·æœŸå¾…åç»­æ›´æ–°ã€‚":'" details coming soon.',æ¶åæ˜­å½°:"Notorious",è‡­åè¿œæ‰¬:"Infamous",å£°åç‹¼è—‰:"Disreputable",æ¶ååœ¨å¤–:"Bad Reputation",å°æœ‰æ¶å:"Slightly Notorious",ä¼ è¯´äººç‰©:"Legendary",åæ»¡å¤©ä¸‹:"World-Renowned",å¨éœ‡å››æ–¹:"Awe-Inspiring",ååŠ¨ä¸€æ–¹:"Locally Famous",å£°åè¿œæ’­:"Well-Known",å°æœ‰åæ°”:"Slightly Famous",æ¸¸æˆåŠŸèƒ½:"Functions",ä¿®è¡Œç®¡ç†:"Cultivation",èƒŒåŒ…ç‰©å“:"Inventory",æŸ¥çœ‹é“å…·è£…å¤‡:"Items",äººç‰©è¯¦æƒ…:"Character",æŸ¥çœ‹ä¿®ä¸ºå¢ƒç•Œ:"View realm",ä¿®ç‚¼åŠŸæ³•:"Techniques",åŠŸæ³•ä¿®ç‚¼æŠ€èƒ½:"Methods",ä¸‰åƒå¤§é“:"Three Thousand Dao",ä¿®ç‚¼ä¸‡æ³•é“é€”:"Myriad paths",çº¢å°˜ä¿—äº‹:"Worldly Affairs",äººç‰©å…³ç³»:"Relationships",äººæƒ…ä¸–æ•…ç½‘ç»œ:"Social network",å®—é—¨ä¿¡æ¯:"Sect",é—¨æ´¾åŠ¿åŠ›è¯¦æƒ…:"Faction",ä»»åŠ¡æ—¥å¿—:"Quests",å½“å‰ä»»åŠ¡è¿›åº¦:"Current quests",ä¸–ç•Œæ¢ç´¢:"Exploration",ä¸–ç•Œåœ°å›¾:"World Map",å¤èˆ†å›¾å¿—:"Explore",è®°å¿†ä¸­å¿ƒ:"Memory",é‡è¦äº‹ä»¶å›é¡¾:"Events",æ¸¸æˆå˜é‡:"Variables",æŸ¥çœ‹æ¸¸æˆæ•°æ®:"Game data",ç³»ç»Ÿè®¾ç½®:"Settings",åå¥½è®¾ç½®:"Preferences",ä¿å­˜æ¸¸æˆ:"Save",ä¿å­˜å½“å‰è¿›åº¦:"Save progress",é€€å‡ºæ¸¸æˆ:"Exit",è¿”å›ä¸»èœå•:"Menu",è®ºé“äº¤å‹:"Online Play",ä¸é“å‹è®ºé“:"Chat with friends",é€€å‡ºå½“å‰æ¸¸æˆ:"Exit current game","è”æœºåŠŸèƒ½å¼€å‘ä¸­...":"Online feature is under development...","æ‚¨æƒ³å¦‚ä½•é€€å‡ºå½“å‰æ¸¸æˆï¼Ÿ":"How would you like to exit the current game?",ä¿å­˜å¹¶é€€å‡º:"Save and Exit",ä¸ä¿å­˜ç›´æ¥é€€å‡º:"Exit Without Saving",æ¸¸æˆå·²ä¿å­˜:"Game Saved","æ¸¸æˆä¿å­˜å¤±è´¥ï¼Œä½†ä»ä¼šç»§ç»­é€€å‡ºã€‚":"Save failed, but will still exit.",æ¸¸æˆè¿›åº¦æœªä¿å­˜:"Game progress not saved.",characterStatus:"Character Status",cultivationStatus:"Cultivation Status",qi:"Qi",spiritual:"Spiritual",consciousness:"Consciousness",lifespan:"Lifespan",realmStatus:"Realm Status",æ¸¸æˆè®¾ç½®:"Settings",è‡ªå®šä¹‰æ‚¨çš„æ¸¸æˆä½“éªŒ:"Customize experience",æ˜¾ç¤ºè®¾ç½®:"Display",è¯­è¨€è®¾ç½®:"Language",é€‰æ‹©ç•Œé¢è¯­è¨€:"Select language",ä¸»é¢˜æ¨¡å¼:"Theme",é€‰æ‹©æ˜äº®æˆ–æš—é»‘ä¸»é¢˜:"Choose theme",æ˜äº®:"Light",æš—é»‘:"Dark",è·Ÿéšç³»ç»Ÿ:"Auto",ç•Œé¢ç¼©æ”¾:"UI Scale",è°ƒæ•´UIç•Œé¢å¤§å°:"Adjust size",æ–‡å­—å¤§å°:"Font Size",è°ƒæ•´æ¸¸æˆæ–‡å­—æ˜¾ç¤ºå¤§å°:"Adjust text",å°:"Small",ä¸­:"Medium",å¤§:"Large",å¿«é€ŸåŠ¨ç”»:"Fast Animations",åŠ é€Ÿç•Œé¢åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ:"Speed up transitions",æ˜¾ç¤ºæç¤º:"Show Hints",æ˜¾ç¤ºæ¸¸æˆæ“ä½œæç¤º:"Display hints",é«˜çº§è®¾ç½®:"Advanced",è°ƒè¯•æ¨¡å¼:"Debug Mode",å¼€å¯å¼€å‘è€…è°ƒè¯•åŠŸèƒ½:"Dev tools",æ•°æ®ç®¡ç†:"Data",å¯¼å‡ºæ•°æ®:"Export",å¯¼å‡ºæ¸¸æˆå­˜æ¡£:"Export save",å¯¼å…¥æ•°æ®:"Import",å¯¼å…¥æ¸¸æˆå­˜æ¡£:"Import save",æ¸…ç©ºæ•°æ®:"Clear Data",æ¸…ç©ºæ‰€æœ‰æ¸¸æˆæ•°æ®:"Clear all",æ¸…ç†ç¼“å­˜:"Clear Cache",æ¸…é™¤æ¸¸æˆä¸´æ—¶æ•°æ®å’Œç¼“å­˜:"Clear cache",æ¸…ç†:"Clear",å¯¼å‡ºè®¾ç½®:"Export Settings",å¤‡ä»½å½“å‰è®¾ç½®é…ç½®:"Backup settings",ä¸­æ–‡:"Chinese",æ˜¾ç¤ºæ“ä½œæç¤ºå’Œå¸®åŠ©ä¿¡æ¯:"Display operation hints and help",è¡ŒåŠ¨é€‰é¡¹:"Action Options",AIç”Ÿæˆå¯é€‰çš„è¡ŒåŠ¨å»ºè®®:"AI-generated action suggestions",ç³»ç»Ÿä»»åŠ¡ç±»å‹:"System Quest Type",é€‰æ‹©AIç”Ÿæˆä»»åŠ¡çš„é£æ ¼ç±»å‹:"Select AI quest style",ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ:"Cultivation System",é“ä¾£å…»æˆç³»ç»Ÿ:"Dao Companion System",å®—é—¨å‘å±•ç³»ç»Ÿ:"Sect Development System",æ¢ç´¢å†’é™©ç³»ç»Ÿ:"Exploration System",æˆ˜æ–—æŒ‘æˆ˜ç³»ç»Ÿ:"Combat System",èµ„æºæ”¶é›†ç³»ç»Ÿ:"Resource Collection System",è‡ªå®šä¹‰ä»»åŠ¡æç¤ºè¯:"Custom Quest Prompt","ä¸ºAIä»»åŠ¡ç”Ÿæˆæ·»åŠ è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆå¯é€‰ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤ï¼‰":"Add custom instructions (optional)","ä¾‹å¦‚ï¼šç”Ÿæˆæ›´å¤šæˆ˜æ–—ç±»ä»»åŠ¡ï¼Œå¥–åŠ±åå‘çµçŸ³...":"e.g.: More combat quests, spirit stone rewards...",è‡ªå®šä¹‰è¡ŒåŠ¨é€‰é¡¹æç¤ºè¯:"Custom Action Prompt","æŒ‡å¯¼AIç”Ÿæˆç‰¹å®šé£æ ¼çš„è¡ŒåŠ¨é€‰é¡¹ï¼ˆå¯é€‰ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤ï¼‰":"Guide AI action style (optional)","ä¾‹å¦‚ï¼šå¤šç”Ÿæˆä¿®ç‚¼å’Œæ¢ç´¢ç±»é€‰é¡¹ï¼Œå‡å°‘æˆ˜æ–—é€‰é¡¹...":"e.g.: More cultivation options, less combat...","ğŸ” å¯ç”¨æˆäººå†…å®¹ï¼ˆç§å¯†ä¿¡æ¯ï¼‰":"ğŸ” Enable Adult Content","ç”Ÿæˆå’Œæ˜¾ç¤ºNPCçš„ç§å¯†ä¿¡æ¯æ¨¡å—ï¼ˆåŒ…å«æˆäººå‘å†…å®¹ï¼Œé»˜è®¤å¼€å¯ï¼‰":"Generate NPC private info (adult content)","ğŸ‘¥ ç§å¯†ä¿¡æ¯ç”ŸæˆèŒƒå›´":"ğŸ‘¥ Private Info Scope",é€‰æ‹©ä¸ºå“ªäº›æ€§åˆ«çš„NPCç”Ÿæˆç§å¯†ä¿¡æ¯:"Select NPC gender for private info",æ‰€æœ‰NPC:"All NPCs","ğŸ”§ é«˜çº§è®¾ç½®":"ğŸ”§ Advanced",å¯ç”¨å¼€å‘è€…è°ƒè¯•ä¿¡æ¯å’Œè¯¦ç»†æ—¥å¿—:"Enable debug logs",æ§åˆ¶å°è°ƒè¯•:"Console Debug",åœ¨æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯:"Show console debug info",æ€§èƒ½ç›‘æ§:"Performance Monitor",ç›‘æ§ç»„ä»¶æ€§èƒ½å’ŒåŠ è½½æ—¶é—´:"Monitor performance",å¯¼å…¥è®¾ç½®:"Import Settings",ä»æ–‡ä»¶æ¢å¤è®¾ç½®é…ç½®:"Restore from file",è¯­è¨€è®¾ç½®å·²æ›´æ–°:"Language updated",è®¾ç½®é¢æ¿:"Settings Panel","åŠ è½½è®¾ç½®å¤±è´¥ï¼Œå°†ä½¿ç”¨é»˜è®¤è®¾ç½®":"Failed to load settings, using defaults",è®¾ç½®å·²ä¿å­˜å¹¶åº”ç”¨:"Settings saved",ä¿å­˜è®¾ç½®å¤±è´¥:"Failed to save settings",è®¾ç½®éªŒè¯å¤±è´¥:"Settings validation failed",é‡ç½®è®¾ç½®:"Reset Settings","ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®ä¸ºé»˜è®¤å€¼å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰è‡ªå®šä¹‰é…ç½®ã€‚":"Reset all settings to default?",ç¡®è®¤é‡ç½®:"Confirm Reset",è®¾ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼:"Settings reset to default","ç¡®å®šè¦æ¸…ç†ç¼“å­˜å—ï¼Ÿè¿™å°†åˆ é™¤ä¸´æ—¶æ•°æ®ä½†ä¸ä¼šå½±å“å­˜æ¡£ã€‚":"Clear cache? Temporary data only.",ç¡®è®¤æ¸…ç†:"Confirm Clear",å·²æ¸…ç†:"Cleared",é¡¹ç¼“å­˜æ•°æ®:" cache items",æ¸…ç†ç¼“å­˜å¤±è´¥:"Failed to clear cache","ä»™é€” v1.0.0":"The Great Way v1.0.0","ä»™é€”-è®¾ç½®å¤‡ä»½-":"GreatWay-Settings-",è®¾ç½®å·²å¯¼å‡º:"Settings exported",å¯¼å‡ºè®¾ç½®å¤±è´¥:"Export failed",è®¾ç½®å¯¼å…¥æˆåŠŸå¹¶åº”ç”¨:"Settings imported",æ— æ•ˆçš„è®¾ç½®æ–‡ä»¶æ ¼å¼:"Invalid settings file","å¯¼å…¥è®¾ç½®å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼":"Import failed, check format",æˆæƒéªŒè¯æˆåŠŸ:"Authorization verified",æ¸…é™¤æˆæƒéªŒè¯:"Clear Authorization","ç¡®å®šè¦æ¸…é™¤å½“å‰çš„æˆæƒéªŒè¯ä¿¡æ¯å—ï¼Ÿæ¸…é™¤åéœ€è¦é‡æ–°éªŒè¯ã€‚":"Clear authorization? Re-verification required.",æˆæƒéªŒè¯ä¿¡æ¯å·²æ¸…é™¤:"Authorization cleared",è¯·å…ˆå®ŒæˆæˆæƒéªŒè¯:"Complete authorization first",è§’è‰²åˆ›å»º:"Character Creation",åˆ›å»ºæ–°è§’è‰²:"Create Character",è§’è‰²åç§°:"Name",è¯·è¾“å…¥è§’è‰²åç§°:"Enter name",é€‰æ‹©ä¸–ç•Œ:"Select World",é€‰æ‹©å‡ºèº«:"Select Origin",é€‰æ‹©å¤©èµ‹:"Select Talent",é€‰æ‹©çµæ ¹:"Select Spirit Root",åˆ†é…å±æ€§:"Allocate Attributes",é¢„è§ˆ:"Preview",å¼€å§‹ä¿®ä»™ä¹‹æ—…:"Begin Journey",ä¸–ç•Œé€‰æ‹©:"World",å¤©èµ‹é€‰æ‹©:"Talent",å‡ºèº«é€‰æ‹©:"Origin",çµæ ¹é€‰æ‹©:"Spirit Root",å±æ€§åˆ†é…:"Attributes",è§’è‰²é¢„è§ˆ:"Preview",å•æœºæ¨¡å¼:"Offline",è”æœºæ¨¡å¼:"Online",è¿”å›é“é€”:"Back to Menu",å¼€å¯ä»™é€”:"Begin",å‰©ä½™å¤©é“ç‚¹:"Points",åˆå…¥ä»™é€”:"Begin Cultivation","ğŸ“‚ åŠ è½½é¢„è®¾":"ğŸ“‚ Load Preset","ğŸ—‘ï¸ æ¸…é™¤è‡ªå®šä¹‰":"ğŸ—‘ï¸ Clear Custom","â˜ï¸ æ¸…é™¤äº‘ç«¯":"â˜ï¸ Clear Cloud",è¯¸å¤©é—®é“:"Select World",ä»™ç¼˜åˆå®š:"Choose Talent Tier",è½¬ä¸–å› æœ:"Select Origin",æµ‹çµé—®é“:"Select Spirit Root",ç¥é€šæ‹©å®š:"Select Talents",å‘½æ ¼å¤©æˆ:"Allocate Attributes",çª¥å¤©ç®—å‘½:"Preview Character","æ­£åœ¨æ¨æ¼”è¯¸å¤©ä¸‡ç•Œ...":"Loading worlds...",å¤©æœºç´Šä¹±:"Error",è‡ªå®šä¹‰ä¸–ç•Œ:"Custom World",AIæ¨æ¼”:"AI Generate",æš‚æ— æœ¬åœ°ä¸–ç•Œæ•°æ®:"No local worlds",æš‚æ— äº‘ç«¯ä¸–ç•Œæ•°æ®:"No cloud worlds",è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–è”ç³»ç®¡ç†å‘˜:"Check network","è¯·æ‹©ä¸€æ–¹å¤§åƒä¸–ç•Œï¼Œä»¥å®šé“åŸºã€‚":"Select a world",ä¸–ç•Œåç§°:"World Name",æ—¶ä»£èƒŒæ™¯:"Era",ä¸–ç•Œæè¿°:"Description","ä¾‹å¦‚ï¼šä¹éœ„ç•Œ":"e.g.: Nine Heavens","ä¾‹å¦‚ï¼šä»™é“æ˜Œéš†":"e.g.: Immortal Era","æè¿°è¿™ä¸ªä¸–ç•Œçš„èƒŒæ™¯æ•…äº‹ã€ä¿®ç‚¼ä½“ç³»ç‰¹ç‚¹ç­‰...":"Describe the world...",ä¸–ç•Œåç§°ä¸å¯ä¸ºç©º:"World name required",'è‡ªå®šä¹‰ä¸–ç•Œ "{0}" å·²æˆåŠŸä¿å­˜ï¼':'World "{0}" saved!',"å¤©æœºæ¨æ¼”ä¸­ï¼Œè¯·ç¨å€™...":"AI generating...",AIæ¨æ¼”å¤±è´¥:"AI failed","AIæ¨æ¼”ç»“æœæ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ":"Invalid AI response",AIæ¨æ¼”ç»“æœç¼ºå°‘ä¸–ç•Œåç§°:"Missing world name",'AIæ¨æ¼”å®Œæˆï¼ä¸–ç•Œ "{0}" å·²ç”Ÿæˆ':'World "{0}" generated!',"AIæ¨æ¼”å¤±è´¥: {0}":"AI failed: {0}",ä¸–ç•Œè§„æ¨¡é…ç½®:"World Config",ä¸»è¦åŠ¿åŠ›:"Major Factions",åœ°ç‚¹æ€»æ•°:"Total Locations",ç§˜å¢ƒæ•°é‡:"Secret Realms",å¤§é™†æ•°é‡:"Continents","æ¨è: 3-8":"Recommended: 3-8","æ¨è: 8-15":"Recommended: 8-15","æ¨è: 3-10":"Recommended: 3-10","èŒƒå›´: 3-7":"Range: 3-7","é«˜çº§é€‰é¡¹ï¼ˆåœ°å›¾æŠ€æœ¯å‚æ•°ï¼‰":"Advanced Options",åœ°å›¾å®½åº¦:"Map Width",åœ°å›¾é«˜åº¦:"Map Height","æ¨è: 3600":"Recommended: 3600","æ¨è: 2400":"Recommended: 2400",ç»åº¦èŒƒå›´:"Longitude Range",çº¬åº¦èŒƒå›´:"Latitude Range",æœ€å°ç»åº¦:"Min Lng",æœ€å¤§ç»åº¦:"Max Lng",æœ€å°çº¬åº¦:"Min Lat",æœ€å¤§çº¬åº¦:"Max Lat",éšæœº:"Random",å·²éšæœºç”Ÿæˆä¸–ç•Œé…ç½®:"Config randomized",å·²é‡ç½®ä¸ºé»˜è®¤é…ç½®:"Config reset",é…ç½®è¿‡é«˜è­¦å‘Š:"Config Warning","å½“å‰é…ç½®å¯èƒ½å¯¼è‡´ç”Ÿæˆå¤±è´¥ï¼Œå»ºè®®è°ƒæ•´è‡³åˆç†èŒƒå›´":"Config too high",ç¼–è¾‘æ­¤é¡¹:"Edit",åˆ é™¤æ­¤é¡¹:"Delete",ç¼–è¾‘ä¸–ç•Œ:"Edit World",'ä¸–ç•Œ "{0}" å·²æ›´æ–°ï¼':'World "{0}" updated!',"æ›´æ–°ä¸–ç•Œå¤±è´¥ï¼":"Update failed!","æ„Ÿåº”å¤©é“ï¼Œæµ‹ç®—å¤©èµ„...":"Loading talent tiers...",å¤©æœºæ··æ²Œ:"Error",è‡ªå®šä¹‰å¤©èµ„:"Custom Tier",å¤©èµ„åç§°:"Tier Name",å¤©èµ„æè¿°:"Description",å¤©é“ç‚¹:"Points",è¾‰å…‰é¢œè‰²:"Glow Color","ä¾‹å¦‚ï¼šå‡¡äºº":"e.g.: Mortal","æè¿°æ­¤å¤©èµ„çš„ç‰¹ç‚¹...":"Describe this tier...","ä¾‹å¦‚ï¼š10":"e.g.: 10","ä¾‹å¦‚ï¼š#808080":"e.g.: #808080",å¤©èµ„åç§°ä¸å¯ä¸ºç©º:"Tier name required",å¤©é“ç‚¹å¿…é¡»æ˜¯éè´Ÿæ•°:"Points must be non-negative",'è‡ªå®šä¹‰å¤©èµ„ "{0}" å·²ä¿å­˜ï¼':'Tier "{0}" saved!',"ä¿å­˜è‡ªå®šä¹‰å¤©èµ„å¤±è´¥ï¼":"Save failed!",'AIæ¨æ¼”å®Œæˆï¼å¤©èµ„ "{0}" å·²ç”Ÿæˆ':'Tier "{0}" generated!',"è¯·é€‰æ‹©ä½ çš„å¤©èµ„ç­‰çº§ï¼Œè¿™å°†å†³å®šä½ çš„èµ·ç‚¹ã€‚":"Select your talent tier",ç¼–è¾‘å¤©èµ„:"Edit Tier",'å¤©èµ„ "{0}" å·²æ›´æ–°ï¼':'Tier "{0}" updated!',"æ›´æ–°å¤©èµ„å¤±è´¥ï¼":"Update failed!","è¿½æº¯è¿‡å¾€ï¼Œæ¢å¯»å‡ºèº«...":"Loading origins...",å› æœä¸æ˜:"Error",è‡ªå®šä¹‰å‡ºèº«:"Custom Origin",éšæœºå‡ºèº«:"Random Origin","0 ç‚¹":"0 pts",å‡ºèº«åç§°:"Origin Name",å‡ºèº«æè¿°:"Description","ä¾‹å¦‚ï¼šå±±é‡é—å­¤":"e.g.: Orphan","æè¿°æ­¤å‡ºèº«çš„èƒŒæ™¯æ•…äº‹å’Œæˆé•¿ç»å†...":"Describe this origin...",å‡ºèº«åç§°ä¸å¯ä¸ºç©º:"Origin name required",å‡ºèº«æè¿°ä¸å¯ä¸ºç©º:"Description required",'è‡ªå®šä¹‰å‡ºèº« "{0}" å·²ä¿å­˜ï¼':'Origin "{0}" saved!',"ä¿å­˜è‡ªå®šä¹‰å‡ºèº«å¤±è´¥ï¼":"Save failed!","è¯·å…ˆé€‰æ‹©ä¸€æ–¹å¤§åƒä¸–ç•Œï¼Œæ–¹å¯æ¨æ¼”å‡ºèº«ã€‚":"Select world first",'AIæ¨æ¼”å®Œæˆï¼å‡ºèº« "{0}" å·²ç”Ÿæˆ':'Origin "{0}" generated!',"å¤©é“æ— å¸¸ï¼Œé€ åŒ–å¼„äººã€‚é€‰æ‹©æ­¤é¡¹ï¼Œä½ çš„å‡ºèº«å°†å®Œå…¨éšæœºç”Ÿæˆã€‚æ˜¯ç”Ÿäºå¸ç‹ä¹‹å®¶ï¼Œæˆ–ä¸ºå±±é‡é—å­¤ï¼Œçš†åœ¨å¤©é“ä¸€å¿µä¹‹é—´ã€‚":"Random origin description","èº«ä¸–å¦‚è°œï¼Œè¿‡å¾€ä¸€ç‰‡ç©ºç™½ã€‚":"Unknown origin","æ¶ˆè€—å¤©é“ç‚¹: {0}":"Cost: {0} pts","è¯·é€‰æ‹©ä¸€å¤„å‡ºèº«ï¼Œæˆ–å¬å¤©ç”±å‘½ã€‚":"Select an origin","å¤©é“ç‚¹ä¸è¶³ï¼Œæ— æ³•é€‰æ‹©æ­¤å‡ºèº«ã€‚":"Insufficient points",ç¼–è¾‘å‡ºèº«:"Edit Origin",'å‡ºèº« "{0}" å·²æ›´æ–°ï¼':'Origin "{0}" updated!',"æ›´æ–°å‡ºèº«å¤±è´¥ï¼":"Update failed!","å¤©åœ°ç„é»„ï¼Œæ¢æŸ¥çµæ ¹...":"Loading spirit roots...",é«˜çº§è‡ªå®šä¹‰:"Advanced Custom",é¢„è®¾çµæ ¹:"Preset Roots",ç»„åˆé€‰æ‹©:"Custom Combo",éšæœºçµæ ¹:"Random Root",çµæ ¹åç§°:"Root Name",å“çº§:"Grade",çµæ ¹æè¿°:"Description",ä¿®ç‚¼å€ç‡:"Multiplier",æ¶ˆè€—å¤©é“ç‚¹:"Cost",ç‰¹æ®Šæ•ˆæœ:"Special Effects","ä¾‹å¦‚ï¼šæ··æ²Œçµæ ¹":"e.g.: Chaos Root","æè¿°è¿™ä¸ªçµæ ¹çš„ç‰¹æ€§å’ŒèƒŒæ™¯æ•…äº‹...":"Describe this root...","ä¾‹å¦‚ï¼š1.5":"e.g.: 1.5","æ•ˆæœæè¿°ï¼Œå¦‚ï¼šé›·ç³»æ³•æœ¯å¨åŠ›+80%":"e.g.: Thunder +80%",çµæ ¹åç§°ä¸å¯ä¸ºç©º:"Root name required",è¯·é€‰æ‹©å“çº§:"Select grade",çµæ ¹æè¿°ä¸å¯ä¸ºç©º:"Description required",ä¿®ç‚¼å€ç‡å¿…é¡»ä¸ºæ•°å­—:"Multiplier must be number",æ¶ˆè€—ç‚¹æ•°å¿…é¡»ä¸ºæ•°å­—:"Cost must be number",'è‡ªå®šä¹‰çµæ ¹ "{0}" å·²ä¿å­˜ï¼':'Root "{0}" saved!',"ä¿å­˜è‡ªå®šä¹‰çµæ ¹å¤±è´¥ï¼":"Save failed!",'AIæ¨æ¼”å®Œæˆï¼çµæ ¹ "{0}" å·²ç”Ÿæˆ':'Root "{0}" generated!',çµæ ¹ç±»å‹:"Root Type",çµæ ¹å“çº§:"Grade",ç«:"Fire",æ°´:"Water",æœ¨:"Wood",é‡‘:"Metal",åœŸ:"Earth",é£:"Wind",é›·:"Thunder",å†°:"Ice",å…‰:"Light",æš—:"Dark",ç©ºé—´:"Space",æ—¶é—´:"Time",å‡¡å“:"Common",ä¸‹å“:"Low",ä¸­å“:"Middle",ä¸Šå“:"High",æå“:"Supreme",ä»™å“:"Heaven",ç¥å“:"Divine",ç‰¹æ®Š:"Special",è¯·é€‰æ‹©çµæ ¹ç±»å‹:"Select root type",è¯·é€‰æ‹©çµæ ¹å“çº§:"Select grade",ç¡®è®¤é€‰æ‹©:"Confirm",è¯·å®Œæ•´é€‰æ‹©çµæ ¹ç±»å‹å’Œå“çº§:"Complete selection",é€‰æ‹©çš„çµæ ¹é…ç½®æ— æ•ˆ:"Invalid config",'è‡ªå®šä¹‰çµæ ¹ "{0}" å·²åˆ›å»ºï¼':'Root "{0}" created!',"ä¿®ç‚¼å€ç‡:":"Multiplier:","æ¶ˆè€—å¤©é“ç‚¹:":"Cost:","è¯·é€‰æ‹©ä¸€ç§çµæ ¹ï¼Œæˆ–å¬å¤©ç”±å‘½ã€‚":"Select a spirit root","å¤§é“äº”åï¼Œå¤©è¡å››ä¹ï¼Œäººéå…¶ä¸€ã€‚é€‰æ‹©æ­¤é¡¹ï¼Œä½ çš„çµæ ¹å°†å®Œå…¨éšæœºç”Ÿæˆï¼Œå¯èƒ½ä¸€æ­¥ç™»å¤©ï¼Œäº¦å¯èƒ½å¹³åº¸æ— å¥‡ã€‚":"Random root description","çµæ ¹ä¿¡æ¯ä¸æ˜ã€‚":"Unknown root","å¤©é“ç‚¹ä¸è¶³ï¼Œæ— æ³•é€‰æ‹©æ­¤çµæ ¹ã€‚":"Insufficient points",ç¼–è¾‘çµæ ¹:"Edit Root",'çµæ ¹ "{0}" å·²æ›´æ–°ï¼':'Root "{0}" updated!',"æ›´æ–°çµæ ¹å¤±è´¥ï¼":"Update failed!","äºæ—¶å…‰é•¿æ²³ä¸­æœå¯»å¤©èµ‹...":"Loading talents...",å¤©èµ‹åç§°:"Talent Name",å¤©èµ‹æè¿°:"Description",å¤©é“ç‚¹æ¶ˆè€—:"Cost","ä¾‹å¦‚ï¼šé“å¿ƒå¤©æˆ":"e.g.: Dao Heart","æè¿°æ­¤å¤©èµ‹çš„æœ¬è´¨...":"Describe this talent...",å¤©èµ‹åç§°ä¸å¯ä¸ºç©º:"Talent name required",å¤©èµ‹æè¿°ä¸å¯ä¸ºç©º:"Description required",å¤©é“ç‚¹æ¶ˆè€—å¿…é¡»å¡«å†™:"Cost required",å¤©é“ç‚¹æ¶ˆè€—ä¸èƒ½ä¸ºè´Ÿæ•°:"Cost cannot be negative",'è‡ªå®šä¹‰å¤©èµ‹ "{0}" å·²ä¿å­˜ï¼':'Talent "{0}" saved!',"ä¿å­˜è‡ªå®šä¹‰å¤©èµ‹å¤±è´¥ï¼":"Save failed!",'AIæ¨æ¼”å®Œæˆï¼å¤©èµ‹ "{0}" å·²ç”Ÿæˆ':'Talent "{0}" generated!',"è¯·é€‰æ‹©å¤©èµ‹ã€‚":"Select talents","æ­¤å¤©èµ‹ä¹‹ç„å¦™ï¼Œéœ€è‡ªè¡Œé¢†æ‚Ÿã€‚":"Unknown talent",ç¼–è¾‘å¤©èµ‹:"Edit Talent",'å¤©èµ‹ "{0}" å·²æ›´æ–°ï¼':'Talent "{0}" updated!',å…ˆå¤©å…­å‘½åˆ†é…:"Attribute Allocation","å‰©ä½™å¤©é“ç‚¹:":"Remaining Points:",æ ¹éª¨:"Root Bone",çµæ€§:"Spirituality",æ‚Ÿæ€§:"Comprehension",æ°”è¿:"Fortune",é­…åŠ›:"Charm",å¿ƒæ€§:"Temperament","å†³å®šæ°”è¡€ä¸Šé™ã€æ¢å¤é€Ÿåº¦ã€å¯¿å‘½ä¸Šé™ã€‚å½±å“ç‚¼ä½“ä¿®è¡Œã€æŠ—æ‰“å‡»èƒ½åŠ›ã€‚":"Affects vitality and lifespan","å†³å®šçµæ°”ä¸Šé™ã€å¸æ”¶æ•ˆç‡ã€‚å½±å“ä¿®ç‚¼é€Ÿåº¦ã€æ³•æœ¯å¨åŠ›ã€‚":"Affects spiritual power","å†³å®šç¥è¯†ä¸Šé™ã€å­¦ä¹ æ•ˆç‡ã€‚å½±å“åŠŸæ³•é¢†æ‚Ÿã€æŠ€èƒ½æŒæ¡é€Ÿåº¦ã€‚":"Affects learning speed","å†³å®šå„ç§æ¦‚ç‡ã€ç‰©å“æ‰è½å“è´¨ã€‚å½±å“å¤©æåœ°å®è·å–ã€è´µäººç›¸åŠ©ã€‚":"Affects luck and drops","å†³å®šåˆå§‹å¥½æ„Ÿåº¦ã€ç¤¾äº¤åŠ æˆã€‚å½±å“NPCäº’åŠ¨ã€é—¨æ´¾å£°æœ›è·å–ã€‚":"Affects social interactions","å†³å®šå¿ƒé­”æŠ—æ€§ã€æ„å¿—åŠ›ã€‚å½±å“èµ°ç«å…¥é­”æŠµæŠ—ã€å…³é”®æŠ‰æ‹©ã€‚":"Affects willpower","ğŸ² éšæœº":"ğŸ² Random","âš–ï¸ å‡è¡¡":"âš–ï¸ Balance",æœ€ç»ˆé¢„è§ˆ:"Final Preview","è¯·ç¡®è®¤ä½ çš„é€‰æ‹©ï¼Œæ­¤ä¸ºè¸å…¥ä»™é€”çš„æœ€åä¸€æ­¥ã€‚":"Confirm your choices","é“å·:":"Name:","æ­£åœ¨ä»é…’é¦†è·å–...":"Loading from tavern...","ç§æ—:":"Race:",äººæ—:"Human",æ€§åˆ«:"Gender",ç”·:"Male",å¥³:"Female",åŒæ€§:"Hermaphrodite",åˆå§‹å¹´é¾„:"Starting Age",å¼€å±€æ¨¡å¼:"Start Mode",æµå¼å¼€å±€:"Streaming Start",éæµå¼å¼€å±€:"Non-Streaming Start","æµå¼å¼€å±€ï¼šæ›´å¿«ï¼Œå¯èƒ½è¢«ä¸­æ–­":"Streaming: Faster, may be interrupted","éæµå¼å¼€å±€ï¼šä¸€æ¬¡æ€§ç”Ÿæˆå®Œæ•´å†…å®¹ï¼Œæ›´ç¨³å®šå¯é ":"Non-Streaming: Complete generation, more stable",å²:" years old",æ‰€é€‰ä¸–ç•Œ:"Selected World",æœªé€‰æ‹©:"Not selected",æš‚æ— æè¿°:"No description",æœªé€‰æ‹©ä»»ä½•å¤©èµ‹:"No talents selected",å‘½æ ¼å¤©å®š:"Fate Determined","è”æœºæ¨¡å¼ä¸‹ï¼Œè§’è‰²çš„åˆå§‹å‘½æ ¼å°†ç”±æ‰€é€‰ä¸–ç•Œçš„å¤©é“æ³•åˆ™åœ¨äº‘ç«¯ç”Ÿæˆï¼Œä»¥ç¡®ä¿å…¬å¹³ä¸å¹³è¡¡ã€‚":"Online mode description",ç»­å‰ä¸–å› ç¼˜:"Continue Journey","æ‹©ä¸€æ³•èº«ï¼Œå…¥é“é‡ä¿®":"Select a character",è§’è‰²åˆ—è¡¨:"Characters",ä¸ªè§’è‰²:" characters",å­˜æ¡£ç®¡ç†:"Save Management",å¯¼å‡ºå­˜æ¡£:"Export Saves",å¯¼å…¥å­˜æ¡£:"Import Saves",å¯¼å‡ºé€‰ä¸­è§’è‰²çš„å­˜æ¡£:"Export saves",å‘é€‰ä¸­è§’è‰²å¯¼å…¥å­˜æ¡£:"Import saves",é“é€”æœªå¯:"No Characters","å°šæœªåˆ›å»ºä»»ä½•æ³•èº«ï¼Œè¯·è¿”å›é“é€”å¼€å¯ä¿®ä»™ä¹‹æ—…":"Create a character first",è¸å…¥ä»™é€”:"Begin Journey",å¯¼å…¥è§’è‰²:"Import Character",è¯·é€‰æ‹©å·¦ä¾§è§’è‰²æŸ¥çœ‹å­˜æ¡£è¯¦æƒ…:"Select a character","æ­£åœ¨åŠ è½½å­˜æ¡£...":"Loading saves...",æ‰‹åŠ¨å­˜æ¡£:"Manual Saves",å­˜æ¡£é€šè¿‡æ¸¸æˆå†…ä¿å­˜åŠŸèƒ½åˆ›å»º:"Created via in-game save",ç©ºå­˜æ¡£æ§½:"Empty Slot",é€šè¿‡æ¸¸æˆå†…ä¿å­˜åˆ›å»º:"Create via in-game save",é‡å‘½å:"Rename","ä¸Šæ¬¡å¯¹è¯å­˜æ¡£ä¸å¯åˆ é™¤ï¼ˆç”¨äºå›æ»šï¼‰":"Cannot delete last save","æ—¶é—´ç‚¹å­˜æ¡£ä¸å¯åˆ é™¤ï¼ˆå®šæ—¶è‡ªåŠ¨è¦†ç›–ï¼‰":"Cannot delete time save","æ— æ³•åˆ é™¤ï¼šè‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªæ‰‹åŠ¨å­˜æ¡£":"Must keep one save",åˆ é™¤å­˜æ¡£:"Delete Save",äº‘ç«¯å­˜æ¡£:"Cloud Save",å¾…åŒæ­¥:"Pending",å·²åŒæ­¥:"Synced",è¿›å…¥æ¸¸æˆ:"Enter Game",åŒæ­¥äº‘ç«¯:"Sync Cloud",å°šæœªå¼€å§‹ä¿®è¡Œ:"Not started",å¼€å§‹æ¸¸æˆ:"Start Game",åˆ é™¤è§’è‰²:"Delete Character",'ç¡®å®šè¦å½»åº•åˆ é™¤è§’è‰²"{0}"åŠå…¶æ‰€æœ‰ä¿®è¡Œè®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚':'Delete character "{0}"?',æ— æ³•åˆ é™¤å­˜æ¡£:"Cannot Delete","æ— æ³•åˆ é™¤è¯¥å­˜æ¡£ï¼šè§’è‰²è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªå­˜æ¡£ã€‚å¦‚éœ€åˆ é™¤ï¼Œè¯·å…ˆåˆ›å»ºå…¶ä»–å­˜æ¡£æˆ–åˆ é™¤æ•´ä¸ªè§’è‰²ã€‚":"Must keep one save",'ç¡®å®šè¦åˆ é™¤è§’è‰²"{0}"çš„"{1}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚':'Delete save "{1}"?',é‡å‘½åå­˜æ¡£:"Rename Save","è¯·è¾“å…¥æ–°çš„å­˜æ¡£åç§°ï¼š":"Enter new name:",é‡å‘½åå¤±è´¥:"Rename Failed","å­˜æ¡£åç§°å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°ã€‚":"Name exists",éœ€è¦ç™»å½•:"Login Required",è¯·å…ˆç™»å½•ä»¥ç®¡ç†è”æœºè§’è‰²å­˜æ¡£:"Login to manage online saves",ç™»å…¥é“ç±:"Login",åˆ›å»ºæ–°å­˜æ¡£:"Create Save","æ˜¯å¦åœ¨ã€{0}ã€‘ä½ç½®åˆ›å»ºæ–°çš„å­˜æ¡£å¼€å§‹æ¸¸æˆï¼Ÿ":'Create save at "{0}"?',å¼€å¯æ–°å¾ç¨‹:"New Journey",'æ˜¯å¦åœ¨å­˜æ¡£ä½ "{0}" å¼€å§‹ä¸€æ®µæ–°çš„ä¿®è¡Œï¼Ÿ':'Start at "{0}"?','è§’è‰² "{0}" å·²å¯¼å‡º':'Character "{0}" exported',å¯¼å‡ºè§’è‰²å¤±è´¥:"Export failed",è¯·å…ˆé€‰æ‹©ä¸€ä¸ªè§’è‰²:"Select a character first",è¯¥è§’è‰²æ²¡æœ‰å¯å¯¼å‡ºçš„å­˜æ¡£:"No saves to export",å­˜æ¡£å·²å¯¼å‡º:"Saves exported",è¯·å…ˆé€‰æ‹©ä¸€ä¸ªè§’è‰²ä»¥å¯¼å…¥å­˜æ¡£:"Select character first","æ–‡ä»¶æ ¼å¼æ— æ•ˆï¼Œè¯·é€‰æ‹©ä¸€ä¸ªå­˜æ¡£æ–‡ä»¶ã€‚":"Invalid save file",'ç¡®å®šè¦å°† {0} ä¸ªå­˜æ¡£å¯¼å…¥åˆ°è§’è‰² "{1}" å—ï¼ŸåŒåå­˜æ¡£å°†è¢«è¦†ç›–ã€‚':'Import {0} saves to "{1}"?','æˆåŠŸä¸ºè§’è‰² "{0}" å¯¼å…¥ {1} ä¸ªå­˜æ¡£':"Imported {0} saves","å¯¼å…¥å­˜æ¡£å¤±è´¥: {0}":"Import failed: {0}","æ–‡ä»¶æ ¼å¼æ— æ•ˆï¼Œè¯·é€‰æ‹©ä¸€ä¸ªè§’è‰²æ–‡ä»¶ã€‚":"Invalid character file",'ç¡®å®šè¦å¯¼å…¥è§’è‰² "{0}" å—ï¼Ÿ':'Import character "{0}"?','æˆåŠŸå¯¼å…¥è§’è‰² "{0}"':'Character "{0}" imported',"å¯¼å…¥è§’è‰²å¤±è´¥: {0}":"Import failed: {0}","å¤„ç†å¯¼å…¥æ–‡ä»¶å¤±è´¥: {0}":"File processing failed: {0}",åŸºç¡€ä¿¡æ¯:"Basic Info",æš‚æ— å¤©èµ‹:"No talents","è¯·æè¿°ä½ æƒ³ç”Ÿæˆä»€ä¹ˆå†…å®¹ï¼š":"Describe what to generate:","ä¾‹å¦‚ï¼šç”Ÿæˆä¸€ä¸ªç«å±æ€§çš„å¤©èµ‹ï¼Œé€‚åˆå‰‘ä¿®...":"e.g.: Fire talent for sword cultivator...","è¯·è¾“å…¥å…‘æ¢ç ä»¥æ¥å¼•å¤©æœºè¿›è¡ŒAIæ¨æ¼”ã€‚":"Enter redemption code for AI generation",è¯·è¾“å…¥å…‘æ¢ç :"Enter code","éªŒè¯ä¸­...":"Verifying...","å…‘æ¢ç ä¸å¯ä¸ºç©ºã€‚":"Code required","å…‘æ¢ç éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥åé‡è¯•ã€‚":"Verification failed",è‡ªå®šä¹‰AIæ¨æ¼”:"Custom AI Generation",'æè¿°ä½ å¸Œæœ›çš„ä¸–ç•Œé£æ ¼ã€æ—¶ä»£èƒŒæ™¯æˆ–ç‰¹è‰²è®¾å®šï¼ˆå¯å«å¯¹è¯ï¼Œä½¿ç”¨ä¸­æ–‡å¼•å·""ï¼Œæ¯å¥ä»…ä¸€å¯¹ï¼‰':"Describe world style","æç¤ºè¯ (å¯é€‰)":"Prompt (optional)","ä¾‹å¦‚ï¼šç°ä»£éƒ½å¸‚ä¿®ä»™ä¸–ç•Œï¼Œçµæ°”å¤è‹ï¼Œç§‘æŠ€ä¸ä¿®çœŸå¹¶å­˜...":"e.g.: Modern cultivation world...",å»ºè®®æç¤ºè¯:"Suggested Prompts","æœ¬è”æœºè°¨éµå¤©é“æ³•åˆ™ï¼šä¸å­˜å‚¨ä»»ä½•å¯¹è¯è®°å½•":"No chat logs stored","ä»…ä¿ç•™æ³•èº«å±æ€§ã€å¢ƒç•Œè¿›åº¦ç­‰ä¿®è¡Œè¦ç´ ï¼Œç¡®ä¿é“å‹éšç§æ¸…å‡€æ— æŸ“":"Only cultivation data saved",ä»…å¥³æ€§:"Female Only",ä»…ç”·æ€§:"Male Only",æ‰€æœ‰æ€§åˆ«:"All Genders","é“æ³•è‡ªç„¶ï¼Œå¤©åœ°åˆå¼€":"Dao of Nature, Heaven and Earth Begin","æ­£åœ¨åŠ è½½ä¿®ä»™ä¸–ç•Œ...":"Loading cultivation world...",è¿æ¥å¤©é“:"Connecting to Heavenly Dao",åŠ è½½è§’è‰²æ•°æ®:"Loading character data",è¯»å–å­˜æ¡£ä¿¡æ¯:"Reading save data","æç¤ºï¼šè¯·åœ¨å·¦ä¾§èœå•é€‰æ‹©è§’è‰²å¹¶åŠ è½½å­˜æ¡£":"Tip: Select character and load save from left menu",æˆåŠŸ:"Success",å¤±è´¥:"Failed",é”™è¯¯:"Error",è­¦å‘Š:"Warning",ä¿¡æ¯:"Info",è¿›è¡Œä¸­:"In Progress",å·²å®Œæˆ:"Completed",æœªå¼€å§‹:"Not Started",å·²å–æ¶ˆ:"Cancelled",å…¨éƒ¨:"All",æ— :"None",ç©º:"Empty",æš‚æ— æ•°æ®:"No Data",æš‚æ— :"None",è¯·è¾“å…¥:"Enter",è¯·é€‰æ‹©:"Select",ç¡®å®šè¦:"Confirm",æ“ä½œæˆåŠŸ:"Success",æ“ä½œå¤±è´¥:"Failed",ä¿å­˜æˆåŠŸ:"Saved",ä¿å­˜å¤±è´¥:"Save Failed",åˆ é™¤æˆåŠŸ:"Deleted",åˆ é™¤å¤±è´¥:"Delete Failed",åŠ è½½å¤±è´¥:"Load Failed",ç½‘ç»œé”™è¯¯:"Network Error",æœªçŸ¥é”™è¯¯:"Unknown Error",ä»™é€”:"The Great Way",å‡¡äºº:"Mortal",åˆå§‹åœ°:"Starting Point",ä»™é“:"Immortal Dao",å¹´:"Year",æœˆ:"Month",æ—¥:"Day",å…ƒå¹´:"Year 1",ä»»åŠ¡:"Quests",å¯»æ‰¾æœºç¼˜:"Seek Opportunity","æ¨æ¼”ä¸­...":"Generating...",å®—é—¨:"Sect",å¥‡é‡:"Adventure",æ—¥å¸¸:"Daily",ç³»ç»Ÿä»»åŠ¡:"System Quest",é“ä¾£åŸ¹å…»:"Companion",ä¿®ä¸ºæå‡:"Cultivation",æ”¶é›†èµ„æº:"Collect",æˆ˜æ–—æŒ‘æˆ˜:"Combat",ä»»åŠ¡ç³»ç»Ÿé…ç½®:"Quest Config",é»˜è®¤ä»»åŠ¡æ•°é‡:"Default Quest Count",è‡ªåŠ¨åˆ·æ–°:"Auto Refresh",è‡ªåŠ¨åˆ·æ–°ä»»åŠ¡:"Auto refresh quests",å®Œæˆä»»åŠ¡åè‡ªåŠ¨ç”Ÿæˆæ–°ä»»åŠ¡:"Auto generate after completion",ä»»åŠ¡æ± ä¸­ä¿æŒçš„æœªå®Œæˆä»»åŠ¡æ•°é‡:"Unfinished quest count in pool",ä¿å­˜é…ç½®:"Save Config",åˆ é™¤ä»»åŠ¡:"Delete Quest","ä¸ºAIä»»åŠ¡ç”Ÿæˆæ·»åŠ è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆå¯é€‰ï¼‰":"Add custom instructions (optional)",åŠ¿åŠ›å®—é—¨:"Factions","æœç´¢å®—é—¨...":"Search sects...","æ­£åœ¨è¯»å–å®—é—¨ä¿¡æ¯...":"Loading sects...",æš‚æ— å®—é—¨ä¿¡æ¯:"No sect info",ä¸–ç•Œä¿¡æ¯å°†ç”±AIæ ¹æ®æ¸¸æˆè¿›ç¨‹ç”Ÿæˆ:"World info generated by AI",è°ƒè¯•ä¿¡æ¯:"Debug Info",ä»é…’é¦†åŒæ­¥æ•°æ®:"Sync from Tavern",å¼ºåˆ¶åˆ·æ–°:"Force Refresh",æˆå‘˜ç»Ÿè®¡:"Member Stats",æ€»äººæ•°:"Total Members",äºº:" members",å¢ƒç•Œåˆ†å¸ƒ:"Realm Distribution",èŒä½åˆ†å¸ƒ:"Position Distribution",å®—é—¨ç±»å‹:"Sect Type",å®—é—¨ç­‰çº§:"Sect Level",æ‰€åœ¨å¤§æ´²:"Continent",ä¸»è¦èµ„æº:"Main Resources",å®—é—¨é¢†å¯¼:"Leadership",å®—ä¸»:"Sect Master",å‰¯å®—ä¸»:"Vice Master",æœ€å¼ºä¿®ä¸º:"Peak Power",ç»¼åˆæˆ˜åŠ›:"Overall Power",å®—é—¨æè¿°:"Description",å®—é—¨ç‰¹è‰²:"Specialties",å…³ç³»çŠ¶æ€:"Relations",ä¸ä½ çš„å…³ç³»:"Your Relation",å£°æœ›å€¼:"Reputation",åŠ¿åŠ›èŒƒå›´:"Territory",å½±å“èŒƒå›´:"Influence",æ§åˆ¶åŒºåŸŸ:"Controlled Areas",æˆ˜ç•¥ä»·å€¼:"Strategic Value",åŠ å…¥æ¡ä»¶:"Join Requirements",åŠ å…¥å¥½å¤„:"Benefits",ç”³è¯·åŠ å…¥:"Apply",æˆ‘çš„å®—é—¨èº«ä»½:"My Sect Status",èŒä½:"Position",è´¡çŒ®ç‚¹:"Contribution",åŠ å…¥æ—¶é—´:"Join Date",å®—é—¨åŠ¿åŠ›:"Sect Actions",å®—é—¨ä»»åŠ¡:"Sect Quests",è´¡çŒ®å…‘æ¢:"Contribution Exchange",å®—é—¨è—ä¹¦:"Sect Library",åŒé—¨å¸ˆå…„å¼Ÿ:"Fellow Disciples","æœç´¢äººç‰©...":"Search people...","æ­£åœ¨è¯»å–äººé™…å…³ç³»...":"Loading relationships...",å°šæœªå»ºç«‹äººé™…å…³ç³»:"No relationships yet",åœ¨æ¸¸æˆä¸­ä¸æ›´å¤šäººç‰©äº’åŠ¨å»ºç«‹å…³ç³»:"Interact to build relationships",å–æ¶ˆå…³æ³¨:"Unfollow",æ·»åŠ å…³æ³¨:"Follow",åˆ é™¤äººç‰©:"Delete NPC","å¢ƒç•Œ:":"Realm:",å¥½æ„Ÿ:"Favor",åŸºç¡€æ¡£æ¡ˆ:"Profile",å¤–è²Œä¸æ€§æ ¼:"Appearance",æ€§æ ¼ç‰¹å¾:"Personality",å¤©èµ‹èƒ½åŠ›:"Talents",æœ€è¿‘è®°å¿†:"Recent Memories",äººæ ¼åº•çº¿:"Bottom Line","è§¦çŠ¯äººæ ¼åº•çº¿å°†å¯¼è‡´å¥½æ„Ÿåº¦æ–­å´–å¼ä¸‹è·Œï¼ˆ-30 ~ -60ï¼‰ï¼Œå…³ç³»ç ´è£‚ä¸”æéš¾ä¿®å¤":"Violating bottom line causes severe favor loss","å½“å‰çŠ¶æ€ï¼ˆå®æ—¶ï¼‰":"Current Status",å¤–è²ŒçŠ¶æ€:"Appearance",å†…å¿ƒæƒ³æ³•:"Thoughts",ç§å¯†ä¿¡æ¯:"Private Info",çŠ¶æ€ä¸æ¬²æœ›:"Status & Desire",æ€§çŠ¶æ€:"Sexual Status",æ€§æ¸´æœ›:"Desire",è´æ´:"Virginity",å¤„å¥³:"Virgin",éå¤„:"Non-virgin",å¤„ç”·:"Virgin",æ€§æ ¼å€¾å‘:"Personality",æ€§å–å‘:"Orientation",å¼‚æ€§æ‹:"Heterosexual",æ€§ä¼´ä¾£åå•:"Partners",æ€§ç»éªŒç»Ÿè®¡:"Experience",æ€§äº¤æ€»æ¬¡æ•°:"Total Times",æ¬¡:" times",æ€§ä¼´ä¾£æ•°é‡:"Partner Count","æœ€è¿‘ä¸€æ¬¡ï¼š":"Last Time:",èº«ä½“éƒ¨ä½å¼€å‘:"Body Development",éƒ¨ä½åç§°:"Part",ç‰¹æ®Šæ ‡è®°:"Mark",ç‰¹å¾æè¿°:"Description",æ•æ„Ÿåº¦:"Sensitivity",å¼€å‘åº¦:"Development",ä½“æ¶²çŠ¶æ€:"Fluid Status",ç™–å¥½ä¸ä½“è´¨:"Fetishes & Traits",æ€§ç™–å¥½:"Fetishes",ç‰¹æ®Šä½“è´¨:"Special Traits",è®°å¿†æ¡£æ¡ˆ:"Memory Archive",è®°å¿†:"Memory",æ¡:" items","æ€»ç»“ä¸­...":"Summarizing...",ä¸Šä¸€é¡µ:"Previous",ä¸‹ä¸€é¡µ:"Next",æ­¤äººæš‚æ— è®°å¿†:"No memories","åŸå§‹æ•°æ® (JSON)":"Raw Data (JSON)",èƒŒåŒ…:"Inventory",ä¸‹å“çµçŸ³:"Low Spirit Stone",ä¸­å“çµçŸ³:"Mid Spirit Stone",ä¸Šå“çµçŸ³:"High Spirit Stone",æå“çµçŸ³:"Top Spirit Stone",äº¤æ˜“:"Trade",ç´¢è¦:"Request",å·çªƒ:"Steal",å·²ç§»é™¤å›¾ç‰‡:"Image removed",æœ¬æ¬¡å¯¹è¯æ— å˜æ›´è®°å½•:"No changes in this conversation",åˆ‡æ¢åŠŸæ³•:"Switch Technique",å½“å‰æ­£åœ¨ä¿®ç‚¼:"Currently cultivating",ç¡®å®šè¦åˆ‡æ¢åˆ°:"Switch to",å—:"",å¸ä¸‹åŠŸæ³•:"Unequip Technique",ç¡®å®šè¦å¸ä¸‹:"Confirm unequip",ç¡®å®šå¸ä¸‹:"Confirm",å­˜æ¡£:"Saves",å½“å‰è¿›åº¦:"Current Progress",ä¸Šæ¬¡å¯¹è¯:"Last Conversation",æ—¶é—´ç‚¹å­˜æ¡£:"Time Save","æ¯æ¬¡å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½ï¼Œå¯ç”¨äºå›é€€åˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€":"Auto backup before conversation","æŒ‰è®¾å®šæ—¶é—´é—´éš”è‡ªåŠ¨è¦†ç›–ä¿å­˜ï¼Œé˜²æ­¢é•¿æ—¶é—´æ¸¸ç©æ•°æ®ä¸¢å¤±":"Auto save at intervals",åˆ›å»ºæ—¶é—´:"Created",æœ€åä¿å­˜:"Last Saved",å­˜æ¡£åˆ—è¡¨:"Save List",æ–°å»ºå­˜æ¡£:"New Save","ä¿®ä»™è·¯ä¸Šå°šæœªç•™å­˜ï¼Œåˆ›å»ºå­˜æ¡£è®°å½•é“é€”":"No saves yet, create one",å¼€å§‹æ¸¸æˆåå¯ä»¥åˆ›å»ºå­˜æ¡£:"You can create saves after starting the game",è¯»å–å­˜æ¡£:"Load",å›æ»š:"Rollback",è¦†ç›–:"Overwrite",è‡ªåŠ¨å­˜æ¡£è®¾ç½®:"Auto Save Settings",å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½:"Backup Before Chat",å­˜æ¡£é—´éš”:"Save Interval",å­˜æ¡£æ“ä½œ:"Save Operations",å¤‡ä»½æ‰€æœ‰å­˜æ¡£åˆ°æ–‡ä»¶:"Backup all saves",ä»æ–‡ä»¶æ¢å¤å­˜æ¡£:"Restore from file",æ¸…ç©ºå­˜æ¡£:"Clear Saves",åˆ é™¤æ‰€æœ‰å­˜æ¡£æ•°æ®:"Delete all saves","åŠ è½½ä¸‰åƒå¤§é“æ•°æ®ä¸­...":"Loading Dao data...",å·²è§£é”å¤§é“:"Unlocked Dao",æ€»æ„Ÿæ‚Ÿç»éªŒ:"Total Experience",é«˜é˜¶æ®µå¤§é“:"High Stage Dao",å°šæœªè§£é”ä»»ä½•å¤§é“:"No Dao unlocked","é€šè¿‡æœºç¼˜ã€é¡¿æ‚Ÿå’Œä¿®è¡Œæ¥è§£é”æ–°çš„å¤§é“":"Unlock through cultivation",å¤§é“æ„Ÿæ‚Ÿ:"Dao Insight","æ— é‡å¤§é“ï¼Œç”±å¿ƒè€Œç”Ÿ":"Infinite Dao from heart",æ„Ÿæ‚Ÿç»Ÿè®¡:"Stats",çªç ´æ‰€éœ€:"Required",æ·±å…¥æ„Ÿæ‚Ÿæ­¤é“:"Deepen insight",å®šä½åˆ°ç©å®¶ä½ç½®:"Locate Player",å…¨å±æ˜¾ç¤º:"Fullscreen",è°ƒè¯•åœ°å›¾æ•°æ®:"Debug Map",å›¾ä¾‹:"Legend",åŸé•‡åŠå¸‚:"Towns",æ´å¤©ç¦åœ°:"Blessed Lands",å¥‡çå¼‚åœ°:"Treasure Lands",å‡¶é™©ä¹‹åœ°:"Dangerous Areas",å…¶ä»–ç‰¹æ®Š:"Special",å¤§æ´²:"Continent",å®‰å…¨ç­‰çº§:"Safety Level",æ°”å€™ç±»å‹:"Climate",åœ°å½¢ç‰¹å¾:"Terrain",å¤©ç„¶å±éšœ:"Barriers",çŸ­æœŸè®°å¿†:"Short-term Memory","è„‘æµ·ä¸­ä¸€ç‰‡æ¸…å‡€ï¼Œå°šæœªç•™ä¸‹ä¿®è¡Œç—•è¿¹...":"Mind is clear, no cultivation traces yet...","å¤©é“æ„Ÿåº”ä¸­...":"Sensing the Heavenly Dao...",å­—:"chars","å¦‚æœé•¿æ—¶é—´æ— å“åº”ï¼Œç‚¹å‡»æ­¤å¤„é‡ç½®çŠ¶æ€":"If no response for a long time, click here to reset state",å›æ»šåˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€:"Rollback to state before last conversation",æŸ¥çœ‹æœ¬æ¬¡å¯¹è¯çš„å˜æ›´æ—¥å¿—:"View change log for this conversation","é™å¾…å¤©æœºå˜åŒ–...":"Awaiting the changes of fate...",æœ€è¿‘æ“ä½œ:"Recent Actions",æ¸…ç©ºè®°å½•:"Clear records",æ’¤å›å¹¶æ¢å¤:"Undo and restore",åˆ é™¤æ­¤åŠ¨ä½œ:"Delete this action","è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©æˆ–è¡ŒåŠ¨...":"Enter your choice or action...","è¯·å…ˆé€‰æ‹©è§’è‰²...":"Please select a character first...",æµå¼:"Stream",å¿«æ·è¡ŒåŠ¨:"Quick Actions",ä¿®ç‚¼æ—¶é—´:"Cultivation Time","è‡ªå®šä¹‰ï¼š":"Custom:",å¤©:"days",é€‰é¡¹:"Options",ä¸Šä¼ å›¾ç‰‡:"Upload image",ç§»é™¤å›¾ç‰‡:"Remove image","åŠ è½½è§’è‰²æ•°æ®..":"Loading character data...",æ— æ³•åŠ è½½è§’è‰²æ•°æ®:"Unable to load character data",ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…:"Click for details",ä¿®ä¸ºè¿›åº¦:"Cultivation Progress",ç­‰å¾…ä»™ç¼˜:"Waiting for Destiny",ç”Ÿå‘½çŠ¶æ€:"Vitals",è§’è‰²èƒŒæ™¯:"Background",å¹´é¾„:"Age",å¤©èµ‹ä¸çµæ ¹:"Talents & Spirit Root",å¤©èµ„ç­‰çº§:"Talent Tier",çµæ ¹å±æ€§:"Spirit Root Attributes",å¤©èµ‹ç‰¹è´¨:"Talents",å…­å¸å±æ€§:"Six Attributes",æœ€ç»ˆå…­å¸:"Final Attributes",åå¤©å…­å¸:"Acquired Attributes",å°šæœªä¿®ç‚¼åŠŸæ³•:"No technique being cultivated",å“:"Grade",é˜¶:"Rank","æ­¤åŠŸæ³•å¥¥å¦™æ— ç©·ï¼Œéšä¿®ç‚¼åŠ æ·±æ–¹å¯é¢†æ‚Ÿå…¶çœŸæ„ã€‚":"This technique is profound. Its true meaning can only be understood with deeper cultivation.",åŠŸæ³•æ•ˆæœ:"Technique Effects","ä¿®ç‚¼åŠ æˆï¼š":"Cultivation Bonus:","å±æ€§æå‡ï¼š":"Attribute Boost:",æ­¤åŠŸæ³•æ— ç‰¹æ®Šæ•ˆæœ:"This technique has no special effects",å·²æŒæ¡æŠ€èƒ½:"Mastered Skills",ä¸ª:"",æ‰€æœ‰æŠ€èƒ½:"All Skills",ç†Ÿç»ƒåº¦:"Proficiency",æœªè§£é”æŠ€èƒ½:"Locked Skills",å°šæœªè§£é”å¤§é“:"No Dao unlocked",å·²è§£:"Unlocked",æ¡å¤§é“:" Dao",ç¬¬:"Stage ",é˜¶æ®µ:"",è¿˜æœ‰:" and ","æ¡å¤§é“..":" more Dao...",å½“å‰ç»éªŒ:"Current EXP",æ€»ç»éªŒ:"Total EXP",äººé™…å…³ç³»:"Relationships",æš‚æ— äººé™…å…³ç³»:"No relationships yet",å¹³å‡å¥½æ„Ÿ:"Avg. Favorability",èƒŒåŒ…æ¦‚è§ˆ:"Inventory Overview",ç‰©å“æ€»æ•°:"Total Items",æ³•å®æ•°é‡:"Artifacts",åŠŸæ³•æ•°é‡:"Techniques",çµçŸ³å‚¨å¤‡:"Spirit Stones",è´¡çŒ®å€¼:"Contribution",å…³ç³»:"Relation",å·²è§£é”:"Unlocked",è§£é”æ¡ä»¶:"Unlock Condition",æŠ€èƒ½æ¥æº:"Skill Source",æŠ€èƒ½æè¿°:"Description",å½“å‰é˜¶æ®µ:"Current Stage",ä¿®ç‚¼æ„Ÿæ‚Ÿ:"Insights",ä¿®ç‚¼é€Ÿåº¦:"Cultivation Speed",è¯¦ç»†ä¿¡æ¯:"Detailed Info","åŸºç¡€å€ç‡:":"Base Multiplier:",é‡æ€§æœ¬èƒ½:"Wild Instinct",è‡ªç„¶çŠ¶æ€:"Natural State",ç­‰å¾…è§‰é†’:"Awaiting Awakening",è‡ªåŠ¨è§£é”:"Auto Unlock",éœ€è¦ç†Ÿç»ƒåº¦:"Requires Proficiency",åŠŸæ³•æŠ€èƒ½:"Technique Skill",åŠŸæ³•:"Technique",é€šè¿‡åŠŸæ³•ä¿®ç‚¼æŒæ¡:"Mastered through cultivation",æŒæ¡æŠ€èƒ½:"Mastered Skill",æœªçŸ¥å¤©èµ‹:"Unknown Talent",'ç¡®å®šè¦ç§»é™¤çŠ¶æ€æ•ˆæœ"{0}"å—ï¼Ÿ':'Are you sure you want to remove the status effect "{0}"?',è§’è‰²è¯¦æƒ…é¢æ¿:"Character Details Panel",å­˜æ¡£æ•°æ®ä¸å­˜åœ¨:"Save data does not exist","å·²ç§»é™¤çŠ¶æ€æ•ˆæœ: {0}":"Removed status effect: {0}","æœªæ‰¾åˆ°çŠ¶æ€æ•ˆæœ: {0}":"Status effect not found: {0}","ç§»é™¤çŠ¶æ€æ•ˆæœå¤±è´¥:":"Failed to remove status effect:",åˆå§‹é˜¶æ®µ:"Initial Stage","æ­¤å¤§é“å·²è§£é”ï¼Œä½†å°šæœªå¼€å§‹ä¿®ç‚¼":"This Dao is unlocked, but cultivation has not yet begun",æœªé—¨:"Uninitiated","ç¬¬{0}é˜¶æ®µ":"Stage {0}","æ­¤é“æ·±å¥¥ç„å¦™ï¼Œéœ€æŒä¹‹ä»¥æ’æ–¹èƒ½æœ‰æ‰€æˆå°±":"This Dao is profound and requires perseverance to achieve mastery",å·²æŒæ¡:"Mastered",ä¿®ç‚¼å®Œæˆ:"Cultivation Complete",é€šè¿‡ä¿®ç‚¼åŠŸæ³•è·å¾—çš„æŠ€èƒ½:"Skill obtained through technique cultivation",åŠŸæ³•ä¿®ç‚¼:"Technique Cultivation",æœªè§£é”:"Locked",åŠŸæ³•ä¼ æ‰¿:"Technique Inheritance","å·²åŒæ­¥æœ€æ–°æ•°æ®åˆ° gameStateStore":"Synced latest data to gameStateStore",åˆ·æ–°æ•°æ®å¤±è´¥:"Failed to refresh data","ç»„ä»¶æŒ‚è½½ï¼ŒåŒæ­¥æ•°æ®":"Component mounted, syncing data",é¢æ¿æ¿€æ´»:"Panel activated",å¾…å®š:"Undetermined","å‡ºèº«èƒŒæ™¯: {0}":"Origin: {0}",åŒæ­¥ä¸­:"Syncing",å·²è·å–:"Synced",æš‚ä¸å¯ç”¨:"Unavailable",äº‘ç«¯åŠŸèƒ½æš‚æœªå¼€æ”¾:"Cloud feature not available yet",è·å–äº‘ç«¯:"Fetch Cloud","æ­£åœ¨åŒæ­¥äº‘ç«¯æ•°æ®...":"Syncing cloud data...",äº‘ç«¯æ•°æ®å·²è·å–:"Cloud data synced",è·å–äº‘ç«¯æ•°æ®:"Fetch cloud data","äº‘ç«¯æ•°æ®å·²è·å–ï¼Œæ— éœ€é‡å¤æ“ä½œ":"Cloud data already synced","æ­£åœ¨è·å–äº‘ç«¯æ•°æ®...":"Fetching cloud data...","åŒæ­¥æˆåŠŸï¼æ–°å¢ {0} é¡¹äº‘ç«¯æ•°æ®":"Sync successful! Added {0} cloud items",æ‰€æœ‰äº‘ç«¯æ•°æ®å·²æ˜¯æœ€æ–°:"All cloud data is up to date",åŒæ­¥æˆåŠŸ:"Sync successful",åŒæ­¥å¤±è´¥:"Sync failed","åŒæ­¥å¤±è´¥: {0}":"Sync failed: {0}",å­˜å‚¨ä¸­:"Storing",å·²å­˜å‚¨:"Stored",å­˜å‚¨é¢„è®¾:"Store Preset",è¯·å®Œæˆæ‰€æœ‰æ­¥éª¤åå†ä¿å­˜é¢„è®¾:"Complete all steps before saving preset","æ­£åœ¨å­˜å‚¨é¢„è®¾...":"Storing preset...",é¢„è®¾å·²å­˜å‚¨:"Preset stored",ä¿å­˜å½“å‰é€‰æ‹©ä¸ºé¢„è®¾:"Save current selection as preset","é¢„è®¾å·²å­˜å‚¨ï¼Œæ— éœ€é‡å¤æ“ä½œ":"Preset already stored","æ­£åœ¨ä¿å­˜é¢„è®¾...":"Saving preset...","é¢„è®¾ã€Œ{0}ã€ä¿å­˜æˆåŠŸï¼":'Preset "{0}" saved successfully!',é¢„è®¾ä¿å­˜æˆåŠŸ:"Preset saved successfully","å­˜å‚¨å¤±è´¥: {0}":"Storage failed: {0}",å·²åŠ è½½:"Loaded",åŠ è½½é¢„è®¾:"Load Preset","æ­£åœ¨åŠ è½½é¢„è®¾...":"Loading preset...",é¢„è®¾å·²åŠ è½½:"Preset loaded","é¢„è®¾å·²åŠ è½½ï¼Œæ— éœ€é‡å¤æ“ä½œ":"Preset already loaded","é¢„è®¾ã€Œ{0}ã€åŠ è½½æˆåŠŸï¼":'Preset "{0}" loaded successfully!',åŠ è½½æˆåŠŸ:"Load successful","åŠ è½½å¤±è´¥: {0}":"Load failed: {0}",å­˜æ¡£æ•°æ®å¼‚å¸¸:"Save Data Error","ç³»ç»Ÿæ£€æµ‹åˆ°æ‚¨çš„å­˜æ¡£æ–‡ä»¶å­˜åœ¨ä¸¥é‡ç»“æ„é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´æ¸¸æˆæ— æ³•æ­£å¸¸è¿è¡Œã€‚è¿™é€šå¸¸æ˜¯ç”±äºç‰ˆæœ¬æ›´æ–°æˆ–æ•°æ®æŸåå¯¼è‡´çš„ã€‚":"System detected serious structural issues in your save file that may prevent the game from running properly. This is usually caused by version updates or data corruption.","å…·ä½“é—®é¢˜å¦‚ä¸‹ï¼š":"Specific issues:","æˆ‘ä»¬å»ºè®®æ‚¨ç«‹å³ä¿®å¤æ­¤é—®é¢˜ã€‚ä¿®å¤è¿‡ç¨‹å°†å°è¯•åœ¨ä¿ç•™æ‚¨æ ¸å¿ƒè¿›åº¦çš„å‰æä¸‹ï¼Œä¿®æ­£å­˜æ¡£çš„æ•°æ®ç»“æ„ã€‚":"We recommend fixing this issue immediately. The repair process will attempt to correct the save data structure while preserving your core progress.","æ³¨æ„ï¼šä¿®å¤ä¸»è¦é’ˆå¯¹ç»“æ„æ€§é—®é¢˜ï¼Œæ— æ³•æ¢å¤å·²æŸåæˆ–ä¸¢å¤±çš„æ•°æ®ã€‚å»ºè®®æ‚¨åœ¨ä¿®å¤å‰å¤‡ä»½å­˜æ¡£ã€‚":"Note: Repair mainly targets structural issues and cannot recover corrupted or lost data. It is recommended to backup your save before repair.",ä¿®å¤å­˜æ¡£å¹¶ç»§ç»­:"Repair Save and Continue","æˆ‘ä»¬å»ºè®®æ‚¨ç«‹å³ä¿®å¤æ­¤é—®é¢˜ã€‚ä¿®å¤è¿‡ç¨‹å°†æ ¹æ®æ‚¨ç°æœ‰çš„è§’è‰²åŸºç¡€ä¿¡æ¯ï¼Œé‡æ–°ç”Ÿæˆä¸€ä»½å¥åº·çš„åˆå§‹å­˜æ¡£æ•°æ®ã€‚":"We recommend fixing this issue immediately. The repair process will regenerate healthy initial save data based on your existing character information.","æ³¨æ„ï¼šè¿™å°†ä¼šé‡ç½®æ‚¨çš„æ¸¸æˆè¿›åº¦ï¼ˆå¦‚ä¿®ä¸ºã€èƒŒåŒ…ç‰©å“ç­‰ï¼‰ï¼Œä½†è§’è‰²æ ¸å¿ƒè®¾å®šï¼ˆå¦‚å§“åã€å¤©èµ‹ã€çµæ ¹ï¼‰å°†ä¿ç•™ã€‚":"Note: This will reset your game progress (such as cultivation, inventory items, etc.), but character core settings (such as name, talents, spirit root) will be retained.",é‡æ–°åˆå§‹åŒ–å¹¶ä¿®å¤:"Reinitialize and Repair",æ·±åº¦ä¿®ç‚¼:"Deep Cultivation",å½“å‰ä¿®ç‚¼è¿›åº¦:"Current Progress","ä¿®ç‚¼é€Ÿåº¦: +{0}%":"Cultivation Speed: +{0}%",é€‰æ‹©ä¿®ç‚¼å¤©æ•°:"Select Cultivation Days",AIå°†æ ¹æ®ä¿®ç‚¼å¤©æ•°ç”Ÿæˆè¯¦ç»†çš„ä¿®ç‚¼è¿‡ç¨‹å’Œç»“æœ:"AI will generate detailed cultivation process and results based on days",è¾“å…¥å¤©æ•°:"Enter days","1å¤©":"1 day","7å¤©":"7 days","30å¤©":"30 days","90å¤©":"90 days","180å¤©":"180 days","365å¤©":"365 days",å¼€å§‹ä¿®ç‚¼:"Begin Cultivation",æˆæƒéªŒè¯:"Authorization","æ¬¢è¿ä½¿ç”¨æˆæƒç³»ç»Ÿå¿«é€Ÿå…¥é—¨åŠŸèƒ½ã€‚è¯·è¾“å…¥æ‚¨çš„å…‘æ¢ç å’Œæœºå™¨ç è¿›è¡ŒéªŒè¯ã€‚":"Welcome to the authorization system. Please enter your redemption code and machine code for verification.","åº”ç”¨ ID":"App ID",è¯·è¾“å…¥åº”ç”¨ID:"Enter App ID",å…‘æ¢ç :"Redemption Code",æœºå™¨ç :"Machine Code",è‡ªåŠ¨ç”Ÿæˆæˆ–æ‰‹åŠ¨è¾“å…¥:"Auto-generate or manual input",ç”Ÿæˆæœºå™¨ç :"Generate machine code",ä½¿ç”¨ç»Ÿä¸€æœºå™¨ç ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ:"Auto-generate using unified machine code system",ç»‘å®šç±»å‹:"Binding Type",ä»…æœºå™¨ç :"Machine Code Only",ä»…IP:"IP Only",åŒé‡ç»‘å®š:"Dual Binding",éªŒè¯æˆæƒ:"Verify Authorization","éªŒè¯æˆåŠŸï¼æˆæƒå·²æ¿€æ´»":"Verification successful! Authorization activated","éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥ä¿¡æ¯":"Verification failed, please check input","ç½‘ç»œè¯·æ±‚å¤±è´¥ï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨è¿æ¥":"Network request failed, please check server connection",æœºå™¨ç ç”Ÿæˆå¤±è´¥:"Machine code generation failed",AIç”Ÿæˆå¤±è´¥:"AI Generation Failed",ç”Ÿæˆè¿‡ç¨‹é‡åˆ°é—®é¢˜:"Problem encountered during generation",å–æ¶ˆåˆ›å»º:"Cancel Creation",ç»§ç»­é‡è¯•:"Retry",é€‰æ‹©æ•°é‡:"Select Quantity","å¯ç”¨æ•°é‡ï¼š{0}":"Available: {0}","1ä¸ª":"1 item","5ä¸ª":"5 items","10ä¸ª":"10 items",è¾“å…¥æ•°å€¼:"Enter Value",æ•°å€¼:"Value",æ¸…é™¤è‡ªå®šä¹‰:"Clear Custom",æ¸…é™¤äº‘ç«¯:"Clear Cloud",æ¸…é™¤è‡ªå®šä¹‰å’ŒAIç”Ÿæˆçš„æ•°æ®:"Clear custom and AI-generated data",æ¸…é™¤ä»äº‘ç«¯è·å–çš„æ•°æ®:"Clear cloud data",æ¸…é™¤è‡ªå®šä¹‰æ•°æ®:"Clear Custom Data","ç¡®å®šè¦æ¸…é™¤è‡ªå®šä¹‰æ•°æ®å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰è‡ªå®šä¹‰å’ŒAIç”Ÿæˆçš„æ•°æ®ï¼Œä¿ç•™æœ¬åœ°åŸºç¡€æ•°æ®å’Œäº‘ç«¯æ•°æ®ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼":"Are you sure you want to clear custom data? This will clear all custom and AI-generated data, keeping local base data and cloud data. This action cannot be undone!",ç¡®è®¤æ¸…é™¤:"Confirm Clear","å·²æ¸…é™¤{0} é¡¹è‡ªå®šä¹‰æ•°æ®ï¼Œä¿ç•™æœ¬åœ°åŸºç¡€æ•°æ®å’Œäº‘ç«¯æ•°æ®":"Cleared {0} custom items, keeping local base data and cloud data",æ¸…é™¤äº‘ç«¯æ•°æ®:"Clear Cloud Data","ç¡®å®šè¦æ¸…é™¤äº‘ç«¯æ•°æ®å—ï¼Ÿè¿™å°†æ¸…é™¤ä»äº‘ç«¯è·å–çš„æ•°æ®ï¼Œä¿ç•™æœ¬åœ°åŸºç¡€æ•°æ®å’Œè‡ªå®šä¹‰æ•°æ®ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼":"Are you sure you want to clear cloud data? This will clear data fetched from cloud, keeping local base data and custom data. This action cannot be undone!","å·²æ¸…é™¤{0} é¡¹äº‘ç«¯æ•°æ®ï¼Œä¿ç•™æœ¬åœ°æ•°æ®å’Œè‡ªå®šä¹‰æ•°æ®":"Cleared {0} cloud items, keeping local data and custom data",ä¿å­˜é¢„è®¾:"Save Preset",é¢„è®¾åç§°:"Preset Name","è¯·è¾“å…¥é¢„è®¾åç§°ï¼ˆå¦‚ï¼šå‰‘ä¿®é¢„è®¾ã€æ²»æ„ˆç³»é¢„è®¾ç­‰ï¼‰":"Enter preset name (e.g., Sword Cultivator Preset, Healer Preset, etc.)",é¢„è®¾æè¿°:"Preset Description","è¾“å…¥æ­¤é¢„è®¾çš„æè¿°ä¿¡æ¯...":"Enter preset description...","ä¿å­˜æ—¶é—´ï¼š":"Save Time:","ä¿å­˜ä¸­...":"Saving...",å¯¼å‡ºé¢„è®¾:"Export Presets","æ­£åœ¨åŠ è½½é¢„è®¾åˆ—è¡¨...":"Loading preset list...",æš‚æ— å¯å¯¼å‡ºçš„é¢„è®¾:"No presets to export",è¯·å…ˆä¿å­˜ä¸€äº›é¢„è®¾åå†è¿›è¡Œå¯¼å‡º:"Please save some presets before exporting",å¯¼å‡ºå…¨éƒ¨é¢„è®¾:"Export All Presets","å¯¼å‡ºæ‰€æœ‰ {0} ä¸ªé¢„è®¾":"Export all {0} presets",å¯¼å‡ºé€‰ä¸­é¢„è®¾:"Export Selected Presets",é€‰æ‹©è¦å¯¼å‡ºçš„é¢„è®¾:"Select presets to export","å…¨é€‰/å–æ¶ˆå…¨é€‰":"Select All/Deselect All","å·²é€‰æ‹© {0} ä¸ª":"Selected {0}",æœªå‘½åé¢„è®¾:"Unnamed Preset",ä»Šå¤©:"Today",æ˜¨å¤©:"Yesterday","{0}å¤©å‰":"{0} days ago","å¯¼å‡ºæ•°é‡ï¼š":"Export Count:","{0} ä¸ªé¢„è®¾":"{0} presets","æ–‡ä»¶æ ¼å¼ï¼š":"File Format:",JSON:"JSON","å¯¼å‡ºæ—¶é—´ï¼š":"Export Time:","å¯¼å‡ºä¸­...":"Exporting...","æˆåŠŸå¯¼å‡º {0} ä¸ªé¢„è®¾ï¼":"Successfully exported {0} presets!","å¯¼å‡ºå¤±è´¥: {0}":"Export failed: {0}",å¯¼å…¥é¢„è®¾:"Import Presets","æ‹–æ”¾JSONæ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶":"Drag and drop JSON file here, or click to select",é€‰æ‹©æ–‡ä»¶:"Select File",ä»…æ”¯æŒé€šè¿‡æœ¬åº”ç”¨å¯¼å‡ºçš„é¢„è®¾JSONæ–‡ä»¶:"Only supports preset JSON files exported by this app",è¯·é€‰æ‹©JSONæ ¼å¼çš„æ–‡ä»¶:"Please select a JSON file","æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶ï¼ˆæœ€å¤§10MBï¼‰":"File size exceeds limit (max 10MB)",åˆå¹¶æ¨¡å¼:"Merge Mode","å°†å¯¼å…¥çš„é¢„è®¾æ·»åŠ åˆ°ç°æœ‰é¢„è®¾ä¸­ï¼ˆæ¨èï¼‰":"Add imported presets to existing presets (recommended)",æ›¿æ¢æ¨¡å¼:"Replace Mode","å°†æ¸…é™¤æ‰€æœ‰ç°æœ‰é¢„è®¾ï¼Œä»…ä¿ç•™å¯¼å…¥çš„é¢„è®¾":"Clear all existing presets and keep only imported presets","æ›¿æ¢æ¨¡å¼å°†åˆ é™¤æ‰€æœ‰ç°æœ‰é¢„è®¾ï¼\n\næ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ":"Replace mode will delete all existing presets!\n\nThis action cannot be undone, are you sure you want to continue?","æ­£åœ¨å¯¼å…¥é¢„è®¾...":"Importing presets...","æˆåŠŸå¯¼å…¥ {0} ä¸ªé¢„è®¾ï¼":"Successfully imported {0} presets!",éƒ¨åˆ†é¢„è®¾å¯¼å…¥æˆåŠŸ:"Some presets imported successfully","æˆåŠŸ: {0} ä¸ªï¼Œå¤±è´¥: {1} ä¸ª":"Success: {0}, Failed: {1}",é¢„è®¾å¯¼å…¥å¤±è´¥:"Preset import failed","å¯¼å…¥å¤±è´¥: {0}":"Import failed: {0}",å¼€å§‹å¯¼å…¥:"Start Import",æš‚æ— ä¿å­˜çš„é¢„è®¾:"No saved presets","å®Œæˆè§’è‰²åˆ›å»ºå,å¯ä»¥ä¿å­˜ä¸ºé¢„è®¾ä»¥ä¾¿å¿«é€Ÿå¼€å§‹æ–°æ¸¸æˆ":"After completing character creation, you can save as preset for quick new game start","ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¢„è®¾å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚":"Are you sure you want to delete this preset? This action cannot be undone.",é¢„è®¾å·²åˆ é™¤:"Preset deleted","æœç´¢...":"Search...","æœç´¢ç‰©å“...":"Search items...",å…¨éƒ¨ç‰©å“:"All Items",é»˜è®¤æ’åº:"Default Sort",å“è´¨æ’åº:"Sort by Quality",åç§°æ’åº:"Sort by Name",ä»é…’é¦†åŒæ­¥æœ€æ–°æ•°æ®:"Sync latest data from Tavern","è£…å¤‡å¢å¹…:":"Equipment Bonus:","ç‰¹æ®Šæ•ˆæœ:":"Special Effects:",å¸ä¸‹:"Unequip",ä¸¢å¼ƒ:"Discard",åœæ­¢ä¿®ç‚¼:"Stop Cultivating",ä¿®ç‚¼:"Cultivate",ä½¿ç”¨:"Use",ç©ºç©ºå¦‚ä¹Ÿ:"Empty",æš‚æ— è£…å¤‡:"No Equipment",æš‚æ— åŠŸæ³•:"No Techniques",æš‚æ— å…¶ä»–ç‰©å“:"No Other Items","æš‚æ— {0}":"No {0}",å¯ä»¥è¯•è¯•æœç´¢å…¶ä»–åˆ†ç±»:"Try searching other categories","åŠŸæ³•æ•ˆæœ:":"Technique Effects:","ä¿®ç‚¼é€Ÿåº¦:":"Cultivation Speed:","å±æ€§åŠ æˆ:":"Attribute Bonus:","ç‰¹æ®Šèƒ½åŠ›:":"Special Abilities:","åŠŸæ³•æŠ€èƒ½:":"Technique Skills:","éœ€è¦:":"Requires:","æ¶ˆè€—:":"Cost:",é€‰æ‹©ç‰©å“æŸ¥çœ‹è¯¦æƒ…:"Select an item to view details",ç‰©å“:"Items",è£…å¤‡:"Equipment",çµçŸ³:"Spirit Stones",è£…å¤‡1:"Equipment 1",è£…å¤‡2:"Equipment 2",è£…å¤‡3:"Equipment 3",è£…å¤‡4:"Equipment 4",è£…å¤‡5:"Equipment 5",è£…å¤‡6:"Equipment 6",å¸ä¸‹è£…å¤‡:"Unequip",è£…å¤‡æ•°æ®ç¼ºå¤±:"Equipment data missing",ç©ºæ§½ä½:"Empty Slot",å¯è£…å¤‡è£…å¤‡:"Equipment can be worn","å¢å¹…æ•ˆæœï¼š":"Bonus Effects:","ç‰¹æ®Šæ•ˆæœï¼š":"Special Effects:","å…‘æ¢ä¸º{0}çµçŸ³ (100:1)":"Exchange for {0} Spirit Stone (100:1)","â†‘ å…‘æ¢":"â†‘ Exchange","åˆ†è§£ä¸º{0}çµçŸ³ (1:100)":"Decompose into {0} Spirit Stone (1:100)","â†“ åˆ†è§£":"â†“ Decompose",ä½¿ç”¨ç‰©å“:"Use Item",ä½¿ç”¨æ•°é‡:"Quantity to Use",ç¡®å®šä½¿ç”¨:"Confirm Use",æš‚æ— ç‰¹æ®Šæ•ˆæœ:"No special effects",è¯¥ç‰©å“æ— æ³•ç›´æ¥ä½¿ç”¨:"This item cannot be used directly",ä½¿ç”¨ç‰©å“æˆåŠŸ:"Item used successfully",ä½¿ç”¨ç‰©å“å¤±è´¥:"Failed to use item",ä¸¢å¼ƒç‰©å“:"Discard Item",ä¸¢å¼ƒæ•°é‡:"Quantity to Discard",ç¡®å®šä¸¢å¼ƒ:"Confirm Discard","æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼":"This action cannot be undone!","ç¡®å®šè¦ä¸¢å¼ƒ {0}{1} å—ï¼Ÿ\n\næ­¤æ“ä½œä¸å¯æ’¤é”€ï¼":"Are you sure you want to discard {0}{1}?\n\nThis action cannot be undone!","å·²ä¸¢å¼ƒã€Š{0}ã€‹":'Discarded "{0}"',"å·²ä¸¢å¼ƒ {0} ä¸ªã€Š{1}ã€‹":'Discarded {0} of "{1}"',ä¸¢å¼ƒç‰©å“å¤±è´¥:"Failed to discard item",åªæœ‰è£…å¤‡æ‰èƒ½ç©¿æˆ´:"Only equipment can be worn","è£…å¤‡æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•":"Equipment operation failed, please try again later",åªæœ‰åŠŸæ³•æ‰èƒ½ä¿®ç‚¼:"Only techniques can be cultivated",æ®‹ç¼º:"Broken",èƒŒåŒ…æ•°æ®ä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®:"Inventory data does not exist or is in the wrong format",èƒŒåŒ…é¢æ¿:"Inventory Panel",ç‰©å“ç§»é™¤æˆåŠŸ:"Item removed successfully","å°è¯•æ›´æ–°ä¸€ä¸ªä¸å­˜åœ¨äºèƒŒåŒ…çš„ç‰©å“: {0}":"Attempting to update an item that does not exist in the inventory: {0}",ç‰©å“æ›´æ–°æˆåŠŸ:"Item updated successfully",è£…å¤‡æ æ•°æ®ä¸å­˜åœ¨:"Equipment data does not exist",èƒŒåŒ…æ•°æ®ä¸å­˜åœ¨:"Inventory data does not exist","å¸ä¸‹äº†ã€Š{0}ã€‹è£…å¤‡":'Unequipped "{0}"',"å·²å¸ä¸‹ã€Š{0}ã€‹":'Unequipped "{0}"',è£…å¤‡å¸ä¸‹æˆåŠŸ:"Unequip successful",å¸ä¸‹è£…å¤‡å¤±è´¥:"Failed to unequip","[èƒŒåŒ…é¢æ¿-è­¦å‘Š] ç‰©å“ç¼ºå°‘å“è´¨æ•°æ®:":"[InventoryPanel-Warning] Item is missing quality data:",æ‰‹åŠ¨åˆ·æ–°é…’é¦†æ•°æ®:"Manually refresh Tavern data","å­˜æ¡£æ•°æ® (SaveData)":"Save Data",ç©å®¶è§’è‰²çŠ¶æ€:"Player Status",è£…å¤‡æ :"Equipment",æ¸¸æˆæ—¶é—´:"Game Time",ä»»åŠ¡ç³»ç»Ÿ:"Quest System",ç³»ç»Ÿ:"System",å™äº‹å†å²:"Narrative History",è§’è‰²æ•°æ®:"Character Data",è®°å¿†æ•°æ®:"Memory Data",æ¸¸æˆç‰ˆæœ¬:"Game Version",æ¶æ„æ¨¡å¼:"Architecture","Piniaå†…å­˜ + DBæŒä¹…åŒ–":"Pinia Memory + DB Persistence","å­˜æ¡£æ•°æ®(ä¿®æ”¹æ¸¸æˆæ•°æ®)":"Save Data (Modify Game Data)",æ ¸å¿ƒæ•°æ®:"Core Data",è‡ªå®šä¹‰é€‰é¡¹:"Custom Options",åŸå§‹æ•°æ®:"Raw Data",è¯·å…ˆåŠ è½½æ¸¸æˆå­˜æ¡£:"Please load a game save first","æ•°æ®å·²ä»Pinia Storeåˆ·æ–°":"Data refreshed from Pinia Store","æ•°æ®åˆ·æ–°å¤±è´¥: ":"Data refresh failed: ",æ•°æ®å¯¼å‡ºæˆåŠŸ:"Data exported successfully",æ•°æ®å¯¼å‡ºå¤±è´¥:"Data export failed","æ–°æ¶æ„ä¸‹ä¸æ”¯æŒç›´æ¥æ·»åŠ å˜é‡ï¼Œè¯·é€šè¿‡æ¸¸æˆæ“ä½œä¿®æ”¹æ•°æ®":"Directly adding variables is not supported in the new architecture. Please modify data through game actions.",å·²å¤åˆ¶åˆ°å‰ªè´´æ¿:"Copied to clipboard",å¤åˆ¶å¤±è´¥:"Copy failed","æ–°æ¶æ„ä¸‹ä¸æ”¯æŒç›´æ¥åˆ é™¤å˜é‡ï¼Œè¯·é€šè¿‡æ¸¸æˆæ“ä½œä¿®æ”¹æ•°æ®":"Directly deleting variables is not supported in the new architecture. Please modify data through game actions.",æ²¡æœ‰è¦ä¿å­˜çš„æ•°æ®:"No data to save","âœ… å·²æˆåŠŸæ›´æ–° ":"âœ… Successfully updated ","ä¿å­˜å¤±è´¥: ":"Save failed: ","åŸºæœ¬ç»Ÿè®¡:":"Basic Stats:",æ¸¸æˆå·²åŠ è½½:"Game Loaded",è§’è‰²å:"Character Name","æ ¸å¿ƒæ•°æ®é”®å:":"Core Data Keys:","è‡ªå®šä¹‰é€‰é¡¹é”®å:":"Custom Option Keys:","å®Œæ•´SaveData:":"Full SaveData:",è°ƒè¯•ä¿¡æ¯å·²è¾“å‡ºåˆ°æ§åˆ¶å°:"Debug info has been output to the console","AIå¤„ç†ä¸­ï¼Œè¯·ç¨å€™...":"AI is processing, please wait...","è§’è‰²å·²æ­»äº¡ï¼Œæ— æ³•ç»§ç»­ã€‚":"Character has died, cannot continue.","è§’è‰²å› æ°”è¡€è€—å°½è€Œæ­»äº¡ã€‚":"Character has died due to Qi exhaustion.","è§’è‰²å› å¯¿å…ƒè€—å°½è€Œæ­»äº¡ã€‚":"Character has died due to lifespan depletion.",å¤©æœºå·²æ˜¾:"Heavenly secrets revealed","AIå“åº”æ ¼å¼ä¸æ­£ç¡®ï¼Œæ­£åœ¨é‡è¯•...":"AI response format is incorrect, retrying...","AIå“åº”æ ¼å¼é”™è¯¯ï¼Œå¤šæ¬¡é‡è¯•å¤±è´¥":"AI response format error, and multiple retries failed",AIå¤„ç†å¤±è´¥:"AI processing failed",AIå¤„ç†çŠ¶æ€å·²é‡ç½®:"AI processing state has been reset",'å­˜æ¡£ "{0}" æˆåŠŸ':'Save "{0}" successful',å­˜æ¡£å¤±è´¥:"Save failed",'å·²å¤‡ä»½åˆ°"ä¸Šæ¬¡å¯¹è¯"':'Backed up to "Last Conversation"',å¤‡ä»½å¤±è´¥:"Backup failed",åŸºç¡€ä¿®ç‚¼:"Basic Cultivation",ç‚¼ä½“:"Body Tempering",æ‰“å:"Meditation",æ¢ç´¢è’é‡:"Explore Wilderness",åŸä¸­é—²é€›:"Stroll in Town",æ‹œè®¿å‹äºº:"Visit Friend",ç»“äº¤æ–°å‹:"Make New Friend",ä¼‘æ¯:"Rest",æŸ¥çœ‹çŠ¶æ€:"Check Status",æ¢ç´¢:"Exploration",ç¤¾äº¤:"Social",å…¶ä»–:"Other","å¸æ”¶çµæ°”ï¼Œæå‡ä¿®ä¸ºã€‚":"Absorb spiritual energy to enhance cultivation.","é”¤ç‚¼è‚‰èº«ï¼Œå¼ºåŒ–ä½“é­„ã€‚":"Temper the body to strengthen physique.","é™å¿ƒæ‰“åï¼Œç¨³å›ºå¿ƒå¢ƒï¼Œæå‡ç¥è¯†ã€‚":"Meditate to stabilize mind and enhance spirit.","æ¢ç´¢è’é‡ï¼Œå¯»æ‰¾æœºç¼˜ã€‚":"Explore the wilderness to find opportunities.",é™„è¿‘åŒºåŸŸ:"Nearby Area",è¿œæ–¹åŒºåŸŸ:"Far Area",å±é™©åŒºåŸŸ:"Dangerous Area","åœ¨åŸä¸­æ¸¸è¡ï¼Œæ‰“æ¢æ¶ˆæ¯ã€‚":"Wander in town to gather information.",åŠå¸‚:"Market",é…’æ¥¼:"Tavern",å•†é“º:"Shop","æ‹œè®¿ä¸€ä½ç†Ÿäººã€‚":"Visit an acquaintance.",éšæœºæ‹œè®¿:"Random Visit",äº²å¯†å¥½å‹:"Close Friend","ä¸»åŠ¨ç»“äº¤æ–°æœ‹å‹ã€‚":"Actively make new friends.","ä¼‘æ¯æ¢å¤ç²¾åŠ›ã€‚":"Rest to recover energy.","æŸ¥çœ‹å½“å‰è¯¦ç»†çŠ¶æ€ã€‚":"Check current detailed status.",å…¶ä»–è®°å½•:"Other Records",è®°å¿†ç³»ç»Ÿè®¾ç½®:"Memory System Settings","ğŸ“– å¯¼å‡ºä¸ºå°è¯´":"ğŸ“– Export as Novel","å°†å®Œæ•´çš„æ¸¸æˆå¯¹è¯å†å²ï¼ˆåŸºäºå™äº‹å†å²ï¼‰å¯¼å‡ºä¸ºå°è¯´æ ¼å¼ï¼Œæ–¹ä¾¿é˜…è¯»å’Œåˆ†äº«ã€‚":"Export complete game dialogue history (based on narrative history) as novel format for easy reading and sharing.","âš™ï¸ è®°å¿†ç³»ç»Ÿé…ç½®":"âš™ï¸ Memory System Configuration","ğŸ§ª æµ‹è¯•":"ğŸ§ª Test",æ·»åŠ æµ‹è¯•ä¸­æœŸè®°å¿†:"Add Test Medium-Term Memory",æµ‹è¯•:"Test",åŠŸæ³•åº“:"Technique Library","çŸ­æœŸè®°å¿†ä¸Šé™ï¼ˆæ¡ï¼‰ï¼š":"Short-Term Memory Limit (items):",é»˜è®¤:"Default","ä¸­æœŸè®°å¿†è½¬åŒ–é˜ˆå€¼ï¼ˆæ¡ï¼‰ï¼š":"Medium-Term Memory Conversion Threshold (items):","ä¸­æœŸè®°å¿†è¾¾åˆ°æ­¤æ•°é‡æ—¶ï¼Œè½¬åŒ–ä¸ºé•¿æœŸè®°å¿†ã€‚é»˜è®¤ï¼š25":"When medium-term memories reach this amount, they are converted to long-term memories. Default: 25","ä¸­æœŸè®°å¿†ä¿ç•™æ•°é‡ï¼ˆæ¡ï¼‰ï¼š":"Medium-Term Memory Retention Count (items):","è½¬åŒ–ä¸ºé•¿æœŸè®°å¿†æ—¶ï¼Œä¿ç•™æœ€æ–°çš„è¿™ä¹ˆå¤šæ¡ä¸­æœŸè®°å¿†ã€‚é»˜è®¤ï¼š8":"When converting to long-term memory, retain this many of the latest medium-term memories. Default: 8",å¯ç”¨è‡ªåŠ¨è®°å¿†è½¬åŒ–:"Enable Automatic Memory Conversion","å¯ç”¨åï¼Œè‡ªåŠ¨å°†ä¸­æœŸè®°å¿†è½¬åŒ–ä¸ºé•¿æœŸè®°å¿†ã€‚ç¦ç”¨åˆ™ä¸è½¬åŒ–ã€‚":"When enabled, automatically converts medium-term memories to long-term memories. If disabled, no conversion occurs.","è‡ªå®šä¹‰ä¸­æœŸè®°å¿†æ ¼å¼ï¼š":"Custom Medium-Term Memory Format:","ç•™ç©ºä½¿ç”¨é»˜è®¤æ ¼å¼ã€‚å¯è‡ªå®šä¹‰AIæç¤ºè¯æ¥æ§åˆ¶è®°å¿†çš„ç”Ÿæˆæ ¼å¼...":"Leave blank for default format. You can customize the AI prompt to control the generation format of memories...","è‡ªå®šä¹‰ä¸­æœŸè®°å¿†çš„AIæç¤ºè¯æ ¼å¼ã€‚ç•™ç©ºä½¿ç”¨ç³»ç»Ÿé»˜è®¤ã€‚":"Customize the AI prompt format for medium-term memories. Leave blank to use the system default.","è‡ªå®šä¹‰é•¿æœŸè®°å¿†æ ¼å¼ï¼š":"Custom Long-Term Memory Format:","è‡ªå®šä¹‰é•¿æœŸè®°å¿†çš„AIæç¤ºè¯æ ¼å¼ã€‚ç•™ç©ºä½¿ç”¨ç³»ç»Ÿé»˜è®¤ã€‚":"Customize the AI prompt format for long-term memories. Leave blank to use the system default.","ğŸ’¾ ä¿å­˜é…ç½®":"ğŸ’¾ Save Configuration",é‡ç½®ä¸ºé»˜è®¤:"Reset to Default","å½“å‰ä¸­æœŸè®°å¿†ï¼š":"Current Medium-Term Memories:",autoSummaryTriggerHint:"(Summary will be triggered automatically upon reaching {count} items)",manualSummaryRequirement:"At least {count} medium-term memories are required to summarize",æ‰‹åŠ¨è§¦å‘AIæ€»ç»“:"Manually trigger AI summary","ğŸ“ æ‰‹åŠ¨æ€»ç»“ä¸­æœŸè®°å¿†":"ğŸ“ Manually Summarize Medium-Term Memories","æ­£åœ¨è¯»å–è®°å¿†...":"Reading memories...","ç¬¬ {currentPage} / {totalPages} é¡µï¼Œå…± {total} æ¡è®°å¿†":"Page {currentPage} / {totalPages}, {total} memories in total",firstPage:"First Page",previousPage:"Previous Page",nextPage:"Next Page",lastPage:"Last Page",page:"Page",go:"Go",deleteThisMemory:"Delete this memory",all:"All",shortTerm:"Short-Term",mediumTerm:"Medium-Term",longTerm:"Long-Term",noCultivationInsights:"Mind is as clear as a mirror, no cultivation insights recorded yet",noMemoryOfType:"No {type} memories yet",mediumTermMemory:"Medium-Term Memory",longTermMemory:"Long-Term Memory",unknown:"Unknown",convertedAt:"Converted at {time}",archivedAt:"Archived at {time}",memoriesReorganized:"Memories have been reorganized, old memories have been converted",clearMemories:"Clear Memories",confirmClearMemories:"Are you sure you want to clear all memories? This action cannot be undone and will also clear the tavern data.",confirmClear:"Confirm Clear",memoriesCleared:"Memories have been cleared and synced to the tavern",clearMemoriesFailed:"Failed to clear memories, please try again",insufficientMemoriesForSummary:"Insufficient medium-term memories, at least {minRequired} items are required to summarize",deleteMemory:"Delete Memory",confirmDeleteMemory:"Are you sure you want to delete this {type}? This action cannot be undone.\n\nContent: {content}...",delete:"Delete",memoryNotFound:"Could not find the memory to delete",memoryDeleted:"Deleted {type}",deleteFailed:"Delete failed: {error}",cultivator:"Cultivator",cultivationWorld:"Cultivation World",noNarrativeHistoryToExport:"No narrative history to export",novelTitle:"ã€ŠThe Cultivation Path of {characterName}ã€‹",worldArchive:"World Archive",exportTime:"Export Time",totalParagraphs:"Total Paragraphs",iSaid:"I said",chapter:"Chapter",narrativeHistoryExported:"Successfully exported {count} narrative history entries",exportFailed:"Export failed, please check the console",testMemoryAdded:"âœ… Test memory added! Current medium-term memories: {count} items",addTestMemoryFailed:"Failed to add test memory",é“æ³•å—é˜»:"Dao Obstructed",éšè—è¯¦æƒ…:"Hide Details",å˜æ›´æ—¥å¿—:"Change Log","æœ¬æ¬¡æ“ä½œæ²¡æœ‰äº§ç”Ÿå¯è§çš„çŠ¶æ€å˜æ›´ã€‚":"No visible state changes from this operation.",åˆ¤å®šè§„åˆ™è¯´æ˜:"Judgement Rules",åˆ¤å®šè®¡ç®—å…¬å¼:"Judgement Formula",åˆ¤å®šå€¼:"Judgement Value",åˆ¤å®šç»“æœ:"Judgement Results",åˆ¤å®šè§„åˆ™:"Judgement Rules","åˆ¤å®šå€¼ â‰¥ éš¾åº¦+30":"Value â‰¥ Difficulty+30","åˆ¤å®šå€¼ â‰¥ éš¾åº¦+15ï¼Œè¶…é¢å®Œæˆ":"Value â‰¥ Difficulty+15, exceeded","åˆ¤å®šå€¼ â‰¥ éš¾åº¦ï¼Œè¾¾æˆç›®æ ‡":"Value â‰¥ Difficulty, achieved","åˆ¤å®šå€¼ < éš¾åº¦ï¼Œæœªè¾¾æˆ":"Value < Difficulty, failed","åˆ¤å®šå€¼è¿œä½äºéš¾åº¦ï¼ˆéš¾åº¦-15ä»¥ä¸‹ï¼‰":"Value far below difficulty (below difficulty-15)",åˆ¤å®šç±»å‹ä¸å±æ€§é…æ¯”:"Judgement Types & Attributes",æˆ˜æ–—åˆ¤å®š:"Combat Judgement","æ ¹éª¨50% + çµæ€§30% + æ°”è¿20%":"Root Bone 50% + Spirituality 30% + Fortune 20%",ä¿®ç‚¼åˆ¤å®š:"Cultivation Judgement","æ‚Ÿæ€§50% + çµæ€§30% + å¿ƒæ€§20%":"Comprehension 50% + Spirituality 30% + Temperament 20%",æŠ€è‰ºåˆ¤å®š:"Skill Judgement","æ‚Ÿæ€§50% + æ ¹éª¨30% + çµæ€§20%":"Comprehension 50% + Root Bone 30% + Spirituality 20%",ç¤¾äº¤åˆ¤å®š:"Social Judgement","é­…åŠ›50% + æ‚Ÿæ€§30% + å¿ƒæ€§20%":"Charm 50% + Comprehension 30% + Temperament 20%",æ¢ç´¢åˆ¤å®š:"Exploration Judgement","æ°”è¿50% + çµæ€§30% + æ‚Ÿæ€§20%":"Fortune 50% + Spirituality 30% + Comprehension 20%",å…­å¸å±æ€§è¯´æ˜:"Six Attributes",æå‡åˆ¤å®šæˆåŠŸç‡:"Improve Success Rate","å…ˆå¤©å…­å¸ï¼šå¤©èµ‹å†³å®šä¸Šé™ï¼Œæ— æ³•æ”¹å˜ä½†å½±å“æœ€å¤§":"Innate Attributes: Talent determines limits, unchangeable but most impactful","æå‡å¢ƒç•Œï¼šå¢ƒç•Œè¶Šé«˜ï¼Œåˆ¤å®šåŸºç¡€åŠ æˆè¶Šå¤§ï¼ˆç‚¼æ°”+5ï¼Œç­‘åŸº+12...ï¼‰":"Raise Realm: Higher realm gives greater base bonus (Qi Refining +5, Foundation +12...)","ä¿®ç‚¼åå¤©ï¼šåå¤©å…­å¸å¯æå‡ï¼Œä½†æƒé‡ä»…20%":"Cultivate Acquired: Can be improved, but only 20% weight","å­¦ä¹ åŠŸæ³•ï¼šé«˜å“è´¨åŠŸæ³•å’ŒæŠ€èƒ½ç†Ÿç»ƒåº¦æä¾›æ˜¾è‘—åŠ æˆ":"Learn Techniques: High-quality techniques and proficiency provide significant bonuses","è£…å¤‡æ³•å™¨ï¼šåˆé€‚çš„è£…å¤‡èƒ½å¤§å¹…æå‡åˆ¤å®šå€¼":"Equip Artifacts: Proper equipment greatly increases judgement value","çŠ¶æ€æ•ˆæœï¼šbuffå¢å¼ºåˆ¤å®šï¼Œæ³¨æ„é¿å…debuff":"Status Effects: Buffs enhance judgement, avoid debuffs","å¢ƒç•Œå‹åˆ¶ï¼šé«˜å¢ƒç•Œå¯¹ä½å¢ƒç•Œæœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œä½†ä¸æ˜¯ç»å¯¹":"Realm Suppression: Higher realm has advantage, but not absolute",é€ æˆä¼¤å®³:"Damage Dealt",å‰©ä½™æ°”è¡€:"Remaining Qi",ç³»ç»Ÿæç¤º:"System Notice","æ ¹æ®åˆ¤å®šç±»å‹åŠ æƒï¼ˆæˆ˜æ–—ï¼šæ ¹éª¨50%+çµæ€§30%+æ°”è¿20%ï¼Œä¿®ç‚¼ï¼šæ‚Ÿæ€§50%+çµæ€§30%+å¿ƒæ€§20%ï¼‰":"Weighted by judgement type (Combat: Root Bone 50%+Spirituality 30%+Fortune 20%, Cultivation: Comprehension 50%+Spirituality 30%+Temperament 20%)","å¯¹åº”åå¤©å…­å¸åŠ æƒ Ã· 5":"Corresponding acquired attributes weighted Ã· 5","ç‚¼æ°”5 | ç­‘åŸº12 | é‡‘ä¸¹20 | å…ƒå©´30...ï¼ˆé˜¶æ®µï¼šåˆæœŸ+0ï¼Œä¸­æœŸ+2ï¼ŒåæœŸ+4ï¼Œåœ†æ»¡+6ï¼‰":"Qi Refining 5 | Foundation 12 | Golden Core 20 | Nascent Soul 30... (Stage: Early +0, Mid +2, Late +4, Perfect +6)",è£…å¤‡æä¾›çš„åŠ æˆ:"Equipment bonuses","åŠŸæ³•å“è´¨+ç†Ÿç»ƒåº¦":"Technique quality + proficiency","buff/debuffæ•ˆæœ":"Buff/debuff effects","åˆ¤å®šå€¼ä¸éš¾åº¦å¯¹æ¯”ï¼Œå®Œå…¨åŸºäºå±æ€§ã€å¢ƒç•Œå’ŒåŠ æˆ":"Judgement value vs difficulty, based on attributes, realm and bonuses"};function l(){return{t:(e,t)=>{let n="zh"===i.value?e:s[e]||e;if(t)for(const e in t)n=n.replace(`{${e}}`,String(t[e]));return n},currentLanguage:i,setLanguage:e=>{i.value=e,localStorage.setItem("language",e)}}}},920:(e,t,n)=>{"use strict";var a=n(9675),r=n(8859),o=n(4803),i=n(507),s=n(2271)||i||o;e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new a("Side channel does not contain "+r(e))},delete:function(t){return!!e&&e.delete(t)},get:function(t){return e&&e.get(t)},has:function(t){return!!e&&e.has(t)},set:function(t,n){e||(e=s()),e.set(t,n)}};return t}},1002:e=>{"use strict";e.exports=Function.prototype.apply},1021:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.raw-data-section[data-v-2cab0dce] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n}\n.section-header[data-v-2cab0dce] {\n  margin-bottom: 1rem;\n  flex-shrink: 0;\n}\n.section-title[data-v-2cab0dce] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.raw-data-content[data-v-2cab0dce] {\n  flex: 1;\n  overflow: hidden;\n}\n.data-display[data-v-2cab0dce] {\n  height: 100%;\n  overflow: hidden;\n}\n.code-pre[data-v-2cab0dce] {\n  margin: 0;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  height: 100%;\n  overflow: auto;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.empty-state[data-v-2cab0dce] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 640px) {\n.raw-data-section[data-v-2cab0dce] {\n    padding: 0.75rem;\n}\n.section-title[data-v-2cab0dce] {\n    font-size: 1rem;\n    text-align: center;\n}\n.code-pre[data-v-2cab0dce] {\n    font-size: 0.75rem;\n    padding: 0.5rem;\n}\n.empty-state[data-v-2cab0dce] {\n    padding: 2rem 0.5rem;\n}\n}\n@media (max-width: 480px) {\n.raw-data-section[data-v-2cab0dce] {\n    padding: 0.5rem;\n}\n.section-title[data-v-2cab0dce] {\n    font-size: 0.9rem;\n}\n.code-pre[data-v-2cab0dce] {\n    font-size: 0.7rem;\n    padding: 0.4rem;\n}\n}\n",""]);const s=i},1022:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.modal-overlay[data-v-16e1f8a9] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(8px);\n  animation: fadeIn-16e1f8a9 0.2s ease-out;\n}\n.modal-dialog[data-v-16e1f8a9] {\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  overflow-y: auto;\n  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);\n  border: 2px solid rgba(139, 92, 246, 0.3);\n  border-radius: 16px;\n  box-shadow: 0 20px 60px rgba(139, 92, 246, 0.2);\n  animation: slideIn-16e1f8a9 0.3s ease-out;\n}\n.step-content[data-v-16e1f8a9] {\n  padding: 24px;\n}\n.modal-title[data-v-16e1f8a9] {\n  margin-top: 0;\n  color: #e2e8f0;\n  text-align: center;\n  margin-bottom: 0.5rem;\n  font-size: 1.2rem;\n  font-weight: 600;\n  background: linear-gradient(135deg, #a855f7, #8b5cf6);\n  background-clip: text;\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n.modal-subtitle[data-v-16e1f8a9] {\n  text-align: center;\n  color: #94a3b8;\n  margin-bottom: 1.5rem;\n  font-size: 0.9rem;\n  line-height: 1.4;\n}\n.form-group[data-v-16e1f8a9] {\n  margin-bottom: 1rem;\n}\n.code-input[data-v-16e1f8a9] {\n  width: 100%;\n  padding: 12px 16px;\n  background: rgba(0, 0, 0, 0.3);\n  border: 2px solid rgba(139, 92, 246, 0.2);\n  border-radius: 8px;\n  color: #e2e8f0;\n  font-size: 1rem;\n  box-sizing: border-box;\n  text-align: center;\n  transition: border-color 0.2s ease;\n}\n.code-input[data-v-16e1f8a9]:focus {\n  outline: none;\n  border-color: rgba(139, 92, 246, 0.5);\n  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);\n}\n.code-input[data-v-16e1f8a9]::placeholder {\n  color: #64748b;\n}\n.prompt-section[data-v-16e1f8a9] {\n  margin-bottom: 24px;\n}\n.prompt-label[data-v-16e1f8a9] {\n  display: block;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #e2e8f0;\n  margin-bottom: 8px;\n}\n.prompt-input[data-v-16e1f8a9] {\n  width: 100%;\n  padding: 12px;\n  background: rgba(0, 0, 0, 0.3);\n  border: 2px solid rgba(139, 92, 246, 0.2);\n  border-radius: 8px;\n  color: #e2e8f0;\n  font-size: 0.9rem;\n  line-height: 1.4;\n  resize: vertical;\n  min-height: 100px;\n  transition: border-color 0.2s ease;\n  font-family: inherit;\n  box-sizing: border-box;\n}\n.prompt-input[data-v-16e1f8a9]:focus {\n  outline: none;\n  border-color: rgba(139, 92, 246, 0.5);\n  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);\n}\n.prompt-input[data-v-16e1f8a9]::placeholder {\n  color: #64748b;\n}\n.char-count[data-v-16e1f8a9] {\n  text-align: right;\n  font-size: 0.7rem;\n  color: #64748b;\n  margin-top: 4px;\n}\n.suggested-prompts[data-v-16e1f8a9] {\n  margin-bottom: 24px;\n}\n.suggestions-title[data-v-16e1f8a9] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #cbd5e1;\n  margin-bottom: 12px;\n}\n.suggestions-grid[data-v-16e1f8a9] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 8px;\n}\n.suggestion-button[data-v-16e1f8a9] {\n  padding: 8px 12px;\n  background: rgba(139, 92, 246, 0.1);\n  border: 1px solid rgba(139, 92, 246, 0.3);\n  border-radius: 6px;\n  color: #cbd5e1;\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  text-align: left;\n  line-height: 1.3;\n}\n.suggestion-button[data-v-16e1f8a9]:hover {\n  background: rgba(139, 92, 246, 0.2);\n  border-color: rgba(139, 92, 246, 0.5);\n  color: #e2e8f0;\n  transform: translateY(-1px);\n}\n.error-message[data-v-16e1f8a9] {\n  color: #ef4444;\n  text-align: center;\n  margin-bottom: 1rem;\n  min-height: 1.2em;\n  font-size: 0.85rem;\n}\n.form-actions[data-v-16e1f8a9] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  margin-top: 1.5rem;\n}\n.btn[data-v-16e1f8a9] {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: linear-gradient(135deg, #8b5cf6, #a855f7);\n  color: white;\n}\n.btn[data-v-16e1f8a9]:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);\n}\n.btn[data-v-16e1f8a9]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n.btn-secondary[data-v-16e1f8a9] {\n  background: rgba(100, 116, 139, 0.2);\n  color: #cbd5e1;\n}\n.btn-secondary[data-v-16e1f8a9]:hover {\n  background: rgba(100, 116, 139, 0.3);\n  color: #e2e8f0;\n}\n@keyframes fadeIn-16e1f8a9 {\nfrom { opacity: 0;\n}\nto { opacity: 1;\n}\n}\n@keyframes slideIn-16e1f8a9 {\nfrom { \n    opacity: 0;\n    transform: translateY(-20px) scale(0.95);\n}\nto { \n    opacity: 1;\n    transform: translateY(0) scale(1);\n}\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é… */\n[data-theme="dark"] .modal-dialog[data-v-16e1f8a9] {\n  background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);\n  border-color: rgba(139, 92, 246, 0.4);\n}\n[data-theme="dark"] .code-input[data-v-16e1f8a9],\n[data-theme="dark"] .prompt-input[data-v-16e1f8a9] {\n  background: rgba(0, 0, 0, 0.5);\n  border-color: rgba(139, 92, 246, 0.3);\n}\n[data-theme="dark"] .suggestion-button[data-v-16e1f8a9] {\n  background: rgba(139, 92, 246, 0.15);\n  border-color: rgba(139, 92, 246, 0.4);\n}\n@media (max-width: 480px) {\n.modal-dialog[data-v-16e1f8a9] {\n    padding: 1.5rem 1rem;\n    width: 95%;\n    max-height: 90vh;\n}\n.modal-title[data-v-16e1f8a9] {\n    font-size: 1.1rem;\n}\n.form-actions[data-v-16e1f8a9] {\n    flex-direction: column-reverse;\n    gap: 0.5rem;\n}\n.form-actions .btn[data-v-16e1f8a9] {\n    width: 100%;\n}\n.suggestions-grid[data-v-16e1f8a9] {\n    grid-template-columns: 1fr;\n}\n}\n',""]);const s=i},1040:(e,t,n)=>{"use strict";function a(){const e=document;return document.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||null}function r(){try{return window.self!==window.top}catch{return!0}}async function o(e){const t=e||document.documentElement;if(!t)throw new Error("No element to request fullscreen.");if("function"!=typeof t.requestFullscreen)if("function"!=typeof t.webkitRequestFullscreen)if("function"!=typeof t.mozRequestFullScreen){if("function"!=typeof t.msRequestFullscreen)throw new Error("Fullscreen API not supported in this browser/environment.");await t.msRequestFullscreen()}else await t.mozRequestFullScreen();else await t.webkitRequestFullscreen();else await t.requestFullscreen()}async function i(){const e=document;if("function"!=typeof document.exitFullscreen)if("function"!=typeof e.webkitExitFullscreen)if("function"!=typeof e.mozCancelFullScreen){if("function"!=typeof e.msExitFullscreen)throw new Error("Exit fullscreen not supported in this browser/environment.");await e.msExitFullscreen()}else await e.mozCancelFullScreen();else await e.webkitExitFullscreen();else await document.exitFullscreen()}function s(e){const t=e,n=String(t?.name||""),a=String(t?.message||""),o=("undefined"!=typeof navigator?navigator.userAgent:"").toLowerCase(),i=/iphone|ipad|ipod/.test(o),s=o.includes("safari")&&!o.includes("crios")&&!o.includes("fxios")&&!o.includes("edgios");return"TypeError"===n?"å½“å‰æµè§ˆå™¨/ç¯å¢ƒä¸æ”¯æŒå…¨å± APIï¼ˆiOS Safari ç½‘é¡µé€šå¸¸æ— æ³•å…¨å±ï¼›åµŒå…¥å¼WebViewä¹Ÿå¯èƒ½ç¦ç”¨ï¼‰ã€‚":a.toLowerCase().includes("not supported")||a.toLowerCase().includes("not supported in this browser")?r()?'åµŒå…¥ç¯å¢ƒå¯èƒ½ä¸æ”¯æŒæˆ–æœªå…è®¸å…¨å±ï¼ˆéœ€è¦ allowfullscreen / allow="fullscreen"ï¼‰ã€‚å»ºè®®åœ¨æµè§ˆå™¨æ–°æ ‡ç­¾æ‰“å¼€å†å…¨å±ã€‚':i&&s?"iOS Safari ç½‘é¡µé€šå¸¸æ— æ³•è¿›å…¥å…¨å±ï¼ˆé™¤è§†é¢‘æ’­æ”¾å™¨ï¼‰ã€‚å»ºè®®ä½¿ç”¨å…¶ä»–æµè§ˆå™¨æˆ–ä»¥â€œæ·»åŠ åˆ°ä¸»å±å¹•/PWAâ€æ–¹å¼æ‰“å¼€ã€‚":"å½“å‰æµè§ˆå™¨/ç¯å¢ƒä¸æ”¯æŒå…¨å± APIã€‚":"NotAllowedError"===n||"SecurityError"===n?r()?'å½“å‰ä¸ºåµŒå…¥ç¯å¢ƒï¼Œiframe å¯èƒ½æœªå…è®¸å…¨å±ï¼ˆéœ€è¦ allowfullscreen / allow="fullscreen"ï¼‰ã€‚å»ºè®®åœ¨æµè§ˆå™¨æ–°æ ‡ç­¾æ‰“å¼€å†å…¨å±ã€‚':"æµè§ˆå™¨é˜»æ­¢è¿›å…¥å…¨å±ï¼šéœ€è¦ç”¨æˆ·æ‰‹åŠ¿è§¦å‘ï¼Œæˆ–ç«™ç‚¹æƒé™ç­–ç•¥ç¦æ­¢ã€‚":a.toLowerCase().includes("fullscreen")?`å…¨å±å¤±è´¥ï¼š${a}`:"æ— æ³•è¿›å…¥å…¨å±æ¨¡å¼ï¼ˆå¯èƒ½è¢«æµè§ˆå™¨æˆ–åµŒå…¥ç¯å¢ƒé™åˆ¶ï¼‰ã€‚"}n.d(t,{Eh:()=>i,Kn:()=>a,lh:()=>o,zp:()=>s})},1064:(e,t,n)=>{"use strict";var a=n(9612);e.exports=a.getPrototypeOf||null},1113:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},1153:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.overlay[data-v-a2196f8c] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  z-index: 2000;\n}\n.modal[data-v-a2196f8c] {\n  width: min(980px, 100%);\n  max-height: 85vh;\n  overflow: hidden;\n  border-radius: 14px;\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  background: rgba(15, 23, 42, 0.92);\n  box-shadow: 0 25px 60px rgba(0, 0, 0, 0.55);\n  color: #e2e8f0;\n  display: flex;\n  flex-direction: column;\n}\n.header[data-v-a2196f8c] {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 1rem;\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n}\n.title h3[data-v-a2196f8c] {\n  margin: 0;\n  font-size: 1.2rem;\n}\n.subtitle[data-v-a2196f8c] {\n  margin: 0.35rem 0 0;\n  color: rgba(148, 163, 184, 0.95);\n  font-size: 0.92rem;\n}\n.icon-btn[data-v-a2196f8c] {\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  background: rgba(30, 41, 59, 0.55);\n  color: #e2e8f0;\n  width: 34px;\n  height: 34px;\n  border-radius: 10px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.1rem;\n}\n.body[data-v-a2196f8c] {\n  display: grid;\n  grid-template-columns: 340px 1fr;\n  gap: 0;\n  min-height: 0;\n  flex: 1;\n}\n.left[data-v-a2196f8c] {\n  border-right: 1px solid rgba(255, 255, 255, 0.08);\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n}\n.left-actions[data-v-a2196f8c] {\n  padding: 0.9rem 0.9rem 0.75rem;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n}\n.rule-list[data-v-a2196f8c] {\n  padding: 0.75rem;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  overflow: auto;\n  min-height: 0;\n}\n.rule-item[data-v-a2196f8c] {\n  border: 1px solid rgba(255, 255, 255, 0.10);\n  background: rgba(30, 41, 59, 0.40);\n  border-radius: 12px;\n  padding: 10px 10px;\n  cursor: pointer;\n  text-align: left;\n  color: inherit;\n}\n.rule-item.active[data-v-a2196f8c] {\n  border-color: rgba(147, 197, 253, 0.28);\n  background: rgba(51, 65, 85, 0.45);\n}\n.rule-row[data-v-a2196f8c] {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  margin-bottom: 6px;\n}\n.rule-badge[data-v-a2196f8c] {\n  font-size: 0.75rem;\n  padding: 2px 8px;\n  border-radius: 999px;\n  border: 1px solid rgba(34, 197, 94, 0.30);\n  color: rgba(34, 197, 94, 0.95);\n}\n.rule-badge.off[data-v-a2196f8c] {\n  border-color: rgba(148, 163, 184, 0.25);\n  color: rgba(148, 163, 184, 0.95);\n}\n.rule-mode[data-v-a2196f8c] {\n  font-size: 0.75rem;\n  color: rgba(148, 163, 184, 0.95);\n}\n.rule-pattern[data-v-a2196f8c] {\n  font-size: 0.9rem;\n  color: #e2e8f0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.rule-repl[data-v-a2196f8c] {\n  margin-top: 4px;\n  font-size: 0.82rem;\n  color: rgba(148, 163, 184, 0.95);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.right[data-v-a2196f8c] {\n  padding: 1rem 1.25rem;\n  overflow: auto;\n  min-height: 0;\n}\n.editor[data-v-a2196f8c] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.editor-row[data-v-a2196f8c] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.editor-row-vertical[data-v-a2196f8c] {\n  align-items: flex-start;\n  flex-direction: column;\n}\n.label[data-v-a2196f8c] {\n  width: 90px;\n  color: rgba(148, 163, 184, 0.95);\n  font-size: 0.9rem;\n}\n.select[data-v-a2196f8c] {\n  width: 220px;\n  border-radius: 10px;\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  background: rgba(30, 41, 59, 0.55);\n  color: #e2e8f0;\n  padding: 10px 12px;\n}\n.textarea[data-v-a2196f8c] {\n  width: 100%;\n  border-radius: 12px;\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  background: rgba(30, 41, 59, 0.40);\n  color: #e2e8f0;\n  padding: 10px 12px;\n  resize: vertical;\n}\n.hint[data-v-a2196f8c] {\n  margin-top: 8px;\n  color: rgba(148, 163, 184, 0.95);\n  font-size: 0.9rem;\n}\n.hint code[data-v-a2196f8c] {\n  padding: 1px 6px;\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 6px;\n  background: rgba(30, 41, 59, 0.6);\n}\n.options[data-v-a2196f8c] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px 16px;\n  padding: 0.5rem 0;\n}\n.opt[data-v-a2196f8c] {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  color: rgba(226, 232, 240, 0.95);\n}\n.opt.disabled[data-v-a2196f8c] {\n  opacity: 0.6;\n}\n.error[data-v-a2196f8c] {\n  padding: 10px 12px;\n  border-radius: 12px;\n  border: 1px solid rgba(239, 68, 68, 0.25);\n  background: rgba(127, 29, 29, 0.25);\n  color: rgba(254, 202, 202, 0.95);\n}\n.editor-actions[data-v-a2196f8c] {\n  display: flex;\n  gap: 10px;\n  padding-top: 6px;\n}\n.footer[data-v-a2196f8c] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  padding: 1rem 1.25rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.08);\n}\n.btn[data-v-a2196f8c] {\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  background: rgba(30, 41, 59, 0.55);\n  color: #e2e8f0;\n  padding: 10px 12px;\n  border-radius: 12px;\n  cursor: pointer;\n}\n.btn[data-v-a2196f8c]:hover {\n  background: rgba(51, 65, 85, 0.75);\n}\n.btn[data-v-a2196f8c]:disabled {\n  opacity: 0.55;\n  cursor: not-allowed;\n}\n.btn-secondary[data-v-a2196f8c] {\n  background: rgba(30, 41, 59, 0.40);\n}\n.btn-danger[data-v-a2196f8c] {\n  border-color: rgba(239, 68, 68, 0.25);\n}\n.btn-danger[data-v-a2196f8c]:hover {\n  background: rgba(127, 29, 29, 0.35);\n  border-color: rgba(239, 68, 68, 0.45);\n}\n.empty[data-v-a2196f8c] {\n  color: rgba(148, 163, 184, 0.95);\n  padding: 2rem 1rem;\n}\n@media (max-width: 900px) {\n.body[data-v-a2196f8c] {\n    grid-template-columns: 1fr;\n}\n.left[data-v-a2196f8c] {\n    border-right: none;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.08);\n}\n}\n",""]);const s=i},1184:(e,t,n)=>{"use strict";n.d(t,{useGameStateStore:()=>c});var a=n(810),r=n(2224),o=n(6728),i=n(8651),s=n(6585),l=n(4530);const c=(0,a.nY)("gameState",{state:()=>({saveMeta:null,onlineState:null,userSettings:null,character:null,attributes:null,location:null,inventory:null,equipment:null,relationships:null,worldInfo:null,sectSystem:null,sectMemberInfo:null,memory:null,gameTime:null,narrativeHistory:[],isGameLoaded:!1,thousandDao:null,questSystem:{é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}},cultivationTechnique:null,cultivation:null,techniqueSystem:null,skillState:null,effects:[],masteredSkills:null,systemConfig:null,bodyPartDevelopment:null,timeBasedSaveEnabled:!1,timeBasedSaveInterval:10,lastTimeBasedSave:null,conversationAutoSaveEnabled:!0}),actions:{async loadGame(e,t){console.log(`[GameState] Loading game for character ${e}, slot ${t}`);const{useCharacterStore:a}=await Promise.resolve().then(n.bind(n,4582)),r=a();if(!r.rootState.è§’è‰²åˆ—è¡¨[e])return void console.error(`[GameState] Character ${e} not found`);const o=await r.loadSaveData(e,t);o?(this.loadFromSaveData(o),console.log("[GameState] Game loaded successfully")):console.error(`[GameState] No save data found for character ${e}, slot ${t}`)},async saveGame(){if(!this.isGameLoaded)return void console.warn("[GameState] Game not loaded, skipping save.");console.log("[GameState] Saving game state...");const{useCharacterStore:e}=await Promise.resolve().then(n.bind(n,4582)),t=e();await t.saveCurrentGame(),console.log("[GameState] Game saved successfully")},loadFromSaveData(e){const t=(0,l.ru)(e)?e:(0,l.jj)(e).migrated,n=e=>JSON.parse(JSON.stringify(e));this.saveMeta=t?.å…ƒæ•°æ®?n(t.å…ƒæ•°æ®):null,this.onlineState=t?.ç³»ç»Ÿ?.è”æœº?n(t.ç³»ç»Ÿ.è”æœº):null,this.userSettings=t?.ç³»ç»Ÿ?.è®¾ç½®?n(t.ç³»ç»Ÿ.è®¾ç½®):null;const a=(e,t)=>{if(!e||"object"!=typeof e)return;const n=e[t];if(null!=n)if("string"!=typeof n){if("object"==typeof n){const a=String(n.quality??n.å“è´¨??n.å“é˜¶??"");if(!a)return;e[t]=a.endsWith("å“")?a:`${a}å“`}}else n&&!n.endsWith("å“")&&(e[t]=`${n}å“`)},r=t?.è§’è‰²?.èº«ä»½?n(t.è§’è‰².èº«ä»½):null,o=t?.è§’è‰²?.å±æ€§?n(t.è§’è‰².å±æ€§):null,c=t?.è§’è‰²?.ä½ç½®?n(t.è§’è‰².ä½ç½®):null,d=t?.è§’è‰²?.èƒŒåŒ…?n(t.è§’è‰².èƒŒåŒ…):null,u=t?.è§’è‰²?.è£…å¤‡?n(t.è§’è‰².è£…å¤‡):null,m=t?.ç¤¾äº¤?.å…³ç³»?n(t.ç¤¾äº¤.å…³ç³»):null,p=t?.ä¸–ç•Œ?.ä¿¡æ¯?n(t.ä¸–ç•Œ.ä¿¡æ¯):null,f=t?.ç¤¾äº¤?.å®—é—¨?n(t.ç¤¾äº¤.å®—é—¨):null,g=t?.ç¤¾äº¤?.å®—é—¨?.æˆå‘˜ä¿¡æ¯?n(t.ç¤¾äº¤.å®—é—¨.æˆå‘˜ä¿¡æ¯):null,h=t?.ç¤¾äº¤?.è®°å¿†?n(t.ç¤¾äº¤.è®°å¿†):null,v=t?.å…ƒæ•°æ®?.æ—¶é—´?n(t.å…ƒæ•°æ®.æ—¶é—´):null,b=Array.isArray(t?.ç³»ç»Ÿ?.å†å²?.å™äº‹)?n(t.ç³»ç»Ÿ.å†å².å™äº‹):[],y=t?.è§’è‰²?.å¤§é“?n(t.è§’è‰².å¤§é“):null,x=t?.ç¤¾äº¤?.ä»»åŠ¡?n(t.ç¤¾äº¤.ä»»åŠ¡):null,k=t?.è§’è‰²?.ä¿®ç‚¼?n(t.è§’è‰².ä¿®ç‚¼):null,w=t?.è§’è‰²?.åŠŸæ³•?n(t.è§’è‰².åŠŸæ³•):null,E=t?.è§’è‰²?.æŠ€èƒ½?n(t.è§’è‰².æŠ€èƒ½):null,N=Array.isArray(t?.è§’è‰²?.æ•ˆæœ)?n(t.è§’è‰².æ•ˆæœ):[],S=t?.ç³»ç»Ÿ?.é…ç½®?n(t.ç³»ç»Ÿ.é…ç½®):null,V=t?.è§’è‰²?.èº«ä½“?.éƒ¨ä½å¼€å‘?n(t.è§’è‰².èº«ä½“.éƒ¨ä½å¼€å‘):null;this.character=r,this.attributes=o,this.location=c,this.character?.çµæ ¹&&"object"==typeof this.character.çµæ ¹&&a(this.character.çµæ ¹,"tier"),this.attributes?.å¢ƒç•Œ&&"object"==typeof this.attributes.å¢ƒç•Œ&&(a(this.attributes.å¢ƒç•Œ,"å“è´¨"),a(this.attributes.å¢ƒç•Œ,"å“é˜¶")),this.inventory=d,this.equipment=u,this.relationships=m,this.worldInfo=p,this.sectSystem=f,this.sectMemberInfo=g,this.memory=h,this.gameTime=v,this.narrativeHistory=b,this.thousandDao=y?n(y):null,this.questSystem=x?n(x):{é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}},this.cultivation=k?n(k):null,this.cultivationTechnique=this.cultivation?.ä¿®ç‚¼åŠŸæ³•??null,this.techniqueSystem=w?n(w):null,this.skillState=E?n(E):null,this.masteredSkills=this.skillState?.æŒæ¡æŠ€èƒ½?n(this.skillState.æŒæ¡æŠ€èƒ½):n(t?.ç³»ç»Ÿ?.ç¼“å­˜?.æŒæ¡æŠ€èƒ½??[]),this.effects=Array.isArray(N)?n(N):[],this.systemConfig=S?n(S):null,(0,i.isTavernEnv)()&&this.systemConfig&&(this.systemConfig=(0,s.Md)(this.systemConfig)),this.bodyPartDevelopment=V?n(V):null,this.skillState||(this.skillState={æŒæ¡æŠ€èƒ½:this.masteredSkills??[],è£…å¤‡æ :[],å†·å´:{}}),this.cultivation||(this.cultivation={ä¿®ç‚¼åŠŸæ³•:this.cultivationTechnique??null}),this.isGameLoaded=!0},toSaveData(){if(!(this.character&&this.attributes&&this.location&&this.inventory&&this.relationships&&this.memory&&this.gameTime&&this.equipment))return null;const e=e=>JSON.parse(JSON.stringify(e)),t=function(e){const t={},n=e?.ç‰©å“||{};return Object.values(n).forEach(e=>{if("åŠŸæ³•"!==e?.ç±»å‹)return;const n=e.ç‰©å“ID;n&&(t[n]={ç†Ÿç»ƒåº¦:Number(e.ä¿®ç‚¼è¿›åº¦??e.ç†Ÿç»ƒåº¦??0),å·²è§£é”æŠ€èƒ½:Array.isArray(e.å·²è§£é”æŠ€èƒ½)?e.å·²è§£é”æŠ€èƒ½:[]})}),t}(this.inventory),n=this.cultivationTechnique?.ç‰©å“ID??null,a={...this.techniqueSystem||{},å½“å‰åŠŸæ³•ID:this.techniqueSystem?.å½“å‰åŠŸæ³•ID??n,åŠŸæ³•è¿›åº¦:this.techniqueSystem?.åŠŸæ³•è¿›åº¦??t,åŠŸæ³•å¥—è£…:this.techniqueSystem?.åŠŸæ³•å¥—è£…??{ä¸»ä¿®:null,è¾…ä¿®:[]}},r={...this.skillState||{},æŒæ¡æŠ€èƒ½:this.skillState?.æŒæ¡æŠ€èƒ½??this.masteredSkills??[],è£…å¤‡æ :this.skillState?.è£…å¤‡æ ??[],å†·å´:this.skillState?.å†·å´??{}},i={...this.cultivation||{},ä¿®ç‚¼åŠŸæ³•:this.cultivation?.ä¿®ç‚¼åŠŸæ³•??this.cultivationTechnique??null},s=(new Date).toISOString(),l={...this.saveMeta||{},ç‰ˆæœ¬å·:3,å­˜æ¡£ID:this.saveMeta?.å­˜æ¡£ID??`save_${Date.now()}`,å­˜æ¡£å:this.saveMeta?.å­˜æ¡£å??"è‡ªåŠ¨å­˜æ¡£",æ¸¸æˆç‰ˆæœ¬:this.saveMeta?.æ¸¸æˆç‰ˆæœ¬,åˆ›å»ºæ—¶é—´:this.saveMeta?.åˆ›å»ºæ—¶é—´??s,æ›´æ–°æ—¶é—´:s,æ¸¸æˆæ—¶é•¿ç§’:Number(this.saveMeta?.æ¸¸æˆæ—¶é•¿ç§’??0),æ—¶é—´:this.gameTime},c=this.thousandDao&&"object"==typeof this.thousandDao&&this.thousandDao.å¤§é“åˆ—è¡¨?this.thousandDao:{å¤§é“åˆ—è¡¨:{}},d=this.sectSystem||this.sectMemberInfo?{...this.sectSystem||{},...this.sectMemberInfo?{æˆå‘˜ä¿¡æ¯:this.sectMemberInfo}:{}}:null,u=this.userSettings??{timeBasedSaveEnabled:this.timeBasedSaveEnabled,timeBasedSaveInterval:this.timeBasedSaveInterval,conversationAutoSaveEnabled:this.conversationAutoSaveEnabled},m=this.onlineState??{æ¨¡å¼:"å•æœº",æˆ¿é—´ID:null,ç©å®¶ID:null,åªè¯»è·¯å¾„:["ä¸–ç•Œ"],ä¸–ç•Œæ›å…‰:!1,å†²çªç­–ç•¥:"æœåŠ¡å™¨"},p={å…ƒæ•°æ®:l,è§’è‰²:{èº«ä»½:this.character,å±æ€§:this.attributes,ä½ç½®:this.location,æ•ˆæœ:this.effects??[],èº«ä½“:this.bodyPartDevelopment?{éƒ¨ä½å¼€å‘:this.bodyPartDevelopment}:void 0,èƒŒåŒ…:this.inventory,è£…å¤‡:this.equipment,åŠŸæ³•:a,ä¿®ç‚¼:i,å¤§é“:c,æŠ€èƒ½:r},ç¤¾äº¤:{å…³ç³»:this.relationships??{},å®—é—¨:d,ä»»åŠ¡:this.questSystem,è®°å¿†:this.memory},ä¸–ç•Œ:{ä¿¡æ¯:this.worldInfo??{},çŠ¶æ€:{}},ç³»ç»Ÿ:{é…ç½®:this.systemConfig??{},è®¾ç½®:u,ç¼“å­˜:{æŒæ¡æŠ€èƒ½:this.masteredSkills??r?.æŒæ¡æŠ€èƒ½??[]},å†å²:{å™äº‹:this.narrativeHistory||[]},æ‰©å±•:{},è”æœº:m}};try{const t=(0,o.MH)(this.character.å…ˆå¤©å…­å¸,p),n={...this.character,åå¤©å…­å¸:t.åå¤©å…­å¸};return console.log("[toSaveData] åå¤©å…­å¸(åŠ¨æ€è®¡ç®—):",t.åå¤©å…­å¸),e({...p,è§’è‰²:{...p.è§’è‰²,èº«ä»½:n}})}catch(t){return console.error("[toSaveData] åŠ¨æ€è®¡ç®—åå¤©å…­å¸å¤±è´¥ï¼Œå›é€€ä¸ºåŸå§‹æ•°æ®:",t),e(p)}},updatePlayerStatus(e){this.attributes&&(this.attributes={...this.attributes,...e})},updateLocation(e){this.location&&(this.location={...this.location,...e})},updateInventory(e){this.inventory&&(this.inventory={...this.inventory,...e})},updateRelationship(e,t){this.relationships&&this.relationships[e]&&(this.relationships[e]={...this.relationships[e],...t})},advanceGameTime(e){if(this.gameTime){if(this.gameTime.åˆ†é’Ÿ+=e,this.gameTime.åˆ†é’Ÿ>=60){const e=Math.floor(this.gameTime.åˆ†é’Ÿ/60);this.gameTime.åˆ†é’Ÿ=this.gameTime.åˆ†é’Ÿ%60,this.gameTime.å°æ—¶+=e}if(this.gameTime.å°æ—¶>=24){const e=Math.floor(this.gameTime.å°æ—¶/24);this.gameTime.å°æ—¶=this.gameTime.å°æ—¶%24,this.gameTime.æ—¥+=e}if(this.gameTime.æ—¥>30){const e=Math.floor((this.gameTime.æ—¥-1)/30);this.gameTime.æ—¥=(this.gameTime.æ—¥-1)%30+1,this.gameTime.æœˆ+=e}if(this.gameTime.æœˆ>12){const e=Math.floor((this.gameTime.æœˆ-1)/12);this.gameTime.æœˆ=(this.gameTime.æœˆ-1)%12+1,this.gameTime.å¹´+=e}}},resetState(){this.saveMeta=null,this.onlineState=null,this.userSettings=null,this.character=null,this.attributes=null,this.location=null,this.inventory=null,this.equipment=null,this.relationships=null,this.worldInfo=null,this.sectSystem=null,this.sectMemberInfo=null,this.memory=null,this.gameTime=null,this.narrativeHistory=[],this.isGameLoaded=!1,this.thousandDao=null,this.questSystem={é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}},this.cultivationTechnique=null,this.cultivation=null,this.techniqueSystem=null,this.skillState=null,this.effects=[],this.masteredSkills=null,this.systemConfig=null,this.bodyPartDevelopment=null,console.log("[GameState] State has been reset")},async saveAfterConversation(){if(!this.isGameLoaded)return void console.warn("[GameState] Game not loaded, skipping save");console.log("[GameState] Saving after conversation...");const{useCharacterStore:e}=await Promise.resolve().then(n.bind(n,4582)),t=e();await t.saveCurrentGame(),await this.checkAndCreateTimeBasedSave()},async checkAndCreateTimeBasedSave(){if(!this.timeBasedSaveEnabled)return;const e=Date.now(),t=60*this.timeBasedSaveInterval*1e3;if(this.lastTimeBasedSave&&e-this.lastTimeBasedSave<t)return;console.log("[GameState] Updating time-based save slot...");const{useCharacterStore:a}=await Promise.resolve().then(n.bind(n,4582)),r=a();await r.saveToSlot("æ—¶é—´ç‚¹å­˜æ¡£"),this.lastTimeBasedSave=e,console.log("[GameState] Time-based save slot updated: æ—¶é—´ç‚¹å­˜æ¡£")},async saveBeforeExit(){this.isGameLoaded&&(console.log("[GameState] Saving before exit..."),await this.saveGame())},setTimeBasedSaveInterval(e){e<1?console.warn("[GameState] Invalid interval, must be at least 1 minute"):(this.timeBasedSaveInterval=e,console.log(`[GameState] Time-based save interval set to ${e} minutes`))},setTimeBasedSaveEnabled(e){this.timeBasedSaveEnabled=e,console.log("[GameState] Time-based save "+(e?"enabled":"disabled"))},setConversationAutoSaveEnabled(e){this.conversationAutoSaveEnabled=e,console.log("[GameState] Conversation auto save "+(e?"enabled":"disabled"))},getCurrentSaveData(){return this.toSaveData()},updateState(e,t){console.log(`[è¯Šæ–­-updateState] å¼€å§‹æ›´æ–°è·¯å¾„: ${e}`),console.log("[è¯Šæ–­-updateState] è¦è®¾ç½®çš„å€¼:",t);const n=e.split("."),a=n[0];if(console.log("[è¯Šæ–­-updateState] rootKey:",a),console.log("[è¯Šæ–­-updateState] è·¯å¾„éƒ¨åˆ†:",n),1===n.length)return this[a]=t,void console.log("[è¯Šæ–­-updateState] é¡¶å±‚å±æ€§ç›´æ¥è®¾ç½®å®Œæˆ");const o=this[a];if(console.log("[è¯Šæ–­-updateState] å½“å‰rootKeyçš„å€¼:",o),o&&"object"==typeof o){const i=(0,r.cloneDeep)(o);console.log("[è¯Šæ–­-updateState] æ·±æ‹·è´åçš„clonedRoot:",i);const s=n.slice(1).join(".");console.log("[è¯Šæ–­-updateState] åµŒå¥—è·¯å¾„:",s),console.log("[è¯Šæ–­-updateState] setå‰çš„valueç±»å‹:",typeof t,"value:",t),(0,r.set)(i,s,t),console.log("[è¯Šæ–­-updateState] lodash setåçš„clonedRoot:",i),console.log("[è¯Šæ–­-updateState] setåæ£€æŸ¥å®é™…å€¼:",(0,r.get)(i,s)),this.$patch({[a]:i}),console.log("[è¯Šæ–­-updateState] å·²é€šè¿‡$patchæ›´æ–°rootå¯¹è±¡"),console.log(`[gameStateStore] âœ… å·²æ›´æ–° ${e} = ${JSON.stringify(t).substring(0,100)}`)}else console.log("[è¯Šæ–­-updateState] currentRootä¸æ˜¯å¯¹è±¡ï¼Œç›´æ¥è®¾ç½®"),(0,r.set)(this,e,t)},addToShortTermMemory(e){this.memory||(this.memory={çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]}),Array.isArray(this.memory.çŸ­æœŸè®°å¿†)||(this.memory.çŸ­æœŸè®°å¿†=[]),Array.isArray(this.memory.ä¸­æœŸè®°å¿†)||(this.memory.ä¸­æœŸè®°å¿†=[]),Array.isArray(this.memory.éšå¼ä¸­æœŸè®°å¿†)||(this.memory.éšå¼ä¸­æœŸè®°å¿†=[]);const t=this.gameTime,n=t?.åˆ†é’Ÿ??0,a=t?`ã€ä»™é“${t.å¹´}å¹´${t.æœˆ}æœˆ${t.æ—¥}æ—¥ ${String(t.å°æ—¶).padStart(2,"0")}:${String(n).padStart(2,"0")}ã€‘`:"ã€æœªçŸ¥æ—¶é—´ã€‘",r=e.startsWith("ã€ä»™é“")||e.startsWith("ã€æœªçŸ¥æ—¶é—´ã€‘")||e.startsWith("ã€ä»™å†")?e:`${a}${e}`;this.memory.çŸ­æœŸè®°å¿†.unshift(r),this.memory.éšå¼ä¸­æœŸè®°å¿†.unshift(r);const o=(()=>{try{const e=localStorage.getItem("memory-settings");return e&&JSON.parse(e).maxShortTerm||3}catch{return 3}})();for(;this.memory.çŸ­æœŸè®°å¿†.length>o;){this.memory.çŸ­æœŸè®°å¿†.pop();const e=this.memory.éšå¼ä¸­æœŸè®°å¿†.pop();e&&!this.memory.ä¸­æœŸè®°å¿†.includes(e)&&(this.memory.ä¸­æœŸè®°å¿†.push(e),console.log("[gameStateStore] âœ… çŸ­æœŸè®°å¿†æº¢å‡ºï¼Œå·²è½¬ç§»åˆ°ä¸­æœŸè®°å¿†"))}console.log("[gameStateStore] âœ… å·²æ·»åŠ åˆ°çŸ­æœŸè®°å¿†",r.substring(0,50)+"...")}}})},1208:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"/* --- Design Tokens (The Alchemist's Formula) --- */\n:root {\n  /* --- Light Theme Colors (æŸ”å’ŒæŠ¤çœ¼ç‰ˆ) --- */\n  --color-background: #e1ddd4; /* æ£ç±³è‰²åŸºåº•ï¼Œæ›´è½»æŸ” */\n  --color-background-transparent: rgba(225, 221, 212, 0.9);\n  --color-surface: #f1eee7; /* ä¸»é¢æ¿æ›´äº®ï¼Œä½†ä¸è¿‡åˆ†åˆºçœ¼ */\n  --color-surface-transparent: rgba(241, 238, 231, 0.82);\n  --color-surface-light: #e7e3db; /* ç•¥æ·±ä¸€æ¡£åšå±‚æ¬¡ */\n  /* Derived/interactive states (light) */\n  --color-surface-hover: #ebe7df; /* æ‚¬æµ®æ—¶çš„æŸ”å’Œè‰² */\n  --color-primary: #1e4a9a; /* æ›´æ·±çš„ä¸»è‰²è°ƒ */\n  --color-primary-rgb: 30, 74, 154;\n  --color-primary-hover: #163d82;\n  --color-primary-active: #0f2f6a;\n  /* Lighten variant used by some components */\n  --color-primary-light: rgba(30, 74, 154, 0.15);\n  --color-accent: #2e8b57; /* ç¿ ç‰ç»¿ - ä¿®ä»™é£æ ¼ */\n  --color-accent-hover: #267349;\n  --color-accent-light: rgba(46, 139, 87, 0.18);\n  --color-text: #1a1a1a;\n  --color-text-secondary: #4a4a4a; /* æ›´æ·±ï¼Œæé«˜å¯¹æ¯”åº¦ */\n  --color-text-muted: #5a5a5a; /* æ›´æ·±ï¼Œæé«˜å¯¹æ¯”åº¦ */\n  --color-white-soft: #f1eee7; /* æŸ”å’Œçš„ç™½è‰² */\n  --color-border: rgba(0, 0, 0, 0.15); /* æ›´æ˜æ˜¾çš„è¾¹æ¡† */\n  --color-border-hover: rgba(0, 0, 0, 0.28);\n  --color-success: #2e8b32; /* æ›´æ·±çš„ç»¿è‰²ï¼Œæé«˜å¯è¯»æ€§ */\n  --color-success-hover: #267529;\n  --color-warning: #e68a00; /* æ›´æ·±çš„æ©™è‰² */\n  --color-warning-hover: #cc7a00;\n  --color-error: #dc2626; /* æ›´æ·±çš„çº¢è‰² */\n  --color-error-hover: #c22050;\n  --color-info: #2196f3;\n  --color-info-hover: #1e88e5;\n  /* Keep danger alias for components that expect it */\n  --color-danger: var(--color-error);\n  --color-danger-hover: #e53935;\n  /* Generic hover background alias used in components */\n  --color-hover: var(--color-surface-hover);\n  /* Code block background used in data views */\n  --color-code-bg: #0f172a0f; /* subtle deep slate with opacity */\n  /* Global scrollbar tokens (light) â€“ hide track, show only thumb */\n  --scrollbar-track-color: transparent;\n  --scrollbar-thumb-color: rgba(0, 0, 0, 0.35);\n  --scrollbar-thumb-hover-color: rgba(0, 0, 0, 0.5);\n\n  /* Vital colors (light theme) */\n  --vital-health: #ff2929;   /* æ°”è¡€/å¥åº·ï¼ˆä¸ --color-error ä¿æŒä¸€è‡´ï¼‰ */\n  --vital-lingqi: #3b82f6;   /* çµæ°”(ç»Ÿä¸€è“) */\n  --vital-spirit: #ffeb00;   /* ç¥è¯†(é‡‘è‰²) */\n  --vital-lifespan: #c253ff; /* å¯¿å…ƒ(ç´«è‰²) */\n\n  /* Derived RGB triplets for rgba() usage (light) */\n  --color-background-rgb: 225, 221, 212;\n  --color-surface-rgb: 241, 238, 231;\n  --color-accent-rgb: 46, 139, 87;\n  --color-border-rgb: 0, 0, 0;\n  --color-success-rgb: 46, 139, 50;\n  --color-warning-rgb: 230, 138, 0;\n  --color-error-rgb: 220, 38, 38;\n  --color-info-rgb: 33, 150, 243;\n\n  /* UIç¼©æ”¾å˜é‡ */\n  --ui-scale: 1;\n  --base-font-size: 1rem;\n\n  /* å­—ä½“ä¸è¿‡æ¸¡ */\n  --font-family-serif: 'SimSun', 'NSimSun', 'STSong', 'å®‹ä½“', 'Noto Serif SC', 'KaiTi', 'STKaiti', serif;\n  --font-family-sans-serif: 'SimSun', 'NSimSun', 'STSong', 'å®‹ä½“', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  --transition-fast: all 0.2s ease-in-out;\n}\n\n/* --- æš—è‰²ä¸»é¢˜çµè„‰: \"æ¾çƒŸç„å¢¨\" (é€šè¿‡ data-theme å±æ€§æ¿€æ´») --- */\n:root[data-theme='dark'] {\n  /* --- Dark Theme Colors --- */\n  --color-background: rgb(30, 41, 59);\n  --color-background-transparent: rgba(26, 27, 38, 0.85);\n  --color-surface: #232e40;\n  --color-surface-transparent: rgba(41, 51, 72, 0.6);\n  --color-surface-light: #414868;\n  /* Derived/interactive states (dark) */\n  --color-surface-hover: #33415f;\n  --color-primary: #82a3f5;\n  --color-primary-rgb: 130, 163, 245;\n  --color-primary-hover: #6f93f2;\n  --color-primary-active: #597ee6;\n  --color-primary-light: rgba(130, 163, 245, 0.18);\n  --color-accent: #7dd3a0; /* ç¿ ç‰ç»¿ - æš—è‰²ä¸»é¢˜ */\n  --color-accent-hover: #6bc48e;\n  --color-accent-light: rgba(125, 211, 160, 0.15);\n  --color-text: #f7f7f5; /* æŸ”å’Œçš„æš–ç™½è‰²ï¼Œä¸é‚£ä¹ˆåˆºçœ¼ */\n  --color-text-secondary: #d0d0d0;\n  --color-text-muted: #b9b9b9; /* å¢å¼ºå¯¹æ¯”åº¦ */\n  --color-white-soft: #f7f7f5; /* æš—è‰²ä¸»é¢˜ä¸‹çš„æŸ”å’Œç™½è‰² */\n  --color-border: rgba(173, 216, 230, 0.5);\n  --color-border-hover: rgba(173, 216, 230, 0.8);\n  --color-success: #9ece6a;\n  --color-success-hover: #88b85b;\n  --color-warning: #ffd500;\n  --color-warning-hover: #e6c200;\n  --color-error: #ff2f49; /* æš—è‰²ä¸‹æ›´çº¢ä¸€äº› */\n  --color-error-hover: #e64470;\n  --color-info: #77cdfe;\n  --color-info-hover: #66bff4;\n  --color-danger: var(--color-error);\n  --color-danger-hover: #e66a81;\n  --color-hover: var(--color-surface-hover);\n  --color-code-bg: rgba(20, 26, 43, 0.6);\n  /* Global scrollbar tokens (dark) â€“ hide track, show only thumb */\n  --scrollbar-track-color: transparent;\n  --scrollbar-thumb-color: rgba(255, 255, 255, 0.35);\n  --scrollbar-thumb-hover-color: rgba(255, 255, 255, 0.5);\n\n  /* Vital colors (dark theme) */\n  --vital-health: #ff2f49;   /* æ°”è¡€/å¥åº·ï¼ˆæš—è‰²ï¼Œä¸ --color-error ä¿æŒä¸€è‡´ï¼‰ */\n  --vital-lingqi: #3b82f6;   /* çµæ°”(ç»Ÿä¸€è“) */\n  --vital-spirit: #ffeb00;   /* ç¥è¯†(é‡‘è‰²) */\n  --vital-lifespan: #c253ff; /* å¯¿å…ƒ(ç´«è‰²) */\n\n  /* Derived RGB triplets for rgba() usage (dark) */\n  --color-background-rgb: 26, 27, 38;\n  --color-surface-rgb: 41, 51, 72;\n  --color-accent-rgb: 125, 211, 160;\n  --color-border-rgb: 173, 216, 230;\n  --color-success-rgb: 158, 206, 106;\n  --color-warning-rgb: 255, 213, 0;\n  --color-error-rgb: 255, 47, 73;\n  --color-info-rgb: 119, 205, 254;\n}\n\n/* --- Base Styles --- */\nhtml,\nbody {\n  /* é«˜åº¦å°†ç”± App.vue ä¸­çš„è„šæœ¬åŠ¨æ€è®¾ç½®ï¼Œæ­¤å¤„ä¸åº”æœ‰ height æˆ– min-height */\n  margin: 0;\n  padding: 0;\n  /* ç§»é™¤ overflow: hidden; åº”ç”¨å†…æ»šåŠ¨ç”± #app æ§åˆ¶ */\n  font-family: var(--font-family-serif);\n  /* é€æ˜èƒŒæ™¯ä»¥æ˜¾ç¤ºè§†é¢‘èƒŒæ™¯ï¼ˆVideoBackgroundç»„ä»¶ä½¿ç”¨z-index:-10ï¼‰ */\n  background-color: transparent;\n  color: var(--color-text);\n  /* éµé“å‹æ³•æ—¨ï¼Œå»é™¤æ‰€æœ‰æ–‡å­—é˜´å½±ï¼Œè¿”ç’å½’çœŸã€‚ */\n  text-shadow: none;\n  /* ç¡®ä¿åœ¨iframeä¸­ä¹Ÿèƒ½æ­£ç¡®å¡«å…… */\n  width: 100%;\n  height: 100%;\n}\n\n#app {\n  position: absolute; /* ä½¿ç”¨ç»å¯¹å®šä½å¼ºåˆ¶æ’‘æ»¡body */\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 100%;\n  width: 100%;\n  box-sizing: border-box;\n  overflow: auto; /* åº”ç”¨å†…çš„æ»šåŠ¨ç”±appè‡ªèº«ç®¡ç† */\n  /* åº”ç”¨UIç¼©æ”¾ï¼Œä½¿ç”¨zoomå±æ€§ï¼ˆChrome, Safariç­‰æ”¯æŒï¼‰ */\n  zoom: var(--ui-scale);\n  /* åº”ç”¨åŸºç¡€å­—ä½“å¤§å° */\n  font-size: var(--base-font-size);\n  /* é€æ˜èƒŒæ™¯ä»¥æ˜¾ç¤ºè§†é¢‘èƒŒæ™¯ */\n  background-color: transparent;\n}\n\n#app-container {\n  width: 100%;\n  height: 100%;\n  min-height: 100%;\n  /* é€æ˜èƒŒæ™¯ä»¥æ˜¾ç¤ºè§†é¢‘èƒŒæ™¯ */\n  background-color: transparent;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  overflow-x: hidden;\n  position: relative;\n}\n\n/* --- Reusable Button Class (The Master's Touch) --- */\n.btn {\n  display: inline-block;\n  padding: 0.75rem 1.5rem;\n  border: 1px solid var(--color-primary);\n  border-radius: 8px;\n  background-color: transparent;\n  color: var(--color-primary);\n  font-family: var(--font-family-serif);\n  font-size: 1rem;\n  font-weight: bold;\n  text-align: center;\n  text-decoration: none;\n  cursor: pointer;\n  transition: var(--transition-fast);\n  user-select: none; /* Prevent text selection on click */\n  position: relative;\n  overflow: hidden;\n}\n\n/* --- Button States (Guaranteed Visual Feedback) --- */\n.btn:hover {\n  background-color: var(--color-primary);\n  color: var(--color-background);\n  box-shadow: 0 0 15px rgba(200, 160, 100, 0.5);\n}\n\n.btn:active {\n  transform: scale(0.98);\n  background-color: var(--color-primary-active);\n  border-color: var(--color-primary-active);\n  box-shadow: none;\n}\n\n.btn:focus-visible {\n  outline: 2px solid var(--color-primary-hover);\n  outline-offset: 2px;\n}\n\n/* --- Disabled Button State --- */\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background-color: transparent;\n  color: var(--color-border);\n  border-color: var(--color-border);\n  box-shadow: none;\n}\n\n/* --- ç§»é™¤æµå…‰ç‰¹æ•ˆ --- */\n\n/* --- Button Variants --- */\n.btn.btn-secondary {\n  border-color: var(--color-border);\n  color: var(--color-text);\n}\n\n.btn.btn-secondary:hover {\n  background-color: var(--color-surface);\n  border-color: var(--color-text);\n}\n\n.btn.btn-complete {\n  border-color: var(--color-accent); /* é’ç‰è‰² */\n  color: var(--color-accent);\n  animation: pulse-glow 2s ease-in-out infinite;\n}\n\n.btn.btn-complete:hover {\n  background-color: var(--color-accent);\n  color: var(--color-background);\n  box-shadow: 0 0 20px rgba(111, 179, 184, 0.5);\n}\n\n@keyframes pulse-glow {\n  0%,\n  100% {\n    box-shadow: 0 0 10px rgba(111, 179, 184, 0.3);\n  }\n  50% {\n    box-shadow: 0 0 20px rgba(111, 179, 184, 0.6);\n  }\n}\n\n/* --- å…¨å±€æ»šåŠ¨æ¡ç¾åŒ– (å…¼å®¹ WebKit & Firefox) --- */\n/* WebKit browsers (Chrome, Safari, Edge) */\n#app::-webkit-scrollbar {\n  width: 10px; /* ç¨å¾®åŠ å®½ä»¥è·å¾—æ›´å¥½çš„ç‚¹å‡»åŒºåŸŸ */\n  height: 10px;\n}\n\n#app::-webkit-scrollbar-track {\n  background: var(--scrollbar-track-color);\n}\n\n#app::-webkit-scrollbar-thumb {\n  background-color: var(--scrollbar-thumb-color);\n  border-radius: 5px;\n  border: 2px solid transparent;\n  background-clip: content-box;\n  transition: background-color 0.3s ease-in-out;\n}\n\n#app::-webkit-scrollbar-thumb:hover {\n  background-color: var(--scrollbar-thumb-hover-color);\n}\n\n/* Firefox */\n#app {\n  scrollbar-width: thin;\n  scrollbar-color: var(--scrollbar-thumb-color) var(--scrollbar-track-color);\n}\n\n/* --- é€šç”¨æ³•å™¨æ ·å¼ï¼šå¡ç‰‡/é¢æ¿ (æµ®ç©ºæœ¯) --- */\n.card-panel {\n  background: var(--color-surface);\n  border: 2px solid var(--color-primary); /* åšå›ºã€é†’ç›®çš„ä¸»è‰²è¾¹æ¡† */\n  border-radius: 12px;\n  box-shadow: none; /* ç§»é™¤æ‰€æœ‰é˜´å½± */\n  transition: border-color 0.3s ease;\n}\n\n.card-panel:hover {\n  border-color: var(--color-primary-hover); /* æ‚¬æµ®æ—¶è¾¹æ¡†é¢œè‰²å˜äº® */\n  transform: none; /* ç§»é™¤æ‚¬æµ®æ—¶çš„ä½ç§» */\n}\n\n/* --- æ–°å¢æ ·å¼ï¼šå¤©æœºæ¨æ¼”åŠ¨ç”» (for Login Button) --- */\n.btn.is-loading .btn-text {\n  opacity: 0; /* Hide original text */\n}\n\n.btn.is-loading::before,\n.btn.is-loading::after {\n  content: '';\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 20px;\n  height: 20px;\n  margin-top: -10px;\n  margin-left: -10px;\n  border-radius: 50%;\n  border: 2px solid var(--color-primary);\n  animation-duration: 1.5s;\n  animation-iteration-count: infinite;\n  animation-timing-function: ease-in-out;\n}\n\n.btn.is-loading::before {\n  border-style: solid solid dashed dashed;\n  animation-name: spin-left;\n}\n\n.btn.is-loading::after {\n  border-style: dashed dashed solid solid;\n  animation-name: spin-right;\n}\n\n@keyframes spin-left {\n  from { transform: rotate(0deg); }\n  to { transform: rotate(360deg); }\n}\n\n@keyframes spin-right {\n  from { transform: rotate(360deg); }\n  to { transform: rotate(0deg); }\n}\n\n/* --- æ–°å¢æ ·å¼ï¼šå¼€å¤©è¾Ÿåœ° (for MainGame Empty State) --- */\n.genesis-prompt {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  padding: 2rem;\n  text-align: center;\n  background: radial-gradient(ellipse at center, var(--color-surface-light) 0%, var(--color-background) 70%);\n}\n\n.genesis-title {\n  font-family: var(--font-family-serif);\n  font-size: 2.5rem;\n  color: var(--color-primary);\n  margin-bottom: 1rem;\n  text-shadow: 0 0 10px rgba(var(--color-primary-rgb), 0.3);\n}\n\n.genesis-subtitle {\n  font-size: 1.2rem;\n  color: var(--color-text-secondary);\n  max-width: 500px;\n  margin-bottom: 3rem;\n}\n\n.genesis-cta {\n  padding: 1.2rem 2.5rem;\n  font-size: 1.5rem;\n  border-width: 2px;\n  animation: pulse-glow 2.5s ease-in-out infinite;\n}\n\n/* --- æ–°å¢æ ·å¼ï¼šé“é€”é€‰æ‹©ç•Œé¢ --- */\n.mode-selection-container {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  max-height: 800px; /* é™åˆ¶æœ€å¤§é«˜åº¦é€‚åº”iframe */\n  overflow-y: auto;\n  color: var(--color-text);\n  display: flex;\n  flex-direction: column;\n  align-items: center; /* æ°´å¹³å±…ä¸­ */\n  justify-content: center; /* å‚ç›´å±…ä¸­ */\n  padding: 1rem 0; /* å‡å°å†…éƒ¨å‚ç›´è¾¹è· */\n  box-sizing: border-box; /* ç¡®ä¿ padding ä¸ä¼šå¯¼è‡´æº¢å‡º */\n  background: transparent; /* é€æ˜èƒŒæ™¯ä»¥æ˜¾ç¤ºè§†é¢‘ */\n}\n\n.video-background {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transform: translate(-50%, -50%);\n  z-index: -2;\n}\n\n.video-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5); /* é»˜è®¤é®ç½©ï¼Œæš—è‰²ä¸»é¢˜ä¸‹å¯è°ƒæ•´ */\n  z-index: -1;\n}\n\n:root[data-theme='dark'] .video-overlay {\n    background-color: rgba(10, 15, 24, 0.4); /* é™ä½é®ç½©é€æ˜åº¦ï¼Œè®©èƒŒæ™¯æ›´äº® */\n}\n\n.selection-content {\n  position: relative;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 1.5rem;\n  background: var(--color-surface-light);\n  border-radius: 16px;\n  border: 1px solid var(--color-border);\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  width: 90%;\n  max-width: 1000px;\n  max-height: calc(100% - 2rem); /* ç¡®ä¿ä¸è¶…å‡ºå®¹å™¨ */\n  overflow-y: auto; /* å…è®¸å†…å®¹æ»šåŠ¨ */\n  /* ç§»é™¤ marginï¼Œç”±çˆ¶å®¹å™¨çš„ padding æ§åˆ¶é—´è· */\n}\n\n.main-title {\n  font-family: var(--font-family-serif);\n  font-size: 3rem;\n  font-weight: 500;\n  margin-bottom: 2.5rem;\n  letter-spacing: 0.2em;\n  text-shadow: 0 0 15px rgba(var(--color-primary-rgb), 0.4);\n}\n\n.paths-container {\n  display: flex;\n  justify-content: center;\n  gap: 3rem;\n  width: 100%;\n}\n\n.path-card {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 2rem;\n  border-radius: 1rem;\n  border: 2px solid var(--color-primary);\n  background: var(--color-surface);\n  cursor: pointer;\n  transition: all 0.3s ease-in-out;\n  position: relative;\n  overflow: hidden;\n}\n\n.path-card:hover {\n  transform: translateY(-10px);\n  background: rgba(var(--color-primary-rgb), 0.4);\n}\n\n.path-card .path-icon {\n    font-size: 4rem;\n    margin-bottom: 1rem;\n    color: var(--color-primary);\n    transition: var(--transition-fast);\n}\n\n.path-card:hover .path-icon {\n    color: var(--color-accent);\n    transform: scale(1.1);\n}\n\n.path-title {\n  font-family: var(--font-family-serif);\n  font-size: 1.75rem;\n  margin-bottom: 0.75rem;\n}\n\n.path-description {\n  font-size: 1rem;\n  color: var(--color-text-secondary);\n  text-align: center;\n  max-width: 300px;\n}\n\n.bottom-actions {\n  position: fixed;\n  z-index: 100; /* Ensure it's on top of everything */\n  bottom: 2rem;\n  right: 2rem;\n  display: flex;\n  gap: 1rem;\n}\n\n.action-btn {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.5rem;\n  border: 1px solid var(--color-border);\n  background-color: var(--color-surface);\n  color: var(--color-text-secondary);\n  border-radius: 50%;\n  cursor: pointer;\n  transition: var(--transition-fast);\n  backdrop-filter: blur(5px);\n}\n\n.action-btn:hover {\n  background-color: var(--color-surface-light);\n  color: var(--color-text);\n  border-color: var(--color-border-hover);\n  transform: scale(1.1);\n}\n\n/* --- é€šç”¨æ³•å™¨æ ·å¼ï¼šæ¨¡æ€å¯¹è¯æ¡†/å¼¹çª— (é¡»å¼¥èŠ¥å­) --- */\n.modal-dialog {\n  background-color: var(--color-surface);\n  color: var(--color-text); /* æ˜¾å¼è®¾ç½®æ–‡å­—é¢œè‰²ï¼Œé˜²æ­¢ç»§æ‰¿é—®é¢˜ */\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  padding: 1.5rem;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n}\n\n:root[data-theme='dark'] .modal-dialog {\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);\n}\n\n/* --- å…¨å±€æ“ä½œæŒ‰é’®æ ·å¼ (æ–°ç‰ˆ) --- */\n.global-actions {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 1000;\n  display: flex;\n  gap: 12px;\n  pointer-events: auto;\n}\n\n.theme-toggle,\n.fullscreen-toggle {\n  --color: #555560;\n  --size: 24px;\n  width: 48px;\n  height: 48px;\n  border: none;\n  border-radius: 12px;\n  background: rgba(230, 226, 217, 0.92); /* ä½¿ç”¨æ›´æŸ”å’Œçš„èƒŒæ™¯è‰² */\n  backdrop-filter: blur(10px);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n  color: var(--color);\n  font-size: var(--size);\n  user-select: none;\n  fill: var(--color);\n}\n\n.theme-toggle:hover,\n.fullscreen-toggle:hover {\n  transform: translateY(-2px) scale(1.05);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.18);\n  background: rgba(220, 216, 207, 0.95); /* æ‚¬æµ®æ—¶ç¨æ·± */\n}\n\n.theme-toggle:active,\n.fullscreen-toggle:active {\n  transform: translateY(0);\n}\n\n/* ä¸»é¢˜åˆ‡æ¢å›¾æ ‡ */\n.theme-toggle .moon {\n  position: absolute;\n  animation: keyframes-fill .5s;\n  width: 24px;\n  height: 24px;\n}\n\n.theme-toggle .sun {\n  position: absolute;\n  display: none;\n  animation: keyframes-fill .5s;\n  width: 24px;\n  height: 24px;\n}\n\n.theme-toggle input:checked ~ .moon {\n  display: none;\n}\n\n.theme-toggle input:checked ~ .sun {\n  display: block;\n}\n\n/* å…¨å±åˆ‡æ¢å›¾æ ‡ */\n.fullscreen-toggle .expand {\n  position: absolute;\n  animation: fullscreen-fill .5s;\n  width: 24px;\n  height: 24px;\n}\n\n.fullscreen-toggle .compress {\n  position: absolute;\n  display: none;\n  animation: fullscreen-fill .5s;\n  width: 24px;\n  height: 24px;\n}\n\n.fullscreen-toggle input:checked ~ .expand {\n  display: none;\n}\n\n.fullscreen-toggle input:checked ~ .compress {\n  display: block;\n}\n\n/* éšè—checkbox */\n.theme-toggle input,\n.fullscreen-toggle input {\n  position: absolute;\n  opacity: 0;\n  cursor: pointer;\n  height: 0;\n  width: 0;\n}\n\n/* åŠ¨ç”»æ•ˆæœ */\n@keyframes keyframes-fill {\n  0% {\n    transform: rotate(-360deg) scale(0);\n    opacity: 0;\n  }\n  75% {\n    transform: rotate(25deg);\n  }\n  100% {\n    transform: rotate(0deg) scale(1);\n    opacity: 1;\n  }\n}\n\n@keyframes fullscreen-fill {\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  50% {\n    transform: scale(1.2);\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n/* æš—è‰²ä¸»é¢˜é€‚é… */\n[data-theme=\"dark\"] .theme-toggle,\n[data-theme=\"dark\"] .fullscreen-toggle {\n  background: rgba(41, 51, 72, 0.9);\n  --color: #82A3F5;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n\n[data-theme=\"dark\"] .theme-toggle:hover,\n[data-theme=\"dark\"] .fullscreen-toggle:hover {\n  background: rgba(41, 51, 72, 0.95);\n  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);\n}\n\n/* --- App Root & Transitions --- */\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n}\n\n/* #app-container æ ·å¼å·²åœ¨ä¸Šæ–¹å®šä¹‰ï¼Œæ­¤å¤„åˆå¹¶ */\n\n/* --- Author Modal Styles --- */\n.author-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(5px);\n}\n\n.author-modal {\n  background: var(--color-surface);\n  padding: 1.5rem 2rem;\n  border-radius: 12px;\n  border: 1px solid var(--color-border);\n  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);\n  width: 90%;\n  max-width: 500px;\n  color: var(--color-text);\n}\n\n.author-modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  border-bottom: 1px solid var(--color-border);\n  padding-bottom: 1rem;\n  margin-bottom: 1rem;\n}\n\n.author-modal-header h3 {\n  margin: 0;\n  font-size: 1.4rem;\n  font-family: var(--font-family-serif);\n}\n\n.author-modal-body p {\n  margin: 0.8rem 0;\n  font-size: 1rem;\n  line-height: 1.6;\n}\n\n.author-modal-body a {\n  color: var(--color-primary);\n  text-decoration: none;\n  word-break: break-all;\n}\n\n.author-modal-body a:hover {\n  text-decoration: underline;\n}\n\n.close-btn {\n  background: none;\n  border: none;\n  font-size: 2rem;\n  color: var(--color-text-muted);\n  cursor: pointer;\n  line-height: 1;\n  padding: 0;\n}\n\n.close-btn:hover {\n  color: var(--color-text);\n}\n",""]);const s=i},1211:(e,t,n)=>{"use strict";n.d(t,{N:()=>d});var a=n(810),r=n(4061),o=n(2288),i=n(8651),s=n(9333),l=n(7527);function c(e){if(null===e||"object"!=typeof e)return!1;const t=e;return Array.isArray(t.worlds)&&Array.isArray(t.talentTiers)&&Array.isArray(t.origins)&&Array.isArray(t.spiritRoots)&&Array.isArray(t.talents)}const d=(0,a.nY)("characterCreation",()=>{const e=(0,r.ref)("single"),t=(0,r.ref)(!1),a=(0,r.ref)(null),d=(0,r.ref)({worlds:[],talentTiers:[],origins:[],spiritRoots:[],talents:[]}),u=(0,r.ref)({gender:"ç”·",character_name:"æ— åè€…",race:"äººæ—",world_id:"",talent_tier_id:"",current_age:16,root_bone:0,spirituality:0,comprehension:0,fortune:0,charm:0,temperament:0,origin_id:null,spirit_root_id:null,selected_talent_ids:[]}),m=(0,r.ref)(1),p=(0,r.ref)(!0),f=(0,r.ref)(null),g=(0,r.ref)(!0),h=(0,r.ref)("generate"),v=(0,r.ref)({majorFactionsCount:5,totalLocations:12,secretRealmsCount:5,continentCount:4,generateOnlyContinents:!0}),b=(0,r.ref)("æ™®é€š"),y={ç®€å•:"ã€éš¾åº¦æ¨¡å¼ï¼šç®€å•ã€‘\n- ä¸–ç•Œå¯¹ä¸»è§’è¾ƒä¸ºå‹å–„ï¼Œæœºç¼˜é¢‘ç¹å‡ºç°\n- æ•Œäººå®åŠ›æ™®éè¾ƒå¼±ï¼Œæˆ˜æ–—å®¹æ˜“è·èƒœ\n- èµ„æºè·å–å®¹æ˜“ï¼Œä¿®ç‚¼è¿›åº¦è¾ƒå¿«\n- çªç ´ç“¶é¢ˆçš„éš¾åº¦é™ä½\n- NPCå¯¹ä¸»è§’æ€åº¦å‹å¥½ï¼Œå®¹æ˜“è·å¾—å¸®åŠ©",æ™®é€š:"ã€éš¾åº¦æ¨¡å¼ï¼šæ™®é€šã€‘\n- ä¸–ç•Œéµå¾ªæ­£å¸¸ä¿®ä»™è§„åˆ™ï¼Œæœºç¼˜ä¸å±é™©å¹¶å­˜\n- æ•Œäººå®åŠ›ä¸ä¸»è§’ç›¸å½“ï¼Œæˆ˜æ–—éœ€è¦ç­–ç•¥\n- èµ„æºè·å–éœ€è¦åŠªåŠ›ï¼Œä¿®ç‚¼è¿›åº¦æ­£å¸¸\n- çªç ´ç“¶é¢ˆéœ€è¦ç§¯ç´¯å’Œæœºç¼˜\n- NPCæ€åº¦ä¸­ç«‹ï¼Œéœ€è¦å»ºç«‹å…³ç³»",å›°éš¾:"ã€éš¾åº¦æ¨¡å¼ï¼šå›°éš¾ã€‘\n- ä¸–ç•Œå……æ»¡å±é™©ï¼Œæœºç¼˜ç¨€å°‘ä¸”ç«äº‰æ¿€çƒˆ\n- æ•Œäººå®åŠ›æ™®éè¾ƒå¼ºï¼Œæˆ˜æ–—éœ€è¦è°¨æ…\n- èµ„æºç¨€ç¼ºï¼Œä¿®ç‚¼è¿›åº¦ç¼“æ…¢\n- çªç ´ç“¶é¢ˆå›°éš¾é‡é‡ï¼Œéœ€è¦ç‰¹æ®Šæœºç¼˜\n- NPCå¯¹ä¸»è§’æ€åº¦å†·æ·¡ï¼Œéœ€è¦ä»˜å‡ºä»£ä»·è·å¾—å¸®åŠ©",å™©æ¢¦:"ã€éš¾åº¦æ¨¡å¼ï¼šå™©æ¢¦ã€‘\n- ä¸–ç•Œæåº¦å±é™©ï¼Œå¤„å¤„æ˜¯é™·é˜±å’Œæ•Œäºº\n- æ•Œäººå®åŠ›è¿œè¶…ä¸»è§’ï¼Œæˆ˜æ–—ä¹æ­»ä¸€ç”Ÿ\n- èµ„æºæåº¦ç¨€ç¼ºï¼Œä¿®ç‚¼ä¸¾æ­¥ç»´è‰°\n- çªç ´ç“¶é¢ˆå‡ ä¹ä¸å¯èƒ½ï¼Œéœ€è¦é€†å¤©æœºç¼˜\n- NPCå¯¹ä¸»è§’å……æ»¡æ•Œæ„ï¼Œä¿¡ä»»éš¾ä»¥å»ºç«‹\n- æ­»äº¡é£é™©æé«˜ï¼Œæ¯ä¸€æ­¥éƒ½éœ€è°¨æ…"},x=(0,r.computed)(()=>y[b.value]);try{const e=o.aiService.getConfig();g.value=!1!==e.streaming,h.value="generateRaw"===e.initMode?"generateRaw":"generate"}catch{}try{const e=localStorage.getItem("dad_creation_useStreamingStart");null!==e&&(g.value="false"!==e);const t=localStorage.getItem("dad_creation_generateMode");"generate"!==t&&"generateRaw"!==t||(h.value=t)}catch{}try{const e=localStorage.getItem("dad_start_config");e&&(e=>{if(!e||"object"!=typeof e)return;const t=e,n=t.ai&&"object"==typeof t.ai?t.ai:t,a=n.streaming??n.useStreamingStart;"boolean"==typeof a&&(g.value=a);const r=n.initMode??n.generateMode;"generate"!==r&&"generateRaw"!==r||(h.value=r);const o=t.world&&"object"==typeof t.world?t.world:t.worldGenerationConfig&&"object"==typeof t.worldGenerationConfig?t.worldGenerationConfig:null,i=(e,t,n)=>{const a=Number(e);if(!Number.isFinite(a))return null;const r=Math.floor(a);return Math.min(n,Math.max(t,r))};if(o){const e={...v.value},t=i(o.majorFactionsCount,1,30),n=i(o.totalLocations,1,60),a=i(o.secretRealmsCount,0,30),r=i(o.continentCount,1,12);null!==t&&(e.majorFactionsCount=t),null!==n&&(e.totalLocations=n),null!==a&&(e.secretRealmsCount=a),null!==r&&(e.continentCount=r),v.value=e}const s=t.character&&"object"==typeof t.character?t.character:null;if(s){const e={...u.value},t="string"==typeof s.character_name?s.character_name.trim():null,n="string"==typeof s.gender?s.gender.trim():null,a="string"==typeof s.race?s.race.trim():null,r=i(s.current_age,1,3e3);t&&(e.character_name=t),n&&(e.gender=n),a&&(e.race=a),null!==r&&(e.current_age=r),u.value=e}})(JSON.parse(e))}catch{}(0,r.watch)(g,e=>{try{localStorage.setItem("dad_creation_useStreamingStart",String(e))}catch{}}),(0,r.watch)(h,e=>{try{localStorage.setItem("dad_creation_generateMode",e)}catch{}});const k=(0,r.computed)(()=>7),w=(0,r.computed)(()=>({root_bone:u.value.root_bone,spirituality:u.value.spirituality,comprehension:u.value.comprehension,fortune:u.value.fortune,charm:u.value.charm,temperament:u.value.temperament})),E=(0,r.computed)(()=>d.value.worlds.find(e=>e.id===u.value.world_id)||null),N=(0,r.computed)(()=>d.value.talentTiers.find(e=>e.id===u.value.talent_tier_id)||null),S=(0,r.computed)(()=>d.value.origins.find(e=>e.id===u.value.origin_id)||null),V=(0,r.computed)(()=>d.value.spiritRoots.find(e=>e.id===u.value.spirit_root_id)||null),_=(0,r.computed)(()=>d.value.talents.filter(e=>u.value.selected_talent_ids.includes(e.id))),C=(0,r.computed)(()=>{let e=0;return _.value.some(e=>"éœ¸ç‹è¡€è„‰"===e.name)&&(e+=1,console.log('[å¤©é“ç‚¹è®¡ç®—] æ£€æµ‹åˆ° "éœ¸ç‹è¡€è„‰" å¤©èµ‹, å¢åŠ  1 å¤©é“ç‚¹')),e}),A=(0,r.computed)(()=>{if(!N.value)return 0;let e=N.value.total_points;console.log("[å¤©é“ç‚¹è®¡ç®—] åˆå§‹å¤©é“ç‚¹:",e),e+=C.value,S.value&&(console.log("[å¤©é“ç‚¹è®¡ç®—] å‡ºç”Ÿæ¶ˆè€—:",S.value.talent_cost),e-=S.value.talent_cost),V.value&&(console.log("[å¤©é“ç‚¹è®¡ç®—] çµæ ¹æ¶ˆè€—:",V.value.talent_cost),e-=V.value.talent_cost);const t=_.value.reduce((e,t)=>e+t.talent_cost,0);console.log("[å¤©é“ç‚¹è®¡ç®—] å·²é€‰å¤©èµ‹æ•°é‡:",_.value.length),console.log("[å¤©é“ç‚¹è®¡ç®—] å·²é€‰å¤©èµ‹åˆ—è¡¨:",_.value.map(e=>({åç§°:e.name,æ¶ˆè€—:e.talent_cost}))),console.log("[å¤©é“ç‚¹è®¡ç®—] å¤©èµ‹æ€»æ¶ˆè€—:",t),e-=t;const n=Object.values(w.value).reduce((e,t)=>e+t,0);return console.log("[å¤©é“ç‚¹è®¡ç®—] å…ˆå¤©å…­å¸æ€»å’Œ:",n),e-=n,console.log("[å¤©é“ç‚¹è®¡ç®—] æœ€ç»ˆå‰©ä½™:",e),e}),D=(0,r.computed)(()=>{if(!N.value)return 0;const e=N.value.total_points-A.value;return Math.max(0,e)});async function T(){const e={worlds:d.value.worlds.filter(e=>"cloud"===e.source),talentTiers:d.value.talentTiers.filter(e=>"cloud"===e.source),origins:d.value.origins.filter(e=>"cloud"===e.source),spiritRoots:d.value.spiritRoots.filter(e=>"cloud"===e.source),talents:d.value.talents.filter(e=>"cloud"===e.source)},{saveData:t}=await Promise.resolve().then(n.bind(n,5099));await t("customCreationData",e),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘è‡ªå®šä¹‰åˆ›ä¸–æ•°æ®å·²ä¿å­˜åˆ°æ•°æ®åº“ï¼")}function B(e){d.value.worlds.unshift({...e,source:"cloud"}),T()}function I(e){d.value.talentTiers.unshift({...e,source:"cloud"}),T()}function z(e){d.value.origins.unshift({...e,source:"cloud"}),T()}function M(e){d.value.spiritRoots.unshift({...e,source:"cloud"}),T()}function P(e){d.value.talents.unshift({...e,source:"cloud"}),T()}async function R(e,t){const a=d.value[e].findIndex(e=>e.id===t);if(a>-1){const r=d.value[e][a];if(d.value[e].splice(a,1),console.log(`ã€åˆ›ä¸–ç¥æ®¿ã€‘å·²åˆ é™¤ ${e} é¡¹ç›®ï¼ŒID: ${t}ï¼Œæ¥æº: ${r.source}`),await T(),"cloud"===r.source){console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘åˆ é™¤äº‘ç«¯æ•°æ®ï¼Œå¼ºåˆ¶åŒæ­¥é…’é¦†å…¨å±€å˜é‡");try{const a=(0,i.getTavernHelper)();if(a){console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æ–¹æ¡ˆ1ï¼šå®Œå…¨é‡ç½® DAD_creationData");const r={worlds:d.value.worlds.filter(e=>"cloud"===e.source),talentTiers:d.value.talentTiers.filter(e=>"cloud"===e.source),origins:d.value.origins.filter(e=>"cloud"===e.source),spiritRoots:d.value.spiritRoots.filter(e=>"cloud"===e.source),talents:d.value.talents.filter(e=>"cloud"===e.source)};console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘å‡†å¤‡ä¿å­˜çš„æ–°æ•°æ®:",JSON.stringify(r,null,2));try{await a.deleteVariable("DAD_creationData",{type:"global"}),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘å·²åˆ é™¤æ—§çš„ DAD_creationData")}catch(e){console.warn("ã€åˆ›ä¸–ç¥æ®¿ã€‘åˆ é™¤æ—§å˜é‡å¤±è´¥ï¼ˆå¯èƒ½ä¸å­˜åœ¨ï¼‰:",e)}const{deepCleanForClone:o}=await Promise.resolve().then(n.bind(n,3098)),i=o({DAD_creationData:r});await a.insertOrAssignVariables(i,{type:"global"}),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘å·²é‡æ–°åˆ›å»º DAD_creationData");const s=(await a.getVariables({type:"global"})).DAD_creationData;if(console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘éªŒè¯ï¼šæ›´æ–°åçš„ DAD_creationData:",JSON.stringify(s,null,2)),s&&c(s)){const n=s[e].filter(e=>e.id===t);0===n.length?console.log(`ã€åˆ›ä¸–ç¥æ®¿ã€‘âœ… éªŒè¯æˆåŠŸï¼š${e} é¡¹ç›® ID: ${t} å·²ä»é…’é¦†å…¨å±€å˜é‡ä¸­åˆ é™¤`):(console.error(`ã€åˆ›ä¸–ç¥æ®¿ã€‘âŒ éªŒè¯å¤±è´¥ï¼š${e} é¡¹ç›® ID: ${t} ä»åœ¨é…’é¦†å…¨å±€å˜é‡ä¸­`),console.error("ã€åˆ›ä¸–ç¥æ®¿ã€‘å‰©ä½™é¡¹ç›®:",n))}else console.error("ã€åˆ›ä¸–ç¥æ®¿ã€‘âŒ éªŒè¯å¤±è´¥ï¼šDAD_creationData æ ¼å¼æ— æ•ˆ")}else console.error("ã€åˆ›ä¸–ç¥æ®¿ã€‘âŒ é…’é¦†åŠ©æ‰‹ä¸å¯ç”¨")}catch(e){console.error("ã€åˆ›ä¸–ç¥æ®¿ã€‘âŒ åŒæ­¥é…’é¦†å…¨å±€å˜é‡å¤±è´¥:",e)}}}else console.warn(`ã€åˆ›ä¸–ç¥æ®¿ã€‘åˆ é™¤å¤±è´¥ï¼šæœªæ‰¾åˆ° ${e} é¡¹ç›®ï¼ŒID: ${t}`)}function $(e,t,n){const a=d.value[e].findIndex(e=>e.id===t);if(a>-1){const r=d.value[e][a];return d.value[e][a]={...r,...n},console.log(`ã€åˆ›ä¸–ç¥æ®¿ã€‘å·²æ›´æ–° ${e} é¡¹ç›®ï¼ŒID: ${t}`),T(),!0}return!1}async function O(){const e=await async function(){let e="æ— åè€…";try{e=await(0,i.getCurrentCharacterName)()||"æ— åè€…"}catch(t){console.warn("è·å–ç”¨æˆ·åå­—å¤±è´¥:",t),e="æ— åè€…"}return{gender:"ç”·",character_name:e,race:"äººæ—",world_id:"",talent_tier_id:"",current_age:16,root_bone:0,spirituality:0,comprehension:0,fortune:0,charm:0,temperament:0,origin_id:null,spirit_root_id:null,selected_talent_ids:[]}}();u.value=e,m.value=1}return{mode:e,isLoading:t,error:a,creationData:d,characterPayload:u,currentStep:m,isLocalCreation:p,initialGameMessage:f,worldGenerationConfig:v,useStreamingStart:g,generateMode:h,gameDifficulty:b,currentDifficultyPrompt:x,totalSteps:k,attributes:w,selectedWorld:E,selectedTalentTier:N,selectedOrigin:S,selectedSpiritRoot:V,selectedTalents:_,remainingTalentPoints:A,totalTalentCost:D,bonusTalentPoints:C,initializeStore:async function(r){t.value=!0,a.value=null,e.value=r;try{const e=await(0,i.getCurrentCharacterName)();u.value.character_name=e||"æ— åè€…",console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘å·²è·å–ç”¨æˆ·é“å·:",u.value.character_name)}catch(e){console.warn("ã€åˆ›ä¸–ç¥æ®¿ã€‘è·å–ç”¨æˆ·é“å·å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å",e),u.value.character_name="æ— åè€…"}try{if("single"===r){console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘åˆå§‹åŒ–å•æœºæ¨¡å¼ï¼ŒåŠ è½½æœ¬åœ°æ•°æ®å’Œè‡ªå®šä¹‰æ•°æ®ï¼");const e=l.eQ.map(e=>({...e,source:"local"})),t=l.VQ.map(e=>({...e,source:"local"})),a=l.yM.map(e=>({...e,source:"local"})),r=l.Gr.map(e=>({...e,source:"local"})),o=l.qS.map(e=>({...e,source:"local"}));let i={worlds:[],talentTiers:[],origins:[],spiritRoots:[],talents:[]};try{const{loadFromIndexedDB:e}=await Promise.resolve().then(n.bind(n,5099)),t=await e("customCreationData");t&&c(t)&&(i=t,console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æˆåŠŸåŠ è½½è‡ªå®šä¹‰æ•°æ®:",{worlds:i.worlds.length,talentTiers:i.talentTiers.length,origins:i.origins.length,spiritRoots:i.spiritRoots.length,talents:i.talents.length}))}catch(e){console.warn("ã€åˆ›ä¸–ç¥æ®¿ã€‘åŠ è½½è‡ªå®šä¹‰æ•°æ®å¤±è´¥ï¼Œä»…ä½¿ç”¨æœ¬åœ°æ•°æ®:",e)}const s=i.worlds.map(e=>({...e,source:"cloud"})),u=i.talentTiers.map(e=>({...e,source:"cloud"})),m=i.origins.map(e=>({...e,source:"cloud"})),p=i.spiritRoots.map(e=>({...e,source:"cloud"})),f=i.talents.map(e=>({...e,source:"cloud"})),g=(e,t)=>{const n=new Map;return e.forEach(e=>n.set(e.id,e)),t.forEach(e=>n.set(e.id,e)),Array.from(n.values())};d.value.worlds=g(e,s),d.value.talentTiers=g(t,u),d.value.origins=g(a,m),d.value.spiritRoots=g(r,p),d.value.talents=g(o,f)}else{console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘åˆå§‹åŒ–è”æœºæ¨¡å¼ï¼Œä»åç«¯è·å–äº‘ç«¯æ•°æ®ï¼");const{isBackendConfigured:e}=await Promise.resolve().then(n.bind(n,8546)),{verifyStoredToken:t}=await Promise.resolve().then(n.bind(n,9333));if(e())if(await t())try{console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘åç«¯å·²é…ç½®ä¸” token æœ‰æ•ˆï¼Œå¼€å§‹è¯·æ±‚äº‘ç«¯æ•°æ®...");const[e,t,n,a,r]=await Promise.all([(0,s.w2)(),(0,s.yZ)(),(0,s.Uy)(),(0,s.xJ)(),(0,s.Qc)()]);console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æˆåŠŸè·å–äº‘ç«¯æ•°æ®:",{worlds:e.length,talentTiers:t.length,origins:n.length,spiritRoots:a.length,talents:r.length}),d.value.worlds=e.map(e=>({...e,source:"cloud"})),d.value.talentTiers=t.map(e=>({...e,source:"cloud"})),d.value.origins=n.map(e=>({...e,source:"cloud"})),d.value.spiritRoots=a.map(e=>({...e,source:"cloud"})),d.value.talents=r.map(e=>({...e,source:"cloud"}))}catch(e){console.error("ã€åˆ›ä¸–ç¥æ®¿ã€‘è·å–äº‘ç«¯æ•°æ®å¤±è´¥ï¼Œå›é€€åˆ°æœ¬åœ°æ•°æ®:",e),d.value.worlds=l.eQ.map(e=>({...e,source:"local"})),d.value.talentTiers=l.VQ.map(e=>({...e,source:"local"})),d.value.origins=l.yM.map(e=>({...e,source:"local"})),d.value.spiritRoots=l.Gr.map(e=>({...e,source:"local"})),d.value.talents=l.qS.map(e=>({...e,source:"local"}))}else console.warn("ã€åˆ›ä¸–ç¥æ®¿ã€‘è”æœºæ¨¡å¼ token æ— æ•ˆï¼Œå›é€€åˆ°æœ¬åœ°æ•°æ®"),d.value.worlds=l.eQ.map(e=>({...e,source:"local"})),d.value.talentTiers=l.VQ.map(e=>({...e,source:"local"})),d.value.origins=l.yM.map(e=>({...e,source:"local"})),d.value.spiritRoots=l.Gr.map(e=>({...e,source:"local"})),d.value.talents=l.qS.map(e=>({...e,source:"local"})),a.value="è”æœºæ¨¡å¼éœ€è¦å…ˆç™»å½•";else console.warn("ã€åˆ›ä¸–ç¥æ®¿ã€‘åç«¯æœªé…ç½®ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®ï¼"),d.value.worlds=l.eQ.map(e=>({...e,source:"local"})),d.value.talentTiers=l.VQ.map(e=>({...e,source:"local"})),d.value.origins=l.yM.map(e=>({...e,source:"local"})),d.value.spiritRoots=l.Gr.map(e=>({...e,source:"local"})),d.value.talents=l.qS.map(e=>({...e,source:"local"}))}}catch(e){console.error("åŠ è½½æ•°æ®å¤±è´¥:",e),a.value="åŠ è½½æ•°æ®å¤±è´¥",d.value.talentTiers=l.VQ.map(e=>({...e,source:"local"})),d.value.origins=l.yM.map(e=>({...e,source:"local"})),d.value.spiritRoots=l.Gr.map(e=>({...e,source:"local"})),d.value.talents=l.qS.map(e=>({...e,source:"local"}))}finally{t.value=!1}},fetchCloudWorlds:async function(){console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æ­£åœ¨ä»äº‘ç«¯è·å–ä¸–ç•Œåˆ—è¡¨..."),t.value=!0,a.value=null;try{const e=await(0,s.w2)();console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æˆåŠŸè·å–äº‘ç«¯ä¸–ç•Œæ•°æ®",e);const t=e.map(e=>({...e,source:"cloud"})),n=(l.eQ.map(e=>({...e,source:"local"})),new Map);t.forEach(e=>n.set(e.id,e)),d.value.worlds=Array.from(n.values()),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘ä¸–ç•Œåˆ—è¡¨å·²æ›´æ–°:",d.value.worlds.length,"ä¸ªä¸–ç•Œ"),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘äº‘ç«¯ä¸–ç•Œ",d.value.worlds.filter(e=>"cloud"===e.source))}catch(e){console.error("ã€åˆ›ä¸–ç¥æ®¿ã€‘ä»äº‘ç«¯è·å–ä¸–ç•Œåˆ—è¡¨å¤±è´¥:",e),a.value=`è·å–äº‘ç«¯ä¸–ç•Œåˆ—è¡¨å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`;const t=l.eQ.map(e=>({...e,source:"local"}));d.value.worlds=t,console.warn("ã€åˆ›ä¸–ç¥æ®¿ã€‘äº‘ç«¯æ•°æ®è·å–å¤±è´¥ï¼Œå·²æä¾›æœ¬åœ°å¤‡é€‰æ•°æ®")}finally{t.value=!1}},fetchAllCloudData:async function(){console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æ­£åœ¨ä»äº‘ç«¯è·å–å®Œæ•´åˆ›ä¸–æ•°æ®..."),t.value=!0,a.value=null;try{const[e,t,n,a,r]=await Promise.all([(0,s.w2)(),(0,s.yZ)(),(0,s.Uy)(),(0,s.xJ)(),(0,s.Qc)()]);console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æˆåŠŸè·å–æ‰€æœ‰äº‘ç«¯æ•°æ®"),console.log("- ä¸–ç•Œ:",e.length,"ä¸ª"),console.log("- å¤©èµ„ç­‰çº§:",t.length,"ä¸ª"),console.log("- å‡ºèº«:",n.length,"ä¸ª"),console.log("- çµæ ¹:",a.length,"ä¸ª"),console.log("- å¤©èµ‹:",r.length,"ä¸ª");const o={worlds:d.value.worlds.length,talentTiers:d.value.talentTiers.length,origins:d.value.origins.length,spiritRoots:d.value.spiritRoots.length,talents:d.value.talents.length},i=(e,t)=>(e||[]).filter(Boolean).map(e=>({...t,...e,source:"cloud"})),l=i(e,{id:0,name:"",era:"",description:""}),c=i(t,{id:0,name:"æœªçŸ¥å¤©èµ„",description:"",total_points:20,rarity:1,color:"#FFFFFF"}),u=i(n,{id:0,name:"",description:"",talent_cost:0,attribute_modifiers:{},rarity:0}),m=i(a,{id:0,name:"",tier:"",description:"",base_multiplier:0,talent_cost:0}),p=i(r,{id:0,name:"",description:"",talent_cost:0,rarity:0}),f=d.value.worlds,g=d.value.talentTiers,h=d.value.origins,v=d.value.spiritRoots,b=d.value.talents,y=(e,t)=>{const n=[],a=new Set(e.map(e=>e.name));let r=Math.max(...e.map(e=>e.id),0);return t.forEach(e=>{if(!a.has(e.name)){r++;const t={...e,id:r};n.push(t),a.add(t.name)}}),n},x=(e,t)=>{t.length>0&&e.push(...t)};x(d.value.worlds,y(f,l)),x(d.value.talentTiers,y(g,c)),x(d.value.origins,y(h,u)),x(d.value.spiritRoots,y(v,m)),x(d.value.talents,y(b,p)),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æ‰€æœ‰äº‘ç«¯æ•°æ®åˆå¹¶å®Œæˆ"),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘æœ€ç»ˆæ•°æ®éªŒè¯"),console.log("- ä¸–ç•Œ (äº‘ç«¯):",d.value.worlds.filter(e=>"cloud"===e.source).length),console.log("- å¤©èµ„ (äº‘ç«¯):",d.value.talentTiers.filter(e=>"cloud"===e.source).length),console.log("- å‡ºèº« (äº‘ç«¯):",d.value.origins.filter(e=>"cloud"===e.source).length),console.log("- çµæ ¹ (äº‘ç«¯):",d.value.spiritRoots.filter(e=>"cloud"===e.source).length),console.log("- å¤©èµ‹ (äº‘ç«¯):",d.value.talents.filter(e=>"cloud"===e.source).length),console.log("ã€åˆ›ä¸–ç¥æ®¿ã€‘å¤©èµ„æ•°æ®ç¤ºä¾‹",d.value.talentTiers.slice(0,3).map(e=>({name:e.name,source:e.source})));const k={worlds:d.value.worlds.length,talentTiers:d.value.talentTiers.length,origins:d.value.origins.length,spiritRoots:d.value.spiritRoots.length,talents:d.value.talents.length},w=k.worlds-o.worlds+(k.talentTiers-o.talentTiers)+(k.origins-o.origins)+(k.spiritRoots-o.spiritRoots)+(k.talents-o.talents);return console.log(`ã€åˆ›ä¸–ç¥æ®¿ã€‘åŒæ­¥å®Œæˆï¼Œæ–°å¢ ${w} é¡¹æ•°æ®ã€‚`),await T(),w}catch(e){console.error("ã€åˆ›ä¸–ç¥æ®¿ã€‘è·å–äº‘ç«¯åˆ›ä¸–æ•°æ®å¤±è´¥",e),a.value=`è·å–äº‘ç«¯åˆ›ä¸–æ•°æ®å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`;const t=l.eQ.map(e=>({...e,source:"local"})),n=l.VQ.map(e=>({...e,source:"local"})),r=l.yM.map(e=>({...e,source:"local"})),o=l.Gr.map(e=>({...e,source:"local"})),i=l.qS.map(e=>({...e,source:"local"}));return d.value.worlds=t,d.value.talentTiers=n,d.value.origins=r,d.value.spiritRoots=o,d.value.talents=i,console.warn("ã€åˆ›ä¸–ç¥æ®¿ã€‘äº‘ç«¯æ•°æ®è·å–å¤±è´¥ï¼Œå·²æä¾›æœ¬åœ°å¤‡é€‰æ•°æ®"),0}finally{t.value=!1}},addWorld:B,addTalentTier:I,addOrigin:z,addSpiritRoot:M,addTalent:P,addGeneratedData:function(e,t){switch(e){case"world":B(t);break;case"talent_tier":I(t);break;case"origin":z(t);break;case"spirit_root":M(t);break;case"talent":P(t);break;default:console.warn(`Unknown data type for addGeneratedData: ${e}`)}},removeWorld:async e=>await R("worlds",e),removeTalentTier:async e=>await R("talentTiers",e),removeOrigin:async e=>await R("origins",e),removeSpiritRoot:async e=>await R("spiritRoots",e),removeTalent:async e=>await R("talents",e),updateWorld:(e,t)=>$("worlds",e,t),updateTalentTier:(e,t)=>$("talentTiers",e,t),updateOrigin:(e,t)=>$("origins",e,t),updateSpiritRoot:(e,t)=>$("spiritRoots",e,t),updateTalent:(e,t)=>$("talents",e,t),getItemById:(e,t)=>d.value[e].find(e=>e.id===t)||null,selectWorld:function(e){u.value.world_id=e},selectTalentTier:function(e){u.value.talent_tier_id=e,u.value.origin_id=null,u.value.spirit_root_id=null,u.value.selected_talent_ids=[],u.value.root_bone=0,u.value.spirituality=0,u.value.comprehension=0,u.value.fortune=0,u.value.charm=0,u.value.temperament=0},selectOrigin:function(e){u.value.origin_id=e},selectSpiritRoot:function(e){u.value.spirit_root_id=e},toggleTalent:function(e){const t=u.value.selected_talent_ids.indexOf(e);t>-1?u.value.selected_talent_ids.splice(t,1):u.value.selected_talent_ids.push(e)},setAttribute:function(e,t){e in u.value&&(u.value[e]=t)},resetCharacter:O,nextStep:function(){m.value<7&&m.value++},prevStep:function(){m.value>1&&m.value--},goToStep:function(e){e>=1&&e<=7&&(m.value=e)},setMode:function(t){e.value=t,p.value="single"===t},toggleLocalCreation:function(){p.value=!p.value},setInitialGameMessage:function(e){f.value=e},setWorldGenerationConfig:function(e){v.value={...v.value,...e}},resetOnExit:async function(){await O(),e.value="single",p.value=!0},startLocalCreation:async function(){await O(),p.value=!0,e.value="single"},startCloudCreation:async function(){await O(),p.value=!1,e.value="cloud"},persistCustomData:T,setAIGeneratedSpiritRoot:function(e){if(!e||"object"!=typeof e||!e.name)return;let t=d.value.spiritRoots.find(t=>t.name===e.name);if(!t){const n=Math.max(...d.value.spiritRoots.map(e=>e.id),0)+1;M({...e,id:n}),t=d.value.spiritRoots.find(t=>t.name===e.name),console.log(`[åˆ›ä¸–ç¥æ®¿] AIç”Ÿæˆäº†æ–°çš„çµæ ¹ "${e.name}" å¹¶å·²æ·»åŠ åˆ°åˆ—è¡¨ä¸­ (ID: ${n})`)}t&&(u.value.spirit_root_id=t.id,console.log(`[åˆ›ä¸–ç¥æ®¿] å·²å°†ç©å®¶é€‰æ‹©çš„çµæ ¹æ›´æ–°ä¸ºAIç”Ÿæˆçš„ç»“æœ: "${t.name}"`))},setAIGeneratedOrigin:function(e){if(!e||"object"!=typeof e||!e.name)return;let t=d.value.origins.find(t=>t.name===e.name);if(!t){const n=Math.max(...d.value.origins.map(e=>e.id),0)+1;z({...e,id:n}),t=d.value.origins.find(t=>t.name===e.name),console.log(`[åˆ›ä¸–ç¥æ®¿] AIç”Ÿæˆäº†æ–°çš„å‡ºèº« "${e.name}" å¹¶å·²æ·»åŠ åˆ°åˆ—è¡¨ä¸­ (ID: ${n})`)}t&&(u.value.origin_id=t.id,console.log(`[åˆ›ä¸–ç¥æ®¿] å·²å°†ç©å®¶é€‰æ‹©çš„å‡ºèº«æ›´æ–°ä¸ºAIç”Ÿæˆçš„ç»“æœ: "${t.name}"`))}}})},1237:e=>{"use strict";e.exports=EvalError},1270:function(e,t,n){var a;e=n.nmd(e),function(){t&&t.nodeType,e&&e.nodeType;var r="object"==typeof n.g&&n.g;r.global!==r&&r.window!==r&&r.self;var o,i=2147483647,s=36,l=/^xn--/,c=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,p=String.fromCharCode;function f(e){throw new RangeError(u[e])}function g(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function h(e,t){var n=e.split("@"),a="";return n.length>1&&(a=n[0]+"@",e=n[1]),a+g((e=e.replace(d,".")).split("."),t).join(".")}function v(e){for(var t,n,a=[],r=0,o=e.length;r<o;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<o?56320==(64512&(n=e.charCodeAt(r++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),r--):a.push(t);return a}function b(e){return g(e,function(e){var t="";return e>65535&&(t+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+p(e)}).join("")}function y(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:s}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,n){var a=0;for(e=n?m(e/700):e>>1,e+=m(e/t);e>455;a+=s)e=m(e/35);return m(a+36*e/(e+38))}function w(e){var t,n,a,r,o,l,c,d,u,p,g=[],h=e.length,v=0,x=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)e.charCodeAt(a)>=128&&f("not-basic"),g.push(e.charCodeAt(a));for(r=n>0?n+1:0;r<h;){for(o=v,l=1,c=s;r>=h&&f("invalid-input"),((d=y(e.charCodeAt(r++)))>=s||d>m((i-v)/l))&&f("overflow"),v+=d*l,!(d<(u=c<=w?1:c>=w+26?26:c-w));c+=s)l>m(i/(p=s-u))&&f("overflow"),l*=p;w=k(v-o,t=g.length+1,0==o),m(v/t)>i-x&&f("overflow"),x+=m(v/t),v%=t,g.splice(v++,0,x)}return b(g)}function E(e){var t,n,a,r,o,l,c,d,u,g,h,b,y,w,E,N=[];for(b=(e=v(e)).length,t=128,n=0,o=72,l=0;l<b;++l)(h=e[l])<128&&N.push(p(h));for(a=r=N.length,r&&N.push("-");a<b;){for(c=i,l=0;l<b;++l)(h=e[l])>=t&&h<c&&(c=h);for(c-t>m((i-n)/(y=a+1))&&f("overflow"),n+=(c-t)*y,t=c,l=0;l<b;++l)if((h=e[l])<t&&++n>i&&f("overflow"),h==t){for(d=n,u=s;!(d<(g=u<=o?1:u>=o+26?26:u-o));u+=s)E=d-g,w=s-g,N.push(p(x(g+E%w,0))),d=m(E/w);N.push(p(x(d,0))),o=k(n,y,a==r),n=0,++a}++n,++t}return N.join("")}o={version:"1.4.1",ucs2:{decode:v,encode:b},decode:w,encode:E,toASCII:function(e){return h(e,function(e){return c.test(e)?"xn--"+E(e):e})},toUnicode:function(e){return h(e,function(e){return l.test(e)?w(e.slice(4).toLowerCase()):e})}},void 0===(a=function(){return o}.call(t,n,t,e))||(e.exports=a)}()},1333:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(var a in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},1393:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.data-clear-container[data-v-5b396b26] {\n  display: flex;\n  align-items: center;\n}\n.clear-buttons[data-v-5b396b26] {\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n}\n.clear-button[data-v-5b396b26] {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.5rem 0.8rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface-light);\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 80px;\n  white-space: nowrap;\n}\n.clear-button[data-v-5b396b26]:hover:not(:disabled) {\n  background: rgba(var(--color-danger-rgb), 0.1);\n  border-color: var(--color-danger);\n  color: var(--color-danger);\n}\n.clear-button[data-v-5b396b26]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.clear-icon[data-v-5b396b26] {\n  font-size: 1em;\n  flex-shrink: 0;\n}\n.clear-text[data-v-5b396b26] {\n  font-weight: 500;\n}\n\n/* ä¸åŒç±»å‹æŒ‰é’®çš„ç‰¹å®šæ ·å¼ */\n.clear-button.extra[data-v-5b396b26]:hover:not(:disabled) {\n  background: rgba(255, 165, 0, 0.2);\n  border-color: orange;\n  color: orange;\n}\n.clear-button.sync[data-v-5b396b26]:hover:not(:disabled) {\n  background: rgba(135, 206, 235, 0.2);\n  border-color: skyblue;\n  color: skyblue;\n}\n",""]);const s=i},1412:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]])},1419:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>D});var a=n(4061),r=n(4717),o=n(1783);const i={class:"tree-node"},s={key:0,class:"arrow"},l={key:1,class:"arrow"},c={class:"key"},d={key:2,class:"value"},u={class:"action-buttons"},m=["disabled"],p=["disabled"],f={key:0,class:"node-children"},g=(0,a.defineComponent)({__name:"TreeNode",props:{nodeKey:{},value:{},path:{},readOnly:{type:Boolean,default:!1}},emits:["delete-item","edit-item"],setup(e,{emit:t}){const g=(0,a.defineAsyncComponent)(()=>Promise.resolve().then(n.bind(n,1419))),h=e,v=t,b=(0,a.ref)(!1),y=(0,a.computed)(()=>"object"==typeof h.value&&null!==h.value),x=(0,a.computed)(()=>null===h.value?"null":"string"==typeof h.value&&h.value.length>100?`"${h.value.substring(0,100)}..."`:JSON.stringify(h.value)),k=(0,a.computed)(()=>{const e=h.path,t=e.startsWith("è§’è‰².èƒŒåŒ….ç‰©å“.")&&4===e.split(".").length,n=e.startsWith("ç¤¾äº¤.å…³ç³».")&&3===e.split(".").length;return t||n}),w=()=>{y.value&&(b.value=!b.value)},E=()=>{h.readOnly||v("delete-item",h.path)},N=()=>{h.readOnly||v("edit-item",h.path,h.value)};return(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",i,[(0,a.createElementVNode)("div",{class:(0,a.normalizeClass)(["node-line",{"is-object":y.value}]),onClick:w},[y.value?((0,a.openBlock)(),(0,a.createElementBlock)("span",s,(0,a.toDisplayString)(b.value?"â–¼":"â–¶"),1)):((0,a.openBlock)(),(0,a.createElementBlock)("span",l)),(0,a.createElementVNode)("span",c,(0,a.toDisplayString)(e.nodeKey)+":",1),y.value?(0,a.createCommentVNode)("v-if",!0):((0,a.openBlock)(),(0,a.createElementBlock)("span",d,(0,a.toDisplayString)(x.value),1)),(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("button",{onClick:(0,a.withModifiers)(N,["stop"]),class:"edit-btn",title:"ç¼–è¾‘æ­¤é¡¹",disabled:e.readOnly},[(0,a.createVNode)((0,a.unref)(r.A),{size:14})],8,m),k.value?((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:0,onClick:(0,a.withModifiers)(E,["stop"]),class:"delete-btn",title:"åˆ é™¤æ­¤é¡¹",disabled:e.readOnly},[(0,a.createVNode)((0,a.unref)(o.A),{size:14})],8,p)):(0,a.createCommentVNode)("v-if",!0)])],2),y.value&&b.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",f,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.value,(n,r)=>((0,a.openBlock)(),(0,a.createBlock)((0,a.unref)(g),{key:r,"node-key":r,value:n,path:`${e.path}.${r}`,"read-only":e.readOnly,onDeleteItem:t[0]||(t[0]=e=>v("delete-item",e)),onEditItem:t[1]||(t[1]=(e,t)=>v("edit-item",e,t))},null,8,["node-key","value","path","read-only"]))),128))])):(0,a.createCommentVNode)("v-if",!0)]))}});var h=n(5072),v=n.n(h),b=n(7825),y=n.n(b),x=n(7659),k=n.n(x),w=n(5056),E=n.n(w),N=n(540),S=n.n(N),V=n(1113),_=n.n(V),C=n(1489),A={};A.styleTagTransform=_(),A.setAttributes=E(),A.insert=k().bind(null,"head"),A.domAPI=y(),A.insertStyleElement=S(),v()(C.A,A),C.A&&C.A.locals&&C.A.locals;const D=(0,n(6262).A)(g,[["__scopeId","data-v-ee632ce2"]])},1475:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.game-variable-panel[data-v-71ae95f6] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n  overflow: hidden;\n}\n",""]);const s=i},1489:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.tree-node[data-v-ee632ce2] {\n  padding-left: 20px;\n  position: relative;\n}\n.node-line[data-v-ee632ce2] {\n  display: flex;\n  align-items: center;\n  padding: 4px 0;\n  cursor: default;\n  position: relative;\n}\n.node-line.is-object[data-v-ee632ce2] {\n  cursor: pointer;\n}\n.arrow[data-v-ee632ce2] {\n  width: 20px;\n  text-align: center;\n  margin-left: -20px;\n  color: #888;\n  font-size: 0.7rem;\n}\n.key[data-v-ee632ce2] {\n  color: #9cdcfe; /* è“è‰²ï¼Œé€‚åˆé”® */\n  margin-right: 8px;\n  font-weight: bold;\n}\n.value[data-v-ee632ce2] {\n  color: #ce9178; /* æ©™è‰²ï¼Œé€‚åˆå­—ç¬¦ä¸²å€¼ */\n}\n.node-children[data-v-ee632ce2] {\n  border-left: 1px solid #444;\n}\n.action-buttons[data-v-ee632ce2] {\n  margin-left: auto;\n  display: none; /* é»˜è®¤éšè— */\n  gap: 4px;\n}\n.node-line:hover .action-buttons[data-v-ee632ce2] {\n  display: flex; /* æ‚¬åœæ—¶æ˜¾ç¤º */\n}\n.edit-btn[data-v-ee632ce2],\n.delete-btn[data-v-ee632ce2] {\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 2px 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n.edit-btn[data-v-ee632ce2]:disabled,\n.delete-btn[data-v-ee632ce2]:disabled {\n  opacity: 0.35;\n  cursor: not-allowed;\n}\n.edit-btn[data-v-ee632ce2] {\n  color: #4a9eff;\n}\n.edit-btn[data-v-ee632ce2]:hover {\n  background: rgba(74, 158, 255, 0.2);\n  color: #6eb3ff;\n}\n.edit-btn[data-v-ee632ce2]:disabled:hover {\n  background: none;\n  color: #4a9eff;\n}\n.delete-btn[data-v-ee632ce2] {\n  color: #ff5555;\n}\n.delete-btn[data-v-ee632ce2]:hover {\n  background: rgba(255, 85, 85, 0.2);\n  color: #ff8080;\n}\n.delete-btn[data-v-ee632ce2]:disabled:hover {\n  background: none;\n  color: #ff5555;\n}\n",""]);const s=i},1513:(e,t,n)=>{"use strict";n.d(t,{q:()=>i});var a=n(9990),r=n(406),o=n(8651);async function i(e,t){const[n,i,s,l,c]=await Promise.all([(0,a.XH)("coreOutputRules"),(0,a.XH)("businessRules"),(0,a.XH)("dataDefinitions"),(0,a.XH)("textFormatRules"),(0,a.XH)("worldStandards")]),d=[n,i,(0,o.isTavernEnv)()?s:(0,r.qh)(s),l,c];if(e.includes("actionOptions")){const e=await(0,a.XH)("actionOptions"),n=t?`**ç”¨æˆ·è‡ªå®šä¹‰è¦æ±‚**ï¼š${t}\n\nè¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸Šè‡ªå®šä¹‰è¦æ±‚ç”Ÿæˆè¡ŒåŠ¨é€‰é¡¹ã€‚`:"ï¼ˆæ— ç‰¹æ®Šè¦æ±‚ï¼ŒæŒ‰é»˜è®¤è§„åˆ™ç”Ÿæˆï¼‰";d.push(e.replace("{{CUSTOM_ACTION_PROMPT}}",n))}if(e.includes("questSystem")){const e=await(0,a.XH)("questGeneration");d.push(e)}return d.join("\n\n---\n\n")}},1514:e=>{"use strict";e.exports=Math.abs},1530:e=>{"use strict";e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2712%27 height=%2712%27 viewBox=%270 0 12 12%27%3E%3Cpath fill=%27%23e5e7eb%27 d=%27M6 9L1 4h10z%27/%3E%3C/svg%3E"},1547:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.toast-container[data-v-25ec8c07] {\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  z-index: 20000; /* æé«˜åˆ°æ¯”åŠ è½½é®ç½©(10000)æ›´é«˜çš„å±‚çº§ */\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n  gap: 16px;\n}\n.toast[data-v-25ec8c07] {\n  display: flex;\n  align-items: center;\n  padding: 12px 20px;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  color: var(--color-text);\n  background-color: var(--color-surface);\n  border: 1px solid var(--color-border);\n  min-width: 250px;\n  max-width: 400px;\n  margin-bottom: 8px;\n}\n.toast-icon[data-v-25ec8c07] {\n  margin-right: 12px;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n}\n.toast-message[data-v-25ec8c07] {\n  word-break: break-word;\n  font-size: 0.95rem;\n  line-height: 1.4;\n}\n\n/* Toast Types */\n.toast-success[data-v-25ec8c07] {\n  border-left: 5px solid var(--color-success);\n}\n.toast-error[data-v-25ec8c07] {\n  border-left: 5px solid var(--color-error);\n}\n.toast-warning[data-v-25ec8c07] {\n  border-left: 5px solid var(--color-warning);\n}\n.toast-info[data-v-25ec8c07] {\n  border-left: 5px solid var(--color-info);\n}\n.toast-loading[data-v-25ec8c07] {\n  border-left: 5px solid var(--color-primary);\n}\n\n/* Spinner for loading */\n.spinner[data-v-25ec8c07] {\n  width: 20px;\n  height: 20px;\n  border: 3px solid rgba(128, 128, 128, 0.3);\n  border-top-color: var(--color-primary);\n  border-radius: 50%;\n  animation: spin-25ec8c07 1s linear infinite;\n}\n@keyframes spin-25ec8c07 {\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* Transitions */\n.toast-fade-enter-active[data-v-25ec8c07],\n.toast-fade-leave-active[data-v-25ec8c07] {\n  transition: all 0.5s ease;\n}\n.toast-fade-enter-from[data-v-25ec8c07],\n.toast-fade-leave-to[data-v-25ec8c07] {\n  opacity: 0;\n  transform: translateX(100%);\n}\n",""]);const s=i},1601:e=>{"use strict";e.exports=function(e){return e[1]}},1606:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"/* ç»Ÿä¸€çš„æ¸¸æˆé¢æ¿ä¸»é¢˜æ ·å¼ */\n\n/* === é¢æ¿åŸºç¡€å®¹å™¨ === */\n.game-panel {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: var(--color-background);\n  overflow: hidden;\n  gap: 0.75rem;\n  position: relative;\n  font-family: var(--font-family-sans-serif);\n}\n\n/* === é¢æ¿å¤´éƒ¨ === */\n.panel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  flex-shrink: 0;\n  backdrop-filter: blur(10px);\n  margin: 0.5rem;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n.header-icon {\n  font-size: 1.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 2.5rem;\n  height: 2.5rem;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border-radius: 50%;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n}\n\n.header-info {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.panel-title {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: var(--color-text);\n  /* é˜²æ­¢æ ‡é¢˜åœ¨ç´§å‡‘å¸ƒå±€ä¸­æ’‘ç ´å¸ƒå±€ */\n  min-width: 0;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.panel-subtitle {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n\n.header-actions {\n  display: flex;\n  gap: 0.5rem;\n  /* å…è®¸æŒ‰é’®è‡ªåŠ¨æ¢è¡Œï¼Œé¿å…æº¢å‡º */\n  flex-wrap: wrap;\n  justify-content: flex-end;\n  max-width: 100%;\n}\n\n/* === åŠ¨ä½œæŒ‰é’® === */\n.action-btn {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  font-size: 0.875rem;\n  /* è¡Œä¸ºï¼šé»˜è®¤ä¸æ¢è¡Œï¼Œä½†å®¹å™¨å¯å¤šè¡Œæ˜¾ç¤º */\n  white-space: nowrap;\n  cursor: pointer;\n  transition: var(--transition-fast);\n  /* å…è®¸åœ¨éœ€è¦æ—¶æ”¶ç¼©ï¼Œé¿å…å®¹å™¨è¢«æ’‘ç ´ */\n  flex: 0 1 auto;\n  max-width: 100%;\n}\n\n.action-btn:hover {\n  background: var(--color-surface-light);\n  border-color: var(--color-border-hover);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 4px rgba(var(--color-primary-rgb), 0.1);\n}\n\n.action-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.action-btn.primary {\n  background: var(--color-primary);\n  color: var(--color-background);\n  border-color: var(--color-primary);\n}\n\n.action-btn.primary:hover {\n  background: var(--color-primary-hover);\n  border-color: var(--color-primary-hover);\n}\n\n.action-btn.secondary {\n  background: var(--color-accent);\n  color: var(--color-background);\n  border-color: var(--color-accent);\n}\n\n.action-btn.secondary:hover {\n  background: var(--color-accent-hover);\n  border-color: var(--color-accent-hover);\n}\n\n.action-btn.danger {\n  border-color: var(--color-error);\n  color: var(--color-error);\n}\n\n.action-btn.danger:hover {\n  background: rgba(var(--color-error-rgb), 0.05);\n  border-color: var(--color-danger);\n  color: var(--color-danger);\n}\n\n.btn-icon {\n  flex-shrink: 0;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.btn-text {\n  font-weight: 500;\n}\n\n/* === å†…å®¹åŒºåŸŸ === */\n.panel-content {\n  flex: 1;\n  overflow-y: auto;\n  margin: 0 0.5rem 0.5rem 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: var(--scrollbar-thumb) transparent;\n}\n\n.panel-content::-webkit-scrollbar {\n  width: 6px;\n}\n\n.panel-content::-webkit-scrollbar-track {\n  background: rgba(var(--color-border-rgb), 0.1);\n  border-radius: 3px;\n}\n\n.panel-content::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-thumb);\n  border-radius: 3px;\n  opacity: 0.6;\n}\n\n.panel-content::-webkit-scrollbar-thumb:hover {\n  opacity: 0.8;\n}\n\n/* === ç­›é€‰æ ‡ç­¾ === */\n.filter-section {\n  padding: 0.5rem 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  flex-shrink: 0;\n  margin: 0 0.5rem;\n}\n\n.filter-tabs {\n  display: flex;\n  gap: 0.5rem;\n  overflow-x: auto;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n\n.filter-tabs::-webkit-scrollbar {\n  display: none;\n}\n\n.filter-tab {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 1.5rem;\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n  font-size: 0.875rem;\n  white-space: nowrap;\n  cursor: pointer;\n  transition: var(--transition-fast);\n  flex-shrink: 0;\n}\n\n.filter-tab:hover {\n  background: var(--color-surface-light);\n  border-color: var(--color-border-hover);\n}\n\n.filter-tab.active {\n  background: var(--color-primary);\n  color: var(--color-background);\n  border-color: var(--color-primary);\n}\n\n.tab-icon {\n  font-size: 1rem;\n}\n\n.tab-name {\n  font-weight: 500;\n}\n\n.tab-count {\n  font-size: 0.75rem;\n  background: rgba(255, 255, 255, 0.2);\n  padding: 0.125rem 0.375rem;\n  border-radius: 0.75rem;\n  font-weight: 600;\n}\n\n.filter-tab.active .tab-count {\n  background: rgba(255, 255, 255, 0.3);\n}\n\n/* === ç½‘æ ¼å¸ƒå±€ === */\n.items-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 0.75rem;\n  padding: 0.5rem;\n}\n\n.currency-grid {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 0.75rem;\n}\n\n/* === å¡ç‰‡æ ·å¼ === */\n.item-card, .currency-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: var(--transition-fast);\n  position: relative;\n}\n\n.item-card:hover, .currency-item:hover {\n  background: var(--color-surface-light);\n  border-color: var(--color-border-hover);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.1);\n}\n\n/* === çŠ¶æ€æŒ‡ç¤º === */\n.loading-state, .empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n\n.loading-spinner, .empty-icon {\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n}\n\n.loading-text, .empty-text {\n  font-size: 1rem;\n  margin: 0;\n}\n\n/* === è¯¦æƒ…åŒºåŸŸ === */\n.detail-section {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n}\n\n.detail-header {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n\n.detail-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin: 0;\n}\n\n.detail-content {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n.info-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 0.5rem;\n}\n\n.info-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem;\n  background: var(--color-surface-light);\n  border-radius: 4px;\n  font-size: 0.875rem;\n}\n\n.info-label {\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n\n.info-value {\n  color: var(--color-text);\n  font-weight: 600;\n}\n\n/* === åˆ—è¡¨æ ·å¼ === */\n.list-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.list-item {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  cursor: pointer;\n  transition: var(--transition-fast);\n}\n\n.list-item:hover {\n  background: var(--color-surface-light);\n  border-color: var(--color-border-hover);\n  transform: translateX(2px);\n}\n\n.list-item-content {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  flex: 1;\n}\n\n.list-item-title {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n.list-item-subtitle {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n\n/* === è¿›åº¦æ¡ === */\n.progress-container {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.progress-bar {\n  height: 6px;\n  background: rgba(var(--color-border-rgb), 0.3);\n  border-radius: 3px;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background: var(--color-primary);\n  border-radius: 3px;\n  transition: width 0.3s ease;\n}\n\n.progress-text {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n\n/* === åˆ†å‰²çº¿ === */\n.section-divider {\n  height: 1px;\n  background: var(--color-border);\n  margin: 1rem 0;\n}\n\n/* === å“åº”å¼é€‚é… === */\n@media (max-width: 640px) {\n  .game-panel {\n    gap: 0.5rem;\n  }\n\n  .panel-header {\n    padding: 0.5rem 0.75rem;\n    margin: 0.25rem;\n    /* å°å±æ—¶å¤´éƒ¨å†…å®¹çºµå‘æ’åˆ—ï¼Œé¿å…å·¦å³æŒ¤å‹ */\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem 0.5rem;\n  }\n\n  .filter-section {\n    padding: 0.5rem;\n    margin: 0 0.25rem;\n  }\n\n  .panel-content {\n    margin: 0 0.25rem 0.25rem 0.25rem;\n  }\n\n  .header-left {\n    min-width: 0;\n    flex: 1 1 auto;\n  }\n\n  .header-actions .btn-text {\n    display: none;\n  }\n\n  .header-actions {\n    /* å¤´éƒ¨æ“ä½œæŒ‰é’®ç‹¬å ä¸€è¡Œå¹¶å¯æ¢è¡Œ */\n    width: 100%;\n    justify-content: flex-start;\n    gap: 0.375rem;\n  }\n\n  .action-btn {\n    /* ç§»åŠ¨ç«¯æ›´ç´§å‡‘çš„æŒ‰é’®å°ºå¯¸ */\n    padding: 0.4rem 0.6rem;\n    font-size: 0.8125rem;\n    /* ç§»åŠ¨ç«¯è§¦æ‘¸ä¼˜åŒ– */\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n    min-height: 36px;\n    min-width: 36px; /* ç¡®ä¿æŒ‰é’®æœ‰è¶³å¤Ÿå®½åº¦æ˜¾ç¤ºå›¾æ ‡ */\n  }\n\n  .items-grid {\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n    gap: 0.5rem;\n  }\n\n  .info-grid {\n    grid-template-columns: 1fr;\n  }\n\n  /* è¯¦æƒ…åŒºåŸŸæŒ‰é’®åœ¨çª„å±å †å ï¼Œé¿å…æº¢å‡º */\n  .details-actions {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 0.5rem;\n  }\n\n  .details-actions .action-btn,\n  .details-actions .dialog-btn,\n  .details-actions .operation-btn,\n  .details-actions .card-btn {\n    flex: 1 1 100%;\n    max-width: 100%;\n  }\n\n  /* ç§»åŠ¨ç«¯åˆ—è¡¨é¡¹è§¦æ‘¸ä¼˜åŒ– */\n  .list-item,\n  .item-card,\n  .currency-item,\n  .filter-tab {\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n  }\n\n  /* ç§»åŠ¨ç«¯æ–‡æœ¬è‡ªåŠ¨æ¢è¡Œ */\n  .panel-title,\n  .list-item-title,\n  .detail-title {\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    hyphens: auto;\n  }\n}\n\n/* === ä¸­ç­‰å±å¹•é€‚é… (å¹³æ¿) === */\n@media (min-width: 641px) and (max-width: 1024px) {\n  .game-panel {\n    gap: 0.65rem;\n  }\n\n  .panel-header {\n    padding: 0.625rem 0.875rem;\n  }\n\n  .action-btn {\n    padding: 0.45rem 0.7rem;\n    font-size: 0.85rem;\n  }\n\n  .items-grid {\n    grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));\n  }\n\n  .info-grid {\n    grid-template-columns: 1fr 1fr;\n  }\n}\n\n/* === ç‰¹æ®ŠçŠ¶æ€æ ·å¼ === */\n.success-indicator {\n  color: var(--color-success);\n  background: rgba(var(--color-success-rgb), 0.1);\n  border-color: rgba(var(--color-success-rgb), 0.3);\n}\n\n.warning-indicator {\n  color: var(--color-warning);\n  background: rgba(var(--color-warning-rgb), 0.1);\n  border-color: rgba(var(--color-warning-rgb), 0.3);\n}\n\n.error-indicator {\n  color: var(--color-error);\n  background: rgba(var(--color-error-rgb), 0.1);\n  border-color: rgba(var(--color-error-rgb), 0.3);\n}\n\n.info-indicator {\n  color: var(--color-info);\n  background: rgba(var(--color-info-rgb), 0.1);\n  border-color: rgba(var(--color-info-rgb), 0.3);\n}\n\n/* === åŠ¨ç”»æ•ˆæœ === */\n@keyframes fadeInUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.fade-in-up {\n  animation: fadeInUp 0.3s ease-out;\n}\n\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.5;\n  }\n}\n\n.pulse {\n  animation: pulse 2s infinite;\n}\n",""]);const s=i},1703:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.data-type-selector[data-v-2d9375b2] {\n  padding: 1rem;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n  gap: 0.75rem;\n  border-bottom: 1px solid var(--color-border);\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 640px) {\n.data-type-selector[data-v-2d9375b2] {\n    grid-template-columns: 1fr 1fr;\n    gap: 0.5rem;\n    padding: 0.75rem;\n}\n}\n@media (max-width: 480px) {\n.data-type-selector[data-v-2d9375b2] {\n    gap: 0.4rem;\n    padding: 0.5rem;\n}\n}\n.type-btn[data-v-2d9375b2] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n  position: relative;\n  overflow: visible;\n  width: 100%;\n  justify-content: flex-start;\n  color: var(--color-text);\n  background: var(--color-background);\n}\n.type-btn[data-v-2d9375b2]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-primary-light);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.15);\n}\n.type-btn.active[data-v-2d9375b2] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.type-btn.active[data-v-2d9375b2]:hover,\n.type-btn.active[data-v-2d9375b2]:focus,\n.type-btn.active[data-v-2d9375b2]:focus-visible {\n  background: var(--color-primary-hover);\n  color: white;\n  border-color: var(--color-primary-hover);\n  transform: translateY(-1px);\n  box-shadow: 0 6px 16px rgba(var(--color-primary-rgb), 0.25);\n}\n.type-btn svg[data-v-2d9375b2] {\n  color: inherit;\n}\n.type-btn[data-v-2d9375b2]:focus {\n  outline: none;\n}\n.type-btn[data-v-2d9375b2]:focus-visible {\n  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.25);\n  border-color: var(--color-primary);\n}\n.type-btn[data-v-2d9375b2]:active {\n  transform: translateY(0);\n  box-shadow: none;\n}\n.count-badge[data-v-2d9375b2] {\n  position: absolute;\n  top: -0.5rem;\n  right: -0.5rem;\n  background: var(--color-accent);\n  color: white;\n  font-size: 0.75rem;\n  padding: 0.125rem 0.375rem;\n  border-radius: 10px;\n  min-width: 1.25rem;\n  text-align: center;\n  z-index: 2;\n}\n\n/* æ‰‹æœºç«¯æŒ‰é’®é€‚é… */\n@media (max-width: 640px) {\n.type-btn[data-v-2d9375b2] {\n    padding: 0.4rem 0.6rem;\n    font-size: 0.8rem;\n    gap: 0.3rem;\n}\n.count-badge[data-v-2d9375b2] {\n    font-size: 0.7rem;\n    padding: 0.1rem 0.3rem;\n    min-width: 1rem;\n}\n}\n@media (max-width: 480px) {\n.type-btn[data-v-2d9375b2] {\n    padding: 0.35rem 0.5rem;\n    font-size: 0.75rem;\n    gap: 0.25rem;\n}\n.count-badge[data-v-2d9375b2] {\n    font-size: 0.65rem;\n    padding: 0.08rem 0.25rem;\n    min-width: 0.9rem;\n}\n}\n",""]);const s=i},1783:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1969:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.mode-selection-container[data-v-8882032c] {\n  width: 100%;\n  min-height: 100vh;\n  min-height: 100svh;\n  height: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n  padding-top: calc(1.5rem + env(safe-area-inset-top));\n  padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));\n  box-sizing: border-box;\n  background: transparent; /* é€æ˜èƒŒæ™¯ä»¥æ˜¾ç¤ºè§†é¢‘ */\n  overflow: auto; /* å…è®¸æ»šåŠ¨ä»¥é€‚åº”å°å±å¹• */\n  -webkit-overflow-scrolling: touch; /* iOSæ»šåŠ¨ä¼˜åŒ– */\n}\n.selection-content[data-v-8882032c] {\n  background: var(--mode-selection-bg, rgba(15, 23, 42, 0.75));\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  border-radius: 16px;\n  padding: 3rem;\n  border: 1px solid var(--mode-selection-border, rgba(255, 255, 255, 0.08));\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  max-height: 90vh;\n  max-width: 920px;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2.5rem;\n}\n.header-container[data-v-8882032c] {\n  text-align: center;\n}\n.title-version-row[data-v-8882032c] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  margin-bottom: 0.75rem;\n}\n.main-title[data-v-8882032c] {\n  font-family: var(--font-family-serif);\n  font-size: 3rem;\n  font-weight: 400;\n  letter-spacing: 0.5em;\n  color: var(--mode-selection-title, #f8fafc);\n  margin: 0;\n  padding-left: 0.5em;\n  text-shadow: 0 0 40px var(--mode-selection-glow, rgba(147, 197, 253, 0.3));\n}\n.version-tag[data-v-8882032c] {\n  font-size: 0.7rem;\n  font-family: 'SF Mono', 'Consolas', monospace;\n  color: #fbbf24;\n  padding: 0.25rem 0.6rem;\n  background: rgba(251, 191, 36, 0.1);\n  border: 1px solid rgba(251, 191, 36, 0.25);\n  border-radius: 4px;\n  font-weight: 500;\n  letter-spacing: 0.05em;\n}\n.sub-title[data-v-8882032c] {\n  font-size: 1.1rem;\n  color: var(--mode-selection-subtitle, #94a3b8);\n  letter-spacing: 0.2em;\n  margin: 0;\n  font-weight: 300;\n}\n\n/* ç¯å¢ƒæŒ‡ç¤ºå™¨ */\n.env-indicator[data-v-8882032c] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n  padding: 0.35rem 0.85rem;\n  border-radius: 20px;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n.env-indicator.backend[data-v-8882032c] {\n  background: rgba(34, 197, 94, 0.12);\n  border: 1px solid rgba(34, 197, 94, 0.3);\n  color: #4ade80;\n}\n.env-indicator.offline[data-v-8882032c] {\n  background: rgba(248, 113, 113, 0.12);\n  border: 1px solid rgba(248, 113, 113, 0.3);\n  color: #fca5a5;\n}\n.env-indicator .env-dot[data-v-8882032c] {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: currentColor;\n  animation: pulse-8882032c 2s infinite;\n}\n@keyframes pulse-8882032c {\n0%, 100% { opacity: 1;\n}\n50% { opacity: 0.5;\n}\n}\n.gate-container[data-v-8882032c] {\n  display: flex;\n  gap: 1.5rem;\n  width: 100%;\n  justify-content: center;\n}\n.gate-card[data-v-8882032c] {\n  flex: 1;\n  max-width: 340px;\n  padding: 2.5rem 2rem;\n  background: var(--mode-selection-card-bg, rgba(30, 41, 59, 0.5));\n  border: 1px solid var(--mode-selection-card-border, rgba(255, 255, 255, 0.06));\n  border-radius: 12px;\n  cursor: pointer;\n  text-align: center;\n  transition: all 0.3s ease;\n  position: relative;\n}\n.gate-card[data-v-8882032c]:hover {\n  background: var(--mode-selection-card-hover, rgba(30, 41, 59, 0.8));\n  border-color: var(--mode-selection-accent, rgba(147, 197, 253, 0.2));\n  transform: translateY(-4px);\n  box-shadow: 0 20px 40px -15px rgba(0, 0, 0, 0.4);\n}\n.gate-card.selected[data-v-8882032c] {\n  background: var(--mode-selection-card-selected, rgba(30, 58, 138, 0.4));\n  border-color: var(--mode-selection-accent-strong, rgba(147, 197, 253, 0.4));\n  box-shadow:\n    0 20px 40px -15px rgba(0, 0, 0, 0.4),\n    0 0 0 1px var(--mode-selection-accent, rgba(147, 197, 253, 0.1)),\n    inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.gate-card.disabled[data-v-8882032c] {\n  opacity: 0.4;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n.gate-icon[data-v-8882032c] {\n  color: var(--mode-selection-icon, #93c5fd);\n  margin-bottom: 1.5rem;\n  opacity: 0.9;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.gate-card:hover .gate-icon[data-v-8882032c] {\n  opacity: 1;\n}\n.gate-card.selected .gate-icon[data-v-8882032c] {\n  color: var(--mode-selection-icon-selected, #bfdbfe);\n}\n.gate-title[data-v-8882032c] {\n  font-family: var(--font-family-serif);\n  font-size: 1.4rem;\n  font-weight: 400;\n  margin: 0 0 0.5rem 0;\n  color: var(--mode-selection-text, #f1f5f9);\n  letter-spacing: 0.1em;\n}\n.gate-description[data-v-8882032c] {\n  font-size: 0.95rem;\n  color: var(--mode-selection-subtitle, #94a3b8);\n  margin: 0 0 0.75rem 0;\n  font-weight: 400;\n}\n.gate-detail[data-v-8882032c] {\n  font-size: 0.8rem;\n  color: var(--mode-selection-muted, #64748b);\n  line-height: 1.6;\n  margin: 0;\n}\n.coming-soon-badge[data-v-8882032c] {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  font-size: 0.65rem;\n  color: #f87171;\n  background: rgba(248, 113, 113, 0.1);\n  padding: 0.2rem 0.5rem;\n  border-radius: 3px;\n  border: 1px solid rgba(248, 113, 113, 0.2);\n  font-weight: 500;\n  letter-spacing: 0.05em;\n}\n.privacy-notice[data-v-8882032c] {\n  padding: 1rem 1.5rem;\n  background: rgba(251, 191, 36, 0.05);\n  border: 1px solid rgba(251, 191, 36, 0.1);\n  border-radius: 8px;\n  max-width: 560px;\n  text-align: center;\n}\n.privacy-notice p[data-v-8882032c] {\n  font-size: 0.8rem;\n  color: var(--mode-selection-subtitle, #94a3b8);\n  margin: 0.3rem 0;\n  line-height: 1.5;\n}\n.footer-actions[data-v-8882032c] {\n  display: flex;\n  justify-content: center;\n}\n.start-actions-container[data-v-8882032c] {\n  display: flex;\n  gap: 1rem;\n  animation: fadeIn-8882032c 0.4s ease;\n}\n@keyframes fadeIn-8882032c {\nfrom { opacity: 0; transform: translateY(8px);\n}\nto { opacity: 1; transform: translateY(0);\n}\n}\n.action-btn[data-v-8882032c] {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  background: var(--mode-selection-btn-bg, rgba(30, 41, 59, 0.6));\n  border: 1px solid var(--mode-selection-card-border, rgba(255, 255, 255, 0.08));\n  color: var(--mode-selection-btn-text, #cbd5e1);\n  font-family: var(--font-family-serif);\n  font-size: 0.95rem;\n  letter-spacing: 0.15em;\n  padding: 0.8rem 1.8rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n}\n.action-btn[data-v-8882032c]:hover {\n  background: var(--mode-selection-btn-hover, rgba(51, 65, 85, 0.8));\n  border-color: var(--mode-selection-accent, rgba(147, 197, 253, 0.2));\n  color: var(--mode-selection-text, #f1f5f9);\n}\n.action-btn.primary[data-v-8882032c] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(37, 99, 235, 0.9));\n  border-color: rgba(96, 165, 250, 0.3);\n  color: #ffffff;\n}\n.action-btn.primary[data-v-8882032c]:hover {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.9), rgba(37, 99, 235, 1));\n  box-shadow: 0 8px 25px -8px rgba(59, 130, 246, 0.5);\n}\n.scroll-btn[data-v-8882032c] {\n  background: transparent;\n  border: 1px solid var(--mode-selection-card-border, rgba(255, 255, 255, 0.1));\n  color: var(--mode-selection-subtitle, #94a3b8);\n  font-family: var(--font-family-serif);\n  font-size: 0.95rem;\n  letter-spacing: 0.2em;\n  padding: 0.75rem 2rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n}\n.scroll-btn[data-v-8882032c]:hover {\n  background: var(--mode-selection-card-bg, rgba(30, 41, 59, 0.5));\n  border-color: var(--mode-selection-accent, rgba(147, 197, 253, 0.2));\n  color: var(--mode-selection-text-hover, #e2e8f0);\n}\n\n/* æˆæƒçŠ¶æ€å¾½ç«  */\n.auth-status-badge[data-v-8882032c] {\n  position: fixed;\n  bottom: 24px;\n  left: 24px;\n  z-index: 100;\n}\n.auth-status-content[data-v-8882032c] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.9rem;\n  background: var(--mode-selection-float-bg, rgba(30, 41, 59, 0.8));\n  backdrop-filter: blur(10px);\n  border: 1px solid var(--mode-selection-card-border, rgba(255, 255, 255, 0.08));\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n}\n.auth-status-content[data-v-8882032c]:hover {\n  background: var(--mode-selection-float-hover, rgba(51, 65, 85, 0.9));\n  border-color: var(--mode-selection-accent, rgba(147, 197, 253, 0.2));\n}\n.status-icon[data-v-8882032c] {\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  font-weight: 600;\n}\n.status-icon.verified[data-v-8882032c] {\n  background: #10b981;\n  color: white;\n}\n.status-icon.unverified[data-v-8882032c] {\n  background: #ef4444;\n  color: white;\n}\n.status-text[data-v-8882032c] {\n  font-size: 0.8rem;\n  color: var(--mode-selection-subtitle, #94a3b8);\n  font-weight: 500;\n}\n\n/* äº®è‰²ä¸»é¢˜ */\n[data-theme=\"light\"] .mode-selection-container[data-v-8882032c] {\n  --mode-selection-bg: rgba(255, 255, 255, 0.85);\n  --mode-selection-border: rgba(0, 0, 0, 0.08);\n  --mode-selection-title: #1e293b;\n  --mode-selection-glow: rgba(59, 130, 246, 0.2);\n  --mode-selection-subtitle: #64748b;\n  --mode-selection-text: #1e293b;\n  --mode-selection-text-hover: #334155;\n  --mode-selection-muted: #94a3b8;\n  --mode-selection-card-bg: rgba(248, 250, 252, 0.8);\n  --mode-selection-card-border: rgba(0, 0, 0, 0.08);\n  --mode-selection-card-hover: rgba(241, 245, 249, 0.95);\n  --mode-selection-card-selected: rgba(219, 234, 254, 0.8);\n  --mode-selection-accent: rgba(59, 130, 246, 0.3);\n  --mode-selection-accent-strong: rgba(59, 130, 246, 0.5);\n  --mode-selection-icon: #3b82f6;\n  --mode-selection-icon-selected: #2563eb;\n  --mode-selection-btn-bg: rgba(248, 250, 252, 0.8);\n  --mode-selection-btn-text: #475569;\n  --mode-selection-btn-hover: rgba(241, 245, 249, 0.95);\n  --mode-selection-float-bg: rgba(255, 255, 255, 0.9);\n  --mode-selection-float-hover: rgba(248, 250, 252, 1);\n  --mode-selection-modal-bg: #ffffff;\n}\n\n/* å“åº”å¼ */\n@media (max-width: 768px) {\n.mode-selection-container[data-v-8882032c] {\n    align-items: flex-start;\n    justify-content: flex-start;\n}\n.selection-content[data-v-8882032c] {\n    padding: 2rem 1.5rem;\n    gap: 2rem;\n    max-height: none;\n}\n.main-title[data-v-8882032c] {\n    font-size: 2.2rem;\n    letter-spacing: 0.3em;\n}\n.title-version-row[data-v-8882032c] {\n    flex-direction: column;\n    gap: 0.5rem;\n}\n.gate-container[data-v-8882032c] {\n    flex-direction: column;\n    align-items: center;\n}\n.gate-card[data-v-8882032c] {\n    width: 100%;\n    max-width: 320px;\n    padding: 2rem 1.5rem;\n}\n.start-actions-container[data-v-8882032c] {\n    flex-direction: column;\n    width: 100%;\n    max-width: 280px;\n}\n.action-btn[data-v-8882032c] {\n    width: 100%;\n    justify-content: center;\n}\n}\n@media (max-width: 480px) {\n.mode-selection-container[data-v-8882032c] {\n    padding: 0.75rem;\n    align-items: flex-start;\n    justify-content: flex-start;\n    padding-top: calc(0.75rem + env(safe-area-inset-top));\n    padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));\n}\n.selection-content[data-v-8882032c] {\n    padding: 1.25rem 1rem;\n    gap: 1.25rem;\n    border-radius: 12px;\n    max-height: none;\n}\n.main-title[data-v-8882032c] {\n    font-size: 1.6rem;\n    letter-spacing: 0.2em;\n}\n.sub-title[data-v-8882032c] {\n    font-size: 0.85rem;\n}\n.gate-card[data-v-8882032c] {\n    padding: 1.25rem 1rem;\n}\n.gate-icon[data-v-8882032c] {\n    margin-bottom: 1rem;\n}\n.gate-icon svg[data-v-8882032c] {\n    width: 36px;\n    height: 36px;\n}\n.gate-title[data-v-8882032c] {\n    font-size: 1.1rem;\n}\n.gate-description[data-v-8882032c] {\n    font-size: 0.85rem;\n}\n.gate-detail[data-v-8882032c] {\n    font-size: 0.75rem;\n}\n.privacy-notice[data-v-8882032c] {\n    padding: 0.6rem 0.8rem;\n}\n.privacy-notice p[data-v-8882032c] {\n    font-size: 0.7rem;\n}\n.action-btn[data-v-8882032c] {\n    padding: 0.7rem 1.2rem;\n    font-size: 0.85rem;\n}\n.auth-status-badge[data-v-8882032c] {\n    bottom: 12px;\n    left: 12px;\n}\n.auth-status-content[data-v-8882032c] {\n    padding: 0.4rem 0.7rem;\n}\n.status-text[data-v-8882032c] {\n    font-size: 0.7rem;\n}\n}\n\n/* è¶…å°å±å¹•é€‚é… (360pxä»¥ä¸‹) */\n@media (max-width: 360px) {\n.mode-selection-container[data-v-8882032c] {\n    padding: 0.5rem;\n    padding-top: calc(0.5rem + env(safe-area-inset-top));\n    padding-bottom: calc(0.5rem + env(safe-area-inset-bottom));\n}\n.selection-content[data-v-8882032c] {\n    padding: 1rem 0.75rem;\n    gap: 1rem;\n}\n.main-title[data-v-8882032c] {\n    font-size: 1.4rem;\n}\n.sub-title[data-v-8882032c] {\n    font-size: 0.8rem;\n    letter-spacing: 0.1em;\n}\n.gate-card[data-v-8882032c] {\n    padding: 1rem 0.75rem;\n}\n.gate-title[data-v-8882032c] {\n    font-size: 1rem;\n}\n}\n",""]);const s=i},2031:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-57971540] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.75);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 3000;\n  padding: 20px;\n  backdrop-filter: blur(4px);\n  animation: fadeIn-57971540 0.2s ease-out;\n}\n@keyframes fadeIn-57971540 {\nfrom {\n    opacity: 0;\n}\nto {\n    opacity: 1;\n}\n}\n.deep-cultivation-modal[data-v-57971540] {\n  background: var(--color-surface);\n  border-radius: 16px;\n  width: 100%;\n  max-width: 600px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n  animation: slideUp-57971540 0.3s cubic-bezier(0.16, 1, 0.3, 1);\n}\n@keyframes slideUp-57971540 {\nfrom {\n    opacity: 0;\n    transform: translateY(30px) scale(0.95);\n}\nto {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n}\n}\n.modal-header[data-v-57971540] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px;\n  border-bottom: 1px solid var(--color-border);\n  background: linear-gradient(135deg, var(--color-surface-light), rgba(var(--color-primary-rgb), 0.05));\n}\n.modal-header h3[data-v-57971540] {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-text);\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.close-btn[data-v-57971540] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 8px;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.close-btn[data-v-57971540]:hover {\n  background: var(--color-danger);\n  color: white;\n}\n.modal-content[data-v-57971540] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n\n/* åŠŸæ³•ä¿¡æ¯åŒºåŸŸ */\n.technique-info-section[data-v-57971540] {\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.info-header[data-v-57971540] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.technique-icon[data-v-57971540] {\n  font-size: 2.5rem;\n  width: 60px;\n  height: 60px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12px;\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.1));\n}\n.technique-icon.quality-ç¥[data-v-57971540] { background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(248, 113, 113, 0.2));\n}\n.technique-icon.quality-ä»™[data-v-57971540] { background: linear-gradient(135deg, rgba(245, 158, 11, 0.2), rgba(251, 191, 36, 0.2));\n}\n.technique-icon.quality-å¤©[data-v-57971540] { background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(192, 132, 252, 0.2));\n}\n.technique-icon.quality-åœ°[data-v-57971540] { background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(96, 165, 250, 0.2));\n}\n.technique-icon.quality-ç„[data-v-57971540] { background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(52, 211, 153, 0.2));\n}\n.technique-icon.quality-é»„[data-v-57971540] { background: linear-gradient(135deg, rgba(250, 204, 21, 0.2), rgba(253, 224, 71, 0.2));\n}\n.technique-details[data-v-57971540] {\n  flex: 1;\n}\n.technique-name[data-v-57971540] {\n  font-size: 1.25rem;\n  font-weight: 700;\n  margin: 0 0 8px 0;\n  color: var(--color-text);\n}\n.technique-name.quality-ç¥[data-v-57971540] { color: #dc2626;\n}\n.technique-name.quality-ä»™[data-v-57971540] { color: #f59e0b;\n}\n.technique-name.quality-å¤©[data-v-57971540] { color: #a855f7;\n}\n.technique-name.quality-åœ°[data-v-57971540] { color: #3b82f6;\n}\n.technique-name.quality-ç„[data-v-57971540] { color: #10b981;\n}\n.technique-name.quality-é»„[data-v-57971540] { color: #facc15;\n}\n.technique-quality[data-v-57971540] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n\n/* è¿›åº¦æ¡ */\n.progress-section[data-v-57971540] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.progress-label[data-v-57971540] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.progress-percent[data-v-57971540] {\n  color: var(--color-primary);\n  font-size: 1rem;\n}\n.progress-bar-bg[data-v-57971540] {\n  height: 12px;\n  background: rgba(var(--color-border-rgb), 0.3);\n  border-radius: 999px;\n  overflow: hidden;\n  position: relative;\n}\n.progress-bar-fill[data-v-57971540] {\n  height: 100%;\n  background: linear-gradient(90deg, var(--color-primary), var(--color-accent));\n  border-radius: 999px;\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  position: relative;\n}\n.progress-bar-fill[data-v-57971540]::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);\n  animation: shine-57971540 2s infinite;\n}\n@keyframes shine-57971540 {\nto {\n    left: 100%;\n}\n}\n\n/* æ•ˆæœåˆ—è¡¨ */\n.effects-section[data-v-57971540] {\n  border-top: 1px solid var(--color-border);\n  padding-top: 12px;\n}\n.effects-section h5[data-v-57971540] {\n  margin: 0 0 8px 0;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.effects-list[data-v-57971540] {\n  list-style: none;\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.effects-list li[data-v-57971540] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.effect-icon[data-v-57971540] {\n  font-size: 1rem;\n}\n.attr-bonus[data-v-57971540] {\n  padding: 2px 8px;\n  background: rgba(var(--color-success-rgb), 0.1);\n  color: var(--color-success);\n  border-radius: 4px;\n  font-weight: 500;\n  margin-left: 4px;\n}\n\n/* ä¿®ç‚¼å¤©æ•°é€‰æ‹©åŒºåŸŸ */\n.cultivation-days-section[data-v-57971540] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.section-label[data-v-57971540] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin: 0;\n}\n.section-hint[data-v-57971540] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  margin: 0;\n  line-height: 1.5;\n}\n.input-group[data-v-57971540] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.days-input[data-v-57971540] {\n  flex: 1;\n  padding: 12px 16px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  border: 2px solid var(--color-border);\n  border-radius: 8px;\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  transition: all 0.2s;\n}\n.days-input[data-v-57971540]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  background: var(--color-surface);\n}\n.input-unit[data-v-57971540] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n}\n\n/* å¿«æ·æŒ‰é’® */\n.preset-buttons[data-v-57971540] {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 8px;\n}\n.preset-btn[data-v-57971540] {\n  padding: 10px;\n  border: 2px solid var(--color-border);\n  border-radius: 8px;\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.preset-btn[data-v-57971540]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n}\n.preset-btn.active[data-v-57971540] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n\n/* æç¤ºä¿¡æ¯ */\n.cultivation-hints[data-v-57971540] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 16px;\n  background: rgba(var(--color-info-rgb), 0.05);\n  border: 1px solid rgba(var(--color-info-rgb), 0.2);\n  border-radius: 8px;\n}\n.hint-item[data-v-57971540] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.hint-icon[data-v-57971540] {\n  font-size: 1rem;\n}\n\n/* åº•éƒ¨æŒ‰é’® */\n.modal-footer[data-v-57971540] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  padding: 20px 24px;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  border-radius: 0 0 16px 16px;\n}\n.btn[data-v-57971540] {\n  padding: 10px 24px;\n  border-radius: 8px;\n  font-weight: 600;\n  font-size: 0.95rem;\n  cursor: pointer;\n  transition: all 0.2s;\n  border: none;\n}\n.btn-cancel[data-v-57971540] {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n.btn-cancel[data-v-57971540]:hover {\n  background: var(--color-border);\n}\n.btn-confirm[data-v-57971540] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: white;\n}\n.btn-confirm[data-v-57971540]:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n.btn-confirm[data-v-57971540]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 640px) {\n.deep-cultivation-modal[data-v-57971540] {\n    max-width: 100%;\n    border-radius: 16px 16px 0 0;\n    max-height: 95vh;\n}\n.modal-header[data-v-57971540] {\n    padding: 20px;\n}\n.modal-content[data-v-57971540] {\n    padding: 20px;\n}\n.preset-buttons[data-v-57971540] {\n    grid-template-columns: repeat(2, 1fr);\n}\n.modal-footer[data-v-57971540] {\n    padding: 16px 20px;\n}\n}\n",""]);const s=i},2039:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.game-map-panel[data-v-a3f5bdc2] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: var(--color-background);\n}\n\n/* ä¸–ç•Œä¿¡æ¯å¤´éƒ¨ */\n.world-info-header[data-v-a3f5bdc2] {\n  padding: 12px 16px;\n  background: rgba(255, 255, 255, 0.9);\n  border-bottom: 1px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  backdrop-filter: blur(8px);\n}\n.world-name[data-v-a3f5bdc2] {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: #1e40af;\n  text-shadow: 0 1px 2px rgba(30, 64, 175, 0.1);\n}\n.world-background[data-v-a3f5bdc2] {\n  font-size: 0.85rem;\n  color: #64748b;\n  max-width: 400px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* åœ°å›¾å®¹å™¨ */\n.map-container[data-v-a3f5bdc2] {\n  flex: 1;\n  position: relative;\n  overflow: hidden;\n  border-radius: 12px;\n  border: 3px solid #cbd5e1;\n  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 50%, #dbeafe 100%);\n  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);\n}\ncanvas[data-v-a3f5bdc2] {\n  display: block;\n  width: 100%;\n  height: 100%;\n  cursor: grab;\n}\ncanvas[data-v-a3f5bdc2]:active {\n  cursor: grabbing;\n}\n\n/* åœ°ç‚¹ä¿¡æ¯å¼¹çª— */\n.location-popup[data-v-a3f5bdc2] {\n  position: absolute;\n  background: rgba(255, 255, 255, 0.98);\n  backdrop-filter: blur(12px);\n  border: 2px solid rgba(59, 130, 246, 0.3);\n  border-radius: 16px;\n  padding: 20px;\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);\n  min-width: 320px;\n  max-width: 450px;\n  pointer-events: auto;\n  z-index: 2000;\n}\n.popup-header[data-v-a3f5bdc2] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 16px;\n}\n.popup-header h4[data-v-a3f5bdc2] {\n  margin: 0;\n  color: #1e40af;\n  font-size: 1.25rem;\n  font-weight: 700;\n}\n.close-btn[data-v-a3f5bdc2] {\n  width: 28px;\n  height: 28px;\n  border: none;\n  background: rgba(239, 68, 68, 0.1);\n  cursor: pointer;\n  color: #ef4444;\n  font-size: 1.4rem;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n}\n.close-btn[data-v-a3f5bdc2]:hover {\n  background: rgba(220, 38, 38, 0.2);\n  color: #dc2626;\n  transform: scale(1.1);\n}\n.popup-content[data-v-a3f5bdc2] {\n  font-size: 0.95rem;\n  line-height: 1.6;\n}\n.location-type[data-v-a3f5bdc2] {\n  color: #6366f1;\n  font-weight: 700;\n  margin: 0 0 10px 0;\n  font-size: 1rem;\n}\n.location-desc[data-v-a3f5bdc2] {\n  color: #374151;\n  margin: 0 0 14px 0;\n  font-weight: 500;\n}\n.location-detail[data-v-a3f5bdc2] {\n  color: #6b7280;\n  margin: 8px 0;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n.relation-friendly[data-v-a3f5bdc2] {\n  color: #10b981;\n  font-weight: 700;\n}\n.relation-hostile[data-v-a3f5bdc2] {\n  color: #ef4444;\n  font-weight: 700;\n}\n.relation-neutral[data-v-a3f5bdc2] {\n  color: #6b7280;\n  font-weight: 600;\n}\n\n/* åˆå§‹åŒ–åœ°å›¾è¦†ç›–å±‚ */\n.initialize-map-overlay[data-v-a3f5bdc2] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.95);\n  backdrop-filter: blur(8px);\n  z-index: 2000;\n}\n.initialize-prompt[data-v-a3f5bdc2] {\n  text-align: center;\n  padding: 3rem 2rem;\n  max-width: 500px;\n  animation: fadeIn-a3f5bdc2 0.3s ease-in-out;\n}\n@keyframes fadeIn-a3f5bdc2 {\nfrom {\n    opacity: 0;\n    transform: translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.prompt-icon[data-v-a3f5bdc2] {\n  margin: 0 auto 1.5rem;\n  width: 80px;\n  height: 80px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #3b82f6, #60a5fa);\n  border-radius: 50%;\n  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.3);\n}\n.map-icon[data-v-a3f5bdc2] {\n  width: 48px;\n  height: 48px;\n  color: white;\n}\n.initialize-prompt h3[data-v-a3f5bdc2] {\n  margin: 0 0 1rem 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: #1e40af;\n}\n.initialize-prompt p[data-v-a3f5bdc2] {\n  margin: 0 0 2rem 0;\n  font-size: 1rem;\n  color: #64748b;\n  line-height: 1.6;\n}\n.initialize-btn[data-v-a3f5bdc2] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 1rem 2rem;\n  background: linear-gradient(135deg, #3b82f6, #60a5fa);\n  color: white;\n  border: none;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);\n}\n.initialize-btn[data-v-a3f5bdc2]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 24px rgba(59, 130, 246, 0.4);\n  background: linear-gradient(135deg, #2563eb, #3b82f6);\n}\n.initialize-btn[data-v-a3f5bdc2]:active {\n  transform: translateY(0);\n}\n.btn-icon[data-v-a3f5bdc2] {\n  width: 24px;\n  height: 24px;\n}\n.loading-spinner[data-v-a3f5bdc2] {\n  width: 60px;\n  height: 60px;\n  margin: 0 auto 1.5rem;\n  border: 4px solid rgba(59, 130, 246, 0.2);\n  border-top-color: #3b82f6;\n  border-radius: 50%;\n  animation: spin-a3f5bdc2 1s linear infinite;\n}\n@keyframes spin-a3f5bdc2 {\nto { transform: rotate(360deg);\n}\n}\n.status-text[data-v-a3f5bdc2] {\n  font-size: 0.9rem;\n  color: #3b82f6;\n  margin-top: 1rem;\n  min-height: 1.5rem;\n}\n\n/* åœ°å›¾å›¾ä¾‹ */\n.map-legend[data-v-a3f5bdc2] {\n  position: absolute;\n  bottom: 24px;\n  right: 24px;\n  background: rgba(255, 255, 255, 0.98);\n  backdrop-filter: blur(12px);\n  border-radius: 16px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n  padding: 20px;\n  z-index: 1000;\n  min-width: 200px;\n  max-width: 280px;\n  border: 2px solid rgba(59, 130, 246, 0.3);\n  pointer-events: auto;\n}\n.legend-title[data-v-a3f5bdc2] {\n  font-weight: 700;\n  color: #1e40af;\n  margin-bottom: 16px;\n  font-size: 1.1rem;\n  text-align: center;\n  border-bottom: 3px solid #3b82f6;\n  padding-bottom: 10px;\n}\n.legend-items[data-v-a3f5bdc2] {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  max-height: 400px;\n  overflow-y: auto;\n}\n.legend-items[data-v-a3f5bdc2]::-webkit-scrollbar {\n  width: 6px;\n}\n.legend-items[data-v-a3f5bdc2]::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 3px;\n}\n.legend-items[data-v-a3f5bdc2]::-webkit-scrollbar-thumb {\n  background: rgba(59, 130, 246, 0.3);\n  border-radius: 3px;\n}\n.legend-items[data-v-a3f5bdc2]::-webkit-scrollbar-thumb:hover {\n  background: rgba(59, 130, 246, 0.5);\n}\n.legend-item[data-v-a3f5bdc2] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  font-size: 0.95rem;\n  color: #374151;\n  padding: 6px 8px;\n  font-weight: 600;\n  border-radius: 8px;\n  transition: background 0.2s;\n}\n.legend-item[data-v-a3f5bdc2]:hover {\n  background: rgba(59, 130, 246, 0.05);\n}\n.legend-icon[data-v-a3f5bdc2] {\n  width: 24px;\n  height: 24px;\n  flex-shrink: 0;\n  display: block;\n}\n\n/* å…¨å±æ¨¡å¼ä¼˜åŒ– */\n.game-map-panel[data-v-a3f5bdc2]:fullscreen {\n  background: #1a1a2e;\n}\n.game-map-panel:fullscreen .map-container[data-v-a3f5bdc2] {\n  border: none;\n  border-radius: 0;\n}\n.game-map-panel:fullscreen .map-legend[data-v-a3f5bdc2] {\n  background: rgba(0, 0, 0, 0.8);\n  color: white;\n}\n.game-map-panel:fullscreen .location-popup[data-v-a3f5bdc2] {\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 640px) {\n.map-legend[data-v-a3f5bdc2] {\n    bottom: 10px;\n    right: 10px;\n    padding: 8px;\n    min-width: 120px;\n}\n.location-popup[data-v-a3f5bdc2] {\n    min-width: auto;\n    max-width: calc(100vw - 40px);\n}\n}\n",""]);const s=i},2224:e=>{"use strict";e.exports=_},2271:(e,t,n)=>{"use strict";var a=n(453),r=n(6556),o=n(8859),i=n(507),s=n(9675),l=a("%WeakMap%",!0),c=r("WeakMap.prototype.get",!0),d=r("WeakMap.prototype.set",!0),u=r("WeakMap.prototype.has",!0),m=r("WeakMap.prototype.delete",!0);e.exports=l?function(){var e,t,n={assert:function(e){if(!n.has(e))throw new s("Side channel does not contain "+o(e))},delete:function(n){if(l&&n&&("object"==typeof n||"function"==typeof n)){if(e)return m(e,n)}else if(i&&t)return t.delete(n);return!1},get:function(n){return l&&n&&("object"==typeof n||"function"==typeof n)&&e?c(e,n):t&&t.get(n)},has:function(n){return l&&n&&("object"==typeof n||"function"==typeof n)&&e?u(e,n):!!t&&t.has(n)},set:function(n,a){l&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new l),d(e,n,a)):i&&(t||(t=i()),t.set(n,a))}};return n}:i},2288:(e,t,n)=>{"use strict";n.d(t,{o:()=>xt,aiService:()=>kt});var a={};function r(e,t){return function(){return e.apply(t,arguments)}}n.r(a),n.d(a,{hasBrowserEnv:()=>pe,hasStandardBrowserEnv:()=>ge,hasStandardBrowserWebWorkerEnv:()=>he,navigator:()=>fe,origin:()=>ve});const{toString:o}=Object.prototype,{getPrototypeOf:i}=Object,{iterator:s,toStringTag:l}=Symbol,c=(d=Object.create(null),e=>{const t=o.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),m=e=>t=>typeof t===e,{isArray:p}=Array,f=m("undefined");function g(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&b(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const h=u("ArrayBuffer"),v=m("string"),b=m("function"),y=m("number"),x=e=>null!==e&&"object"==typeof e,k=e=>{if("object"!==c(e))return!1;const t=i(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||l in e||s in e)},w=u("Date"),E=u("File"),N=u("Blob"),S=u("FileList"),V=u("URLSearchParams"),[_,C,A,D]=["ReadableStream","Request","Response","Headers"].map(u);function T(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let a,r;if("object"!=typeof e&&(e=[e]),p(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(g(e))return;const r=n?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let i;for(a=0;a<o;a++)i=r[a],t.call(null,e[i],i,e)}}function B(e,t){if(g(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a,r=n.length;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,z=e=>!f(e)&&e!==I,M=(P="undefined"!=typeof Uint8Array&&i(Uint8Array),e=>P&&e instanceof P);var P;const R=u("HTMLFormElement"),$=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),O=u("RegExp"),L=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};T(n,(n,r)=>{let o;!1!==(o=t(n,r,e))&&(a[r]=o||n)}),Object.defineProperties(e,a)},F=u("AsyncFunction"),j=(U="function"==typeof setImmediate,q=b(I.postMessage),U?setImmediate:q?(G=`axios@${Math.random()}`,H=[],I.addEventListener("message",({source:e,data:t})=>{e===I&&t===G&&H.length&&H.shift()()},!1),e=>{H.push(e),I.postMessage(G,"*")}):e=>setTimeout(e));var U,q,G,H;const Y="undefined"!=typeof queueMicrotask?queueMicrotask.bind(I):"undefined"!=typeof process&&process.nextTick||j,W={isArray:p,isArrayBuffer:h,isBuffer:g,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||b(e.append)&&("formdata"===(t=c(e))||"object"===t&&b(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer),t},isString:v,isNumber:y,isBoolean:e=>!0===e||!1===e,isObject:x,isPlainObject:k,isEmptyObject:e=>{if(!x(e)||g(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(e){return!1}},isReadableStream:_,isRequest:C,isResponse:A,isHeaders:D,isUndefined:f,isDate:w,isFile:E,isBlob:N,isRegExp:O,isFunction:b,isStream:e=>x(e)&&b(e.pipe),isURLSearchParams:V,isTypedArray:M,isFileList:S,forEach:T,merge:function e(){const{caseless:t,skipUndefined:n}=z(this)&&this||{},a={},r=(r,o)=>{const i=t&&B(a,o)||o;k(a[i])&&k(r)?a[i]=e(a[i],r):k(r)?a[i]=e({},r):p(r)?a[i]=r.slice():n&&f(r)||(a[i]=r)};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&T(arguments[e],r);return a},extend:(e,t,n,{allOwnKeys:a}={})=>(T(t,(t,a)=>{n&&b(t)?e[a]=r(t,n):e[a]=t},{allOwnKeys:a}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,a)=>{let r,o,s;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),o=r.length;o-- >0;)s=r[o],a&&!a(s,e,t)||l[s]||(t[s]=e[s],l[s]=!0);e=!1!==n&&i(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return-1!==a&&a===n},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!y(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[s]).call(e);let a;for(;(a=n.next())&&!a.done;){const n=a.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const a=[];for(;null!==(n=e.exec(t));)a.push(n);return a},isHTMLForm:R,hasOwnProperty:$,hasOwnProp:$,reduceDescriptors:L,freezeMethods:e=>{L(e,(t,n)=>{if(b(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const a=e[n];b(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},a=e=>{e.forEach(e=>{n[e]=!0})};return p(e)?a(e):a(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:B,global:I,isContextDefined:z,isSpecCompliantForm:function(e){return!!(e&&b(e.append)&&"FormData"===e[l]&&e[s])},toJSONObject:e=>{const t=new Array(10),n=(e,a)=>{if(x(e)){if(t.indexOf(e)>=0)return;if(g(e))return e;if(!("toJSON"in e)){t[a]=e;const r=p(e)?[]:{};return T(e,(e,t)=>{const o=n(e,a+1);!f(o)&&(r[t]=o)}),t[a]=void 0,r}}return e};return n(e,0)},isAsyncFn:F,isThenable:e=>e&&(x(e)||b(e))&&b(e.then)&&b(e.catch),setImmediate:j,asap:Y,isIterable:e=>null!=e&&b(e[s])};function X(e,t,n,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}W.inherits(X,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const J=X.prototype,K={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{K[e]={value:e}}),Object.defineProperties(X,K),Object.defineProperty(J,"isAxiosError",{value:!0}),X.from=(e,t,n,a,r,o)=>{const i=Object.create(J);W.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const s=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return X.call(i,s,l,n,a,r),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",o&&Object.assign(i,o),i};const Q=X;function Z(e){return W.isPlainObject(e)||W.isArray(e)}function ee(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function te(e,t,n){return e?e.concat(t).map(function(e,t){return e=ee(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const ne=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)}),ae=function(e,t,n){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(n=W.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!W.isUndefined(t[e])})).metaTokens,r=n.visitor||c,o=n.dots,i=n.indexes,s=(n.Blob||"undefined"!=typeof Blob&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(W.isDate(e))return e.toISOString();if(W.isBoolean(e))return e.toString();if(!s&&W.isBlob(e))throw new Q("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(e)||W.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let s=e;if(e&&!r&&"object"==typeof e)if(W.endsWith(n,"{}"))n=a?n:n.slice(0,-2),e=JSON.stringify(e);else if(W.isArray(e)&&function(e){return W.isArray(e)&&!e.some(Z)}(e)||(W.isFileList(e)||W.endsWith(n,"[]"))&&(s=W.toArray(e)))return n=ee(n),s.forEach(function(e,a){!W.isUndefined(e)&&null!==e&&t.append(!0===i?te([n],a,o):null===i?n:n+"[]",l(e))}),!1;return!!Z(e)||(t.append(te(r,n,o),l(e)),!1)}const d=[],u=Object.assign(ne,{defaultVisitor:c,convertValue:l,isVisitable:Z});if(!W.isObject(e))throw new TypeError("data must be an object");return function e(n,a){if(!W.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+a.join("."));d.push(n),W.forEach(n,function(n,o){!0===(!(W.isUndefined(n)||null===n)&&r.call(t,n,W.isString(o)?o.trim():o,a,u))&&e(n,a?a.concat(o):[o])}),d.pop()}}(e),t};function re(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function oe(e,t){this._pairs=[],e&&ae(e,this,t)}const ie=oe.prototype;ie.append=function(e,t){this._pairs.push([e,t])},ie.toString=function(e){const t=e?function(t){return e.call(this,t,re)}:re;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const se=oe;function le(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ce(e,t,n){if(!t)return e;const a=n&&n.encode||le;W.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let o;if(o=r?r(t,n):W.isURLSearchParams(t)?t.toString():new se(t,n).toString(a),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const de=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(t){null!==t&&e(t)})}},ue={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},me={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:se,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},pe="undefined"!=typeof window&&"undefined"!=typeof document,fe="object"==typeof navigator&&navigator||void 0,ge=pe&&(!fe||["ReactNative","NativeScript","NS"].indexOf(fe.product)<0),he="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ve=pe&&window.location.href||"http://localhost",be={...a,...me},ye=function(e){function t(e,n,a,r){let o=e[r++];if("__proto__"===o)return!0;const i=Number.isFinite(+o),s=r>=e.length;return o=!o&&W.isArray(a)?a.length:o,s?(W.hasOwnProp(a,o)?a[o]=[a[o],n]:a[o]=n,!i):(a[o]&&W.isObject(a[o])||(a[o]=[]),t(e,n,a[o],r)&&W.isArray(a[o])&&(a[o]=function(e){const t={},n=Object.keys(e);let a;const r=n.length;let o;for(a=0;a<r;a++)o=n[a],t[o]=e[o];return t}(a[o])),!i)}if(W.isFormData(e)&&W.isFunction(e.entries)){const n={};return W.forEachEntry(e,(e,a)=>{t(function(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,n,0)}),n}return null},xe={transitional:ue,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",a=n.indexOf("application/json")>-1,r=W.isObject(e);if(r&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return a?JSON.stringify(ye(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ae(e,new be.classes.URLSearchParams,{visitor:function(e,t,n,a){return be.isNode&&W.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=W.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ae(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||a?(t.setContentType("application/json",!1),function(e){if(W.isString(e))try{return(0,JSON.parse)(e),W.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xe.transitional,n=t&&t.forcedJSONParsing,a="json"===this.responseType;if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(n&&!this.responseType||a)){const n=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e,this.parseReviver)}catch(e){if(n){if("SyntaxError"===e.name)throw Q.from(e,Q.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:be.classes.FormData,Blob:be.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],e=>{xe.headers[e]={}});const ke=xe,we=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ee=Symbol("internals");function Ne(e){return e&&String(e).trim().toLowerCase()}function Se(e){return!1===e||null==e?e:W.isArray(e)?e.map(Se):String(e)}function Ve(e,t,n,a,r){return W.isFunction(a)?a.call(this,t,n):(r&&(t=n),W.isString(t)?W.isString(a)?-1!==t.indexOf(a):W.isRegExp(a)?a.test(t):void 0:void 0)}class _e{constructor(e){e&&this.set(e)}set(e,t,n){const a=this;function r(e,t,n){const r=Ne(t);if(!r)throw new Error("header name must be a non-empty string");const o=W.findKey(a,r);(!o||void 0===a[o]||!0===n||void 0===n&&!1!==a[o])&&(a[o||t]=Se(e))}const o=(e,t)=>W.forEach(e,(e,n)=>r(e,n,t));if(W.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(W.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,a,r;return e&&e.split("\n").forEach(function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),a=e.substring(r+1).trim(),!n||t[n]&&we[n]||("set-cookie"===n?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t})(e),t);else if(W.isObject(e)&&W.isIterable(e)){let n,a,r={};for(const t of e){if(!W.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[a=t[0]]=(n=r[a])?W.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=Ne(e)){const n=W.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}(e);if(W.isFunction(t))return t.call(this,e,n);if(W.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ne(e)){const n=W.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ve(0,this[n],n,t))}return!1}delete(e,t){const n=this;let a=!1;function r(e){if(e=Ne(e)){const r=W.findKey(n,e);!r||t&&!Ve(0,n[r],r,t)||(delete n[r],a=!0)}}return W.isArray(e)?e.forEach(r):r(e),a}clear(e){const t=Object.keys(this);let n=t.length,a=!1;for(;n--;){const r=t[n];e&&!Ve(0,this[r],r,e,!0)||(delete this[r],a=!0)}return a}normalize(e){const t=this,n={};return W.forEach(this,(a,r)=>{const o=W.findKey(n,r);if(o)return t[o]=Se(a),void delete t[r];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(r):String(r).trim();i!==r&&delete t[r],t[i]=Se(a),n[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return W.forEach(this,(n,a)=>{null!=n&&!1!==n&&(t[a]=e&&W.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[Ee]=this[Ee]={accessors:{}}).accessors,n=this.prototype;function a(e){const a=Ne(e);t[a]||(function(e,t){const n=W.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(e,n,r){return this[a].call(this,t,e,n,r)},configurable:!0})})}(n,e),t[a]=!0)}return W.isArray(e)?e.forEach(a):a(e),this}}_e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),W.reduceDescriptors(_e.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),W.freezeMethods(_e);const Ce=_e;function Ae(e,t){const n=this||ke,a=t||n,r=Ce.from(a.headers);let o=a.data;return W.forEach(e,function(e){o=e.call(n,o,r.normalize(),t?t.status:void 0)}),r.normalize(),o}function De(e){return!(!e||!e.__CANCEL__)}function Te(e,t,n){Q.call(this,null==e?"canceled":e,Q.ERR_CANCELED,t,n),this.name="CanceledError"}W.inherits(Te,Q,{__CANCEL__:!0});const Be=Te;function Ie(e,t,n){const a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new Q("Request failed with status code "+n.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const ze=(e,t,n=3)=>{let a=0;const r=function(e,t){e=e||10;const n=new Array(e),a=new Array(e);let r,o=0,i=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=a[i];r||(r=l),n[o]=s,a[o]=l;let d=i,u=0;for(;d!==o;)u+=n[d++],d%=e;if(o=(o+1)%e,o===i&&(i=(i+1)%e),l-r<t)return;const m=c&&l-c;return m?Math.round(1e3*u/m):void 0}}(50,250);return function(e,t){let n,a,r=0,o=1e3/t;const i=(t,o=Date.now())=>{r=o,n=null,a&&(clearTimeout(a),a=null),e(...t)};return[(...e)=>{const t=Date.now(),s=t-r;s>=o?i(e,t):(n=e,a||(a=setTimeout(()=>{a=null,i(n)},o-s)))},()=>n&&i(n)]}(n=>{const o=n.loaded,i=n.lengthComputable?n.total:void 0,s=o-a,l=r(s);a=o,e({loaded:o,total:i,progress:i?o/i:void 0,bytes:s,rate:l||void 0,estimated:l&&i&&o<=i?(i-o)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},Me=(e,t)=>{const n=null!=e;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},Pe=e=>(...t)=>W.asap(()=>e(...t)),Re=be.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,be.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(be.origin),be.navigator&&/(msie|trident)/i.test(be.navigator.userAgent)):()=>!0,$e=be.hasStandardBrowserEnv?{write(e,t,n,a,r,o){const i=[e+"="+encodeURIComponent(t)];W.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),W.isString(a)&&i.push("path="+a),W.isString(r)&&i.push("domain="+r),!0===o&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Oe(e,t,n){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Le=e=>e instanceof Ce?{...e}:e;function Fe(e,t){t=t||{};const n={};function a(e,t,n,a){return W.isPlainObject(e)&&W.isPlainObject(t)?W.merge.call({caseless:a},e,t):W.isPlainObject(t)?W.merge({},t):W.isArray(t)?t.slice():t}function r(e,t,n,r){return W.isUndefined(t)?W.isUndefined(e)?void 0:a(void 0,e,0,r):a(e,t,0,r)}function o(e,t){if(!W.isUndefined(t))return a(void 0,t)}function i(e,t){return W.isUndefined(t)?W.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function s(n,r,o){return o in t?a(n,r):o in e?a(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s,headers:(e,t,n)=>r(Le(e),Le(t),0,!0)};return W.forEach(Object.keys({...e,...t}),function(a){const o=l[a]||r,i=o(e[a],t[a],a);W.isUndefined(i)&&o!==s||(n[a]=i)}),n}const je=e=>{const t=Fe({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:o,headers:i,auth:s}=t;if(t.headers=i=Ce.from(i),t.url=ce(Oe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),s&&i.set("Authorization","Basic "+btoa((s.username||"")+":"+(s.password?unescape(encodeURIComponent(s.password)):""))),W.isFormData(n))if(be.hasStandardBrowserEnv||be.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(W.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,n])=>{t.includes(e.toLowerCase())&&i.set(e,n)})}if(be.hasStandardBrowserEnv&&(a&&W.isFunction(a)&&(a=a(t)),a||!1!==a&&Re(t.url))){const e=r&&o&&$e.read(o);e&&i.set(r,e)}return t},Ue="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const a=je(e);let r=a.data;const o=Ce.from(a.headers).normalize();let i,s,l,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:p}=a;function f(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(i),a.signal&&a.signal.removeEventListener("abort",i)}let g=new XMLHttpRequest;function h(){if(!g)return;const a=Ce.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Ie(function(e){t(e),f()},function(e){n(e),f()},{data:u&&"text"!==u&&"json"!==u?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:a,config:e,request:g}),g=null}g.open(a.method.toUpperCase(),a.url,!0),g.timeout=a.timeout,"onloadend"in g?g.onloadend=h:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(h)},g.onabort=function(){g&&(n(new Q("Request aborted",Q.ECONNABORTED,e,g)),g=null)},g.onerror=function(t){const a=t&&t.message?t.message:"Network Error",r=new Q(a,Q.ERR_NETWORK,e,g);r.event=t||null,n(r),g=null},g.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const r=a.transitional||ue;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),n(new Q(t,r.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,e,g)),g=null},void 0===r&&o.setContentType(null),"setRequestHeader"in g&&W.forEach(o.toJSON(),function(e,t){g.setRequestHeader(t,e)}),W.isUndefined(a.withCredentials)||(g.withCredentials=!!a.withCredentials),u&&"json"!==u&&(g.responseType=a.responseType),p&&([l,d]=ze(p,!0),g.addEventListener("progress",l)),m&&g.upload&&([s,c]=ze(m),g.upload.addEventListener("progress",s),g.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(i=t=>{g&&(n(!t||t.type?new Be(null,e,g):t),g.abort(),g=null)},a.cancelToken&&a.cancelToken.subscribe(i),a.signal&&(a.signal.aborted?i():a.signal.addEventListener("abort",i)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);v&&-1===be.protocols.indexOf(v)?n(new Q("Unsupported protocol "+v+":",Q.ERR_BAD_REQUEST,e)):g.send(r||null)})},qe=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,a=new AbortController;const r=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;a.abort(t instanceof Q?t:new Be(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,r(new Q(`timeout ${t} of ms exceeded`,Q.ETIMEDOUT))},t);const i=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)}),e=null)};e.forEach(e=>e.addEventListener("abort",r));const{signal:s}=a;return s.unsubscribe=()=>W.asap(i),s}},Ge=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let a,r=0;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},He=(e,t,n,a)=>{const r=async function*(e,t){for await(const n of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}}(e))yield*Ge(n,t)}(e,t);let o,i=0,s=e=>{o||(o=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await r.next();if(t)return s(),void e.close();let o=a.byteLength;if(n){let e=i+=o;n(e)}e.enqueue(new Uint8Array(a))}catch(e){throw s(e),e}},cancel:e=>(s(e),r.return())},{highWaterMark:2})},{isFunction:Ye}=W,We=(({Request:e,Response:t})=>({Request:e,Response:t}))(W.global),{ReadableStream:Xe,TextEncoder:Je}=W.global,Ke=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},Qe=e=>{e=W.merge.call({skipUndefined:!0},We,e);const{fetch:t,Request:n,Response:a}=e,r=t?Ye(t):"function"==typeof fetch,o=Ye(n),i=Ye(a);if(!r)return!1;const s=r&&Ye(Xe),l=r&&("function"==typeof Je?(c=new Je,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const d=o&&s&&Ke(()=>{let e=!1;const t=new n(be.origin,{body:new Xe,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&s&&Ke(()=>W.isReadableStream(new a("").body)),m={stream:u&&(e=>e.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,n)=>{let a=t&&t[e];if(a)return a.call(t);throw new Q(`Response type '${e}' is not supported`,Q.ERR_NOT_SUPPORT,n)})});return async e=>{let{url:r,method:i,data:s,signal:c,cancelToken:p,timeout:f,onDownloadProgress:g,onUploadProgress:h,responseType:v,headers:b,withCredentials:y="same-origin",fetchOptions:x}=je(e),k=t||fetch;v=v?(v+"").toLowerCase():"text";let w=qe([c,p&&p.toAbortSignal()],f),E=null;const N=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let S;try{if(h&&d&&"get"!==i&&"head"!==i&&0!==(S=await(async(e,t)=>{const a=W.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(W.isBlob(e))return e.size;if(W.isSpecCompliantForm(e)){const t=new n(be.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return W.isArrayBufferView(e)||W.isArrayBuffer(e)?e.byteLength:(W.isURLSearchParams(e)&&(e+=""),W.isString(e)?(await l(e)).byteLength:void 0)})(t):a})(b,s))){let e,t=new n(r,{method:"POST",body:s,duplex:"half"});if(W.isFormData(s)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,n]=Me(S,ze(Pe(h)));s=He(t.body,65536,e,n)}}W.isString(y)||(y=y?"include":"omit");const t=o&&"credentials"in n.prototype,c={...x,signal:w,method:i.toUpperCase(),headers:b.normalize().toJSON(),body:s,duplex:"half",credentials:t?y:void 0};E=o&&new n(r,c);let p=await(o?k(E,x):k(r,c));const f=u&&("stream"===v||"response"===v);if(u&&(g||f&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=p[t]});const t=W.toFiniteNumber(p.headers.get("content-length")),[n,r]=g&&Me(t,ze(Pe(g),!0))||[];p=new a(He(p.body,65536,n,()=>{r&&r(),N&&N()}),e)}v=v||"text";let V=await m[W.findKey(m,v)||"text"](p,e);return!f&&N&&N(),await new Promise((t,n)=>{Ie(t,n,{data:V,headers:Ce.from(p.headers),status:p.status,statusText:p.statusText,config:e,request:E})})}catch(t){if(N&&N(),t&&"TypeError"===t.name&&/Load failed|fetch/i.test(t.message))throw Object.assign(new Q("Network Error",Q.ERR_NETWORK,e,E),{cause:t.cause||t});throw Q.from(t,t&&t.code,e,E)}}},Ze=new Map,et=e=>{let t=e?e.env:{};const{fetch:n,Request:a,Response:r}=t,o=[a,r,n];let i,s,l=o.length,c=Ze;for(;l--;)i=o[l],s=c.get(i),void 0===s&&c.set(i,s=l?new Map:Qe(t)),c=s;return s},tt=(et(),{http:null,xhr:Ue,fetch:{get:et}});W.forEach(tt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const nt=e=>`- ${e}`,at=e=>W.isFunction(e)||null===e||!1===e,rt=(e,t)=>{e=W.isArray(e)?e:[e];const{length:n}=e;let a,r;const o={};for(let i=0;i<n;i++){let n;if(a=e[i],r=a,!at(a)&&(r=tt[(n=String(a)).toLowerCase()],void 0===r))throw new Q(`Unknown adapter '${n}'`);if(r&&(W.isFunction(r)||(r=r.get(t))))break;o[n||"#"+i]=r}if(!r){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));let t=n?e.length>1?"since :\n"+e.map(nt).join("\n"):" "+nt(e[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return r};function ot(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Be(null,e)}function it(e){return ot(e),e.headers=Ce.from(e.headers),e.data=Ae.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),rt(e.adapter||ke.adapter,e)(e).then(function(t){return ot(e),t.data=Ae.call(e,e.transformResponse,t),t.headers=Ce.from(t.headers),t},function(t){return De(t)||(ot(e),t&&t.response&&(t.response.data=Ae.call(e,e.transformResponse,t.response),t.response.headers=Ce.from(t.response.headers))),Promise.reject(t)})}const st="1.12.2",lt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{lt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ct={};lt.transitional=function(e,t,n){function a(e,t){return"[Axios v"+st+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,o)=>{if(!1===e)throw new Q(a(r," has been removed"+(t?" in "+t:"")),Q.ERR_DEPRECATED);return t&&!ct[r]&&(ct[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},lt.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const dt={assertOptions:function(e,t,n){if("object"!=typeof e)throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const o=a[r],i=t[o];if(i){const t=e[o],n=void 0===t||i(t,o,e);if(!0!==n)throw new Q("option "+o+" must be "+n,Q.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Q("Unknown option "+o,Q.ERR_BAD_OPTION)}},validators:lt},ut=dt.validators;class mt{constructor(e){this.defaults=e||{},this.interceptors={request:new de,response:new de}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const n=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?n&&!String(e.stack).endsWith(n.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+n):e.stack=n}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Fe(this.defaults,t);const{transitional:n,paramsSerializer:a,headers:r}=t;void 0!==n&&dt.assertOptions(n,{silentJSONParsing:ut.transitional(ut.boolean),forcedJSONParsing:ut.transitional(ut.boolean),clarifyTimeoutError:ut.transitional(ut.boolean)},!1),null!=a&&(W.isFunction(a)?t.paramsSerializer={serialize:a}:dt.assertOptions(a,{encode:ut.function,serialize:ut.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),dt.assertOptions(t,{baseUrl:ut.spelling("baseURL"),withXsrfToken:ut.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&W.merge(r.common,r[t.method]);r&&W.forEach(["delete","get","head","post","put","patch","common"],e=>{delete r[e]}),t.headers=Ce.concat(o,r);const i=[];let s=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!s){const e=[it.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=t;for(;u<d;){const e=i[u++],t=i[u++];try{m=e(m)}catch(e){t.call(this,e);break}}try{c=it.call(this,m)}catch(e){return Promise.reject(e)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ce(Oe((e=Fe(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}W.forEach(["delete","get","head","options"],function(e){mt.prototype[e]=function(t,n){return this.request(Fe(n||{},{method:e,url:t,data:(n||{}).data}))}}),W.forEach(["post","put","patch"],function(e){function t(t){return function(n,a,r){return this.request(Fe(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:a}))}}mt.prototype[e]=t(),mt.prototype[e+"Form"]=t(!0)});const pt=mt;class ft{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const a=new Promise(e=>{n.subscribe(e),t=e}).then(e);return a.cancel=function(){n.unsubscribe(t)},a},e(function(e,a,r){n.reason||(n.reason=new Be(e,a,r),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ft(function(t){e=t}),cancel:e}}}const gt=ft,ht={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ht).forEach(([e,t])=>{ht[t]=e});const vt=ht,bt=function e(t){const n=new pt(t),a=r(pt.prototype.request,n);return W.extend(a,pt.prototype,n,{allOwnKeys:!0}),W.extend(a,n,null,{allOwnKeys:!0}),a.create=function(n){return e(Fe(t,n))},a}(ke);bt.Axios=pt,bt.CanceledError=Be,bt.CancelToken=gt,bt.isCancel=De,bt.VERSION=st,bt.toFormData=ae,bt.AxiosError=Q,bt.Cancel=bt.CanceledError,bt.all=function(e){return Promise.all(e)},bt.spread=function(e){return function(t){return e.apply(null,t)}},bt.isAxiosError=function(e){return W.isObject(e)&&!0===e.isAxiosError},bt.mergeConfig=Fe,bt.AxiosHeaders=Ce,bt.formToJSON=e=>ye(W.isHTMLForm(e)?new FormData(e):e),bt.getAdapter=rt,bt.HttpStatusCode=vt,bt.default=bt;const yt=bt,xt={openai:{url:"https://api.openai.com",defaultModel:"gpt-4o",name:"OpenAI"},claude:{url:"https://api.anthropic.com",defaultModel:"claude-sonnet-4-20250514",name:"Claude"},gemini:{url:"https://generativelanguage.googleapis.com",defaultModel:"gemini-2.0-flash",name:"Gemini"},deepseek:{url:"https://api.deepseek.com",defaultModel:"deepseek-chat",name:"DeepSeek"},custom:{url:"",defaultModel:"",name:"è‡ªå®šä¹‰(OpenAIå…¼å®¹)"}},kt=new class{config={mode:"tavern",streaming:!0,memorySummaryMode:"raw",initMode:"generate",customAPI:{provider:"openai",url:"",apiKey:"",model:"gpt-4o",temperature:.7,maxTokens:16e3}};constructor(){this.loadConfig()}syncModeWithEnvironment(){this.config.mode=this.isTavernEnvironment()?"tavern":"custom"}loadConfig(){try{const e=localStorage.getItem("ai_service_config");if(e){const t=JSON.parse(e);return this.config={...this.config,...t},console.log("[AIæœåŠ¡] é…ç½®å·²åŠ è½½:",this.config.mode),void this.syncModeWithEnvironment()}this.syncModeWithEnvironment()}catch(e){console.error("[AIæœåŠ¡] åŠ è½½é…ç½®å¤±è´¥:",e)}}saveConfig(e){this.config={...this.config,...e},this.syncModeWithEnvironment(),this.config.customAPI?.url&&(this.config.customAPI.url=this.config.customAPI.url.replace(/\/v1\/?$/,"").replace(/\/+$/,"")),localStorage.setItem("ai_service_config",JSON.stringify(this.config)),console.log("[AIæœåŠ¡] é…ç½®å·²ä¿å­˜:",this.config.mode)}getConfig(){return{...this.config}}async fetchModels(){if(!this.config.customAPI?.url||!this.config.customAPI?.apiKey)throw new Error("è¯·å…ˆé…ç½®APIåœ°å€å’Œå¯†é’¥");try{const e=this.config.customAPI.url.replace(/\/+$/,""),t=await yt.get(`${e}/v1/models`,{headers:{Authorization:`Bearer ${this.config.customAPI.apiKey}`}});return t.data.data?.map(e=>e.id)||[]}catch(e){throw console.error("[AIæœåŠ¡] è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥:",e),new Error("è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥")}}getAPIConfigForUsageType(e){if(!e)return null;try{const{useAPIManagementStore:t}=n(100),a=t().getAPIForType(e);return a?"default"===a.id?null:a:null}catch(e){return console.warn("[AIæœåŠ¡] è·å–åŠŸèƒ½APIé…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®:",e),null}}async generate(e){if(this.syncModeWithEnvironment(),console.log(`[AIæœåŠ¡] è°ƒç”¨generateï¼Œæ¨¡å¼: ${this.config.mode}, usageType: ${e.usageType||"é»˜è®¤"}`),e.usageType){const t=this.getAPIConfigForUsageType(e.usageType);if(t)return console.log(`[AIæœåŠ¡] ä½¿ç”¨åŠŸèƒ½[${e.usageType}]åˆ†é…çš„ç‹¬ç«‹API: ${t.name}`),this.generateWithAPIConfig(e,{provider:t.provider,url:t.url,apiKey:t.apiKey,model:t.model,temperature:t.temperature,maxTokens:t.maxTokens})}return"tavern"===this.config.mode?this.generateWithTavern(e):this.generateWithCustomAPI(e)}async generateRaw(e){if(this.syncModeWithEnvironment(),console.log(`[AIæœåŠ¡] è°ƒç”¨generateRawï¼Œæ¨¡å¼: ${this.config.mode}, usageType: ${e.usageType||"é»˜è®¤"}`),e.usageType){const t=this.getAPIConfigForUsageType(e.usageType);if(t)return console.log(`[AIæœåŠ¡] ä½¿ç”¨åŠŸèƒ½[${e.usageType}]åˆ†é…çš„ç‹¬ç«‹API: ${t.name}`),this.generateRawWithAPIConfig(e,{provider:t.provider,url:t.url,apiKey:t.apiKey,model:t.model,temperature:t.temperature,maxTokens:t.maxTokens})}return"tavern"===this.config.mode?this.generateRawWithTavern(e):this.generateRawWithCustomAPI(e)}async generateWithAPIConfig(e,t){console.log(`[AIæœåŠ¡] ä½¿ç”¨æŒ‡å®šAPIé…ç½®ç”Ÿæˆï¼Œprovider: ${t.provider}, model: ${t.model}`);const n=this.config.customAPI?{...this.config.customAPI}:null;try{return this.config.customAPI={provider:t.provider,url:t.url,apiKey:t.apiKey,model:t.model,temperature:t.temperature??.7,maxTokens:t.maxTokens??16e3},await this.generateWithCustomAPI(e)}finally{n&&(this.config.customAPI=n)}}async generateRawWithAPIConfig(e,t){console.log(`[AIæœåŠ¡] ä½¿ç”¨æŒ‡å®šAPIé…ç½®è¿›è¡Œçº¯å‡€ç”Ÿæˆï¼Œprovider: ${t.provider}, model: ${t.model}`);const n=this.config.customAPI?{...this.config.customAPI}:null;try{return this.config.customAPI={provider:t.provider,url:t.url,apiKey:t.apiKey,model:t.model,temperature:t.temperature??.7,maxTokens:t.maxTokens??16e3},await this.generateRawWithCustomAPI(e)}finally{n&&(this.config.customAPI=n)}}async generateWithTavern(e){const t=this.getTavernHelper();if(!t)throw new Error(this.isTavernEnvironment()?"é…’é¦†ç¯å¢ƒä¸å¯ç”¨ï¼Œè¯·åˆ‡æ¢åˆ°è‡ªå®šä¹‰APIæ¨¡å¼æˆ–åœ¨SillyTavernä¸­æ‰“å¼€":"å½“å‰ç¯å¢ƒä¸å¯ç”¨ï¼Œè¯·åˆ‡æ¢åˆ°è‡ªå®šä¹‰APIæ¨¡å¼");console.log("[AIæœåŠ¡-é…’é¦†] è°ƒç”¨tavernHelper.generate");try{return await this.withRetry("tavern.generate",()=>t.generate(e))}catch(e){throw this.toUserFacingError(e)}}async generateRawWithTavern(e){const t=this.getTavernHelper();if(!t)throw new Error(this.isTavernEnvironment()?"é…’é¦†ç¯å¢ƒä¸å¯ç”¨ï¼Œè¯·åˆ‡æ¢åˆ°è‡ªå®šä¹‰APIæ¨¡å¼æˆ–åœ¨SillyTavernä¸­æ‰“å¼€":"å½“å‰ç¯å¢ƒä¸å¯ç”¨ï¼Œè¯·åˆ‡æ¢åˆ°è‡ªå®šä¹‰APIæ¨¡å¼");console.log("[AIæœåŠ¡-é…’é¦†] è°ƒç”¨tavernHelper.generateRaw");try{const n=await this.withRetry("tavern.generateRaw",()=>t.generateRaw(e));return String(n)}catch(e){throw this.toUserFacingError(e)}}async withRetry(e,t,n){const a=n?.retries??2,r=n?.baseDelayMs??800;let o;for(let n=0;n<=a;n++)try{return await t()}catch(t){if(o=t,!this.isRetryableError(t)||n>=a)break;const i=Math.floor(250*Math.random()),s=r*Math.pow(2,n)+i;console.warn(`[AIæœåŠ¡] ${e} å¤±è´¥ï¼Œå‡†å¤‡é‡è¯• (${n+1}/${a+1})ï¼Œ${s}ms`,t),await new Promise(e=>setTimeout(e,s))}throw o}isRetryableError(e){const t=e?"string"==typeof e?e:e instanceof Error?e.message||"":String(e):"",n=(()=>{const t=e;return t?.status??t?.response?.status??t?.cause?.status??t?.cause?.response?.status})();return"number"==typeof n?[408,409,425,429,500,502,503,504].includes(n):!!/service unavailable/i.test(t)||!!/\b(429|500|502|503|504)\b/.test(t)||!!/timeout|timed out|network error|fetch failed/i.test(t)}toUserFacingError(e){const t=e,n=e?"string"==typeof e?e:e instanceof Error?e.message||"æœªçŸ¥é”™è¯¯":String(e):"æœªçŸ¥é”™è¯¯",a=t?.status??t?.response?.status??t?.cause?.status??t?.cause?.response?.status;if(503===a||/service unavailable/i.test(n)){const t=new Error("AI æœåŠ¡æš‚ä¸å¯ç”¨ï¼ˆService Unavailable/503ï¼‰ã€‚æˆ‘å·²è‡ªåŠ¨é‡è¯•ä»å¤±è´¥ï¼šå¦‚æœåœ¨ SillyTavern å†…ä½¿ç”¨ï¼Œè¯·æ£€æŸ¥å½“å‰ API æä¾›æ–¹/ä»£ç†/é¢åº¦æ˜¯å¦æ­£å¸¸ï¼›ä¹Ÿå¯èƒ½æ˜¯ä¸Šæ¸¸ä¸´æ—¶æ•…éšœï¼Œç¨åå†è¯•ã€‚");return t.cause=e,t}if(429===a||/\b429\b/.test(n)){const t=new Error("AI è¯·æ±‚è¿‡äºé¢‘ç¹ï¼ˆ429ï¼‰ã€‚æˆ‘å·²è‡ªåŠ¨é‡è¯•ï¼Œä»å¤±è´¥è¯·ç¨åå†è¯•æˆ–é™ä½å¹¶å‘/é¢‘ç‡ã€‚");return t.cause=e,t}const r=new Error(n||"AI è°ƒç”¨å¤±è´¥");return r.cause=e,r}getTavernHelper(){if("undefined"==typeof window)return null;if(window.TavernHelper)return window.TavernHelper;try{if(window.top&&window.top!==window&&window.top.TavernHelper)return window.top.TavernHelper}catch{}let e=window;for(let t=0;t<5;t++)try{if(!e.parent||e.parent===e)break;if(e.parent.TavernHelper)return e.parent.TavernHelper;e=e.parent}catch{break}return null}isTavernEnvironment(){return!!this.getTavernHelper()}async generateWithCustomAPI(e){if(!this.config.customAPI)throw new Error("è‡ªå®šä¹‰APIæœªé…ç½®");console.log("[AIæœåŠ¡-è‡ªå®šä¹‰] æ„å»ºæ¶ˆæ¯åˆ—è¡¨");const t=[];e.injects&&e.injects.length>0&&([...e.injects].sort((e,t)=>t.depth-e.depth).forEach(e=>{"</input>"!==e.content&&t.push({role:e.role,content:e.content})}),console.log(`[AIæœåŠ¡-è‡ªå®šä¹‰] å·²æ·»åŠ  ${t.length} æ¡injectæ¶ˆæ¯`)),e.user_input&&(t.push({role:"user",content:e.user_input}),console.log("[AIæœåŠ¡-è‡ªå®šä¹‰] å·²æ·»åŠ ç”¨æˆ·è¾“å…¥"));const n=e.should_stream??this.config.streaming??!1;return this.callAPI(t,n,e.onStreamChunk)}async generateRawWithCustomAPI(e){if(!this.config.customAPI)throw new Error("è‡ªå®šä¹‰APIæœªé…ç½®");console.log("[AIæœåŠ¡-è‡ªå®šä¹‰Raw] ä½¿ç”¨ordered_prompts");const t=(e.ordered_prompts||[]).filter(e=>"</input>"!==e.content);console.log(`[AIæœåŠ¡-è‡ªå®šä¹‰Raw] æ¶ˆæ¯æ•°é‡: ${t.length}`);const n=e.should_stream??this.config.streaming??!1;return this.callAPI(t,n,e.onStreamChunk)}async callAPI(e,t,n){const{provider:a,url:r,apiKey:o,model:i,temperature:s,maxTokens:l}=this.config.customAPI;switch(console.log(`[AIæœåŠ¡-APIè°ƒç”¨] Provider: ${a}, URL: ${r}, Model: ${i}, æ¶ˆæ¯æ•°: ${e.length}, æµå¼: ${t}`),a){case"claude":return this.callClaudeAPI(e,t,n);case"gemini":return this.callGeminiAPI(e,t,n);default:return this.callOpenAICompatibleAPI(e,t,n)}}estimateTokensForText(e){if(!e)return 0;let t=0;for(const n of e){const e=n.charCodeAt(0);e>=19968&&e<=40959&&t++}const n=Math.max(0,e.length-t);return t+Math.ceil(n/4)}estimateTokensForMessages(e){return e.reduce((e,t)=>e+8+this.estimateTokensForText(t.content||""),0)}getApproxContextWindow(e,t){const n=(t||"").toLowerCase();return"claude"===e||n.includes("claude")?2e5:"gemini"===e||n.includes("gemini")?1e6:n.includes("deepseek")?64e3:n.includes("moonshot")||n.includes("kimi")||n.includes("gpt-4o")||n.includes("gpt-4.1")||n.includes("o1")||n.includes("o3")||n.includes("gpt-4")?128e3:n.includes("gpt-3.5")?16385:null}clampMaxTokensForContext(e,t,n,a){const r=this.getApproxContextWindow(e,t);if(!r)return a;const o=this.estimateTokensForMessages(n),i=r-o-512;if(i<256)throw new Error(`APIä¸Šä¸‹æ–‡é•¿åº¦ä¸è¶³ï¼šè¾“å…¥è¿‡é•¿ï¼ˆä¼°ç®—è¾“å…¥â‰ˆ${o} tokensï¼‰ï¼Œè¯·å‡å°‘ä¸–ç•Œ/æç¤ºè¯é•¿åº¦æˆ–æ›´æ¢æ›´å¤§ä¸Šä¸‹æ–‡æ¨¡å‹ã€‚`);const s=Math.min(a,Math.max(256,i));return s<a&&console.warn(`[AIæœåŠ¡] maxTokensè¿‡å¤§ï¼Œå·²è‡ªåŠ¨ä¸‹è°ƒï¼š${a} -> ${s}ï¼ˆä¼°ç®—è¾“å…¥â‰ˆ${o}ï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡â‰ˆ${r}ï¼‰`),s}isStreamUnsupportedError(e){const t=(e||"").toLowerCase();return t.includes("stream")&&(t.includes("not supported")||t.includes("unsupported")||t.includes("invalid")||t.includes("unknown"))||t.includes("text/event-stream")||t.includes("sse")}async callOpenAICompatibleAPI(e,t,n){const{provider:a,url:r,apiKey:o,model:i,temperature:s,maxTokens:l}=this.config.customAPI,c=this.clampMaxTokensForContext(a,i,e,l||16e3);try{if(!t){const t=(await yt.post(`${r}/v1/chat/completions`,{model:i,messages:e,temperature:s||.7,max_tokens:c,stream:!1},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},timeout:12e4})).data.choices[0].message.content;return console.log(`[AIæœåŠ¡-OpenAI] å“åº”é•¿åº¦: ${t.length}`),t}try{return await this.streamingRequestOpenAI(r,o,i,e,s||.7,c,n)}catch(t){const n=t instanceof Error?t.message:String(t);if(!this.isStreamUnsupportedError(n))throw t;console.warn("[AIæœåŠ¡-OpenAIå…¼å®¹] å½“å‰APIå¯èƒ½ä¸æ”¯æŒæµå¼ä¼ è¾“ï¼Œå·²è‡ªåŠ¨é™çº§ä¸ºéæµå¼è¯·æ±‚ã€‚");const a=(await yt.post(`${r}/v1/chat/completions`,{model:i,messages:e,temperature:s||.7,max_tokens:c,stream:!1},{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},timeout:12e4})).data.choices[0].message.content;return console.log(`[AIÃ¦Å“ÂÃ¥Å Â¡-OpenAI] Ã¥â€œÂÃ¥Âºâ€Ã©â€¢Â¿Ã¥ÂºÂ¦: ${a.length}`),a}}catch(e){if(console.error("[AIæœåŠ¡-OpenAI] å¤±è´¥:",e),yt.isAxiosError(e)){if(e.response)throw new Error(`APIé”™è¯¯ ${e.response.status}: ${JSON.stringify(e.response.data)}`);if(e.request)throw new Error("ç½‘ç»œé”™è¯¯ï¼šæ— æ³•è¿æ¥åˆ°APIæœåŠ¡å™¨")}throw new Error(`OpenAI APIè°ƒç”¨å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}}async callClaudeAPI(e,t,n){const{provider:a,url:r,apiKey:o,model:i,temperature:s,maxTokens:l}=this.config.customAPI;let c="";const d=[];for(const t of e)"system"===t.role?c+=(c?"\n\n":"")+t.content:d.push({role:t.role,content:t.content});0!==d.length&&"user"===d[0].role||d.unshift({role:"user",content:"è¯·å¼€å§‹ã€‚"});const u=r||"https://api.anthropic.com",m=this.clampMaxTokensForContext(a,i,[...c?[{content:c}]:[],...d.map(e=>({content:e.content}))],l||16e3);try{if(!t){const e=await yt.post(`${u}/v1/messages`,{model:i,max_tokens:m,system:c||void 0,messages:d,temperature:s||.7},{headers:{"x-api-key":o,"anthropic-version":"2023-06-01","Content-Type":"application/json"},timeout:12e4}),t=e.data.content[0]?.text||"";return console.log(`[AIæœåŠ¡-Claude] å“åº”é•¿åº¦: ${t.length}`),t}try{return await this.streamingRequestClaude(u,o,i,c,d,s||.7,m,n)}catch(e){const t=e instanceof Error?e.message:String(e);if(!this.isStreamUnsupportedError(t))throw e;console.warn("[AIæœåŠ¡-Claude] å½“å‰APIå¯èƒ½ä¸æ”¯æŒæµå¼ä¼ è¾“ï¼Œå·²è‡ªåŠ¨é™çº§ä¸ºéæµå¼è¯·æ±‚ã€‚");const n=await yt.post(`${u}/v1/messages`,{model:i,max_tokens:m,system:c||void 0,messages:d,temperature:s||.7},{headers:{"x-api-key":o,"anthropic-version":"2023-06-01","Content-Type":"application/json"},timeout:12e4}),a=n.data.content[0]?.text||"";return console.log(`[AIæœåŠ¡-Claude] å“åº”é•¿åº¦: ${a.length}`),a}}catch(e){if(console.error("[AIæœåŠ¡-Claude] å¤±è´¥:",e),yt.isAxiosError(e)&&e.response)throw new Error(`Claude APIé”™è¯¯ ${e.response.status}: ${JSON.stringify(e.response.data)}`);throw new Error(`Claude APIè°ƒç”¨å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}}async callGeminiAPI(e,t,n){const{provider:a,url:r,apiKey:o,model:i,temperature:s,maxTokens:l}=this.config.customAPI;let c="";const d=[];for(const t of e)"system"===t.role?c+=(c?"\n\n":"")+t.content:d.push({role:"assistant"===t.role?"model":"user",parts:[{text:t.content}]});0===d.length&&d.push({role:"user",parts:[{text:"è¯·å¼€å§‹ã€‚"}]});const u=r||"https://generativelanguage.googleapis.com",m=t?"streamGenerateContent":"generateContent",p=this.clampMaxTokensForContext(a,i,[...c?[{content:c}]:[],...d.map(e=>({content:(e.parts||[]).map(e=>e.text).join("\n")}))],l||16e3);try{if(!t){const e=await yt.post(`${u}/v1beta/models/${i}:${m}?key=${o}`,{contents:d,systemInstruction:c?{parts:[{text:c}]}:void 0,generationConfig:{temperature:s||.7,maxOutputTokens:p}},{headers:{"Content-Type":"application/json"},timeout:12e4}),t=e.data.candidates?.[0]?.content?.parts?.[0]?.text||"";return console.log(`[AIæœåŠ¡-Gemini] å“åº”é•¿åº¦: ${t.length}`),t}try{return await this.streamingRequestGemini(u,o,i,c,d,s||.7,p,n)}catch(e){const t=e instanceof Error?e.message:String(e);if(!this.isStreamUnsupportedError(t))throw e;console.warn("[AIæœåŠ¡-Gemini] å½“å‰APIå¯èƒ½ä¸æ”¯æŒæµå¼ä¼ è¾“ï¼Œå·²è‡ªåŠ¨é™çº§ä¸ºéæµå¼è¯·æ±‚ã€‚");const n=await yt.post(`${u}/v1beta/models/${i}:generateContent?key=${o}`,{contents:d,systemInstruction:c?{parts:[{text:c}]}:void 0,generationConfig:{temperature:s||.7,maxOutputTokens:p}},{headers:{"Content-Type":"application/json"},timeout:12e4}),a=n.data.candidates?.[0]?.content?.parts?.[0]?.text||"";return console.log(`[AIæœåŠ¡-Gemini] å“åº”é•¿åº¦: ${a.length}`),a}}catch(e){if(console.error("[AIæœåŠ¡-Gemini] å¤±è´¥:",e),yt.isAxiosError(e)&&e.response)throw new Error(`Gemini APIé”™è¯¯ ${e.response.status}: ${JSON.stringify(e.response.data)}`);throw new Error(`Gemini APIè°ƒç”¨å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}}async streamingRequestOpenAI(e,t,n,a,r,o,i){console.log("[AIæœåŠ¡-OpenAIæµå¼] å¼€å§‹");const s=await fetch(`${e}/v1/chat/completions`,{method:"POST",headers:{Authorization:`Bearer ${t}`,Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify({model:n,messages:a,temperature:r,max_tokens:o,stream:!0})});if(!s.ok)throw new Error(`APIé”™è¯¯ ${s.status}: ${await s.text()}`);const l=s.headers.get("content-type")||"";if(!l.includes("text/event-stream"))throw new Error(`Stream unsupported (content-type=${l||"unknown"})`);return this.processSSEStream(s,e=>{const t=JSON.parse(e);return t.choices[0]?.delta?.content||""},i)}async streamingRequestClaude(e,t,n,a,r,o,i,s){console.log("[AIæœåŠ¡-Claudeæµå¼] å¼€å§‹");const l=await fetch(`${e}/v1/messages`,{method:"POST",headers:{"x-api-key":t,"anthropic-version":"2023-06-01",Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify({model:n,max_tokens:i,system:a||void 0,messages:r,temperature:o,stream:!0})});if(!l.ok)throw new Error(`Claude APIé”™è¯¯ ${l.status}: ${await l.text()}`);const c=l.headers.get("content-type")||"";if(!c.includes("text/event-stream"))throw new Error(`Stream unsupported (content-type=${c||"unknown"})`);return this.processSSEStream(l,e=>{const t=JSON.parse(e);return"content_block_delta"===t.type&&t.delta?.text||""},s)}async streamingRequestGemini(e,t,n,a,r,o,i,s){console.log("[AIæœåŠ¡-Geminiæµå¼] å¼€å§‹");const l=await fetch(`${e}/v1beta/models/${n}:streamGenerateContent?key=${t}&alt=sse`,{method:"POST",headers:{Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify({contents:r,systemInstruction:a?{parts:[{text:a}]}:void 0,generationConfig:{temperature:o,maxOutputTokens:i}})});if(!l.ok)throw new Error(`Gemini APIé”™è¯¯ ${l.status}: ${await l.text()}`);const c=l.headers.get("content-type")||"";if(!c.includes("text/event-stream"))throw new Error(`Stream unsupported (content-type=${c||"unknown"})`);return this.processSSEStream(l,e=>{const t=JSON.parse(e);return t.candidates?.[0]?.content?.parts?.[0]?.text||""},s)}async processSSEStream(e,t,n){const a=e.body?.getReader();if(!a)throw new Error("æ— æ³•è·å–å“åº”æµ");const r=new TextDecoder;let o="",i="",s=!1,l="";const c=()=>"undefined"!=typeof performance&&performance.now?performance.now():Date.now();let d=c(),u=0;const m=async e=>{if(!n)return;u+=e;const t=c();(u>=80||t-d>=60)&&(u=0,d=t,await new Promise(e=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(()=>e()):setTimeout(e,0)}))};try{for(;;){const{done:e,value:c}=await a.read();if(e)break;i+=r.decode(c,{stream:!0});const d=i.split("\n");i=d.pop()||"";for(const e of d){const a=e.trim();if(!a||!a.startsWith("data:"))continue;let r=a.slice(5);if(r.startsWith(" ")&&(r=r.slice(1)),"[DONE]"!==r)try{const e=t(r);if(e){o+=e;for(let t=0;t<e.length;t++)if(l+=e[t],l.includes("<thinking>"))s=!0,l="";else if(s&&l.includes("</thinking>"))s=!1,l="";else{if(s){const e=l.indexOf("```json"),t=l.indexOf("```"),a=-1!==e?e:t;if(-1!==a){const e=l.slice(a);s=!1,l="",n&&n(e),await m(e.length);continue}}s||(!"<thinking>".startsWith(l)&&!"</thinking>".startsWith(l)&&l.length>0?(n&&(console.log("[AIæœåŠ¡-æµå¼] å‘é€chunkåˆ°å‰ç«¯:",l.length,"å­—ç¬¦"),n(l)),await m(l.length),l=""):l.length>10&&(n&&(console.log("[AIæœåŠ¡-æµå¼] å‘é€chunkåˆ°å‰ç«¯(ç¼“å†²åŒºè¿‡å¤§):",l.length,"å­—ç¬¦"),n(l)),await m(l.length),l=""))}}}catch(e){console.warn("[AIæœåŠ¡-æµå¼] è§£æchunkå¤±è´¥:",r.substring(0,100))}}}!s&&l.length>0&&(n&&n(l),await m(l.length))}finally{a.releaseLock()}return console.log(`[AIæœåŠ¡-æµå¼] å®Œæˆï¼Œæ€»é•¿åº¦: ${o.length}`),o}checkAvailability(){return"tavern"===this.config.mode?this.getTavernHelper()?{available:!0,message:"é…’é¦†æ¨¡å¼å·²å°±ç»ª"}:{available:!1,message:this.isTavernEnvironment()?"é…’é¦†ç¯å¢ƒä¸å¯ç”¨ã€‚è¯·åœ¨SillyTavernä¸­æ‰“å¼€ï¼Œæˆ–åˆ‡æ¢åˆ°è‡ªå®šä¹‰APIæ¨¡å¼ã€‚":"å½“å‰ç¯å¢ƒä¸å¯ç”¨ï¼Œè¯·åˆ‡æ¢åˆ°è‡ªå®šä¹‰APIæ¨¡å¼ã€‚"}:this.config.customAPI?.url&&this.config.customAPI?.apiKey?{available:!0,message:"è‡ªå®šä¹‰APIæ¨¡å¼å·²å°±ç»ª"}:{available:!1,message:"è‡ªå®šä¹‰APIæœªé…ç½®ã€‚è¯·åœ¨è®¾ç½®ä¸­é…ç½®APIåœ°å€å’Œå¯†é’¥ã€‚"}}}},2293:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.sect-contribution[data-v-21cfc8bd] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n.player-info-bar[data-v-21cfc8bd] {\n  display: flex;\n  gap: 1.5rem;\n  padding: 0.75rem 1rem;\n  background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(168, 85, 247, 0.05));\n  border-radius: 8px;\n  border: 1px solid rgba(147, 51, 234, 0.2);\n}\n.info-item[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.info-item.highlight[data-v-21cfc8bd] {\n  padding: 0.25rem 0.75rem;\n  background: rgba(245, 158, 11, 0.1);\n  border-radius: 6px;\n  border: 1px solid rgba(245, 158, 11, 0.2);\n}\n.info-label[data-v-21cfc8bd] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.info-value[data-v-21cfc8bd] {\n  font-weight: 600;\n  font-size: 0.9rem;\n}\n.info-value.position[data-v-21cfc8bd] { color: #9333ea;\n}\n.info-value.contribution[data-v-21cfc8bd] { color: #f59e0b; font-size: 1.1rem;\n}\n.exchange-tabs[data-v-21cfc8bd] {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.tab-btn[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  padding: 0.5rem 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.tab-btn[data-v-21cfc8bd]:hover {\n  border-color: rgba(245, 158, 11, 0.3);\n  color: var(--color-text);\n}\n.tab-btn.active[data-v-21cfc8bd] {\n  background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05));\n  border-color: rgba(245, 158, 11, 0.4);\n  color: #f59e0b;\n}\n.exchange-list[data-v-21cfc8bd] {\n  flex: 1;\n  overflow-y: auto;\n}\n.empty-state[data-v-21cfc8bd] {\n  text-align: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-21cfc8bd] {\n  opacity: 0.5;\n  margin-bottom: 0.5rem;\n}\n.empty-text[data-v-21cfc8bd] {\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n.empty-hint[data-v-21cfc8bd] {\n  font-size: 0.8rem;\n  opacity: 0.7;\n  margin-bottom: 1rem;\n}\n.ask-btn[data-v-21cfc8bd] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.6rem 1rem;\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.ask-btn[data-v-21cfc8bd]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);\n}\n.items-grid[data-v-21cfc8bd] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 0.75rem;\n}\n.item-card[data-v-21cfc8bd] {\n  padding: 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  transition: all 0.2s ease;\n}\n.item-card[data-v-21cfc8bd]:hover {\n  border-color: rgba(245, 158, 11, 0.3);\n}\n.item-card.can-afford[data-v-21cfc8bd] {\n  border-color: rgba(34, 197, 94, 0.3);\n}\n.item-card.out-of-stock[data-v-21cfc8bd] {\n  opacity: 0.5;\n}\n.item-header[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.item-icon[data-v-21cfc8bd] {\n  font-size: 1.5rem;\n}\n.item-info[data-v-21cfc8bd] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.15rem;\n}\n.item-name[data-v-21cfc8bd] {\n  font-weight: 600;\n  font-size: 0.9rem;\n  color: var(--color-text);\n}\n.item-quality[data-v-21cfc8bd] {\n  font-size: 0.7rem;\n  padding: 0.1rem 0.35rem;\n  border-radius: 4px;\n  font-weight: 500;\n  width: fit-content;\n}\n.quality-common[data-v-21cfc8bd] { background: rgba(156, 163, 175, 0.2); color: #6b7280;\n}\n.quality-yellow[data-v-21cfc8bd] { background: rgba(245, 158, 11, 0.2); color: #f59e0b;\n}\n.quality-xuan[data-v-21cfc8bd] { background: rgba(139, 92, 246, 0.2); color: #8b5cf6;\n}\n.quality-earth[data-v-21cfc8bd] { background: rgba(59, 130, 246, 0.2); color: #3b82f6;\n}\n.quality-heaven[data-v-21cfc8bd] { background: rgba(239, 68, 68, 0.2); color: #ef4444;\n}\n.item-desc[data-v-21cfc8bd] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  margin: 0 0 0.5rem 0;\n  line-height: 1.4;\n}\n.item-footer[data-v-21cfc8bd] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.item-cost[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #f59e0b;\n}\n.item-stock[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.2rem;\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n}\n.exchange-btn[data-v-21cfc8bd] {\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.35rem;\n  padding: 0.5rem;\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  border: none;\n  border-radius: 5px;\n  color: white;\n  font-size: 0.8rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.exchange-btn[data-v-21cfc8bd]:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);\n}\n.exchange-btn[data-v-21cfc8bd]:disabled {\n  background: #6b7280;\n  cursor: not-allowed;\n}\n.contribution-tips[data-v-21cfc8bd] {\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.tips-title[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0 0 0.5rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.tips-list[data-v-21cfc8bd] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.tip-item[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  padding: 0.25rem 0.5rem;\n  background: var(--color-background);\n  border-radius: 4px;\n}\n.exchange-notice[data-v-21cfc8bd] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  background: rgba(59, 130, 246, 0.1);\n  border-radius: 6px;\n  font-size: 0.75rem;\n  color: #3b82f6;\n}\n",""]);const s=i},2347:(e,t,n)=>{"use strict";n.d(t,{U:()=>c});var a=n(8651),r=n(4191);const o={ä¿®ä»™å®—é—¨:1,æ­£é“å®—é—¨:1,é­”é“å®—é—¨:1.1,é­”é“åŠ¿åŠ›:1.1,ä¿®ä»™ä¸–å®¶:.9,ä¸–å®¶:.9,å•†ä¼š:.7,å•†ä¼šç»„ç»‡:.7,ä¸­ç«‹å®—é—¨:.85,æ•£ä¿®è”ç›Ÿ:.75};function i(e){let t=0;const n=e.æœ€å¼ºä¿®ä¸º||e.å®—ä¸»ä¿®ä¸º||"";t=n.includes("ç»ƒæ°”")?5:n.includes("ç­‘åŸº")?15:n.includes("é‡‘ä¸¹")?25:n.includes("å…ƒå©´")?35:n.includes("åŒ–ç¥")?45:n.includes("ç‚¼è™š")?55:n.includes("åˆä½“")?65:n.includes("æ¸¡åŠ«")?75:20;const a=e.é•¿è€æ•°é‡||0,r=(e.æ ¸å¿ƒå¼Ÿå­æ•°||0)+(e.å†…é—¨å¼Ÿå­æ•°||0)+(e.å¤–é—¨å¼Ÿå­æ•°||0);let o=0;o+=a>=50?15:a>=30?12:a>=20?10:a>=10?7:a>=5?4:Math.max(0,a),o+=r>=1e4?10:r>=5e3?8:r>=2e3?6:r>=1e3?4:r>=500?2:Math.max(0,Math.floor(r/250));let i=0;switch(e.ç­‰çº§){case"è¶…çº§":case"è¶…çº§å®—é—¨":i=10;break;case"ä¸€æµ":case"ä¸€æµå®—é—¨":i=7;break;case"äºŒæµ":case"äºŒæµå®—é—¨":i=4;break;case"ä¸‰æµ":case"ä¸‰æµå®—é—¨":i=2;break;default:i=0}let s=0;switch(e.ç±»å‹){case"é­”é“å®—é—¨":case"é­”é“åŠ¿åŠ›":s=3;break;case"æ­£é“å®—é—¨":case"ä¿®ä»™å®—é—¨":s=1;break;case"ä¿®ä»™ä¸–å®¶":case"ä¸–å®¶":s=-1;break;case"å•†ä¼š":case"å•†ä¼šç»„ç»‡":s=-3;break;case"æ•£ä¿®è”ç›Ÿ":s=-2;break;default:s=0}let l=t+o+i+s;return n.includes("æ¸¡åŠ«")?l=Math.max(l,85):n.includes("åˆä½“")?l=Math.max(l,75):n.includes("ç‚¼è™š")?l=Math.max(l,65):n.includes("åŒ–ç¥")&&(l=Math.max(l,55)),Math.min(100,Math.max(1,Math.round(l)))}function s(e){let t=5;switch(e.ç­‰çº§){case"è¶…çº§":case"è¶…çº§å®—é—¨":t=25;break;case"ä¸€æµ":case"ä¸€æµå®—é—¨":t=20;break;case"äºŒæµ":case"äºŒæµå®—é—¨":t=15;break;case"ä¸‰æµ":case"ä¸‰æµå®—é—¨":t=10;break;default:t=5}const n=o[e.ç±»å‹]||1;let a=0;const r=e.é•¿è€æ•°é‡||0;r>=10?a+=3:r>=5?a+=2:r>=3&&(a+=1);const i=.8+.4*Math.random(),s=Math.round((t*n+a)*i);return Math.min(30,Math.max(0,s))}var l=n(4459);class c{config;previousErrors=[];originalConfig;constructor(e){this.config=e,this.originalConfig={factionCount:e.factionCount,locationCount:e.locationCount,secretRealmsCount:e.secretRealmsCount,continentCount:e.continentCount}}async generateValidatedWorld(){for(let e=0;e<=this.config.maxRetries;e++)try{e>0&&(await new Promise(t=>setTimeout(t,this.config.retryDelay*e)),this.reduceCountsForRetry(e));const t=await this.generateWorldData(),n=this.validateWorldData(t);if(n.isValid)return{success:!0,worldInfo:t};this.previousErrors=n.errors.map(e=>e.message)}catch(e){const t=e instanceof Error?e.message:String(e);this.previousErrors=[t]}return{success:!1,errors:this.previousErrors}}reduceCountsForRetry(e){const t=Math.pow(.8,e);this.config.factionCount=Math.max(3,Math.floor(this.originalConfig.factionCount*t)),this.config.locationCount=Math.max(5,Math.floor(this.originalConfig.locationCount*t)),this.config.secretRealmsCount=Math.max(2,Math.floor(this.originalConfig.secretRealmsCount*t)),this.config.continentCount=Math.max(2,Math.floor(this.originalConfig.continentCount*t))}async generateWorldData(){const e=(0,a.getTavernHelper)();if(!e)throw new Error("AIæœåŠ¡æœªåˆå§‹åŒ–ï¼Œè¯·åœ¨è®¾ç½®ä¸­é…ç½®AIæœåŠ¡");const t=await this.buildPromptWithErrors();try{const n=[{role:"user",content:t},{role:"user",content:"è¯·æ ¹æ®ä¸Šè¿°è¦æ±‚ç”Ÿæˆå®Œæ•´çš„ä¸–ç•Œæ•°æ®JSONã€‚"}],a=await e.generateRaw({ordered_prompts:n,should_stream:!0,overrides:{world_info_before:"",world_info_after:""},onStreamChunk:e=>{this.config.onStreamChunk&&this.config.onStreamChunk(e)}}),r=this.parseAIResponse(String(a));return this.convertToWorldInfo(r)}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`AIç”Ÿæˆå¤±è´¥: ${t}`)}}async buildPromptWithErrors(){return await this.buildPrompt()}async buildPrompt(){const{factionCount:e,locationCount:t,secretRealmsCount:n,continentCount:a,mapConfig:o}=this.config,i={factionCount:e,totalLocations:t,secretRealms:n,continentCount:a,characterBackground:this.config.characterBackground,worldBackground:this.config.worldBackground,worldEra:this.config.worldEra,worldName:this.config.worldName,mapConfig:o},s=await l.promptStorage.getSaved("worldGeneration"),c=!!s?.modified,d=r.c.buildPrompt(i);if(c&&s?.content){let n=s.content;const r=[];i.characterBackground&&r.push(`è§’è‰²å‡ºèº«: ${i.characterBackground}`),i.worldBackground&&r.push(`ä¸–ç•ŒèƒŒæ™¯: ${i.worldBackground}`),i.worldEra&&r.push(`ä¸–ç•Œæ—¶ä»£: ${i.worldEra}`),i.worldName&&r.push(`ä¸–ç•Œåç§°: ${i.worldName}`);const o=r.length>0?"\n"+r.join("\n"):"";if(!o||n.includes("ä¸–ç•Œè®¾å®š")||n.includes("ä¸–ç•Œåç§°"))o&&n.includes("## ä¸–ç•Œè®¾å®š")&&(n=n.replace(/## ä¸–ç•Œè®¾å®š[\s\S]*?(?=\n## |$)/,`## ä¸–ç•Œè®¾å®š${o}`));else{const e=n.match(/(## ğŸš¨ æœ€é«˜ä¼˜å…ˆçº§è¦æ±‚[\s\S]*?)(\n## |$)/);n=e?n.replace(/(## ğŸš¨ æœ€é«˜ä¼˜å…ˆçº§è¦æ±‚[\s\S]*?)(\n## |$)/,`$1## ä¸–ç•Œè®¾å®š${o}\n\n$2`):n.replace(/(## ğŸš¨ æœ€é«˜ä¼˜å…ˆçº§è¦æ±‚[\s\S]*?\n)/,`$1## ä¸–ç•Œè®¾å®š${o}\n\n`)}return n=n.replace(/\$\{?finalContinentCount\}?/g,String(a)).replace(/\$\{?finalFactionCount\}?/g,String(e)).replace(/\$\{?finalLocationCount\}?/g,String(t)).replace(/continentsæ•°ç»„ï¼š\d+ä¸ªå¤§æ´²/g,`continentsæ•°ç»„ï¼š${a}ä¸ªå¤§æ´²`).replace(/factionsæ•°ç»„ï¼š\d+ä¸ªåŠ¿åŠ›/g,`factionsæ•°ç»„ï¼š${e}ä¸ªåŠ¿åŠ›`).replace(/locationsæ•°ç»„ï¼š\d+ä¸ªåœ°ç‚¹/g,`locationsæ•°ç»„ï¼š${t}ä¸ªåœ°ç‚¹`).replace(/(\d+)ä¸ªå¤§æ´²ï¼ˆè¾¹ç•Œä¸é‡å ï¼‰/g,`${a}ä¸ªå¤§æ´²ï¼ˆè¾¹ç•Œä¸é‡å ï¼‰`).replace(/(\d+)ä¸ªåŠ¿åŠ›ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰/g,`${e}ä¸ªåŠ¿åŠ›ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰`).replace(/(\d+)ä¸ªåœ°ç‚¹ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰/g,`${t}ä¸ªåœ°ç‚¹ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰`).replace(/## å¤§æ´²ç”Ÿæˆè¦æ±‚ï¼ˆ\d+ä¸ªï¼‰/g,`## å¤§æ´²ç”Ÿæˆè¦æ±‚ï¼ˆ${a}ä¸ªï¼‰`).replace(/## åŠ¿åŠ›ç”Ÿæˆè¦æ±‚ï¼ˆ\d+ä¸ªï¼‰/g,`## åŠ¿åŠ›ç”Ÿæˆè¦æ±‚ï¼ˆ${e}ä¸ªï¼‰`).replace(/## åœ°ç‚¹ç”Ÿæˆè¦æ±‚ï¼ˆ\d+ä¸ªï¼‰/g,`## åœ°ç‚¹ç”Ÿæˆè¦æ±‚ï¼ˆ${t}ä¸ªï¼‰`).replace(/continentsæ•°ç»„æœ‰\$\{?finalContinentCount\}?ä¸ªå¯¹è±¡/g,`continentsæ•°ç»„æœ‰${a}ä¸ªå¯¹è±¡`).replace(/factionsæ•°ç»„æœ‰\$\{?finalFactionCount\}?ä¸ªå¯¹è±¡/g,`factionsæ•°ç»„æœ‰${e}ä¸ªå¯¹è±¡`).replace(/locationsæ•°ç»„æœ‰\$\{?finalLocationCount\}?ä¸ªå¯¹è±¡/g,`locationsæ•°ç»„æœ‰${t}ä¸ªå¯¹è±¡`).replace(/continentsæ•°ç»„æœ‰\d+ä¸ªå¯¹è±¡ï¼Œè¾¹ç•Œä¸é‡å /g,`continentsæ•°ç»„æœ‰${a}ä¸ªå¯¹è±¡ï¼Œè¾¹ç•Œä¸é‡å `).replace(/factionsæ•°ç»„æœ‰\d+ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯0ä¸ªï¼‰/g,`factionsæ•°ç»„æœ‰${e}ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯0ä¸ªï¼‰`).replace(/locationsæ•°ç»„æœ‰\d+ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯0ä¸ªï¼‰/g,`locationsæ•°ç»„æœ‰${t}ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯0ä¸ªï¼‰`),n}return d}parseAIResponse(e){try{let t=null,n="";if(t=e.match(/```json\s*(\{[\s\S]*?\})\s*```/),t&&(n=t[1]),t||(t=e.match(/(\{[\s\S]*?"factions"\s*:\s*\[[\s\S]*?"locations"\s*:\s*\[[\s\S]*?\})/),t&&(n=t[1])),!t){const t=e.match(/\{[\s\S]*?\}/g);if(t)for(const e of t)try{const t=JSON.parse(e);if(t.factions||t.locations){n=e;break}}catch{continue}}if(!n)throw new Error("æ— æ³•è§£æAIå“åº”ä¸­çš„JSONæ•°æ®");let a=JSON.parse(n);return a.world_data&&"object"==typeof a.world_data&&(a=a.world_data),{continents:Array.isArray(a.continents)?a.continents:[],factions:Array.isArray(a.factions)?a.factions:[],locations:Array.isArray(a.locations)?a.locations:[]}}catch(e){const t=e instanceof Error?e.message:String(e);throw new Error(`JSONè§£æå¤±è´¥: ${t}`)}}convertToWorldInfo(e){return{ä¸–ç•Œåç§°:this.config.worldName||e.world_name||e.worldName||"ä¿®ä»™ç•Œ",ä¸–ç•ŒèƒŒæ™¯:this.config.worldBackground||e.world_background||e.worldBackground||"",å¤§é™†ä¿¡æ¯:(e.continents||[]).map(e=>({åç§°:e.åç§°||e.name||"æœªåå¤§é™†",æè¿°:e.æè¿°||e.description||"ä¸€ç‰‡ç¥ç§˜çš„ä¿®ä»™å¤§é™†ï¼Œçµæ°”å……æ²›ï¼ŒåŠ¿åŠ›æ—ç«‹",åœ°ç†ç‰¹å¾:e.terrain_features||e.åœ°ç†ç‰¹å¾||[],ä¿®çœŸç¯å¢ƒ:e.cultivation_environment||e.ä¿®çœŸç¯å¢ƒ||"çµæ°”å……æ²›ï¼Œé€‚å®œä¿®è¡Œ",æ°”å€™:e.climate||e.æ°”å€™||"å››å­£åˆ†æ˜ï¼Œæ¸©å’Œå®œäºº",å¤©ç„¶å±éšœ:e.natural_barriers||e.å¤©ç„¶å±éšœ||[],å¤§æ´²è¾¹ç•Œ:e.continent_bounds||e.å¤§æ´²è¾¹ç•Œ||[]})),åŠ¿åŠ›ä¿¡æ¯:(e.factions||[]).map(e=>{const t={å£°æœ›å€¼:s(n={åç§°:e.name||e.åç§°,ç±»å‹:e.type||e.ç±»å‹||"ä¿®ä»™å®—é—¨",ç­‰çº§:e.level||e.ç­‰çº§||"ä¸‰æµ",å®—ä¸»ä¿®ä¸º:e.leadership?.å®—ä¸»ä¿®ä¸º,æœ€å¼ºä¿®ä¸º:e.leadership?.æœ€å¼ºä¿®ä¸º,é•¿è€æ•°é‡:e.memberCount?.byPosition?.é•¿è€||0,æ ¸å¿ƒå¼Ÿå­æ•°:e.leadership?.æ ¸å¿ƒå¼Ÿå­æ•°,å†…é—¨å¼Ÿå­æ•°:e.leadership?.å†…é—¨å¼Ÿå­æ•°,å¤–é—¨å¼Ÿå­æ•°:e.leadership?.å¤–é—¨å¼Ÿå­æ•°}),ç»¼åˆæˆ˜åŠ›:i(n)};var n;return{åç§°:e.name||e.åç§°,ç±»å‹:e.type||e.ç±»å‹,ç­‰çº§:e.level||e.ç­‰çº§,ä½ç½®:e.location||e.headquarters||e.ä½ç½®,åŠ¿åŠ›èŒƒå›´:e.territory||e.territory_bounds||e.åŠ¿åŠ›èŒƒå›´||[],æè¿°:e.description||e.æè¿°,ç‰¹è‰²:e.specialties||e.features||e.ç‰¹è‰²||[],ä¸ç©å®¶å…³ç³»:e.ä¸ç©å®¶å…³ç³»||"ä¸­ç«‹",å£°æœ›å€¼:t.å£°æœ›å€¼,leadership:e.leadership?{å®—ä¸»:e.leadership.å®—ä¸»,å®—ä¸»ä¿®ä¸º:e.leadership.å®—ä¸»ä¿®ä¸º,å‰¯å®—ä¸»:e.leadership.å‰¯å®—ä¸»??void 0,å¤ªä¸Šé•¿è€:e.leadership.å¤ªä¸Šé•¿è€??void 0,å¤ªä¸Šé•¿è€ä¿®ä¸º:e.leadership.å¤ªä¸Šé•¿è€ä¿®ä¸º??void 0,æœ€å¼ºä¿®ä¸º:e.leadership.æœ€å¼ºä¿®ä¸º||e.leadership.å®—ä¸»ä¿®ä¸º,ç»¼åˆæˆ˜åŠ›:t.ç»¼åˆæˆ˜åŠ›,æ ¸å¿ƒå¼Ÿå­æ•°:e.leadership.æ ¸å¿ƒå¼Ÿå­æ•°,å†…é—¨å¼Ÿå­æ•°:e.leadership.å†…é—¨å¼Ÿå­æ•°,å¤–é—¨å¼Ÿå­æ•°:e.leadership.å¤–é—¨å¼Ÿå­æ•°}:void 0,memberCount:e.memberCount?{total:Number(e.memberCount.total)||0,byRealm:e.memberCount.byRealm||{},byPosition:e.memberCount.byPosition||{}}:void 0,territoryInfo:e.territoryInfo?{controlledAreas:e.territoryInfo.controlledAreas||[],influenceRange:e.territoryInfo.influenceRange,strategicValue:e.territoryInfo.strategicValue}:void 0,canJoin:void 0===e.canJoin||!!e.canJoin,joinRequirements:e.joinRequirements||[],benefits:e.benefits||[]}}),åœ°ç‚¹ä¿¡æ¯:(e.locations||[]).map(e=>({åç§°:e.name||e.åç§°,ç±»å‹:e.type||e.ç±»å‹,ä½ç½®:e.ä½ç½®,coordinates:e.coordinates,æè¿°:e.description||e.æè¿°,ç‰¹è‰²:e.features||e.ç‰¹è‰²,å®‰å…¨ç­‰çº§:e.safety_level||e.danger_level||e.å®‰å…¨ç­‰çº§||"è¾ƒå®‰å…¨",å¼€æ”¾çŠ¶æ€:e.status||e.å¼€æ”¾çŠ¶æ€||"å¼€æ”¾",ç›¸å…³åŠ¿åŠ›:e.related_factions||e.ç›¸å…³åŠ¿åŠ›||[],ç‰¹æ®ŠåŠŸèƒ½:e.special_functions||e.ç‰¹æ®ŠåŠŸèƒ½||[]})),ç”Ÿæˆæ—¶é—´:(new Date).toISOString(),ä¸–ç•Œçºªå…ƒ:this.config.worldEra||e.world_era||"ä¿®ä»™çºªå…ƒ",ç‰¹æ®Šè®¾å®š:e.special_settings||[],ç‰ˆæœ¬:"2.0-Enhanced"}}validateWorldData(e){const t={isValid:!0,errors:[]};return this.performCustomValidation(e,t),t.isValid||(this.previousErrors=t.errors.map(e=>e.message)),t}performCustomValidation(e,t){const n=e.åŠ¿åŠ›ä¿¡æ¯.reduce((e,t)=>{const n=t.ç­‰çº§;return e[n]=(e[n]||0)+1,e},{});n["è¶…çº§"]>1&&t.errors.push({path:"åŠ¿åŠ›ä¿¡æ¯.ç­‰çº§",message:"è¶…çº§åŠ¿åŠ›ä¸èƒ½è¶…è¿‡1ä¸ª",expected:"1ä¸ªè¶…çº§åŠ¿åŠ›",received:`${n["è¶…çº§"]}ä¸ªè¶…çº§åŠ¿åŠ›`});const a=e.åŠ¿åŠ›ä¿¡æ¯.map(e=>e.åç§°),r=new Set(a);a.length!==r.size&&t.errors.push({path:"åŠ¿åŠ›ä¿¡æ¯.åç§°",message:"åŠ¿åŠ›åç§°å­˜åœ¨é‡å¤",expected:"æ‰€æœ‰åç§°å”¯ä¸€",received:"å­˜åœ¨é‡å¤åç§°"});const o=e.åœ°ç‚¹ä¿¡æ¯.map(e=>e.åç§°),i=new Set(o);o.length!==i.size&&t.errors.push({path:"åœ°ç‚¹ä¿¡æ¯.åç§°",message:"åœ°ç‚¹åç§°å­˜åœ¨é‡å¤",expected:"æ‰€æœ‰åç§°å”¯ä¸€",received:"å­˜åœ¨é‡å¤åç§°"}),this.config.worldName&&e.ä¸–ç•Œåç§°!==this.config.worldName&&t.errors.push({path:"ä¸–ç•Œåç§°",message:"ä¸–ç•Œåç§°å¿…é¡»ä¸ç©å®¶é€‰æ‹©ä¸€è‡´",expected:this.config.worldName,received:e.ä¸–ç•Œåç§°}),t.isValid=0===t.errors.length}}},2497:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.cloud-sync-button[data-v-5cceb5b0] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.5rem 0.8rem;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  font-size: 0.85rem;\n  min-width: 80px;\n  white-space: nowrap;\n}\n.cloud-sync-button[data-v-5cceb5b0]:hover {\n  background: var(--color-surface-lighter);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.sync-text[data-v-5cceb5b0] {\n  font-weight: 500;\n}\n.sync-icon[data-v-5cceb5b0] {\n  font-size: 1em;\n  flex-shrink: 0;\n}\n\n/* å·²åŒæ­¥çŠ¶æ€æ ·å¼ */\n.cloud-sync-button.synced[data-v-5cceb5b0] {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-success-rgb), 0.1));\n  border-color: var(--color-success);\n  color: var(--color-success);\n}\n.cloud-sync-button[data-v-5cceb5b0]:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.cloud-sync-button.synced[data-v-5cceb5b0]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.2), rgba(var(--color-success-rgb), 0.2));\n}\n\n/* Size variants */\n.cloud-sync-button.small[data-v-5cceb5b0] {\n  padding: 0.5rem 0.75rem;\n  font-size: 0.9rem;\n  min-width: 100px;\n}\n.cloud-sync-button.large[data-v-5cceb5b0] {\n  padding: 1rem 1.5rem;\n  font-size: 1.1rem;\n  min-width: 180px;\n}\n\n/* Compact variant */\n.cloud-sync-button.compact[data-v-5cceb5b0] {\n  min-width: auto;\n  padding: 0.5rem;\n}\n.cloud-sync-button.compact .sync-text[data-v-5cceb5b0] {\n  display: none;\n}\n",""]);const s=i},2634:()=>{},2639:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var a=n(4061),r=n(9173),o=n(6494);const i={class:"modal-header"},s={class:"modal-title"},l={class:"modal-content"},c=["innerHTML"],d=(0,a.defineComponent)({__name:"DetailModal",setup(e){const t=(0,r.useUIStore)(),n=()=>{t.hideDetailModal()};return(e,r)=>((0,a.openBlock)(),(0,a.createBlock)(a.Transition,{name:"modal-fade"},{default:(0,a.withCtx)(()=>[(0,a.unref)(t).showDetailModalState?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:n},[(0,a.createElementVNode)("div",{class:"modal-container",onClick:r[0]||(r[0]=(0,a.withModifiers)(()=>{},["stop"]))},[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("h3",s,(0,a.toDisplayString)((0,a.unref)(t).detailModalTitle),1),(0,a.createElementVNode)("button",{class:"modal-close-button",onClick:n},[r[1]||(r[1]=(0,a.createElementVNode)("span",null,"å…³é—­",-1)),(0,a.createVNode)((0,a.unref)(o.A),{size:16})])]),(0,a.createElementVNode)("div",l,[(0,a.createCommentVNode)(" Render component if provided "),(0,a.unref)(t).detailModalComponent?((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)((0,a.unref)(t).detailModalComponent),(0,a.normalizeProps)((0,a.mergeProps)({key:0},(0,a.unref)(t).detailModalProps)),null,16)):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createCommentVNode)(" Fallback to HTML content "),(0,a.createElementVNode)("div",{innerHTML:(0,a.unref)(t).detailModalContent},null,8,c)],2112))])])])):(0,a.createCommentVNode)("v-if",!0)]),_:1}))}});var u=n(5072),m=n.n(u),p=n(7825),f=n.n(p),g=n(7659),h=n.n(g),v=n(5056),b=n.n(v),y=n(540),x=n.n(y),k=n(1113),w=n.n(k),E=n(9922),N={};N.styleTagTransform=w(),N.setAttributes=b(),N.insert=h().bind(null,"head"),N.domAPI=f(),N.insertStyleElement=x(),m()(E.A,N),E.A&&E.A.locals&&E.A.locals;const S=(0,n(6262).A)(d,[["__scopeId","data-v-badac3ae"]])},2642:(e,t,n)=>{"use strict";var a=n(7720),r=Object.prototype.hasOwnProperty,o=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:a.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,n,a){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(o),c=s?o.slice(0,s.index):o,d=[];if(c){if(!n.plainObjects&&r.call(Object.prototype,c)&&!n.allowPrototypes)return;d.push(c)}for(var u=0;n.depth>0&&null!==(s=i.exec(o))&&u<n.depth;){if(u+=1,!n.plainObjects&&r.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;d.push(s[1])}if(s){if(!0===n.strictDepth)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");d.push("["+o.slice(s.index)+"]")}return function(e,t,n,a){for(var r=a?t:l(t,n),o=e.length-1;o>=0;--o){var i,s=e[o];if("[]"===s&&n.parseArrays)i=n.allowEmptyArrays&&(""===r||n.strictNullHandling&&null===r)?[]:[].concat(r);else{i=n.plainObjects?Object.create(null):{};var c="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,d=n.decodeDotInKeys?c.replace(/%2E/g,"."):c,u=parseInt(d,10);n.parseArrays||""!==d?!isNaN(u)&&s!==d&&String(u)===d&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(i=[])[u]=r:"__proto__"!==d&&(i[d]=r):i={0:r}}r=i}return r}(d,t,n,a)}};e.exports=function(e,t){var n=function(e){if(!e)return i;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset,n=void 0===e.duplicates?i.duplicates:e.duplicates;if("combine"!==n&&"first"!==n&&"last"!==n)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||i.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:i.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:i.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||a.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,duplicates:n,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictDepth:"boolean"==typeof e.strictDepth?!!e.strictDepth:i.strictDepth,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var d="string"==typeof e?function(e,t){var n={__proto__:null},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var d,u=t.parameterLimit===1/0?void 0:t.parameterLimit,m=c.split(t.delimiter,u),p=-1,f=t.charset;if(t.charsetSentinel)for(d=0;d<m.length;++d)0===m[d].indexOf("utf8=")&&("utf8=%E2%9C%93"===m[d]?f="utf-8":"utf8=%26%2310003%3B"===m[d]&&(f="iso-8859-1"),p=d,d=m.length);for(d=0;d<m.length;++d)if(d!==p){var g,h,v=m[d],b=v.indexOf("]="),y=-1===b?v.indexOf("="):b+1;-1===y?(g=t.decoder(v,i.decoder,f,"key"),h=t.strictNullHandling?null:""):(g=t.decoder(v.slice(0,y),i.decoder,f,"key"),h=a.maybeMap(l(v.slice(y+1),t),function(e){return t.decoder(e,i.decoder,f,"value")})),h&&t.interpretNumericEntities&&"iso-8859-1"===f&&(h=s(h)),v.indexOf("[]=")>-1&&(h=o(h)?[h]:h);var x=r.call(n,g);x&&"combine"===t.duplicates?n[g]=a.combine(n[g],h):x&&"last"!==t.duplicates||(n[g]=h)}return n}(e,n):e,u=n.plainObjects?Object.create(null):{},m=Object.keys(d),p=0;p<m.length;++p){var f=m[p],g=c(f,d[f],n,"string"==typeof e);u=a.merge(u,g,n)}return!0===n.allowSparse?u:a.compact(u)}},2701:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.right-sidebar[data-v-0f5fc9dc] {\n  width: 100%;\n  height: 100%;\n  padding: 16px;\n  box-sizing: border-box;\n  font-family: var(--font-family-sans-serif);\n  display: flex;\n  flex-direction: column;\n  background: var(--color-surface);\n}\n.sidebar-header[data-v-0f5fc9dc] {\n  margin-bottom: 16px;\n  padding: 12px 0;\n  border-bottom: 1px solid var(--color-border);\n  background: transparent;\n}\n.sidebar-title[data-v-0f5fc9dc] {\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  text-align: center;\n}\n.title-icon[data-v-0f5fc9dc] {\n  color: var(--color-primary);\n  flex-shrink: 0;\n}\n.title-badge[data-v-0f5fc9dc] {\n  display: inline-block;\n  padding: 2px 8px;\n  border-radius: 9999px;\n  background: var(--color-primary);\n  color: #fff;\n  font-weight: 600;\n  font-size: 12px;\n  letter-spacing: 0.2px;\n}\n\n/* ç§»é™¤æ·±è‰²ä¸»é¢˜ç¡¬ç¼–ç ï¼Œä½¿ç”¨CSSå˜é‡è‡ªåŠ¨é€‚é… */\n.sidebar-content[data-v-0f5fc9dc] {\n  flex: 1;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\n}\n.sidebar-content[data-v-0f5fc9dc]::-webkit-scrollbar {\n  width: 4px;\n}\n.sidebar-content[data-v-0f5fc9dc]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.sidebar-content[data-v-0f5fc9dc]::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 2px;\n}\n[data-theme=\"dark\"] .sidebar-content[data-v-0f5fc9dc]::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-thumb-color);\n}\n\n/* è§’è‰²åŸºæœ¬ä¿¡æ¯æ ·å¼ */\n.character-info-section[data-v-0f5fc9dc] {\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.character-basic[data-v-0f5fc9dc] {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 8px;\n}\n.character-basic .detail-item[data-v-0f5fc9dc] {\n  background: var(--color-surface-hover);\n  border-radius: 6px;\n  padding: 8px;\n  font-size: 0.75rem;\n}\n.character-basic .detail-label[data-v-0f5fc9dc] {\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.character-basic .detail-value[data-v-0f5fc9dc] {\n  color: var(--color-text);\n  font-weight: 600;\n}\n\n/* è§’è‰²çŠ¶æ€åŒºåŸŸæ ·å¼ */\n.character-state-section[data-v-0f5fc9dc] {\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.character-states[data-v-0f5fc9dc] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.state-item[data-v-0f5fc9dc] {\n  background: var(--color-surface-hover);\n  border-radius: 6px;\n  padding: 8px;\n}\n.state-label[data-v-0f5fc9dc] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n  margin-bottom: 4px;\n  display: block;\n}\n.state-content[data-v-0f5fc9dc] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.state-text[data-v-0f5fc9dc] {\n  font-size: 0.7rem;\n  color: var(--color-text-muted);\n  text-align: center;\n}\n.progress-fill.cultivation[data-v-0f5fc9dc] {\n  background: linear-gradient(90deg, #8b5cf6, #a78bfa);\n}\n\n/* æ”¶ç¼©åŒºåŸŸé€šç”¨æ ·å¼ */\n.collapsible-section[data-v-0f5fc9dc] {\n  margin-bottom: 16px;\n  padding: 0;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.section-header[data-v-0f5fc9dc] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  cursor: pointer;\n  transition: background 0.2s ease;\n  border-radius: 8px 8px 0 0;\n}\n.section-header[data-v-0f5fc9dc]:hover {\n  background: var(--color-surface-hover);\n}\n.collapse-toggle[data-v-0f5fc9dc] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.collapse-toggle[data-v-0f5fc9dc]:hover {\n  color: var(--color-text);\n  background: var(--color-surface-hover);\n}\n.collapse-toggle svg[data-v-0f5fc9dc] {\n  transform: rotate(0deg);\n  transition: transform 0.2s ease;\n}\n.collapse-toggle.collapsed svg[data-v-0f5fc9dc] {\n  transform: rotate(-90deg);\n}\n.status-details[data-v-0f5fc9dc] {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 8px;\n  margin-top: 8px;\n}\n.current-status[data-v-0f5fc9dc] {\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid var(--color-border);\n}\n.current-status .status-details[data-v-0f5fc9dc] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-top: 0;\n}\n.detail-item[data-v-0f5fc9dc] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 6px;\n  padding: 6px 8px;\n  background: var(--color-surface-hover);\n  border-radius: 4px;\n  font-size: 0.75rem;\n}\n.detail-label[data-v-0f5fc9dc] {\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.detail-value[data-v-0f5fc9dc] {\n  color: var(--color-text);\n  font-weight: 600;\n}\n\n/* å…­ç»´çµæ ¹åŒºåŸŸæ ·å¼ */\n.attributes-section[data-v-0f5fc9dc] {\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.attributes-grid[data-v-0f5fc9dc] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.attribute-item[data-v-0f5fc9dc] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n.attribute-item[data-v-0f5fc9dc]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n}\n.attr-info[data-v-0f5fc9dc] {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.attr-name[data-v-0f5fc9dc] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.attr-value[data-v-0f5fc9dc] {\n  font-size: 0.85rem;\n  color: var(--color-text);\n  font-weight: 700;\n}\n.attr-quality[data-v-0f5fc9dc] {\n  font-size: 0.65rem;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-weight: 600;\n  border: 1px solid;\n}\n\n/* å±æ€§å“è´¨é¢œè‰² */\n.quality-purple .attr-quality[data-v-0f5fc9dc] {\n  background: #8b5cf6;\n  color: white;\n  border-color: #8b5cf6;\n}\n.quality-orange .attr-quality[data-v-0f5fc9dc] {\n  background: #f59e0b;\n  color: white;\n  border-color: #f59e0b;\n}\n.quality-blue .attr-quality[data-v-0f5fc9dc] {\n  background: #3b82f6;\n  color: white;\n  border-color: #3b82f6;\n}\n.quality-green .attr-quality[data-v-0f5fc9dc] {\n  background: #10b981;\n  color: white;\n  border-color: #10b981;\n}\n.quality-gray .attr-quality[data-v-0f5fc9dc] {\n  background: #6b7280;\n  color: white;\n  border-color: #6b7280;\n}\n\n/* çµæ ¹å’Œå£°æœ›ä¿¡æ¯ */\n.spiritual-info[data-v-0f5fc9dc] {\n  border-top: 1px solid var(--color-border);\n  padding-top: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.info-row[data-v-0f5fc9dc] {\n  display: flex;\n}\n.info-item[data-v-0f5fc9dc] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 6px 8px;\n  background: var(--color-surface);\n  border-radius: 4px;\n  font-size: 0.75rem;\n}\n.info-label[data-v-0f5fc9dc] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.info-icon[data-v-0f5fc9dc] {\n  flex-shrink: 0;\n}\n.info-icon.spiritual[data-v-0f5fc9dc] {\n  color: var(--color-accent);\n}\n.info-icon.reputation[data-v-0f5fc9dc] {\n  color: var(--color-warning);\n}\n.info-value[data-v-0f5fc9dc] {\n  color: var(--color-text);\n  font-weight: 600;\n}\n\n/* å›¾æ ‡é¢œè‰² */\n.section-icon.attributes[data-v-0f5fc9dc] {\n  color: var(--color-accent);\n}\n\n/* é€šç”¨åŒºå—æ ·å¼ */\n.ai-chat-section[data-v-0f5fc9dc],\n.info-section[data-v-0f5fc9dc],\n.cultivation-section[data-v-0f5fc9dc],\n.vitals-section[data-v-0f5fc9dc],\n.attributes-section[data-v-0f5fc9dc],\n.location-section[data-v-0f5fc9dc],\n.wealth-section[data-v-0f5fc9dc] {\n  margin-bottom: 16px;\n  padding: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n\n/* å¤©èµ‹ç¥é€šç‰¹å®šæ ·å¼ */\n.talents-list[data-v-0f5fc9dc] {\n  padding: 0 16px 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n/* ç©ºçŠ¶æ€æ ·å¼ */\n.empty-talents[data-v-0f5fc9dc] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem 1rem;\n  text-align: center;\n  gap: 0.5rem;\n}\n.empty-icon[data-v-0f5fc9dc] {\n  font-size: 2rem;\n  margin-bottom: 0.5rem;\n  opacity: 0.7;\n}\n.empty-text[data-v-0f5fc9dc] {\n  color: var(--color-text-secondary);\n  font-size: 0.95rem;\n  font-weight: 500;\n  margin-bottom: 0.25rem;\n}\n.empty-hint[data-v-0f5fc9dc] {\n  color: var(--color-text-muted);\n  font-size: 0.8rem;\n  line-height: 1.4;\n  max-width: 200px;\n}\n\n/* çŠ¶æ€æ•ˆæœç‰¹å®šæ ·å¼ */\n.status-effects[data-v-0f5fc9dc] {\n  padding: 0 16px 16px;\n}\n.empty-status[data-v-0f5fc9dc] {\n  padding: 20px;\n  text-align: center;\n}\n.empty-text[data-v-0f5fc9dc] {\n  font-size: 0.8rem;\n  color: var(--color-text-muted);\n  font-style: italic;\n}\n\n/* æ–°çš„æ ‡ç­¾å¼çŠ¶æ€æ•ˆæœæ ·å¼ - ç´§å‡‘ä¸”ç¾è§‚ */\n.status-tags-container[data-v-0f5fc9dc] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  padding: 12px;\n}\n.status-tag[data-v-0f5fc9dc] {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  border-radius: 20px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  border: 1px solid;\n  backdrop-filter: blur(4px);\n  white-space: nowrap;\n  max-width: 100%;\n  overflow: hidden;\n}\n.status-tag.buff[data-v-0f5fc9dc] {\n  background: linear-gradient(135deg, rgba(var(--color-success-rgb), 0.2), rgba(var(--color-success-rgb), 0.1));\n  border-color: rgba(var(--color-success-rgb), 0.4);\n  color: var(--color-success);\n}\n.status-tag.debuff[data-v-0f5fc9dc] {\n  background: linear-gradient(135deg, rgba(var(--color-error-rgb), 0.2), rgba(var(--color-error-rgb), 0.1));\n  border-color: rgba(var(--color-error-rgb), 0.4);\n  color: var(--color-danger);\n}\n.status-tag[data-v-0f5fc9dc]:hover {\n  transform: translateY(-1px) scale(1.05);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n}\n.status-tag.buff[data-v-0f5fc9dc]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-success-rgb), 0.3), rgba(var(--color-success-rgb), 0.15));\n  border-color: rgba(var(--color-success-rgb), 0.6);\n  box-shadow: 0 4px 12px rgba(var(--color-success-rgb), 0.3);\n}\n.status-tag.debuff[data-v-0f5fc9dc]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-error-rgb), 0.3), rgba(var(--color-error-rgb), 0.15));\n  border-color: rgba(var(--color-error-rgb), 0.6);\n  box-shadow: 0 4px 12px rgba(var(--color-error-rgb), 0.3);\n}\n.tag-icon[data-v-0f5fc9dc] {\n  font-size: 0.8rem;\n  flex-shrink: 0;\n}\n.tag-name[data-v-0f5fc9dc] {\n  font-weight: 600;\n  flex-shrink: 0;\n}\n.tag-intensity[data-v-0f5fc9dc] {\n  font-size: 0.65rem;\n  background: rgba(var(--color-warning-rgb), 0.8);\n  color: var(--color-text);\n  padding: 1px 4px;\n  border-radius: 8px;\n  font-weight: 600;\n  flex-shrink: 0;\n}\n.tag-time[data-v-0f5fc9dc] {\n  font-size: 0.65rem;\n  opacity: 0.8;\n  font-weight: 400;\n  flex-shrink: 0;\n}\n/* æ ‡é¢˜æ ·å¼ - å›¾æ ‡å’Œæ–‡å­—åœ¨ä¸€è¡Œ */\n.section-title[data-v-0f5fc9dc] {\n  margin: 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n  padding-bottom: 6px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.section-title span[data-v-0f5fc9dc] {\n  flex: 1;\n}\n.section-icon[data-v-0f5fc9dc] {\n  color: var(--color-primary);\n  opacity: 0.8;\n  flex-shrink: 0;\n}\n.section-icon.gold[data-v-0f5fc9dc] {\n  color: var(--color-warning);\n}\n.vital-icon[data-v-0f5fc9dc] {\n  flex-shrink: 0;\n}\n.vital-icon.blood[data-v-0f5fc9dc] { color: var(--vital-health);\n}\n.vital-icon.mana[data-v-0f5fc9dc] { color: var(--vital-lingqi);\n}\n.vital-icon.spirit[data-v-0f5fc9dc] { color: var(--vital-spirit);\n}\n.vital-icon.lifespan[data-v-0f5fc9dc] { color: var(--vital-lifespan);\n}\n.vital-icon.reputation[data-v-0f5fc9dc] { color: var(--color-warning);\n}\n\n/* å£°æœ›æ˜¾ç¤ºæ ·å¼ */\n.reputation-display[data-v-0f5fc9dc] {\n  margin-top: 8px;\n  border-top: 1px solid var(--color-border);\n  padding-top: 8px;\n}\n.reputation-item[data-v-0f5fc9dc] {\n  background: var(--color-surface);\n  border-radius: 6px;\n  padding: 8px;\n  border: 1px solid var(--color-border);\n  transition: all 0.2s ease;\n}\n.reputation-item[data-v-0f5fc9dc]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n}\n.reputation-info[data-v-0f5fc9dc] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.reputation-label[data-v-0f5fc9dc] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.reputation-value[data-v-0f5fc9dc] {\n  font-size: 0.8rem;\n  font-weight: 600;\n  padding: 2px 6px;\n  border-radius: 12px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  transition: all 0.3s ease;\n}\n\n/* å£°æœ›ç­‰çº§é…è‰² */\n.reputation-neutral[data-v-0f5fc9dc] {\n  color: var(--color-text-secondary);\n  background: rgba(128, 128, 128, 0.1);\n  border: 1px solid rgba(128, 128, 128, 0.3);\n}\n\n/* æ­£é¢å£°æœ› */\n.reputation-minor[data-v-0f5fc9dc] {\n  color: #10b981;\n  background: rgba(16, 185, 129, 0.1);\n  border: 1px solid rgba(16, 185, 129, 0.3);\n}\n.reputation-known[data-v-0f5fc9dc] {\n  color: #3b82f6;\n  background: rgba(59, 130, 246, 0.1);\n  border: 1px solid rgba(59, 130, 246, 0.3);\n}\n.reputation-notable[data-v-0f5fc9dc] {\n  color: #8b5cf6;\n  background: rgba(139, 92, 246, 0.1);\n  border: 1px solid rgba(139, 92, 246, 0.3);\n}\n.reputation-renowned[data-v-0f5fc9dc] {\n  color: #f59e0b;\n  background: rgba(245, 158, 11, 0.1);\n  border: 1px solid rgba(245, 158, 11, 0.3);\n}\n.reputation-famous[data-v-0f5fc9dc] {\n  color: #f97316;\n  background: rgba(249, 115, 22, 0.1);\n  border: 1px solid rgba(249, 115, 22, 0.3);\n}\n.reputation-legendary[data-v-0f5fc9dc] {\n  color: #dc2626;\n  background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(239, 68, 68, 0.1));\n  border: 1px solid rgba(220, 38, 38, 0.4);\n  box-shadow: 0 0 8px rgba(220, 38, 38, 0.3);\n}\n\n/* è´Ÿé¢å£°æœ›ï¼ˆæ¶åï¼‰ */\n.reputation-evil-minor[data-v-0f5fc9dc] {\n  color: #6b7280;\n  background: rgba(107, 114, 128, 0.1);\n  border: 1px solid rgba(107, 114, 128, 0.3);\n}\n.reputation-evil-low[data-v-0f5fc9dc] {\n  color: #ef4444;\n  background: rgba(239, 68, 68, 0.1);\n  border: 1px solid rgba(239, 68, 68, 0.3);\n}\n.reputation-evil-medium[data-v-0f5fc9dc] {\n  color: #dc2626;\n  background: rgba(220, 38, 38, 0.1);\n  border: 1px solid rgba(220, 38, 38, 0.3);\n}\n.reputation-evil-high[data-v-0f5fc9dc] {\n  color: #991b1b;\n  background: rgba(153, 27, 27, 0.1);\n  border: 1px solid rgba(153, 27, 27, 0.3);\n}\n.reputation-evil-legendary[data-v-0f5fc9dc] {\n  color: #7f1d1d;\n  background: linear-gradient(135deg, rgba(127, 29, 29, 0.2), rgba(153, 27, 27, 0.1));\n  border: 1px solid rgba(127, 29, 29, 0.4);\n  box-shadow: 0 0 8px rgba(127, 29, 29, 0.4);\n}\n.reputation-number[data-v-0f5fc9dc] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  opacity: 0.8;\n}\n\n/* ç‚¹å‡»æç¤ºæ ·å¼ */\n.clickable[data-v-0f5fc9dc] {\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.clickable[data-v-0f5fc9dc]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n  border-color: rgba(var(--color-accent-rgb), 0.5);\n}\n\n/* å¤©èµ‹å¡ç‰‡æ ·å¼ - å¢å¼ºç¾è§‚æ€§ */\n.talent-card[data-v-0f5fc9dc] {\n  background: linear-gradient(135deg, rgba(var(--color-accent-rgb), 0.15), rgba(var(--color-accent-rgb), 0.1));\n  border: 1px solid rgba(var(--color-accent-rgb), 0.3);\n  border-left: 4px solid var(--color-accent);\n  border-radius: 12px;\n  padding: 16px;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  backdrop-filter: blur(8px);\n  position: relative;\n  overflow: hidden;\n}\n.talent-card[data-v-0f5fc9dc]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(135deg,\n    rgba(var(--color-accent-rgb), 0.1) 0%,\n    rgba(var(--color-accent-rgb), 0.05) 50%,\n    rgba(var(--color-accent-rgb), 0.1) 100%);\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  pointer-events: none;\n}\n.talent-card[data-v-0f5fc9dc]:hover::before {\n  opacity: 1;\n}\n.talent-card[data-v-0f5fc9dc]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-accent-rgb), 0.2), rgba(var(--color-accent-rgb), 0.15));\n  border-color: rgba(var(--color-accent-rgb), 0.5);\n  transform: translateX(6px) translateY(-2px);\n  box-shadow: 0 8px 32px rgba(var(--color-accent-rgb), 0.25), 0 0 0 1px rgba(var(--color-accent-rgb), 0.2);\n}\n.talent-header[data-v-0f5fc9dc] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: relative;\n  z-index: 1;\n}\n.talent-name[data-v-0f5fc9dc] {\n  font-size: 0.9rem;\n  font-weight: 700;\n  color: var(--color-accent);\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n}\n.talent-level[data-v-0f5fc9dc] {\n  font-size: 0.75rem;\n  color: var(--color-warning);\n  font-weight: 600;\n  background: linear-gradient(135deg, rgba(var(--color-warning-rgb), 0.2), rgba(var(--color-warning-rgb), 0.1));\n  padding: 4px 10px;\n  border-radius: 12px;\n  border: 1px solid rgba(var(--color-warning-rgb), 0.3);\n  backdrop-filter: blur(4px);\n}\n.talent-progress[data-v-0f5fc9dc] {\n  margin-top: 10px;\n  position: relative;\n  z-index: 1;\n}\n.progress-fill.talent[data-v-0f5fc9dc] {\n  background: linear-gradient(90deg, var(--color-accent), var(--color-accent-hover), rgba(var(--color-accent-rgb), 0.9));\n  box-shadow: 0 2px 8px rgba(var(--color-accent-rgb), 0.3);\n}\n\n/* ç”Ÿå‘½ä½“å¾æ ·å¼ */\n.vitals-list[data-v-0f5fc9dc] {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.vital-item[data-v-0f5fc9dc] {\n  background: var(--color-surface);\n  border-radius: 8px;\n  padding: 12px;\n  border: 1px solid var(--color-border);\n  transition: all 0.2s ease;\n}\n.vital-item[data-v-0f5fc9dc]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n}\n.vital-info[data-v-0f5fc9dc] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.vital-name[data-v-0f5fc9dc] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n.vital-text[data-v-0f5fc9dc] {\n  font-size: 0.75rem;\n  color: var(--color-text);\n  font-weight: 600;\n}\n.progress-bar[data-v-0f5fc9dc] {\n  height: 6px;\n  background: var(--color-surface-light);\n  border-radius: 3px;\n  overflow: hidden;\n  position: relative;\n}\n.progress-fill[data-v-0f5fc9dc] {\n  height: 100%;\n  border-radius: 3px;\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.progress-fill.health[data-v-0f5fc9dc] { background: var(--vital-health);\n}\n.progress-fill.mana[data-v-0f5fc9dc] { background: var(--vital-lingqi);\n}\n.progress-fill.spirit[data-v-0f5fc9dc] { background: var(--vital-spirit);\n}\n/* å¯¿å…ƒè¿›åº¦æ¡ç»Ÿä¸€ç´«è‰² */\n.progress-fill.lifespan[data-v-0f5fc9dc] { background: var(--vital-lifespan);\n}\n\n/* ä¿®ä¸ºçŠ¶æ€æ ·å¼ */\n.realm-display[data-v-0f5fc9dc] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 10px;\n  margin-bottom: 10px;\n}\n.realm-info[data-v-0f5fc9dc] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 8px;\n  flex-direction: column;\n  gap: 4px;\n}\n.realm-name[data-v-0f5fc9dc] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-accent);\n}\n.realm-breakthrough[data-v-0f5fc9dc] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  line-height: 1.4;\n  opacity: 0.8;\n}\n.realm-level[data-v-0f5fc9dc] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n\n/* å‡¡äººå¢ƒç•Œç‰¹æ®Šæ ·å¼ */\n.realm-mortal[data-v-0f5fc9dc] {\n  padding: 8px;\n  background: rgba(var(--color-primary-rgb), 0.05);\n  border-radius: 4px;\n  text-align: center;\n  border: 1px dashed rgba(var(--color-primary-rgb), 0.3);\n}\n.mortal-text[data-v-0f5fc9dc] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-style: italic;\n  opacity: 0.8;\n}\n.realm-progress[data-v-0f5fc9dc] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.progress-text[data-v-0f5fc9dc] {\n  font-size: 0.65rem;\n  color: var(--color-text-muted);\n  text-align: center;\n}\n\n/* çŠ¶æ€æ•ˆæœæ ·å¼ */\n.status-effects[data-v-0f5fc9dc] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n.status-effect[data-v-0f5fc9dc] {\n  padding: 4px 8px;\n  border-radius: 12px;\n  font-size: 0.7rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n}\n.status-effect.buff[data-v-0f5fc9dc] {\n  background: linear-gradient(135deg, #10b981, #059669);\n  color: white;\n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);\n}\n.status-effect.debuff[data-v-0f5fc9dc] {\n  background: linear-gradient(135deg, #ef4444, #dc2626);\n  color: white;\n  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.2);\n}\n.status-effect[data-v-0f5fc9dc]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\n}\n.effect-name[data-v-0f5fc9dc] {\n  font-size: 0.65rem;\n}\n.effect-time[data-v-0f5fc9dc] {\n  font-size: 0.6rem;\n  opacity: 0.8;\n}\n\n/* æ— è§’è‰²æ•°æ®æ ·å¼ */\n.no-character[data-v-0f5fc9dc] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  gap: 10px;\n}\n.no-char-text[data-v-0f5fc9dc] {\n  font-size: 0.9rem;\n  color: var(--color-text-muted);\n  font-style: italic;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 640px) {\n.right-sidebar[data-v-0f5fc9dc] {\n    padding: 12px;\n}\n.sidebar-title[data-v-0f5fc9dc] {\n    font-size: 0.9rem;\n}\n.section-title[data-v-0f5fc9dc] {\n    font-size: 0.8rem;\n}\n.vitals-list[data-v-0f5fc9dc] {\n    gap: 8px;\n}\n.vital-item[data-v-0f5fc9dc] {\n    padding: 6px;\n}\n.vital-name[data-v-0f5fc9dc] {\n    font-size: 0.7rem;\n}\n.vital-text[data-v-0f5fc9dc] {\n    font-size: 0.65rem;\n}\n.talent-card[data-v-0f5fc9dc] {\n    padding: 10px;\n}\n.talent-name[data-v-0f5fc9dc] {\n    font-size: 0.8rem;\n}\n.status-effect-card[data-v-0f5fc9dc] {\n    padding: 8px 10px;\n}\n.effect-name[data-v-0f5fc9dc] {\n    font-size: 0.75rem;\n}\n.status-tags-container[data-v-0f5fc9dc] {\n    gap: 6px;\n    padding: 8px;\n}\n.status-tag[data-v-0f5fc9dc] {\n    font-size: 0.7rem;\n    padding: 4px 8px;\n    gap: 4px;\n}\n.tag-intensity[data-v-0f5fc9dc] {\n    font-size: 0.6rem;\n    padding: 1px 3px;\n}\n.tag-time[data-v-0f5fc9dc] {\n    font-size: 0.6rem;\n}\n.detail-item[data-v-0f5fc9dc] {\n    padding: 5px 6px;\n    font-size: 0.7rem;\n}\n.attributes-grid[data-v-0f5fc9dc] {\n    gap: 6px;\n}\n.attribute-item[data-v-0f5fc9dc] {\n    padding: 6px;\n}\n.attr-name[data-v-0f5fc9dc] {\n    font-size: 0.7rem;\n}\n.attr-value[data-v-0f5fc9dc] {\n    font-size: 0.8rem;\n}\n.attr-quality[data-v-0f5fc9dc] {\n    font-size: 0.6rem;\n    padding: 1px 4px;\n}\n.info-item[data-v-0f5fc9dc] {\n    padding: 5px 6px;\n    font-size: 0.7rem;\n}\n.realm-name[data-v-0f5fc9dc] {\n    font-size: 0.8rem;\n}\n.progress-bar[data-v-0f5fc9dc] {\n    height: 5px;\n}\n}\n@media (max-width: 480px) {\n.right-sidebar[data-v-0f5fc9dc] {\n    padding: 8px;\n}\n.sidebar-header[data-v-0f5fc9dc] {\n    margin-bottom: 12px;\n    padding-bottom: 8px;\n}\n.vitals-section[data-v-0f5fc9dc],\n  .cultivation-section[data-v-0f5fc9dc],\n  .collapsible-section[data-v-0f5fc9dc] {\n    margin-bottom: 12px;\n    padding: 10px;\n}\n.attributes-section[data-v-0f5fc9dc] {\n    margin-bottom: 12px;\n    padding: 10px;\n}\n.attributes-grid[data-v-0f5fc9dc] {\n    gap: 4px;\n}\n.attribute-item[data-v-0f5fc9dc] {\n    padding: 5px;\n}\n.attr-name[data-v-0f5fc9dc] {\n    font-size: 0.65rem;\n}\n.attr-value[data-v-0f5fc9dc] {\n    font-size: 0.75rem;\n}\n.attr-quality[data-v-0f5fc9dc] {\n    font-size: 0.55rem;\n    padding: 1px 3px;\n}\n.status-details[data-v-0f5fc9dc] {\n    grid-template-columns: 1fr;\n}\n.talents-list[data-v-0f5fc9dc] {\n    padding: 0 12px 12px;\n}\n.status-effects[data-v-0f5fc9dc] {\n    padding: 0 12px 12px;\n}\n.status-tags-container[data-v-0f5fc9dc] {\n    gap: 4px;\n    padding: 6px;\n}\n.status-tag[data-v-0f5fc9dc] {\n    font-size: 0.65rem;\n    padding: 3px 6px;\n    gap: 3px;\n}\n.tag-intensity[data-v-0f5fc9dc] {\n    font-size: 0.55rem;\n    padding: 1px 2px;\n}\n.tag-time[data-v-0f5fc9dc] {\n    font-size: 0.55rem;\n}\n}\n\n/* å¹³æ¿è®¾å¤‡ä¼˜åŒ– */\n@media (min-width: 769px) and (max-width: 1024px) {\n.right-sidebar[data-v-0f5fc9dc] {\n    padding: 14px;\n}\n.vital-item[data-v-0f5fc9dc] {\n    padding: 7px;\n}\n.talent-card[data-v-0f5fc9dc] {\n    padding: 11px;\n}\n}\n\n/* å¤§å±å¹•ä¼˜åŒ– */\n@media (min-width: 1440px) {\n.right-sidebar[data-v-0f5fc9dc] {\n    padding: 20px;\n}\n.sidebar-title[data-v-0f5fc9dc] {\n    font-size: 1.1rem;\n}\n.section-title[data-v-0f5fc9dc] {\n    font-size: 0.9rem;\n}\n.vital-name[data-v-0f5fc9dc] {\n    font-size: 0.8rem;\n}\n.talent-name[data-v-0f5fc9dc] {\n    font-size: 0.9rem;\n}\n.effect-name[data-v-0f5fc9dc] {\n    font-size: 0.85rem;\n}\n.status-tags-container[data-v-0f5fc9dc] {\n    gap: 10px;\n    padding: 16px;\n}\n.status-tag[data-v-0f5fc9dc] {\n    font-size: 0.8rem;\n    padding: 8px 12px;\n}\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é…ï¼šä½¿ç”¨CSSå˜é‡è‡ªåŠ¨é€‚é… */\n@media (prefers-color-scheme: dark) {\n.right-sidebar[data-v-0f5fc9dc] {\n    background: var(--color-surface);\n}\n.vitals-section[data-v-0f5fc9dc],\n  .cultivation-section[data-v-0f5fc9dc],\n  .collapsible-section[data-v-0f5fc9dc] {\n    background: var(--color-surface-light);\n}\n.status-tag.buff[data-v-0f5fc9dc] {\n    background: linear-gradient(135deg, rgba(var(--color-success-rgb), 0.15), rgba(var(--color-success-rgb), 0.08));\n    border-color: rgba(var(--color-success-rgb), 0.3);\n    color: var(--color-success);\n}\n.status-tag.debuff[data-v-0f5fc9dc] {\n    background: linear-gradient(135deg, rgba(var(--color-error-rgb), 0.15), rgba(var(--color-error-rgb), 0.08));\n    border-color: rgba(var(--color-error-rgb), 0.3);\n    color: var(--color-danger);\n}\n.status-tag.buff[data-v-0f5fc9dc]:hover {\n    background: linear-gradient(135deg, rgba(var(--color-success-rgb), 0.25), rgba(var(--color-success-rgb), 0.12));\n    border-color: rgba(var(--color-success-rgb), 0.5);\n    color: var(--color-success);\n    box-shadow: 0 4px 12px rgba(var(--color-success-rgb), 0.2);\n}\n.status-tag.debuff[data-v-0f5fc9dc]:hover {\n    background: linear-gradient(135deg, rgba(var(--color-error-rgb), 0.25), rgba(var(--color-error-rgb), 0.12));\n    border-color: rgba(var(--color-error-rgb), 0.5);\n    color: var(--color-danger);\n    box-shadow: 0 4px 12px rgba(var(--color-error-rgb), 0.2);\n}\n.tag-intensity[data-v-0f5fc9dc] {\n    background: rgba(var(--color-warning-rgb), 0.9);\n    color: var(--color-text);\n}\n}\n",""]);const s=i},2748:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.world-info-section[data-v-dbebcd90] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n}\n.section-header[data-v-dbebcd90] {\n  margin-bottom: 1rem;\n  flex-shrink: 0;\n}\n.section-title[data-v-dbebcd90] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.world-info-content[data-v-dbebcd90] {\n  flex: 1;\n  overflow: hidden;\n}\n.data-display[data-v-dbebcd90] {\n  height: 100%;\n  overflow: hidden;\n}\n.code-pre[data-v-dbebcd90] {\n  margin: 0;\n  padding: 0.75rem;\n  background: var(--color-code-bg);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  height: 100%;\n  overflow: auto;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.empty-state[data-v-dbebcd90] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 640px) {\n.world-info-section[data-v-dbebcd90] {\n    padding: 0.75rem;\n}\n.section-title[data-v-dbebcd90] {\n    font-size: 1rem;\n    text-align: center;\n}\n.code-pre[data-v-dbebcd90] {\n    font-size: 0.75rem;\n    padding: 0.5rem;\n}\n.empty-state[data-v-dbebcd90] {\n    padding: 2rem 0.5rem;\n}\n}\n@media (max-width: 480px) {\n.world-info-section[data-v-dbebcd90] {\n    padding: 0.5rem;\n}\n.section-title[data-v-dbebcd90] {\n    font-size: 0.9rem;\n}\n.code-pre[data-v-dbebcd90] {\n    font-size: 0.7rem;\n    padding: 0.4rem;\n}\n}\n",""]);const s=i},2773:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.prompt-panel[data-v-41853e98] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: var(--color-background);\n}\n\n/* è”æœºæ¨¡å¼è­¦å‘Šæ ·å¼ */\n.online-mode-warning[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: rgba(251, 191, 36, 0.15);\n  border-bottom: 1px solid rgba(251, 191, 36, 0.3);\n  color: #fbbf24;\n}\n.online-mode-warning .warning-icon[data-v-41853e98] {\n  font-size: 1rem;\n}\n.online-mode-warning .warning-text[data-v-41853e98] {\n  font-size: 0.85rem;\n  font-weight: 500;\n}\n\n/* åªè¯»æ¨¡å¼æ ·å¼ */\n.prompt-textarea.readonly-mode[data-v-41853e98] {\n  opacity: 0.7;\n  cursor: not-allowed;\n  background: var(--color-surface-disabled, rgba(100, 100, 100, 0.1));\n}\n.btn-small[data-v-41853e98]:disabled,\n.action-btn-compact[data-v-41853e98]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.panel-header.compact[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem 1rem;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-surface);\n}\n.back-btn[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  padding: 0;\n  border: none;\n  border-radius: 6px;\n  background: transparent;\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.back-btn[data-v-41853e98]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-primary);\n}\n.panel-title-compact[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n}\n.title-text[data-v-41853e98] {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.panel-actions[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.action-btn-compact[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  padding: 0;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.action-btn-compact[data-v-41853e98]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.action-btn-compact.primary[data-v-41853e98] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.action-btn-compact.primary[data-v-41853e98]:hover {\n  background: var(--color-primary-hover);\n}\n.prompt-list[data-v-41853e98] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 1rem;\n}\n\n/* åˆ†ç±»æ ·å¼ */\n.category-section[data-v-41853e98] {\n  margin-bottom: 1.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  overflow: hidden;\n  background: var(--color-surface);\n}\n.category-header[data-v-41853e98] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.25rem;\n  background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-surface-hover) 100%);\n  cursor: pointer;\n  user-select: none;\n  transition: all 0.2s;\n}\n.category-header[data-v-41853e98]:hover {\n  background: var(--color-surface-hover);\n}\n.category-title[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.category-icon[data-v-41853e98] {\n  font-size: 1.25rem;\n}\n.category-name[data-v-41853e98] {\n  font-weight: 600;\n  font-size: 1rem;\n  color: var(--color-text);\n}\n.category-count[data-v-41853e98] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  background: var(--color-background);\n  padding: 0.2rem 0.5rem;\n  border-radius: 10px;\n}\n.category-actions[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.category-desc[data-v-41853e98] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.expand-icon[data-v-41853e98] {\n  transition: transform 0.3s ease;\n  color: var(--color-text-secondary);\n}\n.expand-icon.expanded[data-v-41853e98] {\n  transform: rotate(180deg);\n}\n.category-content[data-v-41853e98] {\n  border-top: 1px solid var(--color-border);\n  background: var(--color-background);\n}\n\n/* æç¤ºè¯é¡¹ç›®æ ·å¼ */\n.prompt-item[data-v-41853e98] {\n  border-bottom: 1px solid var(--color-border);\n}\n.prompt-item[data-v-41853e98]:last-child {\n  border-bottom: none;\n}\n.prompt-header[data-v-41853e98] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.875rem 1.25rem;\n  cursor: pointer;\n  user-select: none;\n  transition: background 0.2s;\n}\n.prompt-header[data-v-41853e98]:hover {\n  background: var(--color-surface-hover);\n}\n.prompt-title-area[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n\n/* å¼€å…³æ ·å¼ */\n.toggle-switch[data-v-41853e98] {\n  position: relative;\n  display: inline-block;\n  width: 36px;\n  height: 20px;\n  flex-shrink: 0;\n}\n.toggle-switch input[data-v-41853e98] {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n.toggle-slider[data-v-41853e98] {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: var(--color-border);\n  transition: 0.3s;\n  border-radius: 20px;\n}\n.toggle-slider[data-v-41853e98]:before {\n  position: absolute;\n  content: \"\";\n  height: 14px;\n  width: 14px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  transition: 0.3s;\n  border-radius: 50%;\n}\n.toggle-switch input:checked + .toggle-slider[data-v-41853e98] {\n  background-color: var(--color-primary);\n}\n.toggle-switch input:checked + .toggle-slider[data-v-41853e98]:before {\n  transform: translateX(16px);\n}\n.toggle-switch:hover .toggle-slider[data-v-41853e98] {\n  box-shadow: 0 0 4px rgba(var(--color-primary-rgb), 0.4);\n}\n.prompt-order[data-v-41853e98] {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 24px;\n  height: 24px;\n  padding: 0 6px;\n  background: var(--color-primary);\n  color: white;\n  font-size: 0.75rem;\n  font-weight: 600;\n  border-radius: 6px;\n}\n.prompt-title[data-v-41853e98] {\n  font-weight: 500;\n  color: var(--color-text);\n  transition: opacity 0.2s;\n}\n.prompt-title.disabled[data-v-41853e98] {\n  opacity: 0.5;\n  text-decoration: line-through;\n}\n.prompt-meta[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.prompt-desc[data-v-41853e98] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  max-width: 200px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.prompt-status[data-v-41853e98] {\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n}\n.prompt-status.modified[data-v-41853e98] {\n  background: rgba(var(--color-warning-rgb), 0.2);\n  color: var(--color-warning);\n}\n\n/* æƒé‡ç¼–è¾‘å™¨ */\n.weight-editor[data-v-41853e98] {\n  display: flex;\n  align-items: center;\n  gap: 2px;\n}\n.weight-label[data-v-41853e98] {\n  font-size: 0.7rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n}\n.weight-input[data-v-41853e98] {\n  width: 36px;\n  height: 22px;\n  padding: 0 4px;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 600;\n  text-align: center;\n  background: transparent;\n  transition: all 0.2s;\n  -moz-appearance: textfield;\n}\n.weight-input[data-v-41853e98]::-webkit-outer-spin-button,\n.weight-input[data-v-41853e98]::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.weight-input[data-v-41853e98]:hover {\n  border-color: var(--color-border);\n  background: var(--color-surface);\n}\n.weight-input[data-v-41853e98]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  background: var(--color-surface);\n}\n.weight-input[data-v-41853e98]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.weight-input.weight-high[data-v-41853e98] {\n  background: rgba(239, 68, 68, 0.2);\n  color: #ef4444;\n}\n.weight-input.weight-medium[data-v-41853e98] {\n  background: rgba(234, 179, 8, 0.2);\n  color: #eab308;\n}\n.weight-input.weight-low[data-v-41853e98] {\n  background: rgba(34, 197, 94, 0.2);\n  color: #22c55e;\n}\n.prompt-content[data-v-41853e98] {\n  padding: 1rem 1.25rem;\n  background: var(--color-background);\n  border-top: 1px solid var(--color-border);\n}\n.prompt-description-full[data-v-41853e98] {\n  margin-bottom: 0.75rem;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border-radius: 6px;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n}\n.prompt-textarea[data-v-41853e98] {\n  width: 100%;\n  min-height: 400px;\n  padding: 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.85rem;\n  line-height: 1.6;\n  resize: vertical;\n}\n.prompt-textarea[data-v-41853e98]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 2px rgba(var(--color-primary-rgb), 0.2);\n}\n.prompt-actions[data-v-41853e98] {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n  justify-content: flex-end;\n}\n.btn-small[data-v-41853e98] {\n  padding: 0.5rem 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  cursor: pointer;\n  font-size: 0.85rem;\n  transition: all 0.2s;\n}\n.btn-small[data-v-41853e98]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n}\n.btn-small.btn-primary[data-v-41853e98] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.btn-small.btn-primary[data-v-41853e98]:hover {\n  background: var(--color-primary-hover);\n}\n\n/* å“åº”å¼é€‚é… */\n@media (max-width: 768px) {\n.category-header[data-v-41853e98] {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.5rem;\n}\n.category-actions[data-v-41853e98] {\n    width: 100%;\n    justify-content: space-between;\n}\n.prompt-header[data-v-41853e98] {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.5rem;\n}\n.prompt-meta[data-v-41853e98] {\n    width: 100%;\n    justify-content: space-between;\n}\n.prompt-desc[data-v-41853e98] {\n    max-width: 150px;\n}\n.prompt-textarea[data-v-41853e98] {\n    min-height: 300px;\n}\n}\n",""]);const s=i},2814:e=>{"use strict";e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2712%27 height=%2712%27 viewBox=%270 0 12 12%27%3E%3Cpath fill=%27%2394a3b8%27 d=%27M6 8L1 3h10z%27/%3E%3C/svg%3E"},2836:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.game-view[data-v-14142f8e] {\n  width: 100%;\n  height: 100%;\n  background: var(--color-background);\n  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n  font-size: 14px;\n  display: grid;\n  grid-template-rows: auto 1fr;\n  overflow: hidden;\n}\n.game-content[data-v-14142f8e] {\n  flex: 1;\n  display: flex;\n  align-items: stretch;\n  gap: 0;\n  padding: 0;\n  position: relative;\n  min-height: 0;\n  background: var(--color-background);\n}\n.left-sidebar[data-v-14142f8e] {\n  width: 240px;\n  background: var(--color-surface);\n  transition: all 0.3s ease;\n  z-index: 10;\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.left-sidebar.collapsed[data-v-14142f8e] {\n  width: 0;\n  overflow: hidden;\n}\n.right-panel-area[data-v-14142f8e] {\n  width: 280px;\n  background: var(--color-surface);\n  transition: all 0.3s ease;\n  border-left: 1px solid var(--color-border);\n  flex-shrink: 0;\n  display: flex;\n  flex-direction: column;\n}\n.right-panel-area.collapsed[data-v-14142f8e] {\n  width: 0;\n  overflow: hidden;\n}\n.sidebar-wrapper[data-v-14142f8e] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.main-content[data-v-14142f8e] {\n  flex: 1;\n  background: var(--color-background);\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  position: relative;\n}\n\n/* æ”¶ç¼©æŒ‰é’®æ ·å¼ */\n.collapse-btn[data-v-14142f8e] {\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 24px;\n  height: 48px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 20;\n  color: var(--color-text-secondary);\n}\n.collapse-btn[data-v-14142f8e]:hover {\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n/* å·¦ä¾§æ”¶ç¼©æŒ‰é’® */\n.collapse-btn.left[data-v-14142f8e] {\n  left: 240px;\n  border-radius: 0 8px 8px 0;\n  transition: left 0.3s ease, background 0.2s ease;\n}\n\n/* å·¦ä¾§æ æ”¶ç¼©æ—¶ï¼ŒæŒ‰é’®ç§»åŠ¨åˆ°æœ€å·¦ä¾§ */\n.left-sidebar.collapsed ~ .collapse-btn.left[data-v-14142f8e] {\n  left: 0;\n}\n\n/* å³ä¾§æ”¶ç¼©æŒ‰é’® */\n.collapse-btn.right[data-v-14142f8e] {\n  right: 280px;\n  border-radius: 8px 0 0 8px;\n  transition: right 0.3s ease, background 0.2s ease;\n}\n\n/* å³ä¾§æ æ”¶ç¼©æ—¶ï¼ŒæŒ‰é’®ç§»åŠ¨åˆ°æœ€å³ä¾§ */\n.right-panel-area.collapsed ~ .collapse-btn.right[data-v-14142f8e],\n.collapse-btn.right.collapsed[data-v-14142f8e] {\n  right: 0;\n}\n\n/* é¢æ¿è¦†ç›–æ¨¡å¼æ ·å¼ - åªéšè—å³ä¾§æ ï¼Œä¿ç•™å·¦ä¾§æ  */\n.game-content.panel-mode .right-panel-area[data-v-14142f8e] {\n  display: none;\n}\n.panel-overlay[data-v-14142f8e] {\n  width: 100%;\n  height: 100%;\n  background: var(--color-background);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.panel-header[data-v-14142f8e] { position: relative; display: flex; align-items: center; gap: 8px; padding: 6px 12px; min-height: 30px; height: auto; background: transparent; border-bottom: none; flex-shrink: 0;\n}\n.panel-header[data-v-14142f8e]::after { content: \'\'; position: absolute; left: 8px; right: 8px; bottom: 0; height: 1px; background: linear-gradient(90deg, transparent, rgba(var(--color-primary-rgb,46,92,184), .35), transparent);\n}\n.panel-header.compact[data-v-14142f8e]::after {\n  content: \'\';\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  height: 2px;\n  background: linear-gradient(90deg, transparent, var(--color-primary), transparent);\n  opacity: 0.25;\n}\n.panel-title-icon[data-v-14142f8e] { color: var(--color-primary); flex-shrink: 0;\n}\n.panel-title-compact[data-v-14142f8e] { display: flex; align-items: center; gap: 8px; min-width: 0; flex: 1; justify-content: center;\n}\n.panel-title-compact .title-text[data-v-14142f8e] { font-size: 0.92rem; font-weight: 600; color: var(--color-text); letter-spacing: 0.2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n}\n.back-btn[data-v-14142f8e] { background: transparent; border: none; padding: 2px 6px; border-radius: 4px; color: var(--color-text-secondary); cursor: pointer; transition: all 0.2s ease; display: inline-flex; align-items: center;\n}\n.back-btn[data-v-14142f8e]:hover { background: var(--color-surface-hover); color: var(--color-text);\n}\n.panel-actions[data-v-14142f8e] { margin-left: auto; display: flex; align-items: center; gap: 4px;\n}\n.action-btn-compact[data-v-14142f8e] { background: transparent; border: none; width: 26px; height: 26px; border-radius: 4px; color: var(--color-text-secondary); display: inline-flex; align-items: center; justify-content: center; cursor: pointer; transition: var(--transition-fast);\n}\n.action-btn-compact[data-v-14142f8e]:hover { background: var(--color-surface-hover); color: var(--color-text);\n}\n.panel-content[data-v-14142f8e] {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.panel-header.compact[data-v-14142f8e] { padding: 6px 10px; position: sticky; top: 0; z-index: 2; background: var(--color-background);\n}\n.panel-content.compact[data-v-14142f8e] { padding: 6px 10px 10px 10px;\n}\n\n/* æ•°æ®åŠ è½½æç¤ºæ ·å¼ */\n.data-loading[data-v-14142f8e] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, var(--color-background) 0%, var(--color-surface) 100%);\n  position: relative;\n  overflow: hidden;\n}\n.data-loading[data-v-14142f8e]::before {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: radial-gradient(circle at 50% 50%, rgba(var(--color-primary-rgb, 46, 92, 184), 0.05) 0%, transparent 70%);\n  animation: pulse-14142f8e 3s ease-in-out infinite;\n}\n.loading-content[data-v-14142f8e] {\n  text-align: center;\n  padding: 60px 40px;\n  max-width: 500px;\n  position: relative;\n  z-index: 1;\n}\n.loading-spinner-wrapper[data-v-14142f8e] {\n  position: relative;\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 32px;\n}\n.loading-spinner[data-v-14142f8e] {\n  width: 80px;\n  height: 80px;\n  border: 3px solid transparent;\n  border-top: 3px solid var(--color-primary);\n  border-right: 3px solid var(--color-primary);\n  border-radius: 50%;\n  animation: spin-14142f8e 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) infinite;\n  position: relative;\n}\n.spinner-glow[data-v-14142f8e] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: radial-gradient(circle, rgba(var(--color-primary-rgb, 46, 92, 184), 0.3) 0%, transparent 70%);\n  animation: glow-14142f8e 2s ease-in-out infinite;\n}\n@keyframes spin-14142f8e {\n0% { transform: rotate(0deg);\n}\n100% { transform: rotate(360deg);\n}\n}\n@keyframes glow-14142f8e {\n0%, 100% { opacity: 0.3; transform: translate(-50%, -50%) scale(0.9);\n}\n50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.1);\n}\n}\n@keyframes pulse-14142f8e {\n0%, 100% { opacity: 0.5;\n}\n50% { opacity: 1;\n}\n}\n.loading-title[data-v-14142f8e] {\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin: 0 0 12px 0;\n  letter-spacing: 2px;\n  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.loading-message[data-v-14142f8e] {\n  font-size: 1rem;\n  color: var(--color-text-secondary);\n  margin: 0 0 32px 0;\n  font-weight: 500;\n}\n.loading-steps[data-v-14142f8e] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  margin-bottom: 32px;\n  text-align: left;\n}\n.loading-step[data-v-14142f8e] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 10px 16px;\n  background: var(--color-background);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  transition: all 0.3s ease;\n}\n.loading-step.active[data-v-14142f8e] {\n  background: rgba(var(--color-primary-rgb, 46, 92, 184), 0.1);\n  border-color: var(--color-primary);\n}\n.step-icon[data-v-14142f8e] {\n  font-size: 1.2rem;\n  font-weight: bold;\n  color: var(--color-success);\n  width: 24px;\n  height: 24px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n.loading-step.active .step-icon[data-v-14142f8e] {\n  color: var(--color-primary);\n  animation: bounce-14142f8e 1s ease-in-out infinite;\n}\n@keyframes bounce-14142f8e {\n0%, 100% { transform: translateY(0);\n}\n50% { transform: translateY(-4px);\n}\n}\n.step-text[data-v-14142f8e] {\n  font-size: 0.95rem;\n  color: var(--color-text);\n  font-weight: 500;\n}\n.loading-hint[data-v-14142f8e] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  margin: 0;\n  padding: 12px 20px;\n  background: var(--color-background);\n  border-radius: 8px;\n  border-left: 3px solid var(--color-primary);\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n.game-view[data-v-14142f8e] {\n    font-size: 13px;\n}\n\n  /* ç§»åŠ¨ç«¯ä¾§è¾¹æ æµ®åŠ¨æ˜¾ç¤ºï¼Œä¸å ç”¨ä¸»å†…å®¹ç©ºé—´ */\n.left-sidebar[data-v-14142f8e] {\n    position: fixed;\n    top: 0; /* ä»é¡¶éƒ¨å¼€å§‹ */\n    left: 0;\n    bottom: 0;\n    height: 100%;\n    width: 280px;\n    z-index: 1000;\n    transform: translateX(-100%);\n    transition: transform 0.3s ease;\n    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n    background: var(--color-surface); /* å’Œå³ä¾§æ ä¸€æ ·çš„èƒŒæ™¯è‰² */\n}\n.left-sidebar[data-v-14142f8e]:not(.collapsed) {\n    transform: translateX(0);\n}\n.left-sidebar .sidebar-wrapper[data-v-14142f8e] {\n    overflow-y: auto;\n    overflow-x: hidden;\n    height: 100%;\n    -webkit-overflow-scrolling: touch;\n    box-sizing: border-box;\n}\n.right-panel-area[data-v-14142f8e] {\n    position: fixed;\n    top: 0; /* ä»é¡¶éƒ¨å¼€å§‹ */\n    right: 0;\n    bottom: 0;\n    height: 100%;\n    width: 260px;\n    z-index: 1000;\n    transform: translateX(100%);\n    transition: transform 0.3s ease;\n    box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n    background: var(--color-surface); /* å’Œå·¦ä¾§æ ä¸€æ ·çš„èƒŒæ™¯è‰² */\n}\n.right-panel-area[data-v-14142f8e]:not(.collapsed) {\n    transform: translateX(0);\n}\n.right-panel-area .sidebar-wrapper[data-v-14142f8e] {\n    overflow-y: auto;\n    overflow-x: hidden;\n    height: 100%;\n    -webkit-overflow-scrolling: touch;\n    box-sizing: border-box;\n}\n\n  /* ç§»åŠ¨ç«¯èƒŒæ™¯é®ç½©å±‚ */\n.mobile-sidebar-overlay[data-v-14142f8e] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    z-index: 999; /* Below sidebars (1000) but above everything else */\n}\n\n  /* ç§»åŠ¨ç«¯æ”¶ç¼©æŒ‰é’®æ ·å¼ - å‚è€ƒç”µè„‘ç‰ˆæ ·å¼ */\n.collapse-btn[data-v-14142f8e] {\n    position: fixed;\n    z-index: 1001;\n    width: 20px;\n    height: 44px;\n    background: var(--color-surface);\n    border: 1px solid var(--color-border);\n    color: var(--color-text-secondary);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    touch-action: manipulation;\n    top: 50%;\n    transform: translateY(-50%);\n    transition: all 0.3s ease;\n}\n.collapse-btn svg[data-v-14142f8e] {\n    width: 14px;\n    height: 14px;\n}\n.collapse-btn[data-v-14142f8e]:active {\n    background: var(--color-surface-light);\n    color: var(--color-text);\n}\n\n  /* å·¦ä¾§æŒ‰é’®ï¼šé»˜è®¤åœ¨å·¦è¾¹ç¼˜ï¼Œè·Ÿéšä¾§è¾¹æ ä¸€èµ·ç§»åŠ¨ */\n.collapse-btn.left[data-v-14142f8e] {\n    left: 0;\n    border-radius: 0 8px 8px 0;\n    border-left: none;\n    transform: translateX(0) translateY(-50%);\n    transition: transform 0.3s ease, background 0.2s ease;\n}\n\n  /* å·¦ä¾§æ å±•å¼€æ—¶ï¼ŒæŒ‰é’®è·Ÿéšç§»åŠ¨ 280px */\n.left-sidebar:not(.collapsed) ~ .collapse-btn.left[data-v-14142f8e] {\n    transform: translateX(280px) translateY(-50%);\n}\n\n  /* å³ä¾§æŒ‰é’®ï¼šé»˜è®¤åœ¨å³è¾¹ç¼˜ï¼Œè·Ÿéšä¾§è¾¹æ ä¸€èµ·ç§»åŠ¨ */\n.collapse-btn.right[data-v-14142f8e] {\n    right: 0;\n    border-radius: 8px 0 0 8px;\n    border-right: none;\n    transform: translateX(0) translateY(-50%);\n    transition: transform 0.3s ease, background 0.2s ease;\n}\n\n  /* å³ä¾§æ å±•å¼€æ—¶ï¼ˆæŒ‰é’®æ²¡æœ‰ collapsed ç±»ï¼‰ï¼ŒæŒ‰é’®è·Ÿéšç§»åŠ¨ -260px */\n.collapse-btn.right[data-v-14142f8e]:not(.collapsed) {\n    transform: translateX(-260px) translateY(-50%);\n}\n\n  /* ä¸»å†…å®¹åŒºåŸŸå æ»¡å±å¹• */\n.main-content[data-v-14142f8e] {\n    width: 100%;\n    max-width: 100vw;\n    margin: 0;\n    padding: 0;\n    overflow-x: hidden;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    box-sizing: border-box;\n}\n.game-content[data-v-14142f8e] {\n    gap: 0;\n    margin-top: 0;\n    max-width: 100vw;\n    overflow-x: hidden;\n    box-sizing: border-box;\n}\n.game-view[data-v-14142f8e] {\n    max-width: 100vw;\n    overflow-x: hidden;\n}\n\n  /* ç§»åŠ¨ç«¯é¢æ¿å…¨å±ä¼˜åŒ– */\n.panel-overlay[data-v-14142f8e] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 999;\n    overflow: hidden;\n}\n\n  /* é¢æ¿å¤´éƒ¨ç§»åŠ¨ç«¯ä¼˜åŒ– */\n.panel-header[data-v-14142f8e] {\n    padding: 4px 8px;\n    min-height: 36px;\n    flex-wrap: nowrap;\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n}\n.panel-header.compact[data-v-14142f8e] {\n    padding: 4px 8px;\n}\n.panel-title-compact .title-text[data-v-14142f8e] {\n    font-size: 0.85rem;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n  /* å¤´éƒ¨æŒ‰é’®è§¦æ‘¸ä¼˜åŒ– */\n.back-btn[data-v-14142f8e],\n  .action-btn-compact[data-v-14142f8e] {\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n    min-width: 32px;\n    min-height: 32px;\n}\n\n  /* é¢æ¿å†…å®¹ç§»åŠ¨ç«¯ä¼˜åŒ– - ç¡®ä¿æ–‡æœ¬åŒºåŸŸèƒ½å¤Ÿæ”¶ç¼© */\n.panel-content[data-v-14142f8e] {\n    padding: 8px;\n    overflow-y: auto;\n    overflow-x: hidden;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n}\n.panel-content.compact[data-v-14142f8e] {\n    padding: 6px 8px 8px 8px;\n}\n\n  /* ç¡®ä¿é¢æ¿å†…æ‰€æœ‰æ–‡æœ¬å…ƒç´ è‡ªåŠ¨æ¢è¡Œ */\n.panel-content[data-v-14142f8e] *,\n  .panel-overlay[data-v-14142f8e] * {\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    max-width: 100%;\n}\n\n  /* æ•°æ®åŠ è½½æç¤ºç§»åŠ¨ç«¯ä¼˜åŒ– */\n.data-loading[data-v-14142f8e] {\n    padding: 8px;\n}\n.loading-content[data-v-14142f8e] {\n    padding: 40px 20px;\n    max-width: 100%;\n}\n.loading-title[data-v-14142f8e] {\n    font-size: 1.2rem;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.loading-message[data-v-14142f8e] {\n    font-size: 0.9rem;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.loading-steps[data-v-14142f8e] {\n    gap: 8px;\n}\n.loading-step[data-v-14142f8e] {\n    padding: 8px 12px;\n}\n.step-text[data-v-14142f8e] {\n    font-size: 0.85rem;\n    white-space: normal;\n    word-wrap: break-word;\n}\n.loading-hint[data-v-14142f8e] {\n    font-size: 0.8rem;\n    white-space: normal;\n    word-wrap: break-word;\n}\n}\n\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼é€‚é… ========== */\n[data-theme="dark"] .game-view[data-v-14142f8e] {\n  background: rgb(30, 41, 59);\n}\n[data-theme="dark"] .game-content[data-v-14142f8e] {\n  background: rgb(30, 41, 59);\n}\n[data-theme="dark"] .left-sidebar[data-v-14142f8e],\n[data-theme="dark"] .right-panel-area[data-v-14142f8e] {\n  background: rgba(30, 41, 59, 0.95);\n  border-color: rgba(255, 255, 255, 0.08);\n  backdrop-filter: blur(12px);\n}\n[data-theme="dark"] .main-content[data-v-14142f8e] {\n  background: rgb(30, 41, 59);\n}\n[data-theme="dark"] .collapse-btn[data-v-14142f8e] {\n  background: rgba(30, 41, 59, 0.9);\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #94a3b8;\n}\n[data-theme="dark"] .collapse-btn[data-v-14142f8e]:hover {\n  background: rgba(51, 65, 85, 0.95);\n  color: #f1f5f9;\n  border-color: rgba(147, 197, 253, 0.3);\n}\n[data-theme="dark"] .panel-overlay[data-v-14142f8e] {\n  background: var(--color-background);\n  backdrop-filter: blur(20px);\n}\n[data-theme="dark"] .panel-header[data-v-14142f8e] {\n  background: rgba(30, 41, 59, 0.8);\n}\n[data-theme="dark"] .panel-header[data-v-14142f8e]::after {\n  background: linear-gradient(90deg, transparent, rgba(147, 197, 253, 0.4), transparent);\n}\n[data-theme="dark"] .back-btn[data-v-14142f8e] {\n  color: #94a3b8;\n}\n[data-theme="dark"] .back-btn[data-v-14142f8e]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  color: #f1f5f9;\n}\n[data-theme="dark"] .panel-title-compact .title-text[data-v-14142f8e] {\n  color: #f1f5f9;\n}\n[data-theme="dark"] .panel-title-icon[data-v-14142f8e] {\n  color: #93c5fd;\n}\n[data-theme="dark"] .action-btn-compact[data-v-14142f8e] {\n  color: #94a3b8;\n}\n[data-theme="dark"] .action-btn-compact[data-v-14142f8e]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  color: #f1f5f9;\n}\n[data-theme="dark"] .data-loading[data-v-14142f8e] {\n  background: rgba(30, 41, 59, 0.95);\n}\n[data-theme="dark"] .data-loading[data-v-14142f8e]::before {\n  background: radial-gradient(circle at 50% 50%, rgba(147, 197, 253, 0.08) 0%, transparent 70%);\n}\n[data-theme="dark"] .loading-title[data-v-14142f8e] {\n  background: linear-gradient(135deg, #93c5fd 0%, #c0caf5 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n[data-theme="dark"] .loading-message[data-v-14142f8e] {\n  color: #94a3b8;\n}\n[data-theme="dark"] .loading-step[data-v-14142f8e] {\n  background: rgba(30, 41, 59, 0.6);\n  border-color: rgba(255, 255, 255, 0.08);\n}\n[data-theme="dark"] .loading-step.active[data-v-14142f8e] {\n  background: rgba(59, 130, 246, 0.15);\n  border-color: rgba(147, 197, 253, 0.4);\n}\n[data-theme="dark"] .step-icon[data-v-14142f8e] {\n  color: #9ece6a;\n}\n[data-theme="dark"] .loading-step.active .step-icon[data-v-14142f8e] {\n  color: #93c5fd;\n}\n[data-theme="dark"] .step-text[data-v-14142f8e] {\n  color: #e2e8f0;\n}\n[data-theme="dark"] .loading-hint[data-v-14142f8e] {\n  background: rgba(30, 41, 59, 0.6);\n  border-left-color: #93c5fd;\n  color: #94a3b8;\n}\n[data-theme="dark"] .spinner-glow[data-v-14142f8e] {\n  background: radial-gradient(circle, rgba(147, 197, 253, 0.4) 0%, transparent 70%);\n}\n[data-theme="dark"] .loading-spinner[data-v-14142f8e] {\n  border-top-color: #93c5fd;\n  border-right-color: #93c5fd;\n}\n\n/* è¶…å°å±å¹•é€‚é… */\n@media (max-width: 480px) {\n.game-view[data-v-14142f8e] {\n    font-size: 12px;\n}\n.left-sidebar[data-v-14142f8e] {\n    width: 240px;\n}\n\n  /* å·¦ä¾§æ å±•å¼€æ—¶ï¼ŒæŒ‰é’®è·Ÿéšç§»åŠ¨ 240pxï¼ˆåŒ¹é…ä¾§è¾¹æ å®½åº¦ï¼‰ */\n.left-sidebar:not(.collapsed) ~ .collapse-btn.left[data-v-14142f8e] {\n    transform: translateX(240px) translateY(-50%);\n}\n.right-panel-area[data-v-14142f8e] {\n    width: 220px;\n}\n\n  /* å³ä¾§æ å±•å¼€æ—¶ï¼ŒæŒ‰é’®è·Ÿéšç§»åŠ¨ -220pxï¼ˆåŒ¹é…ä¾§è¾¹æ å®½åº¦ï¼‰ */\n.collapse-btn.right[data-v-14142f8e]:not(.collapsed) {\n    transform: translateX(-220px) translateY(-50%);\n}\n\n  /* å°å±å¹•ä¸Šé¢æ¿å…¨å±æ˜¾ç¤º */\n.panel-overlay[data-v-14142f8e] {\n    position: fixed;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 999;\n}\n.panel-header[data-v-14142f8e] {\n    padding: 3px 6px;\n    min-height: 32px;\n}\n.panel-title-compact .title-text[data-v-14142f8e] {\n    font-size: 0.8rem;\n}\n.panel-content[data-v-14142f8e] {\n    padding: 6px;\n    font-size: 0.9em;\n}\n.loading-title[data-v-14142f8e] {\n    font-size: 1rem;\n}\n.loading-message[data-v-14142f8e] {\n    font-size: 0.85rem;\n}\n.step-text[data-v-14142f8e] {\n    font-size: 0.8rem;\n}\n.loading-hint[data-v-14142f8e] {\n    font-size: 0.75rem;\n}\n}\n',""]);const s=i},2858:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.cloud-sync-button[data-v-2e1fd9da] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.5rem 0.8rem;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  font-size: 0.85rem;\n  min-width: 80px;\n  white-space: nowrap;\n}\n.cloud-sync-button[data-v-2e1fd9da]:hover {\n  background: var(--color-surface-lighter);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.sync-text[data-v-2e1fd9da] {\n  font-weight: 500;\n}\n.sync-icon[data-v-2e1fd9da] {\n  font-size: 1em;\n  flex-shrink: 0;\n}\n\n/* å·²åŒæ­¥çŠ¶æ€æ ·å¼ */\n.cloud-sync-button.synced[data-v-2e1fd9da] {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-success-rgb), 0.1));\n  border-color: var(--color-success);\n  color: var(--color-success);\n}\n.cloud-sync-button[data-v-2e1fd9da]:disabled,\n.cloud-sync-button.disabled[data-v-2e1fd9da] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: var(--color-surface);\n  border-color: var(--color-border);\n  color: var(--color-text-muted);\n}\n.cloud-sync-button.disabled[data-v-2e1fd9da]:hover {\n  background: var(--color-surface);\n  border-color: var(--color-border);\n  color: var(--color-text-muted);\n}\n.cloud-sync-button.synced[data-v-2e1fd9da]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.2), rgba(var(--color-success-rgb), 0.2));\n}\n\n/* Size variants */\n.cloud-sync-button.small[data-v-2e1fd9da] {\n  padding: 0.5rem 0.75rem;\n  font-size: 0.9rem;\n  min-width: 100px;\n}\n.cloud-sync-button.large[data-v-2e1fd9da] {\n  padding: 1rem 1.5rem;\n  font-size: 1.1rem;\n  min-width: 180px;\n}\n\n/* Compact variant */\n.cloud-sync-button.compact[data-v-2e1fd9da] {\n  min-width: auto;\n  padding: 0.5rem;\n}\n.cloud-sync-button.compact .sync-text[data-v-2e1fd9da] {\n  display: none;\n}\n",""]);const s=i},2885:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.top-bar[data-v-42f8dc01] {\n  width: 100%;\n  height: 56px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0 16px;\n  box-sizing: border-box;\n  background: var(--color-surface, #f8f9fa);\n  border-bottom: 1px solid var(--color-border, #e2e8f0);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n  flex-shrink: 0;\n  min-height: 56px;\n}\n.left-section[data-v-42f8dc01] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  flex: 1;\n}\n.game-title[data-v-42f8dc01] {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: var(--color-text);\n  margin: 0;\n  letter-spacing: 0.2px;\n  white-space: nowrap;\n}\n.character-quick-info[data-v-42f8dc01] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 10px;\n  background: var(--color-surface-light);\n  border-radius: 14px;\n  border: 1px solid var(--color-border);\n}\n.character-name[data-v-42f8dc01] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.character-realm[data-v-42f8dc01] {\n  font-size: 0.75rem;\n  color: var(--color-accent);\n  font-weight: 500;\n  padding: 2px 6px;\n  background: var(--color-accent-light);\n  border-radius: 10px;\n}\n.center-section[data-v-42f8dc01] {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n}\n.location-time-info[data-v-42f8dc01] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  white-space: nowrap;\n}\n.location-text[data-v-42f8dc01] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-success);\n}\n.separator[data-v-42f8dc01] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.time-value[data-v-42f8dc01] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n  font-family: 'Courier New', monospace;\n}\n.right-section[data-v-42f8dc01] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  flex: 1;\n  justify-content: flex-end;\n}\n.fullscreen-btn[data-v-42f8dc01] {\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 16px;\n  color: var(--color-text-secondary);\n  transition: all 0.2s ease;\n}\n.fullscreen-btn[data-v-42f8dc01]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n  color: var(--color-text);\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 767px) {\n.top-bar[data-v-42f8dc01] {\n    padding: 0 8px;\n    height: 50px;\n    min-height: 50px;\n    flex-wrap: nowrap;\n}\n.game-title[data-v-42f8dc01] {\n    font-size: 0.9rem;\n    white-space: nowrap;\n    writing-mode: horizontal-tb;\n}\n.character-quick-info[data-v-42f8dc01] {\n    gap: 4px;\n    padding: 2px 6px;\n    flex-shrink: 1;\n    min-width: 0;\n}\n.character-name[data-v-42f8dc01] {\n    font-size: 0.7rem;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 60px;\n}\n.character-realm[data-v-42f8dc01] {\n    font-size: 0.6rem;\n    padding: 1px 3px;\n    white-space: nowrap;\n}\n.center-section[data-v-42f8dc01] {\n    flex: 1;\n    min-width: 0;\n    overflow: hidden;\n}\n.location-time-info[data-v-42f8dc01] {\n    padding: 3px 6px;\n    gap: 4px;\n    flex-wrap: wrap;\n    justify-content: center;\n    max-width: 100%;\n}\n.location-text[data-v-42f8dc01] {\n    font-size: 0.7rem;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    max-width: 80px;\n}\n.separator[data-v-42f8dc01] {\n    font-size: 0.65rem;\n}\n.time-value[data-v-42f8dc01] {\n    font-size: 0.65rem;\n    white-space: nowrap;\n}\n.fullscreen-btn[data-v-42f8dc01] {\n    width: 26px;\n    height: 26px;\n    font-size: 14px;\n    flex-shrink: 0;\n}\n.left-section[data-v-42f8dc01] {\n    gap: 6px;\n    flex: 0 1 auto;\n    min-width: 0;\n}\n.right-section[data-v-42f8dc01] {\n    gap: 6px;\n    flex: 0 0 auto;\n}\n}\n\n/* è¶…å°å±å¹•é€‚é… */\n@media (max-width: 375px) {\n.top-bar[data-v-42f8dc01] {\n    padding: 0 4px;\n}\n.game-title[data-v-42f8dc01] {\n    font-size: 0.8rem;\n}\n.character-quick-info[data-v-42f8dc01] {\n    gap: 3px;\n    padding: 2px 4px;\n}\n.character-name[data-v-42f8dc01] {\n    font-size: 0.65rem;\n    max-width: 50px;\n}\n.location-text[data-v-42f8dc01] {\n    font-size: 0.65rem;\n    max-width: 60px;\n}\n.time-value[data-v-42f8dc01] {\n    font-size: 0.6rem;\n}\n}\n\n/* å¹³æ¿é€‚é… */\n@media (min-width: 641px) and (max-width: 1024px) {\n.top-bar[data-v-42f8dc01] {\n    padding: 0 16px;\n}\n.game-title[data-v-42f8dc01] {\n    font-size: 1.1rem;\n}\n.left-section[data-v-42f8dc01] {\n    gap: 12px;\n}\n.right-section[data-v-42f8dc01] {\n    gap: 10px;\n}\n}\n\n/* æ·±è‰²ä¸»é¢˜ */\n[data-theme='dark'] .top-bar[data-v-42f8dc01] {\n  background: #1e293b;\n  border-bottom-color: #334155;\n}\n[data-theme='dark'] .game-title[data-v-42f8dc01] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .character-quick-info[data-v-42f8dc01] {\n  background: #334155;\n  border-color: #475569;\n}\n[data-theme='dark'] .character-name[data-v-42f8dc01] {\n  color: #e2e8f0;\n}\n[data-theme='dark'] .character-realm[data-v-42f8dc01] {\n  background: rgba(167, 139, 250, 0.2);\n  color: #a78bfa;\n}\n[data-theme='dark'] .location-time-info[data-v-42f8dc01] {\n  background: #334155;\n  border-color: #475569;\n}\n[data-theme='dark'] .location-text[data-v-42f8dc01] {\n  color: #34d399;\n}\n[data-theme='dark'] .separator[data-v-42f8dc01] {\n  color: #64748b;\n}\n[data-theme='dark'] .time-value[data-v-42f8dc01] {\n  color: #cbd5e1;\n}\n[data-theme='dark'] .fullscreen-btn[data-v-42f8dc01] {\n  background: transparent;\n  border-color: #475569;\n  color: #94a3b8;\n}\n[data-theme='dark'] .fullscreen-btn[data-v-42f8dc01]:hover {\n  background: #334155;\n  border-color: #64748b;\n  color: #e2e8f0;\n}\n",""]);const s=i},3093:(e,t,n)=>{"use strict";var a=n(6840);e.exports=function(e){return a(e)||0===e?e:e<0?-1:1}},3098:(e,t,n)=>{"use strict";n.d(t,{deepCleanForClone:()=>r,zB:()=>o});var a=n(6988);function r(e){return JSON.parse(JSON.stringify(e))}function o(e,t,n){if(!e)return{isValid:!1,errors:["å­˜æ¡£æ•°æ®ä¸ºç©º"]};const r=[...(0,a.$)(e).errors];if(t?.è§’è‰²){const e=t.è§’è‰²;e.åå­—&&"string"==typeof e.åå­—||r.push("è§’è‰²å§“åæ— æ•ˆ"),e.æ€§åˆ«||r.push("è§’è‰²æ€§åˆ«ç¼ºå¤±")}if("creation"===n){const t=e?.è§’è‰²?.ä½ç½®;t&&"object"==typeof t||r.push("è§’è‰².ä½ç½® ç¼ºå¤±");const n=e?.è§’è‰²?.å±æ€§?.å¢ƒç•Œ;n&&"object"==typeof n||r.push("è§’è‰².å±æ€§.å¢ƒç•Œ ç¼ºå¤±")}return{isValid:0===r.length,errors:r}}},3111:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(660),n.b),d=new URL(n(1530),n.b),u=i()(r()),m=l()(c),p=l()(d);u.push([e.id,`\n.settings-panel[data-v-7f64eab0] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: var(--color-background);\n  overflow: hidden;\n  padding: 1rem;\n  gap: 1rem;\n  position: relative;\n}\n\n/* å¤´éƒ¨ */\n.panel-header[data-v-7f64eab0] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: var(--color-surface);\n  border-radius: 0.75rem;\n  border: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.header-left[data-v-7f64eab0] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.header-icon[data-v-7f64eab0] {\n  font-size: 1.5rem;\n}\n.header-info[data-v-7f64eab0] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.panel-title[data-v-7f64eab0] {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1e293b;\n}\n.settings-subtitle[data-v-7f64eab0] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.header-actions[data-v-7f64eab0] {\n  display: flex;\n  gap: 0.5rem;\n}\n.action-btn[data-v-7f64eab0] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 0.5rem;\n  background: var(--color-surface);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.875rem;\n}\n.action-btn[data-v-7f64eab0]:hover {\n  background: #f1f5f9;\n  border-color: #94a3b8;\n}\n.action-btn.primary[data-v-7f64eab0] {\n  background: #3b82f6;\n  border-color: #3b82f6;\n  color: white;\n}\n.action-btn.primary[data-v-7f64eab0]:hover {\n  background: #2563eb;\n  border-color: #2563eb;\n}\n\n/* è®¾ç½®å®¹å™¨ */\n.settings-container[data-v-7f64eab0] {\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n  padding: 0 0.5rem 3rem 0.5rem;\n\n  /* æ»šåŠ¨æ¡æ ·å¼ */\n  scrollbar-width: thin;\n  scrollbar-color: rgba(100, 116, 139, 0.3) rgba(243, 244, 246, 0.5);\n}\n.settings-container[data-v-7f64eab0]::-webkit-scrollbar {\n  width: 8px;\n}\n.settings-container[data-v-7f64eab0]::-webkit-scrollbar-track {\n  background: rgba(243, 244, 246, 0.5);\n  border-radius: 4px;\n}\n.settings-container[data-v-7f64eab0]::-webkit-scrollbar-thumb {\n  background: rgba(100, 116, 139, 0.3);\n  border-radius: 4px;\n  transition: background 0.2s ease;\n}\n.settings-container[data-v-7f64eab0]::-webkit-scrollbar-thumb:hover {\n  background: rgba(100, 116, 139, 0.5);\n}\n\n/* è®¾ç½®åŒºå— */\n.settings-section[data-v-7f64eab0] {\n  margin-bottom: 1.5rem;\n  background: white;\n  border-radius: 0.75rem;\n  border: 1px solid #e2e8f0;\n  overflow: hidden;\n}\n.section-header[data-v-7f64eab0] {\n  padding: 1rem 1.25rem;\n  background: #f8fafc;\n  border-bottom: 1px solid #e2e8f0;\n}\n.section-title[data-v-7f64eab0] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1e293b;\n}\n.settings-list[data-v-7f64eab0] {\n  padding: 0.5rem;\n}\n\n/* è®¾ç½®é¡¹ */\n.setting-item[data-v-7f64eab0] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-radius: 0.5rem;\n  transition: background 0.2s ease;\n}\n.setting-item[data-v-7f64eab0]:hover {\n  background: #f8fafc;\n}\n.setting-info[data-v-7f64eab0] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.setting-name[data-v-7f64eab0] {\n  font-weight: 500;\n  color: #1e293b;\n  cursor: pointer;\n}\n.setting-desc[data-v-7f64eab0] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.setting-control[data-v-7f64eab0] {\n  display: flex;\n  align-items: center;\n}\n.model-control[data-v-7f64eab0] {\n  flex-direction: column;\n  align-items: stretch;\n  gap: 0.5rem;\n}\n.model-select-row[data-v-7f64eab0] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.model-search[data-v-7f64eab0] {\n  width: 100%;\n}\n\n/* æ§ä»¶æ ·å¼ */\n.setting-select[data-v-7f64eab0] {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.375rem;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  min-width: 80px;\n}\n.setting-select[data-v-7f64eab0]:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n}\n.range-container[data-v-7f64eab0] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.setting-range[data-v-7f64eab0] {\n  width: 100px;\n}\n.range-value[data-v-7f64eab0] {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: #374151;\n  min-width: 40px;\n}\n\n/* ä¸‹æ‹‰é€‰æ‹©æ¡†æ ·å¼ */\n.setting-select[data-v-7f64eab0] {\n  padding: 0.5rem 2rem 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  background-color: white;\n  background-image: url(${m});\n  background-repeat: no-repeat;\n  background-position: right 0.75rem center;\n  background-size: 12px;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: border-color 0.2s ease;\n  appearance: none;\n  min-width: 120px;\n}\n.setting-select[data-v-7f64eab0]:hover {\n  border-color: #94a3b8;\n}\n.setting-select[data-v-7f64eab0]:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n[data-theme='dark'] .setting-select[data-v-7f64eab0] {\n  background-color: #374151;\n  border-color: #4b5563;\n  color: #e5e7eb;\n  background-image: url(${p});\n}\n[data-theme='dark'] .setting-select[data-v-7f64eab0]:hover {\n  border-color: #6b7280;\n}\n\n/* å¼€å…³æ ·å¼ */\n.setting-switch[data-v-7f64eab0] {\n  position: relative;\n  display: inline-block;\n  width: 44px;\n  height: 24px;\n}\n.setting-switch input[data-v-7f64eab0] {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n.switch-slider[data-v-7f64eab0] {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #cbd5e1;\n  transition: 0.2s;\n  border-radius: 24px;\n}\n.switch-slider[data-v-7f64eab0]:before {\n  position: absolute;\n  content: '';\n  height: 18px;\n  width: 18px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  transition: 0.2s;\n  border-radius: 50%;\n}\ninput:checked + .switch-slider[data-v-7f64eab0] {\n  background-color: #3b82f6;\n}\ninput:checked + .switch-slider[data-v-7f64eab0]:before {\n  transform: translateX(20px);\n}\n\n/* å…¨å®½è®¾ç½®é¡¹ */\n.setting-item-full[data-v-7f64eab0] {\n  flex-direction: column;\n  align-items: flex-start;\n}\n.setting-control-full[data-v-7f64eab0] {\n  width: 100%;\n  margin-top: 0.5rem;\n}\n.setting-textarea[data-v-7f64eab0] {\n  width: 100%;\n  padding: 0.5rem;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  font-family: inherit;\n  resize: vertical;\n  min-height: 60px;\n}\n.setting-textarea[data-v-7f64eab0]:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n.setting-textarea[data-v-7f64eab0]::placeholder {\n  color: #9ca3af;\n}\n[data-theme='dark'] .setting-textarea[data-v-7f64eab0] {\n  background: #374151;\n  border-color: #4b5563;\n  color: #e5e7eb;\n}\n[data-theme='dark'] .setting-textarea[data-v-7f64eab0]::placeholder {\n  color: #6b7280;\n}\n\n/* å·¥å…·æŒ‰é’® */\n.utility-btn[data-v-7f64eab0] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.375rem;\n  background: white;\n  color: #374151;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.875rem;\n}\n.utility-btn[data-v-7f64eab0]:hover {\n  background: #f9fafb;\n  border-color: #9ca3af;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 640px) {\n.setting-item[data-v-7f64eab0] {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.75rem;\n}\n.setting-control[data-v-7f64eab0] {\n    width: 100%;\n    justify-content: flex-end;\n}\n.model-control[data-v-7f64eab0] {\n    justify-content: flex-start;\n}\n.model-select-row[data-v-7f64eab0] {\n    width: 100%;\n    flex-direction: column;\n    align-items: stretch;\n}\n.model-select-row .setting-select[data-v-7f64eab0],\n  .model-select-row .utility-btn[data-v-7f64eab0] {\n    width: 100%;\n    justify-content: center;\n}\n.range-container[data-v-7f64eab0] {\n    width: 100%;\n    justify-content: space-between;\n}\n.header-actions .btn-text[data-v-7f64eab0] {\n    display: none;\n}\n}\n\n/* æ·±è‰²ä¸»é¢˜ */\n[data-theme='dark'] .settings-panel[data-v-7f64eab0] {\n  background: var(--color-background);\n}\n[data-theme='dark'] .panel-header[data-v-7f64eab0],\n[data-theme='dark'] .settings-section[data-v-7f64eab0] {\n  background: #1e293b;\n  border-color: #475569;\n}\n[data-theme='dark'] .section-header[data-v-7f64eab0] {\n  background: #334155;\n  border-bottom-color: #475569;\n}\n[data-theme='dark'] .panel-title[data-v-7f64eab0],\n[data-theme='dark'] .section-title[data-v-7f64eab0],\n[data-theme='dark'] .setting-name[data-v-7f64eab0] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .settings-subtitle[data-v-7f64eab0],\n[data-theme='dark'] .setting-desc[data-v-7f64eab0] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .setting-item[data-v-7f64eab0]:hover {\n  background: #334155;\n}\n[data-theme='dark'] .action-btn[data-v-7f64eab0],\n[data-theme='dark'] .setting-select[data-v-7f64eab0],\n[data-theme='dark'] .utility-btn[data-v-7f64eab0] {\n  background: #374151;\n  border-color: #4b5563;\n  color: #e5e7eb;\n}\n[data-theme='dark'] .action-btn[data-v-7f64eab0]:hover,\n[data-theme='dark'] .utility-btn[data-v-7f64eab0]:hover {\n  background: #4b5563;\n  border-color: #6b7280;\n}\n[data-theme='dark'] .switch-slider[data-v-7f64eab0] {\n  background-color: #4b5563;\n}\n\n/* æˆæƒéªŒè¯ç›¸å…³æ ·å¼ */\n.form-input-inline[data-v-7f64eab0] {\n  padding: 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  background: white;\n  color: #374151;\n  font-size: 0.875rem;\n  min-width: 200px;\n  transition: all 0.2s ease;\n}\n.form-input-inline[data-v-7f64eab0]:focus {\n  outline: none;\n  border-color: #667eea;\n  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n.auth-status[data-v-7f64eab0] {\n  padding: 0.5rem 1rem;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n}\n.auth-status.verified[data-v-7f64eab0] {\n  background: #d1fae5;\n  color: #059669;\n  border: 1px solid #a7f3d0;\n}\n.auth-status.unverified[data-v-7f64eab0] {\n  background: #fee2e2;\n  color: #dc2626;\n  border: 1px solid #fecaca;\n}\n.utility-btn.primary[data-v-7f64eab0] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.utility-btn.primary[data-v-7f64eab0]:hover {\n  background: var(--color-primary-dark, #2563eb);\n  border-color: var(--color-primary-dark, #2563eb);\n}\n[data-theme='dark'] .form-input-inline[data-v-7f64eab0] {\n  background: #334155;\n  border-color: #475569;\n  color: #e5e7eb;\n}\n[data-theme='dark'] .auth-status.verified[data-v-7f64eab0] {\n  background: rgba(5, 150, 105, 0.2);\n  color: #6ee7b7;\n  border-color: rgba(5, 150, 105, 0.3);\n}\n[data-theme='dark'] .auth-status.unverified[data-v-7f64eab0] {\n  background: rgba(220, 38, 38, 0.2);\n  color: #fca5a5;\n  border-color: rgba(220, 38, 38, 0.3);\n}\n\n/* åŠ è½½è„‰å†²åŠ¨ç”» */\n.loading-pulse[data-v-7f64eab0] {\n  animation: pulse-7f64eab0 1.5s ease-in-out infinite;\n}\n@keyframes pulse-7f64eab0 {\n0%,\n  100% {\n    opacity: 1;\n}\n50% {\n    opacity: 0.4;\n}\n}\n\n/* APIç®¡ç†å¼¹çª—æ ·å¼ */\n.api-modal-overlay[data-v-7f64eab0] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n}\n.api-modal-container[data-v-7f64eab0] {\n  background: var(--color-surface, #fff);\n  border-radius: 12px;\n  width: 90%;\n  max-width: 900px;\n  max-height: 85vh;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  overflow: hidden;\n}\n.api-modal-header[data-v-7f64eab0] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--color-border, #e2e8f0);\n  background: var(--color-surface-light, #f8fafc);\n}\n.api-modal-header h3[data-v-7f64eab0] {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: var(--color-text, #1e293b);\n}\n.api-modal-header .close-btn[data-v-7f64eab0] {\n  width: 32px;\n  height: 32px;\n  border: none;\n  background: transparent;\n  cursor: pointer;\n  border-radius: 6px;\n  font-size: 1.25rem;\n  color: var(--color-text-secondary, #64748b);\n  transition: all 0.2s ease;\n}\n.api-modal-header .close-btn[data-v-7f64eab0]:hover {\n  background: var(--color-border, #e2e8f0);\n  color: var(--color-text, #1e293b);\n}\n.api-modal-content[data-v-7f64eab0] {\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n}\n.api-modal-content[data-v-7f64eab0] .api-management-panel {\n  height: 100%;\n  max-height: 70vh;\n}\n[data-theme='dark'] .api-modal-container[data-v-7f64eab0] {\n  background: #1e293b;\n}\n[data-theme='dark'] .api-modal-header[data-v-7f64eab0] {\n  background: #334155;\n  border-bottom-color: #475569;\n}\n[data-theme='dark'] .api-modal-header h3[data-v-7f64eab0] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .api-modal-header .close-btn[data-v-7f64eab0] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .api-modal-header .close-btn[data-v-7f64eab0]:hover {\n  background: #475569;\n  color: #f1f5f9;\n}\n`,""]);const f=u},3126:(e,t,n)=>{"use strict";var a=n(6743),r=n(9675),o=n(76),i=n(3144);e.exports=function(e){if(e.length<1||"function"!=typeof e[0])throw new r("a function is required");return i(a,o,e)}},3144:(e,t,n)=>{"use strict";var a=n(6743),r=n(1002),o=n(76),i=n(7119);e.exports=i||a.call(o,r)},3177:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n/* Step transition animation */\n.fade-step-enter-active,\n.fade-step-leave-active {\n  transition: opacity 0.3s ease;\n}\n.fade-step-enter-from,\n.fade-step-leave-to {\n  opacity: 0;\n}\n",""]);const s=i},3302:(e,t,n)=>{"use strict";n.d(t,{Yz:()=>o,w9:()=>r});class a{static instance;debugMode=!1;consoleDebug=!1;performanceMonitor=!1;constructor(){this.loadDebugSettings()}static getInstance(){return a.instance||(a.instance=new a),a.instance}loadDebugSettings(){try{const e=localStorage.getItem("dad_game_settings");if(e){const t=JSON.parse(e);this.debugMode=t.debugMode||!1,this.consoleDebug=t.consoleDebug||!1,this.performanceMonitor=t.performanceMonitor||!1}}catch(e){console.error("åŠ è½½è°ƒè¯•è®¾ç½®å¤±è´¥:",e),this.debugMode=!1,this.consoleDebug=!1,this.performanceMonitor=!1}}reloadSettings(){this.loadDebugSettings()}setDebugMode(e){this.debugMode=e,this.reloadSettings(),this.consoleDebug&&console.log("[è°ƒè¯•] è°ƒè¯•æ¨¡å¼"+(e?"å·²å¯ç”¨":"å·²ç¦ç”¨"))}isDebugMode(){return this.debugMode}isConsoleDebugEnabled(){return this.debugMode&&this.consoleDebug}isPerformanceMonitorEnabled(){return this.debugMode&&this.performanceMonitor}log(e,t,n){this.isConsoleDebugEnabled()&&(void 0!==n?console.log(`[${e}] ${t}`,n):console.log(`[${e}] ${t}`))}warn(e,t,n){this.isConsoleDebugEnabled()&&(void 0!==n?console.warn(`[${e}] ${t}`,n):console.warn(`[${e}] ${t}`))}error(e,t,n){void 0!==n?console.error(`[${e}] ${t}`,n):console.error(`[${e}] ${t}`)}timeStart(e){if(this.isPerformanceMonitorEnabled())try{console.time(`[æ€§èƒ½] ${e}`)}catch(e){}}timeEnd(e){if(this.isPerformanceMonitorEnabled())try{console.timeEnd(`[æ€§èƒ½] ${e}`)}catch(e){}}group(e){this.isConsoleDebugEnabled()&&console.group(`[è°ƒè¯•] ${e}`)}groupEnd(){this.isConsoleDebugEnabled()&&console.groupEnd()}info(e,t,n){this.debugMode&&(void 0!==n?console.info(`[${e}] ${t}`,n):console.info(`[${e}] ${t}`))}table(e,t,n){this.isConsoleDebugEnabled()&&(console.log(`[${e}] ${t}:`),console.table(n))}count(e){this.isPerformanceMonitorEnabled()&&console.count(`[ç»Ÿè®¡] ${e}`)}countReset(e){this.isPerformanceMonitorEnabled()&&console.countReset(`[ç»Ÿè®¡] ${e}`)}}const r=a.getInstance(),o={log:(e,t,n)=>r.log(e,t,n),warn:(e,t,n)=>r.warn(e,t,n),error:(e,t,n)=>r.error(e,t,n),info:(e,t,n)=>r.info(e,t,n),timeStart:e=>r.timeStart(e),timeEnd:e=>r.timeEnd(e),group:e=>r.group(e),groupEnd:()=>r.groupEnd(),table:(e,t,n)=>r.table(e,t,n),count:e=>r.count(e),countReset:e=>r.countReset(e),setMode:e=>r.setDebugMode(e),isEnabled:()=>r.isDebugMode(),reload:()=>r.reloadSettings()}},3310:(e,t,n)=>{"use strict";n.d(t,{useActionQueueStore:()=>o});var a=n(810),r=n(4061);const o=(0,a.nY)("actionQueue",()=>{const e=(0,r.ref)([]),t=()=>{console.log("[æ“ä½œé˜Ÿåˆ—] æ¸…ç©ºæ“ä½œé˜Ÿåˆ—ï¼Œå…±",e.value.length,"ä¸ªæ“ä½œ"),e.value=[],a()},n=()=>0===e.value.length?"":`\n\nã€ç©å®¶æœ€è¿‘æ“ä½œã€‘\nåœ¨æœ¬è½®å¯¹è¯å‰ï¼Œç©å®¶è¿›è¡Œäº†ä»¥ä¸‹æ“ä½œï¼š\n${e.value.map(e=>{switch(e.type){case"cultivate":return"å¤§é“"===e.itemType?`æ„Ÿæ‚Ÿäº†ã€Š${e.itemName}ã€‹å¤§é“`:`ä¿®ç‚¼äº†ã€Š${e.itemName}ã€‹åŠŸæ³•`;case"equip":return`è£…å¤‡äº†ã€Š${e.itemName}ã€‹${e.itemType||"æ³•å®"}`;case"use":return e.description||`ä½¿ç”¨äº†ã€Š${e.itemName}ã€‹`;case"unequip":return`å¸ä¸‹äº†ã€Š${e.itemName}ã€‹è£…å¤‡`;case"discard":return`ä¸¢å¼ƒäº†ã€Š${e.itemName}ã€‹`;case"npc_trade":return`å°è¯•ä¸ ${e.npcName} äº¤æ˜“ ${e.itemName}`;case"npc_request":return`å‘ ${e.npcName} ç´¢è¦ ${e.itemName}`;case"npc_steal":return`å°è¯•ä» ${e.npcName} èº«ä¸Šå·å– ${e.itemName}`;case"npc_memory_summarize":return`ä½ å¼€å§‹æ•´ç†å…³äº ${e.npcName} çš„è®°å¿†ç¢ç‰‡ï¼Œè¯•å›¾ä»æœ€æ—§çš„ ${e.count||10} æ¡è®°å¿†ä¸­æ€»ç»“å‡ºå…³é”®ä¿¡æ¯ã€‚`;default:return e.description}}).map(e=>`â€¢ ${e}`).join("\n")}\n\nâš ï¸ **é‡è¦æé†’**ï¼šè¯·ä¼˜å…ˆåŸºäºè¿™äº›ç©å®¶æ“ä½œæ¥ç”Ÿæˆå›åº”ï¼å…ˆå¤„ç†å’Œåæ˜ è¿™äº›å…·ä½“åŠ¨ä½œçš„ç»“æœï¼Œç„¶åå†å›åº”ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬å†…å®¹ã€‚è¿™äº›æ“ä½œå…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œåº”è¯¥åœ¨å™äº‹ä¸­å¾—åˆ°æ˜ç¡®ä½“ç°ã€‚`,a=()=>{try{localStorage.setItem("dao_action_queue",JSON.stringify(e.value))}catch(e){console.warn("[æ“ä½œé˜Ÿåˆ—] ä¿å­˜åˆ°localStorageå¤±è´¥:",e)}};return(()=>{try{const t=localStorage.getItem("dao_action_queue");if(t){const n=JSON.parse(t),a=Date.now()-36e5;e.value=n.filter(e=>e.timestamp>a),console.log("[æ“ä½œé˜Ÿåˆ—] ä»å­˜å‚¨åŠ è½½",e.value.length,"ä¸ªæ“ä½œ")}}catch(e){console.warn("[æ“ä½œé˜Ÿåˆ—] ä»localStorageåŠ è½½å¤±è´¥:",e)}})(),{pendingActions:e,addAction:t=>{const n={...t,id:`action_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,timestamp:Date.now()};"equip"===n.type?e.value=e.value.filter(e=>!("unequip"===e.type&&e.itemName===n.itemName)):"unequip"===n.type&&(e.value=e.value.filter(e=>!("equip"===e.type&&e.itemName===n.itemName))),"cultivate"===n.type&&(e.value=e.value.filter(e=>"cultivate"!==e.type)),"comprehend"===n.type&&(e.value=e.value.filter(e=>"comprehend"!==e.type));const r=e.value.findIndex(e=>e.type===t.type&&e.itemName===t.itemName);-1!==r?e.value[r]=n:e.value.push(n),console.log("[æ“ä½œé˜Ÿåˆ—] æ·»åŠ æ“ä½œ:",n),a()},removeAction:t=>{const n=e.value.findIndex(e=>e.id===t);if(-1!==n){const t=e.value.splice(n,1)[0];return console.log("[æ“ä½œé˜Ÿåˆ—] ç§»é™¤æ“ä½œ:",t),a(),t}return null},clearActions:t,getActionPrompt:n,consumeActions:()=>{const e=n();return e&&t(),e}}})},3353:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.state-change-overlay[data-v-a2a95590] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n}\n.state-change-viewer[data-v-a2a95590] {\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  background-color: var(--color-surface);\n  border-radius: 16px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  display: flex;\n  flex-direction: column;\n  border: 1px solid var(--color-border);\n  animation: modal-fade-in-a2a95590 0.3s ease-out;\n}\n@keyframes modal-fade-in-a2a95590 {\nfrom {\n    opacity: 0;\n    transform: scale(0.95);\n}\nto {\n    opacity: 1;\n    transform: scale(1);\n}\n}\n.viewer-header[data-v-a2a95590] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1.25rem;\n  border-bottom: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.viewer-header h3[data-v-a2a95590] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.close-btn[data-v-a2a95590] {\n  background: none;\n  border: none;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  padding: 0.25rem;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n}\n.close-btn[data-v-a2a95590]:hover {\n  background-color: var(--color-surface-hover);\n  color: var(--color-text);\n}\n.viewer-summary[data-v-a2a95590] {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background: var(--color-surface-light);\n  border-bottom: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.summary-item[data-v-a2a95590] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n.summary-item.added[data-v-a2a95590] { color: var(--color-success);\n}\n.summary-item.removed[data-v-a2a95590] { color: #ff9800;\n}\n.summary-item.updated[data-v-a2a95590] { color: var(--color-info);\n}\n.summary-item.errors[data-v-a2a95590] { color: var(--color-error);\n}\n.viewer-content[data-v-a2a95590] {\n  overflow-y: auto;\n  padding: 1rem 1.25rem;\n  scrollbar-width: thin;\n  scrollbar-color: var(--color-border) transparent;\n}\n.viewer-content[data-v-a2a95590]::-webkit-scrollbar { width: 6px;\n}\n.viewer-content[data-v-a2a95590]::-webkit-scrollbar-thumb {\n  background: var(--color-border);\n  border-radius: 3px;\n}\n.no-changes[data-v-a2a95590] {\n  text-align: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n}\n.changes-list[data-v-a2a95590] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.change-item[data-v-a2a95590] {\n  display: flex;\n  align-items: flex-start;\n  gap: 1rem;\n  padding: 1rem;\n  border-radius: 10px;\n  border-left: 4px solid;\n  background: var(--color-surface-light);\n  transition: all 0.2s ease;\n}\n.change-item[data-v-a2a95590]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\n}\n.item-green[data-v-a2a95590] { border-color: var(--color-success);\n}\n.item-red[data-v-a2a95590] { border-color: var(--color-error);\n}\n.item-blue[data-v-a2a95590] { border-color: var(--color-info);\n}\n.item-gray[data-v-a2a95590] { border-color: var(--color-text-secondary);\n}\n.item-orange[data-v-a2a95590] { border-color: #ff9800;\n}\n.item-icon[data-v-a2a95590] {\n  flex-shrink: 0;\n  width: 2rem;\n  height: 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  color: white;\n}\n.item-green .item-icon[data-v-a2a95590] { background: var(--color-success);\n}\n.item-red .item-icon[data-v-a2a95590] { background: var(--color-error);\n}\n.item-blue .item-icon[data-v-a2a95590] { background: var(--color-info);\n}\n.item-gray .item-icon[data-v-a2a95590] { background: var(--color-text-secondary);\n}\n.item-orange .item-icon[data-v-a2a95590] { background: #ff9800;\n}\n.item-content[data-v-a2a95590] { flex: 1;\n}\n.item-title[data-v-a2a95590] {\n  margin: 0 0 0.25rem 0;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.item-description[data-v-a2a95590] {\n  margin: 0;\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n.item-details[data-v-a2a95590] {\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: rgba(0, 0, 0, 0.05);\n  border-radius: 6px;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  font-family: 'Courier New', monospace;\n}\n.item-details p[data-v-a2a95590] {\n  margin: 0.25rem 0;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n",""]);const s=i},3395:(e,t,n)=>{"use strict";n.d(t,{A:()=>Za});var a=n(4061),r=n(5517),o=n(7677),i=n(1412),s=n(5365),l=n(1783),c=n(3528),d=n(4270),u=n(3302),m=n(876),p=n(2288),f=n(5831);const g={class:"body"},h={class:"left"},v={class:"rule-list"},b=["onClick"],y={class:"rule-row"},x={class:"rule-mode"},k={class:"rule-pattern"},w={class:"rule-repl"},E={class:"right"},N={key:0,class:"editor"},S={class:"editor-row"},V={class:"editor-row"},_={class:"editor-row editor-row-vertical"},C={class:"editor-row editor-row-vertical"},A={key:0,class:"hint"},D={class:"options"},T={class:"opt"},B={class:"opt"},I=["disabled"],z=["disabled"],M={key:0,class:"error"},P={class:"editor-actions"},R=["disabled"],$=["disabled"],O=["disabled"],L={key:1,class:"empty"},F=(0,a.defineComponent)({__name:"TextReplaceRulesModal",props:{open:{type:Boolean},rules:{}},emits:["close","save"],setup(e,{emit:t}){const n=e,r=t,o=(0,a.ref)([]),i=(0,a.ref)(0);(0,a.watch)(()=>n.open,e=>{if(!e)return;const t=Array.isArray(n.rules)?n.rules:[];o.value=JSON.parse(JSON.stringify(t)),0===o.value.length?i.value=0:i.value=Math.min(i.value,o.value.length-1)},{immediate:!0});const s=(0,a.computed)(()=>o.value[i.value]??null),l=()=>{o.value.push({id:`rule_${Date.now()}_${Math.random().toString(16).slice(2)}`,enabled:!0,mode:"regex",pattern:"",replacement:"",global:!0,ignoreCase:!1,multiline:!1,dotAll:!1}),i.value=o.value.length-1},c=()=>{0!==o.value.length&&(o.value.splice(i.value,1),i.value=Math.max(0,Math.min(i.value,o.value.length-1)))},d=()=>{if(i.value<=0)return;const e=i.value,[t]=o.value.splice(e,1);o.value.splice(e-1,0,t),i.value=e-1},u=()=>{if(i.value>=o.value.length-1)return;const e=i.value,[t]=o.value.splice(e,1);o.value.splice(e+1,0,t),i.value=e+1},m=(0,a.computed)(()=>{const e=s.value;if(!e)return null;if(!e.pattern?.trim())return null;if("regex"!==e.mode)return null;const t=(!1===e.global?"":"g")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.dotAll?"s":"");try{return new RegExp(e.pattern,t),null}catch(e){return`æ­£åˆ™æ— æ•ˆï¼š${e instanceof Error?e.message:String(e)}`}}),p=()=>r("close"),f=()=>{r("save",o.value),r("close")};return(e,t)=>e.open?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"overlay",onClick:(0,a.withModifiers)(p,["self"])},[(0,a.createElementVNode)("div",{class:"modal",onClick:t[8]||(t[8]=(0,a.withModifiers)(()=>{},["stop"]))},[(0,a.createElementVNode)("div",{class:"header"},[t[9]||(t[9]=(0,a.createElementVNode)("div",{class:"title"},[(0,a.createElementVNode)("h3",null,"æ­£åˆ™æ›¿æ¢è§„åˆ™"),(0,a.createElementVNode)("p",{class:"subtitle"},"ç”¨äºå¯¹ AI è¾“å‡ºè¿›è¡Œæ›¿æ¢å¤„ç†ï¼ˆå¯ç”¨æ­£åˆ™æˆ–çº¯æ–‡æœ¬ï¼‰")],-1)),(0,a.createElementVNode)("button",{class:"icon-btn",onClick:p,"aria-label":"å…³é—­"},"Ã—")]),(0,a.createElementVNode)("div",g,[(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",{class:"left-actions"},[(0,a.createElementVNode)("button",{class:"btn",onClick:l},"æ–°å¢è§„åˆ™")]),(0,a.createElementVNode)("div",v,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(o.value,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("button",{key:e.id,class:(0,a.normalizeClass)(["rule-item",{active:t===i.value}]),onClick:e=>i.value=t},[(0,a.createElementVNode)("div",y,[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(["rule-badge",{off:!e.enabled}])},(0,a.toDisplayString)(e.enabled?"å¯ç”¨":"åœç”¨"),3),(0,a.createElementVNode)("span",x,(0,a.toDisplayString)("regex"===e.mode?"æ­£åˆ™":"æ–‡æœ¬"),1)]),(0,a.createElementVNode)("div",k,(0,a.toDisplayString)(e.pattern||"ï¼ˆæœªå¡«å†™åŒ¹é…ï¼‰"),1),(0,a.createElementVNode)("div",w,(0,a.toDisplayString)(e.replacement||"ï¼ˆæ›¿æ¢ä¸ºç©ºï¼‰"),1)],10,b))),128))])]),(0,a.createElementVNode)("div",E,[s.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",N,[(0,a.createElementVNode)("div",S,[t[10]||(t[10]=(0,a.createElementVNode)("label",{class:"label"},"å¯ç”¨",-1)),(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=e=>s.value.enabled=e)},null,512),[[a.vModelCheckbox,s.value.enabled]])]),(0,a.createElementVNode)("div",V,[t[12]||(t[12]=(0,a.createElementVNode)("label",{class:"label"},"åŒ¹é…æ¨¡å¼",-1)),(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.value.mode=e),class:"select"},t[11]||(t[11]=[(0,a.createElementVNode)("option",{value:"regex"},"æ­£åˆ™",-1),(0,a.createElementVNode)("option",{value:"text"},"çº¯æ–‡æœ¬",-1)]),512),[[a.vModelSelect,s.value.mode]])]),(0,a.createElementVNode)("div",_,[t[13]||(t[13]=(0,a.createElementVNode)("label",{class:"label"},"åŒ¹é…å†…å®¹",-1)),(0,a.withDirectives)((0,a.createElementVNode)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.value.pattern=e),class:"textarea",rows:"3",placeholder:"pattern æˆ– çº¯æ–‡æœ¬"},null,512),[[a.vModelText,s.value.pattern]])]),(0,a.createElementVNode)("div",C,[t[15]||(t[15]=(0,a.createElementVNode)("label",{class:"label"},"æ›¿æ¢ä¸º",-1)),(0,a.withDirectives)((0,a.createElementVNode)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.value.replacement=e),class:"textarea",rows:"3",placeholder:"å¯ä¸ºç©ºï¼ˆè¡¨ç¤ºåˆ é™¤ï¼‰"},null,512),[[a.vModelText,s.value.replacement]]),"regex"===s.value.mode?((0,a.openBlock)(),(0,a.createElementBlock)("div",A,t[14]||(t[14]=[(0,a.createTextVNode)(" æ”¯æŒæ•è·ç»„ï¼šä¾‹å¦‚ç”¨ ",-1),(0,a.createElementVNode)("code",null,"$1",-1),(0,a.createTextVNode)(" å¼•ç”¨åˆ†ç»„ ",-1)]))):(0,a.createCommentVNode)("v-if",!0)]),(0,a.createElementVNode)("div",D,[(0,a.createElementVNode)("label",T,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=e=>s.value.global=e)},null,512),[[a.vModelCheckbox,s.value.global]]),t[16]||(t[16]=(0,a.createTextVNode)(" å…¨å±€ï¼ˆgï¼‰ ",-1))]),(0,a.createElementVNode)("label",B,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>s.value.ignoreCase=e)},null,512),[[a.vModelCheckbox,s.value.ignoreCase]]),t[17]||(t[17]=(0,a.createTextVNode)(" å¿½ç•¥å¤§å°å†™ï¼ˆiï¼‰ ",-1))]),(0,a.createElementVNode)("label",{class:(0,a.normalizeClass)(["opt",{disabled:"regex"!==s.value.mode}])},[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=e=>s.value.multiline=e),disabled:"regex"!==s.value.mode},null,8,I),[[a.vModelCheckbox,s.value.multiline]]),t[18]||(t[18]=(0,a.createTextVNode)(" å¤šè¡Œï¼ˆmï¼‰ ",-1))],2),(0,a.createElementVNode)("label",{class:(0,a.normalizeClass)(["opt",{disabled:"regex"!==s.value.mode}])},[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=e=>s.value.dotAll=e),disabled:"regex"!==s.value.mode},null,8,z),[[a.vModelCheckbox,s.value.dotAll]]),t[19]||(t[19]=(0,a.createTextVNode)(" ç‚¹å·åŒ¹é…æ¢è¡Œï¼ˆsï¼‰ ",-1))],2)]),m.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",M,(0,a.toDisplayString)(m.value),1)):(0,a.createCommentVNode)("v-if",!0),(0,a.createElementVNode)("div",P,[(0,a.createElementVNode)("button",{class:"btn btn-secondary",disabled:i.value<=0,onClick:d},"ä¸Šç§»",8,R),(0,a.createElementVNode)("button",{class:"btn btn-secondary",disabled:i.value>=o.value.length-1,onClick:u},"ä¸‹ç§»",8,$),(0,a.createElementVNode)("button",{class:"btn btn-danger",disabled:0===o.value.length,onClick:c},"åˆ é™¤",8,O)])])):((0,a.openBlock)(),(0,a.createElementBlock)("div",L," æš‚æ— è§„åˆ™ï¼Œç‚¹å‡»â€œæ–°å¢è§„åˆ™â€å¼€å§‹é…ç½® "))])]),(0,a.createElementVNode)("div",{class:"footer"},[(0,a.createElementVNode)("button",{class:"btn btn-secondary",onClick:p},"å–æ¶ˆ"),(0,a.createElementVNode)("button",{class:"btn",onClick:f},"ä¿å­˜")])])])):(0,a.createCommentVNode)("v-if",!0)}});var j=n(5072),U=n.n(j),q=n(7825),G=n.n(q),H=n(7659),Y=n.n(H),W=n(5056),X=n.n(W),J=n(540),K=n.n(J),Q=n(1113),Z=n.n(Q),ee=n(1153),te={};te.styleTagTransform=Z(),te.setAttributes=X(),te.insert=Y().bind(null,"head"),te.domAPI=G(),te.insertStyleElement=K(),U()(ee.A,te),ee.A&&ee.A.locals&&ee.A.locals;var ne=n(6262);const ae=(0,ne.A)(F,[["__scopeId","data-v-a2196f8c"]]);var re=n(5342),oe=n(4582),ie=n(1184),se=n(9173),le=n(8651),ce=n(3992);const de={class:"settings-panel"},ue={class:"panel-header"},me={class:"header-left"},pe={class:"header-info"},fe={class:"panel-title"},ge={class:"settings-subtitle"},he={class:"header-actions"},ve={class:"btn-text"},be={class:"btn-text"},ye={class:"settings-container"},xe={class:"settings-section"},ke={class:"section-header"},we={class:"section-title"},Ee={class:"settings-list"},Ne={class:"setting-item"},Se={class:"setting-info"},Ve={class:"setting-name"},_e={class:"setting-desc"},Ce={class:"setting-control"},Ae={class:"setting-item"},De={class:"setting-info"},Te={class:"setting-name"},Be={class:"setting-desc"},Ie={class:"setting-control"},ze={value:"light"},Me={value:"dark"},Pe={value:"auto"},Re={class:"setting-item"},$e={class:"setting-info"},Oe={class:"setting-name"},Le={class:"setting-desc"},Fe={class:"setting-control"},je={class:"range-container"},Ue={class:"range-value"},qe={class:"setting-item"},Ge={class:"setting-info"},He={class:"setting-name"},Ye={class:"setting-desc"},We={class:"setting-control"},Xe={class:"range-container"},Je={class:"range-value"},Ke={class:"setting-item"},Qe={class:"setting-info"},Ze={class:"setting-name"},et={class:"setting-desc"},tt={class:"setting-control"},nt={class:"setting-switch"},at={class:"settings-section"},rt={class:"section-header"},ot={class:"section-title"},it={class:"settings-list"},st={key:0,class:"setting-item setting-item-full"},lt={class:"setting-info"},ct={class:"setting-name"},dt={class:"setting-desc"},ut={class:"setting-control-full",style:{display:"flex",gap:"0.5rem"}},mt=["placeholder"],pt=["disabled"],ft={class:"setting-item"},gt={class:"setting-info"},ht={class:"setting-name"},vt={class:"setting-desc"},bt={class:"setting-control"},yt={value:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ"},xt={value:"é“ä¾£å…»æˆç³»ç»Ÿ"},kt={value:"å®—é—¨å‘å±•ç³»ç»Ÿ"},wt={value:"æ¢ç´¢å†’é™©ç³»ç»Ÿ"},Et={value:"æˆ˜æ–—æŒ‘æˆ˜ç³»ç»Ÿ"},Nt={value:"èµ„æºæ”¶é›†ç³»ç»Ÿ"},St={class:"setting-item setting-item-full"},Vt={class:"setting-info"},_t={class:"setting-name"},Ct={class:"setting-desc"},At={class:"setting-control-full"},Dt=["placeholder"],Tt={class:"setting-item"},Bt={class:"setting-info"},It={class:"setting-name"},zt={class:"setting-desc"},Mt={class:"setting-control"},Pt={class:"setting-switch"},Rt={class:"setting-item setting-item-full"},$t={class:"setting-info"},Ot={class:"setting-name"},Lt={class:"setting-desc"},Ft={class:"setting-control-full"},jt=["placeholder"],Ut={class:"settings-section"},qt={class:"section-header"},Gt={class:"section-title"},Ht={class:"settings-list"},Yt={key:0,class:"setting-item"},Wt={class:"setting-info"},Xt={class:"setting-name"},Jt={class:"setting-item"},Kt={class:"setting-info"},Qt={class:"setting-name"},Zt={class:"setting-desc"},en={class:"setting-control"},tn={class:"setting-switch"},nn={key:0,class:"setting-item"},an={class:"setting-info"},rn={class:"setting-name"},on={class:"setting-desc"},sn={class:"setting-control"},ln={value:"female"},cn={value:"male"},dn={value:"all"},un={key:2,class:"setting-item"},mn={class:"setting-info"},pn={class:"setting-name"},fn={class:"setting-desc"},gn={class:"setting-control"},hn={class:"setting-item"},vn={class:"setting-info"},bn={class:"setting-name"},yn={class:"setting-desc"},xn={class:"setting-control"},kn={class:"setting-switch"},wn={class:"setting-item"},En={class:"setting-info"},Nn={class:"setting-name"},Sn={class:"setting-desc"},Vn={class:"setting-control"},_n={class:"setting-switch"},Cn={class:"setting-item"},An={class:"setting-info"},Dn={class:"setting-name"},Tn={class:"setting-desc"},Bn={class:"setting-control"},In={value:"raw"},zn={value:"standard"},Mn={class:"setting-item"},Pn={class:"setting-info"},Rn={class:"setting-name"},$n={class:"setting-desc"},On={class:"setting-control"},Ln={class:"setting-switch"},Fn={key:3,class:"setting-item"},jn={class:"setting-info"},Un={class:"setting-name"},qn={class:"setting-desc"},Gn={class:"setting-control"},Hn={class:"setting-item"},Yn={class:"setting-info"},Wn={class:"setting-name"},Xn={class:"setting-desc"},Jn={class:"setting-control"},Kn={value:"generate"},Qn={value:"generateRaw"},Zn={class:"setting-item"},ea={class:"setting-info"},ta={class:"setting-name"},na={class:"setting-desc"},aa={class:"setting-control"},ra={class:"setting-switch"},oa={class:"settings-section"},ia={class:"section-header"},sa={class:"section-title"},la={class:"settings-list"},ca={class:"setting-item"},da={class:"setting-info"},ua={class:"setting-name"},ma={class:"setting-desc"},pa={class:"setting-control"},fa={class:"setting-switch"},ga={key:0,class:"setting-item"},ha={class:"setting-info"},va={class:"setting-name"},ba={class:"setting-desc"},ya={class:"setting-control"},xa={class:"setting-switch"},ka={key:1,class:"setting-item"},wa={class:"setting-info"},Ea={class:"setting-name"},Na={class:"setting-desc"},Sa={class:"setting-control"},Va={class:"setting-switch"},_a={class:"setting-item"},Ca={class:"setting-info"},Aa={class:"setting-name"},Da={class:"setting-desc"},Ta={class:"setting-control"},Ba={key:0},Ia={class:"api-modal-header"},za={class:"api-modal-content"},Ma={class:"setting-item"},Pa={class:"setting-info"},Ra={class:"setting-name"},$a={class:"setting-desc"},Oa={class:"setting-control"},La={class:"setting-item"},Fa={class:"setting-info"},ja={class:"setting-name"},Ua={class:"setting-desc"},qa={class:"setting-control"},Ga={class:"setting-item"},Ha={class:"setting-info"},Ya={class:"setting-name"},Wa={class:"setting-desc"},Xa={class:"setting-control"},Ja=(0,a.defineComponent)({__name:"SettingsPanel",setup(e){const{t,setLanguage:g,currentLanguage:h}=(0,m.s)(),v=(0,oe.useCharacterStore)(),b=(0,ie.useGameStateStore)(),y=(0,se.useUIStore)(),x=(0,le.isTavernEnv)(),k=()=>{g(h.value),d.o.success("è¯­è¨€è®¾ç½®å·²æ›´æ–°")},w=(0,a.reactive)({mode:x?"tavern":"custom",streaming:!0,memorySummaryMode:"raw",initMode:"generate",customAPI:{provider:"openai",url:"",apiKey:"",model:"gpt-4o",temperature:.7,maxTokens:16e3}}),E=(0,a.computed)({get:()=>y.useStreaming,set:e=>{y.useStreaming=e,w.streaming=e}}),N=(0,a.ref)(!1),S=(0,a.ref)(10),V=()=>{f.vectorMemoryService.saveConfig({enabled:N.value,maxRetrieveCount:S.value}),z.value=!0,N.value?d.o.success(`å‘é‡è®°å¿†æ£€ç´¢å·²å¯ç”¨ï¼Œæ¯æ¬¡æœ€å¤šæ£€ç´¢ ${S.value} æ¡`):d.o.info("å‘é‡è®°å¿†æ£€ç´¢å·²ç¦ç”¨ï¼Œå°†ä½¿ç”¨å…¨é‡å‘é€æ¨¡å¼")},_=(0,a.ref)(["gpt-3.5-turbo","gpt-4","gpt-4-turbo"]),C=((0,a.ref)(!1),(0,a.ref)("")),A=((0,a.computed)(()=>{const e=C.value.trim().toLowerCase();return e?_.value.filter(t=>String(t).toLowerCase().includes(e)):_.value}),(0,a.ref)("")),D=(0,a.computed)(()=>b.character?.åå­—||""),T=async()=>{if(A.value&&A.value!==D.value)try{b.character&&(b.character.åå­—=A.value);const e=v.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.å­˜æ¡£æ§½ä½;e&&await v.saveToSlot(e),d.o.success(`é“å·å·²ä¿®æ”¹ä¸ºã€Œ${A.value}ã€`),A.value=""}catch(e){console.error("ä¿®æ”¹é“å·å¤±è´¥:",e),d.o.error("ä¿®æ”¹é“å·å¤±è´¥ï¼Œè¯·é‡è¯•")}};(0,a.ref)("idle"),(0,a.ref)(""),(0,a.ref)(""),(0,a.watch)(w,()=>{z.value=!0,p.aiService.saveConfig(w)},{deep:!0});const B=(0,a.reactive)({theme:"auto",uiScale:100,fontSize:16,fastAnimations:!1,splitResponseGeneration:!1,enableNsfwMode:!0,nsfwGenderFilter:"female",debugMode:!1,consoleDebug:!1,performanceMonitor:!1,replaceRules:[],questSystemType:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",questSystemPrompt:""}),I=(0,a.ref)(!1),z=(0,a.ref)(!1),M=(0,a.ref)(!1),P=(0,a.ref)(!1),R=(0,a.computed)(()=>{const e=B.replaceRules;return Array.isArray(e)?e.filter(e=>e&&e.enabled).length:0}),$=e=>Array.isArray(e)?e.slice(0,50).map((e,t)=>({id:"string"==typeof e?.id?e.id.slice(0,80):`rule_${t}`,enabled:!1!==e?.enabled,mode:"text"===e?.mode?"text":"regex",pattern:"string"==typeof e?.pattern?e.pattern.slice(0,500):"",replacement:"string"==typeof e?.replacement?e.replacement.slice(0,1500):"",ignoreCase:!!e?.ignoreCase,global:!1!==e?.global,multiline:!!e?.multiline,dotAll:!!e?.dotAll})):[],O=e=>{const t=$(e);B.replaceRules=t,(e=>{try{const t=localStorage.getItem("dad_game_settings"),n=t?JSON.parse(t):{},a={...n&&"object"==typeof n&&!Array.isArray(n)?n:{},replaceRules:e};localStorage.setItem("dad_game_settings",JSON.stringify(a))}catch{}})(t),L()};(0,a.watch)(B,()=>{z.value=!0},{deep:!0}),(0,a.watch)(()=>B.debugMode,e=>{u.Yz.setMode(e),u.Yz.log("è®¾ç½®é¢æ¿","è°ƒè¯•æ¨¡å¼"+(e?"å·²å¯ç”¨":"å·²ç¦ç”¨"))});const L=()=>{z.value=!0},F=async()=>{if(!I.value){I.value=!0,u.Yz.timeStart("ä¿å­˜è®¾ç½®");try{j(),localStorage.setItem("dad_game_settings",JSON.stringify(B)),u.Yz.log("è®¾ç½®é¢æ¿","è®¾ç½®å·²ä¿å­˜åˆ°localStorage",B),p.aiService.saveConfig(w),u.Yz.log("è®¾ç½®é¢æ¿","AIé…ç½®å·²ä¿å­˜",w);try{const{useCharacterStore:e}=await Promise.resolve().then(n.bind(n,4582)),t=e(),{useGameStateStore:a}=await Promise.resolve().then(n.bind(n,1184)),r=a(),o=!!t.rootState.å½“å‰æ¿€æ´»å­˜æ¡£&&!!t.activeSaveSlot;r.isGameLoaded&&o?(r.questSystem?.é…ç½®&&(r.questSystem.é…ç½®.ç³»ç»Ÿä»»åŠ¡ç±»å‹=B.questSystemType,r.questSystem.é…ç½®.ç³»ç»Ÿä»»åŠ¡æç¤ºè¯=B.questSystemPrompt||""),await t.saveCurrentGame(),u.Yz.log("è®¾ç½®é¢æ¿","è®¾ç½®å·²åŒæ­¥åˆ°å­˜æ¡£")):u.Yz.warn("è®¾ç½®é¢æ¿","å½“å‰æ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£ï¼Œè®¾ç½®ä»…ä¿å­˜åˆ°localStorage")}catch(e){u.Yz.error("è®¾ç½®é¢æ¿","åŒæ­¥è®¾ç½®åˆ°å­˜æ¡£å¤±è´¥ï¼ˆéè‡´å‘½ï¼‰",e)}await U(),z.value=!1,d.o.success("è®¾ç½®å·²ä¿å­˜å¹¶åº”ç”¨")}catch(e){u.Yz.error("è®¾ç½®é¢æ¿","ä¿å­˜è®¾ç½®å¤±è´¥",e),d.o.error(`ä¿å­˜è®¾ç½®å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{I.value=!1,u.Yz.timeEnd("ä¿å­˜è®¾ç½®")}}},j=()=>{u.Yz.group("è®¾ç½®éªŒè¯");try{(B.uiScale<50||B.uiScale>200)&&(B.uiScale=Math.max(50,Math.min(200,B.uiScale)),u.Yz.warn("è®¾ç½®é¢æ¿",`UIç¼©æ”¾å€¼å·²ä¿®æ­£ä¸º: ${B.uiScale}%`)),"boolean"!=typeof B.splitResponseGeneration&&(B.splitResponseGeneration=!1);const e=B.replaceRules;B.replaceRules=$(e),u.Yz.log("è®¾ç½®é¢æ¿","è®¾ç½®éªŒè¯å®Œæˆ")}catch(e){throw u.Yz.error("è®¾ç½®é¢æ¿","è®¾ç½®éªŒè¯å¤±è´¥",e),new Error("è®¾ç½®éªŒè¯å¤±è´¥")}finally{u.Yz.groupEnd()}},U=async()=>{u.Yz.group("åº”ç”¨è®¾ç½®");try{q(),G(),H(),Y(),u.Yz.setMode(B.debugMode),u.Yz.log("è®¾ç½®é¢æ¿","æ‰€æœ‰è®¾ç½®å·²åº”ç”¨")}catch(e){throw u.Yz.error("è®¾ç½®é¢æ¿","åº”ç”¨è®¾ç½®æ—¶å‡ºé”™",e),e}finally{u.Yz.groupEnd()}},q=()=>{let e=B.theme;"auto"===B.theme&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-theme",e),u.Yz.log("è®¾ç½®é¢æ¿",`ä¸»é¢˜å·²åº”ç”¨: ${e}`)},G=()=>{const e=B.uiScale/100;document.documentElement.style.setProperty("--ui-scale",e.toString()),u.Yz.log("è®¾ç½®é¢æ¿",`UIç¼©æ”¾å·²åº”ç”¨: ${B.uiScale}%`)},H=()=>{const e=`${B.fontSize}px`;document.documentElement.style.setProperty("--base-font-size",e),u.Yz.log("è®¾ç½®é¢æ¿",`å­—ä½“å¤§å°å·²åº”ç”¨: ${e}`)},Y=()=>{const e=B.fastAnimations?.12:.2;document.documentElement.style.setProperty("--transition-fast",`all ${e}s ease-in-out`),u.Yz.log("è®¾ç½®é¢æ¿",`åŠ¨ç”»é€Ÿåº¦å·²åº”ç”¨: ${e}s`)},W=()=>{y.showRetryDialog({title:"é‡ç½®è®¾ç½®",message:"ç¡®å®šè¦é‡ç½®æ‰€æœ‰è®¾ç½®ä¸ºé»˜è®¤å€¼å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰è‡ªå®šä¹‰é…ç½®ã€‚",confirmText:"ç¡®è®¤é‡ç½®",cancelText:"å–æ¶ˆ",onConfirm:()=>{u.Yz.log("è®¾ç½®é¢æ¿","å¼€å§‹é‡ç½®è®¾ç½®"),Object.assign(B,{theme:"auto",uiScale:100,fontSize:16,fastAnimations:!1,splitResponseGeneration:!1,debugMode:!1,consoleDebug:!1,performanceMonitor:!1,questSystemType:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",questSystemPrompt:""}),F(),d.o.info("è®¾ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼")},onCancel:()=>{}})},X=async()=>{y.showRetryDialog({title:"æ¸…ç†ç¼“å­˜",message:"ç¡®å®šè¦æ¸…ç†ç¼“å­˜å—ï¼Ÿè¿™å°†åˆ é™¤ä¸´æ—¶æ•°æ®ä½†ä¸ä¼šå½±å“å­˜æ¡£ã€‚",confirmText:"ç¡®è®¤æ¸…ç†",cancelText:"å–æ¶ˆ",onConfirm:async()=>{u.Yz.log("è®¾ç½®é¢æ¿","å¼€å§‹æ¸…ç†ç¼“å­˜");try{const e=[];for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&(n.startsWith("dad_cache_")||n.startsWith("temp_")||n.startsWith("debug_")||n.includes("_temp"))&&e.push(n)}e.forEach(e=>localStorage.removeItem(e)),sessionStorage.clear(),u.Yz.log("è®¾ç½®é¢æ¿",`ç¼“å­˜æ¸…ç†å®Œæˆï¼Œå…±æ¸…ç† ${e.length} é¡¹æ•°æ®`),d.o.success(`å·²æ¸…ç† ${e.length} é¡¹ç¼“å­˜æ•°æ®`)}catch(e){u.Yz.error("è®¾ç½®é¢æ¿","æ¸…ç†ç¼“å­˜å¤±è´¥",e),d.o.error("æ¸…ç†ç¼“å­˜å¤±è´¥")}},onCancel:()=>{}})},J=()=>{u.Yz.log("è®¾ç½®é¢æ¿","å¼€å§‹å¯¼å‡ºè®¾ç½®");try{const e={settings:B,exportInfo:{timestamp:(new Date).toISOString(),version:"3.7.4",userAgent:navigator.userAgent,gameVersion:"ä»™é€” v3.7.4"}},t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(n);const r=(new Date).toISOString().split("T")[0];a.download=`ä»™é€”-è®¾ç½®å¤‡ä»½-${r}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href),u.Yz.log("è®¾ç½®é¢æ¿","è®¾ç½®å¯¼å‡ºæˆåŠŸ"),d.o.success("è®¾ç½®å·²å¯¼å‡º")}catch(e){u.Yz.error("è®¾ç½®é¢æ¿","å¯¼å‡ºè®¾ç½®å¤±è´¥",e),d.o.error("å¯¼å‡ºè®¾ç½®å¤±è´¥")}},K=()=>{u.Yz.log("è®¾ç½®é¢æ¿","å¼€å§‹å¯¼å…¥è®¾ç½®");const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{const t=e.target.files?.[0];if(t)try{const e=await t.text(),n=JSON.parse(e);if(!n.settings)throw new Error("æ— æ•ˆçš„è®¾ç½®æ–‡ä»¶æ ¼å¼");{const e={...B,...n.settings};Object.assign(B,e),await F(),u.Yz.log("è®¾ç½®é¢æ¿","è®¾ç½®å¯¼å…¥æˆåŠŸ",n),d.o.success("è®¾ç½®å¯¼å…¥æˆåŠŸå¹¶å·²åº”ç”¨")}}catch(e){u.Yz.error("è®¾ç½®é¢æ¿","å¯¼å…¥è®¾ç½®å¤±è´¥",e),d.o.error("å¯¼å…¥è®¾ç½®å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼")}},e.click()},Q=()=>{P.value=!0};return(0,ce.useRouter)(),(0,a.onMounted)(()=>{u.Yz.log("è®¾ç½®é¢æ¿","ç»„ä»¶å·²åŠ è½½"),(async()=>{u.Yz.timeStart("åŠ è½½è®¾ç½®");try{const e=localStorage.getItem("dad_game_settings");if(e){const t=JSON.parse(e);Object.assign(B,t),u.Yz.log("è®¾ç½®é¢æ¿","è®¾ç½®åŠ è½½æˆåŠŸ",t)}else u.Yz.log("è®¾ç½®é¢æ¿","ä½¿ç”¨é»˜è®¤è®¾ç½®");const t=p.aiService.getConfig();Object.assign(w,t),y.useStreaming=!1!==w.streaming,w.streaming=y.useStreaming,x&&(w.mode="tavern"),u.Yz.log("è®¾ç½®é¢æ¿","AIé…ç½®åŠ è½½æˆåŠŸ",t);const n=localStorage.getItem("ai_available_models");if(n)try{const e=JSON.parse(n);Array.isArray(e)&&e.length>0&&(_.value=e,u.Yz.log("è®¾ç½®é¢æ¿",`å·²åŠ è½½ä¿å­˜çš„æ¨¡å‹åˆ—è¡¨: ${e.length} ä¸ª`))}catch(e){u.Yz.warn("è®¾ç½®é¢æ¿","è§£æä¿å­˜çš„æ¨¡å‹åˆ—è¡¨å¤±è´¥")}t.customAPI?.model&&!_.value.includes(t.customAPI.model)&&(_.value=[t.customAPI.model,..._.value],u.Yz.log("è®¾ç½®é¢æ¿",`å·²å°†ä¿å­˜çš„æ¨¡å‹ ${t.customAPI.model} æ·»åŠ åˆ°å¯é€‰åˆ—è¡¨`));try{const e=!!v.rootState.å½“å‰æ¿€æ´»å­˜æ¡£&&!!v.activeSaveSlot;if(b.isGameLoaded&&e&&b.questSystem?.é…ç½®){const e=b.questSystem.é…ç½®;B.questSystemType=e.ç³»ç»Ÿä»»åŠ¡ç±»å‹,B.questSystemPrompt=e.ç³»ç»Ÿä»»åŠ¡æç¤ºè¯||"",u.Yz.log("è®¾ç½®é¢æ¿","å·²ä»å­˜æ¡£è¯»å–ä»»åŠ¡ç³»ç»Ÿé…ç½®",e)}}catch{u.Yz.log("è®¾ç½®é¢æ¿","å½“å‰æ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£ï¼Œä½¿ç”¨localStorageä¸­çš„è®¾ç½®")}}catch(e){u.Yz.error("è®¾ç½®é¢æ¿","åŠ è½½è®¾ç½®å¤±è´¥",e),d.o.error("åŠ è½½è®¾ç½®å¤±è´¥ï¼Œå°†ä½¿ç”¨é»˜è®¤è®¾ç½®")}finally{u.Yz.timeEnd("åŠ è½½è®¾ç½®")}})(),(()=>{const e=f.vectorMemoryService.getConfig();N.value=e.enabled,S.value=e.maxRetrieveCount})()}),(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",de,[(0,a.createCommentVNode)(" å¤´éƒ¨ "),(0,a.createElementVNode)("div",ue,[(0,a.createElementVNode)("div",me,[n[28]||(n[28]=(0,a.createElementVNode)("div",{class:"header-icon"},"âš™ï¸",-1)),(0,a.createElementVNode)("div",pe,[(0,a.createElementVNode)("h3",fe,(0,a.toDisplayString)((0,a.unref)(t)("æ¸¸æˆè®¾ç½®")),1),(0,a.createElementVNode)("span",ge,(0,a.toDisplayString)((0,a.unref)(t)("è‡ªå®šä¹‰æ‚¨çš„æ¸¸æˆä½“éªŒ")),1)])]),(0,a.createElementVNode)("div",he,[(0,a.createElementVNode)("button",{class:"action-btn",onClick:W},[(0,a.createVNode)((0,a.unref)(r.A),{size:16}),(0,a.createElementVNode)("span",ve,(0,a.toDisplayString)((0,a.unref)(t)("é‡ç½®")),1)]),(0,a.createElementVNode)("button",{class:"action-btn primary",onClick:F},[(0,a.createVNode)((0,a.unref)(o.A),{size:16}),(0,a.createElementVNode)("span",be,(0,a.toDisplayString)((0,a.unref)(t)("ä¿å­˜")),1)])])]),(0,a.createCommentVNode)(" è®¾ç½®å†…å®¹ "),(0,a.createElementVNode)("div",ye,[(0,a.createCommentVNode)(" æ˜¾ç¤ºè®¾ç½® "),(0,a.createElementVNode)("div",xe,[(0,a.createElementVNode)("div",ke,[(0,a.createElementVNode)("h4",we,"ğŸ¨ "+(0,a.toDisplayString)((0,a.unref)(t)("æ˜¾ç¤ºè®¾ç½®")),1)]),(0,a.createElementVNode)("div",Ee,[(0,a.createElementVNode)("div",Ne,[(0,a.createElementVNode)("div",Se,[(0,a.createElementVNode)("label",Ve,(0,a.toDisplayString)((0,a.unref)(t)("è¯­è¨€è®¾ç½®")),1),(0,a.createElementVNode)("span",_e,(0,a.toDisplayString)((0,a.unref)(t)("é€‰æ‹©ç•Œé¢è¯­è¨€")),1)]),(0,a.createElementVNode)("div",Ce,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":n[0]||(n[0]=e=>(0,a.isRef)(h)?h.value=e:null),class:"setting-select",onChange:k},n[29]||(n[29]=[(0,a.createElementVNode)("option",{value:"zh"},"ä¸­æ–‡",-1),(0,a.createElementVNode)("option",{value:"en"},"English",-1)]),544),[[a.vModelSelect,(0,a.unref)(h)]])])]),(0,a.createElementVNode)("div",Ae,[(0,a.createElementVNode)("div",De,[(0,a.createElementVNode)("label",Te,(0,a.toDisplayString)((0,a.unref)(t)("ä¸»é¢˜æ¨¡å¼")),1),(0,a.createElementVNode)("span",Be,(0,a.toDisplayString)((0,a.unref)(t)("é€‰æ‹©æ˜äº®æˆ–æš—é»‘ä¸»é¢˜")),1)]),(0,a.createElementVNode)("div",Ie,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":n[1]||(n[1]=e=>B.theme=e),class:"setting-select",onChange:L},[(0,a.createElementVNode)("option",ze,(0,a.toDisplayString)((0,a.unref)(t)("æ˜äº®")),1),(0,a.createElementVNode)("option",Me,(0,a.toDisplayString)((0,a.unref)(t)("æš—é»‘")),1),(0,a.createElementVNode)("option",Pe,(0,a.toDisplayString)((0,a.unref)(t)("è·Ÿéšç³»ç»Ÿ")),1)],544),[[a.vModelSelect,B.theme]])])]),(0,a.createElementVNode)("div",Re,[(0,a.createElementVNode)("div",$e,[(0,a.createElementVNode)("label",Oe,(0,a.toDisplayString)((0,a.unref)(t)("ç•Œé¢ç¼©æ”¾")),1),(0,a.createElementVNode)("span",Le,(0,a.toDisplayString)((0,a.unref)(t)("è°ƒæ•´UIç•Œé¢å¤§å°")),1)]),(0,a.createElementVNode)("div",Fe,[(0,a.createElementVNode)("div",je,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"range","onUpdate:modelValue":n[2]||(n[2]=e=>B.uiScale=e),min:"80",max:"120",step:"5",class:"setting-range",onInput:G},null,544),[[a.vModelText,B.uiScale,void 0,{number:!0}]]),(0,a.createElementVNode)("span",Ue,(0,a.toDisplayString)(B.uiScale)+"%",1)])])]),(0,a.createElementVNode)("div",qe,[(0,a.createElementVNode)("div",Ge,[(0,a.createElementVNode)("label",He,(0,a.toDisplayString)((0,a.unref)(t)("æ–‡å­—å¤§å°")),1),(0,a.createElementVNode)("span",Ye,(0,a.toDisplayString)((0,a.unref)(t)("è°ƒæ•´æ¸¸æˆæ–‡å­—æ˜¾ç¤ºå¤§å°ï¼ˆåƒç´ ï¼‰")),1)]),(0,a.createElementVNode)("div",We,[(0,a.createElementVNode)("div",Xe,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"range","onUpdate:modelValue":n[3]||(n[3]=e=>B.fontSize=e),min:"12",max:"24",step:"1",class:"setting-range",onInput:H},null,544),[[a.vModelText,B.fontSize,void 0,{number:!0}]]),(0,a.createElementVNode)("span",Je,(0,a.toDisplayString)(B.fontSize)+"px",1)])])]),(0,a.createElementVNode)("div",Ke,[(0,a.createElementVNode)("div",Qe,[(0,a.createElementVNode)("label",Ze,(0,a.toDisplayString)((0,a.unref)(t)("å¿«é€ŸåŠ¨ç”»")),1),(0,a.createElementVNode)("span",et,(0,a.toDisplayString)((0,a.unref)(t)("åŠ é€Ÿç•Œé¢åŠ¨ç”»å’Œè¿‡æ¸¡æ•ˆæœ")),1)]),(0,a.createElementVNode)("div",tt,[(0,a.createElementVNode)("label",nt,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[4]||(n[4]=e=>B.fastAnimations=e),onChange:n[5]||(n[5]=e=>{Y(),L()})},null,544),[[a.vModelCheckbox,B.fastAnimations]]),n[30]||(n[30]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])])])]),(0,a.createCommentVNode)(" æ¸¸æˆåŠŸèƒ½ "),(0,a.createElementVNode)("div",at,[(0,a.createElementVNode)("div",rt,[(0,a.createElementVNode)("h4",ot,"ğŸ® "+(0,a.toDisplayString)((0,a.unref)(t)("æ¸¸æˆåŠŸèƒ½")),1)]),(0,a.createElementVNode)("div",it,[(0,a.createCommentVNode)(" é“å·ä¿®æ”¹ "),D.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",st,[(0,a.createElementVNode)("div",lt,[(0,a.createElementVNode)("label",ct,(0,a.toDisplayString)((0,a.unref)(t)("ä¿®æ”¹é“å·")),1),(0,a.createElementVNode)("span",dt,(0,a.toDisplayString)((0,a.unref)(t)("ä¿®æ”¹å½“å‰è§’è‰²çš„åå­—")),1)]),(0,a.createElementVNode)("div",ut,[(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":n[6]||(n[6]=e=>A.value=e),class:"form-input-inline",placeholder:D.value,style:{flex:"1"}},null,8,mt),[[a.vModelText,A.value]]),(0,a.createElementVNode)("button",{class:"utility-btn primary",onClick:T,disabled:!A.value||A.value===D.value},[(0,a.createVNode)((0,a.unref)(o.A),{size:16}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)((0,a.unref)(t)("ç¡®è®¤")),1)],8,pt)])])):(0,a.createCommentVNode)("v-if",!0),(0,a.createCommentVNode)(" ä»»åŠ¡ç³»ç»Ÿé…ç½® "),(0,a.createElementVNode)("div",ft,[(0,a.createElementVNode)("div",gt,[(0,a.createElementVNode)("label",ht,(0,a.toDisplayString)((0,a.unref)(t)("ç³»ç»Ÿä»»åŠ¡ç±»å‹")),1),(0,a.createElementVNode)("span",vt,(0,a.toDisplayString)((0,a.unref)(t)("é€‰æ‹©AIç”Ÿæˆä»»åŠ¡çš„é£æ ¼ç±»å‹")),1)]),(0,a.createElementVNode)("div",bt,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":n[7]||(n[7]=e=>B.questSystemType=e),class:"setting-select"},[(0,a.createElementVNode)("option",yt,(0,a.toDisplayString)((0,a.unref)(t)("ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ")),1),(0,a.createElementVNode)("option",xt,(0,a.toDisplayString)((0,a.unref)(t)("é“ä¾£å…»æˆç³»ç»Ÿ")),1),(0,a.createElementVNode)("option",kt,(0,a.toDisplayString)((0,a.unref)(t)("å®—é—¨å‘å±•ç³»ç»Ÿ")),1),(0,a.createElementVNode)("option",wt,(0,a.toDisplayString)((0,a.unref)(t)("æ¢ç´¢å†’é™©ç³»ç»Ÿ")),1),(0,a.createElementVNode)("option",Et,(0,a.toDisplayString)((0,a.unref)(t)("æˆ˜æ–—æŒ‘æˆ˜ç³»ç»Ÿ")),1),(0,a.createElementVNode)("option",Nt,(0,a.toDisplayString)((0,a.unref)(t)("èµ„æºæ”¶é›†ç³»ç»Ÿ")),1)],512),[[a.vModelSelect,B.questSystemType]])])]),(0,a.createElementVNode)("div",St,[(0,a.createElementVNode)("div",Vt,[(0,a.createElementVNode)("label",_t,(0,a.toDisplayString)((0,a.unref)(t)("è‡ªå®šä¹‰ä»»åŠ¡æç¤ºè¯")),1),(0,a.createElementVNode)("span",Ct,(0,a.toDisplayString)((0,a.unref)(t)("ä¸ºAIä»»åŠ¡ç”Ÿæˆæ·»åŠ è‡ªå®šä¹‰æŒ‡ä»¤ï¼ˆå¯é€‰ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤ï¼‰")),1)]),(0,a.createElementVNode)("div",At,[(0,a.withDirectives)((0,a.createElementVNode)("textarea",{"onUpdate:modelValue":n[8]||(n[8]=e=>B.questSystemPrompt=e),class:"setting-textarea",placeholder:(0,a.unref)(t)("ä¾‹å¦‚ï¼šç”Ÿæˆæ›´å¤šæˆ˜æ–—ç±»ä»»åŠ¡ï¼Œå¥–åŠ±åå‘çµçŸ³..."),rows:"3"},null,8,Dt),[[a.vModelText,B.questSystemPrompt]])])]),(0,a.createElementVNode)("div",Tt,[(0,a.createElementVNode)("div",Bt,[(0,a.createElementVNode)("label",It,(0,a.toDisplayString)((0,a.unref)(t)("è¡ŒåŠ¨é€‰é¡¹")),1),(0,a.createElementVNode)("span",zt,(0,a.toDisplayString)((0,a.unref)(t)("AIç”Ÿæˆå¯é€‰çš„è¡ŒåŠ¨å»ºè®®")),1)]),(0,a.createElementVNode)("div",Mt,[(0,a.createElementVNode)("label",Pt,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[9]||(n[9]=e=>(0,a.unref)(y).enableActionOptions=e)},null,512),[[a.vModelCheckbox,(0,a.unref)(y).enableActionOptions]]),n[31]||(n[31]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),(0,a.createElementVNode)("div",Rt,[(0,a.createElementVNode)("div",$t,[(0,a.createElementVNode)("label",Ot,(0,a.toDisplayString)((0,a.unref)(t)("è‡ªå®šä¹‰è¡ŒåŠ¨é€‰é¡¹æç¤ºè¯")),1),(0,a.createElementVNode)("span",Lt,(0,a.toDisplayString)((0,a.unref)(t)("æŒ‡å¯¼AIç”Ÿæˆç‰¹å®šé£æ ¼çš„è¡ŒåŠ¨é€‰é¡¹ï¼ˆå¯é€‰ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤ï¼‰")),1)]),(0,a.createElementVNode)("div",Ft,[(0,a.withDirectives)((0,a.createElementVNode)("textarea",{"onUpdate:modelValue":n[10]||(n[10]=e=>(0,a.unref)(y).actionOptionsPrompt=e),class:"setting-textarea",placeholder:(0,a.unref)(t)("ä¾‹å¦‚ï¼šå¤šç”Ÿæˆä¿®ç‚¼å’Œæ¢ç´¢ç±»é€‰é¡¹ï¼Œå‡å°‘æˆ˜æ–—é€‰é¡¹..."),rows:"3"},null,8,jt),[[a.vModelText,(0,a.unref)(y).actionOptionsPrompt]])])])])]),(0,a.createCommentVNode)(" AIæœåŠ¡é…ç½® "),(0,a.createElementVNode)("div",Ut,[(0,a.createElementVNode)("div",qt,[(0,a.createElementVNode)("h4",Gt,"ğŸ¤– "+(0,a.toDisplayString)((0,a.unref)(t)("AIæœåŠ¡é…ç½®")),1)]),(0,a.createElementVNode)("div",Ht,[(0,a.unref)(x)?((0,a.openBlock)(),(0,a.createElementBlock)("div",Yt,[(0,a.createElementVNode)("div",Wt,[(0,a.createElementVNode)("label",Xt,(0,a.toDisplayString)((0,a.unref)(t)("AIæ¨¡å¼")),1),n[32]||(n[32]=(0,a.createElementVNode)("span",{class:"setting-desc"},"å½“å‰ä¸ºé…’é¦†ç¯å¢ƒï¼šé»˜è®¤ä½¿ç”¨é…’é¦†APIã€‚éé…’é¦†ç¯å¢ƒæ‰éœ€è¦é…ç½®è‡ªå®šä¹‰APIã€‚",-1))])])):(0,a.createCommentVNode)("v-if",!0),(0,a.unref)(x)?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createElementVNode)("div",Jt,[(0,a.createElementVNode)("div",Kt,[(0,a.createElementVNode)("label",Qt,(0,a.toDisplayString)((0,a.unref)(t)("ğŸ” å¯ç”¨æˆäººå†…å®¹ï¼ˆç§å¯†ä¿¡æ¯ï¼‰")),1),(0,a.createElementVNode)("span",Zt,(0,a.toDisplayString)((0,a.unref)(t)("ç”Ÿæˆå’Œæ˜¾ç¤ºNPCçš„ç§å¯†ä¿¡æ¯æ¨¡å—ï¼ˆåŒ…å«æˆäººå‘å†…å®¹ï¼Œé»˜è®¤å¼€å¯ï¼‰")),1)]),(0,a.createElementVNode)("div",en,[(0,a.createElementVNode)("label",tn,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[11]||(n[11]=e=>B.enableNsfwMode=e)},null,512),[[a.vModelCheckbox,B.enableNsfwMode]]),n[33]||(n[33]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),B.enableNsfwMode?((0,a.openBlock)(),(0,a.createElementBlock)("div",nn,[(0,a.createElementVNode)("div",an,[(0,a.createElementVNode)("label",rn,(0,a.toDisplayString)((0,a.unref)(t)("ğŸ‘¥ ç§å¯†ä¿¡æ¯ç”ŸæˆèŒƒå›´")),1),(0,a.createElementVNode)("span",on,(0,a.toDisplayString)((0,a.unref)(t)("é€‰æ‹©ä¸ºå“ªäº›æ€§åˆ«çš„NPCç”Ÿæˆç§å¯†ä¿¡æ¯")),1)]),(0,a.createElementVNode)("div",sn,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":n[12]||(n[12]=e=>B.nsfwGenderFilter=e),class:"setting-select"},[(0,a.createElementVNode)("option",ln,(0,a.toDisplayString)((0,a.unref)(t)("ä»…å¥³æ€§")),1),(0,a.createElementVNode)("option",cn,(0,a.toDisplayString)((0,a.unref)(t)("ä»…ç”·æ€§")),1),(0,a.createElementVNode)("option",dn,(0,a.toDisplayString)((0,a.unref)(t)("æ‰€æœ‰æ€§åˆ«")),1)],512),[[a.vModelSelect,B.nsfwGenderFilter]])])])):(0,a.createCommentVNode)("v-if",!0)],64)):(0,a.createCommentVNode)("v-if",!0),(0,a.unref)(x)?(0,a.createCommentVNode)("v-if",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",un,[(0,a.createElementVNode)("div",mn,[(0,a.createElementVNode)("label",pn,(0,a.toDisplayString)((0,a.unref)(t)("APIé…ç½®ç®¡ç†")),1),(0,a.createElementVNode)("span",fn,(0,a.toDisplayString)((0,a.unref)(t)("é…ç½®å¤šä¸ªAPIå’ŒåŠŸèƒ½åˆ†é…")),1)]),(0,a.createElementVNode)("div",gn,[(0,a.createElementVNode)("button",{class:"utility-btn primary",onClick:Q},[(0,a.createVNode)((0,a.unref)(i.A),{size:16}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)((0,a.unref)(t)("æ‰“å¼€APIç®¡ç†")),1)])])])),(0,a.createCommentVNode)(" é€šç”¨AIè®¾ç½® "),(0,a.createElementVNode)("div",hn,[(0,a.createElementVNode)("div",vn,[(0,a.createElementVNode)("label",bn,(0,a.toDisplayString)((0,a.unref)(t)("æµå¼ä¼ è¾“")),1),(0,a.createElementVNode)("span",yn,(0,a.toDisplayString)((0,a.unref)(t)("å®æ—¶æ˜¾ç¤ºAIç”Ÿæˆå†…å®¹")),1)]),(0,a.createElementVNode)("div",xn,[(0,a.createElementVNode)("label",kn,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[13]||(n[13]=e=>E.value=e)},null,512),[[a.vModelCheckbox,E.value]]),n[34]||(n[34]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),(0,a.createElementVNode)("div",wn,[(0,a.createElementVNode)("div",En,[(0,a.createElementVNode)("label",Nn,(0,a.toDisplayString)((0,a.unref)(t)("åˆ†æ­¥ç”Ÿæˆ")),1),(0,a.createElementVNode)("span",Sn,(0,a.toDisplayString)((0,a.unref)(t)("ä¸€æ¬¡ç”Ÿæˆåˆ†ä¸¤æ­¥ï¼šç¬¬1æ­¥ï¼ˆå¯æµå¼ï¼‰åªå‡ºæ­£æ–‡ï¼›ç¬¬2æ­¥ï¼ˆéæµå¼ï¼‰åªå‡ºè®°å¿†/æŒ‡ä»¤/è¡ŒåŠ¨é€‰é¡¹ï¼ˆä¼šå¤šä¸€æ¬¡APIè°ƒç”¨ï¼›ä¸éœ€è¦thinkingï¼‰")),1)]),(0,a.createElementVNode)("div",Vn,[(0,a.createElementVNode)("label",_n,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[14]||(n[14]=e=>B.splitResponseGeneration=e),onChange:L},null,544),[[a.vModelCheckbox,B.splitResponseGeneration]]),n[35]||(n[35]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),(0,a.createElementVNode)("div",Cn,[(0,a.createElementVNode)("div",An,[(0,a.createElementVNode)("label",Dn,(0,a.toDisplayString)((0,a.unref)(t)("è®°å¿†æ€»ç»“æ¨¡å¼")),1),(0,a.createElementVNode)("span",Tn,(0,a.toDisplayString)((0,a.unref)(t)("Rawæ¨¡å¼æ›´å‡†ç¡®ï¼Œæ ‡å‡†æ¨¡å¼åŒ…å«é¢„è®¾")),1)]),(0,a.createElementVNode)("div",Bn,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":n[15]||(n[15]=e=>w.memorySummaryMode=e),class:"setting-select"},[(0,a.createElementVNode)("option",In,(0,a.toDisplayString)((0,a.unref)(t)("Rawæ¨¡å¼ï¼ˆæ¨èï¼‰")),1),(0,a.createElementVNode)("option",zn,(0,a.toDisplayString)((0,a.unref)(t)("æ ‡å‡†æ¨¡å¼")),1)],512),[[a.vModelSelect,w.memorySummaryMode]])])]),(0,a.createElementVNode)("div",Mn,[(0,a.createElementVNode)("div",Pn,[(0,a.createElementVNode)("label",Rn,(0,a.toDisplayString)((0,a.unref)(t)("å‘é‡è®°å¿†æ£€ç´¢")),1),(0,a.createElementVNode)("span",$n,(0,a.toDisplayString)((0,a.unref)(t)("å¯ç”¨åé•¿æœŸè®°å¿†å°†æŒ‰ç›¸å…³æ€§æ£€ç´¢ï¼Œè€Œéå…¨é‡å‘é€ï¼ˆå‡å°‘tokenæ¶ˆè€—ï¼‰")),1)]),(0,a.createElementVNode)("div",On,[(0,a.createElementVNode)("label",Ln,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[16]||(n[16]=e=>N.value=e),onChange:V},null,544),[[a.vModelCheckbox,N.value]]),n[36]||(n[36]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),N.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",Fn,[(0,a.createElementVNode)("div",jn,[(0,a.createElementVNode)("label",Un,(0,a.toDisplayString)((0,a.unref)(t)("æ£€ç´¢æ•°é‡")),1),(0,a.createElementVNode)("span",qn,(0,a.toDisplayString)((0,a.unref)(t)("æ¯æ¬¡æœ€å¤šæ£€ç´¢çš„ç›¸å…³è®°å¿†æ¡æ•°")),1)]),(0,a.createElementVNode)("div",Gn,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":n[17]||(n[17]=e=>S.value=e),onChange:V,class:"setting-select"},n[37]||(n[37]=[(0,a.createElementVNode)("option",{value:5},"5æ¡",-1),(0,a.createElementVNode)("option",{value:10},"10æ¡ï¼ˆæ¨èï¼‰",-1),(0,a.createElementVNode)("option",{value:15},"15æ¡",-1),(0,a.createElementVNode)("option",{value:20},"20æ¡",-1)]),544),[[a.vModelSelect,S.value,void 0,{number:!0}]])])])):(0,a.createCommentVNode)("v-if",!0),(0,a.createElementVNode)("div",Hn,[(0,a.createElementVNode)("div",Yn,[(0,a.createElementVNode)("label",Wn,(0,a.toDisplayString)((0,a.unref)(t)("å¼€å±€ç”Ÿæˆæ¨¡å¼")),1),(0,a.createElementVNode)("span",Xn,(0,a.toDisplayString)((0,a.unref)(t)("è§’è‰²åˆå§‹åŒ–ä½¿ç”¨çš„ç”Ÿæˆæ¨¡å¼")),1)]),(0,a.createElementVNode)("div",Jn,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":n[18]||(n[18]=e=>w.initMode=e),class:"setting-select"},[(0,a.createElementVNode)("option",Kn,(0,a.toDisplayString)((0,a.unref)(t)("æ ‡å‡†æ¨¡å¼")),1),(0,a.createElementVNode)("option",Qn,(0,a.toDisplayString)((0,a.unref)(t)("Rawæ¨¡å¼")),1)],512),[[a.vModelSelect,w.initMode]])])]),(0,a.createElementVNode)("div",Zn,[(0,a.createElementVNode)("div",ea,[(0,a.createElementVNode)("label",ta,(0,a.toDisplayString)((0,a.unref)(t)("ä½¿ç”¨ç³»ç»ŸCoT")),1),(0,a.createElementVNode)("span",na,(0,a.toDisplayString)((0,a.unref)(t)("å¯ç”¨å†…ç½®æ€ç»´é“¾æç¤ºè¯ï¼ˆå…³é—­åä½¿ç”¨é¢„è®¾ä¸­çš„CoTï¼‰")),1)]),(0,a.createElementVNode)("div",aa,[(0,a.createElementVNode)("label",ra,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[19]||(n[19]=e=>(0,a.unref)(y).useSystemCot=e)},null,512),[[a.vModelCheckbox,(0,a.unref)(y).useSystemCot]]),n[38]||(n[38]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])])])]),(0,a.createCommentVNode)(" é«˜çº§è®¾ç½® "),(0,a.createElementVNode)("div",oa,[(0,a.createElementVNode)("div",ia,[(0,a.createElementVNode)("h4",sa,(0,a.toDisplayString)((0,a.unref)(t)("ğŸ”§ é«˜çº§è®¾ç½®")),1)]),(0,a.createElementVNode)("div",la,[(0,a.createElementVNode)("div",ca,[(0,a.createElementVNode)("div",da,[(0,a.createElementVNode)("label",ua,(0,a.toDisplayString)((0,a.unref)(t)("è°ƒè¯•æ¨¡å¼")),1),(0,a.createElementVNode)("span",ma,(0,a.toDisplayString)((0,a.unref)(t)("å¯ç”¨å¼€å‘è€…è°ƒè¯•ä¿¡æ¯å’Œè¯¦ç»†æ—¥å¿—")),1)]),(0,a.createElementVNode)("div",pa,[(0,a.createElementVNode)("label",fa,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[20]||(n[20]=e=>B.debugMode=e),onChange:L},null,544),[[a.vModelCheckbox,B.debugMode]]),n[39]||(n[39]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),B.debugMode?((0,a.openBlock)(),(0,a.createElementBlock)("div",ga,[(0,a.createElementVNode)("div",ha,[(0,a.createElementVNode)("label",va,(0,a.toDisplayString)((0,a.unref)(t)("æ§åˆ¶å°è°ƒè¯•")),1),(0,a.createElementVNode)("span",ba,(0,a.toDisplayString)((0,a.unref)(t)("åœ¨æµè§ˆå™¨æ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†è°ƒè¯•ä¿¡æ¯")),1)]),(0,a.createElementVNode)("div",ya,[(0,a.createElementVNode)("label",xa,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[21]||(n[21]=e=>B.consoleDebug=e),onChange:L},null,544),[[a.vModelCheckbox,B.consoleDebug]]),n[40]||(n[40]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])])):(0,a.createCommentVNode)("v-if",!0),B.debugMode?((0,a.openBlock)(),(0,a.createElementBlock)("div",ka,[(0,a.createElementVNode)("div",wa,[(0,a.createElementVNode)("label",Ea,(0,a.toDisplayString)((0,a.unref)(t)("æ€§èƒ½ç›‘æ§")),1),(0,a.createElementVNode)("span",Na,(0,a.toDisplayString)((0,a.unref)(t)("ç›‘æ§ç»„ä»¶æ€§èƒ½å’ŒåŠ è½½æ—¶é—´")),1)]),(0,a.createElementVNode)("div",Sa,[(0,a.createElementVNode)("label",Va,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":n[22]||(n[22]=e=>B.performanceMonitor=e),onChange:L},null,544),[[a.vModelCheckbox,B.performanceMonitor]]),n[41]||(n[41]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])])):(0,a.createCommentVNode)("v-if",!0),(0,a.createElementVNode)("div",_a,[(0,a.createElementVNode)("div",Ca,[(0,a.createElementVNode)("label",Aa,(0,a.toDisplayString)((0,a.unref)(t)("æ­£åˆ™æ›¿æ¢è§„åˆ™")),1),(0,a.createElementVNode)("span",Da,(0,a.toDisplayString)((0,a.unref)(t)("å¯¹AIè¾“å‡ºè¿›è¡Œæ›¿æ¢ï¼šæ­£åˆ™ / çº¯æ–‡æœ¬ï¼ˆç”¨äºæ ¼å¼ä¿®æ­£ã€å±è”½è¯æ›¿æ¢ç­‰ï¼‰")),1)]),(0,a.createElementVNode)("div",Ta,[(0,a.createElementVNode)("button",{class:"utility-btn",onClick:n[23]||(n[23]=e=>M.value=!0)},[(0,a.createTextVNode)((0,a.toDisplayString)((0,a.unref)(t)("ç¼–è¾‘è§„åˆ™"))+" ",1),R.value>0?((0,a.openBlock)(),(0,a.createElementBlock)("span",Ba,"("+(0,a.toDisplayString)(R.value)+")",1)):(0,a.createCommentVNode)("v-if",!0)])])]),(0,a.createVNode)(ae,{open:M.value,rules:B.replaceRules,onClose:n[24]||(n[24]=e=>M.value=!1),onSave:O},null,8,["open","rules"]),(0,a.createCommentVNode)(" APIç®¡ç†å¼¹çª— "),((0,a.openBlock)(),(0,a.createBlock)(a.Teleport,{to:"body"},[P.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"api-modal-overlay",onClick:n[27]||(n[27]=e=>P.value=!1)},[(0,a.createElementVNode)("div",{class:"api-modal-container",onClick:n[26]||(n[26]=(0,a.withModifiers)(()=>{},["stop"]))},[(0,a.createElementVNode)("div",Ia,[(0,a.createElementVNode)("h3",null,(0,a.toDisplayString)((0,a.unref)(t)("APIç®¡ç†")),1),(0,a.createElementVNode)("button",{class:"close-btn",onClick:n[25]||(n[25]=e=>P.value=!1)},"âœ•")]),(0,a.createElementVNode)("div",za,[(0,a.createVNode)(re.A)])])])):(0,a.createCommentVNode)("v-if",!0)])),(0,a.createElementVNode)("div",Ma,[(0,a.createElementVNode)("div",Pa,[(0,a.createElementVNode)("label",Ra,(0,a.toDisplayString)((0,a.unref)(t)("å¯¼å…¥è®¾ç½®")),1),(0,a.createElementVNode)("span",$a,(0,a.toDisplayString)((0,a.unref)(t)("ä»æ–‡ä»¶æ¢å¤è®¾ç½®é…ç½®")),1)]),(0,a.createElementVNode)("div",Oa,[(0,a.createElementVNode)("button",{class:"utility-btn",onClick:K},[(0,a.createVNode)((0,a.unref)(s.A),{size:16}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)((0,a.unref)(t)("å¯¼å…¥")),1)])])]),(0,a.createElementVNode)("div",La,[(0,a.createElementVNode)("div",Fa,[(0,a.createElementVNode)("label",ja,(0,a.toDisplayString)((0,a.unref)(t)("æ¸…ç†ç¼“å­˜")),1),(0,a.createElementVNode)("span",Ua,(0,a.toDisplayString)((0,a.unref)(t)("æ¸…é™¤æ¸¸æˆä¸´æ—¶æ•°æ®å’Œç¼“å­˜")),1)]),(0,a.createElementVNode)("div",qa,[(0,a.createElementVNode)("button",{class:"utility-btn",onClick:X},[(0,a.createVNode)((0,a.unref)(l.A),{size:16}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)((0,a.unref)(t)("æ¸…ç†")),1)])])]),(0,a.createElementVNode)("div",Ga,[(0,a.createElementVNode)("div",Ha,[(0,a.createElementVNode)("label",Ya,(0,a.toDisplayString)((0,a.unref)(t)("å¯¼å‡ºè®¾ç½®")),1),(0,a.createElementVNode)("span",Wa,(0,a.toDisplayString)((0,a.unref)(t)("å¤‡ä»½å½“å‰è®¾ç½®é…ç½®")),1)]),(0,a.createElementVNode)("div",Xa,[(0,a.createElementVNode)("button",{class:"utility-btn",onClick:J},[(0,a.createVNode)((0,a.unref)(c.A),{size:16}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)((0,a.unref)(t)("å¯¼å‡º")),1)])])])])])])]))}});var Ka=n(3111),Qa={};Qa.styleTagTransform=Z(),Qa.setAttributes=X(),Qa.insert=Y().bind(null,"head"),Qa.domAPI=G(),Qa.insertStyleElement=K(),U()(Ka.A,Qa),Ka.A&&Ka.A.locals&&Ka.A.locals;const Za=(0,ne.A)(Ja,[["__scopeId","data-v-7f64eab0"]])},3441:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])},3509:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.character-section[data-v-6cf48088] {\n  border-radius: 8px;\n  padding: 1rem;\n}\n.section-header[data-v-6cf48088] {\n  margin-bottom: 1rem;\n}\n.section-title[data-v-6cf48088] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.info-grid[data-v-6cf48088] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n  margin-bottom: 1rem;\n}\n.info-item[data-v-6cf48088] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n}\n.info-label[data-v-6cf48088] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.info-value[data-v-6cf48088] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.data-detail[data-v-6cf48088] {\n  margin-top: 1rem;\n  border-top: 1px solid var(--color-border);\n  padding-top: 1rem;\n}\n.detail-title[data-v-6cf48088] {\n  margin: 0 0 1rem 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  border-bottom: 1px solid var(--color-border);\n  padding-bottom: 0.5rem;\n}\n.code-pre[data-v-6cf48088] {\n  margin: 0;\n  padding: 0.75rem;\n  background: var(--color-code-bg);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  max-height: 60vh;\n  overflow: auto;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.85rem;\n  line-height: 1.5;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n.empty-state[data-v-6cf48088] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 3rem;\n  color: var(--color-text-secondary);\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 768px) {\n.code-pre[data-v-6cf48088] {\n    max-height: 50vh;\n    font-size: 0.8rem;\n    padding: 0.5rem;\n}\n.character-section[data-v-6cf48088] {\n    padding: 0.75rem;\n}\n.info-grid[data-v-6cf48088] {\n    grid-template-columns: 1fr;\n    gap: 0.75rem;\n}\n}\n@media (max-width: 480px) {\n.code-pre[data-v-6cf48088] {\n    max-height: 40vh;\n    font-size: 0.75rem;\n    padding: 0.4rem;\n}\n.character-section[data-v-6cf48088] {\n    padding: 0.5rem;\n}\n.empty-state[data-v-6cf48088] {\n    padding: 2rem;\n}\n}\n",""]);const s=i},3528:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},3628:(e,t,n)=>{"use strict";var a=n(8648),r=n(1064),o=n(7176);e.exports=a?function(e){return a(e)}:r?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return r(e)}:o?function(e){return o(e)}:null},3683:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.status-detail-card[data-v-6faa782a] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.6rem;\n  font-size: 0.8rem;\n}\n.card-header[data-v-6faa782a] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.4rem 0.65rem;\n  border-radius: 6px;\n  border: 1px solid;\n  align-self: flex-start;\n}\n.card-header.buff[data-v-6faa782a] {\n  background: rgba(16, 185, 129, 0.1);\n  border-color: rgba(16, 185, 129, 0.3);\n}\n.card-header.debuff[data-v-6faa782a] {\n  background: rgba(239, 68, 68, 0.1);\n  border-color: rgba(239, 68, 68, 0.3);\n}\n.type-icon[data-v-6faa782a] {\n  font-size: 1rem;\n  line-height: 1;\n}\n.type-text[data-v-6faa782a] {\n  font-size: 0.8rem;\n  font-weight: 600;\n}\n.card-header.buff .type-text[data-v-6faa782a] { color: #10b981;\n}\n.card-header.debuff .type-text[data-v-6faa782a] { color: #ef4444;\n}\n.card-body[data-v-6faa782a] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n.description[data-v-6faa782a] {\n  padding: 0.5rem 0.65rem;\n  background: var(--color-surface-light);\n  border-radius: 6px;\n  border-left: 2px solid;\n  line-height: 1.4;\n  color: var(--color-text);\n}\n.description.buff-border[data-v-6faa782a] { border-color: #10b981;\n}\n.description.debuff-border[data-v-6faa782a] { border-color: #ef4444;\n}\n.details-grid[data-v-6faa782a] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n.detail-item[data-v-6faa782a] {\n  padding: 0.65rem;\n  background: var(--color-surface);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n  gap: 0.35rem;\n}\n.item-label[data-v-6faa782a] {\n  font-size: 0.65rem;\n  color: var(--color-text-muted);\n  font-weight: 500;\n}\n.item-value[data-v-6faa782a] {\n  font-size: 0.85rem;\n  font-weight: 600;\n}\n.item-value.source[data-v-6faa782a] { color: var(--color-accent);\n}\n.item-value.duration[data-v-6faa782a] { color: var(--color-primary);\n}\n.item-value.time[data-v-6faa782a] { font-size: 0.75rem; font-weight: 500; color: var(--color-text);\n}\n.strength[data-v-6faa782a] {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  margin-bottom: 0.2rem;\n}\n.strength-text[data-v-6faa782a] { font-size: 0.9rem; font-weight: 700;\n}\n.strength-value[data-v-6faa782a] { font-size: 0.7rem; color: var(--color-text-secondary);\n}\n.strength-bar[data-v-6faa782a] {\n  height: 4px;\n  background: var(--color-surface-light);\n  border-radius: 2px;\n  overflow: hidden;\n}\n.bar-fill[data-v-6faa782a] {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n@media (max-width: 480px) {\n.status-detail-card[data-v-6faa782a] {\n    gap: 0.5rem;\n    font-size: 0.75rem;\n}\n.card-header[data-v-6faa782a] {\n    gap: 0.4rem;\n    padding: 0.3rem 0.5rem;\n    border-radius: 5px;\n}\n.type-icon[data-v-6faa782a] { font-size: 0.9rem;\n}\n.type-text[data-v-6faa782a] { font-size: 0.75rem;\n}\n.description[data-v-6faa782a] {\n    padding: 0.4rem 0.5rem;\n    font-size: 0.75rem;\n}\n.details-grid[data-v-6faa782a] {\n    grid-template-columns: 1fr;\n    gap: 0.4rem;\n}\n.detail-item[data-v-6faa782a] {\n    padding: 0.5rem;\n    gap: 0.25rem;\n}\n.item-label[data-v-6faa782a] { font-size: 0.6rem;\n}\n.item-value[data-v-6faa782a] { font-size: 0.8rem;\n}\n.item-value.time[data-v-6faa782a] { font-size: 0.7rem;\n}\n.strength[data-v-6faa782a] { margin-bottom: 0.1rem;\n}\n.strength-text[data-v-6faa782a] { font-size: 0.85rem;\n}\n.strength-value[data-v-6faa782a] { font-size: 0.65rem;\n}\n}\n",""]);const s=i},3708:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ete});var a=n(3992),r=n(4061),o=n(602);const i="videos",s=(0,o.P2)("video-cache-db",1,{upgrade(e){e.objectStoreNames.contains(i)||e.createObjectStore(i)}}),l={class:"video-background-container"},c=(0,r.defineComponent)({__name:"VideoBackground",props:{src:{default:"https://ddct.top/backgroundvedio.mp4"}},setup(e){const t=e,n=(0,r.ref)(),a=async e=>{if(!n.value)return void console.warn("[VideoBackground] videoå…ƒç´ æœªå‡†å¤‡å¥½");n.value.src.startsWith("blob:")&&(console.log(`[VideoBackground] é‡Šæ”¾æ—§çš„ Object URL: ${n.value.src}`),URL.revokeObjectURL(n.value.src));try{const t=await async function(e){try{const t=await s;return await t.get(i,e)}catch(t){return void console.error(`[videoCache] Error getting video for key ${e}:`,t)}}(e);if(t){console.log(`[VideoBackground] ä»IndexedDBåŠ è½½è§†é¢‘: ${e}`);const a=URL.createObjectURL(t);console.log(`[VideoBackground] åˆ›å»ºæ–°çš„ Object URL: ${a}`),n.value.src=a}else{console.log(`[VideoBackground] å°è¯•ä»ç½‘ç»œåŠ è½½è§†é¢‘: ${e}`);const t=await fetch(e);if(!t.ok)throw new Error(`ç½‘ç»œå“åº”é”™è¯¯: ${t.statusText}`);const a=await t.blob();await async function(e,t){try{const n=(await s).transaction(i,"readwrite");await n.store.put(t,e),await n.done}catch(t){throw console.error(`[videoCache] Error setting video for key ${e}:`,t),t}}(e,a),console.log(`[VideoBackground] è§†é¢‘å·²æˆåŠŸå­˜å…¥ç¼“å­˜: ${e}`);const r=URL.createObjectURL(a);console.log(`[VideoBackground] åˆ›å»ºæ–°çš„ Object URL: ${r}`),n.value.src=r}n.value.load()}catch(t){console.warn("[VideoBackground] åŠ è½½æˆ–ç¼“å­˜è§†é¢‘å¤±è´¥:",t),console.log("[VideoBackground] å¯èƒ½æ˜¯è·¨åŸŸï¼ˆCORSï¼‰é—®é¢˜ï¼Œæ— æ³•ç¼“å­˜ã€‚æ­£åœ¨å›é€€åˆ°ç›´æ¥æ’­æ”¾æ¨¡å¼..."),n.value.src=e,n.value.load()}const t=async()=>{try{await n.value.play(),console.log("[VideoBackground] è§†é¢‘æ’­æ”¾æˆåŠŸ")}catch{console.log("[VideoBackground] è‡ªåŠ¨æ’­æ”¾å¤±è´¥ï¼Œç­‰å¾…ç”¨æˆ·äº¤äº’");const e=async()=>{try{await n.value.play(),console.log("[VideoBackground] ç”¨æˆ·äº¤äº’åè§†é¢‘æ’­æ”¾æˆåŠŸ"),document.removeEventListener("click",e),document.removeEventListener("keydown",e),document.removeEventListener("touchstart",e)}catch(e){console.warn("[VideoBackground] å³ä½¿ç”¨æˆ·äº¤äº’åä»æ— æ³•æ’­æ”¾:",e)}};document.addEventListener("click",e,{once:!0}),document.addEventListener("keydown",e,{once:!0}),document.addEventListener("touchstart",e,{once:!0})}};n.value.readyState>=3?await t():n.value.addEventListener("canplay",t,{once:!0})};(0,r.onMounted)(async()=>{await a(t.src)}),(0,r.watch)(()=>t.src,async e=>{e&&await a(e)}),(0,r.onUnmounted)(()=>{n.value&&(n.value.pause(),n.value.src.startsWith("blob:")&&(console.log(`[VideoBackground] ç»„ä»¶å¸è½½ï¼Œé‡Šæ”¾ Object URL: ${n.value.src}`),URL.revokeObjectURL(n.value.src)))});const o=()=>{console.log("[VideoBackground] å¼€å§‹åŠ è½½è§†é¢‘")},c=()=>{console.log("[VideoBackground] è§†é¢‘å¯ä»¥æµç•…æ’­æ”¾")},d=e=>{console.error("[VideoBackground] è§†é¢‘æ’­æ”¾é”™è¯¯:",e)};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",l,[(0,r.createElementVNode)("video",{ref_key:"videoRef",ref:n,autoplay:"",muted:"",loop:"",playsinline:"",class:"video-background",onLoadstart:o,onCanplaythrough:c,onError:d},null,544),t[0]||(t[0]=(0,r.createElementVNode)("div",{class:"video-overlay"},null,-1))]))}});var d=n(5072),u=n.n(d),m=n(7825),p=n.n(m),f=n(7659),g=n.n(f),h=n(5056),v=n.n(h),b=n(540),y=n.n(b),x=n(1113),k=n.n(x),w=n(7094),E={};E.styleTagTransform=k(),E.setAttributes=v(),E.insert=g().bind(null,"head"),E.domAPI=p(),E.insertStyleElement=y(),u()(w.A,E),w.A&&w.A.locals&&w.A.locals;var N=n(6262);const S=(0,N.A)(c,[["__scopeId","data-v-39a20c5f"]]);var V=n(9596);const _=(0,V.A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),C=(0,V.A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),A=(0,V.A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),D=(0,V.A)("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var T=n(9173),B=n(8546),I=n(9333);const z={class:"mode-selection-container"},M={class:"selection-content"},P={class:"header-container"},R={class:"title-version-row"},$={class:"version-tag"},O={class:"gate-container"},L={class:"gate-icon"},F={class:"gate-title"},j={class:"gate-description"},U={class:"gate-detail"},q={class:"gate-icon"},G={class:"gate-title"},H={class:"gate-description"},Y={class:"gate-detail"},W={key:0,class:"coming-soon-badge"},X={class:"privacy-notice"},J={class:"footer-actions"},K={key:0,class:"start-actions-container"},Q=(0,r.defineComponent)({__name:"ModeSelection",emits:["start-creation","show-character-list","go-to-login"],setup(e,{emit:t}){const n=(0,r.ref)(null),a=(0,r.ref)((0,B.isBackendConfigured)()),o=t,i=(0,T.useUIStore)(),s=async e=>{"cloud"!==e||a.value?("cloud"===e&&localStorage.getItem("access_token")&&(await(0,I.verifyStoredToken)()||(localStorage.removeItem("access_token"),localStorage.removeItem("username"),console.log("[ModeSelection] Token æ— æ•ˆï¼Œå·²æ¸…é™¤"))),n.value===e?n.value=null:n.value=e):i.showRetryDialog({title:"è”æœºæœªå¯ç”¨",message:'æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œæ— æ³•ä½¿ç”¨è”æœºå…±ä¿®ä¸ç™»å½•åŠŸèƒ½ã€‚è¯·å…ˆé€‰æ‹©"å•æœºé—¯å…³"ã€‚',confirmText:"çŸ¥é“äº†",cancelText:"??",onConfirm:()=>{},onCancel:()=>{}})},l=async()=>{if(n.value){if("cloud"===n.value&&!await(0,I.verifyStoredToken)())return void i.showRetryDialog({title:"è¯·å…ˆç™»å½•",message:"è”æœºå…±ä¿®éœ€è¦å…ˆç™»å½•è´¦å·ï¼Œæ˜¯å¦å‰å¾€ç™»å½•ï¼Ÿ",confirmText:"å‰å¾€ç™»å½•",cancelText:"å–æ¶ˆ",onConfirm:()=>{o("go-to-login")},onCancel:()=>{}});o("start-creation",n.value)}},c=async()=>{o("show-character-list")};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",z,[(0,r.createVNode)(S),(0,r.createElementVNode)("div",M,[(0,r.createElementVNode)("div",P,[(0,r.createElementVNode)("div",R,[t[2]||(t[2]=(0,r.createElementVNode)("h1",{class:"main-title"},"ä»™ é€”",-1)),(0,r.createElementVNode)("span",$,"V"+(0,r.toDisplayString)("3.8")+" "+(0,r.toDisplayString)(e.$t("æ­£å¼ç‰ˆ")),1)]),t[4]||(t[4]=(0,r.createElementVNode)("p",{class:"sub-title"},"æœæ¸¸åŒ—æµ·æš®è‹æ¢§ï¼Œé†‰å§äº‘éœé£Ÿæœéœ²",-1)),(0,r.createCommentVNode)(" é…’é¦†ç¯å¢ƒæŒ‡ç¤ºå™¨ "),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["env-indicator",a.value?"backend":"offline"])},[t[3]||(t[3]=(0,r.createElementVNode)("span",{class:"env-dot"},null,-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(a.value?"åç«¯å·²è¿æ¥ Â· è”æœºå¯ç”¨":"æœªé…ç½®åç«¯ Â· è”æœº/åˆ›æ„å·¥åŠä¸å¯ç”¨"),1)],2)]),(0,r.createElementVNode)("div",O,[(0,r.createCommentVNode)(" Left Gate: Single Player "),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["gate-card",{selected:"single"===n.value}]),onClick:t[0]||(t[0]=e=>s("single"))},[(0,r.createElementVNode)("div",L,[(0,r.createVNode)((0,r.unref)(_),{size:44,"stroke-width":1.5})]),(0,r.createElementVNode)("h2",F,(0,r.toDisplayString)(e.$t("å•æœºé—¯å…³")),1),(0,r.createElementVNode)("p",j,(0,r.toDisplayString)(e.$t("é¿ä¸–æ¸…ä¿®Â·å¿ƒæ— æ— æ–§")),1),(0,r.createElementVNode)("p",U,[(0,r.createTextVNode)((0,r.toDisplayString)(e.$t("ç‹¬å±…æ´åºœï¼Œä¸“å¿ƒè‡´å¿—ç‚¼å°±å¤§é“æ ¹åŸº")),1),t[5]||(t[5]=(0,r.createElementVNode)("br",null,null,-1)),(0,r.createTextVNode)((0,r.toDisplayString)(e.$t("æ‰€æœ‰è¿›åº¦æœ¬åœ°å­˜å‚¨ï¼Œæ–­ç½‘äº¦å¯ä¿®è¡Œ")),1)])],2),(0,r.createCommentVNode)(" Right Gate: Multiplayer / Tavern "),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["gate-card",{selected:"cloud"===n.value,disabled:!a.value}]),onClick:t[1]||(t[1]=e=>s("cloud"))},[(0,r.createElementVNode)("div",q,[(0,r.createVNode)((0,r.unref)(C),{size:44,"stroke-width":1.5})]),(0,r.createElementVNode)("h2",G,(0,r.toDisplayString)(e.$t("è”æœºå…±ä¿®")),1),(0,r.createElementVNode)("p",H,(0,r.toDisplayString)(a.value?e.$t("åç«¯å·²è¿æ¥ï¼Œè¿›å…¥è”æœºå…±ä¿®"):e.$t("æœªé…ç½®åç«¯ï¼Œè”æœºæš‚ä¸å¯ç”¨")),1),(0,r.createElementVNode)("p",Y,(0,r.toDisplayString)(a.value?e.$t("è”æœºæ•°æ®ç”±åç«¯æƒå¨æ§åˆ¶ï¼Œé˜²æ­¢ä½œå¼Š"):e.$t("ç”±å¼€å‘è€…é…ç½®åç«¯åå¼€æ”¾")),1),a.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("span",W,(0,r.toDisplayString)(e.$t("æœªå¯ç”¨")),1))],2)]),(0,r.createCommentVNode)(" éšç§è¯´æ˜ "),(0,r.createElementVNode)("div",X,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("æœ¬è”æœºè°¨éµå¤©é“æ³•åˆ™ï¼šä¸å­˜å‚¨ä»»ä½•å¯¹è¯è®°å½•")),1),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("ä»…ä¿ç•™æ³•èº«å±æ€§ã€å¢ƒç•Œè¿›åº¦ç­‰ä¿®è¡Œè¦ç´ ï¼Œç¡®ä¿é“å‹éšç§æ¸…å‡€æ— æŸ“")),1)]),(0,r.createElementVNode)("div",J,[n.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",K,[(0,r.createElementVNode)("button",{class:"action-btn primary",onClick:l},[(0,r.createVNode)((0,r.unref)(A),{size:18}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("åˆå…¥ä»™é€”")),1)]),(0,r.createElementVNode)("button",{class:"action-btn",onClick:c},[(0,r.createVNode)((0,r.unref)(D),{size:18}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("ç»­å‰ä¸–å› ç¼˜")),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"scroll-btn",onClick:c},[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("ç»­å‰ä¸–å› ç¼˜")),1)]))])])]))}});var Z=n(1969),ee={};ee.styleTagTransform=k(),ee.setAttributes=v(),ee.insert=g().bind(null,"head"),ee.domAPI=p(),ee.insertStyleElement=y(),u()(Z.A,ee),Z.A&&Z.A.locals&&Z.A.locals;const te=(0,N.A)(Q,[["__scopeId","data-v-8882032c"]]);var ne=n(4270),ae=n(1211),re=n(876);const oe=["disabled","title"],ie={key:0,class:"sync-icon"},se={key:1,class:"sync-icon"},le={key:2,class:"sync-icon"},ce={class:"sync-text"},de=(0,r.defineComponent)({__name:"CloudDataSync",props:{size:{},variant:{}},emits:["syncCompleted","syncStarted"],setup(e,{emit:t}){const n=t,a=(0,ae.N)(),o=(0,T.useUIStore)(),{t:i}=(0,re.s)(),s=(0,r.ref)(!1),l=(0,r.ref)(!1),c=(0,r.computed)(()=>!o.isBackendConfiguredComputed);async function d(){if(s.value||l.value)return void(l.value&&ne.o.info(i("äº‘ç«¯æ•°æ®å·²è·å–ï¼Œæ— éœ€é‡å¤æ“ä½œ")));s.value=!0,n("syncStarted");const e="cloud-sync-toast";ne.o.loading(i("æ­£åœ¨è·å–äº‘ç«¯æ•°æ®..."),{id:e});try{const t=await a.fetchAllCloudData();t>0?(ne.o.success(i("åŒæ­¥æˆåŠŸï¼æ–°å¢ {0} é¡¹äº‘ç«¯æ•°æ®").replace("{0}",String(t)),{id:e}),l.value=!0):(ne.o.info(i("æ‰€æœ‰äº‘ç«¯æ•°æ®å·²æ˜¯æœ€æ–°"),{id:e}),l.value=!0),n("syncCompleted",{success:!0,newItemsCount:t,message:i("åŒæ­¥æˆåŠŸ")})}catch(t){console.error("[äº‘ç«¯åŒæ­¥ç»„ä»¶] åŒæ­¥äº‘ç«¯æ•°æ®å¤±è´¥:",t);const a=t instanceof Error?t.message:i("åŒæ­¥å¤±è´¥");ne.o.error(i("åŒæ­¥å¤±è´¥: {0}").replace("{0}",a),{id:e}),n("syncCompleted",{success:!1,newItemsCount:0,message:a})}finally{s.value=!1}}return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{onClick:d,class:(0,r.normalizeClass)(["cloud-sync-button",{synced:l.value,disabled:c.value}]),disabled:c.value||s.value,title:c.value?i("äº‘ç«¯åŠŸèƒ½æš‚æœªå¼€æ”¾"):s.value?i("æ­£åœ¨åŒæ­¥äº‘ç«¯æ•°æ®..."):l.value?i("äº‘ç«¯æ•°æ®å·²è·å–"):i("è·å–äº‘ç«¯æ•°æ®")},[s.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",ie,"â³")):l.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",se,"âœ…")):((0,r.openBlock)(),(0,r.createElementBlock)("span",le,"â˜ï¸")),(0,r.createElementVNode)("span",ce,(0,r.toDisplayString)(c.value?i("æš‚ä¸å¯ç”¨"):s.value?i("åŒæ­¥ä¸­"):l.value?i("å·²è·å–"):i("è·å–äº‘ç«¯")),1)],10,oe))}});var ue=n(2858),me={};me.styleTagTransform=k(),me.setAttributes=v(),me.insert=g().bind(null,"head"),me.domAPI=p(),me.insertStyleElement=y(),u()(ue.A,me),ue.A&&ue.A.locals&&ue.A.locals;const pe=(0,N.A)(de,[["__scopeId","data-v-2e1fd9da"]]);var fe=n(8651),ge=n(7527);const he={class:"data-clear-container"},ve={class:"clear-buttons"},be=["disabled"],ye=(0,r.defineComponent)({__name:"DataClearButtons",props:{variant:{},size:{}},emits:["dataCleared"],setup(e,{emit:t}){const n=t,a=(0,ae.N)(),o=(0,T.useUIStore)(),i=(0,r.computed)(()=>{const e=Math.max(...ge.eQ.map(e=>e.id)),t=Math.max(...ge.VQ.map(e=>e.id)),n=Math.max(...ge.yM.map(e=>e.id)),r=Math.max(...ge.Gr.map(e=>e.id)),o=Math.max(...ge.qS.map(e=>e.id));return a.creationData.worlds.some(t=>"cloud"===t.source||t.id>e)||a.creationData.talentTiers.some(e=>"cloud"===e.source||e.id>t)||a.creationData.origins.some(e=>"cloud"===e.source||e.id>n)||a.creationData.spiritRoots.some(e=>"cloud"===e.source||e.id>r)||a.creationData.talents.some(e=>"cloud"===e.source||e.id>o)});async function s(){i.value&&o.showRetryDialog({title:"æ¸…é™¤è‡ªå®šä¹‰æ•°æ®",message:"ç¡®å®šè¦æ¸…é™¤è‡ªå®šä¹‰æ•°æ®å—ï¼Ÿè¿™å°†æ¸…é™¤æ‰€æœ‰è‡ªå®šä¹‰å’ŒAIç”Ÿæˆçš„æ•°æ®ï¼Œä¿ç•™æœ¬åœ°åŸºç¡€æ•°æ®å’Œäº‘ç«¯æ•°æ®ã€‚æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼",confirmText:"ç¡®è®¤æ¸…é™¤",cancelText:"å–æ¶ˆ",onConfirm:async()=>{const e=a.creationData.worlds.length,t=a.creationData.talentTiers.length,r=a.creationData.origins.length,o=a.creationData.spiritRoots.length,i=a.creationData.talents.length,s=Math.max(...ge.eQ.map(e=>e.id)),l=Math.max(...ge.VQ.map(e=>e.id)),c=Math.max(...ge.yM.map(e=>e.id)),d=Math.max(...ge.Gr.map(e=>e.id)),u=Math.max(...ge.qS.map(e=>e.id));a.creationData.worlds=a.creationData.worlds.filter(e=>"local"===e.source||e.id<=s),a.creationData.talentTiers=a.creationData.talentTiers.filter(e=>"local"===e.source||e.id<=l),a.creationData.origins=a.creationData.origins.filter(e=>"local"===e.source||e.id<=c),a.creationData.spiritRoots=a.creationData.spiritRoots.filter(e=>"local"===e.source||e.id<=d),a.creationData.talents=a.creationData.talents.filter(e=>"local"===e.source||e.id<=u);const m=e-a.creationData.worlds.length+(t-a.creationData.talentTiers.length)+(r-a.creationData.origins.length)+(o-a.creationData.spiritRoots.length)+(i-a.creationData.talents.length);a.resetCharacter(),await async function(){try{const e=(0,fe.getTavernHelper)();if(!e)return void console.warn("é…’é¦†åŠ©æ‰‹ä¸å¯ç”¨ï¼Œè·³è¿‡æ¸…ç†é…’é¦†è‡ªå®šä¹‰æ•°æ®");await e.deleteVariable("DAD_creationData",{type:"global"}),console.log("å·²æ¸…ç†é…’é¦†å…¨å±€å˜é‡ DAD_creationData");const t=await e.getVariables({type:"global"}),n=Object.keys(t).filter(e=>e.includes("DAD_")||e.includes("custom")||e.includes("è‡ªå®šä¹‰"));n.length>0&&(await Promise.all(n.map(t=>e.deleteVariable(t,{type:"global"}))),console.log(`å·²æ¸…ç† ${n.length} ä¸ªè‡ªå®šä¹‰æ•°æ®ç›¸å…³çš„é…’é¦†å˜é‡:`,n))}catch(e){console.error("æ¸…ç†é…’é¦†è‡ªå®šä¹‰æ•°æ®æ—¶å‡ºé”™:",e)}}(),await a.persistCustomData(),ne.o.success(`å·²æ¸…é™¤${m} é¡¹è‡ªå®šä¹‰æ•°æ®ï¼Œä¿ç•™æœ¬åœ°åŸºç¡€æ•°æ®å’Œäº‘ç«¯æ•°æ®`),n("dataCleared","custom",m)},onCancel:()=>{}})}return(0,r.computed)(()=>a.creationData.worlds.some(e=>"cloud"===e.source)||a.creationData.talentTiers.some(e=>"cloud"===e.source)||a.creationData.origins.some(e=>"cloud"===e.source)||a.creationData.spiritRoots.some(e=>"cloud"===e.source)||a.creationData.talents.some(e=>"cloud"===e.source)),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",he,[(0,r.createElementVNode)("div",ve,[(0,r.createCommentVNode)(" æ¸…é™¤è‡ªå®šä¹‰æ•°æ®ï¼ˆè‡ªå®šä¹‰+AIç”Ÿæˆï¼‰ï¼Œä¿ç•™æœ¬åœ°åŸºç¡€+äº‘ç«¯æ•°æ® "),(0,r.createElementVNode)("button",{onClick:s,class:"clear-button custom",disabled:!i.value,title:"æ¸…é™¤è‡ªå®šä¹‰å’ŒAIç”Ÿæˆçš„æ•°æ®"},t[0]||(t[0]=[(0,r.createElementVNode)("span",{class:"clear-icon"},"ğŸ—‘ï¸",-1),(0,r.createElementVNode)("span",{class:"clear-text"},"æ¸…é™¤è‡ªå®šä¹‰",-1)]),8,be),(0,r.createCommentVNode)(" æ¸…é™¤äº‘ç«¯æ•°æ®ï¼Œä¿ç•™æœ¬åœ°åŸºç¡€+è‡ªå®šä¹‰æ•°æ® "),(0,r.createCommentVNode)(" ğŸ”¥ æš‚æ—¶éšè—ï¼šåç«¯æœªä¸Šçº¿ "),(0,r.createCommentVNode)("v-if",!0)])]))}});var xe=n(1393),ke={};ke.styleTagTransform=k(),ke.setAttributes=v(),ke.insert=g().bind(null,"head"),ke.domAPI=p(),ke.insertStyleElement=y(),u()(xe.A,ke),xe.A&&xe.A.locals&&xe.A.locals;const we=(0,N.A)(ye,[["__scopeId","data-v-5b396b26"]]),Ee={class:"modal-container"},Ne={class:"modal-content"},Se={class:"form-group"},Ve={class:"char-count"},_e={class:"form-group"},Ce={class:"char-count"},Ae={key:0,class:"preset-preview"},De={class:"preview-tags"},Te={key:0,class:"info-tag"},Be={key:1,class:"info-tag"},Ie={key:2,class:"info-tag"},ze={key:3,class:"info-tag"},Me={key:4,class:"info-tag talent-tag"},Pe={class:"preset-info"},Re={class:"info-item"},$e={class:"info-value"},Oe={class:"modal-footer"},Le=["disabled"],Fe={key:0},je={key:1},Ue=(0,r.defineComponent)({__name:"PresetSaveModal",props:{visible:{type:Boolean},characterData:{}},emits:["close","submit"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)(""),i=(0,r.ref)(""),s=(0,r.ref)(""),l=(0,r.ref)(!1);let c=null;function d(){const e=new Date;s.value=e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function u(){l.value||a("close")}function m(){o.value.trim()&&!l.value&&(l.value=!0,setTimeout(()=>{a("submit",{presetName:o.value.trim(),presetDescription:i.value.trim(),characterData:n.characterData}),l.value=!1},300))}return(0,r.onMounted)(()=>{d(),c=window.setInterval(d,1e3)}),(0,r.onUnmounted)(()=>{null!==c&&clearInterval(c)}),(0,r.watch)(()=>n.visible,e=>{e&&(o.value="",i.value="",d(),setTimeout(()=>{const e=document.querySelector(".form-input");e?.focus()},100))}),(e,t)=>e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(u,["self"])},[(0,r.createElementVNode)("div",Ee,[(0,r.createCommentVNode)(" Header "),(0,r.createElementVNode)("div",{class:"modal-header"},[t[2]||(t[2]=(0,r.createElementVNode)("h2",{class:"modal-title"},"ğŸ’¾ ä¿å­˜é¢„è®¾",-1)),(0,r.createElementVNode)("button",{class:"modal-close",onClick:u},"Ã—")]),(0,r.createCommentVNode)(" Content "),(0,r.createElementVNode)("div",Ne,[(0,r.createElementVNode)("div",Se,[t[3]||(t[3]=(0,r.createElementVNode)("label",{class:"form-label"},[(0,r.createTextVNode)("é¢„è®¾åç§° "),(0,r.createElementVNode)("span",{class:"required"},"*")],-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),type:"text",class:"form-input",placeholder:"è¯·è¾“å…¥é¢„è®¾åç§°ï¼ˆå¦‚ï¼šå‰‘ä¿®é¢„è®¾ã€æ²»æ„ˆç³»é¢„è®¾ç­‰ï¼‰",onKeyup:(0,r.withKeys)(m,["enter"]),maxlength:"50",autofocus:""},null,544),[[r.vModelText,o.value]]),(0,r.createElementVNode)("div",Ve,(0,r.toDisplayString)(o.value.length)+"/50",1)]),(0,r.createElementVNode)("div",_e,[t[4]||(t[4]=(0,r.createElementVNode)("label",{class:"form-label"},[(0,r.createTextVNode)("é¢„è®¾æè¿° "),(0,r.createElementVNode)("span",{class:"optional"},"ï¼ˆå¯é€‰ï¼‰")],-1)),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),class:"form-textarea",placeholder:"è¾“å…¥æ­¤é¢„è®¾çš„æè¿°ä¿¡æ¯...",maxlength:"200",rows:"4"},null,512),[[r.vModelText,i.value]]),(0,r.createElementVNode)("div",Ce,(0,r.toDisplayString)(i.value.length)+"/200",1)]),(0,r.createCommentVNode)(" é¢„è®¾å†…å®¹é¢„è§ˆ "),e.characterData?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ae,[t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"preview-header"},"ğŸ“‹ é¢„è®¾å†…å®¹é¢„è§ˆ",-1)),(0,r.createElementVNode)("div",De,[e.characterData.world?((0,r.openBlock)(),(0,r.createElementBlock)("span",Te,(0,r.toDisplayString)(e.characterData.world.name),1)):(0,r.createCommentVNode)("v-if",!0),e.characterData.talentTier?((0,r.openBlock)(),(0,r.createElementBlock)("span",Be,(0,r.toDisplayString)(e.characterData.talentTier.name),1)):(0,r.createCommentVNode)("v-if",!0),e.characterData.origin?((0,r.openBlock)(),(0,r.createElementBlock)("span",Ie,(0,r.toDisplayString)(e.characterData.origin.name),1)):(0,r.createCommentVNode)("v-if",!0),e.characterData.spiritRoot?((0,r.openBlock)(),(0,r.createElementBlock)("span",ze,(0,r.toDisplayString)(e.characterData.spiritRoot.name),1)):(0,r.createCommentVNode)("v-if",!0),e.characterData.talents&&e.characterData.talents.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("span",Me,(0,r.toDisplayString)(e.characterData.talents.length)+" ä¸ªå¤©èµ‹ ",1)):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",Pe,[(0,r.createElementVNode)("div",Re,[t[6]||(t[6]=(0,r.createElementVNode)("span",{class:"info-label"},"ğŸ“… ä¿å­˜æ—¶é—´ï¼š",-1)),(0,r.createElementVNode)("span",$e,(0,r.toDisplayString)(s.value),1)])])]),(0,r.createCommentVNode)(" Footer "),(0,r.createElementVNode)("div",Oe,[(0,r.createElementVNode)("button",{class:"btn btn-cancel",onClick:u},"å–æ¶ˆ"),(0,r.createElementVNode)("button",{class:"btn btn-confirm",onClick:m,disabled:!o.value.trim()||l.value},[l.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",Fe,"ğŸ’« ä¿å­˜ä¸­...")):((0,r.openBlock)(),(0,r.createElementBlock)("span",je,"âœ¨ ä¿å­˜é¢„è®¾"))],8,Le)])])])):(0,r.createCommentVNode)("v-if",!0)}});var qe=n(4178),Ge={};Ge.styleTagTransform=k(),Ge.setAttributes=v(),Ge.insert=g().bind(null,"head"),Ge.domAPI=p(),Ge.insertStyleElement=y(),u()(qe.A,Ge),qe.A&&qe.A.locals&&qe.A.locals;const He=(0,N.A)(Ue,[["__scopeId","data-v-431f1334"]]),Ye=["disabled","title"],We={key:0,class:"sync-icon"},Xe={key:1,class:"sync-icon"},Je={key:2,class:"sync-icon"},Ke={class:"sync-text"},Qe=(0,r.defineComponent)({__name:"StorePreSeting",props:{size:{},variant:{},currentStep:{},totalSteps:{},characterData:{}},emits:["storeCompleted","storeStarted"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)(!1),i=(0,r.ref)(!1),s=(0,r.ref)(!1),{t:l}=(0,re.s)(),c=(0,r.computed)(()=>void 0===n.currentStep||void 0===n.totalSteps||n.currentStep===n.totalSteps);function d(){o.value||i.value||!c.value?i.value?ne.o.info(l("é¢„è®¾å·²å­˜å‚¨ï¼Œæ— éœ€é‡å¤æ“ä½œ")):c.value||ne.o.warning(l("è¯·å®Œæˆæ‰€æœ‰æ­¥éª¤åå†ä¿å­˜é¢„è®¾")):(s.value=!0,a("storeStarted"))}async function u(e){o.value=!0,s.value=!1;const t={name:e.presetName,description:e.presetDescription,savedAt:(new Date).toISOString()};i.value=!0,a("storeCompleted",{success:!0,message:l("é¢„è®¾ä¿å­˜æˆåŠŸ"),presetData:t}),o.value=!1}return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("button",{onClick:d,class:(0,r.normalizeClass)(["cloud-sync-button",{synced:i.value}]),disabled:o.value||!c.value,title:c.value?o.value?l("æ­£åœ¨å­˜å‚¨é¢„è®¾..."):i.value?l("é¢„è®¾å·²å­˜å‚¨"):l("ä¿å­˜å½“å‰é€‰æ‹©ä¸ºé¢„è®¾"):l("è¯·å®Œæˆæ‰€æœ‰æ­¥éª¤åå†ä¿å­˜é¢„è®¾")},[o.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",We,"â³")):i.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",Xe,"âœ…")):((0,r.openBlock)(),(0,r.createElementBlock)("span",Je,"ğŸ’¾")),(0,r.createElementVNode)("span",Ke,(0,r.toDisplayString)(o.value?l("å­˜å‚¨ä¸­"):i.value?l("å·²å­˜å‚¨"):l("å­˜å‚¨é¢„è®¾")),1)],10,Ye),(0,r.createCommentVNode)(" é¢„è®¾ä¿å­˜å¯¹è¯æ¡† "),(0,r.createVNode)(He,{visible:s.value,"character-data":n.characterData,onClose:t[0]||(t[0]=e=>s.value=!1),onSubmit:u},null,8,["visible","character-data"])]))}});var Ze=n(2497),et={};et.styleTagTransform=k(),et.setAttributes=v(),et.insert=g().bind(null,"head"),et.domAPI=p(),et.insertStyleElement=y(),u()(Ze.A,et),Ze.A&&Ze.A.locals&&Ze.A.locals;const tt=(0,N.A)(Qe,[["__scopeId","data-v-5cceb5b0"]]);var nt=n(5735);const at={class:"modal-container"},rt={class:"modal-content"},ot={key:0,class:"loading-state"},it={key:1,class:"empty-state"},st={key:2},lt={class:"export-options"},ct={class:"option-label"},dt={class:"option-text"},ut={class:"option-desc"},mt={class:"option-label"},pt={key:0,class:"presets-list"},ft={class:"list-header"},gt={class:"checkbox-label"},ht=["checked"],vt={class:"selected-count"},bt={class:"preset-items"},yt=["value"],xt={class:"preset-info"},kt={class:"preset-header"},wt={class:"preset-name"},Et={class:"preset-date"},Nt={key:0,class:"preset-description"},St={key:1,class:"preset-tags"},Vt={key:0,class:"info-tag name-tag"},_t={key:1,class:"info-tag age-tag"},Ct={key:2,class:"info-tag"},At={key:3,class:"info-tag"},Dt={class:"export-info"},Tt={class:"info-item"},Bt={class:"info-value"},It={class:"info-item"},zt={class:"info-value"},Mt={class:"modal-footer"},Pt=["disabled"],Rt={key:0},$t={key:1},Ot=(0,r.defineComponent)({__name:"PresetExportModal",props:{visible:{type:Boolean}},emits:["close","exported"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)([]),i=(0,r.ref)("all"),s=(0,r.ref)([]),l=(0,r.ref)(!1),c=(0,r.ref)(!1),d=(0,r.ref)("");let u=null;const m=(0,r.computed)(()=>o.value.length>0&&s.value.length===o.value.length),p=(0,r.computed)(()=>0!==o.value.length&&("all"===i.value||s.value.length>0));function f(){const e=new Date;d.value=e.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}function g(e){const t=new Date(e),n=(new Date).getTime()-t.getTime(),a=Math.floor(n/864e5);return 0===a?"ä»Šå¤©":1===a?"æ˜¨å¤©":a<7?`${a}å¤©å‰`:t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}function h(){m.value?s.value=[]:s.value=o.value.map(e=>e.id)}function v(){return"all"===i.value?o.value.length:s.value.length}function b(){c.value||a("close")}async function y(){if(!p.value||c.value)return;c.value=!0;const e="export-preset-toast";ne.o.loading("æ­£åœ¨å¯¼å‡ºé¢„è®¾...",{id:e});try{const t="all"===i.value?void 0:s.value;await(0,nt.VW)(t);const n=v();ne.o.success(`æˆåŠŸå¯¼å‡º ${n} ä¸ªé¢„è®¾ï¼`,{id:e}),a("exported"),a("close")}catch(t){console.error("[é¢„è®¾å¯¼å‡ºå¯¹è¯æ¡†] å¯¼å‡ºå¤±è´¥:",t);const n=t instanceof Error?t.message:"å¯¼å‡ºå¤±è´¥";ne.o.error(`å¯¼å‡ºå¤±è´¥: ${n}`,{id:e})}finally{c.value=!1}}return(0,r.onMounted)(()=>{f(),u=window.setInterval(f,1e3)}),(0,r.onUnmounted)(()=>{null!==u&&clearInterval(u)}),(0,r.watch)(()=>n.visible,async e=>{e&&(i.value="all",s.value=[],await async function(){l.value=!0;try{console.log("[é¢„è®¾å¯¼å‡ºå¯¹è¯æ¡†] å¼€å§‹åŠ è½½é¢„è®¾åˆ—è¡¨");const e=await(0,nt.Vd)();o.value=e,console.log("[é¢„è®¾å¯¼å‡ºå¯¹è¯æ¡†] æˆåŠŸåŠ è½½",o.value.length,"ä¸ªé¢„è®¾")}catch(e){console.error("[é¢„è®¾å¯¼å‡ºå¯¹è¯æ¡†] åŠ è½½é¢„è®¾åˆ—è¡¨å¤±è´¥:",e),ne.o.error("åŠ è½½é¢„è®¾åˆ—è¡¨å¤±è´¥"),o.value=[]}finally{l.value=!1}}())}),(e,t)=>e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(b,["self"])},[(0,r.createElementVNode)("div",at,[(0,r.createCommentVNode)(" Header "),(0,r.createElementVNode)("div",{class:"modal-header"},[t[3]||(t[3]=(0,r.createElementVNode)("h2",{class:"modal-title"},"ğŸ“¤ å¯¼å‡ºé¢„è®¾",-1)),(0,r.createElementVNode)("button",{class:"modal-close",onClick:b},"Ã—")]),(0,r.createCommentVNode)(" Content "),(0,r.createElementVNode)("div",rt,[l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",ot,t[4]||(t[4]=[(0,r.createElementVNode)("div",{class:"spinner"},null,-1),(0,r.createElementVNode)("p",null,"æ­£åœ¨åŠ è½½é¢„è®¾åˆ—è¡¨...",-1)]))):0===o.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",it,t[5]||(t[5]=[(0,r.createElementVNode)("div",{class:"empty-icon"},"ğŸ“­",-1),(0,r.createElementVNode)("p",null,"æš‚æ— å¯å¯¼å‡ºçš„é¢„è®¾",-1),(0,r.createElementVNode)("p",{class:"empty-hint"},"è¯·å…ˆä¿å­˜ä¸€äº›é¢„è®¾åå†è¿›è¡Œå¯¼å‡º",-1)]))):((0,r.openBlock)(),(0,r.createElementBlock)("div",st,[(0,r.createCommentVNode)(" å¯¼å‡ºæ¨¡å¼é€‰æ‹© "),(0,r.createElementVNode)("div",lt,[(0,r.createElementVNode)("label",ct,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),value:"all",class:"radio-input"},null,512),[[r.vModelRadio,i.value]]),(0,r.createElementVNode)("span",dt,[t[6]||(t[6]=(0,r.createElementVNode)("span",{class:"option-title"},"å¯¼å‡ºå…¨éƒ¨é¢„è®¾",-1)),(0,r.createElementVNode)("span",ut,"å¯¼å‡ºæ‰€æœ‰ "+(0,r.toDisplayString)(o.value.length)+" ä¸ªé¢„è®¾",1)])]),(0,r.createElementVNode)("label",mt,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),value:"selected",class:"radio-input"},null,512),[[r.vModelRadio,i.value]]),t[7]||(t[7]=(0,r.createElementVNode)("span",{class:"option-text"},[(0,r.createElementVNode)("span",{class:"option-title"},"å¯¼å‡ºé€‰ä¸­é¢„è®¾"),(0,r.createElementVNode)("span",{class:"option-desc"},"é€‰æ‹©è¦å¯¼å‡ºçš„é¢„è®¾")],-1))])]),(0,r.createCommentVNode)(" é¢„è®¾åˆ—è¡¨ (ä»…åœ¨é€‰ä¸­æ¨¡å¼ä¸‹æ˜¾ç¤º) "),"selected"===i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",pt,[(0,r.createElementVNode)("div",ft,[(0,r.createElementVNode)("label",gt,[(0,r.createElementVNode)("input",{type:"checkbox",checked:m.value,onChange:h,class:"checkbox-input"},null,40,ht),t[8]||(t[8]=(0,r.createElementVNode)("span",null,"å…¨é€‰/å–æ¶ˆå…¨é€‰",-1))]),(0,r.createElementVNode)("span",vt,"å·²é€‰æ‹© "+(0,r.toDisplayString)(s.value.length)+" ä¸ª",1)]),(0,r.createElementVNode)("div",bt,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("label",{key:e.id,class:(0,r.normalizeClass)(["preset-item",{selected:s.value.includes(e.id)}])},[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),class:"checkbox-input"},null,8,yt),[[r.vModelCheckbox,s.value]]),(0,r.createElementVNode)("div",xt,[(0,r.createElementVNode)("div",kt,[(0,r.createElementVNode)("h3",wt,(0,r.toDisplayString)(e.name||"æœªå‘½åé¢„è®¾"),1),(0,r.createElementVNode)("span",Et,(0,r.toDisplayString)(g(e.savedAt)),1)]),e.description?((0,r.openBlock)(),(0,r.createElementBlock)("p",Nt,(0,r.toDisplayString)(e.description),1)):(0,r.createCommentVNode)("v-if",!0),e.data?((0,r.openBlock)(),(0,r.createElementBlock)("div",St,[e.data.character_name?((0,r.openBlock)(),(0,r.createElementBlock)("span",Vt,(0,r.toDisplayString)(e.data.character_name),1)):(0,r.createCommentVNode)("v-if",!0),e.data.current_age?((0,r.openBlock)(),(0,r.createElementBlock)("span",_t,(0,r.toDisplayString)(e.data.current_age)+"å²",1)):(0,r.createCommentVNode)("v-if",!0),e.data.world?((0,r.openBlock)(),(0,r.createElementBlock)("span",Ct,(0,r.toDisplayString)(e.data.world.name),1)):(0,r.createCommentVNode)("v-if",!0),e.data.talentTier?((0,r.openBlock)(),(0,r.createElementBlock)("span",At,(0,r.toDisplayString)(e.data.talentTier.name),1)):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)])],2))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¯¼å‡ºä¿¡æ¯ "),(0,r.createElementVNode)("div",Dt,[(0,r.createElementVNode)("div",Tt,[t[9]||(t[9]=(0,r.createElementVNode)("span",{class:"info-label"},"ğŸ“¦ å¯¼å‡ºæ•°é‡ï¼š",-1)),(0,r.createElementVNode)("span",Bt,(0,r.toDisplayString)(v())+" ä¸ªé¢„è®¾",1)]),t[11]||(t[11]=(0,r.createElementVNode)("div",{class:"info-item"},[(0,r.createElementVNode)("span",{class:"info-label"},"ğŸ“„ æ–‡ä»¶æ ¼å¼ï¼š"),(0,r.createElementVNode)("span",{class:"info-value"},"JSON")],-1)),(0,r.createElementVNode)("div",It,[t[10]||(t[10]=(0,r.createElementVNode)("span",{class:"info-label"},"ğŸ“… å¯¼å‡ºæ—¶é—´ï¼š",-1)),(0,r.createElementVNode)("span",zt,(0,r.toDisplayString)(d.value),1)])])]))]),(0,r.createCommentVNode)(" Footer "),(0,r.createElementVNode)("div",Mt,[(0,r.createElementVNode)("button",{class:"btn btn-cancel",onClick:b},"å–æ¶ˆ"),(0,r.createElementVNode)("button",{class:"btn btn-confirm",onClick:y,disabled:!p.value||c.value},[c.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",Rt,"â³ å¯¼å‡ºä¸­...")):((0,r.openBlock)(),(0,r.createElementBlock)("span",$t,"ğŸ“¥ å¯¼å‡ºé¢„è®¾"))],8,Pt)])])])):(0,r.createCommentVNode)("v-if",!0)}});var Lt=n(7457),Ft={};Ft.styleTagTransform=k(),Ft.setAttributes=v(),Ft.insert=g().bind(null,"head"),Ft.domAPI=p(),Ft.insertStyleElement=y(),u()(Lt.A,Ft),Lt.A&&Lt.A.locals&&Lt.A.locals;const jt=(0,N.A)(Ot,[["__scopeId","data-v-3e075713"]]),Ut={class:"modal-container"},qt={class:"modal-content"},Gt={key:0,class:"file-info"},Ht={class:"file-header"},Yt={class:"file-name"},Wt={class:"file-size"},Xt={key:1,class:"import-options"},Jt={class:"option-label"},Kt={class:"option-label"},Qt={class:"result-icon"},Zt={class:"result-content"},en={class:"result-message"},tn={key:0,class:"result-details"},nn={key:0,class:"detail-item success"},an={key:1,class:"detail-item error"},rn={class:"modal-footer"},on=["disabled"],sn={key:0},ln={key:1},cn=(0,r.defineComponent)({__name:"PresetImportModal",props:{visible:{type:Boolean}},emits:["close","imported"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)(null),i=(0,r.ref)(null),s=(0,r.ref)("merge"),l=(0,r.ref)(!1),c=(0,r.ref)(!1),d=(0,r.ref)(null);function u(){o.value?.click()}function m(e){const t=e.target,n=t.files?.[0];n&&f(n)}function p(e){c.value=!1;const t=e.dataTransfer?.files[0];t&&f(t)}function f(e){e.name.endsWith(".json")||"application/json"===e.type?e.size>10485760?ne.o.error("æ–‡ä»¶å¤§å°è¶…è¿‡é™åˆ¶ï¼ˆæœ€å¤§10MBï¼‰"):(i.value=e,d.value=null):ne.o.error("è¯·é€‰æ‹©JSONæ ¼å¼çš„æ–‡ä»¶")}function g(){i.value=null,d.value=null,o.value&&(o.value.value="")}function h(){l.value||a("close")}async function v(){if(!i.value||l.value)return;if("replace"===s.value&&!window.confirm("æ›¿æ¢æ¨¡å¼å°†åˆ é™¤æ‰€æœ‰ç°æœ‰é¢„è®¾ï¼\n\næ­¤æ“ä½œä¸å¯æ’¤é”€ï¼Œç¡®å®šè¦ç»§ç»­å—ï¼Ÿ"))return;l.value=!0;const e="import-preset-toast";ne.o.loading("æ­£åœ¨å¯¼å…¥é¢„è®¾...",{id:e});try{const t=await(0,nt.Ge)(i.value,s.value);console.log("[é¢„è®¾å¯¼å…¥å¯¹è¯æ¡†] å¯¼å…¥å®Œæˆ:",t),t.success>0&&0===t.failed?(d.value={type:"success",message:`æˆåŠŸå¯¼å…¥ ${t.success} ä¸ªé¢„è®¾ï¼`,details:t},ne.o.success(`æˆåŠŸå¯¼å…¥ ${t.success} ä¸ªé¢„è®¾ï¼`,{id:e})):t.success>0&&t.failed>0?(d.value={type:"warning",message:"éƒ¨åˆ†é¢„è®¾å¯¼å…¥æˆåŠŸ",details:t},ne.o.warning(`æˆåŠŸ: ${t.success} ä¸ªï¼Œå¤±è´¥: ${t.failed} ä¸ª`,{id:e})):(d.value={type:"error",message:"é¢„è®¾å¯¼å…¥å¤±è´¥",details:t},ne.o.error("é¢„è®¾å¯¼å…¥å¤±è´¥",{id:e})),a("imported",t)}catch(t){console.error("[é¢„è®¾å¯¼å…¥å¯¹è¯æ¡†] å¯¼å…¥å¤±è´¥:",t);const n=t instanceof Error?t.message:"å¯¼å…¥å¤±è´¥";d.value={type:"error",message:`å¯¼å…¥å¤±è´¥: ${n}`},ne.o.error(`å¯¼å…¥å¤±è´¥: ${n}`,{id:e})}finally{l.value=!1}}return(0,r.watch)(()=>n.visible,e=>{e&&(i.value=null,s.value="merge",d.value=null,c.value=!1)}),(e,t)=>{return e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(h,["self"])},[(0,r.createElementVNode)("div",Ut,[(0,r.createCommentVNode)(" Header "),(0,r.createElementVNode)("div",{class:"modal-header"},[t[4]||(t[4]=(0,r.createElementVNode)("h2",{class:"modal-title"},"ğŸ“¥ å¯¼å…¥é¢„è®¾",-1)),(0,r.createElementVNode)("button",{class:"modal-close",onClick:h},"Ã—")]),(0,r.createCommentVNode)(" Content "),(0,r.createElementVNode)("div",qt,[(0,r.createCommentVNode)(" æ–‡ä»¶é€‰æ‹©åŒºåŸŸ "),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["upload-area",{"drag-over":c.value}]),onDrop:(0,r.withModifiers)(p,["prevent"]),onDragover:t[0]||(t[0]=(0,r.withModifiers)(e=>c.value=!0,["prevent"])),onDragleave:t[1]||(t[1]=(0,r.withModifiers)(e=>c.value=!1,["prevent"]))},[(0,r.createElementVNode)("input",{ref_key:"fileInputRef",ref:o,type:"file",accept:".json,application/json",onChange:m,class:"file-input"},null,544),(0,r.createElementVNode)("div",{class:"upload-content"},[t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"upload-icon"},"ğŸ“",-1)),t[6]||(t[6]=(0,r.createElementVNode)("p",{class:"upload-text"},"æ‹–æ”¾JSONæ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶",-1)),(0,r.createElementVNode)("button",{class:"btn-select",onClick:u},"é€‰æ‹©æ–‡ä»¶"),t[7]||(t[7]=(0,r.createElementVNode)("p",{class:"upload-hint"},"ä»…æ”¯æŒé€šè¿‡æœ¬åº”ç”¨å¯¼å‡ºçš„é¢„è®¾JSONæ–‡ä»¶",-1))])],34),(0,r.createCommentVNode)(" å·²é€‰æ‹©æ–‡ä»¶ä¿¡æ¯ "),i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Gt,[(0,r.createElementVNode)("div",Ht,[t[8]||(t[8]=(0,r.createElementVNode)("span",{class:"file-icon"},"ğŸ“„",-1)),(0,r.createElementVNode)("span",Yt,(0,r.toDisplayString)(i.value.name),1),(0,r.createElementVNode)("span",Wt,(0,r.toDisplayString)((n=i.value.size,n<1024?`${n} B`:n<1048576?`${(n/1024).toFixed(2)} KB`:`${(n/1048576).toFixed(2)} MB`)),1),(0,r.createElementVNode)("button",{class:"btn-remove",onClick:g},"Ã—")])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¯¼å…¥é€‰é¡¹ "),i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Xt,[(0,r.createElementVNode)("label",Jt,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>s.value=e),value:"merge",class:"radio-input"},null,512),[[r.vModelRadio,s.value]]),t[9]||(t[9]=(0,r.createElementVNode)("span",{class:"option-text"},[(0,r.createElementVNode)("span",{class:"option-title"},"åˆå¹¶æ¨¡å¼"),(0,r.createElementVNode)("span",{class:"option-desc"},"å°†å¯¼å…¥çš„é¢„è®¾æ·»åŠ åˆ°ç°æœ‰é¢„è®¾ä¸­ï¼ˆæ¨èï¼‰")],-1))]),(0,r.createElementVNode)("label",Kt,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio","onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e),value:"replace",class:"radio-input"},null,512),[[r.vModelRadio,s.value]]),t[10]||(t[10]=(0,r.createElementVNode)("span",{class:"option-text"},[(0,r.createElementVNode)("span",{class:"option-title"},"æ›¿æ¢æ¨¡å¼"),(0,r.createElementVNode)("span",{class:"option-desc warning"},"å°†æ¸…é™¤æ‰€æœ‰ç°æœ‰é¢„è®¾ï¼Œä»…ä¿ç•™å¯¼å…¥çš„é¢„è®¾")],-1))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¯¼å…¥ç»“æœ "),d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:2,class:(0,r.normalizeClass)(["import-result",d.value.type])},[(0,r.createElementVNode)("div",Qt,(0,r.toDisplayString)("success"===d.value.type?"âœ…":"warning"===d.value.type?"âš ï¸":"âŒ"),1),(0,r.createElementVNode)("div",Zt,[(0,r.createElementVNode)("p",en,(0,r.toDisplayString)(d.value.message),1),d.value.details?((0,r.openBlock)(),(0,r.createElementBlock)("div",tn,[d.value.details.success>0?((0,r.openBlock)(),(0,r.createElementBlock)("span",nn," æˆåŠŸå¯¼å…¥: "+(0,r.toDisplayString)(d.value.details.success)+" ä¸ª ",1)):(0,r.createCommentVNode)("v-if",!0),d.value.details.failed>0?((0,r.openBlock)(),(0,r.createElementBlock)("span",an," å¯¼å…¥å¤±è´¥: "+(0,r.toDisplayString)(d.value.details.failed)+" ä¸ª ",1)):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)])],2)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" Footer "),(0,r.createElementVNode)("div",rn,[(0,r.createElementVNode)("button",{class:"btn btn-cancel",onClick:h},(0,r.toDisplayString)(d.value?"å…³é—­":"å–æ¶ˆ"),1),d.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn btn-confirm",onClick:v,disabled:!i.value||l.value},[l.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",sn,"â³ å¯¼å…¥ä¸­...")):((0,r.openBlock)(),(0,r.createElementBlock)("span",ln,"ğŸ“¤ å¼€å§‹å¯¼å…¥"))],8,on))])])])):(0,r.createCommentVNode)("v-if",!0);var n}}});var dn=n(9531),un={};un.styleTagTransform=k(),un.setAttributes=v(),un.insert=g().bind(null,"head"),un.domAPI=p(),un.insertStyleElement=y(),u()(dn.A,un),dn.A&&dn.A.locals&&dn.A.locals;const mn=(0,N.A)(cn,[["__scopeId","data-v-3fadd167"]]),pn={class:"modal-container"},fn={class:"modal-header"},gn={class:"title-section"},hn={key:0,class:"preset-count"},vn={class:"header-actions"},bn={class:"modal-content"},yn={key:0,class:"loading-state"},xn={key:1,class:"empty-state"},kn={key:2,class:"presets-list"},wn=["onClick"],En={class:"preset-header"},Nn={class:"preset-name"},Sn={class:"preset-actions"},Vn={class:"preset-date"},_n=["onClick"],Cn={key:0,class:"preset-description"},An={key:1,class:"preset-info"},Dn={key:0,class:"info-tag name-tag"},Tn={key:1,class:"info-tag age-tag"},Bn={key:2,class:"info-tag"},In={key:3,class:"info-tag"},zn={key:4,class:"info-tag"},Mn={key:5,class:"info-tag"},Pn={class:"modal-footer"},Rn=["disabled"],$n={key:0},On={key:1},Ln=(0,r.defineComponent)({__name:"PresetLoadModal",props:{visible:{type:Boolean}},emits:["close","select"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)([]),i=(0,r.ref)(null),s=(0,r.ref)(!1),l=(0,r.ref)(!1),c=(0,r.ref)(!1),d=(0,r.ref)(!1);async function u(){s.value=!0;try{console.log("[é¢„è®¾åŠ è½½å¯¹è¯æ¡†] å¼€å§‹åŠ è½½é¢„è®¾åˆ—è¡¨");const e=await(0,nt.Vd)();o.value=e,console.log("[é¢„è®¾åŠ è½½å¯¹è¯æ¡†] æˆåŠŸåŠ è½½",o.value.length,"ä¸ªé¢„è®¾",o.value)}catch(e){console.error("[é¢„è®¾åŠ è½½å¯¹è¯æ¡†] åŠ è½½é¢„è®¾åˆ—è¡¨å¤±è´¥:",e),ne.o.error("åŠ è½½é¢„è®¾åˆ—è¡¨å¤±è´¥"),o.value=[]}finally{s.value=!1}}function m(e){const t=new Date(e),n=(new Date).getTime()-t.getTime(),a=Math.floor(n/864e5);return 0===a?"ä»Šå¤©":1===a?"æ˜¨å¤©":a<7?`${a}å¤©å‰`:t.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})}function p(){l.value||a("close")}function f(){i.value&&!l.value&&(l.value=!0,setTimeout(()=>{i.value&&a("select",i.value),l.value=!1},300))}function g(){console.log("[é¢„è®¾åŠ è½½å¯¹è¯æ¡†] é¢„è®¾å·²å¯¼å‡º"),u()}async function h(e){console.log("[é¢„è®¾åŠ è½½å¯¹è¯æ¡†] é¢„è®¾å¯¼å…¥å®Œæˆ:",e),await u()}return(0,r.watch)(()=>n.visible,async e=>{e&&(i.value=null,await u())}),(e,t)=>e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(p,["self"])},[(0,r.createElementVNode)("div",pn,[(0,r.createCommentVNode)(" Header "),(0,r.createElementVNode)("div",fn,[(0,r.createElementVNode)("div",gn,[t[4]||(t[4]=(0,r.createElementVNode)("h2",{class:"modal-title"},"ğŸ“‚ åŠ è½½é¢„è®¾",-1)),!s.value&&o.value.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("span",hn,(0,r.toDisplayString)(o.value.length)+" ä¸ª",1)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",vn,[(0,r.createElementVNode)("button",{class:"btn-action import",onClick:t[0]||(t[0]=e=>d.value=!0)},t[5]||(t[5]=[(0,r.createElementVNode)("span",{class:"btn-icon"},"ğŸ“¥",-1),(0,r.createElementVNode)("span",{class:"btn-text"},"å¯¼å…¥",-1)])),(0,r.createElementVNode)("button",{class:"btn-action export",onClick:t[1]||(t[1]=e=>c.value=!0)},t[6]||(t[6]=[(0,r.createElementVNode)("span",{class:"btn-icon"},"ğŸ“¤",-1),(0,r.createElementVNode)("span",{class:"btn-text"},"å¯¼å‡º",-1)])),(0,r.createElementVNode)("button",{class:"modal-close",onClick:p},"Ã—")])]),(0,r.createCommentVNode)(" Content "),(0,r.createElementVNode)("div",bn,[s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",yn,t[7]||(t[7]=[(0,r.createElementVNode)("div",{class:"spinner"},null,-1),(0,r.createElementVNode)("p",null,"æ­£åœ¨åŠ è½½é¢„è®¾åˆ—è¡¨...",-1)]))):0===o.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",xn,t[8]||(t[8]=[(0,r.createElementVNode)("div",{class:"empty-icon"},"ğŸ“­",-1),(0,r.createElementVNode)("p",null,"æš‚æ— ä¿å­˜çš„é¢„è®¾",-1),(0,r.createElementVNode)("p",{class:"empty-hint"},"å®Œæˆè§’è‰²åˆ›å»ºå,å¯ä»¥ä¿å­˜ä¸ºé¢„è®¾ä»¥ä¾¿å¿«é€Ÿå¼€å§‹æ–°æ¸¸æˆ",-1)]))):((0,r.openBlock)(),(0,r.createElementBlock)("div",kn,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:(0,r.normalizeClass)(["preset-item",{selected:i.value?.id===e.id}]),onClick:t=>i.value=e},[(0,r.createElementVNode)("div",En,[(0,r.createElementVNode)("h3",Nn,(0,r.toDisplayString)(e.name||"æœªå‘½åé¢„è®¾"),1),(0,r.createElementVNode)("div",Sn,[(0,r.createElementVNode)("span",Vn,(0,r.toDisplayString)(m(e.savedAt)),1),(0,r.createElementVNode)("button",{class:"btn-delete",onClick:(0,r.withModifiers)(t=>async function(e){if(window.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé¢„è®¾å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚"))try{await(0,nt.BC)(e),ne.o.success("é¢„è®¾å·²åˆ é™¤"),await u(),i.value?.id===e&&(i.value=null)}catch(e){console.error("[é¢„è®¾åŠ è½½å¯¹è¯æ¡†] åˆ é™¤é¢„è®¾å¤±è´¥:",e),ne.o.error("åˆ é™¤é¢„è®¾å¤±è´¥")}}(e.id),["stop"])},"Ã—",8,_n)])]),e.description?((0,r.openBlock)(),(0,r.createElementBlock)("p",Cn,(0,r.toDisplayString)(e.description),1)):(0,r.createCommentVNode)("v-if",!0),e.data?((0,r.openBlock)(),(0,r.createElementBlock)("div",An,[e.data.character_name?((0,r.openBlock)(),(0,r.createElementBlock)("span",Dn,(0,r.toDisplayString)(e.data.character_name),1)):(0,r.createCommentVNode)("v-if",!0),e.data.current_age?((0,r.openBlock)(),(0,r.createElementBlock)("span",Tn,(0,r.toDisplayString)(e.data.current_age)+"å²",1)):(0,r.createCommentVNode)("v-if",!0),e.data.world?((0,r.openBlock)(),(0,r.createElementBlock)("span",Bn,(0,r.toDisplayString)(e.data.world.name),1)):(0,r.createCommentVNode)("v-if",!0),e.data.talentTier?((0,r.openBlock)(),(0,r.createElementBlock)("span",In,(0,r.toDisplayString)(e.data.talentTier.name),1)):(0,r.createCommentVNode)("v-if",!0),e.data.origin?((0,r.openBlock)(),(0,r.createElementBlock)("span",zn,(0,r.toDisplayString)(e.data.origin.name),1)):(0,r.createCommentVNode)("v-if",!0),e.data.spiritRoot?((0,r.openBlock)(),(0,r.createElementBlock)("span",Mn,(0,r.toDisplayString)(e.data.spiritRoot.name),1)):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)],10,wn))),128))]))]),(0,r.createCommentVNode)(" Footer "),(0,r.createElementVNode)("div",Pn,[(0,r.createElementVNode)("button",{class:"btn btn-cancel",onClick:p},"å–æ¶ˆ"),(0,r.createElementVNode)("button",{class:"btn btn-confirm",onClick:f,disabled:!i.value||l.value},[l.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",$n,"â³ åŠ è½½ä¸­...")):((0,r.openBlock)(),(0,r.createElementBlock)("span",On,"âœ¨ åŠ è½½é¢„è®¾"))],8,Rn)])]),(0,r.createCommentVNode)(" å¯¼å‡ºé¢„è®¾å¯¹è¯æ¡† "),(0,r.createVNode)(jt,{visible:c.value,onClose:t[2]||(t[2]=e=>c.value=!1),onExported:g},null,8,["visible"]),(0,r.createCommentVNode)(" å¯¼å…¥é¢„è®¾å¯¹è¯æ¡† "),(0,r.createVNode)(mn,{visible:d.value,onClose:t[3]||(t[3]=e=>d.value=!1),onImported:h},null,8,["visible"])])):(0,r.createCommentVNode)("v-if",!0)}});var Fn=n(8139),jn={};jn.styleTagTransform=k(),jn.setAttributes=v(),jn.insert=g().bind(null,"head"),jn.domAPI=p(),jn.insertStyleElement=y(),u()(Fn.A,jn),Fn.A&&Fn.A.locals&&Fn.A.locals;const Un=(0,N.A)(Ln,[["__scopeId","data-v-a2b6e2a4"]]),qn=["disabled","title"],Gn={key:0,class:"sync-icon"},Hn={key:1,class:"sync-icon"},Yn={key:2,class:"sync-icon"},Wn={class:"sync-text"},Xn=(0,r.defineComponent)({__name:"LoadingPreSeting",props:{size:{},variant:{}},emits:["loadCompleted","loadStarted"],setup(e,{emit:t}){const n=t,a=(0,r.ref)(!1),o=(0,r.ref)(!1),i=(0,r.ref)(!1);function s(){a.value||o.value?o.value&&ne.o.info("é¢„è®¾å·²åŠ è½½ï¼Œæ— éœ€é‡å¤æ“ä½œ"):(i.value=!0,n("loadStarted"))}async function l(e){a.value=!0,i.value=!1;const t="load-preset-toast";ne.o.loading("æ­£åœ¨åŠ è½½é¢„è®¾...",{id:t});try{console.log("[åŠ è½½é¢„è®¾ç»„ä»¶] é€‰ä¸­çš„é¢„è®¾:",e),await new Promise(e=>setTimeout(e,800)),ne.o.success(`é¢„è®¾ã€Œ${e.name}ã€åŠ è½½æˆåŠŸï¼`,{id:t}),o.value=!0,n("loadCompleted",{success:!0,message:"åŠ è½½æˆåŠŸ",presetData:e})}catch(e){console.error("[åŠ è½½é¢„è®¾ç»„ä»¶] åŠ è½½å¤±è´¥:",e);const a=e instanceof Error?e.message:"åŠ è½½å¤±è´¥";ne.o.error(`åŠ è½½å¤±è´¥: ${a}`,{id:t}),n("loadCompleted",{success:!1,message:a})}finally{a.value=!1}}return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",null,[(0,r.createElementVNode)("button",{onClick:s,class:(0,r.normalizeClass)(["cloud-sync-button",{synced:o.value}]),disabled:a.value,title:a.value?"æ­£åœ¨åŠ è½½é¢„è®¾...":o.value?"é¢„è®¾å·²åŠ è½½":"åŠ è½½é¢„è®¾"},[a.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",Gn,"â³")):o.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",Hn,"âœ…")):((0,r.openBlock)(),(0,r.createElementBlock)("span",Yn,"ğŸ“‚")),(0,r.createElementVNode)("span",Wn,(0,r.toDisplayString)(a.value?"åŠ è½½ä¸­":o.value?"å·²åŠ è½½":"åŠ è½½é¢„è®¾"),1)],10,qn),(0,r.createCommentVNode)(" é¢„è®¾åŠ è½½å¯¹è¯æ¡† "),(0,r.createVNode)(Un,{visible:i.value,onClose:t[0]||(t[0]=e=>i.value=!1),onSelect:l},null,8,["visible"])]))}});var Jn=n(8233),Kn={};Kn.styleTagTransform=k(),Kn.setAttributes=v(),Kn.insert=g().bind(null,"head"),Kn.domAPI=p(),Kn.insertStyleElement=y(),u()(Jn.A,Kn),Jn.A&&Jn.A.locals&&Jn.A.locals;const Qn=(0,N.A)(Xn,[["__scopeId","data-v-1f7f5d72"]]);var Zn=n(4717),ea=n(1783),ta=n(9037);const na={class:"modal-dialog"},aa={class:"modal-title"},ra={class:"form-fields"},oa=["for"],ia=["id","onUpdate:modelValue","placeholder","type"],sa=["id","onUpdate:modelValue","placeholder"],la=["id","onUpdate:modelValue"],ca=["value"],da={class:"dynamic-list-container"},ua={class:"list-header"},ma=["onClick"],pa={key:0,class:"list-items"},fa={class:"item-inputs"},ga=["onUpdate:modelValue"],ha=["value"],va=["onUpdate:modelValue","placeholder"],ba=["onUpdate:modelValue","placeholder"],ya=["onUpdate:modelValue","placeholder"],xa=["onClick"],ka={key:1,class:"empty-list"},wa={key:0,class:"error-messages"},Ea={class:"modal-actions"},Na=(0,r.defineComponent)({__name:"CustomCreationModal",props:{visible:{type:Boolean},title:{},fields:{},validationFn:{type:Function},initialData:{}},emits:["close","submit"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)({}),i=(0,r.ref)([]),s=(0,r.computed)(()=>n.fields.filter(e=>!e.condition||e.condition(o.value)));function l(){a("close")}function c(){i.value=[];const e=n.validationFn(o.value);e.valid?(a("submit",{...o.value}),l()):i.value=e.errors}return(0,r.watch)(()=>[n.fields,n.initialData],([e,t])=>{const n={};e.forEach(e=>{const a=t?.[e.key];"select"===e.type?n[e.key]=a??e.options?.[0]?.value??"":"dynamic-list"===e.type?n[e.key]=Array.isArray(a)?JSON.parse(JSON.stringify(a)):[]:n[e.key]=a??""}),o.value=n},{immediate:!0,deep:!0}),(e,t)=>((0,r.openBlock)(),(0,r.createBlock)(r.Transition,{name:"modal-fade"},{default:(0,r.withCtx)(()=>[e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(l,["self"])},[(0,r.createElementVNode)("div",na,[(0,r.createElementVNode)("h2",aa,(0,r.toDisplayString)(e.title),1),(0,r.createElementVNode)("div",ra,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s.value,t=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t.key,class:"form-group"},[(0,r.createElementVNode)("label",{for:t.key},(0,r.toDisplayString)(t.label),9,oa),"text"===t.type||"color"===t.type||"number"===t.type?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:0,id:t.key,"onUpdate:modelValue":e=>o.value[t.key]=e,placeholder:t.placeholder,type:t.type},null,8,ia)),[[r.vModelDynamic,o.value[t.key]]]):"textarea"===t.type?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("textarea",{key:1,id:t.key,"onUpdate:modelValue":e=>o.value[t.key]=e,placeholder:t.placeholder,rows:"5"},null,8,sa)),[[r.vModelText,o.value[t.key]]]):"select"===t.type?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("select",{key:2,id:t.key,"onUpdate:modelValue":e=>o.value[t.key]=e},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(t.options,e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{key:e.value,value:e.value},(0,r.toDisplayString)(e.label),9,ca))),128))],8,la)),[[r.vModelSelect,o.value[t.key]]]):"dynamic-list"===t.type?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:3},[(0,r.createCommentVNode)(" åŠ¨æ€åˆ—è¡¨å­—æ®µ "),(0,r.createElementVNode)("div",da,[(0,r.createElementVNode)("div",ua,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(t.label),1),(0,r.createElementVNode)("button",{onClick:e=>function(e){const t=o.value[e.key];Array.isArray(t)||(o.value[e.key]=[]);const n={};e.columns.forEach(e=>{"select"===e.type&&e.options?n[e.key]=e.options[0]?.value||"":n[e.key]=""}),o.value[e.key].push(n)}(t),class:"add-btn",type:"button"},"+ "+(0,r.toDisplayString)(e.$t("æ·»åŠ ")),9,ma)]),Array.isArray(o.value[t.key])&&o.value[t.key].length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",pa,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(o.value[t.key],(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:"list-item"},[(0,r.createElementVNode)("div",fa,["select"===t.columns[0].type?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("select",{key:0,"onUpdate:modelValue":n=>e[t.columns[0].key]=n,class:"item-input"},[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(t.columns[0].options,e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{key:e.value,value:e.value},(0,r.toDisplayString)(e.label),9,ha))),128))],8,ga)),[[r.vModelSelect,e[t.columns[0].key]]]):(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:1,"onUpdate:modelValue":n=>e[t.columns[0].key]=n,placeholder:t.columns[0].placeholder,class:"item-input"},null,8,va)),[[r.vModelText,e[t.columns[0].key]]]),t.columns[1]?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:2,"onUpdate:modelValue":n=>e[t.columns[1].key]=n,placeholder:t.columns[1].placeholder,class:"item-input"},null,8,ba)),[[r.vModelText,e[t.columns[1].key]]]):(0,r.createCommentVNode)("v-if",!0),t.columns[2]?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:3,"onUpdate:modelValue":n=>e[t.columns[2].key]=n,placeholder:t.columns[2].placeholder,class:"item-input",type:"number",step:"0.1"},null,8,ya)),[[r.vModelText,e[t.columns[2].key]]]):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("button",{onClick:e=>function(e,t){const n=o.value[e.key];Array.isArray(n)&&n.splice(t,1)}(t,n),class:"remove-btn",type:"button"},"Ã—",8,xa)]))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",ka,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("æš‚æ— æ•°æ®")),1)]))])],2112)):(0,r.createCommentVNode)("v-if",!0)]))),128))]),i.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",wa,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(i.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("p",{key:t},"* "+(0,r.toDisplayString)(e),1))),128))])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",Ea,[(0,r.createElementVNode)("button",{onClick:l,class:"btn btn-secondary"},(0,r.toDisplayString)(e.$t("å…³é—­")),1),(0,r.createElementVNode)("button",{onClick:c,class:"btn"},(0,r.toDisplayString)(e.$t("ç¡®è®¤")),1)])])])):(0,r.createCommentVNode)("v-if",!0)]),_:1}))}});var Sa=n(5609),Va={};Va.styleTagTransform=k(),Va.setAttributes=v(),Va.insert=g().bind(null,"head"),Va.domAPI=p(),Va.insertStyleElement=y(),u()(Sa.A,Va),Sa.A&&Sa.A.locals&&Sa.A.locals;const _a=(0,N.A)(Na,[["__scopeId","data-v-6ec25edf"]]),Ca={class:"modal-content"},Aa={class:"modal-header"},Da={class:"modal-body"},Ta={class:"hint"},Ba=["placeholder","onKeydown"],Ia={class:"modal-footer"},za=["disabled"],Ma=(0,r.defineComponent)({__name:"AIPromptModal",props:{visible:{type:Boolean}},emits:["close","submit"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)("");function i(){a("close")}function s(){const e=o.value.trim();e&&(a("submit",e),i())}return(0,r.watch)(()=>n.visible,e=>{e&&(o.value="")}),(e,t)=>e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(i,["self"])},[(0,r.createElementVNode)("div",Ca,[(0,r.createElementVNode)("div",Aa,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("AIæ¨æ¼”")),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:i},"Ã—")]),(0,r.createElementVNode)("div",Da,[(0,r.createElementVNode)("p",Ta,(0,r.toDisplayString)(e.$t("è¯·æè¿°ä½ æƒ³ç”Ÿæˆä»€ä¹ˆå†…å®¹ï¼š")),1),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),class:"prompt-input",placeholder:e.$t("ä¾‹å¦‚ï¼šç”Ÿæˆä¸€ä¸ªç«å±æ€§çš„å¤©èµ‹ï¼Œé€‚åˆå‰‘ä¿®..."),rows:"6",onKeydown:(0,r.withKeys)((0,r.withModifiers)(s,["ctrl"]),["enter"])},null,40,Ba),[[r.vModelText,o.value]])]),(0,r.createElementVNode)("div",Ia,[(0,r.createElementVNode)("button",{class:"cancel-btn",onClick:i},(0,r.toDisplayString)(e.$t("å–æ¶ˆ")),1),(0,r.createElementVNode)("button",{class:"submit-btn",onClick:s,disabled:!o.value.trim()},(0,r.toDisplayString)(e.$t("å¼€å§‹æ¨æ¼”")),9,za)])])])):(0,r.createCommentVNode)("v-if",!0)}});var Pa=n(625),Ra={};Ra.styleTagTransform=k(),Ra.setAttributes=v(),Ra.insert=g().bind(null,"head"),Ra.domAPI=p(),Ra.insertStyleElement=y(),u()(Pa.A,Ra),Pa.A&&Pa.A.locals&&Pa.A.locals;const $a=(0,N.A)(Ma,[["__scopeId","data-v-87e1862c"]]);var Oa=n(2288);async function La(e,t,n=!1){try{const a=await Oa.aiService.generateRaw({ordered_prompts:[{role:"user",content:t},{role:"user",content:e},{role:"user",content:"å¼€å§‹ä»»åŠ¡"}],should_stream:n,overrides:{world_info_before:"",world_info_after:""}});return a&&"object"==typeof a&&"text"in a?a.text:"string"==typeof a?a:String(a)}catch(e){throw console.error("[TavernCore] ç”Ÿæˆå“åº”å¤±è´¥:",e),e}}const Fa="ä½ æ˜¯ä¸“ä¸šçš„ä¸–ç•Œè§‚å†…å®¹ç”Ÿæˆå™¨ï¼Œæ ¹æ®ç”¨æˆ·æä¾›çš„ä¸»é¢˜ç”Ÿæˆå¯¹åº”é£æ ¼çš„å†…å®¹ã€‚\n\nã€ä¸–ç•Œè§‚æ ¸å¿ƒç†å¿µã€‘\n- ä¿®ä»™/è¶…å‡¡ä½“ç³»åªæ˜¯ä¸€ä¸ªèƒŒæ™¯å…ƒç´ ï¼Œä¸æ˜¯å”¯ä¸€é‡ç‚¹\n- ä¸¥æ ¼æŒ‰ç…§ç”¨æˆ·çš„é€‰æ‹©å’Œä¸–ç•Œè®¾å®šæ¥ç”Ÿæˆå†…å®¹\n- å¦‚æœç”¨æˆ·æŒ‡å®šäº†ç‰¹å®šé£æ ¼ï¼ˆç§‘å¹»ã€ç°ä»£ã€èµ›åšæœ‹å…‹ç­‰ï¼‰ï¼Œå¿…é¡»å®Œå…¨éµå¾ªè¯¥é£æ ¼\n- ä¸è¦é¢„è®¾å›ºå®šçš„ä¿®ä»™å‰§æƒ…æ–¹å‘ï¼Œè®©ç”¨æˆ·è‡ªå·±å†³å®šæ•…äº‹èµ°å‘\n\nã€è¾“å‡ºè¦æ±‚ã€‘\n1. æ‰€æœ‰æ•°å€¼å­—æ®µå¿…é¡»æ˜¯æ•°å­—ç±»å‹ã€‚\n2. è¾“å‡ºå¿…é¡»ä½¿ç”¨```jsonä»£ç å—åŒ…è£¹ã€‚\n3. ä¸å¾—æ·»åŠ ä»»ä½•é¢å¤–çš„è§£é‡Šè¯´æ˜æ–‡å­—ã€‚\n",ja=`${Fa}\n\nã€ä»»åŠ¡ã€‘ç”Ÿæˆä¸–ç•Œè®¾å®š\n\nã€å­—æ®µã€‘name(2-6å­—)/description(200-400å­—)/era(5-10å­—)\n`,Ua=`${Fa}\n\nã€ä»»åŠ¡ã€‘ç”Ÿæˆå¤©èµ‹ç­‰çº§\n\nã€å¿…å¡«å­—æ®µã€‘\n- name: å¤©èµ‹åç§°\n- description: æè¿°æ–‡å­—ï¼ˆ50-150å­—ï¼‰\n- total_points: æ€»ç‚¹æ•°ï¼ˆæ•°å­—ç±»å‹ï¼ŒèŒƒå›´10-50ï¼‰\n- rarity: ç¨€æœ‰åº¦ï¼ˆæ•°å­—ç±»å‹ï¼ŒèŒƒå›´1-5ï¼‰\n- color: é¢œè‰²ï¼ˆåå…­è¿›åˆ¶æ ¼å¼ï¼‰\n`,qa=`${Fa}\n\nã€ä»»åŠ¡ã€‘ç”Ÿæˆå‡ºèº«èƒŒæ™¯\n\nã€å­—æ®µè¦æ±‚ã€‘\n- name (å­—ç¬¦ä¸²): 4-6å­—çš„å‡ºèº«åç§°\n- description (å­—ç¬¦ä¸²): 100-300å­—çš„èƒŒæ™¯æ•…äº‹\n- talent_cost (æ•°å­—): 0-10ä¹‹é—´çš„æ•´æ•°\n- rarity (æ•°å­—): 1-5ä¹‹é—´çš„æ•´æ•°\n- attribute_modifiers (å¯¹è±¡): å…ˆå¤©å…­å¸åŠ æˆï¼Œæ€»å’Œä¸è¶…è¿‡5ç‚¹\n- effects (æ•°ç»„): 1-2ä¸ªç‹¬ç‰¹æ•ˆæœçš„æ–‡å­—æè¿°\n`,Ga=`${Fa}\n\nã€ä»»åŠ¡ã€‘ç”Ÿæˆæ ¸å¿ƒå¤©èµ‹ç±»å‹ï¼ˆå¦‚çµæ ¹ã€è¡€ç»Ÿç­‰ï¼‰\n\nã€å­—æ®µè¦æ±‚ã€‘\n- name (å­—ç¬¦ä¸²): çµæ ¹åç§°ï¼Œä¸å«ç­‰çº§å‰ç¼€\n- tier (å­—ç¬¦ä¸²): ç­‰çº§ï¼Œå¯é€‰å€¼ï¼šå‡¡å“ã€ä¸‹å“ã€ä¸­å“ã€ä¸Šå“ã€æå“ã€ç¥å“\n- description (å­—ç¬¦ä¸²): 50-200å­—çš„çµæ ¹æè¿°\n- cultivation_speed (å­—ç¬¦ä¸²): ä¿®ç‚¼é€Ÿåº¦ï¼Œæ ¼å¼ä¸º"æ•°å­—x"\n- special_effects (æ•°ç»„): 1-3ä¸ªç‰¹æ®Šæ•ˆæœ\n- base_multiplier (æ•°å­—): åŸºç¡€å€ç‡ï¼Œçº¯æ•°å­—\n- talent_cost (æ•°å­—): 3-30ä¹‹é—´çš„æ•´æ•°\n- rarity (æ•°å­—): 1-5ä¹‹é—´çš„æ•´æ•°\n`,Ha=`${Fa}\n\nã€ä»»åŠ¡ã€‘ç”Ÿæˆå…ˆå¤©å¤©èµ‹\n\nã€å­—æ®µè¦æ±‚ã€‘\n- name (å­—ç¬¦ä¸²): 4-6å­—çš„å¤©èµ‹åç§°\n- description (å­—ç¬¦ä¸²): 30-100å­—çš„å¤©èµ‹æè¿°\n`;function Ya(e,t,n,a){const r=[a];let o=!1,i=!1;for(let n=t;n<e.length;n++){const a=e[n];if(o){if(i){i=!1;continue}if("\\"===a){i=!0;continue}'"'===a&&(o=!1)}else if('"'!==a){if("{"===a)r.push("}");else if("["===a)r.push("]");else if("}"===a||"]"===a){if(a!==r[r.length-1])return null;if(r.pop(),0===r.length)return e.slice(t,n+1).trim()}}else o=!0}return null}function Wa(e){const t=function(e){if(!e)return null;const t=/```(?:json)?\s*([\s\S]*?)\s*```/gi;for(const n of e.matchAll(t)){const e=(n[1]||"").trim();if(e&&(e.includes("{")||e.includes("[")))return e}const n=[];for(let t=0;t<e.length;t++){const a=e[t];"{"===a&&n.push({index:t,opener:"{",closer:"}"}),"["===a&&n.push({index:t,opener:"[",closer:"]"})}for(const t of n){const n=Ya(e,t.index,t.opener,t.closer);if(n)return n}return null}(e);if(!t)throw new Error("æœªæ‰¾åˆ°å¯è§£æçš„ JSON ç‰‡æ®µ");return JSON.parse(t)}const Xa={class:"world-selection-container"},Ja={key:0,class:"loading-state"},Ka={key:1,class:"error-state"},Qa={key:2,class:"world-layout"},Za={class:"left-panel"},er={class:"top-actions-container"},tr={class:"action-name"},nr={class:"action-name"},ar={class:"list-container"},rr={key:0,class:"no-worlds-message"},or={class:"no-worlds-text"},ir={key:0,class:"no-worlds-hint"},sr=["onClick","onMouseover"],lr={class:"item-content"},cr={class:"item-name"},dr={key:0,class:"action-buttons"},ur=["onClick","title"],mr=["onClick","title"],pr={class:"details-container"},fr={key:0,class:"world-details"},gr={class:"details-header"},hr={class:"details-title"},vr=["title"],br={class:"btn-text"},yr={class:"era"},xr={class:"map-options"},kr={class:"map-options-header"},wr={class:"difficulty-section"},Er={class:"difficulty-label"},Nr={class:"difficulty-options"},Sr=["value"],Vr={class:"difficulty-name"},_r={class:"difficulty-desc"},Cr={class:"continents-only-section"},Ar={class:"continents-only-toggle"},Dr={class:"toggle-label"},Tr={class:"toggle-hint"},Br={key:0,class:"config-warning"},Ir={class:"warning-text"},zr={class:"warning-title"},Mr={class:"warning-desc"},Pr={class:"map-options-grid"},Rr={class:"option-item"},$r={class:"option-label"},Or=["disabled"],Lr={class:"config-hint"},Fr={class:"option-item"},jr={class:"option-label"},Ur=["disabled"],qr={class:"config-hint"},Gr={class:"option-item"},Hr={class:"option-label"},Yr=["disabled"],Wr={class:"config-hint"},Xr={class:"option-item"},Jr={class:"option-label"},Kr=["title"],Qr={class:"config-hint"},Zr={class:"map-options-actions"},eo={class:"description-scroll"},to={key:1,class:"placeholder"},no=(0,r.defineComponent)({__name:"Step1_WorldSelection",emits:["ai-generate"],setup(e,{emit:t}){const n=t,a=(0,ae.N)(),o=(0,r.ref)(null),i=(0,r.ref)(!1),s=(0,r.ref)(!1),l=(0,r.ref)(!1),c=(0,r.ref)(!1),d=(0,r.ref)(null),u=[{value:"ç®€å•",label:"ç®€å•",desc:"æœºç¼˜é¢‘ç¹ï¼Œæ•Œäººè¾ƒå¼±"},{value:"æ™®é€š",label:"æ™®é€š",desc:"æœºç¼˜ä¸å±é™©å¹¶å­˜"},{value:"å›°éš¾",label:"å›°éš¾",desc:"æœºç¼˜ç¨€å°‘ï¼Œæ•Œäººè¾ƒå¼º"},{value:"å™©æ¢¦",label:"å™©æ¢¦",desc:"ä¹æ­»ä¸€ç”Ÿï¼Œä¸¾æ­¥ç»´è‰°"}],m=(0,r.ref)((()=>{const e=a.worldGenerationConfig;return e&&e.majorFactionsCount?(console.log("[ä¸–ç•Œé…ç½®] ä»storeæ¢å¤å·²ä¿å­˜çš„é…ç½®:",e),{majorFactionsCount:e.majorFactionsCount,totalLocations:e.totalLocations,secretRealmsCount:e.secretRealmsCount,continentCount:e.continentCount,generateOnlyContinents:void 0===e.generateOnlyContinents||e.generateOnlyContinents}):(console.log("[ä¸–ç•Œé…ç½®] ä½¿ç”¨é»˜è®¤é…ç½®"),{majorFactionsCount:5,totalLocations:12,secretRealmsCount:5,continentCount:4,generateOnlyContinents:!0})})());(0,r.watch)(m,e=>{a.setWorldGenerationConfig(e),console.log("[ä¸–ç•Œé…ç½®] é…ç½®å·²æ›´æ–°å¹¶ä¿å­˜:",e)},{deep:!0});const p=(0,r.computed)(()=>{const e=a.creationData.worlds;if(console.log("ã€ä¸–ç•Œé€‰æ‹©ã€‘æ‰€æœ‰ä¸–ç•Œæ•°æ®:",e),console.log("ã€ä¸–ç•Œé€‰æ‹©ã€‘å½“å‰æ¨¡å¼:",a.isLocalCreation?"æœ¬åœ°":"è”æœº"),a.isLocalCreation){const t=e.filter(e=>"local"===e.source||"cloud"===e.source);return console.log("ã€ä¸–ç•Œé€‰æ‹©ã€‘å•æœºæ¨¡å¼å¯ç”¨ä¸–ç•Œåˆ—è¡¨:",t),t}{const t=e.filter(e=>"cloud"===e.source);if(console.log("ã€ä¸–ç•Œé€‰æ‹©ã€‘è”æœºæ¨¡å¼äº‘ç«¯ä¸–ç•Œåˆ—è¡¨:",t),console.log("ã€ä¸–ç•Œé€‰æ‹©ã€‘äº‘ç«¯ä¸–ç•Œæ•°é‡:",t.length),0===t.length){console.warn("ã€ä¸–ç•Œé€‰æ‹©ã€‘è­¦å‘Šï¼šè”æœºæ¨¡å¼ä¸‹æ²¡æœ‰äº‘ç«¯ä¸–ç•Œæ•°æ®ï¼Œå›é€€åˆ°æœ¬åœ°æ•°æ®ï¼");const t=e.filter(e=>"local"===e.source);return console.log("ã€ä¸–ç•Œé€‰æ‹©ã€‘å›é€€ä½¿ç”¨æœ¬åœ°ä¸–ç•Œ:",t),t}return t}}),f=[{key:"name",label:"ä¸–ç•Œåç§°",type:"text",placeholder:"ä¾‹å¦‚ï¼šä¹éœ„ç•Œ"},{key:"era",label:"æ—¶ä»£èƒŒæ™¯",type:"text",placeholder:"ä¾‹å¦‚ï¼šä»™é“æ˜Œéš†"},{key:"description",label:"ä¸–ç•Œæè¿°",type:"textarea",placeholder:"æè¿°è¿™ä¸ªä¸–ç•Œçš„èƒŒæ™¯æ•…äº‹ã€ä¿®ç‚¼ä½“ç³»ç‰¹ç‚¹ç­‰..."}];function g(e){const t={};return e.name?.trim()||(t.name="ä¸–ç•Œåç§°ä¸å¯ä¸ºç©º"),{valid:0===Object.keys(t).length,errors:Object.values(t)}}async function h(e){const t={id:Date.now(),name:e.name,era:e.era,description:e.description,source:"local"};try{a.addWorld(t),y(t),i.value=!1,ne.o.success(`è‡ªå®šä¹‰ä¸–ç•Œ "${t.name}" å·²æˆåŠŸä¿å­˜ï¼`)}catch(e){console.error("ä¿å­˜è‡ªå®šä¹‰ä¸–ç•Œå¤±è´¥:",e),ne.o.error("ä¿å­˜è‡ªå®šä¹‰ä¸–ç•Œå¤±è´¥ï¼")}}function v(){a.isLocalCreation?c.value=!0:n("ai-generate")}async function b(e){const t="ai-generate-world";ne.o.loading("å¤©æœºæ¨æ¼”ä¸­ï¼Œè¯·ç¨å€™...",{id:t});try{const n=await La(e,ja,!1);if(!n)return void ne.o.error("AIæ¨æ¼”å¤±è´¥",{id:t});let r;console.log("ã€AIæ¨æ¼”-ä¸–ç•Œã€‘å®Œæ•´å“åº”:",n);try{r=Wa(n)}catch(e){return console.error("ã€AIæ¨æ¼”-ä¸–ç•Œã€‘JSONè§£æå¤±è´¥:",e),void ne.o.error("AIæ¨æ¼”ç»“æœæ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ",{id:t})}if(!r.name)return void ne.o.error("AIæ¨æ¼”ç»“æœç¼ºå°‘ä¸–ç•Œåç§°",{id:t});const o={id:Date.now(),name:r.name||r.åç§°||"æœªå‘½åä¸–ç•Œ",era:r.era||r.æ—¶ä»£èƒŒæ™¯||"",description:r.description||r.æè¿°||r.ä¸–ç•Œæè¿°||"",source:"local"};a.addWorld(o),y(o),c.value=!1,ne.o.success(`AIæ¨æ¼”å®Œæˆï¼ä¸–ç•Œ "${o.name}" å·²ç”Ÿæˆ`,{id:t})}catch(e){console.error("ã€AIæ¨æ¼”-ä¸–ç•Œã€‘å¤±è´¥:",e),ne.o.error(`AIæ¨æ¼”å¤±è´¥: ${e.message}`,{id:t})}}function y(e){a.selectWorld(e.id),a.setWorldGenerationConfig(m.value)}function x(){const e=[3,4,5,6,7],t=[8,10,12,15,18],n=[3,4,5,6,8],r=[3,4,5,6];m.value={majorFactionsCount:e[Math.floor(Math.random()*e.length)],totalLocations:t[Math.floor(Math.random()*t.length)],secretRealmsCount:n[Math.floor(Math.random()*n.length)],continentCount:r[Math.floor(Math.random()*r.length)],generateOnlyContinents:m.value.generateOnlyContinents},a.setWorldGenerationConfig(m.value),ne.o.info("å·²éšæœºç”Ÿæˆä¸–ç•Œé…ç½®")}function k(){m.value={majorFactionsCount:5,totalLocations:12,secretRealmsCount:5,continentCount:4,generateOnlyContinents:!0},a.setWorldGenerationConfig(m.value),ne.o.info("å·²é‡ç½®ä¸ºé»˜è®¤é…ç½®")}const w=(0,r.computed)(()=>m.value.majorFactionsCount>8||m.value.totalLocations>15||m.value.secretRealmsCount>10);async function E(e){if(!d.value)return;const t={name:e.name,era:e.era,description:e.description};try{a.updateWorld(d.value.id,t)?(l.value=!1,d.value=null,ne.o.success(`ä¸–ç•Œ "${t.name}" å·²æ›´æ–°ï¼`)):ne.o.error("æ›´æ–°ä¸–ç•Œå¤±è´¥ï¼")}catch(e){console.error("æ›´æ–°ä¸–ç•Œå¤±è´¥:",e),ne.o.error("æ›´æ–°ä¸–ç•Œå¤±è´¥ï¼")}}const N=(0,r.computed)(()=>d.value?{name:d.value.name,era:d.value.era,description:d.value.description}:{});return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Xa,[(0,r.unref)(a).isLoading?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ja,(0,r.toDisplayString)(e.$t("æ­£åœ¨æ¨æ¼”è¯¸å¤©ä¸‡ç•Œ...")),1)):(0,r.unref)(a).error?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ka,(0,r.toDisplayString)(e.$t("å¤©æœºç´Šä¹±"))+"ï¼š"+(0,r.toDisplayString)((0,r.unref)(a).error),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",Qa,[(0,r.createCommentVNode)(" å·¦ä¾§é¢æ¿ï¼šä¸–ç•Œåˆ—è¡¨ "),(0,r.createElementVNode)("div",Za,[(0,r.createCommentVNode)(" é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® "),(0,r.createElementVNode)("div",er,[(0,r.unref)(a).isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[0]||(t[0]=e=>i.value=!0),class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",tr,(0,r.toDisplayString)(e.$t("è‡ªå®šä¹‰ä¸–ç•Œ")),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{onClick:v,class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",nr,(0,r.toDisplayString)(e.$t("AIæ¨æ¼”")),1)])]),(0,r.createElementVNode)("div",ar,[0===p.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",rr,[t[11]||(t[11]=(0,r.createElementVNode)("div",{class:"no-worlds-icon"},"ğŸŒŒ",-1)),(0,r.createElementVNode)("div",or,(0,r.toDisplayString)((0,r.unref)(a).isLocalCreation?e.$t("æš‚æ— æœ¬åœ°ä¸–ç•Œæ•°æ®"):e.$t("æš‚æ— äº‘ç«¯ä¸–ç•Œæ•°æ®")),1),(0,r.unref)(a).isLocalCreation?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",ir,(0,r.toDisplayString)(e.$t("è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–è”ç³»ç®¡ç†å‘˜")),1))])):((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:1},(0,r.renderList)(p.value,t=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t.id,class:(0,r.normalizeClass)(["list-item",{selected:(0,r.unref)(a).characterPayload.world_id===t.id}]),onClick:e=>y(t),onMouseover:e=>o.value=t},[(0,r.createElementVNode)("div",lr,[(0,r.createElementVNode)("span",cr,(0,r.toDisplayString)(t.name),1)]),"cloud"===t.source?((0,r.openBlock)(),(0,r.createElementBlock)("div",dr,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>function(e){d.value=e,l.value=!0}(t),["stop"]),class:"edit-btn",title:e.$t("ç¼–è¾‘æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(Zn.A),{size:14})],8,ur),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>async function(e){try{await a.removeWorld(e),console.log(`ã€ä¸–ç•Œé€‰æ‹©ã€‘æˆåŠŸåˆ é™¤ä¸–ç•Œ ID: ${e}`)}catch(t){console.error(`ã€ä¸–ç•Œé€‰æ‹©ã€‘åˆ é™¤ä¸–ç•Œå¤±è´¥ ID: ${e}`,t)}}(t.id),["stop"]),class:"delete-btn",title:e.$t("åˆ é™¤æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14})],8,mr)])):(0,r.createCommentVNode)("v-if",!0)],42,sr))),128))])]),(0,r.createCommentVNode)(" å³ä¾§é¢æ¿ï¼šä¸–ç•Œè¯¦æƒ… + åœ°å›¾ç”Ÿæˆé€‰é¡¹ "),(0,r.createElementVNode)("div",pr,[o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",fr,[(0,r.createElementVNode)("div",gr,[(0,r.createElementVNode)("h2",hr,(0,r.toDisplayString)(o.value.name),1),(0,r.createElementVNode)("button",{class:"map-settings-btn",onClick:t[1]||(t[1]=e=>s.value=!s.value),title:e.$t("åœ°å›¾ç”Ÿæˆé€‰é¡¹")},[(0,r.createVNode)((0,r.unref)(ta.A),{size:16}),(0,r.createElementVNode)("span",br,(0,r.toDisplayString)(e.$t("è®¾ç½®")),1)],8,vr)]),(0,r.createElementVNode)("p",yr,"ã€"+(0,r.toDisplayString)(o.value.era||e.$t("æ—¶ä»£æœªçŸ¥"))+"ã€‘",1),(0,r.createCommentVNode)(" åœ°å›¾ç”Ÿæˆé€‰é¡¹ï¼ˆç§»å…¥å³ä¾§è¯¦æƒ…å†…ï¼Œé¿å…æ•´ä½“é«˜åº¦æº¢å‡ºï¼‰ "),(0,r.withDirectives)((0,r.createElementVNode)("div",xr,[(0,r.createElementVNode)("div",kr,(0,r.toDisplayString)(e.$t("ä¸–ç•Œè§„æ¨¡é…ç½®")),1),(0,r.createCommentVNode)(" ä¿®ä»™éš¾åº¦é€‰æ‹© "),(0,r.createElementVNode)("div",wr,[(0,r.createElementVNode)("div",Er,(0,r.toDisplayString)(e.$t("ä¿®ä»™éš¾åº¦")),1),(0,r.createElementVNode)("div",Nr,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(u,e=>(0,r.createElementVNode)("label",{key:e.value,class:(0,r.normalizeClass)(["difficulty-option",{selected:(0,r.unref)(a).gameDifficulty===e.value}])},[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio",value:e.value,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,r.unref)(a).gameDifficulty=e),class:"difficulty-radio"},null,8,Sr),[[r.vModelRadio,(0,r.unref)(a).gameDifficulty]]),(0,r.createElementVNode)("span",Vr,(0,r.toDisplayString)(e.label),1),(0,r.createElementVNode)("span",_r,(0,r.toDisplayString)(e.desc),1)],2)),64))])]),(0,r.createCommentVNode)(" ä»…ç”Ÿæˆå¤§é™†å¼€å…³ "),(0,r.createElementVNode)("div",Cr,[(0,r.createElementVNode)("label",Ar,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>m.value.generateOnlyContinents=e),class:"toggle-checkbox"},null,512),[[r.vModelCheckbox,m.value.generateOnlyContinents]]),(0,r.createElementVNode)("span",Dr,(0,r.toDisplayString)(e.$t("ä»…ç”Ÿæˆå¤§é™†ï¼ˆå¼€å±€ä¼˜åŒ–ï¼‰")),1)]),(0,r.createElementVNode)("div",Tr,(0,r.toDisplayString)(m.value.generateOnlyContinents?e.$t("å¼€å±€åªç”Ÿæˆå¤§é™†ï¼ŒåŠ¿åŠ›å’Œåœ°ç‚¹å¯åœ¨æ¸¸æˆä¸­åŠ¨æ€ç”Ÿæˆï¼Œå‡å°‘tokenæ¶ˆè€—"):e.$t("å¼€å±€ç”Ÿæˆå®Œæ•´ä¸–ç•Œï¼ˆåŒ…æ‹¬åŠ¿åŠ›ã€åœ°ç‚¹å’Œç§˜å¢ƒï¼‰")),1)]),(0,r.createCommentVNode)(" é…ç½®è­¦å‘Šæç¤º "),w.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Br,[t[12]||(t[12]=(0,r.createElementVNode)("div",{class:"warning-icon"},"âš ï¸",-1)),(0,r.createElementVNode)("div",Ir,[(0,r.createElementVNode)("div",zr,(0,r.toDisplayString)(e.$t("é…ç½®è¿‡é«˜è­¦å‘Š")),1),(0,r.createElementVNode)("div",Mr,(0,r.toDisplayString)(e.$t("å½“å‰é…ç½®å¯èƒ½å¯¼è‡´ç”Ÿæˆå¤±è´¥ï¼Œå»ºè®®è°ƒæ•´è‡³åˆç†èŒƒå›´")),1)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æ ¸å¿ƒæ¸¸æˆé…ç½® "),(0,r.createElementVNode)("div",Pr,[(0,r.createElementVNode)("label",Rr,[(0,r.createElementVNode)("span",$r,(0,r.toDisplayString)(e.$t("ä¸»è¦åŠ¿åŠ›")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number",min:"1",max:"20",step:"1","onUpdate:modelValue":t[4]||(t[4]=e=>m.value.majorFactionsCount=e),class:(0,r.normalizeClass)({"config-risky":m.value.majorFactionsCount>8}),disabled:m.value.generateOnlyContinents},null,10,Or),[[r.vModelText,m.value.majorFactionsCount,void 0,{number:!0}]]),(0,r.createElementVNode)("span",Lr,(0,r.toDisplayString)(e.$t("æ¨è: 3-8")),1)]),(0,r.createElementVNode)("label",Fr,[(0,r.createElementVNode)("span",jr,(0,r.toDisplayString)(e.$t("åœ°ç‚¹æ€»æ•°")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number",min:"5",max:"100",step:"1","onUpdate:modelValue":t[5]||(t[5]=e=>m.value.totalLocations=e),class:(0,r.normalizeClass)({"config-risky":m.value.totalLocations>15}),disabled:m.value.generateOnlyContinents},null,10,Ur),[[r.vModelText,m.value.totalLocations,void 0,{number:!0}]]),(0,r.createElementVNode)("span",qr,(0,r.toDisplayString)(e.$t("æ¨è: 8-15")),1)]),(0,r.createElementVNode)("label",Gr,[(0,r.createElementVNode)("span",Hr,(0,r.toDisplayString)(e.$t("ç§˜å¢ƒæ•°é‡")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number",min:"0",max:"30",step:"1","onUpdate:modelValue":t[6]||(t[6]=e=>m.value.secretRealmsCount=e),class:(0,r.normalizeClass)({"config-risky":m.value.secretRealmsCount>10}),disabled:m.value.generateOnlyContinents},null,10,Yr),[[r.vModelText,m.value.secretRealmsCount,void 0,{number:!0}]]),(0,r.createElementVNode)("span",Wr,(0,r.toDisplayString)(e.$t("æ¨è: 3-10")),1)]),(0,r.createElementVNode)("label",Xr,[(0,r.createElementVNode)("span",Jr,(0,r.toDisplayString)(e.$t("å¤§é™†æ•°é‡")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number",min:"3",max:"7",step:"1","onUpdate:modelValue":t[7]||(t[7]=e=>m.value.continentCount=e),title:e.$t("å¤§é™†æ•°é‡å†³å®šä¸–ç•Œçš„å®è§‚æ ¼å±€ï¼Œ3-7ç‰‡å¤§é™†å½¢æˆä¸åŒçš„åœ°ç¼˜æ”¿æ²»ç»“æ„")},null,8,Kr),[[r.vModelText,m.value.continentCount,void 0,{number:!0}]]),(0,r.createElementVNode)("span",Qr,(0,r.toDisplayString)(e.$t("èŒƒå›´: 3-7")),1)])]),(0,r.createElementVNode)("div",Zr,[(0,r.createElementVNode)("button",{class:"opt-btn",onClick:x},(0,r.toDisplayString)(e.$t("éšæœº")),1),(0,r.createElementVNode)("button",{class:"opt-btn",onClick:k},(0,r.toDisplayString)(e.$t("é‡ç½®")),1)])],512),[[r.vShow,s.value]]),(0,r.withDirectives)((0,r.createElementVNode)("div",eo,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(o.value.description||e.$t("æ­¤ç•Œä¸€ç‰‡æ··æ²Œï¼Œå°šæ— æè¿°ã€‚")),1)],512),[[r.vShow,!s.value]])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",to,(0,r.toDisplayString)(e.$t("è¯·æ‹©ä¸€æ–¹å¤§åƒä¸–ç•Œï¼Œä»¥å®šé“åŸºã€‚")),1))])])),(0,r.createVNode)(_a,{visible:i.value,title:e.$t("è‡ªå®šä¹‰ä¸–ç•Œ"),fields:f,validationFn:g,onClose:t[8]||(t[8]=e=>i.value=!1),onSubmit:h},null,8,["visible","title"]),(0,r.createCommentVNode)(" ç¼–è¾‘æ¨¡æ€æ¡† "),(0,r.createVNode)(_a,{visible:l.value,title:e.$t("ç¼–è¾‘ä¸–ç•Œ"),fields:f,validationFn:g,initialData:N.value,onClose:t[9]||(t[9]=e=>{l.value=!1,d.value=null}),onSubmit:E},null,8,["visible","title","initialData"]),(0,r.createCommentVNode)(" AIæ¨æ¼”è¾“å…¥å¼¹çª— "),(0,r.createVNode)($a,{visible:c.value,onClose:t[10]||(t[10]=e=>c.value=!1),onSubmit:b},null,8,["visible"])]))}});var ao=n(8185),ro={};ro.styleTagTransform=k(),ro.setAttributes=v(),ro.insert=g().bind(null,"head"),ro.domAPI=p(),ro.insertStyleElement=y(),u()(ao.A,ro),ao.A&&ao.A.locals&&ao.A.locals;const oo=(0,N.A)(no,[["__scopeId","data-v-04af55ae"]]),io={class:"talent-tier-selection"},so={key:0,class:"loading-state"},lo={key:1,class:"error-state"},co={key:2,class:"tier-layout"},uo={class:"tier-left-panel"},mo={class:"top-actions-container"},po={class:"action-name"},fo={class:"action-name"},go={class:"tiers-list-container"},ho=["onClick","onMouseover"],vo={class:"item-content"},bo={class:"tier-name"},yo={class:"tier-points"},xo={key:0,class:"action-buttons"},ko=["onClick","title"],wo=["onClick","title"],Eo={class:"tier-details-container"},No={key:0,class:"tier-details"},So={class:"description-scroll"},Vo={class:"points-display"},_o={key:1,class:"placeholder"},Co=(0,r.defineComponent)({__name:"Step2_TalentTierSelection",emits:["ai-generate"],setup(e,{emit:t}){const n=t,a=(0,ae.N)(),o=(0,r.ref)(null),i=(0,r.ref)(!1),s=(0,r.ref)(!1),l=(0,r.ref)(!1),c=(0,r.ref)(null),d=(0,r.computed)(()=>{const e=a.creationData.talentTiers;if(console.log("ã€å¤©èµ„é€‰æ‹©ã€‘æ‰€æœ‰å¤©èµ„æ•°æ®:",e),console.log("ã€å¤©èµ„é€‰æ‹©ã€‘å½“å‰æ¨¡å¼:",a.isLocalCreation?"æœ¬åœ°":"è”æœº"),console.log("ã€å¤©èµ„é€‰æ‹©ã€‘æ•°æ®æ˜ç»†:",e.map(e=>({name:e.name,source:e.source,id:e.id}))),a.isLocalCreation){const t=e.filter(e=>"local"===e.source||"cloud"===e.source);return console.log("ã€å¤©èµ„é€‰æ‹©ã€‘å•æœºæ¨¡å¼å¯ç”¨å¤©èµ„åˆ—è¡¨:",t),t}{const t=e.length>0?e:[];return console.log("ã€å¤©èµ„é€‰æ‹©ã€‘è”æœºæ¨¡å¼å¤©èµ„åˆ—è¡¨:",t),console.log("ã€å¤©èµ„é€‰æ‹©ã€‘è”æœºæ¨¡å¼å¤©èµ„æ•°é‡:",t.length),0===t.length&&console.warn("ã€å¤©èµ„é€‰æ‹©ã€‘è­¦å‘Šï¼šè”æœºæ¨¡å¼ä¸‹æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å¤©èµ„æ•°æ®ï¼"),t}}),u=[{key:"name",label:"å¤©èµ„åç§°",type:"text",placeholder:"ä¾‹å¦‚ï¼šå‡¡äºº"},{key:"description",label:"å¤©èµ„æè¿°",type:"textarea",placeholder:"æè¿°æ­¤å¤©èµ„çš„ç‰¹ç‚¹..."},{key:"total_points",label:"å¤©é“ç‚¹",type:"number",placeholder:"ä¾‹å¦‚ï¼š10"},{key:"rarity",label:"ç¨€æœ‰åº¦",type:"number",placeholder:"1-10ï¼Œæ•°å€¼è¶Šé«˜è¶Šç¨€æœ‰"},{key:"color",label:"è¾‰å…‰é¢œè‰²",type:"color",placeholder:"ä¾‹å¦‚ï¼š#808080"}];function m(e){const t={};e.name?.trim()||(t.name="å¤©èµ„åç§°ä¸å¯ä¸ºç©º");const n=Number(e.total_points);(isNaN(n)||n<0)&&(t.total_points="å¤©é“ç‚¹å¿…é¡»æ˜¯éè´Ÿæ•°");const a=Number(e.rarity);return(isNaN(a)||a<1||a>10)&&(t.rarity="ç¨€æœ‰åº¦å¿…é¡»åœ¨1-10ä¹‹é—´"),{valid:0===Object.keys(t).length,errors:Object.values(t)}}async function p(e){const t={id:Date.now(),name:e.name,description:e.description,total_points:parseInt(e.total_points,10)||10,rarity:parseInt(e.rarity,10)||1,color:e.color||"#808080"};try{a.addTalentTier(t),h(t),i.value=!1,ne.o.success(`è‡ªå®šä¹‰å¤©èµ„ "${t.name}" å·²ä¿å­˜ï¼`)}catch(e){console.error("ä¿å­˜è‡ªå®šä¹‰å¤©èµ„å¤±è´¥:",e),ne.o.error("ä¿å­˜è‡ªå®šä¹‰å¤©èµ„å¤±è´¥ï¼")}}function f(){a.isLocalCreation?l.value=!0:n("ai-generate")}async function g(e){const t="ai-generate-talent-tier";ne.o.loading("å¤©æœºæ¨æ¼”ä¸­ï¼Œè¯·ç¨å€™...",{id:t});try{const n=await La(e,Ua,!1);if(!n)return void ne.o.error("AIæ¨æ¼”å¤±è´¥",{id:t});let r;console.log("ã€AIæ¨æ¼”-å¤©èµ„ã€‘å®Œæ•´å“åº”:",n);try{r=Wa(n)}catch(e){return console.error("ã€AIæ¨æ¼”-å¤©èµ„ã€‘JSONè§£æå¤±è´¥:",e),void ne.o.error("AIæ¨æ¼”ç»“æœæ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ",{id:t})}if(!r.name&&!r.åç§°)return void ne.o.error("AIæ¨æ¼”ç»“æœç¼ºå°‘å¤©èµ„åç§°",{id:t});const o={id:Date.now(),name:r.name||r.åç§°||"æœªå‘½åå¤©èµ„",description:r.description||r.æè¿°||r.è¯´æ˜||"",total_points:r.total_points||r.æ€»ç‚¹æ•°||r.ç‚¹æ•°||10,color:r.color||r.é¢œè‰²||"#808080",rarity:r.rarity||r.ç¨€æœ‰åº¦||1,source:"local"};a.addTalentTier(o),h(o),l.value=!1,ne.o.success(`AIæ¨æ¼”å®Œæˆï¼å¤©èµ„ "${o.name}" å·²ç”Ÿæˆ`,{id:t})}catch(e){console.error("ã€AIæ¨æ¼”-å¤©èµ„ã€‘å¤±è´¥:",e),ne.o.error(`AIæ¨æ¼”å¤±è´¥: ${e.message}`,{id:t})}}function h(e){a.selectTalentTier(e.id)}function v(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?`${parseInt(t[1],16)}, ${parseInt(t[2],16)}, ${parseInt(t[3],16)}`:"229, 192, 123"}async function b(e){if(!c.value)return;const t={name:e.name,description:e.description,total_points:parseInt(e.total_points,10)||10,rarity:parseInt(e.rarity,10)||1,color:e.color||"#808080"};try{a.updateTalentTier(c.value.id,t)?(s.value=!1,c.value=null,ne.o.success(`å¤©èµ„ "${t.name}" å·²æ›´æ–°ï¼`)):ne.o.error("æ›´æ–°å¤©èµ„å¤±è´¥ï¼")}catch(e){console.error("æ›´æ–°å¤©èµ„å¤±è´¥:",e),ne.o.error("æ›´æ–°å¤©èµ„å¤±è´¥ï¼")}}const y=(0,r.computed)(()=>c.value?{name:c.value.name,description:c.value.description,total_points:c.value.total_points.toString(),rarity:c.value.rarity?.toString()||"1",color:c.value.color}:{});return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",io,[(0,r.unref)(a).isLoading?((0,r.openBlock)(),(0,r.createElementBlock)("div",so,(0,r.toDisplayString)(e.$t("æ„Ÿåº”å¤©é“ï¼Œæµ‹ç®—å¤©èµ„...")),1)):(0,r.unref)(a).error?((0,r.openBlock)(),(0,r.createElementBlock)("div",lo,(0,r.toDisplayString)(e.$t("å¤©æœºæ··æ²Œ"))+"ï¼š"+(0,r.toDisplayString)((0,r.unref)(a).error),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",co,[(0,r.createCommentVNode)(" å·¦ä¾§é¢æ¿ï¼šåˆ—è¡¨å’Œæ“ä½œæŒ‰é’® "),(0,r.createElementVNode)("div",uo,[(0,r.createCommentVNode)(" é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® "),(0,r.createElementVNode)("div",mo,[(0,r.unref)(a).isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[0]||(t[0]=e=>i.value=!0),class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",po,(0,r.toDisplayString)(e.$t("è‡ªå®šä¹‰å¤©èµ„")),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{onClick:f,class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",fo,(0,r.toDisplayString)(e.$t("AIæ¨æ¼”")),1)])]),(0,r.createElementVNode)("div",go,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(d.value,t=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t.id,class:(0,r.normalizeClass)(["tier-item",{selected:(0,r.unref)(a).characterPayload.talent_tier_id===t.id}]),style:(0,r.normalizeStyle)({"--tier-glow-color":t.color,"--tier-glow-color-rgb":v(t.color)}),onClick:e=>h(t),onMouseover:e=>o.value=t},[(0,r.createElementVNode)("div",vo,[(0,r.createElementVNode)("span",bo,(0,r.toDisplayString)(t.name),1),(0,r.createElementVNode)("span",yo,(0,r.toDisplayString)(t.total_points)+" "+(0,r.toDisplayString)(e.$t("ç‚¹")),1)]),"cloud"===t.source?((0,r.openBlock)(),(0,r.createElementBlock)("div",xo,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>function(e){c.value=e,s.value=!0}(t),["stop"]),class:"edit-btn",title:e.$t("ç¼–è¾‘æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(Zn.A),{size:14})],8,ko),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>async function(e){console.log(`ğŸ”¥ ç‚¹å‡»åˆ é™¤æŒ‰é’®ï¼Œå‡†å¤‡åˆ é™¤å¤©èµ„ ID: ${e}`);try{await a.removeTalentTier(e),console.log(`ã€å¤©èµ„é€‰æ‹©ã€‘æˆåŠŸåˆ é™¤å¤©èµ„ ID: ${e}`)}catch(t){console.error(`ã€å¤©èµ„é€‰æ‹©ã€‘åˆ é™¤å¤©èµ„å¤±è´¥ ID: ${e}`,t)}}(t.id),["stop"]),class:"delete-btn",title:e.$t("åˆ é™¤æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14})],8,wo)])):(0,r.createCommentVNode)("v-if",!0)],46,ho))),128))])]),(0,r.createCommentVNode)(" å³ä¾§è¯¦æƒ… "),(0,r.createElementVNode)("div",Eo,[o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",No,[(0,r.createElementVNode)("h2",{style:(0,r.normalizeStyle)({color:o.value.color})},(0,r.toDisplayString)(o.value.name),5),(0,r.createElementVNode)("div",So,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(o.value.description),1)]),(0,r.createElementVNode)("div",Vo,(0,r.toDisplayString)(e.$t("å¤©é“ç‚¹"))+": "+(0,r.toDisplayString)(o.value.total_points),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",_o,(0,r.toDisplayString)(e.$t("è¯·é€‰æ‹©ä½ çš„å¤©èµ„ç­‰çº§ï¼Œè¿™å°†å†³å®šä½ çš„èµ·ç‚¹ã€‚")),1))])])),(0,r.createVNode)(_a,{visible:i.value,title:e.$t("è‡ªå®šä¹‰å¤©èµ„"),fields:u,validationFn:m,onClose:t[1]||(t[1]=e=>i.value=!1),onSubmit:p},null,8,["visible","title"]),(0,r.createCommentVNode)(" ç¼–è¾‘æ¨¡æ€æ¡† "),(0,r.createVNode)(_a,{visible:s.value,title:e.$t("ç¼–è¾‘å¤©èµ„"),fields:u,validationFn:m,initialData:y.value,onClose:t[2]||(t[2]=e=>{s.value=!1,c.value=null}),onSubmit:b},null,8,["visible","title","initialData"]),(0,r.createCommentVNode)(" AIæ¨æ¼”è¾“å…¥å¼¹çª— "),(0,r.createVNode)($a,{visible:l.value,onClose:t[3]||(t[3]=e=>l.value=!1),onSubmit:g},null,8,["visible"])]))}});var Ao=n(4532),Do={};Do.styleTagTransform=k(),Do.setAttributes=v(),Do.insert=g().bind(null,"head"),Do.domAPI=p(),Do.insertStyleElement=y(),u()(Ao.A,Do),Ao.A&&Ao.A.locals&&Ao.A.locals;const To=(0,N.A)(Co,[["__scopeId","data-v-7141b6e9"]]),Bo={class:"origin-selection-container"},Io={key:0,class:"loading-state"},zo={key:1,class:"error-state"},Mo={key:2,class:"origin-layout"},Po={class:"origin-left-panel"},Ro={class:"top-actions-container"},$o={class:"action-name"},Oo={class:"action-name"},Lo={class:"origin-list-container"},Fo={class:"origin-name"},jo={class:"origin-cost"},Uo=["onClick","onMouseover"],qo={class:"item-content"},Go={class:"origin-name"},Ho={class:"origin-cost"},Yo={key:0,class:"action-buttons"},Wo=["onClick","title"],Xo=["onClick","title"],Jo={class:"origin-details-container"},Ko={key:0,class:"origin-details"},Qo={class:"description-scroll"},Zo={class:"cost-display"},ei={key:1,class:"placeholder"},ti=(0,r.defineComponent)({__name:"Step3_OriginSelection",emits:["ai-generate"],setup(e,{emit:t}){const n=t,a=(0,ae.N)(),o=(0,r.ref)(null),i=(0,r.ref)(!1),s=(0,r.ref)(!1),l=(0,r.ref)(!1),c=(0,r.ref)(null),d=(0,r.computed)(()=>{const e=a.creationData.origins;if(console.log("ã€å‡ºèº«é€‰æ‹©ã€‘æ‰€æœ‰å‡ºèº«æ•°æ®:",e),console.log("ã€å‡ºèº«é€‰æ‹©ã€‘å½“å‰æ¨¡å¼:",a.isLocalCreation?"æœ¬åœ°":"è”æœº"),a.isLocalCreation){const t=e.filter(e=>"local"===e.source||"cloud"===e.source);return console.log("ã€å‡ºèº«é€‰æ‹©ã€‘å•æœºæ¨¡å¼å¯ç”¨å‡ºèº«åˆ—è¡¨:",t),t}{const t=e.filter(e=>"cloud"===e.source);return console.log("ã€å‡ºèº«é€‰æ‹©ã€‘è”æœºæ¨¡å¼å‡ºèº«åˆ—è¡¨:",t),console.log("ã€å‡ºèº«é€‰æ‹©ã€‘äº‘ç«¯å‡ºèº«æ•°é‡:",t.length),0===t.length&&(console.warn("ã€å‡ºèº«é€‰æ‹©ã€‘è­¦å‘Šï¼šè”æœºæ¨¡å¼ä¸‹æ²¡æœ‰æ‰¾åˆ°äº‘ç«¯å‡ºèº«æ•°æ®ï¼"),console.log("ã€å‡ºèº«é€‰æ‹©ã€‘æ‰€æœ‰å‡ºèº«çš„sourceåˆ†å¸ƒ:",e.reduce((e,t)=>(e[t.source]=(e[t.source]||0)+1,e),{}))),t}}),u=[{key:"name",label:"å‡ºèº«åç§°",type:"text",placeholder:"ä¾‹å¦‚ï¼šå±±é‡é—å­¤"},{key:"description",label:"å‡ºèº«æè¿°",type:"textarea",placeholder:"æè¿°æ­¤å‡ºèº«çš„èƒŒæ™¯æ•…äº‹å’Œæˆé•¿ç»å†..."},{key:"talent_cost",label:"å¤©é“ç‚¹æ¶ˆè€—",type:"number",placeholder:"é€‰æ‹©æ­¤å‡ºèº«éœ€è¦æ¶ˆè€—çš„å¤©é“ç‚¹ï¼Œå¯ä¸ºè´Ÿæ•°è¡¨ç¤ºå¥–åŠ±"},{key:"rarity",label:"ç¨€æœ‰åº¦",type:"number",placeholder:"1-10ï¼Œæ•°å€¼è¶Šé«˜è¶Šç¨€æœ‰"},{key:"attribute_modifiers",label:"å±æ€§ä¿®æ­£",type:"dynamic-list",columns:[{key:"attribute",placeholder:"å±æ€§åç§°",type:"select",options:[{value:"æ ¹éª¨",label:"æ ¹éª¨"},{value:"çµæ€§",label:"çµæ€§"},{value:"æ‚Ÿæ€§",label:"æ‚Ÿæ€§"},{value:"æ°”è¿",label:"æ°”è¿"},{value:"é­…åŠ›",label:"é­…åŠ›"},{value:"å¿ƒæ€§",label:"å¿ƒæ€§"}]},{key:"value",placeholder:"ä¿®æ­£å€¼ï¼ˆå¯ä¸ºè´Ÿæ•°ï¼‰",type:"text"}]},{key:"background_effects",label:"èƒŒæ™¯æ•ˆæœ",type:"dynamic-list",columns:[{key:"type",placeholder:"æ•ˆæœç±»å‹ï¼ˆå¦‚ï¼šæŠ€èƒ½ã€èµ„æºã€å…³ç³»ï¼‰"},{key:"description",placeholder:"æ•ˆæœæè¿°"}]}];function m(e){const t={};e.name?.trim()||(t.name="å‡ºèº«åç§°ä¸å¯ä¸ºç©º"),e.description?.trim()||(t.description="å‡ºèº«æè¿°ä¸å¯ä¸ºç©º");const n=Number(e.talent_cost);void 0!==e.talent_cost&&""!==e.talent_cost&&isNaN(n)&&(t.talent_cost="å¤©é“ç‚¹æ¶ˆè€—å¿…é¡»æ˜¯æ•°å­—");const a=Number(e.rarity);return void 0!==e.rarity&&""!==e.rarity&&(isNaN(a)||a<1||a>10)&&(t.rarity="ç¨€æœ‰åº¦å¿…é¡»åœ¨1-10ä¹‹é—´"),{valid:0===Object.keys(t).length,errors:Object.values(t)}}async function p(e){const t={};Array.isArray(e.attribute_modifiers)&&e.attribute_modifiers.forEach(e=>{e.attribute&&e.value&&(t[e.attribute]=Number(e.value)||0)});const n=Array.isArray(e.background_effects)?e.background_effects.filter(e=>e.type&&e.description):[],r={id:Date.now(),name:e.name,description:e.description,talent_cost:Number(e.talent_cost)||0,attribute_modifiers:t,background_effects:n,rarity:Number(e.rarity)||1,source:"local"};try{a.addOrigin(r),y(r),i.value=!1,ne.o.success(`è‡ªå®šä¹‰å‡ºèº« "${r.name}" å·²ä¿å­˜ï¼`)}catch(e){console.error("ä¿å­˜è‡ªå®šä¹‰å‡ºèº«å¤±è´¥:",e),ne.o.error("ä¿å­˜è‡ªå®šä¹‰å‡ºèº«å¤±è´¥ï¼")}}function f(){if(a.isLocalCreation){if(!a.selectedWorld)return void ne.o.error("è¯·å…ˆé€‰æ‹©ä¸€æ–¹å¤§åƒä¸–ç•Œï¼Œæ–¹å¯æ¨æ¼”å‡ºèº«ã€‚");l.value=!0}else n("ai-generate")}async function g(e){const t="ai-generate-origin";ne.o.loading("å¤©æœºæ¨æ¼”ä¸­ï¼Œè¯·ç¨å€™...",{id:t});try{const n=await La(e,qa,!1);if(!n)return void ne.o.error("AIæ¨æ¼”å¤±è´¥",{id:t});let r;console.log("ã€AIæ¨æ¼”-å‡ºèº«ã€‘å®Œæ•´å“åº”:",n);try{r=Wa(n)}catch(e){return console.error("ã€AIæ¨æ¼”-å‡ºèº«ã€‘JSONè§£æå¤±è´¥:",e),void ne.o.error("AIæ¨æ¼”ç»“æœæ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ",{id:t})}if(!r.name&&!r.åç§°)return void ne.o.error("AIæ¨æ¼”ç»“æœç¼ºå°‘å‡ºèº«åç§°",{id:t});let o=r.talent_cost||r.å¤©é“ç‚¹æ¶ˆè€—||r.æ¶ˆè€—å¤©é“ç‚¹;null==o?(console.warn("ã€AIæ¨æ¼”-å‡ºèº«ã€‘AIæœªè¿”å›å¤©é“ç‚¹æ¶ˆè€—å­—æ®µï¼Œä½¿ç”¨é»˜è®¤å€¼3"),ne.o.warning("AIæœªè®¾ç½®å¤©é“ç‚¹æ¶ˆè€—ï¼Œå·²è‡ªåŠ¨è®¾ä¸º3ç‚¹",{id:t,duration:2e3}),o=3):(o=Number(o),isNaN(o)&&(console.warn("ã€AIæ¨æ¼”-å‡ºèº«ã€‘å¤©é“ç‚¹æ¶ˆè€—ä¸æ˜¯æœ‰æ•ˆæ•°å­—ï¼Œä½¿ç”¨é»˜è®¤å€¼3"),o=3));const i={id:Date.now(),name:r.name||r.åç§°||"æœªå‘½åå‡ºèº«",description:r.description||r.æè¿°||r.è¯´æ˜||"",talent_cost:o,attribute_modifiers:r.attribute_modifiers||r.å±æ€§ä¿®æ­£||{},background_effects:r.background_effects||r.èƒŒæ™¯æ•ˆæœ||[],rarity:r.rarity||r.ç¨€æœ‰åº¦||1,source:"local"};a.addOrigin(i),y(i),l.value=!1,ne.o.success(`AIæ¨æ¼”å®Œæˆï¼å‡ºèº« "${i.name}" å·²ç”Ÿæˆ`,{id:t})}catch(e){console.error("ã€AIæ¨æ¼”-å‡ºèº«ã€‘å¤±è´¥:",e),ne.o.error(`AIæ¨æ¼”å¤±è´¥: ${e.message}`,{id:t})}}const h=e=>{if(a.characterPayload.origin_id===e.id)return!0;const t=a.selectedOrigin?.talent_cost??0;return a.remainingTalentPoints+t>=e.talent_cost};async function v(e){if(!c.value)return;const t={};Array.isArray(e.attribute_modifiers)&&e.attribute_modifiers.forEach(e=>{e.attribute&&e.value&&(t[e.attribute]=Number(e.value)||0)});const n=Array.isArray(e.background_effects)?e.background_effects.filter(e=>e.type&&e.description):[],r={name:e.name,description:e.description,talent_cost:Number(e.talent_cost)||0,rarity:Number(e.rarity)||1,attribute_modifiers:t,background_effects:n};try{a.updateOrigin(c.value.id,r)?(s.value=!1,c.value=null,ne.o.success(`å‡ºèº« "${r.name}" å·²æ›´æ–°ï¼`)):ne.o.error("æ›´æ–°å‡ºèº«å¤±è´¥ï¼")}catch(e){console.error("æ›´æ–°å‡ºèº«å¤±è´¥:",e),ne.o.error("æ›´æ–°å‡ºèº«å¤±è´¥ï¼")}}const b=(0,r.computed)(()=>{if(!c.value)return{};const e=c.value.attribute_modifiers?Object.entries(c.value.attribute_modifiers).map(([e,t])=>({attribute:e,value:String(t)})):[];return{name:c.value.name,description:c.value.description,talent_cost:c.value.talent_cost.toString(),rarity:c.value.rarity.toString(),attribute_modifiers:e,background_effects:c.value.background_effects||[]}});function y(e){if(!h(e))return void ne.o.warning("å¤©é“ç‚¹ä¸è¶³ï¼Œæ— æ³•é€‰æ‹©æ­¤å‡ºèº«ã€‚");const t=a.characterPayload.origin_id===e.id?null:e.id;a.selectOrigin(t)}function x(){a.selectOrigin(null)}const k=(0,r.computed)(()=>null===a.characterPayload.origin_id),w=((0,r.computed)(()=>k.value?"éšæœºå‡ºèº«":a.selectedOrigin?.name||""),(0,r.computed)(()=>k.value?"å¤©é“æ— å¸¸ï¼Œé€ åŒ–å¼„äººã€‚é€‰æ‹©æ­¤é¡¹ï¼Œä½ çš„å‡ºèº«å°†å®Œå…¨éšæœºç”Ÿæˆã€‚æ˜¯ç”Ÿäºå¸ç‹ä¹‹å®¶ï¼Œæˆ–ä¸ºå±±é‡é—å­¤ï¼Œçš†åœ¨å¤©é“ä¸€å¿µä¹‹é—´ã€‚":a.selectedOrigin?.description||"èº«ä¸–å¦‚è°œï¼Œè¿‡å¾€ä¸€ç‰‡ç©ºç™½ã€‚"),(0,r.computed)(()=>k.value?0:a.selectedOrigin?.talent_cost||0),(0,r.computed)(()=>"random"===o.value?"éšæœºå‡ºèº«":o.value&&"object"==typeof o.value?o.value.name:"")),E=(0,r.computed)(()=>"random"===o.value?"å¤©é“æ— å¸¸ï¼Œé€ åŒ–å¼„äººã€‚é€‰æ‹©æ­¤é¡¹ï¼Œä½ çš„å‡ºèº«å°†å®Œå…¨éšæœºç”Ÿæˆã€‚æ˜¯ç”Ÿäºå¸ç‹ä¹‹å®¶ï¼Œæˆ–ä¸ºå±±é‡é—å­¤ï¼Œçš†åœ¨å¤©é“ä¸€å¿µä¹‹é—´ã€‚":o.value&&"object"==typeof o.value&&o.value.description||"èº«ä¸–å¦‚è°œï¼Œè¿‡å¾€ä¸€ç‰‡ç©ºç™½ã€‚"),N=(0,r.computed)(()=>"random"===o.value?0:o.value&&"object"==typeof o.value&&o.value.talent_cost||0);return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Bo,[(0,r.unref)(a).isLoading?((0,r.openBlock)(),(0,r.createElementBlock)("div",Io,(0,r.toDisplayString)(e.$t("è¿½æº¯è¿‡å¾€ï¼Œæ¢å¯»å‡ºèº«...")),1)):(0,r.unref)(a).error?((0,r.openBlock)(),(0,r.createElementBlock)("div",zo,(0,r.toDisplayString)(e.$t("å› æœä¸æ˜"))+"ï¼š"+(0,r.toDisplayString)((0,r.unref)(a).error),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",Mo,[(0,r.createCommentVNode)(" å·¦ä¾§æ ï¼šåˆ—è¡¨å’Œæ“ä½œæŒ‰é’® "),(0,r.createElementVNode)("div",Po,[(0,r.createCommentVNode)(" é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® "),(0,r.createElementVNode)("div",Ro,[(0,r.unref)(a).isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[0]||(t[0]=e=>i.value=!0),class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",$o,(0,r.toDisplayString)(e.$t("è‡ªå®šä¹‰å‡ºèº«")),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{onClick:f,class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",Oo,(0,r.toDisplayString)(e.$t("AIæ¨æ¼”")),1)])]),(0,r.createElementVNode)("div",Lo,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["origin-item",{selected:k.value}]),onClick:x,onMouseover:t[1]||(t[1]=e=>o.value="random")},[(0,r.createElementVNode)("span",Fo,(0,r.toDisplayString)(e.$t("éšæœºå‡ºèº«")),1),(0,r.createElementVNode)("span",jo,(0,r.toDisplayString)(e.$t("0 ç‚¹")),1)],34),t[5]||(t[5]=(0,r.createElementVNode)("div",{class:"divider"},null,-1)),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(d.value,t=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t.id,class:(0,r.normalizeClass)(["origin-item",{selected:(0,r.unref)(a).characterPayload.origin_id===t.id,disabled:!h(t)}]),onClick:e=>y(t),onMouseover:e=>o.value=t},[(0,r.createElementVNode)("div",qo,[(0,r.createElementVNode)("span",Go,(0,r.toDisplayString)(t.name),1),(0,r.createElementVNode)("span",Ho,(0,r.toDisplayString)(t.talent_cost)+" "+(0,r.toDisplayString)(e.$t("ç‚¹")),1)]),"cloud"===t.source?((0,r.openBlock)(),(0,r.createElementBlock)("div",Yo,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>function(e){c.value=e,s.value=!0}(t),["stop"]),class:"edit-btn",title:e.$t("ç¼–è¾‘æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(Zn.A),{size:14})],8,Wo),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>async function(e){try{await a.removeOrigin(e),console.log(`ã€å‡ºèº«é€‰æ‹©ã€‘æˆåŠŸåˆ é™¤å‡ºèº« ID: ${e}`)}catch(t){console.error(`ã€å‡ºèº«é€‰æ‹©ã€‘åˆ é™¤å‡ºèº«å¤±è´¥ ID: ${e}`,t)}}(t.id),["stop"]),class:"delete-btn",title:e.$t("åˆ é™¤æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14})],8,Xo)])):(0,r.createCommentVNode)("v-if",!0)],42,Uo))),128))])]),(0,r.createCommentVNode)(" å³ä¾§è¯¦æƒ… "),(0,r.createElementVNode)("div",Jo,[o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ko,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(w.value),1),(0,r.createElementVNode)("div",Qo,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(E.value),1)]),(0,r.createElementVNode)("div",Zo,(0,r.toDisplayString)(e.$t("æ¶ˆè€—å¤©é“ç‚¹: {0}").replace("{0}",String(N.value))),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",ei,(0,r.toDisplayString)(e.$t("è¯·é€‰æ‹©ä¸€å¤„å‡ºèº«ï¼Œæˆ–å¬å¤©ç”±å‘½ã€‚")),1))])])),(0,r.createVNode)(_a,{visible:i.value,title:e.$t("è‡ªå®šä¹‰å‡ºèº«"),fields:u,validationFn:m,onClose:t[2]||(t[2]=e=>i.value=!1),onSubmit:p},null,8,["visible","title"]),(0,r.createCommentVNode)(" ç¼–è¾‘æ¨¡æ€æ¡† "),(0,r.createVNode)(_a,{visible:s.value,title:e.$t("ç¼–è¾‘å‡ºèº«"),fields:u,validationFn:m,initialData:b.value,onClose:t[3]||(t[3]=e=>{s.value=!1,c.value=null}),onSubmit:v},null,8,["visible","title","initialData"]),(0,r.createCommentVNode)(" AIæ¨æ¼”è¾“å…¥å¼¹çª— "),(0,r.createVNode)($a,{visible:l.value,onClose:t[4]||(t[4]=e=>l.value=!1),onSubmit:g},null,8,["visible"])]))}});var ni=n(852),ai={};ai.styleTagTransform=k(),ai.setAttributes=v(),ai.insert=g().bind(null,"head"),ai.domAPI=p(),ai.insertStyleElement=y(),u()(ni.A,ai),ni.A&&ni.A.locals&&ni.A.locals;const ri=(0,N.A)(ti,[["__scopeId","data-v-67f47fdd"]]),oi={class:"spirit-root-selection-container"},ii={key:0,class:"loading-state"},si={key:1,class:"error-state"},li={key:2,class:"spirit-root-layout"},ci={class:"spirit-root-left-panel"},di={class:"top-actions-container"},ui={class:"action-name"},mi={class:"action-name"},pi={class:"selection-mode-tabs"},fi={key:0,class:"preset-mode"},gi={class:"spirit-root-list-container"},hi={class:"spirit-root-name"},vi={class:"spirit-root-cost"},bi=["onClick","onMouseover"],yi={class:"item-content"},xi={class:"spirit-root-name-container"},ki={class:"spirit-root-name"},wi={class:"spirit-root-cost"},Ei={key:0,class:"action-buttons"},Ni=["onClick"],Si=["onClick"],Vi={key:1,class:"custom-mode"},_i={class:"custom-selection-container"},Ci={class:"selection-group"},Ai={class:"selection-label"},Di={class:"spirit-type-grid"},Ti=["onClick"],Bi={class:"type-icon"},Ii={class:"type-name"},zi={class:"selection-group"},Mi={class:"selection-label"},Pi={class:"tier-selection"},Ri=["onClick"],$i={class:"tier-name"},Oi={class:"tier-multiplier"},Li={class:"tier-cost"},Fi={class:"custom-preview"},ji={class:"preview-title"},Ui={class:"preview-content"},qi={class:"preview-name"},Gi={class:"preview-stats"},Hi={class:"stat"},Yi={class:"stat"},Wi=["disabled"],Xi={class:"spirit-root-details-container"},Ji={key:0,class:"spirit-root-details"},Ki={class:"description-scroll"},Qi={class:"stats-display"},Zi={class:"stat-item"},es={class:"stat-label"},ts={class:"stat-value"},ns={class:"stat-item"},as={class:"stat-label"},rs={class:"stat-value"},os={key:1,class:"placeholder"},is=(0,r.defineComponent)({__name:"Step4_SpiritRootSelection",emits:["ai-generate"],setup(e,{emit:t}){const n=t,a=(0,ae.N)(),o=(0,r.ref)(null),i=(0,r.ref)("preset"),s=(0,r.ref)(!1),l=(0,r.ref)(!1),c=(0,r.ref)(!1),d=(0,r.ref)(null),u=(0,r.reactive)({type:"none",tier:"none"}),m=[{key:"fire",name:"ç«",icon:"ğŸ”¥",color:"#ef4444",desc:"çƒˆç«ç„šå¤©ï¼Œçˆ†å‘åŠ›å¼º"},{key:"water",name:"æ°´",icon:"ğŸ’§",color:"#3b82f6",desc:"æ°´æµä¸æ¯ï¼Œç»µå»¶æ‚ é•¿"},{key:"wood",name:"æœ¨",icon:"ğŸŒ¿",color:"#10b981",desc:"ç”Ÿæœºç›ç„¶ï¼Œæ²»æ„ˆä¿®å¤"},{key:"metal",name:"é‡‘",icon:"âš”ï¸",color:"#f59e0b",desc:"é”‹é”æ— åŒ¹ï¼Œåˆ‡é‡‘æ–­ç‰"},{key:"earth",name:"åœŸ",icon:"ğŸ—¿",color:"#8b5cf6",desc:"åšå¾·è½½ç‰©ï¼Œé˜²å¾¡è¶…ç¾¤"},{key:"wind",name:"é£",icon:"ğŸ’¨",color:"#06b6d4",desc:"é£é©°ç”µæ£ï¼Œèº«æ³•å¦‚ç¥"},{key:"thunder",name:"é›·",icon:"âš¡",color:"#eab308",desc:"é›·éœ†ä¸‡é’§ï¼Œæ¯å¤©ç­åœ°"},{key:"ice",name:"å†°",icon:"â„ï¸",color:"#0ea5e9",desc:"å†°éœœåˆºéª¨ï¼Œä¸‡ç‰©å‡‹é›¶"},{key:"light",name:"å…‰",icon:"â˜€ï¸",color:"#f97316",desc:"å…‰æ˜æ™®ç…§ï¼Œå‡€åŒ–é‚ªæ¶"},{key:"dark",name:"æš—",icon:"ğŸŒ‘",color:"#6b7280",desc:"å¹½æš—æ·±é‚ƒï¼Œè¯¡å¼‚è«æµ‹"},{key:"space",name:"ç©ºé—´",icon:"ğŸŒ€",color:"#7c3aed",desc:"è™šç©ºæŒªç§»ï¼Œç©ºé—´æŒæ§"},{key:"time",name:"æ—¶é—´",icon:"â°",color:"#ec4899",desc:"æ—¶å…‰æµè½¬ï¼Œé€†è½¬ä¹¾å¤"}],p=[{key:"common",name:"å‡¡å“",multiplier:1,cost:0,desc:"å¹³å¹³æ— å¥‡çš„æ™®é€šçµæ ¹"},{key:"low",name:"ä¸‹å“",multiplier:1.1,cost:3,desc:"ç•¥æœ‰å¤©èµ‹ï¼Œå‹‰å¼ºå¯ç”¨"},{key:"middle",name:"ä¸­å“",multiplier:1.3,cost:6,desc:"èµ„è´¨å°šå¯ï¼Œå°æœ‰æˆå°±"},{key:"high",name:"ä¸Šå“",multiplier:1.6,cost:10,desc:"å¤©èµ‹å“è¶Šï¼Œå‰é€”æ— é‡"},{key:"supreme",name:"æå“",multiplier:2,cost:15,desc:"ä¸‡ä¸­æ— ä¸€ï¼Œå¤©ä¹‹éª„å­"},{key:"heaven",name:"ä»™å“",multiplier:2.4,cost:20,desc:"å¤©é™å¼‚è±¡ï¼Œä¸¾ä¸–ç½•è§"},{key:"divine",name:"ç¥å“",multiplier:2.8,cost:25,desc:"ç¥é¬¼è«æµ‹ï¼Œé€†å¤©æ”¹å‘½"},{key:"special",name:"ç‰¹æ®Š",multiplier:0,cost:0,desc:"ç‰¹æ®Šä½“è´¨ï¼Œå¦æœ‰å¥¥å¦™"}],f=(0,r.computed)(()=>a.isLocalCreation?a.creationData.spiritRoots.filter(e=>"local"===e.source||"cloud"===e.source):a.creationData.spiritRoots.filter(e=>"cloud"===e.source)),g=[{key:"name",label:"çµæ ¹åç§°",type:"text",placeholder:"ä¾‹å¦‚ï¼šæ··æ²Œçµæ ¹"},{key:"tier",label:"å“çº§",type:"select",options:p.map(e=>({value:e.key,label:e.name}))},{key:"description",label:"çµæ ¹æè¿°",type:"textarea",placeholder:"æè¿°è¿™ä¸ªçµæ ¹çš„ç‰¹æ€§å’ŒèƒŒæ™¯æ•…äº‹..."},{key:"cultivation_speed",label:"ä¿®ç‚¼é€Ÿåº¦",type:"text",placeholder:"ä¾‹å¦‚ï¼šæå¿«ã€å¿«é€Ÿã€æ™®é€šã€ç¼“æ…¢"},{key:"base_multiplier",label:"ä¿®ç‚¼å€ç‡",type:"number",placeholder:"ä¾‹å¦‚ï¼š1.5"},{key:"talent_cost",label:"æ¶ˆè€—å¤©é“ç‚¹",type:"number",placeholder:"ä¾‹å¦‚ï¼š10"},{key:"rarity",label:"ç¨€æœ‰åº¦",type:"number",placeholder:"1-10ï¼Œæ•°å€¼è¶Šé«˜è¶Šç¨€æœ‰"},{key:"special_effects",label:"ç‰¹æ®Šæ•ˆæœ",type:"dynamic-list",columns:[{key:"effect",placeholder:"æ•ˆæœæè¿°ï¼Œå¦‚ï¼šé›·ç³»æ³•æœ¯å¨åŠ›+80%"}]}],h=(0,r.computed)(()=>null===a.characterPayload.spirit_root_id),v=(0,r.computed)(()=>"random"===o.value?"éšæœºçµæ ¹":o.value&&"object"==typeof o.value?o.value.name:""),b=(0,r.computed)(()=>"random"===o.value?"å¤§é“äº”åï¼Œå¤©è¡å››ä¹ï¼Œäººéå…¶ä¸€ã€‚é€‰æ‹©æ­¤é¡¹ï¼Œä½ çš„çµæ ¹å°†å®Œå…¨éšæœºç”Ÿæˆï¼Œå¯èƒ½ä¸€æ­¥ç™»å¤©ï¼Œäº¦å¯èƒ½å¹³åº¸æ— å¥‡ã€‚":o.value&&"object"==typeof o.value&&o.value.description||"çµæ ¹ä¿¡æ¯ä¸æ˜ã€‚"),y=(0,r.computed)(()=>"random"===o.value?0:o.value&&"object"==typeof o.value&&o.value.talent_cost||0),x=e=>{if(a.characterPayload.spirit_root_id===e.id)return!0;const t=a.selectedSpiritRoot?.talent_cost??0;return a.remainingTalentPoints+t>=e.talent_cost};function k(e){if(!x(e))return void ne.o.warning("å¤©é“ç‚¹ä¸è¶³ï¼Œæ— æ³•é€‰æ‹©æ­¤çµæ ¹ã€‚");const t=a.characterPayload.spirit_root_id===e.id?null:e.id;a.selectSpiritRoot(t)}function w(){a.selectSpiritRoot(null)}function E(){a.isLocalCreation?c.value=!0:n("ai-generate")}async function N(e){const t="ai-generate-spirit-root";ne.o.loading("å¤©æœºæ¨æ¼”ä¸­ï¼Œè¯·ç¨å€™...",{id:t});try{const n=await La(e,Ga,!1);if(!n)return void ne.o.error("AIæ¨æ¼”å¤±è´¥",{id:t});let r;console.log("ã€AIæ¨æ¼”-çµæ ¹ã€‘å®Œæ•´å“åº”:",n);try{r=Wa(n)}catch(e){return console.error("ã€AIæ¨æ¼”-çµæ ¹ã€‘JSONè§£æå¤±è´¥:",e),void ne.o.error("AIæ¨æ¼”ç»“æœæ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ",{id:t})}if(!r.name&&!r.åç§°)return void ne.o.error("AIæ¨æ¼”ç»“æœç¼ºå°‘çµæ ¹åç§°",{id:t});const o={id:Date.now(),name:String(r.name||r["åç§°"]||"æœªå‘½åçµæ ¹"),tier:String(r.tier||r["å“çº§"]||r["ç­‰çº§"]||""),description:String(r.description||r["æè¿°"]||r["è¯´æ˜"]||""),base_multiplier:Number(r.base_multiplier||r["ä¿®ç‚¼å€ç‡"])||1,talent_cost:Number(r.talent_cost||r["å¤©é“ç‚¹æ¶ˆè€—"]||r["ç‚¹æ•°æ¶ˆè€—"])||5,rarity:Number(r.rarity||r["ç¨€æœ‰åº¦"])||3,source:"local"};a.addSpiritRoot(o),k(o),c.value=!1,ne.o.success(`AIæ¨æ¼”å®Œæˆï¼çµæ ¹ "${o.name}" å·²ç”Ÿæˆ`,{id:t})}catch(e){console.error("ã€AIæ¨æ¼”-çµæ ¹ã€‘å¤±è´¥:",e);const n=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";ne.o.error(`AIæ¨æ¼”å¤±è´¥: ${n}`,{id:t})}}function S(e){return e.tier||""}function V(){if("none"===u.type)return"è¯·é€‰æ‹©çµæ ¹ç±»å‹";const e=m.find(e=>e.key===u.type);return e?`${e.name}çµæ ¹`:"æœªçŸ¥çµæ ¹"}function _(){if("none"===u.tier)return 1;const e=p.find(e=>e.key===u.tier);return e?e.multiplier:1}function C(){if("none"===u.tier)return 0;const e=p.find(e=>e.key===u.tier);return e?e.cost:0}function A(e){const t=p.find(t=>t.key===e);return t?t.name:""}function D(){return"none"!==u.type&&"none"!==u.tier}function T(){if(!D())return void ne.o.warning("è¯·å®Œæ•´é€‰æ‹©çµæ ¹ç±»å‹å’Œå“çº§");const e=m.find(e=>e.key===u.type),t=p.find(e=>e.key===u.tier);if(!e||!t)return void ne.o.error("é€‰æ‹©çš„çµæ ¹é…ç½®æ— æ•ˆ");const n={id:Date.now(),name:`${e.name}çµæ ¹`,description:`${t.desc}çš„${e.desc}`,base_multiplier:t.multiplier,talent_cost:t.cost,tier:t.name,source:"cloud"};a.addSpiritRoot(n),k(n),ne.o.success(`è‡ªå®šä¹‰çµæ ¹ "${n.name}" å·²åˆ›å»ºï¼`),u.type="none",u.tier="none"}function B(){if("custom"===i.value&&"none"!==u.type){const e=m.find(e=>e.key===u.type),t=p.find(e=>e.key===u.tier);return e&&t&&"none"!==u.tier?`${t.desc}çš„${e.desc}`:e?e.desc:"è¯·é€‰æ‹©çµæ ¹å“çº§"}return b.value}function I(e){return function(e){const t={};e.name?.trim()||(t.name="çµæ ¹åç§°ä¸å¯ä¸ºç©º"),e.tier||(t.tier="è¯·é€‰æ‹©å“çº§"),e.description?.trim()||(t.description="çµæ ¹æè¿°ä¸å¯ä¸ºç©º");const n=Number(e.base_multiplier);void 0!==e.base_multiplier&&""!==e.base_multiplier&&isNaN(n)&&(t.base_multiplier="ä¿®ç‚¼å€ç‡å¿…é¡»ä¸ºæ•°å­—");const a=Number(e.talent_cost);void 0!==e.talent_cost&&""!==e.talent_cost&&isNaN(a)&&(t.talent_cost="æ¶ˆè€—ç‚¹æ•°å¿…é¡»ä¸ºæ•°å­—");const r=Number(e.rarity);return void 0!==e.rarity&&""!==e.rarity&&(isNaN(r)||r<1||r>10)&&(t.rarity="ç¨€æœ‰åº¦å¿…é¡»åœ¨1-10ä¹‹é—´"),{valid:0===Object.keys(t).length,errors:Object.values(t)}}(e)}function z(e){!async function(e){const t=e.special_effects?.length?e.special_effects.filter(e=>e.effect?.trim()).map(e=>e.effect.trim()):[],n={id:Date.now(),name:e.name,tier:p.find(t=>t.key===e.tier)?.name||e.tier,description:e.description,cultivation_speed:e.cultivation_speed||"æ™®é€š",special_effects:t,base_multiplier:Number(e.base_multiplier)||1,talent_cost:Number(e.talent_cost)||0,rarity:Number(e.rarity)||1,source:"cloud"};try{a.addSpiritRoot(n),k(n),s.value=!1,ne.o.success(`è‡ªå®šä¹‰çµæ ¹ "${n.name}" å·²ä¿å­˜ï¼`)}catch(e){console.error("ä¿å­˜è‡ªå®šä¹‰çµæ ¹å¤±è´¥:",e),ne.o.error("ä¿å­˜è‡ªå®šä¹‰çµæ ¹å¤±è´¥ï¼")}}(e)}async function M(e){if(!d.value)return;const t=e.special_effects?.length?e.special_effects.filter(e=>e.effect?.trim()).map(e=>e.effect.trim()):[],n={name:e.name,tier:p.find(t=>t.key===e.tier)?.name||e.tier,description:e.description,cultivation_speed:`${e.base_multiplier}x`,special_effects:t,base_multiplier:parseFloat(String(e.base_multiplier))||1,talent_cost:parseInt(String(e.talent_cost),10)||0};try{a.updateSpiritRoot(d.value.id,n)?(l.value=!1,d.value=null,ne.o.success(`çµæ ¹ "${n.name}" å·²æ›´æ–°ï¼`)):ne.o.error("æ›´æ–°çµæ ¹å¤±è´¥ï¼")}catch(e){console.error("æ›´æ–°çµæ ¹å¤±è´¥:",e),ne.o.error("æ›´æ–°çµæ ¹å¤±è´¥ï¼")}}const P=(0,r.computed)(()=>d.value?{name:d.value.name,tier:p.find(e=>e.name===d.value.tier)?.key||"common",description:d.value.description,base_multiplier:d.value.base_multiplier?.toString()||"1.0",talent_cost:d.value.talent_cost.toString(),special_effects:d.value.special_effects?.map(e=>({effect:e}))||[]}:{});return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",oi,[(0,r.unref)(a).isLoading?((0,r.openBlock)(),(0,r.createElementBlock)("div",ii,(0,r.toDisplayString)(e.$t("å¤©åœ°ç„é»„ï¼Œæ¢æŸ¥çµæ ¹...")),1)):(0,r.unref)(a).error?((0,r.openBlock)(),(0,r.createElementBlock)("div",si,(0,r.toDisplayString)(e.$t("å¤©æœºæ··æ²Œï¼š"))+(0,r.toDisplayString)((0,r.unref)(a).error),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",li,[(0,r.createCommentVNode)(" å·¦ä¾§é¢æ¿ï¼šé€‰æ‹©å’Œæ“ä½œ "),(0,r.createElementVNode)("div",ci,[(0,r.createCommentVNode)(" é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® "),(0,r.createElementVNode)("div",di,[(0,r.unref)(a).isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[0]||(t[0]=e=>s.value=!0),class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",ui,(0,r.toDisplayString)(e.$t("é«˜çº§è‡ªå®šä¹‰")),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{onClick:E,class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",mi,(0,r.toDisplayString)(e.$t("AIæ¨æ¼”")),1)])]),(0,r.createCommentVNode)(" é€‰æ‹©æ¨¡å¼åˆ‡æ¢ "),(0,r.createElementVNode)("div",pi,[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)([{active:"preset"===i.value},"mode-tab"]),onClick:t[1]||(t[1]=e=>i.value="preset")},(0,r.toDisplayString)(e.$t("é¢„è®¾çµæ ¹")),3),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)([{active:"custom"===i.value},"mode-tab"]),onClick:t[2]||(t[2]=e=>i.value="custom")},(0,r.toDisplayString)(e.$t("ç»„åˆé€‰æ‹©")),3)]),(0,r.createCommentVNode)(" é¢„è®¾çµæ ¹æ¨¡å¼ "),"preset"===i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",fi,[(0,r.createElementVNode)("div",gi,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["spirit-root-item",{selected:h.value}]),onClick:w,onMouseover:t[3]||(t[3]=e=>o.value="random")},[(0,r.createElementVNode)("span",hi,(0,r.toDisplayString)(e.$t("éšæœºçµæ ¹")),1),(0,r.createElementVNode)("span",vi,(0,r.toDisplayString)(e.$t("0 ç‚¹")),1)],34),t[7]||(t[7]=(0,r.createElementVNode)("div",{class:"divider"},null,-1)),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value,t=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t.id,class:(0,r.normalizeClass)(["spirit-root-item",{selected:(0,r.unref)(a).characterPayload.spirit_root_id===t.id,disabled:!x(t)}]),onClick:e=>k(t),onMouseover:e=>o.value=t},[(0,r.createElementVNode)("div",yi,[(0,r.createElementVNode)("div",xi,[(0,r.createElementVNode)("span",ki,(0,r.toDisplayString)(t.name),1),S(t)?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:0,class:(0,r.normalizeClass)(["spirit-root-tier",`tier-${S(t)}`])},(0,r.toDisplayString)(S(t)),3)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("span",wi,(0,r.toDisplayString)(t.talent_cost)+" "+(0,r.toDisplayString)(e.$t("ç‚¹")),1)]),"cloud"===t.source?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ei,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>function(e){d.value=e,l.value=!0}(t),["stop"]),class:"edit-btn",title:"ç¼–è¾‘æ­¤é¡¹"},[(0,r.createVNode)((0,r.unref)(Zn.A),{size:14})],8,Ni),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>async function(e){try{await a.removeSpiritRoot(e),console.log(`ã€çµæ ¹é€‰æ‹©ã€‘æˆåŠŸåˆ é™¤çµæ ¹ ID: ${e}`)}catch(t){console.error(`ã€çµæ ¹é€‰æ‹©ã€‘åˆ é™¤çµæ ¹å¤±è´¥ ID: ${e}`,t)}}(t.id),["stop"]),class:"delete-btn",title:"åˆ é™¤æ­¤é¡¹"},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14})],8,Si)])):(0,r.createCommentVNode)("v-if",!0)],42,bi))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ç»„åˆé€‰æ‹©æ¨¡å¼ "),"custom"===i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Vi,[(0,r.createElementVNode)("div",_i,[(0,r.createCommentVNode)(" çµæ ¹ç±»å‹é€‰æ‹© "),(0,r.createElementVNode)("div",Ci,[(0,r.createElementVNode)("label",Ai,(0,r.toDisplayString)(e.$t("çµæ ¹ç±»å‹")),1),(0,r.createElementVNode)("div",Di,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(m,e=>(0,r.createElementVNode)("button",{key:e.key,class:(0,r.normalizeClass)([{selected:u.type===e.key},"type-button"]),onClick:t=>u.type=e.key,style:(0,r.normalizeStyle)({"--element-color":e.color})},[(0,r.createElementVNode)("span",Bi,(0,r.toDisplayString)(e.icon),1),(0,r.createElementVNode)("span",Ii,(0,r.toDisplayString)(e.name),1)],14,Ti)),64))])]),(0,r.createCommentVNode)(" å“çº§é€‰æ‹© "),(0,r.createElementVNode)("div",zi,[(0,r.createElementVNode)("label",Mi,(0,r.toDisplayString)(e.$t("çµæ ¹å“çº§")),1),(0,r.createElementVNode)("div",Pi,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(p,e=>(0,r.createElementVNode)("button",{key:e.key,class:(0,r.normalizeClass)(["tier-button",`tier-${e.key}`,{selected:u.tier===e.key}]),onClick:t=>u.tier=e.key},[(0,r.createElementVNode)("span",$i,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("span",Oi,(0,r.toDisplayString)(e.multiplier)+"x",1),(0,r.createElementVNode)("span",Li,(0,r.toDisplayString)(e.cost)+"ç‚¹",1)],10,Ri)),64))])]),(0,r.createCommentVNode)(" é¢„è§ˆå’Œç¡®è®¤ "),(0,r.createElementVNode)("div",Fi,[(0,r.createElementVNode)("div",ji,(0,r.toDisplayString)(e.$t("é¢„è§ˆ")),1),(0,r.createElementVNode)("div",Ui,[(0,r.createElementVNode)("div",qi,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(V()),1),"none"!==u.tier?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:0,class:(0,r.normalizeClass)(["preview-tier",`tier-${u.tier}`])},(0,r.toDisplayString)(A(u.tier)),3)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",Gi,[(0,r.createElementVNode)("div",Hi,(0,r.toDisplayString)(e.$t("ä¿®ç‚¼å€ç‡:"))+" "+(0,r.toDisplayString)(_())+"x",1),(0,r.createElementVNode)("div",Yi,(0,r.toDisplayString)(e.$t("æ¶ˆè€—ç‚¹æ•°:"))+" "+(0,r.toDisplayString)(C())+(0,r.toDisplayString)(e.$t("ç‚¹")),1)])]),(0,r.createElementVNode)("button",{onClick:T,disabled:!D(),class:"confirm-custom-button"},(0,r.toDisplayString)(e.$t("ç¡®è®¤é€‰æ‹©")),9,Wi)])])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" å³ä¾§è¯¦æƒ… "),(0,r.createElementVNode)("div",Xi,[o.value||"custom"===i.value&&"none"!==u.type?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ji,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)("custom"===i.value&&"none"!==u.type?V():v.value),1),(0,r.createElementVNode)("div",Ki,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(B()),1)]),(0,r.createElementVNode)("div",Qi,[(0,r.createElementVNode)("div",Zi,[(0,r.createElementVNode)("span",es,(0,r.toDisplayString)(e.$t("ä¿®ç‚¼å€ç‡:")),1),(0,r.createElementVNode)("span",ts,(0,r.toDisplayString)("custom"===i.value&&"none"!==u.type?_().toString():"random"===o.value?"éšæœº":o.value&&"object"==typeof o.value?(o.value.base_multiplier||1).toString():"1.0")+"x",1)]),(0,r.createElementVNode)("div",ns,[(0,r.createElementVNode)("span",as,(0,r.toDisplayString)(e.$t("æ¶ˆè€—å¤©é“ç‚¹:")),1),(0,r.createElementVNode)("span",rs,(0,r.toDisplayString)("custom"===i.value&&"none"!==u.type?C().toString():y.value.toString())+(0,r.toDisplayString)(e.$t("ç‚¹")),1)])])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",os,(0,r.toDisplayString)(e.$t("è¯·é€‰æ‹©ä¸€ç§çµæ ¹ï¼Œæˆ–å¬å¤©ç”±å‘½ã€‚")),1))])])),(0,r.createCommentVNode)(" é«˜çº§è‡ªå®šä¹‰æ¨¡æ€æ¡† "),(0,r.createVNode)(_a,{visible:s.value,title:e.$t("é«˜çº§è‡ªå®šä¹‰çµæ ¹"),fields:g,validationFn:I,onClose:t[4]||(t[4]=e=>s.value=!1),onSubmit:z},null,8,["visible","title"]),(0,r.createCommentVNode)(" ç¼–è¾‘æ¨¡æ€æ¡† "),(0,r.createVNode)(_a,{visible:l.value,title:e.$t("ç¼–è¾‘çµæ ¹"),fields:g,validationFn:I,initialData:P.value,onClose:t[5]||(t[5]=e=>{l.value=!1,d.value=null}),onSubmit:M},null,8,["visible","title","initialData"]),(0,r.createCommentVNode)(" AIæ¨æ¼”è¾“å…¥å¼¹çª— "),(0,r.createVNode)($a,{visible:c.value,onClose:t[6]||(t[6]=e=>c.value=!1),onSubmit:N},null,8,["visible"])]))}});var ss=n(4127),ls={};ls.styleTagTransform=k(),ls.setAttributes=v(),ls.insert=g().bind(null,"head"),ls.domAPI=p(),ls.insertStyleElement=y(),u()(ss.A,ls),ss.A&&ss.A.locals&&ss.A.locals;const cs=(0,N.A)(is,[["__scopeId","data-v-6c1f24fe"]]),ds={class:"talent-selection-container"},us={key:0,class:"loading-state"},ms={key:1,class:"error-state"},ps={key:2,class:"talent-layout"},fs={class:"talent-left-panel"},gs={class:"top-actions-container"},hs={class:"action-name"},vs={class:"action-name"},bs={class:"talent-list-container"},ys=["onClick","onMouseover"],xs={class:"item-content"},ks={class:"talent-name"},ws={class:"talent-cost"},Es={key:0,class:"action-buttons"},Ns=["onClick","title"],Ss=["onClick","title"],Vs={class:"talent-details-container"},_s={key:0,class:"talent-details"},Cs={class:"description-scroll"},As={key:1,class:"placeholder"},Ds=(0,r.defineComponent)({__name:"Step5_TalentSelection",emits:["ai-generate"],setup(e,{emit:t}){const n=t,a=(0,ae.N)(),o=(0,r.ref)(null),i=(0,r.ref)(!1),s=(0,r.ref)(!1),l=(0,r.ref)(!1),c=(0,r.ref)(null),d=(0,r.computed)(()=>{const e=a.creationData.talents;if(console.log("ã€å¤©èµ‹é€‰æ‹©ã€‘æ‰€æœ‰å¤©èµ‹æ•°æ®:",e.length,"ä¸ª"),console.log("ã€å¤©èµ‹é€‰æ‹©ã€‘å½“å‰æ¨¡å¼:",a.isLocalCreation?"æœ¬åœ°":"è”æœº"),a.isLocalCreation){const t=e.filter(e=>"local"===e.source||"cloud"===e.source);return console.log("ã€å¤©èµ‹é€‰æ‹©ã€‘å•æœºæ¨¡å¼å¯ç”¨å¤©èµ‹æ•°é‡:",t.length),t}{const t=e.length>0?e:[];return console.log("ã€å¤©èµ‹é€‰æ‹©ã€‘è”æœºæ¨¡å¼å¤©èµ‹æ•°é‡:",t.length),0===t.length&&console.warn("ã€å¤©èµ‹é€‰æ‹©ã€‘è­¦å‘Šï¼šè”æœºæ¨¡å¼ä¸‹æ²¡æœ‰æ‰¾åˆ°ä»»ä½•å¤©èµ‹æ•°æ®ï¼"),t}}),u=[{key:"name",label:"å¤©èµ‹åç§°",type:"text",placeholder:"ä¾‹å¦‚ï¼šé“å¿ƒå¤©æˆ"},{key:"description",label:"å¤©èµ‹æè¿°",type:"textarea",placeholder:"æè¿°æ­¤å¤©èµ‹çš„æœ¬è´¨..."},{key:"talent_cost",label:"å¤©é“ç‚¹æ¶ˆè€—",type:"number",placeholder:"ä¾‹å¦‚ï¼š3"},{key:"rarity",label:"ç¨€æœ‰åº¦",type:"number",placeholder:"1-10ï¼Œæ•°å€¼è¶Šé«˜è¶Šç¨€æœ‰"},{key:"effects",label:"å¤©èµ‹æ•ˆæœ",type:"dynamic-list",columns:[{key:"ç±»å‹",placeholder:"æ•ˆæœç±»å‹",type:"select",options:[{value:"å±æ€§åŠ æˆ",label:"å±æ€§åŠ æˆ"},{value:"æŠ€èƒ½è§£é”",label:"æŠ€èƒ½è§£é”"},{value:"ç‰¹æ®Šèƒ½åŠ›",label:"ç‰¹æ®Šèƒ½åŠ›"},{value:"ä¿®ç‚¼åŠ æˆ",label:"ä¿®ç‚¼åŠ æˆ"}]},{key:"ç›®æ ‡",placeholder:"ç›®æ ‡ï¼ˆå¦‚ï¼šæ ¹éª¨ã€æ‚Ÿæ€§ï¼‰"},{key:"æ•°å€¼",placeholder:"æ•°å€¼ï¼ˆå¦‚ï¼š+2ã€+10%ï¼‰"}]}];function m(e){const t={};e.name?.trim()||(t.name="å¤©èµ‹åç§°ä¸å¯ä¸ºç©º"),e.description?.trim()||(t.description="å¤©èµ‹æè¿°ä¸å¯ä¸ºç©º");const n=Number(e.talent_cost);void 0===e.talent_cost||null===e.talent_cost||""===e.talent_cost||isNaN(n)?t.talent_cost="å¤©é“ç‚¹æ¶ˆè€—å¿…é¡»å¡«å†™":n<0&&(t.talent_cost="å¤©é“ç‚¹æ¶ˆè€—ä¸èƒ½ä¸ºè´Ÿæ•°");const a=Number(e.rarity);return void 0!==e.rarity&&""!==e.rarity&&(isNaN(a)||a<1||a>10)&&(t.rarity="ç¨€æœ‰åº¦å¿…é¡»åœ¨1-10ä¹‹é—´"),{valid:0===Object.keys(t).length,errors:Object.values(t)}}async function p(e){const t=Array.isArray(e.effects)?e.effects.filter(e=>e.ç±»å‹&&e.æ•°å€¼).map(e=>({ç±»å‹:e.ç±»å‹,ç›®æ ‡:e.ç›®æ ‡||void 0,æ•°å€¼:Number(e.æ•°å€¼)||0})):[],n={id:Date.now(),name:e.name,description:e.description,talent_cost:Number(e.talent_cost)||0,rarity:Number(e.rarity)||1,effects:t.length>0?t:void 0,source:"local"};try{a.addTalent(n),i.value=!1,ne.o.success(`è‡ªå®šä¹‰å¤©èµ‹ "${n.name}" å·²ä¿å­˜ï¼`)}catch(e){console.error("ä¿å­˜è‡ªå®šä¹‰å¤©èµ‹å¤±è´¥:",e),ne.o.error("ä¿å­˜è‡ªå®šä¹‰å¤©èµ‹å¤±è´¥ï¼")}}const f=e=>a.characterPayload.selected_talent_ids.includes(e.id);function g(e){o.value=e,a.toggleTalent(e.id)}function h(){a.isLocalCreation?l.value=!0:n("ai-generate")}async function v(e){const t="ai-generate-talent";ne.o.loading("å¤©æœºæ¨æ¼”ä¸­ï¼Œè¯·ç¨å€™...",{id:t});try{const n=await La(e,Ha,!1);if(!n)return void ne.o.error("AIæ¨æ¼”å¤±è´¥",{id:t});let r;console.log("ã€AIæ¨æ¼”-å¤©èµ‹ã€‘å®Œæ•´å“åº”:",n);try{r=Wa(n)}catch(e){return console.error("ã€AIæ¨æ¼”-å¤©èµ‹ã€‘JSONè§£æå¤±è´¥:",e),void ne.o.error("AIæ¨æ¼”ç»“æœæ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ",{id:t})}if(!r.name&&!r.åç§°)return void ne.o.error("AIæ¨æ¼”ç»“æœç¼ºå°‘å¤©èµ‹åç§°",{id:t});const o={id:Date.now(),name:r.name||r.åç§°||"æœªå‘½åå¤©èµ‹",description:r.description||r.æè¿°||r.è¯´æ˜||"",talent_cost:r.talent_cost||r.ç‚¹æ•°æ¶ˆè€—||1,rarity:r.rarity||r.ç¨€æœ‰åº¦||1,source:"local"};a.addTalent(o),g(o),l.value=!1,ne.o.success(`AIæ¨æ¼”å®Œæˆï¼å¤©èµ‹ "${o.name}" å·²ç”Ÿæˆ`,{id:t})}catch(e){console.error("ã€AIæ¨æ¼”-å¤©èµ‹ã€‘å¤±è´¥:",e),ne.o.error(`AIæ¨æ¼”å¤±è´¥: ${e.message}`,{id:t})}}async function b(e){if(!c.value)return;const t=Array.isArray(e.effects)?e.effects.filter(e=>e.ç±»å‹&&e.æ•°å€¼).map(e=>({ç±»å‹:e.ç±»å‹,ç›®æ ‡:e.ç›®æ ‡||void 0,æ•°å€¼:Number(e.æ•°å€¼)||0})):[],n={name:e.name,description:e.description,talent_cost:Number(e.talent_cost)||0,rarity:Number(e.rarity)||1,effects:t.length>0?t:void 0};try{a.updateTalent(c.value.id,n)?(s.value=!1,c.value=null,ne.o.success(`å¤©èµ‹ "${n.name}" å·²æ›´æ–°ï¼`)):ne.o.error("æ›´æ–°å¤©èµ‹å¤±è´¥ï¼")}catch(e){console.error("æ›´æ–°å¤©èµ‹å¤±è´¥:",e),ne.o.error("æ›´æ–°å¤©èµ‹å¤±è´¥ï¼")}}const y=(0,r.computed)(()=>c.value?{name:c.value.name,description:c.value.description,talent_cost:c.value.talent_cost||0,rarity:c.value.rarity||1,effects:c.value.effects||[]}:{});return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",ds,[(0,r.unref)(a).isLoading?((0,r.openBlock)(),(0,r.createElementBlock)("div",us,(0,r.toDisplayString)(e.$t("äºæ—¶å…‰é•¿æ²³ä¸­æœå¯»å¤©èµ‹...")),1)):(0,r.unref)(a).error?((0,r.openBlock)(),(0,r.createElementBlock)("div",ms,(0,r.toDisplayString)(e.$t("å¤©æœºç´Šä¹±"))+"ï¼š"+(0,r.toDisplayString)((0,r.unref)(a).error),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",ps,[(0,r.createCommentVNode)(" å·¦ä¾§é¢æ¿ï¼šåˆ—è¡¨å’Œæ“ä½œæŒ‰é’® "),(0,r.createElementVNode)("div",fs,[(0,r.createCommentVNode)(" é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® "),(0,r.createElementVNode)("div",gs,[(0,r.unref)(a).isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[0]||(t[0]=e=>i.value=!0),class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",hs,(0,r.toDisplayString)(e.$t("è‡ªå®šä¹‰å¤©èµ‹")),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{onClick:h,class:"action-item shimmer-on-hover"},[(0,r.createElementVNode)("span",vs,(0,r.toDisplayString)(e.$t("AIæ¨æ¼”")),1)])]),(0,r.createElementVNode)("div",bs,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(d.value,t=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t.id,class:(0,r.normalizeClass)(["talent-item",{selected:f(t)}]),onClick:e=>g(t),onMouseover:e=>o.value=t},[(0,r.createElementVNode)("div",xs,[(0,r.createElementVNode)("span",ks,(0,r.toDisplayString)(t.name),1),(0,r.createElementVNode)("span",ws,(0,r.toDisplayString)(t.talent_cost||0)+(0,r.toDisplayString)(e.$t("ç‚¹")),1)]),"cloud"===t.source||"local"===t.source?((0,r.openBlock)(),(0,r.createElementBlock)("div",Es,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>function(e){c.value=e,s.value=!0}(t),["stop"]),class:"edit-btn",title:e.$t("ç¼–è¾‘æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(Zn.A),{size:14})],8,Ns),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>async function(e){try{await a.removeTalent(e),console.log(`ã€å¤©èµ‹é€‰æ‹©ã€‘æˆåŠŸåˆ é™¤å¤©èµ‹ ID: ${e}`)}catch(t){console.error(`ã€å¤©èµ‹é€‰æ‹©ã€‘åˆ é™¤å¤©èµ‹å¤±è´¥ ID: ${e}`,t)}}(t.id),["stop"]),class:"delete-btn",title:e.$t("åˆ é™¤æ­¤é¡¹")},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14})],8,Ss)])):(0,r.createCommentVNode)("v-if",!0)],42,ys))),128))])]),(0,r.createElementVNode)("div",Vs,[o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",_s,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(o.value.name),1),(0,r.createElementVNode)("div",Cs,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(o.value.description||e.$t("æ­¤å¤©èµ‹ä¹‹ç„å¦™ï¼Œéœ€è‡ªè¡Œé¢†æ‚Ÿã€‚")),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",As,(0,r.toDisplayString)(e.$t("è¯·é€‰æ‹©å¤©èµ‹ã€‚")),1))])])),(0,r.createVNode)(_a,{visible:i.value,title:e.$t("è‡ªå®šä¹‰å¤©èµ‹"),fields:u,validationFn:m,onClose:t[1]||(t[1]=e=>i.value=!1),onSubmit:p},null,8,["visible","title"]),(0,r.createCommentVNode)(" ç¼–è¾‘æ¨¡æ€æ¡† "),(0,r.createVNode)(_a,{visible:s.value,title:e.$t("ç¼–è¾‘å¤©èµ‹"),fields:u,validationFn:m,initialData:y.value,onClose:t[2]||(t[2]=e=>{s.value=!1,c.value=null}),onSubmit:b},null,8,["visible","title","initialData"]),(0,r.createCommentVNode)(" AIæ¨æ¼”è¾“å…¥å¼¹çª— "),(0,r.createVNode)($a,{visible:l.value,onClose:t[3]||(t[3]=e=>l.value=!1),onSubmit:v},null,8,["visible"])]))}});var Ts=n(3803),Bs={};Bs.styleTagTransform=k(),Bs.setAttributes=v(),Bs.insert=g().bind(null,"head"),Bs.domAPI=p(),Bs.insertStyleElement=y(),u()(Ts.A,Bs),Ts.A&&Ts.A.locals&&Ts.A.locals;const Is=(0,N.A)(Ds,[["__scopeId","data-v-4582482f"]]),zs={class:"attribute-allocation-container"},Ms={class:"header"},Ps={class:"points-display"},Rs={class:"attributes-list"},$s={class:"attribute-info"},Os={class:"attribute-name"},Ls={class:"attribute-desc"},Fs={class:"attribute-controls"},js=["onClick","disabled"],Us={class:"attribute-value"},qs=["onClick","disabled"],Gs={class:"actions"},Hs=10,Ys=(0,r.defineComponent)({__name:"Step6_AttributeAllocation",setup(e){const t=(0,ae.N)(),n={root_bone:"æ ¹éª¨",spirituality:"çµæ€§",comprehension:"æ‚Ÿæ€§",fortune:"æ°”è¿",charm:"é­…åŠ›",temperament:"å¿ƒæ€§"},a={root_bone:"å†³å®šæ°”è¡€ä¸Šé™ã€æ¢å¤é€Ÿåº¦ã€å¯¿å‘½ä¸Šé™ã€‚å½±å“ç‚¼ä½“ä¿®è¡Œã€æŠ—æ‰“å‡»èƒ½åŠ›ã€‚",spirituality:"å†³å®šçµæ°”ä¸Šé™ã€å¸æ”¶æ•ˆç‡ã€‚å½±å“ä¿®ç‚¼é€Ÿåº¦ã€æ³•æœ¯å¨åŠ›ã€‚",comprehension:"å†³å®šç¥è¯†ä¸Šé™ã€å­¦ä¹ æ•ˆç‡ã€‚å½±å“åŠŸæ³•é¢†æ‚Ÿã€æŠ€èƒ½æŒæ¡é€Ÿåº¦ã€‚",fortune:"å†³å®šå„ç§æ¦‚ç‡ã€ç‰©å“æ‰è½å“è´¨ã€‚å½±å“å¤©æåœ°å®è·å–ã€è´µäººç›¸åŠ©ã€‚",charm:"å†³å®šåˆå§‹å¥½æ„Ÿåº¦ã€ç¤¾äº¤åŠ æˆã€‚å½±å“NPCäº’åŠ¨ã€é—¨æ´¾å£°æœ›è·å–ã€‚",temperament:"å†³å®šå¿ƒé­”æŠ—æ€§ã€æ„å¿—åŠ›ã€‚å½±å“èµ°ç«å…¥é­”æŠµæŠ—ã€å…³é”®æŠ‰æ‹©ã€‚"};function o(){Object.keys(t.attributes).forEach(e=>{t.setAttribute(e,0)})}function i(){o();let e=t.remainingTalentPoints;const n=Object.keys(t.attributes);for(;e>0;){const a=n[Math.floor(Math.random()*n.length)],r=t.attributes[a];if(r<Hs&&(t.setAttribute(a,r+1),e--),n.every(e=>t.attributes[e]>=Hs))break}}function s(){o();const e=Math.max(0,t.remainingTalentPoints);if(e<=0)return;const n=Object.keys(t.attributes).length,a=Math.floor(e/n);let r=e%n;Object.keys(t.attributes).forEach(e=>{let n=a;r>0&&(n++,r--);const o=Math.min(0+n,Hs);t.setAttribute(e,o)})}return(0,r.onMounted)(()=>{}),(e,l)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",zs,[(0,r.createElementVNode)("div",Ms,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.$t("å…ˆå¤©å…­å‘½åˆ†é…")),1),(0,r.createElementVNode)("div",Ps,[(0,r.createTextVNode)((0,r.toDisplayString)(e.$t("å‰©ä½™å¤©é“ç‚¹:"))+" ",1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)({negative:(0,r.unref)(t).remainingTalentPoints<0})},(0,r.toDisplayString)((0,r.unref)(t).remainingTalentPoints),3)])]),(0,r.createElementVNode)("div",Rs,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(t).attributes,(e,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:o,class:"attribute-item"},[(0,r.createElementVNode)("div",$s,[(0,r.createElementVNode)("span",Os,(0,r.toDisplayString)(n[o]),1),(0,r.createElementVNode)("p",Ls,(0,r.toDisplayString)(a[o]),1)]),(0,r.createElementVNode)("div",Fs,[(0,r.createElementVNode)("button",{onClick:e=>function(e){t.attributes[e]>0&&t.setAttribute(e,t.attributes[e]-1)}(o),disabled:e<=0},"-",8,js),(0,r.createElementVNode)("span",Us,(0,r.toDisplayString)(e),1),(0,r.createElementVNode)("button",{onClick:e=>function(e){t.remainingTalentPoints>0&&t.attributes[e]<Hs&&t.setAttribute(e,t.attributes[e]+1)}(o),disabled:(0,r.unref)(t).remainingTalentPoints<=0||e>=Hs,class:(0,r.normalizeClass)({disabled:(0,r.unref)(t).remainingTalentPoints<=0||e>=Hs})}," + ",10,qs)])]))),128))]),(0,r.createElementVNode)("div",Gs,[(0,r.createElementVNode)("button",{onClick:o,class:"btn btn-secondary"},(0,r.toDisplayString)(e.$t("é‡ç½®")),1),(0,r.createElementVNode)("button",{onClick:i,class:"btn btn-warning"},(0,r.toDisplayString)(e.$t("ğŸ² éšæœº")),1),(0,r.createElementVNode)("button",{onClick:s,class:"btn btn-success"},(0,r.toDisplayString)(e.$t("âš–ï¸ å‡è¡¡")),1)])]))}});var Ws=n(4316),Xs={};Xs.styleTagTransform=k(),Xs.setAttributes=v(),Xs.insert=g().bind(null,"head"),Xs.domAPI=p(),Xs.insertStyleElement=y(),u()(Ws.A,Xs),Ws.A&&Ws.A.locals&&Ws.A.locals;const Js=(0,N.A)(Ys,[["__scopeId","data-v-4bef2e09"]]),Ks={class:"preview-container"},Qs={class:"title"},Zs={class:"subtitle"},el={class:"preview-grid"},tl={class:"preview-item name-item"},nl={for:"characterName"},al=["placeholder"],rl={class:"name-hint"},ol={class:"preview-item race-item input-field"},il={for:"characterRace"},sl=["placeholder"],ll={class:"preview-item gender-item"},cl={class:"gender-control"},dl={class:"gender-label"},ul={class:"gender-label"},ml={class:"gender-label"},pl={class:"preview-item age-item"},fl={class:"age-control"},gl=["disabled"],hl={class:"age-unit"},vl={key:0,class:"preview-item"},bl={class:"streaming-control"},yl={class:"streaming-label"},xl={class:"streaming-label"},kl={class:"streaming-hint"},wl={class:"preview-item"},El={class:"item-description"},Nl={class:"preview-item"},Sl={class:"item-description"},Vl={class:"preview-item"},_l={class:"item-description"},Cl={class:"preview-item"},Al={class:"item-description"},Dl={class:"preview-item talents-item"},Tl={key:0},Bl={class:"item-description"},Il={key:1},zl={key:1,class:"preview-item attributes-item"},Ml={class:"preview-item cloud-info-item"},Pl={class:"cloud-info-text"},Rl=(0,r.defineComponent)({__name:"Step7_Preview",props:{isLocalCreation:{type:Boolean}},setup(e){const t=(0,ae.N)(),n=e;(0,r.onMounted)(async()=>{if(t.characterPayload.character_name&&"æ— åè€…"!==t.characterPayload.character_name&&""!==t.characterPayload.character_name.trim())return void console.log("[Step7_Preview] å·²æœ‰è§’è‰²åå­—ï¼Œè·³è¿‡è·å–:",t.characterPayload.character_name);let e=!1;try{const n="undefined"!=typeof window?window.TavernHelper:null;if(n){if(!e&&"function"==typeof n.substitudeMacros)try{const a=await n.substitudeMacros("{{user}}");console.log("[Step7_Preview] substitudeMacros {{user}} ->",a),a&&"{{user}}"!==a&&"string"==typeof a&&a.trim()&&(t.characterPayload.character_name=a.trim(),console.log("[Step7_Preview] âœ… ä»é…’é¦†å®è·å–ç”¨æˆ·åå­—:",a),e=!0)}catch(e){console.warn("[Step7_Preview] âš ï¸ substitudeMacros å¤±è´¥:",e)}if(!e&&"function"==typeof n.getVariables)try{const a=await n.getVariables({type:"global"}),r=a["persona.name"]||a.name||a.user_name||a.user;console.log("[Step7_Preview] å…¨å±€å˜é‡ä¸­çš„åå­—:",r),r&&"string"==typeof r&&r.trim()&&(t.characterPayload.character_name=r.trim(),console.log("[Step7_Preview] âœ… ä»å…¨å±€å˜é‡è·å–åå­—:",r),e=!0)}catch(e){console.warn("[Step7_Preview] âš ï¸ getVariables å¤±è´¥:",e)}if(!e&&"function"==typeof n.getCharData)try{const a=await n.getCharData();a?.name&&"string"==typeof a.name&&a.name.trim()&&(t.characterPayload.character_name=a.name.trim(),console.log("[Step7_Preview] âœ… ä»è§’è‰²æ•°æ®è·å–åå­—:",a.name),e=!0)}catch(e){console.warn("[Step7_Preview] âš ï¸ getCharData å¤±è´¥:",e)}}else console.log("[Step7_Preview] éé…’é¦†æ¨¡å¼ï¼Œè·³è¿‡åå­—è·å–")}catch(e){console.error("[Step7_Preview] âŒ æ— æ³•ä»é…’é¦†è·å–Personaåå­—:",e)}e||(t.characterPayload.character_name="",console.log("[Step7_Preview] ğŸ“ æœªè·å–åˆ°åå­—ï¼Œè¯·ç”¨æˆ·è‡ªè¡Œè¾“å…¥é“å·"))});const a=()=>{t.characterPayload.current_age++},o=()=>{t.characterPayload.current_age>0&&t.characterPayload.current_age--},i=()=>{t.characterPayload.current_age<0&&(t.characterPayload.current_age=0),t.characterPayload.current_age=Math.floor(t.characterPayload.current_age)};return(e,s)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Ks,[(0,r.createElementVNode)("h2",Qs,(0,r.toDisplayString)(e.$t("æœ€ç»ˆé¢„è§ˆ")),1),(0,r.createElementVNode)("p",Zs,(0,r.toDisplayString)(e.$t("è¯·ç¡®è®¤ä½ çš„é€‰æ‹©ï¼Œæ­¤ä¸ºè¸å…¥ä»™é€”çš„æœ€åä¸€æ­¥ã€‚")),1),(0,r.createElementVNode)("div",el,[(0,r.createCommentVNode)(" Character Name "),(0,r.createElementVNode)("div",tl,[(0,r.createElementVNode)("label",nl,(0,r.toDisplayString)(e.$t("é“å·:")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",id:"characterName",class:"named","onUpdate:modelValue":s[0]||(s[0]=e=>(0,r.unref)(t).characterPayload.character_name=e),placeholder:e.$t("è¯·è¾“å…¥é“å·")},null,8,al),[[r.vModelText,(0,r.unref)(t).characterPayload.character_name]]),(0,r.createElementVNode)("span",rl,(0,r.toDisplayString)(e.$t("å¯è‡ªå®šä¹‰ä¿®æ”¹")),1)]),(0,r.createCommentVNode)(" Character Race "),(0,r.createElementVNode)("div",ol,[(0,r.createElementVNode)("label",il,(0,r.toDisplayString)(e.$t("ç§æ—:")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",id:"characterRace",class:"named","onUpdate:modelValue":s[1]||(s[1]=e=>(0,r.unref)(t).characterPayload.race=e),placeholder:e.$t("äººæ—"),onMousedown:s[2]||(s[2]=(0,r.withModifiers)(()=>{},["stop"])),onClick:s[3]||(s[3]=(0,r.withModifiers)(()=>{},["stop"])),onSelect:s[4]||(s[4]=(0,r.withModifiers)(()=>{},["stop"]))},null,40,sl),[[r.vModelText,(0,r.unref)(t).characterPayload.race]])]),(0,r.createCommentVNode)(" Gender Selection "),(0,r.createElementVNode)("div",ll,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("æ€§åˆ«")),1),(0,r.createElementVNode)("div",cl,[(0,r.createElementVNode)("label",dl,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio",name:"gender",value:"ç”·","onUpdate:modelValue":s[5]||(s[5]=e=>(0,r.unref)(t).characterPayload.gender=e)},null,512),[[r.vModelRadio,(0,r.unref)(t).characterPayload.gender]]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("ç”·")),1)]),(0,r.createElementVNode)("label",ul,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio",name:"gender",value:"å¥³","onUpdate:modelValue":s[6]||(s[6]=e=>(0,r.unref)(t).characterPayload.gender=e)},null,512),[[r.vModelRadio,(0,r.unref)(t).characterPayload.gender]]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("å¥³")),1)]),(0,r.createElementVNode)("label",ml,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio",name:"gender",value:"åŒæ€§","onUpdate:modelValue":s[7]||(s[7]=e=>(0,r.unref)(t).characterPayload.gender=e)},null,512),[[r.vModelRadio,(0,r.unref)(t).characterPayload.gender]]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("åŒæ€§")),1)])])]),(0,r.createCommentVNode)(" Birth Age "),(0,r.createElementVNode)("div",pl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("åˆå§‹å¹´é¾„")),1),(0,r.createElementVNode)("div",fl,[(0,r.createElementVNode)("button",{type:"button",onClick:o,disabled:(0,r.unref)(t).characterPayload.current_age<=0,class:"age-btn"},"-",8,gl),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":s[8]||(s[8]=e=>(0,r.unref)(t).characterPayload.current_age=e),class:"age-input",min:"0",onInput:i},null,544),[[r.vModelText,(0,r.unref)(t).characterPayload.current_age,void 0,{number:!0}]]),(0,r.createElementVNode)("span",hl,(0,r.toDisplayString)(e.$t("å²")),1),(0,r.createElementVNode)("button",{type:"button",onClick:a,class:"age-btn"},"+")])]),(0,r.createCommentVNode)(" Start Mode (Streaming / Non-Streaming) "),n.isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("div",vl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("å¼€å±€æ¨¡å¼")),1),(0,r.createElementVNode)("div",bl,[(0,r.createElementVNode)("label",yl,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio",name:"startMode",value:!0,"onUpdate:modelValue":s[9]||(s[9]=e=>(0,r.unref)(t).useStreamingStart=e)},null,512),[[r.vModelRadio,(0,r.unref)(t).useStreamingStart]]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("æµå¼å¼€å±€")),1)]),(0,r.createElementVNode)("label",xl,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio",name:"startMode",value:!1,"onUpdate:modelValue":s[10]||(s[10]=e=>(0,r.unref)(t).useStreamingStart=e)},null,512),[[r.vModelRadio,(0,r.unref)(t).useStreamingStart]]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("éæµå¼å¼€å±€")),1)])]),(0,r.createElementVNode)("p",kl,(0,r.toDisplayString)((0,r.unref)(t).useStreamingStart?e.$t("æµå¼å¼€å±€ï¼šæ›´å¿«ï¼Œå¯èƒ½è¢«ä¸­æ–­"):e.$t("éæµå¼å¼€å±€ï¼šä¸€æ¬¡æ€§ç”Ÿæˆå®Œæ•´å†…å®¹ï¼Œæ›´ç¨³å®šå¯é ")),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" World "),(0,r.createElementVNode)("div",wl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("æ‰€é€‰ä¸–ç•Œ")),1),(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t).selectedWorld?.name||e.$t("æœªé€‰æ‹©")),1),(0,r.createElementVNode)("p",El,(0,r.toDisplayString)((0,r.unref)(t).selectedWorld?.description||e.$t("æš‚æ— æè¿°")),1)]),(0,r.createCommentVNode)(" Talent Tier "),(0,r.createElementVNode)("div",Nl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("å¤©èµ„")),1),(0,r.createElementVNode)("h4",{style:(0,r.normalizeStyle)({color:(0,r.unref)(t).selectedTalentTier?.color||"inherit"})},(0,r.toDisplayString)((0,r.unref)(t).selectedTalentTier?.name||e.$t("æœªé€‰æ‹©")),5),(0,r.createElementVNode)("p",Sl,(0,r.toDisplayString)((0,r.unref)(t).selectedTalentTier?.description||e.$t("æš‚æ— æè¿°")),1)]),(0,r.createCommentVNode)(" Origin "),(0,r.createElementVNode)("div",Vl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("å‡ºèº«")),1),(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t).selectedOrigin?.name||e.$t("éšæœºå‡ºèº«")),1),(0,r.createElementVNode)("p",_l,(0,r.toDisplayString)((0,r.unref)(t).selectedOrigin?.description||e.$t("æš‚æ— æè¿°")),1)]),(0,r.createCommentVNode)(" Spirit Root "),(0,r.createElementVNode)("div",Cl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("çµæ ¹")),1),(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t).selectedSpiritRoot?.name||e.$t("éšæœºçµæ ¹")),1),(0,r.createElementVNode)("p",Al,(0,r.toDisplayString)((0,r.unref)(t).selectedSpiritRoot?.description||e.$t("æš‚æ— æè¿°")),1)]),(0,r.createCommentVNode)(" Talents "),(0,r.createElementVNode)("div",Dl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("å¤©èµ‹")),1),(0,r.unref)(t).selectedTalents.length?((0,r.openBlock)(),(0,r.createElementBlock)("ul",Tl,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(t).selectedTalents,e=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:e.id},[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("p",Bl,(0,r.toDisplayString)(e.description),1)]))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("p",Il,(0,r.toDisplayString)(e.$t("æœªé€‰æ‹©ä»»ä½•å¤©èµ‹")),1))]),(0,r.createCommentVNode)(" Attributes "),n.isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("div",zl,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("å…ˆå¤©å…­å¸")),1),(0,r.createElementVNode)("ul",null,[(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("æ ¹éª¨"))+": "+(0,r.toDisplayString)((0,r.unref)(t).attributes.root_bone),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("çµæ€§"))+": "+(0,r.toDisplayString)((0,r.unref)(t).attributes.spirituality),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("æ‚Ÿæ€§"))+": "+(0,r.toDisplayString)((0,r.unref)(t).attributes.comprehension),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("æ°”è¿"))+": "+(0,r.toDisplayString)((0,r.unref)(t).attributes.fortune),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("é­…åŠ›"))+": "+(0,r.toDisplayString)((0,r.unref)(t).attributes.charm),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("å¿ƒæ€§"))+": "+(0,r.toDisplayString)((0,r.unref)(t).attributes.temperament),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:2},[(0,r.createCommentVNode)(" Cloud Mode Placeholder "),(0,r.createElementVNode)("div",Ml,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("å‘½æ ¼å¤©å®š")),1),(0,r.createElementVNode)("p",Pl,(0,r.toDisplayString)(e.$t("è”æœºæ¨¡å¼ä¸‹ï¼Œè§’è‰²çš„åˆå§‹å‘½æ ¼å°†ç”±æ‰€é€‰ä¸–ç•Œçš„å¤©é“æ³•åˆ™åœ¨äº‘ç«¯ç”Ÿæˆï¼Œä»¥ç¡®ä¿å…¬å¹³ä¸å¹³è¡¡ã€‚")),1)])],2112))])]))}});var $l=n(477),Ol={};Ol.styleTagTransform=k(),Ol.setAttributes=v(),Ol.insert=g().bind(null,"head"),Ol.domAPI=p(),Ol.insertStyleElement=y(),u()($l.A,Ol),$l.A&&$l.A.locals&&$l.A.locals;const Ll=(0,N.A)(Rl,[["__scopeId","data-v-67e93ce4"]]),Fl={class:"modal-dialog"},jl={key:0,class:"step-content"},Ul={class:"modal-title"},ql={class:"modal-subtitle"},Gl={class:"form-group"},Hl=["placeholder"],Yl={key:0,class:"error-message"},Wl={class:"form-actions"},Xl=["disabled"],Jl={class:"step-content"},Kl={class:"modal-title"},Ql={class:"modal-subtitle"},Zl={class:"prompt-section"},ec={class:"prompt-label"},tc=["placeholder","onKeyup"],nc={class:"char-count"},ac={key:0,class:"suggested-prompts"},rc={class:"suggestions-title"},oc={class:"suggestions-grid"},ic=["onClick"],sc={class:"form-actions"},lc=(0,r.defineComponent)({__name:"RedemptionCodeModal",props:{visible:{type:Boolean},title:{},type:{}},emits:["close","submit"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)(""),i=(0,r.ref)(""),s=(0,r.ref)(""),l=(0,r.ref)(null),c=(0,r.ref)("code"),d=(0,r.ref)(!1),u=()=>({world:["ç°ä»£éƒ½å¸‚ä¿®ä»™ï¼Œçµæ°”å¤è‹","å¤ä»£ä»™ä¾ ä¸–ç•Œï¼Œé—¨æ´¾æ—ç«‹","æœ«æ³•æ—¶ä»£ï¼Œä¿®çœŸæ²¡è½","æ˜Ÿé™…ä¿®ä»™ï¼Œå®‡å®™å¾é€”"],talent_tier:["å¤©ç”Ÿå‰‘å¿ƒï¼Œå‰‘é“å¤©æ‰","ä¸¹é“å¥‡æ‰ï¼Œç‚¼ä¸¹å¤©èµ‹","é˜µæ³•å¤§å¸ˆï¼Œå¤©æœºæ¨ç®—","ä½“ä¿®éœ¸ä½“ï¼Œè‚‰èº«æ— åŒ"],origin:["ä¿®ä»™ä¸–å®¶çš„æ²¡è½å­å¼Ÿ","å‡¡äººå‡ºèº«çš„å¤©é€‰ä¹‹å­","é­”é—¨å¼Ÿå­æ”¹é‚ªå½’æ­£","ä¸Šå¤ä¼ æ‰¿çš„æœ€åè¡€è„‰"],spirit_root:["é›·å±æ€§å˜å¼‚çµæ ¹","ç½•è§çš„æ—¶é—´å±æ€§","æ··æ²Œå±æ€§è‡³å°Šçµæ ¹","äº”è¡Œä¿±å…¨çš„åºŸæŸ´çµæ ¹"],talent:["é€è§†æœ¬è´¨çš„å¤©çœ¼ç¥é€š","é¢„çŸ¥æœªæ¥çš„å¤©æœºæœ¯","ä¸æ­»ä¸ç­çš„é‡ç”Ÿèƒ½åŠ›","æ“æ§æ—¶ç©ºçš„ç¥çº§å¤©èµ‹"]}[n.type||"world"]||[]);(0,r.watch)(()=>n.visible,e=>{e&&(m(),(0,r.nextTick)(()=>{l.value?.focus()}))});const m=()=>{s.value="",o.value="",i.value="",c.value="code",d.value=!1},p=()=>{m(),a("close")},f=()=>{c.value="code",s.value=""},g=async()=>{if(o.value.trim()){d.value=!0,s.value="";try{await new Promise(e=>setTimeout(e,500)),c.value="prompt"}catch{s.value="å…‘æ¢ç éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥åé‡è¯•ã€‚"}finally{d.value=!1}}else s.value="å…‘æ¢ç ä¸å¯ä¸ºç©ºã€‚"},h=()=>{a("submit",{code:o.value.trim(),prompt:i.value.trim()||void 0}),m()};return(e,t)=>e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(p,["self"])},[(0,r.createElementVNode)("div",Fl,[(0,r.createCommentVNode)(" ç¬¬ä¸€æ­¥ï¼šè¾“å…¥å…‘æ¢ç  "),"code"===c.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",jl,[(0,r.createElementVNode)("h2",Ul,(0,r.toDisplayString)(e.title),1),(0,r.createElementVNode)("p",ql,(0,r.toDisplayString)(e.$t("è¯·è¾“å…¥å…‘æ¢ç ä»¥æ¥å¼•å¤©æœºè¿›è¡ŒAIæ¨æ¼”ã€‚")),1),(0,r.createElementVNode)("form",{onSubmit:(0,r.withModifiers)(g,["prevent"])},[(0,r.createElementVNode)("div",Gl,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),type:"text",placeholder:e.$t("è¯·è¾“å…¥å…‘æ¢ç "),class:"code-input",ref_key:"inputRef",ref:l},null,8,Hl),[[r.vModelText,o.value]])]),s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Yl,(0,r.toDisplayString)(s.value),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",Wl,[(0,r.createElementVNode)("button",{type:"button",class:"btn btn-secondary",onClick:p},(0,r.toDisplayString)(e.$t("å–æ¶ˆ")),1),(0,r.createElementVNode)("button",{type:"submit",class:"btn",disabled:!o.value.trim()||d.value},(0,r.toDisplayString)(d.value?e.$t("éªŒè¯ä¸­..."):e.$t("ä¸‹ä¸€æ­¥")),9,Xl)])],32)])):"prompt"===c.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" ç¬¬äºŒæ­¥ï¼šè¾“å…¥æç¤ºè¯ "),(0,r.createElementVNode)("div",Jl,[(0,r.createElementVNode)("h2",Kl,(0,r.toDisplayString)(e.$t("è‡ªå®šä¹‰AIæ¨æ¼”")),1),(0,r.createElementVNode)("p",Ql,(0,r.toDisplayString)({world:"æè¿°ä½ å¸Œæœ›çš„ä¸–ç•Œé£æ ¼ã€æ—¶ä»£èƒŒæ™¯æˆ–ç‰¹è‰²è®¾å®šï¼ˆå¯å«å¯¹è¯ï¼Œä½¿ç”¨ä¸­æ–‡å¼•å·â€œâ€ï¼Œæ¯å¥ä»…ä¸€å¯¹ï¼‰",talent_tier:"æè¿°ä½ å¸Œæœ›çš„å¤©èµ„ç±»å‹ã€ç‰¹ç‚¹æˆ–èƒ½åŠ›å€¾å‘ï¼ˆå¯å«å¯¹è¯ï¼Œä½¿ç”¨ä¸­æ–‡å¼•å·â€œâ€ï¼Œæ¯å¥ä»…ä¸€å¯¹ï¼‰",origin:"æè¿°ä½ å¸Œæœ›çš„å‡ºèº«èƒŒæ™¯ã€å®¶æ—æˆ–æˆé•¿ç¯å¢ƒï¼ˆå¯å«å¯¹è¯ï¼Œä½¿ç”¨ä¸­æ–‡å¼•å·â€œâ€ï¼Œæ¯å¥ä»…ä¸€å¯¹ï¼‰",spirit_root:"æè¿°ä½ å¸Œæœ›çš„çµæ ¹å±æ€§ã€ç‰¹è‰²æˆ–ä¿®ç‚¼å€¾å‘ï¼ˆå¯å«å¯¹è¯ï¼Œä½¿ç”¨ä¸­æ–‡å¼•å·â€œâ€ï¼Œæ¯å¥ä»…ä¸€å¯¹ï¼‰",talent:"æè¿°ä½ å¸Œæœ›çš„å¤©èµ‹èƒ½åŠ›ã€ç‰¹æ®ŠæŠ€èƒ½æˆ–ç¥é€šï¼ˆå¯å«å¯¹è¯ï¼Œä½¿ç”¨ä¸­æ–‡å¼•å·â€œâ€ï¼Œæ¯å¥ä»…ä¸€å¯¹ï¼‰"}[n.type||"world"]||"è¯·è¾“å…¥è‡ªå®šä¹‰æç¤ºè¯"),1),(0,r.createElementVNode)("div",Zl,[(0,r.createElementVNode)("label",ec,(0,r.toDisplayString)(e.$t("æç¤ºè¯ (å¯é€‰)")),1),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>i.value=e),class:"prompt-input",placeholder:{world:"ä¾‹å¦‚ï¼šç°ä»£éƒ½å¸‚ä¿®ä»™ä¸–ç•Œï¼Œçµæ°”å¤è‹ï¼Œç§‘æŠ€ä¸ä¿®çœŸå¹¶å­˜...",talent_tier:"ä¾‹å¦‚ï¼šæ“…é•¿ç‚¼ä¸¹åˆ¶å™¨çš„å¤©æ‰ï¼Œæ‹¥æœ‰è¶…å¼ºçš„æ„ŸçŸ¥èƒ½åŠ›...",origin:"ä¾‹å¦‚ï¼šä¿®ä»™ä¸–å®¶çš„æ²¡è½å­å¼Ÿï¼Œèº«è´Ÿè¡€æµ·æ·±ä»‡...",spirit_root:"ä¾‹å¦‚ï¼šç½•è§çš„é›·å±æ€§å˜å¼‚çµæ ¹ï¼Œå¤©ç”Ÿå¼•é›·...",talent:"ä¾‹å¦‚ï¼šèƒ½å¤Ÿçœ‹é€äº‹ç‰©æœ¬è´¨çš„å¤©çœ¼ç¥é€š..."}[n.type||"world"]||"è¯·è¾“å…¥æç¤ºè¯...",rows:"4",maxlength:"500",onKeyup:(0,r.withKeys)((0,r.withModifiers)(h,["ctrl"]),["enter"])},null,40,tc),[[r.vModelText,i.value]]),(0,r.createElementVNode)("div",nc,(0,r.toDisplayString)(i.value.length)+"/500",1)]),u().length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",ac,[(0,r.createElementVNode)("h4",rc,(0,r.toDisplayString)(e.$t("å»ºè®®æç¤ºè¯")),1),(0,r.createElementVNode)("div",oc,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(u(),e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e,class:"suggestion-button",onClick:t=>i.value=e},(0,r.toDisplayString)(e),9,ic))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",sc,[(0,r.createElementVNode)("button",{type:"button",class:"btn btn-secondary",onClick:f},(0,r.toDisplayString)(e.$t("è¿”å›")),1),(0,r.createElementVNode)("button",{type:"button",class:"btn",onClick:h},(0,r.toDisplayString)(e.$t("å¼€å§‹æ¨æ¼”")),1)])])],2112)):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0)}});var cc=n(1022),dc={};dc.styleTagTransform=k(),dc.setAttributes=v(),dc.insert=g().bind(null,"head"),dc.domAPI=p(),dc.insertStyleElement=y(),u()(cc.A,dc),cc.A&&cc.A.locals&&cc.A.locals;const uc=(0,N.A)(lc,[["__scopeId","data-v-16e1f8a9"]]),mc={class:"creation-container"},pc={class:"creation-scroll"},fc={class:"header-container"},gc={class:"header-top"},hc={class:"mode-indicator"},vc={key:0,class:"cloud-sync-container"},bc={class:"progress-steps"},yc={class:"step-circle"},xc={class:"step-label"},kc={class:"step-content"},wc={class:"navigation-buttons"},Ec={class:"points-display"},Nc={key:0,class:"destiny-points"},Sc={class:"points-label"},Vc=["disabled"],_c=(0,r.defineComponent)({__name:"CharacterCreation",props:{onBack:{type:Function}},emits:["creation-complete"],setup(e,{expose:t,emit:a}){const o=e,i=a,s=(0,ae.N)(),{t:l}=(0,re.s)(),c=(0,r.ref)(!1),d=(0,r.ref)(!1),u=(0,r.ref)("world");function m(e){if("ç”·"===e||"å¥³"===e||"å…¶ä»–"===e)return e}function p(){u.value={1:"world",2:"talent_tier",3:"origin",4:"spirit_root",5:"talent"}[s.currentStep]||"world",s.isLocalCreation||(c.value=!0)}(0,r.onMounted)(async()=>{console.log("ã€è§’è‰²åˆ›å»ºã€‘å½“å‰æ¨¡å¼:",s.isLocalCreation?"å•æœº":"è”æœº"),await s.initializeStore(s.isLocalCreation?"single":"cloud");const e=s.creationData.worlds.length,t=s.creationData.talents.length;console.log("ã€è§’è‰²åˆ›å»ºã€‘å½“å‰æ•°æ®é‡:"),console.log("- æ€»ä¸–ç•Œæ•°é‡:",e),console.log("- æ€»å¤©èµ‹æ•°é‡:",t),!s.isLocalCreation&&(e<=3||t<=5)&&(console.log("ã€è§’è‰²åˆ›å»ºã€‘è”æœºæ¨¡å¼ä¸‹æ•°æ®é‡ä¸è¶³ï¼Œå°è¯•è·å–äº‘ç«¯æ•°æ®..."),await s.fetchAllCloudData(),console.log("ã€è§’è‰²åˆ›å»ºã€‘äº‘ç«¯æ•°æ®è·å–å®Œæˆï¼Œæœ€ç»ˆæ•°æ®é‡:"),console.log("- æ€»ä¸–ç•Œæ•°é‡:",s.creationData.worlds.length),console.log("- æ€»å¤©èµ‹æ•°é‡:",s.creationData.talents.length));try{const e=await(0,fe.getCurrentCharacterName)();e?(console.log("ã€è§’è‰²åˆ›å»ºã€‘æˆåŠŸè·å–é…’é¦†è§’è‰²å¡åå­—:",e),s.characterPayload.character_name=e):(console.log("ã€è§’è‰²åˆ›å»ºã€‘æ— æ³•è·å–é…’é¦†è§’è‰²å¡åå­—ï¼Œä½¿ç”¨é»˜è®¤å€¼"),s.characterPayload.character_name=s.isLocalCreation?"æ— åè€…":"ä¿®å£«")}catch(e){console.error("ã€è§’è‰²åˆ›å»ºã€‘è·å–è§’è‰²åå­—æ—¶å‡ºé”™:",e),s.characterPayload.character_name=s.isLocalCreation?"æ— åè€…":"ä¿®å£«"}}),(0,r.onUnmounted)(()=>{s.resetOnExit()}),t({handleAIGenerateClick:p});const f=(0,r.computed)(()=>[l("è¯¸å¤©é—®é“"),l("ä»™ç¼˜åˆå®š"),l("è½¬ä¸–å› æœ"),l("æµ‹çµé—®é“"),l("ç¥é€šæ‹©å®š"),l("å‘½æ ¼å¤©æˆ"),l("çª¥å¤©ç®—å‘½")]),g=(0,r.computed)(()=>({character_name:s.characterPayload.character_name,gender:s.characterPayload.gender,race:s.characterPayload.race,current_age:s.characterPayload.current_age,world:s.selectedWorld,talentTier:s.selectedTalentTier,origin:s.selectedOrigin,spiritRoot:s.selectedSpiritRoot,talents:s.selectedTalents,baseAttributes:{root_bone:s.attributes.root_bone,spirituality:s.attributes.spirituality,comprehension:s.attributes.comprehension,fortune:s.attributes.fortune,charm:s.attributes.charm,temperament:s.attributes.temperament}})),h=()=>{s.currentStep>1?s.prevStep():o.onBack()},v=(0,r.computed)(()=>{const e=s.currentStep,t=s.totalSteps,n=s.selectedWorld,a=s.selectedTalentTier,r=s.remainingTalentPoints,o=d.value;return console.log("[DEBUG] æŒ‰é’®çŠ¶æ€æ£€æŸ¥ - å½“å‰æ­¥éª¤:",e,"/",t),console.log("[DEBUG] æŒ‰é’®çŠ¶æ€æ£€æŸ¥ - isGenerating:",o),console.log("[DEBUG] æŒ‰é’®çŠ¶æ€æ£€æŸ¥ - é€‰ä¸­çš„ä¸–ç•Œ:",n?.name),console.log("[DEBUG] æŒ‰é’®çŠ¶æ€æ£€æŸ¥ - é€‰ä¸­çš„å¤©èµ„:",a?.name),console.log("[DEBUG] æŒ‰é’®çŠ¶æ€æ£€æŸ¥ - å‰©ä½™å¤©èµ‹ç‚¹:",r),1!==e||n?2!==e||a?(console.log("[DEBUG] æŒ‰é’®çŠ¶æ€ï¼šå¯ç”¨"),!1):(console.log("[DEBUG] æŒ‰é’®è¢«ç¦ç”¨ï¼šç¬¬2æ­¥æœªé€‰æ‹©å¤©èµ„"),!0):(console.log("[DEBUG] æŒ‰é’®è¢«ç¦ç”¨ï¼šç¬¬1æ­¥æœªé€‰æ‹©ä¸–ç•Œ"),!0)}),b=(0,r.ref)(null),y=(0,r.ref)(null),x=(0,r.ref)(null),k=(0,r.ref)(null),w=(0,r.ref)(null);async function E(e){if(!localStorage.getItem("access_token"))return ne.o.error("èº«ä»½å‡­è¯ç¼ºå¤±ï¼Œè¯·å…ˆç™»å½•å†ä½¿ç”¨ä¿¡ç‰©ã€‚"),void(c.value=!1);!e.code||e.code.trim().length<6?ne.o.error("è¯·è¾“å…¥æœ‰æ•ˆçš„ä»™ç¼˜ä¿¡ç‰©ï¼"):(c.value=!1,await async function(e,t){let n="";switch(s.currentStep){case 1:n="world";break;case 2:n="talent_tier";break;case 3:n="origin";break;case 4:n="spirit_root";break;case 5:n="talent";break;default:return void ne.o.error("å½“å‰æ­¥éª¤ä¸æ”¯æŒAIç”Ÿæˆï¼")}d.value=!0;const a=`cloud-ai-generate-${n}`,r=t?"åŸºäºä½ çš„å¿ƒæ„¿æ¨æ¼”ç„å¦™...":"å¤©æœºæ¨æ¼”ä¸­...";ne.o.loading(r,{id:a});try{ne.o.loading("æ­£åœ¨éªŒè¯ä»™ç¼˜ä¿¡ç‰©...",{id:a});try{const t=await(0,I.Em)(`/api/v1/redemption/validate/${e}`,{method:"POST"});if(t?.is_used)return ne.o.error("ä»™ç¼˜ä¿¡ç‰©å·²è¢«ä½¿ç”¨æˆ–æ— æ•ˆï¼",{id:a}),void(d.value=!1)}catch(e){console.warn("å…‘æ¢ç é¢„éªŒè¯å¤±è´¥ï¼Œç»§ç»­æ‰§è¡Œ:",e)}return ne.o.loading("å·²è¿æ¥å¤©æœºé˜ï¼Œæ­£åœ¨æ¨æ¼”...",{id:a}),ne.o.error("AIç”ŸæˆåŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼ˆtavernAIæ¨¡å—å·²ç§»é™¤ï¼‰",{id:a}),void(d.value=!1)}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";t.includes("å…‘æ¢ç ")||t.includes("ä¿¡ç‰©")?ne.o.error(t,{id:a}):t.includes("ç™»å½•")?ne.o.error("èº«ä»½éªŒè¯å¤±è´¥ï¼Œè¯·é‡æ–°ç™»å½•ï¼",{id:a}):ne.o.error("å¤©æœºç´Šä¹±ï¼š"+t,{id:a})}finally{d.value=!1,setTimeout(()=>ne.o.hide(a),3e3)}}(e.code,e.prompt))}async function N(){if(console.log("[DEBUG] createCharacter å¼€å§‹æ‰§è¡Œ"),console.log("[DEBUG] isGenerating.value:",d.value),d.value)console.warn("[CharacterCreation.vue] è§’è‰²åˆ›å»ºå·²åœ¨è¿›è¡Œä¸­ï¼Œå¿½ç•¥é‡å¤è¯·æ±‚");else{if(console.log("[CharacterCreation.vue] createCharacter() called."),d.value=!0,console.log("[DEBUG] å¼€å§‹æ•°æ®æ ¡éªŒ"),console.log("[DEBUG] è§’è‰²å:",s.characterPayload.character_name),console.log("[DEBUG] é€‰ä¸­çš„ä¸–ç•Œ:",s.selectedWorld),console.log("[DEBUG] é€‰ä¸­çš„å¤©èµ„:",s.selectedTalentTier),console.log("[DEBUG] é€‰ä¸­çš„å‡ºèº«:",s.selectedOrigin),console.log("[DEBUG] é€‰ä¸­çš„çµæ ¹:",s.selectedSpiritRoot),s.characterPayload.character_name||(console.log("[DEBUG] è§’è‰²åä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤å€¼"),s.characterPayload.character_name="ä¿®å£«"),!s.selectedWorld||!s.selectedTalentTier)return console.log("[DEBUG] éªŒè¯å¤±è´¥ï¼šç¼ºå°‘å¿…éœ€é€‰æ‹©é¡¹"),console.log("[DEBUG] selectedWorld:",s.selectedWorld),console.log("[DEBUG] selectedTalentTier:",s.selectedTalentTier),void ne.o.error("åˆ›å»ºæ•°æ®ä¸å®Œæ•´ï¼Œè¯·æ£€æŸ¥ä¸–ç•Œå’Œå¤©èµ„é€‰æ‹©ï¼");if(console.log("[DEBUG] selectedOrigin:",s.selectedOrigin,"(å¯ä¸ºç©ºï¼Œè¡¨ç¤ºéšæœºå‡ºç”Ÿ)"),console.log("[DEBUG] selectedSpiritRoot:",s.selectedSpiritRoot,"(å¯ä¸ºç©ºï¼Œè¡¨ç¤ºéšæœºçµæ ¹)"),!s.isLocalCreation&&!(0,fe.isTavernEnv)())return console.log("[DEBUG] éªŒè¯å¤±è´¥ï¼šè”æœºæ¨¡å¼ä½†éSillyTavernç¯å¢ƒ"),void ne.o.error("è”æœºæ¨¡å¼éœ€è¦åœ¨SillyTavernæ‰©å±•ä¸­è¿è¡Œã€‚");console.log("[DEBUG] æ•°æ®æ ¡éªŒé€šè¿‡ï¼Œå¼€å§‹åˆ›å»ºè§’è‰²"),d.value=!0;try{s.characterPayload.character_name,s.characterPayload.gender,s.characterPayload.race,s.selectedWorld,s.selectedTalentTier,s.selectedOrigin,s.selectedSpiritRoot,s.selectedTalents,s.attributes.root_bone,s.attributes.spirituality,s.attributes.comprehension,s.attributes.fortune,s.attributes.charm,s.attributes.temperament;const e={charId:`char_${Date.now()}`,characterName:s.characterPayload.character_name,world:s.selectedWorld,talentTier:s.selectedTalentTier,origin:s.selectedOrigin,spiritRoot:s.selectedSpiritRoot,talents:s.selectedTalents,baseAttributes:{root_bone:s.attributes.root_bone,spirituality:s.attributes.spirituality,comprehension:s.attributes.comprehension,fortune:s.attributes.fortune,charm:s.attributes.charm,temperament:s.attributes.temperament},mode:s.isLocalCreation?"å•æœº":"è”æœº",age:s.characterPayload.current_age,gender:s.characterPayload.gender,race:s.characterPayload.race};console.log("ğŸ”¥ [è§’è‰²åˆ›å»º] å½“å‰é€‰æ‹©çš„å¼€å±€å¹´é¾„:",s.characterPayload.current_age),console.log("ğŸ”¥ [è§’è‰²åˆ›å»º] å½“å‰é€‰æ‹©çš„ç§æ—:",s.characterPayload.race),console.log("å‘å°„creation-completeäº‹ä»¶ï¼Œè½½è·:",e),i("creation-complete",e)}catch(e){console.error("åˆ›å»ºè§’è‰²æ—¶å‘ç”Ÿä¸¥é‡é”™è¯¯:",e),d.value=!1,i("creation-complete",{error:e})}}}function V(e){console.log("[è§’è‰²åˆ›å»º] äº‘ç«¯åŒæ­¥å®Œæˆ:",e),e.success&&e.newItemsCount>0&&ne.o.success(`å·²æ›´æ–° ${e.newItemsCount} é¡¹äº‘ç«¯æ•°æ®`)}function _(e,t){console.log("[è§’è‰²åˆ›å»º] æ•°æ®æ¸…é™¤å®Œæˆ:",{type:e,count:t}),t>0&&s.resetCharacter()}async function C(e){if(console.log("[è§’è‰²åˆ›å»º] å­˜å‚¨é¢„è®¾å®Œæˆ:",e),e.success&&e.presetData)try{const{savePreset:t}=await Promise.resolve().then(n.bind(n,5735)),a={name:"string"==typeof e.presetData.name?e.presetData.name:"æœªå‘½åé¢„è®¾",description:"string"==typeof e.presetData.description?e.presetData.description:"",data:{character_name:s.characterPayload.character_name,gender:m(s.characterPayload.gender),race:s.characterPayload.race,current_age:s.characterPayload.current_age,world:s.selectedWorld??null,talentTier:s.selectedTalentTier??null,origin:s.selectedOrigin??null,spiritRoot:s.selectedSpiritRoot??null,talents:s.selectedTalents??[],baseAttributes:{root_bone:s.attributes.root_bone,spirituality:s.attributes.spirituality,comprehension:s.attributes.comprehension,fortune:s.attributes.fortune,charm:s.attributes.charm,temperament:s.attributes.temperament}}},r=await t(a);console.log("[è§’è‰²åˆ›å»º] é¢„è®¾å·²ä¿å­˜åˆ° IndexedDB, ID:",r),ne.o.success("é¢„è®¾ä¿å­˜æˆåŠŸï¼")}catch(e){console.error("[è§’è‰²åˆ›å»º] ä¿å­˜é¢„è®¾åˆ° IndexedDB å¤±è´¥:",e),ne.o.error("é¢„è®¾ä¿å­˜å¤±è´¥")}}async function A(e){if(console.log("[è§’è‰²åˆ›å»º] åŠ è½½é¢„è®¾å®Œæˆ:",e),e.success){if(!e.presetData)return console.warn("[è§’è‰²åˆ›å»º] é¢„è®¾æ•°æ®ä¸ºç©º"),void ne.o.error("é¢„è®¾æ•°æ®æ— æ•ˆ");console.log("[è§’è‰²åˆ›å»º] å‡†å¤‡ä½¿ç”¨é¢„è®¾æ•°æ®åˆ›å»ºè§’è‰²:",e.presetData);try{const t=e.presetData.data,n=s.creationData.worlds.find(e=>e.name===t.world?.name),a=s.creationData.talentTiers.find(e=>e.name===t.talentTier?.name),o=s.creationData.origins.find(e=>e.name===t.origin?.name),i=s.creationData.spiritRoots.find(e=>e.name===t.spiritRoot?.name),l=n?n.id:"",c=a?a.id:"",d=t.talents&&Array.isArray(t.talents)?t.talents.map(e=>s.creationData.talents.find(t=>t.name===e.name)?.id).filter(e=>void 0!==e):[],u={...s.characterPayload,character_name:t.character_name||"æ— åè€…",gender:t.gender||"ç”·",race:t.race||"äººæ—",current_age:t.current_age??16,world_id:l,talent_tier_id:c,origin_id:o?o.id:null,spirit_root_id:i?i.id:null,selected_talent_ids:d,root_bone:t.baseAttributes?.root_bone??0,spirituality:t.baseAttributes?.spirituality??0,comprehension:t.baseAttributes?.comprehension??0,fortune:t.baseAttributes?.fortune??0,charm:t.baseAttributes?.charm??0,temperament:t.baseAttributes?.temperament??0};if(s.characterPayload=u,console.log("[è§’è‰²åˆ›å»º] é¢„è®¾æ•°æ®å·²åŸå­æ€§æ¢å¤, æ–°çš„Payload:",u),await(0,r.nextTick)(),!s.selectedWorld||!s.selectedTalentTier)return console.error("[è§’è‰²åˆ›å»º] é¢„è®¾æ¢å¤åæ£€æŸ¥å¤±è´¥ï¼Œæ ¸å¿ƒæ•°æ®ç¼ºå¤±ã€‚"),ne.o.error("é¢„è®¾æ•°æ®ä¸å®Œæ•´æˆ–å·²å¤±æ•ˆï¼Œè¯·é‡æ–°é€‰æ‹©ã€‚"),void(s.currentStep=1);s.currentStep=s.totalSteps,await(0,r.nextTick)(),console.log("[è§’è‰²åˆ›å»º] é¢„è®¾æ•°æ®æ¢å¤ä¸”æ ¡éªŒé€šè¿‡ï¼Œæ‰§è¡Œåˆ›å»º..."),await N()}catch(e){console.error("[è§’è‰²åˆ›å»º] ä½¿ç”¨é¢„è®¾æ•°æ®å¤±è´¥:",e),ne.o.error("é¢„è®¾æ•°æ®å¤„ç†å¤±è´¥")}}else ne.o.error(e.message)}return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",mc,[(0,r.createVNode)(S),(0,r.createElementVNode)("div",pc,[(0,r.createCommentVNode)(" è¿›åº¦æ¡ "),(0,r.createElementVNode)("div",fc,[(0,r.createElementVNode)("div",gc,[(0,r.createCommentVNode)(" å·¦ä¾§ï¼šæ¨¡å¼æŒ‡ç¤º "),(0,r.createElementVNode)("div",hc,(0,r.toDisplayString)((0,r.unref)(s).isLocalCreation?e.$t("å•æœºæ¨¡å¼"):e.$t("è”æœºæ¨¡å¼")),1),(0,r.createCommentVNode)(" å³ä¾§ï¼šäº‘ç«¯åŒæ­¥æŒ‰é’®ï¼ˆä»…å•æœºæ¨¡å¼æ˜¾ç¤ºï¼‰ "),(0,r.unref)(s).isLocalCreation?((0,r.openBlock)(),(0,r.createElementBlock)("div",vc,[(0,r.createVNode)(pe,{onSyncCompleted:V,variant:"compact",size:"small"}),(0,r.createVNode)(tt,{variant:"compact",size:"small","current-step":(0,r.unref)(s).currentStep,"total-steps":(0,r.unref)(s).totalSteps,"character-data":g.value,onStoreCompleted:C},null,8,["current-step","total-steps","character-data"]),(0,r.createVNode)(Qn,{variant:"compact",size:"small",onLoadCompleted:A}),(0,r.createVNode)(we,{variant:"horizontal",size:"small",onDataCleared:_})])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",bc,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(s).totalSteps,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:(0,r.normalizeClass)(["step",{active:(0,r.unref)(s).currentStep>=e}])},[(0,r.createElementVNode)("div",yc,(0,r.toDisplayString)(e),1),(0,r.createElementVNode)("div",xc,(0,r.toDisplayString)(f.value[e-1]),1)],2))),128))])]),(0,r.createCommentVNode)(" å†…å®¹åŒºåŸŸ "),(0,r.createElementVNode)("div",kc,[(0,r.createVNode)(r.Transition,{name:"fade-step",mode:"out-in"},{default:(0,r.withCtx)(()=>[((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:(0,r.unref)(s).currentStep,class:"step-wrapper"},[1===(0,r.unref)(s).currentStep?((0,r.openBlock)(),(0,r.createBlock)(oo,{key:0,ref_key:"step1Ref",ref:b,onAiGenerate:p},null,512)):2===(0,r.unref)(s).currentStep?((0,r.openBlock)(),(0,r.createBlock)(To,{key:1,ref_key:"step2Ref",ref:y,onAiGenerate:p},null,512)):3===(0,r.unref)(s).currentStep?((0,r.openBlock)(),(0,r.createBlock)(ri,{key:2,ref_key:"step3Ref",ref:x,onAiGenerate:p},null,512)):4===(0,r.unref)(s).currentStep?((0,r.openBlock)(),(0,r.createBlock)(cs,{key:3,ref_key:"step4Ref",ref:k,onAiGenerate:p},null,512)):5===(0,r.unref)(s).currentStep?((0,r.openBlock)(),(0,r.createBlock)(Is,{key:4,ref_key:"step5Ref",ref:w,onAiGenerate:p},null,512)):6===(0,r.unref)(s).currentStep?((0,r.openBlock)(),(0,r.createBlock)(Js,{key:5})):7===(0,r.unref)(s).currentStep?((0,r.openBlock)(),(0,r.createBlock)(Ll,{key:6,"is-local-creation":(0,r.unref)(s).isLocalCreation},null,8,["is-local-creation"])):(0,r.createCommentVNode)("v-if",!0)]))]),_:1})]),(0,r.createCommentVNode)(" å¯¼èˆª "),(0,r.createElementVNode)("div",wc,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(h,["prevent"]),type:"button",class:"btn btn-secondary"},(0,r.toDisplayString)(1===(0,r.unref)(s).currentStep?e.$t("è¿”å›é“é€”"):e.$t("ä¸Šä¸€æ­¥")),1),(0,r.createCommentVNode)(" å‰©ä½™ç‚¹æ•°æ˜¾ç¤º "),(0,r.createElementVNode)("div",Ec,[(0,r.unref)(s).currentStep>=3&&(0,r.unref)(s).currentStep<=7?((0,r.openBlock)(),(0,r.createElementBlock)("div",Nc,[(0,r.createElementVNode)("span",Sc,(0,r.toDisplayString)(e.$t("å‰©ä½™å¤©é“ç‚¹"))+":",1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["points-value",{low:(0,r.unref)(s).remainingTalentPoints<0}])},(0,r.toDisplayString)((0,r.unref)(s).remainingTalentPoints),3)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("button",{type:"button",onClick:t[0]||(t[0]=(0,r.withModifiers)(e=>{console.log("[DEBUG] å¼€å¯ä»™é€”æŒ‰é’®è¢«ç‚¹å‡»!"),async function(e){console.log("[DEBUG] handleNext è¢«è°ƒç”¨ï¼Œå½“å‰æ­¥éª¤:",s.currentStep,"æ€»æ­¥éª¤:",s.totalSteps),e&&(e.preventDefault(),e.stopPropagation(),console.log("[DEBUG] äº‹ä»¶å·²é˜»æ­¢é»˜è®¤è¡Œä¸º")),s.currentStep<s.totalSteps?(console.log("[DEBUG] æ‰§è¡Œä¸‹ä¸€æ­¥"),s.nextStep()):(console.log("[DEBUG] æœ€åä¸€æ­¥ï¼Œå‡†å¤‡åˆ›å»ºè§’è‰²"),await N())}(e)},["prevent"])),disabled:d.value||v.value||(0,r.unref)(s).currentStep===(0,r.unref)(s).totalSteps&&(0,r.unref)(s).remainingTalentPoints<0,class:(0,r.normalizeClass)(["btn",{"btn-complete":(0,r.unref)(s).currentStep===(0,r.unref)(s).totalSteps,disabled:d.value||v.value||(0,r.unref)(s).currentStep===(0,r.unref)(s).totalSteps&&(0,r.unref)(s).remainingTalentPoints<0}])},(0,r.toDisplayString)((0,r.unref)(s).currentStep===(0,r.unref)(s).totalSteps?e.$t("å¼€å¯ä»™é€”"):e.$t("ä¸‹ä¸€æ­¥")),11,Vc)])]),(0,r.createCommentVNode)(" ä»™ç¼˜ä¿¡ç‰©æŒ‰é’® - åªåœ¨è”æœºæ¨¡å¼ä¸‹ç‚¹å‡»AIæ¨æ¼”æ—¶æ˜¾ç¤º "),(0,r.createVNode)(uc,{visible:c.value,type:u.value,title:"ä½¿ç”¨ä»™ç¼˜ä¿¡ç‰©",onClose:t[1]||(t[1]=e=>c.value=!1),onSubmit:E},null,8,["visible","type"]),(0,r.createCommentVNode)(" AIç”Ÿæˆç­‰å¾…ç”±å…¨å±€toastå¤„ç† ")]))}});var Cc=n(3177),Ac={};Ac.styleTagTransform=k(),Ac.setAttributes=v(),Ac.insert=g().bind(null,"head"),Ac.domAPI=p(),Ac.insertStyleElement=y(),u()(Cc.A,Ac),Cc.A&&Cc.A.locals&&Cc.A.locals;var Dc=n(5503),Tc={};Tc.styleTagTransform=k(),Tc.setAttributes=v(),Tc.insert=g().bind(null,"head"),Tc.domAPI=p(),Tc.insertStyleElement=y(),u()(Dc.A,Tc),Dc.A&&Dc.A.locals&&Dc.A.locals;const Bc=(0,N.A)(_c,[["__scopeId","data-v-3aba8ab6"]]);function Ic(e){if(window.turnstile)try{window.turnstile.reset(e??void 0)}catch(e){}}function zc(e){if(window.turnstile&&e)try{window.turnstile.remove?.(e)}catch(e){}}const Mc={class:"login-container"},Pc={class:"login-panel"},Rc={class:"title"},$c={key:0,class:"subtitle"},Oc={key:1,class:"subtitle"},Lc={class:"form-group"},Fc={for:"username"},jc=["placeholder"],Uc={class:"form-group"},qc={for:"password"},Gc=["placeholder"],Hc={key:0,class:"form-group"},Yc={for:"confirmPassword"},Wc=["placeholder"],Xc={class:"form-group"},Jc={for:"email"},Kc={class:"email-input-row"},Qc=["placeholder"],Zc=["disabled"],ed={class:"form-group"},td={for:"emailCode"},nd=["placeholder"],ad={key:2,class:"form-group turnstile-group"},rd={key:3,class:"error-message"},od={key:4,class:"success-message"},id={class:"form-actions"},sd=["disabled"],ld={class:"btn-text"},cd={class:"form-footer"},dd={key:3,class:"form-actions"},ud=(0,r.defineComponent)({__name:"LoginView",emits:["loggedIn","back"],setup(e,{emit:t}){const n=t,a=(0,r.ref)(""),o=(0,r.ref)(""),i=(0,r.ref)(""),s=(0,r.ref)(""),l=(0,r.ref)(""),c=(0,r.ref)(!1),d=(0,r.ref)(null),u=(0,r.ref)(null),m=(0,r.ref)(!1),p=(0,r.ref)((0,B.isBackendConfigured)()),f=(0,r.ref)(!1),g=(0,r.ref)(""),h=(0,r.ref)(!1),v=(0,r.ref)(null),b=(0,r.ref)(null),y=(0,r.ref)(""),x=(0,r.ref)(!1),k=(0,r.ref)(!1),w=(0,r.ref)(0);let E=null;const N=()=>{m.value=!m.value,d.value=null,u.value=null,x.value=!1,o.value="",i.value="",s.value="",l.value="",y.value="",f.value&&Ic(b.value)},S=async()=>{if(s.value)if(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s.value)){k.value=!0,d.value=null;try{const e=await(0,I.Em)("/api/v1/auth/send-email-code",{method:"POST",body:JSON.stringify({email:s.value,purpose:"register"})});e.success?(ne.o.success("éªŒè¯ç å·²å‘é€ï¼Œè¯·æŸ¥æ”¶é‚®ä»¶"),w.value=60,E=setInterval(()=>{w.value--,w.value<=0&&E&&(clearInterval(E),E=null)},1e3)):d.value=e.message||"å‘é€å¤±è´¥"}catch(e){d.value=e.detail||e.message||"å‘é€éªŒè¯ç å¤±è´¥"}finally{k.value=!1}}else d.value="é‚®ç®±æ ¼å¼ä¸æ­£ç¡®";else d.value="è¯·å…ˆè¾“å…¥é‚®ç®±"},V=async()=>{if(f.value&&g.value&&v.value)if(await async function(e=8e3){if("undefined"==typeof window)return!1;if(window.turnstile)return!0;const t="undefined"==typeof window?null:(window.turnstileCallbacks||(window.turnstileCallbacks=[]),window.turnstileCallbacks);return!!t&&await new Promise(n=>{let a=!1;const r=e=>{a||(a=!0,n(e))},o=setTimeout(()=>r(!!window.turnstile),e);t.push(()=>{clearTimeout(o),r(!!window.turnstile)})})}())try{zc(b.value),b.value=function(e,t){if(!window.turnstile)throw new Error("Turnstile SDK not loaded");return window.turnstile.render(e,{sitekey:t.siteKey??"0x4AAAAAACKKIZGhHxLokv-j",theme:t.theme??"auto",callback:e=>t.onSuccess("string"==typeof e?e:""),"error-callback":()=>t.onError?.(),"expired-callback":()=>t.onExpired?.()})}(v.value,{siteKey:g.value,theme:"dark"===document.documentElement.getAttribute("data-theme")?"dark":"light",onSuccess:e=>{y.value=e,d.value=null,!x.value||m.value||c.value||(x.value=!1,_())},onExpired:()=>{y.value=""},onError:()=>{y.value="",d.value="æ— æ•ˆåŸŸã€‚å¦‚æœæ­¤é—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·ä¸ç«™ç‚¹ç®¡ç†å‘˜è”ç³»ã€‚"}})}catch(e){console.error("[Turnstile] render failed:",e),d.value="äººæœºéªŒè¯ç»„ä»¶æ¸²æŸ“å¤±è´¥ï¼Œè¯·åˆ·æ–°é¡µé¢åé‡è¯•"}else d.value="äººæœºéªŒè¯ç»„ä»¶åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åˆ·æ–°é¡µé¢åé‡è¯•"};(0,r.watch)(f,e=>{e&&g.value&&setTimeout(()=>{V()},100)}),(0,r.onMounted)(async()=>{p.value&&await(async()=>{try{const e=await(0,I.Em)("/api/v1/auth/security-settings");f.value=e.turnstile_enabled,g.value=e.turnstile_site_key||"",h.value=e.email_verification_enabled}catch(e){console.warn("[Security] è·å–é…ç½®å¤±è´¥:",e),f.value=!1,h.value=!1}})()}),(0,r.onBeforeUnmount)(()=>{zc(b.value),E&&clearInterval(E)});const _=async()=>{if(!c.value)if(p.value){if(f.value&&!y.value)return d.value="è¯·å…ˆå®ŒæˆäººæœºéªŒè¯",void ne.o.error(d.value);c.value=!0,d.value=null,u.value=null;try{const e={username:a.value,password:o.value};f.value&&y.value&&(e.turnstile_token=y.value);const t=await(0,I.Em)("/api/v1/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});localStorage.setItem("access_token",t.access_token),localStorage.setItem("username",a.value),ne.o.success("ç™»å…¥æˆåŠŸï¼Œå¤©æœºå·²è¿é€šï¼"),n("loggedIn")}catch(e){x.value=!1;let t="ä¸€ä¸ªæœªçŸ¥çš„é”™è¯¯å‘ç”Ÿäº†";"object"==typeof e&&null!==e&&("detail"in e&&"string"==typeof e.detail?t=e.detail:"message"in e&&"string"==typeof e.message&&(t=e.message)),d.value=t,ne.o.error(t)}finally{c.value=!1,y.value="",f.value&&Ic(b.value)}}else ne.o.info("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œç™»å½•ä¸å¯ç”¨")};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Mc,[(0,r.createElementVNode)("div",Pc,[(0,r.createElementVNode)("h2",Rc,(0,r.toDisplayString)(m.value?e.$t("åˆå…¥é“é—¨"):e.$t("ç™»å…¥æ´å¤©")),1),p.value?((0,r.openBlock)(),(0,r.createElementBlock)("p",$c,(0,r.toDisplayString)(m.value?e.$t("æ³¨å†Œæ–°é“å·ï¼Œè¸å…¥ä¿®ä»™ä¹‹è·¯ã€‚"):e.$t("éªŒè¯é“å‹èº«ä»½ï¼Œä»¥ä¾¿åŒæ­¥äº‘ç«¯å¤©æœºã€‚")),1)):((0,r.openBlock)(),(0,r.createElementBlock)("p",Oc,"æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œç™»å½•/æ³¨å†Œä¸å¯ç”¨")),p.value?((0,r.openBlock)(),(0,r.createElementBlock)("form",{key:2,onSubmit:t[6]||(t[6]=(0,r.withModifiers)(e=>m.value?(async()=>{if(!c.value)if(p.value)if(o.value===i.value){if(h.value){if(!s.value)return void(d.value="è¯·è¾“å…¥é‚®ç®±");if(!l.value)return void(d.value="è¯·è¾“å…¥é‚®ç®±éªŒè¯ç ")}if(f.value&&!y.value)return d.value="è¯·å…ˆå®ŒæˆäººæœºéªŒè¯",void ne.o.error(d.value);c.value=!0,d.value=null,u.value=null;try{const e={user_name:a.value,password:o.value};h.value&&(e.email=s.value,e.email_code=l.value),f.value&&y.value&&(e.turnstile_token=y.value),await(0,I.Em)("/api/v1/auth/register",{method:"POST",body:JSON.stringify(e)}),ne.o.success("é“å·æ³¨å†ŒæˆåŠŸï¼Œæ¬¢è¿è¸å…¥ä¿®ä»™ä¹‹è·¯ï¼"),f.value?(u.value="æ³¨å†ŒæˆåŠŸï¼è¯·å†æ¬¡å®ŒæˆäººæœºéªŒè¯ä»¥è‡ªåŠ¨ç™»å½•...",x.value=!0,y.value="",Ic(b.value),m.value=!1):(u.value="æ³¨å†ŒæˆåŠŸï¼æ­£åœ¨è‡ªåŠ¨ç™»å½•...",m.value=!1,await _())}catch(e){x.value=!1;let t="ä¸€ä¸ªæœªçŸ¥çš„é”™è¯¯å‘ç”Ÿäº†";"object"==typeof e&&null!==e&&("detail"in e&&"string"==typeof e.detail?t=e.detail:"message"in e&&"string"==typeof e.message&&(t=e.message)),d.value=t,ne.o.error(t)}finally{c.value=!1,y.value="",f.value&&Ic(b.value)}}else d.value="ä¸¤æ¬¡è¾“å…¥çš„ä»¤ç‰Œä¸ä¸€è‡´ï¼";else ne.o.info("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œæ³¨å†Œä¸å¯ç”¨")})():_(),["prevent"]))},[(0,r.createElementVNode)("div",Lc,[(0,r.createElementVNode)("label",Fc,(0,r.toDisplayString)(e.$t("é“å·")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),placeholder:e.$t("è¯·è¾“å…¥æ‚¨çš„é“å·"),required:""},null,8,jc),[[r.vModelText,a.value]])]),(0,r.createElementVNode)("div",Uc,[(0,r.createElementVNode)("label",qc,(0,r.toDisplayString)(e.$t("ä»¤ç‰Œ")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),placeholder:e.$t("è¯·è¾“å…¥æ‚¨çš„èº«ä»½ä»¤ç‰Œ"),required:""},null,8,Gc),[[r.vModelText,o.value]])]),m.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Hc,[(0,r.createElementVNode)("label",Yc,(0,r.toDisplayString)(e.$t("ç¡®è®¤ä»¤ç‰Œ")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":t[2]||(t[2]=e=>i.value=e),placeholder:e.$t("è¯·å†æ¬¡è¾“å…¥ä»¤ç‰Œ"),required:""},null,8,Wc),[[r.vModelText,i.value]])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" é‚®ç®±éªŒè¯ï¼ˆä»…æ³¨å†Œä¸”å¯ç”¨æ—¶æ˜¾ç¤ºï¼‰ "),m.value&&h.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createElementVNode)("div",Xc,[(0,r.createElementVNode)("label",Jc,(0,r.toDisplayString)(e.$t("é‚®ç®±")),1),(0,r.createElementVNode)("div",Kc,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"email",id:"email","onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e),placeholder:e.$t("è¯·è¾“å…¥æ‚¨çš„é‚®ç®±"),required:""},null,8,Qc),[[r.vModelText,s.value]]),(0,r.createElementVNode)("button",{type:"button",class:"btn btn-small",onClick:S,disabled:k.value||w.value>0},(0,r.toDisplayString)(w.value>0?`${w.value}s`:k.value?"å‘é€ä¸­...":"å‘é€éªŒè¯ç "),9,Zc)])]),(0,r.createElementVNode)("div",ed,[(0,r.createElementVNode)("label",td,(0,r.toDisplayString)(e.$t("éªŒè¯ç ")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",id:"emailCode","onUpdate:modelValue":t[4]||(t[4]=e=>l.value=e),placeholder:e.$t("è¯·è¾“å…¥é‚®ç®±éªŒè¯ç "),required:""},null,8,nd),[[r.vModelText,l.value]])])],64)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" Turnstile äººæœºéªŒè¯ "),f.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",ad,[(0,r.createElementVNode)("div",{ref_key:"turnstileContainer",ref:v,class:"turnstile-container"},null,512)])):(0,r.createCommentVNode)("v-if",!0),d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",rd,(0,r.toDisplayString)(d.value),1)):(0,r.createCommentVNode)("v-if",!0),u.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",od,(0,r.toDisplayString)(u.value),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",id,[(0,r.createElementVNode)("button",{type:"button",onClick:t[5]||(t[5]=e=>n("back")),class:"btn btn-secondary"},(0,r.toDisplayString)(e.$t("è¿”å›")),1),(0,r.createElementVNode)("button",{type:"submit",class:(0,r.normalizeClass)(["btn",{"is-loading":c.value}]),disabled:c.value},[(0,r.createElementVNode)("span",ld,(0,r.toDisplayString)(m.value?e.$t("æ³¨å†Œ"):e.$t("ç™»å…¥")),1)],10,sd)]),(0,r.createElementVNode)("div",cd,[(0,r.createElementVNode)("a",{href:"#",onClick:(0,r.withModifiers)(N,["prevent"]),class:"link"},(0,r.toDisplayString)(m.value?e.$t("å·²æœ‰é“å·ï¼Ÿç«‹å³ç™»å…¥"):e.$t("åˆæ¥ä¹åˆ°ï¼Ÿæ³¨å†Œé“å·")),1)])],32)):((0,r.openBlock)(),(0,r.createElementBlock)("div",dd,[(0,r.createElementVNode)("button",{type:"button",onClick:t[7]||(t[7]=e=>n("back")),class:"btn btn-secondary"},(0,r.toDisplayString)(e.$t("è¿”å›")),1)]))])]))}});var md=n(8761),pd={};pd.styleTagTransform=k(),pd.setAttributes=v(),pd.insert=g().bind(null,"head"),pd.domAPI=p(),pd.insertStyleElement=y(),u()(md.A,pd),md.A&&md.A.locals&&md.A.locals;const fd=(0,N.A)(ud,[["__scopeId","data-v-c38dec52"]]);var gd=n(4459),hd=n(4582),vd=n(7760),bd=n(4530),yd=n(6988);const xd={class:"workshop-container"},kd={class:"workshop-panel"},wd={class:"header"},Ed={class:"title-row"},Nd={key:0},Sd={key:1},Vd={key:2},_d={key:1,class:"auth-pill warn"},Cd={key:0,class:"backend-locked"},Ad={class:"tabs"},Dd={key:0,class:"browse"},Td={class:"filters"},Bd=["placeholder"],Id=["value"],zd=["disabled"],Md={key:0,class:"manage-bar"},Pd={class:"manage-meta"},Rd={key:1,class:"loading"},$d={key:2,class:"empty"},Od={key:3,class:"item-list"},Ld={class:"item-top"},Fd={class:"item-title"},jd={class:"item-type"},Ud={key:0,class:"item-desc"},qd={class:"item-meta"},Gd={key:0},Hd={key:1,class:"tags"},Yd={class:"item-actions"},Wd=["onClick"],Xd=["onClick"],Jd={key:4,class:"pagination"},Kd={class:"page-meta"},Qd={class:"page-controls"},Zd=["disabled"],eu=["disabled"],tu={key:1,class:"upload"},nu={key:0,class:"upload-locked"},au={key:1,class:"upload-form"},ru={class:"form-row"},ou={class:"form-row"},iu={class:"form-row"},su={class:"form-row"},lu={class:"form-row"},cu={class:"content-actions"},du={class:"file-btn btn btn-secondary"},uu={key:2,class:"hint"},mu={class:"actions"},pu=["disabled"],fu={key:2,class:"actions"},gu={class:"modal"},hu={key:0,class:"modal-body"},vu={key:1,class:"modal-body"},bu={class:"modal-info"},yu={class:"modal-title"},xu={class:"modal-sub"},ku={key:0},wu={key:1},Eu={key:2},Nu={class:"modal-actions"},Su={key:0,class:"import-saves"},Vu={class:"form-row"},_u=["value"],Cu=["disabled"],Au=(0,r.defineComponent)({__name:"WorkshopView",setup(e){const t=(0,a.useRouter)(),n=(0,hd.useCharacterStore)(),o=(0,r.ref)((0,B.isBackendConfigured)()),i=(0,r.ref)(null),s=(0,r.computed)(()=>o.value?i.value??"":"3.8"),l=(0,r.computed)(()=>s.value||"æœªçŸ¥ç‰ˆæœ¬"),c=(0,r.ref)("checking"),d=(0,r.ref)("browse"),u=(0,r.ref)(1),m=(0,r.ref)(12),p=(0,r.ref)(0),f=[8,12,20,30],g=(0,r.computed)(()=>"mine"===d.value?"mine":"browse"),h=(0,r.computed)(()=>Math.max(1,Math.ceil(p.value/m.value))),v=(0,r.computed)(()=>"mine"===d.value),b=(0,r.computed)(()=>"upload"!==d.value),y={settings:"è®¾ç½®",prompts:"æç¤ºè¯",saves:"å•æœºå­˜æ¡£",start_config:"å¼€å±€é…ç½®"},x=async()=>{if(o.value){c.value="checking";try{const e=await(0,I.verifyStoredToken)();c.value=e?"authed":"unauthed"}catch{c.value="unauthed"}}else c.value="unauthed"};(0,r.onMounted)(async()=>{if(!o.value)return;const e=await(0,B.d9)();e&&(i.value=e),x(),A()});const k=()=>{t.push("/")},w=()=>{o.value?t.push("/login"):ne.o.info("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œç™»å½•ä¸å¯ç”¨")},E=e=>{"mine"!==e||"authed"===c.value?d.value=e:w()},N=(0,r.ref)(""),V=(0,r.ref)(""),_=(0,r.ref)([]),C=(0,r.ref)(!1),A=async()=>{if(!o.value)return _.value=[],void(p.value=0);if("mine"!==g.value||"authed"===c.value){C.value=!0;try{const e="mine"===g.value?await async function(e){const t=new URLSearchParams;e.type&&t.set("type",e.type),e.q&&t.set("q",e.q),e.page&&t.set("page",String(e.page)),e.pageSize&&t.set("page_size",String(e.pageSize));const n=t.toString();return I.Em.get("/api/v1/workshop/my-items"+(n?`?${n}`:""))}({type:N.value,q:V.value,page:u.value,pageSize:m.value}):await async function(e){const t=new URLSearchParams;e.type&&t.set("type",e.type),e.q&&t.set("q",e.q),e.page&&t.set("page",String(e.page)),e.pageSize&&t.set("page_size",String(e.pageSize));const n=t.toString();return I.Em.get("/api/v1/workshop/items"+(n?`?${n}`:""))}({type:N.value,q:V.value,page:u.value,pageSize:m.value});_.value=e.items||[],p.value=e.total||0}catch{_.value=[],p.value=0}finally{C.value=!1}}else w()},D=()=>{u.value>1&&(u.value-=1)},T=()=>{u.value<h.value&&(u.value+=1)};(0,r.watch)(d,()=>{u.value=1,b.value&&A()}),(0,r.watch)(u,()=>{b.value&&A()}),(0,r.watch)(m,()=>{u.value=1,b.value&&A()}),(0,r.watch)(N,()=>{u.value=1,b.value&&A()});const z=(0,r.ref)({open:!1,loading:!1,item:null,payload:null}),M=(0,r.ref)(""),P=()=>{z.value.open=!1,z.value.loading=!1,z.value.item=null,z.value.payload=null,M.value=""},R=()=>{if(!z.value.item)return;const e=z.value.payload,t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),a=document.createElement("a");a.href=URL.createObjectURL(n);const r=(new Date).toISOString().split("T")[0];a.download=`ä»™é€”-å·¥åŠ-${z.value.item.type}-${r}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)},$=()=>{const e=z.value.payload,t=(0,vd.ZT)(e),n="settings"===t.type?t.payload:e?.settings??e;n&&"object"==typeof n?(localStorage.setItem("dad_game_settings",JSON.stringify(n)),ne.o.success("å·²å¯¼å…¥æœ¬åœ°è®¾ç½®ï¼ˆå¦‚æœªç”Ÿæ•ˆè¯·åˆ·æ–°é¡µé¢ï¼‰")):ne.o.error("è®¾ç½®å†…å®¹æ ¼å¼ä¸æ­£ç¡®")},O=async()=>{const e=z.value.payload,t=(0,vd.ZT)(e),n="prompts"===t.type?t.payload:e;if(!n||"object"!=typeof n)return void ne.o.error("æç¤ºè¯å†…å®¹æ ¼å¼ä¸æ­£ç¡®");const a=await gd.promptStorage.importPrompts(n);ne.o.success(`å·²å¯¼å…¥ ${a} æ¡æç¤ºè¯ï¼ˆå¦‚æœªç”Ÿæ•ˆè¯·åˆ·æ–°é¡µé¢ï¼‰`)},L=()=>{const e=z.value.payload,t=(0,vd.ZT)(e),n="start_config"===t.type?t.payload:e;n&&"object"==typeof n?(localStorage.setItem("dad_start_config",JSON.stringify(n)),ne.o.success("å·²åº”ç”¨åˆ°æœ¬åœ°å¼€å±€é…ç½®ï¼ˆé‡æ–°æ‰“å¼€å¼€å±€é¡µé¢ç”Ÿæ•ˆï¼‰")):ne.o.error("å¼€å±€é…ç½®æ ¼å¼ä¸æ­£ç¡®")},F=(0,r.computed)(()=>(n.allCharacterProfiles||[]).filter(e=>"å•æœº"===e?.æ¨¡å¼).map(e=>({è§’è‰²ID:e.è§’è‰²ID,name:e?.è§’è‰²?.åå­—||e.è§’è‰²ID}))),j=async()=>{if(!M.value)return;const e=z.value.payload,t=(0,vd.ZT)(e),a="saves"===t.type&&Array.isArray(t.payload?.saves)?t.payload.saves:"character"===t.type&&Array.isArray(t.payload?.å­˜æ¡£åˆ—è¡¨)?t.payload.å­˜æ¡£åˆ—è¡¨:null;if(a){for(const e of a)await n.importSave(M.value,e);ne.o.success(`å·²å¯¼å…¥ ${a.length} ä¸ªå­˜æ¡£åˆ°æœ¬åœ°å•æœºè§’è‰²`)}else ne.o.error("å­˜æ¡£å†…å®¹æ ¼å¼ä¸æ­£ç¡®")},U=(0,r.ref)("settings"),q=(0,r.ref)(""),G=(0,r.ref)(""),H=(0,r.ref)(""),Y=(0,r.ref)(null),W=(0,r.ref)(""),X=(0,r.ref)(!1),J=async e=>{const t=e.target.files?.[0];if(t)try{const e=await t.text();Y.value=JSON.parse(e),W.value=`å·²è¯»å–ï¼š${t.name}`,q.value||(q.value=t.name.replace(/\.json$/i,""))}catch{Y.value=null,W.value="",ne.o.error("è¯»å–æ–‡ä»¶å¤±è´¥ï¼Œè¯·ç¡®è®¤æ˜¯æœ‰æ•ˆçš„ JSON")}finally{e.target.value=""}},K=()=>{try{const e=localStorage.getItem("dad_game_settings");if(!e)return void ne.o.info("æœ¬åœ°è¿˜æ²¡æœ‰è®¾ç½®æ•°æ®");const t=JSON.parse(e);Y.value={settings:t,exportInfo:{timestamp:(new Date).toISOString(),version:l.value,gameVersion:`ä»™é€” v${l.value}`}},W.value="å·²ä»æœ¬åœ°è¯»å– dad_game_settings",q.value||(q.value=`è®¾ç½®-${l.value}`)}catch{ne.o.error("è¯»å–æœ¬åœ°è®¾ç½®å¤±è´¥")}},Q=async()=>{try{const e=await gd.promptStorage.exportAll();Y.value=e,W.value="å·²ä»æœ¬åœ°å¯¼å‡ºæç¤ºè¯",q.value||(q.value=`æç¤ºè¯-${l.value}`)}catch{ne.o.error("å¯¼å‡ºæœ¬åœ°æç¤ºè¯å¤±è´¥")}},Z=async()=>{if("authed"!==c.value)return void ne.o.info("ä¸Šä¼ å‰éœ€è¦å…ˆå®Œæˆè´¦å·éªŒè¯");const e=q.value.trim();if(e)if(Y.value){X.value=!0;try{const n=(()=>{const e=Y.value,t=(0,vd.ZT)(e);if("settings"===U.value){const n="settings"===t.type?t.payload:e?.settings??e;if(!n||"object"!=typeof n)throw new Error("è®¾ç½®å†…å®¹æ ¼å¼ä¸æ­£ç¡®");return{bundleType:"settings",bundle:(0,vd.q3)("settings",n,{appVersion:l.value})}}if("prompts"===U.value){const n="prompts"===t.type?t.payload:e;if(!n||"object"!=typeof n)throw new Error("æç¤ºè¯å†…å®¹æ ¼å¼ä¸æ­£ç¡®");return{bundleType:"prompts",bundle:(0,vd.q3)("prompts",n,{appVersion:l.value})}}if("start_config"===U.value){const n="start_config"===t.type?t.payload:e;if(!n||"object"!=typeof n)throw new Error("å¼€å±€é…ç½®æ ¼å¼ä¸æ­£ç¡®");return{bundleType:"start_config",bundle:(0,vd.q3)("start_config",n,{appVersion:l.value})}}if("saves"===U.value){const n="character"===t.type?"character":"saves",a="saves"===t.type&&Array.isArray(t.payload?.saves)?t.payload.saves:"character"===t.type&&Array.isArray(t.payload?.å­˜æ¡£åˆ—è¡¨)?t.payload.å­˜æ¡£åˆ—è¡¨:"saves"===e?.type&&Array.isArray(e.saves)?e.saves:"character"===e?.type&&Array.isArray(e.character?.å­˜æ¡£åˆ—è¡¨)?e.character.å­˜æ¡£åˆ—è¡¨:null;if(!a)throw new Error("å•æœºå­˜æ¡£å¿…é¡»ä½¿ç”¨æ¸¸æˆå¯¼å‡ºçš„å­˜æ¡£æˆ–è§’è‰²æ–‡ä»¶");const r=a.map(e=>{const t=e?.å­˜æ¡£æ•°æ®;if(!t)throw new Error(`å­˜æ¡£ã€Œ${e?.å­˜æ¡£å??"æœªçŸ¥"}ã€ç¼ºå°‘å­˜æ¡£æ•°æ®`);const n=(0,bd.ru)(t)?t:(0,bd.jj)(t).migrated,a=(0,yd.$)(n);if(!a.isValid)throw new Error(`å­˜æ¡£ã€Œ${e?.å­˜æ¡£å??"æœªçŸ¥"}ã€æ ¡éªŒå¤±è´¥ï¼š${a.errors[0]||"æœªçŸ¥åŸå› "}`);return{...e,å­˜æ¡£æ•°æ®:n}});if("character"===n){const n={è§’è‰²ID:e?.è§’è‰²ID??t.payload?.è§’è‰²ID,è§’è‰²ä¿¡æ¯:JSON.parse(JSON.stringify(e?.è§’è‰²ä¿¡æ¯??t.payload?.è§’è‰²ä¿¡æ¯??{})),å­˜æ¡£åˆ—è¡¨:r};return{bundleType:"character",bundle:(0,vd.q3)("character",n,{appVersion:l.value})}}const o={characterId:e?.characterId??t.payload?.characterId,characterName:e?.characterName??t.payload?.characterName,saves:r};return{bundleType:"saves",bundle:(0,vd.q3)("saves",o,{appVersion:l.value})}}throw new Error("ä¸æ”¯æŒçš„ä¸Šä¼ ç±»å‹")})();await async function(e){return I.Em.post("/api/v1/workshop/items",e)}({type:U.value,title:e,description:G.value.trim()||void 0,tags:(t=H.value,t.split(",").map(e=>e.trim()).filter(Boolean).slice(0,12)),payload:n.bundle,game_version:`ä»™é€” v${l.value}`,data_version:"1"}),ne.o.success("ä¸Šä¼ æˆåŠŸ"),q.value="",G.value="",H.value="",Y.value=null,W.value="",d.value="browse",u.value=1,await A()}catch{}finally{X.value=!1}var t}else ne.o.error("è¯·å…ˆé€‰æ‹©/ç”Ÿæˆè¦ä¸Šä¼ çš„å†…å®¹");else ne.o.error("è¯·å¡«å†™æ ‡é¢˜")};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",xd,[(0,r.createVNode)(S),(0,r.createElementVNode)("div",kd,[(0,r.createElementVNode)("div",wd,[(0,r.createElementVNode)("div",Ed,[t[12]||(t[12]=(0,r.createElementVNode)("h2",{class:"title"},"åˆ›æ„å·¥åŠ",-1)),o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)(["auth-pill",{ok:"authed"===c.value,warn:"authed"!==c.value}])},["checking"===c.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",Nd,"æ£€æµ‹ä¸­â€¦")):"authed"===c.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",Sd,"å·²éªŒè¯")):((0,r.openBlock)(),(0,r.createElementBlock)("span",Vd,"æœªéªŒè¯")),"authed"!==c.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:3,class:"pill-link",onClick:w},"å»éªŒè¯")):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{class:"pill-link",onClick:x},"åˆ·æ–°")],2)):((0,r.openBlock)(),(0,r.createElementBlock)("div",_d,t[11]||(t[11]=[(0,r.createElementVNode)("span",null,"æœªé…ç½®åç«¯",-1)])))]),t[13]||(t[13]=(0,r.createElementVNode)("p",{class:"subtitle"},"ç”¨äºç©å®¶ä¹‹é—´ä¸Šä¼ /åˆ†äº«ï¼šè®¾ç½®ã€æç¤ºè¯ã€å¼€å±€é…ç½®ã€å­˜æ¡£ç­‰å†…å®¹",-1)),t[14]||(t[14]=(0,r.createElementVNode)("p",{class:"notice"},[(0,r.createTextVNode)(" è¯´æ˜ï¼šåˆ›æ„å·¥åŠå†…å®¹åªå¯¹"),(0,r.createElementVNode)("strong",null,"å•æœºæœ¬åœ°"),(0,r.createTextVNode)("ç”Ÿæ•ˆï¼›è”æœºæ¨¡å¼çš„æ•°æ®ç”±åç«¯æƒå¨æ§åˆ¶ï¼ˆç”¨äºé˜²ä½œå¼Šï¼‰ï¼Œä¸ä¼šè¢«å·¥åŠå†…å®¹è¦†ç›–ã€‚ ")],-1))]),o.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createElementVNode)("div",Ad,[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["tab",{active:"browse"===d.value}]),onClick:t[0]||(t[0]=e=>E("browse"))},"æµè§ˆ",2),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["tab",{active:"mine"===d.value}]),onClick:t[1]||(t[1]=e=>E("mine"))},"æˆ‘çš„å‘å¸ƒ",2),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["tab",{active:"upload"===d.value}]),onClick:t[2]||(t[2]=e=>E("upload"))},"ä¸Šä¼ ",2)]),"upload"!==d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Dd,[(0,r.createElementVNode)("div",Td,[(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>N.value=e),class:"input"},t[16]||(t[16]=[(0,r.createStaticVNode)('<option value="" data-v-4d768244>å…¨éƒ¨ç±»å‹</option><option value="settings" data-v-4d768244>è®¾ç½®</option><option value="prompts" data-v-4d768244>æç¤ºè¯</option><option value="saves" data-v-4d768244>å•æœºå­˜æ¡£</option><option value="start_config" data-v-4d768244>å¼€å±€é…ç½®</option>',5)]),512),[[r.vModelSelect,N.value]]),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>V.value=e),class:"input",placeholder:v.value?"æœç´¢æ ‡é¢˜ / è¯´æ˜":"æœç´¢æ ‡é¢˜ / ä½œè€… / è¯´æ˜"},null,8,Bd),[[r.vModelText,V.value]]),(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>m.value=e),class:"input"},[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f,e=>(0,r.createElementVNode)("option",{key:e,value:e}," æ¯é¡µ "+(0,r.toDisplayString)(e)+" ä¸ª ",9,Id)),64))],512),[[r.vModelSelect,m.value,void 0,{number:!0}]]),(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:A,disabled:C.value},"åˆ·æ–°",8,zd)]),v.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Md,[t[17]||(t[17]=(0,r.createElementVNode)("div",{class:"manage-title"},"æˆ‘çš„å‘å¸ƒç®¡ç†",-1)),(0,r.createElementVNode)("div",Pd,"ä»…æ˜¾ç¤ºè‡ªå·±å‘å¸ƒçš„å†…å®¹ Â· å…± "+(0,r.toDisplayString)(p.value)+" æ¡",1)])):(0,r.createCommentVNode)("v-if",!0),C.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Rd,"åŠ è½½ä¸­â€¦")):0===_.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",$d,t[18]||(t[18]=[(0,r.createElementVNode)("p",null,"æš‚æ— å†…å®¹",-1)]))):((0,r.openBlock)(),(0,r.createElementBlock)("div",Od,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(_.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"item-card"},[(0,r.createElementVNode)("div",Ld,[(0,r.createElementVNode)("div",Fd,(0,r.toDisplayString)(e.title),1),(0,r.createElementVNode)("div",jd,(0,r.toDisplayString)(y[e.type]||e.type),1)]),e.description?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ud,(0,r.toDisplayString)(e.description),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",qd,[(0,r.createElementVNode)("span",null,"ä½œè€…ï¼š"+(0,r.toDisplayString)(e.author_name),1),e.game_version?((0,r.openBlock)(),(0,r.createElementBlock)("span",Gd,"ç‰ˆæœ¬ï¼š"+(0,r.toDisplayString)(e.game_version),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("span",null,"ä¸‹è½½ï¼š"+(0,r.toDisplayString)(e.downloads),1)]),e.tags?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Hd,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.tags,e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"tag"},(0,r.toDisplayString)(e),1))),128))])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",Yd,[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:t=>(async e=>{z.value.open=!0,z.value.loading=!0,z.value.item=null,z.value.payload=null;try{const t=await async function(e){return I.Em.post(`/api/v1/workshop/items/${e}/download`,{})}(e);z.value.item=t.item,z.value.payload=t.payload}catch{P()}finally{z.value.loading=!1}})(e.id)},"ä¸‹è½½",8,Wd),v.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn danger",onClick:t=>(async e=>{if("authed"===c.value){if(window.confirm(`ç¡®å®šåˆ é™¤ã€Œ${e.title}ã€å—ï¼Ÿåˆ é™¤åå°†æ— æ³•æ¢å¤ã€‚`))try{await async function(e){return I.Em.delete(`/api/v1/workshop/items/${e}`)}(e.id),ne.o.success("å·²åˆ é™¤"),await A()}catch{}}else w()})(e)},"åˆ é™¤",8,Xd)):(0,r.createCommentVNode)("v-if",!0)])]))),128))])),h.value>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",Jd,[(0,r.createElementVNode)("div",Kd,[(0,r.createElementVNode)("span",null,"å…± "+(0,r.toDisplayString)(p.value)+" æ¡",1),(0,r.createElementVNode)("span",null,"ç¬¬ "+(0,r.toDisplayString)(u.value)+" / "+(0,r.toDisplayString)(h.value)+" é¡µ",1)]),(0,r.createElementVNode)("div",Qd,[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:D,disabled:u.value<=1},"ä¸Šä¸€é¡µ",8,Zd),(0,r.createElementVNode)("button",{class:"btn",onClick:T,disabled:u.value>=h.value},"ä¸‹ä¸€é¡µ",8,eu)])])):(0,r.createCommentVNode)("v-if",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",tu,["authed"!==c.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",nu,[t[19]||(t[19]=(0,r.createElementVNode)("p",null,"ä¸Šä¼ éœ€è¦å…ˆå®Œæˆè´¦å·éªŒè¯ï¼ˆç”¨äºæ ‡è¯†ä½œè€…ä¸æƒé™æ§åˆ¶ï¼‰ã€‚",-1)),(0,r.createElementVNode)("div",{class:"actions"},[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:w},"å»éªŒè¯"),(0,r.createElementVNode)("button",{class:"btn",onClick:x},"åˆ·æ–°")])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",au,[(0,r.createElementVNode)("div",ru,[t[21]||(t[21]=(0,r.createElementVNode)("label",{class:"label"},"ç±»å‹",-1)),(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>U.value=e),class:"input"},t[20]||(t[20]=[(0,r.createElementVNode)("option",{value:"settings"},"è®¾ç½®",-1),(0,r.createElementVNode)("option",{value:"prompts"},"æç¤ºè¯",-1),(0,r.createElementVNode)("option",{value:"saves"},"å•æœºå­˜æ¡£",-1),(0,r.createElementVNode)("option",{value:"start_config"},"å¼€å±€é…ç½®",-1)]),512),[[r.vModelSelect,U.value]])]),(0,r.createElementVNode)("div",ou,[t[22]||(t[22]=(0,r.createElementVNode)("label",{class:"label"},"æ ‡é¢˜",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>q.value=e),class:"input",placeholder:"ç»™è¿™ä¸ªåˆ†äº«èµ·ä¸ªåå­—"},null,512),[[r.vModelText,q.value]])]),(0,r.createElementVNode)("div",iu,[t[23]||(t[23]=(0,r.createElementVNode)("label",{class:"label"},"è¯´æ˜",-1)),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>G.value=e),class:"input textarea",placeholder:"å¯é€‰ï¼šå†™ç‚¹è¯´æ˜ï¼ˆæ”¯æŒ 2000 å­—ä»¥å†…ï¼‰"},null,512),[[r.vModelText,G.value]])]),(0,r.createElementVNode)("div",su,[t[24]||(t[24]=(0,r.createElementVNode)("label",{class:"label"},"æ ‡ç­¾",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>H.value=e),class:"input",placeholder:"å¯é€‰ï¼šç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼šæ–°æ‰‹,çˆ½æ–‡,æ…¢çƒ­"},null,512),[[r.vModelText,H.value]])]),(0,r.createElementVNode)("div",lu,[t[26]||(t[26]=(0,r.createElementVNode)("label",{class:"label"},"å†…å®¹",-1)),(0,r.createElementVNode)("div",cu,["settings"===U.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn btn-secondary",onClick:K}," ä»æœ¬åœ°è¯»å–è®¾ç½® ")):(0,r.createCommentVNode)("v-if",!0),"prompts"===U.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"btn btn-secondary",onClick:Q}," ä»æœ¬åœ°å¯¼å‡ºæç¤ºè¯ ")):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("label",du,[t[25]||(t[25]=(0,r.createTextVNode)(" é€‰æ‹© JSON æ–‡ä»¶ ",-1)),(0,r.createElementVNode)("input",{type:"file",accept:".json,application/json",onChange:J,hidden:""},null,32)]),W.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",uu,(0,r.toDisplayString)(W.value),1)):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createElementVNode)("div",mu,[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:k},"è¿”å›"),(0,r.createElementVNode)("button",{class:"btn",onClick:Z,disabled:X.value},(0,r.toDisplayString)(X.value?"ä¸Šä¼ ä¸­â€¦":"ä¸Šä¼ åˆ°å·¥åŠ"),9,pu)])]))])),"upload"!==d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",fu,[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:k},"è¿”å›")])):(0,r.createCommentVNode)("v-if",!0)],64)):((0,r.openBlock)(),(0,r.createElementBlock)("div",Cd,[t[15]||(t[15]=(0,r.createElementVNode)("p",null,"æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œåˆ›æ„å·¥åŠä¸å¯ç”¨ã€‚",-1)),(0,r.createElementVNode)("div",{class:"actions"},[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:k},"è¿”å›")])]))]),(0,r.createCommentVNode)(" ä¸‹è½½/å¯¼å…¥å¼¹çª— "),z.value.open?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(P,["self"])},[(0,r.createElementVNode)("div",gu,[(0,r.createElementVNode)("div",{class:"modal-header"},[t[27]||(t[27]=(0,r.createElementVNode)("h3",null,"ä¸‹è½½å†…å®¹",-1)),(0,r.createElementVNode)("button",{class:"close-btn",onClick:P},"Ã—")]),z.value.loading?((0,r.openBlock)(),(0,r.createElementBlock)("div",hu,"åŠ è½½ä¸­â€¦")):((0,r.openBlock)(),(0,r.createElementBlock)("div",vu,[(0,r.createElementVNode)("div",bu,[(0,r.createElementVNode)("div",yu,(0,r.toDisplayString)(z.value.item?.title),1),(0,r.createElementVNode)("div",xu,[z.value.item?((0,r.openBlock)(),(0,r.createElementBlock)("span",ku,"ç±»å‹ï¼š"+(0,r.toDisplayString)(y[z.value.item.type]||z.value.item.type),1)):(0,r.createCommentVNode)("v-if",!0),z.value.item?.author_name?((0,r.openBlock)(),(0,r.createElementBlock)("span",wu,"ä½œè€…ï¼š"+(0,r.toDisplayString)(z.value.item.author_name),1)):(0,r.createCommentVNode)("v-if",!0),z.value.item?.game_version?((0,r.openBlock)(),(0,r.createElementBlock)("span",Eu,"ç‰ˆæœ¬ï¼š"+(0,r.toDisplayString)(z.value.item.game_version),1)):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createElementVNode)("div",Nu,[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:R},"ä¸‹è½½ä¸ºæ–‡ä»¶"),"settings"===z.value.item?.type?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn",onClick:$}," å¯¼å…¥åˆ°æœ¬åœ°è®¾ç½® ")):(0,r.createCommentVNode)("v-if",!0),"prompts"===z.value.item?.type?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"btn",onClick:O}," å¯¼å…¥åˆ°æœ¬åœ°æç¤ºè¯ ")):(0,r.createCommentVNode)("v-if",!0),"start_config"===z.value.item?.type?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:2,class:"btn",onClick:L}," åº”ç”¨åˆ°å¼€å±€é…ç½® ")):(0,r.createCommentVNode)("v-if",!0)]),"saves"===z.value.item?.type?((0,r.openBlock)(),(0,r.createElementBlock)("div",Su,[(0,r.createElementVNode)("div",Vu,[t[29]||(t[29]=(0,r.createElementVNode)("label",{class:"label"},"å¯¼å…¥åˆ°å•æœºè§’è‰²",-1)),(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>M.value=e),class:"input"},[t[28]||(t[28]=(0,r.createElementVNode)("option",{value:""},"è¯·é€‰æ‹©è§’è‰²",-1)),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(F.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{key:e.è§’è‰²ID,value:e.è§’è‰²ID},(0,r.toDisplayString)(e.name),9,_u))),128))],512),[[r.vModelSelect,M.value]])]),(0,r.createElementVNode)("button",{class:"btn",disabled:!M.value,onClick:j},"å¯¼å…¥å­˜æ¡£",8,Cu)])):(0,r.createCommentVNode)("v-if",!0)]))])])):(0,r.createCommentVNode)("v-if",!0)]))}});var Du=n(8713),Tu={};Tu.styleTagTransform=k(),Tu.setAttributes=v(),Tu.insert=g().bind(null,"head"),Tu.domAPI=p(),Tu.insertStyleElement=y(),u()(Du.A,Tu),Du.A&&Du.A.locals&&Du.A.locals;const Bu=(0,N.A)(Au,[["__scopeId","data-v-4d768244"]]);var Iu=n(1184);const zu=(0,V.A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Mu=(0,V.A)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),Pu=(0,V.A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Ru=(0,V.A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),$u=(0,V.A)("scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);var Ou=n(7677);const Lu=(0,V.A)("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),Fu=(0,V.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ju=(0,V.A)("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),Uu=(0,V.A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),qu=(0,V.A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var Gu=n(1412);const Hu=(0,V.A)("box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);var Yu=n(8684),Wu=n(8133);const Xu=(0,V.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Ju=(0,V.A)("users-round",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);var Ku=n(6494);const Qu=new class{listeners=new Map;on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.get(e)?.delete(t)}async emit(e,t){const n=Array.from(this.listeners.get(e)||[]);for(const e of n)await e(t)}};var Zu=n(2224);const em={ç»ƒæ°”:1,ç»ƒæ°”åˆæœŸ:1,ç»ƒæ°”ä¸­æœŸ:1,ç»ƒæ°”åæœŸ:1,ç»ƒæ°”åœ†æ»¡:1,ç»ƒæ°”æå¢ƒ:1,ç­‘åŸº:2,ç­‘åŸºåˆæœŸ:2,ç­‘åŸºä¸­æœŸ:2,ç­‘åŸºåæœŸ:2,ç­‘åŸºåœ†æ»¡:2,ç­‘åŸºæå¢ƒ:2,é‡‘ä¸¹:3,é‡‘ä¸¹åˆæœŸ:3,é‡‘ä¸¹ä¸­æœŸ:3,é‡‘ä¸¹åæœŸ:3,é‡‘ä¸¹åœ†æ»¡:3,é‡‘ä¸¹æå¢ƒ:3,å…ƒå©´:4,å…ƒå©´åˆæœŸ:4,å…ƒå©´ä¸­æœŸ:4,å…ƒå©´åæœŸ:4,å…ƒå©´åœ†æ»¡:4,å…ƒå©´æå¢ƒ:4,åŒ–ç¥:5,åŒ–ç¥åˆæœŸ:5,åŒ–ç¥ä¸­æœŸ:5,åŒ–ç¥åæœŸ:5,åŒ–ç¥åœ†æ»¡:5,åŒ–ç¥æå¢ƒ:5,ç‚¼è™š:6,ç‚¼è™šåˆæœŸ:6,ç‚¼è™šä¸­æœŸ:6,ç‚¼è™šåæœŸ:6,ç‚¼è™šåœ†æ»¡:6,ç‚¼è™šæå¢ƒ:6,åˆä½“:7,åˆä½“åˆæœŸ:7,åˆä½“ä¸­æœŸ:7,åˆä½“åæœŸ:7,åˆä½“åœ†æ»¡:7,åˆä½“æå¢ƒ:7,æ¸¡åŠ«:8,æ¸¡åŠ«åˆæœŸ:8,æ¸¡åŠ«ä¸­æœŸ:8,æ¸¡åŠ«åæœŸ:8,æ¸¡åŠ«åœ†æ»¡:8,æ¸¡åŠ«æå¢ƒ:8,ç»ƒæ°”æœŸ:1,ç­‘åŸºæœŸ:2,é‡‘ä¸¹æœŸ:3,å…ƒå©´æœŸ:4,åŒ–ç¥æœŸ:5,ç‚¼è™šæœŸ:6,åˆä½“æœŸ:7,æ¸¡åŠ«æœŸ:8};function tm(e){return em[e]||0}function nm(e){return Array.isArray(e)?e.map(e=>{const t=function(e){if(!e)return e;if(e.leadership&&!e.é¢†å¯¼å±‚&&(e.é¢†å¯¼å±‚=e.leadership,delete e.leadership),e.memberCount&&!e.æˆå‘˜æ•°é‡&&(e.æˆå‘˜æ•°é‡={æ€»æ•°:e.memberCount.total,æŒ‰å¢ƒç•Œ:e.memberCount.byRealm,æŒ‰èŒä½:e.memberCount.byPosition},delete e.memberCount),e.æˆå‘˜æ•°é‡){const t=e.æˆå‘˜æ•°é‡;void 0!==t.total&&void 0===t.æ€»æ•°&&(t.æ€»æ•°=t.total),t.byRealm&&!t.æŒ‰å¢ƒç•Œ&&(t.æŒ‰å¢ƒç•Œ=t.byRealm),t.byPosition&&!t.æŒ‰èŒä½&&(t.æŒ‰èŒä½=t.byPosition)}const t=e.é¢†å¯¼å±‚?.æœ€å¼ºä¿®ä¸º||e.æœ€å¼ºä¿®ä¸º,n=tm(t);if(console.log(`[å®—é—¨éªŒè¯] ${e.åç§°}: æœ€å¼ºä¿®ä¸º="${t}" â†’ ç­‰çº§=${n}`),console.log(`[å®—é—¨éªŒè¯] ${e.åç§°}: åŸå§‹å¢ƒç•Œåˆ†å¸ƒ=`,e.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ),e.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ){const t=e.æˆå‘˜æ•°é‡.æŒ‰å¢ƒç•Œ;let n=0,a="";if(Object.keys(t).forEach(e=>{if(t[e]>0){const t=tm(e);t>n&&(n=t,a=e)}}),n>0&&a){const t=`${a.replace("æœŸ","")}åœ†æ»¡`;if(e.é¢†å¯¼å±‚){const a=e.é¢†å¯¼å±‚.æœ€å¼ºä¿®ä¸º;e.é¢†å¯¼å±‚.æœ€å¼ºä¿®ä¸º=t,console.log(`[å®—é—¨éªŒè¯] ${e.åç§°}: æ ¹æ®å¢ƒç•Œåˆ†å¸ƒè‡ªåŠ¨ä¿®æ­£æœ€å¼ºä¿®ä¸º: "${a}" â†’ "${t}"`),tm(e.é¢†å¯¼å±‚.å®—ä¸»ä¿®ä¸º||"")<n&&(e.é¢†å¯¼å±‚.å®—ä¸»ä¿®ä¸º=t,console.log(`[å®—é—¨éªŒè¯] ${e.åç§°}: åŒæ—¶æ›´æ–°å®—ä¸»ä¿®ä¸ºä¸º: "${t}"`))}}console.log(`[å®—é—¨éªŒè¯] ${e.åç§°}: å¢ƒç•Œåˆ†å¸ƒåŒ…å«:`,Object.keys(t).filter(e=>t[e]>0))}if(console.log(`[å®—é—¨éªŒè¯] ${e.åç§°}: éªŒè¯åå¢ƒç•Œåˆ†å¸ƒ=`,e.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ),e.é¢†å¯¼å±‚?.é•¿è€æ•°é‡&&e.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ){const t=e.é¢†å¯¼å±‚.é•¿è€æ•°é‡,n=e.æˆå‘˜æ•°é‡.æŒ‰å¢ƒç•Œ;let a=0;if(Object.keys(n).forEach(e=>{tm(e)>=4&&(a+=n[e]||0)}),a>1.5*t){const e=1.2*t/a;Object.keys(n).forEach(t=>{if(tm(t)>=4){const a=n[t];n[t]=Math.max(1,Math.round(a*e))}})}}return e}(e),n=function(e){const t=[];if(!e)return t.push("å®—é—¨æ•°æ®ä¸ºç©º"),{isValid:!1,errors:t};const n=e.é¢†å¯¼å±‚?.æœ€å¼ºä¿®ä¸º||e.æœ€å¼ºä¿®ä¸º,a=tm(n);e.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ&&Object.keys(e.æˆå‘˜æ•°é‡.æŒ‰å¢ƒç•Œ).forEach(e=>{tm(e)>a&&t.push(`å¢ƒç•Œåˆ†å¸ƒé”™è¯¯: å­˜åœ¨${e}æœŸä¿®å£«ï¼Œä½†æœ€å¼ºä¿®ä¸ºä»…ä¸º${n}`)});const r=e.é¢†å¯¼å±‚?.é•¿è€æ•°é‡;if(r&&e.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ){let n=0;Object.keys(e.æˆå‘˜æ•°é‡.æŒ‰å¢ƒç•Œ).forEach(t=>{tm(t)>=4&&(n+=e.æˆå‘˜æ•°é‡.æŒ‰å¢ƒç•Œ[t]||0)}),n>2*r&&t.push(`äººå‘˜é…ç½®ä¸åˆç†: é•¿è€${r}ä½ï¼Œä½†å…ƒå©´æœŸä»¥ä¸Šä¿®å£«${n}äºº`)}return{isValid:0===t.length,errors:t}}(t);return n.isValid||console.warn(`[å®—é—¨éªŒè¯] ${e.åç§°||"æœªçŸ¥å®—é—¨"}å­˜åœ¨é—®é¢˜:`,n.errors),t}):e}const am=(0,V.A)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),rm=(0,V.A)("minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);function om(e){if(!e)return"å‡¡äºº";if("string"==typeof e)return e;const t=e.åç§°||e.name||"å‡¡äºº",n=e.é˜¶æ®µ||e.stage||"";return"å‡¡äºº"===t||"Mortal"===t?"å‡¡äºº":n?`${t}Â·${n}`:t}var im=n(1040);const sm={class:"top-bar"},lm={class:"left-section"},cm={class:"game-title"},dm={key:0,class:"character-quick-info"},um={class:"character-name"},mm={class:"character-realm"},pm={class:"center-section"},fm={class:"location-time-info"},gm={class:"location-text"},hm={class:"time-value"},vm={class:"right-section"},bm=(0,r.defineComponent)({__name:"TopBar",setup(e){const{t}=(0,re.s)(),n=(0,Iu.useGameStateStore)(),a=(0,r.ref)(!1),o=(0,r.computed)(()=>{try{return n.character?.åå­—||""}catch(e){return console.error("[TopBar] Error getting characterName:",e),""}}),i=(0,r.computed)(()=>{try{return om(n.attributes?.å¢ƒç•Œ)}catch(e){return console.error("[TopBar] Error getting characterRealm:",e),t("å‡¡äºº")}}),s=(0,r.computed)(()=>{try{return n.location?.æè¿°||t("åˆå§‹åœ°")}catch(e){return console.error("[TopBar] Error getting currentLocation:",e),t("åˆå§‹åœ°")}}),l=(0,r.computed)(()=>{try{const e=n.gameTime;if(e){const n=function(e){return e.åˆ†é’Ÿ??0}(e),a=n.toString().padStart(2,"0"),r=e.å°æ—¶.toString().padStart(2,"0");return`${t("ä»™é“")}${e.å¹´}${t("å¹´")}${e.æœˆ}${t("æœˆ")}${e.æ—¥}${t("æ—¥")} ${r}:${a}`}return`${t("ä»™é“")}${t("å…ƒå¹´")}1${t("æœˆ")}1${t("æ—¥")} 00:00`}catch(e){return console.error("[TopBar] Error getting gameTime:",e),`${t("ä»™é“")}${t("å…ƒå¹´")}1${t("æœˆ")}1${t("æ—¥")} 00:00`}}),c=()=>{(0,im.Kn)()?(0,im.Eh)().catch(e=>{console.error((0,im.zp)(e))}):(0,im.lh)(document.documentElement).catch(e=>{console.error((0,im.zp)(e))})};return(0,r.onMounted)(()=>{console.log("[TopBar] Component mounted");const e=()=>{a.value=!!(0,im.Kn)()};document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e)}),(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",sm,[(0,r.createElementVNode)("div",lm,[(0,r.createElementVNode)("h1",cm,(0,r.toDisplayString)((0,r.unref)(t)("ä»™é€”")),1),o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",dm,[(0,r.createElementVNode)("span",um,(0,r.toDisplayString)(o.value),1),(0,r.createElementVNode)("span",mm,(0,r.toDisplayString)(i.value),1)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",pm,[(0,r.createElementVNode)("div",fm,[(0,r.createElementVNode)("span",gm,(0,r.toDisplayString)(s.value),1),n[0]||(n[0]=(0,r.createElementVNode)("span",{class:"separator"},"|",-1)),(0,r.createElementVNode)("span",hm,(0,r.toDisplayString)(l.value),1)])]),(0,r.createElementVNode)("div",vm,[(0,r.createElementVNode)("button",{onClick:c,class:"fullscreen-btn"},[a.value?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(rm),{key:1,size:16})):((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(am),{key:0,size:16}))])])]))}});var ym=n(2885),xm={};xm.styleTagTransform=k(),xm.setAttributes=v(),xm.insert=g().bind(null,"head"),xm.domAPI=p(),xm.insertStyleElement=y(),u()(ym.A,xm),ym.A&&ym.A.locals&&ym.A.locals;const km=(0,N.A)(bm,[["__scopeId","data-v-42f8dc01"]]),wm=(0,V.A)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Em=(0,V.A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Nm=(0,V.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var Sm=n(4091);const Vm=(0,V.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),_m={class:"left-sidebar"},Cm={class:"sidebar-header"},Am={class:"sidebar-title"},Dm={class:"real-time"},Tm={class:"sidebar-content"},Bm={class:"function-section"},Im={class:"section-title"},zm={class:"function-group"},Mm={class:"btn-icon"},Pm={class:"btn-content"},Rm={class:"btn-text"},$m={class:"btn-desc"},Om={class:"btn-icon"},Lm={class:"btn-content"},Fm={class:"btn-text"},jm={class:"btn-desc"},Um={class:"function-section"},qm={class:"section-title"},Gm={class:"function-group"},Hm={class:"btn-icon"},Ym={class:"btn-content"},Wm={class:"btn-text"},Xm={class:"btn-desc"},Jm={class:"btn-icon"},Km={class:"btn-content"},Qm={class:"btn-text"},Zm={class:"btn-desc"},ep={class:"function-section"},tp={class:"section-title"},np={class:"function-group"},ap={class:"btn-icon"},rp={class:"btn-content"},op={class:"btn-text"},ip={class:"btn-desc"},sp={class:"btn-icon"},lp={class:"btn-content"},cp={class:"btn-text"},dp={class:"btn-desc"},up={class:"btn-icon"},mp={class:"btn-content"},pp={class:"btn-text"},fp={class:"btn-desc"},gp={class:"function-section"},hp={class:"section-title"},vp={class:"function-group"},bp={class:"btn-icon"},yp={class:"btn-content"},xp={class:"btn-text"},kp={class:"btn-desc"},wp={class:"btn-icon"},Ep={class:"btn-content"},Np={class:"btn-text"},Sp={class:"btn-desc"},Vp={class:"btn-icon"},_p={class:"btn-content"},Cp={class:"btn-text"},Ap={class:"btn-desc"},Dp={class:"system-section"},Tp={class:"function-group"},Bp=["disabled"],Ip={class:"btn-icon"},zp={class:"btn-content"},Mp={class:"btn-text"},Pp={class:"btn-desc"},Rp={class:"btn-icon"},$p={class:"btn-content"},Op={class:"btn-text"},Lp={class:"btn-desc"},Fp={class:"btn-icon"},jp={class:"btn-content"},Up={class:"btn-text"},qp={class:"btn-desc"},Gp={class:"btn-icon"},Hp={class:"btn-content"},Yp={class:"btn-text"},Wp={class:"btn-desc"},Xp={class:"btn-icon"},Jp={class:"btn-content"},Kp={class:"btn-text"},Qp={class:"btn-desc"},Zp={class:"btn-icon"},ef={class:"btn-content"},tf={class:"btn-text"},nf={class:"btn-desc"},af=(0,r.defineComponent)({__name:"LeftSidebar",setup(e){const t=(0,a.useRouter)(),o=(0,hd.useCharacterStore)(),i=(0,T.useUIStore)(),{t:s}=(0,re.s)(),l=(0,r.ref)("");let c=null;const d=()=>{const e=new Date,t=e.getFullYear(),n=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),o=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");l.value=`${t}-${n}-${a} ${r}:${o}:${i}`};(0,r.onMounted)(()=>{d(),c=window.setInterval(d,1e3)}),(0,r.onUnmounted)(()=>{c&&clearInterval(c)});const u=(0,r.computed)(()=>o.activeCharacterProfile),m=(0,r.computed)(()=>"è”æœº"===u.value?.æ¨¡å¼),p=async()=>{t.push("/game/save")},f=()=>{t.push("/game/inventory")},g=()=>{t.push("/game/character-details")},h=()=>{t.push("/game/quests")},v=()=>{t.push("/game/sect")},b=()=>{t.push("/game/relationships")},y=()=>{t.push("/game/techniques")},x=()=>{t.push("/game/thousand-dao")},k=()=>{t.push("/game/memory")},w=()=>{t.push("/game/world-map")},E=()=>{t.push("/game/travel")},N=()=>{t.push("/game/prompts")},S=()=>{t.push("/game/settings")},V=()=>{t.push("/game/api-management")},A=()=>{t.push("/game/game-variables")},D=()=>{i.showRetryDialog({title:s("è¿”å›é“é€”"),message:s("æ‚¨æƒ³å¦‚ä½•é€€å‡ºå½“å‰æ¸¸æˆï¼Ÿ"),confirmText:s("ä¿å­˜å¹¶é€€å‡º"),cancelText:s("å–æ¶ˆ"),neutralText:s("ä¸ä¿å­˜ç›´æ¥é€€å‡º"),onConfirm:async()=>{console.log("[è¿”å›é“é€”] ç”¨æˆ·é€‰æ‹©ä¿å­˜å¹¶é€€å‡º...");try{const{useGameStateStore:e}=await Promise.resolve().then(n.bind(n,1184)),t=e();await t.saveBeforeExit(),ne.o.success(s("æ¸¸æˆå·²ä¿å­˜"))}catch(e){console.error("[è¿”å›é“é€”] ä¿å­˜æ¸¸æˆå¤±è´¥:",e),ne.o.error(s("æ¸¸æˆä¿å­˜å¤±è´¥ï¼Œä½†ä»ä¼šç»§ç»­é€€å‡ºã€‚"))}await B()},onNeutral:async()=>{console.log("[è¿”å›é“é€”] ç”¨æˆ·é€‰æ‹©ä¸ä¿å­˜ç›´æ¥é€€å‡º..."),ne.o.info(s("æ¸¸æˆè¿›åº¦æœªä¿å­˜")),await B()},onCancel:()=>{console.log("[è¿”å›é“é€”] ç”¨æˆ·å–æ¶ˆæ“ä½œ")}})},B=async()=>{console.log("[è¿”å›é“é€”] å‡†å¤‡è¿”å›ä¸»èœå•"),o.rootState.å½“å‰æ¿€æ´»å­˜æ¡£=null,await o.commitMetadataToStorage(),console.log("[è¿”å›é“é€”] å·²é‡ç½®æ¿€æ´»å­˜æ¡£çŠ¶æ€"),i.stopLoading(),await t.push("/"),console.log("[è¿”å›é“é€”] å·²è·³è½¬è‡³ä¸»èœå•")};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",_m,[(0,r.createElementVNode)("div",Cm,[(0,r.createElementVNode)("h3",Am,[(0,r.createVNode)((0,r.unref)(wm),{size:20,class:"title-icon"}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(s)("æ¸¸æˆåŠŸèƒ½")),1)]),(0,r.createElementVNode)("div",Dm,[(0,r.createVNode)((0,r.unref)(Em),{size:14,class:"time-icon"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(l.value),1)])]),(0,r.createElementVNode)("div",Tm,[(0,r.createCommentVNode)(" è§’è‰²ä¿¡æ¯åŒº "),(0,r.createElementVNode)("div",Bm,[(0,r.createElementVNode)("div",Im,(0,r.toDisplayString)((0,r.unref)(s)("è§’è‰²ä¿¡æ¯")),1),(0,r.createElementVNode)("div",zm,[(0,r.createElementVNode)("button",{class:"function-btn primary",onClick:g},[(0,r.createElementVNode)("div",Mm,[(0,r.createVNode)((0,r.unref)(_),{size:16})]),(0,r.createElementVNode)("div",Pm,[(0,r.createElementVNode)("span",Rm,(0,r.toDisplayString)((0,r.unref)(s)("äººç‰©å±æ€§")),1),(0,r.createElementVNode)("span",$m,(0,r.toDisplayString)((0,r.unref)(s)("ä¿®ä¸ºå¢ƒç•ŒçŠ¶æ€")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn primary",onClick:f},[(0,r.createElementVNode)("div",Om,[(0,r.createVNode)((0,r.unref)(zu),{size:16})]),(0,r.createElementVNode)("div",Lm,[(0,r.createElementVNode)("span",Fm,(0,r.toDisplayString)((0,r.unref)(s)("èƒŒåŒ…ç‰©å“")),1),(0,r.createElementVNode)("span",jm,(0,r.toDisplayString)((0,r.unref)(s)("ç®¡ç†é“å…·è£…å¤‡")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})])])]),(0,r.createCommentVNode)(" ä¿®ç‚¼ç³»ç»ŸåŒº "),(0,r.createElementVNode)("div",Um,[(0,r.createElementVNode)("div",qm,(0,r.toDisplayString)((0,r.unref)(s)("ä¿®ç‚¼ç³»ç»Ÿ")),1),(0,r.createElementVNode)("div",Gm,[(0,r.createElementVNode)("button",{class:"function-btn cultivation",onClick:y},[(0,r.createElementVNode)("div",Hm,[(0,r.createVNode)((0,r.unref)(Pu),{size:16})]),(0,r.createElementVNode)("div",Ym,[(0,r.createElementVNode)("span",Wm,(0,r.toDisplayString)((0,r.unref)(s)("åŠŸæ³•æŠ€èƒ½")),1),(0,r.createElementVNode)("span",Xm,(0,r.toDisplayString)((0,r.unref)(s)("ä¿®ç‚¼çªç ´æ™‹çº§")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn cultivation",onClick:x},[(0,r.createElementVNode)("div",Jm,[(0,r.createVNode)((0,r.unref)(Ru),{size:16})]),(0,r.createElementVNode)("div",Km,[(0,r.createElementVNode)("span",Qm,(0,r.toDisplayString)((0,r.unref)(s)("å¤§é“æ„Ÿæ‚Ÿ")),1),(0,r.createElementVNode)("span",Zm,(0,r.toDisplayString)((0,r.unref)(s)("é¢†æ‚Ÿå¤©åœ°æ³•åˆ™")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})])])]),(0,r.createCommentVNode)(" ä»»åŠ¡ä¸æ¢ç´¢åŒº "),(0,r.createElementVNode)("div",ep,[(0,r.createElementVNode)("div",tp,(0,r.toDisplayString)((0,r.unref)(s)("ä»»åŠ¡æ¢ç´¢")),1),(0,r.createElementVNode)("div",np,[(0,r.createElementVNode)("button",{class:"function-btn quest",onClick:h},[(0,r.createElementVNode)("div",ap,[(0,r.createVNode)((0,r.unref)($u),{size:16})]),(0,r.createElementVNode)("div",rp,[(0,r.createElementVNode)("span",op,(0,r.toDisplayString)((0,r.unref)(s)("ä»»åŠ¡")),1),(0,r.createElementVNode)("span",ip,(0,r.toDisplayString)((0,r.unref)(s)("æ¥å–å®Œæˆä»»åŠ¡")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn quest",onClick:w},[(0,r.createElementVNode)("div",sp,[(0,r.createVNode)((0,r.unref)(Lu),{size:16})]),(0,r.createElementVNode)("div",lp,[(0,r.createElementVNode)("span",cp,(0,r.toDisplayString)((0,r.unref)(s)("ä¸–ç•Œåœ°å›¾")),1),(0,r.createElementVNode)("span",dp,(0,r.toDisplayString)((0,r.unref)(s)("æ¢ç´¢å¤©ä¸‹å„åœ°")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),m.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"function-btn quest",onClick:E},[(0,r.createElementVNode)("div",up,[(0,r.createVNode)((0,r.unref)(Sm.A),{size:16})]),(0,r.createElementVNode)("div",mp,[(0,r.createElementVNode)("span",pp,(0,r.toDisplayString)((0,r.unref)(s)("ç©¿è¶Š")),1),(0,r.createElementVNode)("span",fp,(0,r.toDisplayString)((0,r.unref)(s)("è¿›å…¥ä»–äººä¸–ç•Œ")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createCommentVNode)(" ç¤¾äº¤åŠ¿åŠ›åŒº "),(0,r.createElementVNode)("div",gp,[(0,r.createElementVNode)("div",hp,(0,r.toDisplayString)((0,r.unref)(s)("ç¤¾äº¤åŠ¿åŠ›")),1),(0,r.createElementVNode)("div",vp,[(0,r.createElementVNode)("button",{class:"function-btn secondary",onClick:b},[(0,r.createElementVNode)("div",bp,[(0,r.createVNode)((0,r.unref)(C),{size:16})]),(0,r.createElementVNode)("div",yp,[(0,r.createElementVNode)("span",xp,(0,r.toDisplayString)((0,r.unref)(s)("äººç‰©å…³ç³»")),1),(0,r.createElementVNode)("span",kp,(0,r.toDisplayString)((0,r.unref)(s)("äººè„‰äº¤é™…ç®¡ç†")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn secondary",onClick:v},[(0,r.createElementVNode)("div",wp,[(0,r.createVNode)((0,r.unref)(Fu),{size:16})]),(0,r.createElementVNode)("div",Ep,[(0,r.createElementVNode)("span",Np,(0,r.toDisplayString)((0,r.unref)(s)("å®—é—¨")),1),(0,r.createElementVNode)("span",Sp,(0,r.toDisplayString)((0,r.unref)(s)("é—¨æ´¾äº‹åŠ¡ç®¡ç†")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn secondary",onClick:k},[(0,r.createElementVNode)("div",Vp,[(0,r.createVNode)((0,r.unref)(Mu),{size:16})]),(0,r.createElementVNode)("div",_p,[(0,r.createElementVNode)("span",Cp,(0,r.toDisplayString)((0,r.unref)(s)("è®°å¿†")),1),(0,r.createElementVNode)("span",Ap,(0,r.toDisplayString)((0,r.unref)(s)("é‡è¦äº‹ä»¶å›é¡¾")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})])])]),t[0]||(t[0]=(0,r.createElementVNode)("div",{class:"divider"},null,-1)),(0,r.createCommentVNode)(" ç³»ç»ŸåŠŸèƒ½åŒº "),(0,r.createElementVNode)("div",Dp,[(0,r.createElementVNode)("div",Tp,[(0,r.createElementVNode)("button",{class:"function-btn system",onClick:p,disabled:!u.value},[(0,r.createElementVNode)("div",Ip,[(0,r.createVNode)((0,r.unref)(Ou.A),{size:16})]),(0,r.createElementVNode)("div",zp,[(0,r.createElementVNode)("span",Mp,(0,r.toDisplayString)((0,r.unref)(s)("ä¿å­˜æ¸¸æˆ")),1),(0,r.createElementVNode)("span",Pp,(0,r.toDisplayString)((0,r.unref)(s)("ä¿å­˜å½“å‰è¿›åº¦")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})],8,Bp),m.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"function-btn system",onClick:A},[(0,r.createElementVNode)("div",Rp,[(0,r.createVNode)((0,r.unref)(Uu),{size:16})]),(0,r.createElementVNode)("div",$p,[(0,r.createElementVNode)("span",Op,(0,r.toDisplayString)((0,r.unref)(s)("æ¸¸æˆå˜é‡")),1),(0,r.createElementVNode)("span",Lp,(0,r.toDisplayString)((0,r.unref)(s)("æŸ¥çœ‹æ¸¸æˆæ•°æ®")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})])),(0,r.createElementVNode)("button",{class:"function-btn system",onClick:N},[(0,r.createElementVNode)("div",Fp,[(0,r.createVNode)((0,r.unref)(qu),{size:16})]),(0,r.createElementVNode)("div",jp,[(0,r.createElementVNode)("span",Up,(0,r.toDisplayString)((0,r.unref)(s)("æç¤ºè¯ç®¡ç†")),1),(0,r.createElementVNode)("span",qp,(0,r.toDisplayString)((0,r.unref)(s)("è‡ªå®šä¹‰AIæç¤ºè¯")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn system",onClick:V},[(0,r.createElementVNode)("div",Gp,[(0,r.createVNode)((0,r.unref)(Gu.A),{size:16})]),(0,r.createElementVNode)("div",Hp,[(0,r.createElementVNode)("span",Yp,(0,r.toDisplayString)((0,r.unref)(s)("APIç®¡ç†")),1),(0,r.createElementVNode)("span",Wp,(0,r.toDisplayString)((0,r.unref)(s)("å¤šAPIé…ç½®ä¸åˆ†é…")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn system",onClick:S},[(0,r.createElementVNode)("div",Xp,[(0,r.createVNode)((0,r.unref)(ta.A),{size:16})]),(0,r.createElementVNode)("div",Jp,[(0,r.createElementVNode)("span",Kp,(0,r.toDisplayString)((0,r.unref)(s)("ç³»ç»Ÿè®¾ç½®")),1),(0,r.createElementVNode)("span",Qp,(0,r.toDisplayString)((0,r.unref)(s)("åå¥½è®¾ç½®")),1)]),(0,r.createVNode)((0,r.unref)(Nm),{size:14,class:"btn-arrow"})]),(0,r.createElementVNode)("button",{class:"function-btn exit-btn no-arrow",onClick:D},[(0,r.createElementVNode)("div",Zp,[(0,r.createVNode)((0,r.unref)(Vm),{size:16})]),(0,r.createElementVNode)("div",ef,[(0,r.createElementVNode)("span",tf,(0,r.toDisplayString)((0,r.unref)(s)("è¿”å›é“é€”")),1),(0,r.createElementVNode)("span",nf,(0,r.toDisplayString)((0,r.unref)(s)("é€€å‡ºå½“å‰æ¸¸æˆ")),1)])])])])])]))}});var rf=n(8103),of={};of.styleTagTransform=k(),of.setAttributes=v(),of.insert=g().bind(null,"head"),of.domAPI=p(),of.insertStyleElement=y(),u()(rf.A,of),rf.A&&rf.A.locals&&rf.A.locals;const sf=(0,N.A)(af,[["__scopeId","data-v-533d9661"]]),lf=(0,V.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var cf=n(5726);const df=(0,V.A)("droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]),uf=(0,V.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var mf=n(2639);const pf={class:"status-detail-card"},ff={class:"type-icon"},gf={class:"type-text"},hf={class:"card-body"},vf={class:"details-grid"},bf={key:0,class:"detail-item"},yf={class:"item-value source"},xf={key:1,class:"detail-item"},kf={class:"item-value strength"},wf={class:"strength-value"},Ef={class:"strength-bar"},Nf={key:2,class:"detail-item"},Sf={class:"item-value duration"},Vf={key:3,class:"detail-item"},_f={class:"item-value time"},Cf=(0,r.defineComponent)({__name:"StatusDetailCard",props:{effect:{}},setup(e){const t=e,n=(0,r.computed)(()=>"buff"===String(t.effect.ç±»å‹).toLowerCase()),a=(0,r.computed)(()=>{const e=t.effect.å¼ºåº¦||0;return e>=8?"æå¼º":e>=5?"ä¸­ç­‰":"è½»å¾®"}),o=(0,r.computed)(()=>{const e=t.effect.å¼ºåº¦||0;return e>=8?"#f59e0b":e>=5?"#3b82f6":"#6b7280"}),i=(0,r.computed)(()=>{const e=t.effect.æŒç»­æ—¶é—´åˆ†é’Ÿ;if(null==e)return"";if(99999===e)return"æ°¸ä¹…";if(e>=1440)return`${Math.floor(e/1440)}å¤©`;if(e>=60){const t=Math.floor(e/60),n=e%60;return n>0?`${t}æ—¶${n}åˆ†`:`${t}æ—¶`}return`${e}åˆ†é’Ÿ`});return(e,t)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",pf,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["card-header",n.value?"buff":"debuff"])},[(0,r.createElementVNode)("span",ff,(0,r.toDisplayString)(n.value?"âœ¨":"âš ï¸"),1),(0,r.createElementVNode)("span",gf,(0,r.toDisplayString)(n.value?"å¢ç›ŠçŠ¶æ€":"è´Ÿé¢çŠ¶æ€"),1)],2),(0,r.createElementVNode)("div",hf,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["description",n.value?"buff-border":"debuff-border"])},(0,r.toDisplayString)(e.effect.çŠ¶æ€æè¿°||`${e.effect.çŠ¶æ€åç§°}çŠ¶æ€ç”Ÿæ•ˆä¸­`),3),(0,r.createElementVNode)("div",vf,[e.effect.æ¥æº?((0,r.openBlock)(),(0,r.createElementBlock)("div",bf,[t[0]||(t[0]=(0,r.createElementVNode)("div",{class:"item-label"},"æ¥æº",-1)),(0,r.createElementVNode)("div",yf,(0,r.toDisplayString)(e.effect.æ¥æº),1)])):(0,r.createCommentVNode)("v-if",!0),e.effect.å¼ºåº¦?((0,r.openBlock)(),(0,r.createElementBlock)("div",xf,[t[1]||(t[1]=(0,r.createElementVNode)("div",{class:"item-label"},"æ•ˆæœå¼ºåº¦",-1)),(0,r.createElementVNode)("div",kf,[(0,r.createElementVNode)("span",{class:"strength-text",style:(0,r.normalizeStyle)({color:o.value})},(0,r.toDisplayString)(a.value),5),(0,r.createElementVNode)("span",wf,"("+(0,r.toDisplayString)(e.effect.å¼ºåº¦)+"/10)",1)]),(0,r.createElementVNode)("div",Ef,[(0,r.createElementVNode)("div",{class:"bar-fill",style:(0,r.normalizeStyle)({width:10*e.effect.å¼ºåº¦+"%",backgroundColor:o.value})},null,4)])])):(0,r.createCommentVNode)("v-if",!0),i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Nf,[t[2]||(t[2]=(0,r.createElementVNode)("div",{class:"item-label"},"æŒç»­æ—¶é—´",-1)),(0,r.createElementVNode)("div",Sf,(0,r.toDisplayString)(i.value),1)])):(0,r.createCommentVNode)("v-if",!0),e.effect.ç”Ÿæˆæ—¶é—´?((0,r.openBlock)(),(0,r.createElementBlock)("div",Vf,[t[3]||(t[3]=(0,r.createElementVNode)("div",{class:"item-label"},"ç”Ÿæˆæ—¶é—´",-1)),(0,r.createElementVNode)("div",_f,(0,r.toDisplayString)((s=e.effect.ç”Ÿæˆæ—¶é—´,s?`${s.å¹´}å¹´${s.æœˆ}æœˆ${s.æ—¥}æ—¥ ${String(s.å°æ—¶).padStart(2,"0")}:${String(s.åˆ†é’Ÿ).padStart(2,"0")}`:"")),1)])):(0,r.createCommentVNode)("v-if",!0)])])]);var s}}});var Af=n(3683),Df={};Df.styleTagTransform=k(),Df.setAttributes=v(),Df.insert=g().bind(null,"head"),Df.domAPI=p(),Df.insertStyleElement=y(),u()(Af.A,Df),Af.A&&Af.A.locals&&Af.A.locals;const Tf=(0,N.A)(Cf,[["__scopeId","data-v-6faa782a"]]);var Bf=n(6939);const If={class:"right-sidebar"},zf={class:"sidebar-header"},Mf={class:"sidebar-title"},Pf={key:0,class:"sidebar-content"},Rf={class:"vitals-section"},$f={class:"section-title"},Of={class:"vitals-list"},Lf={class:"vital-item"},Ff={class:"vital-info"},jf={class:"vital-name"},Uf={class:"vital-text"},qf={class:"progress-bar"},Gf={class:"vital-item"},Hf={class:"vital-info"},Yf={class:"vital-name"},Wf={class:"vital-text"},Xf={class:"progress-bar"},Jf={class:"vital-item"},Kf={class:"vital-info"},Qf={class:"vital-name"},Zf={class:"vital-text"},eg={class:"progress-bar"},tg={class:"vital-item"},ng={class:"vital-info"},ag={class:"vital-name"},rg={class:"vital-text"},og={class:"progress-bar"},ig={class:"cultivation-section"},sg={class:"section-title"},lg={class:"realm-display"},cg={class:"realm-info"},dg={class:"realm-name"},ug={key:0,class:"realm-breakthrough"},mg={key:0,class:"realm-mortal"},pg={class:"mortal-text"},fg={class:"realm-progress"},gg={class:"progress-bar"},hg={class:"progress-text"},vg={class:"reputation-display"},bg={class:"reputation-item"},yg={class:"reputation-info"},xg={class:"reputation-label"},kg={class:"collapsible-section talents-section"},wg={class:"section-title"},Eg={class:"talents-list"},Ng=["onClick"],Sg={class:"talent-header"},Vg={class:"talent-name"},_g={key:0,class:"empty-talents"},Cg={class:"empty-text"},Ag={class:"collapsible-section status-section"},Dg={class:"section-title"},Tg={class:"status-effects"},Bg={key:0,class:"empty-status"},Ig={class:"empty-text"},zg={key:1,class:"status-tags-container"},Mg=["onClick","title"],Pg={class:"tag-icon"},Rg={class:"tag-name"},$g={key:0,class:"tag-intensity"},Og={key:1,class:"tag-time"},Lg={class:"no-character"},Fg={class:"no-char-text"},jg=(0,r.defineComponent)({__name:"RightSidebar",setup(e){const{t}=(0,re.s)(),n=(0,Iu.useGameStateStore)(),a=(0,T.useUIStore)(),o=(0,r.computed)(()=>n.isGameLoaded&&!!n.character),i=(0,r.computed)(()=>n.character),s=(0,r.computed)(()=>n.attributes),l=(0,r.computed)(()=>(n.effects||[]).filter(e=>null!=e&&"object"==typeof e&&"çŠ¶æ€åç§°"in e)),c=(0,r.computed)(()=>{const e=i.value?.å‡ºç”Ÿæ—¥æœŸ,t=n.gameTime;return e&&t?(0,Bf.R5)(e,t):n.attributes?.å¯¿å‘½?.å½“å‰||0}),d=(0,r.ref)(!1),u=(0,r.ref)(!1),m=e=>{if(!e||"æœªæŒ‡å®š"===e)return"";if("æ°¸ä¹…"===e)return"æ°¸ä¹…";if(/^\d+$/.test(e)){const t=parseInt(e);if(t>=60){const e=Math.floor(t/60),n=t%60;return n>0?`${e}æ—¶${n}åˆ†`:`${e}æ—¶`}return`${t}åˆ†é’Ÿ`}return e},p=(0,r.computed)(()=>{if(!n.attributes?.å¢ƒç•Œ)return 0;const e=n.attributes.å¢ƒç•Œ.å½“å‰è¿›åº¦,t=n.attributes.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€;return e&&t?Math.round(e/t*100):0}),f=e=>{if(!n.attributes)return 0;const t=n.attributes[e];return t?.å½“å‰&&t?.ä¸Šé™?Math.round(t.å½“å‰/t.ä¸Šé™*100):0},g=()=>{const e=n.attributes?.å¯¿å‘½?.ä¸Šé™;return e?Math.round(c.value/e*100):0},h=e=>{const t=s.value?.å¢ƒç•Œ?.å½“å‰è¿›åº¦,n=s.value?.å¢ƒç•Œ?.ä¸‹ä¸€çº§æ‰€éœ€,a=s.value?.å¢ƒç•Œ?.é˜¶æ®µ;return om({name:e,é˜¶æ®µ:a,progress:t,maxProgress:n})},v=()=>{const e=s.value?.å£°æœ›;if(null==e)return"ç±ç±æ— å";const t=Number(e);return t<0?t<=-5e3?`æ¶åæ˜­å½° (${t})`:t<=-1e3?`è‡­åè¿œæ‰¬ (${t})`:t<=-500?`å£°åç‹¼è—‰ (${t})`:t<=-100?`æ¶ååœ¨å¤– (${t})`:`å°æœ‰æ¶å (${t})`:t>=1e4?`ä¼ è¯´äººç‰© (${t})`:t>=5e3?`åæ»¡å¤©ä¸‹ (${t})`:t>=3e3?`å¨éœ‡å››æ–¹ (${t})`:t>=1e3?`ååŠ¨ä¸€æ–¹ (${t})`:t>=500?`å£°åè¿œæ’­ (${t})`:t>=100?`å°æœ‰åæ°” (${t})`:"ç±ç±æ— å"},b=()=>{const e=s.value?.å£°æœ›;if(null==e)return"reputation-neutral";const t=Number(e);return t<0?t<=-5e3?"reputation-evil-legendary":t<=-1e3?"reputation-evil-high":t<=-500?"reputation-evil-medium":t<=-100?"reputation-evil-low":"reputation-evil-minor":t>=1e4?"reputation-legendary":t>=5e3?"reputation-famous":t>=3e3?"reputation-renowned":t>=1e3?"reputation-notable":t>=500?"reputation-known":t>=100?"reputation-minor":"reputation-neutral"};return(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",If,[(0,r.createElementVNode)("div",zf,[(0,r.createElementVNode)("h3",Mf,[(0,r.createVNode)((0,r.unref)(lf),{size:18,class:"title-icon"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("è§’è‰²çŠ¶æ€")),1)])]),o.value&&i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Pf,[(0,r.createCommentVNode)(" æ ¸å¿ƒæ•°å€¼ "),(0,r.createElementVNode)("div",Rf,[(0,r.createElementVNode)("h3",$f,[(0,r.createVNode)((0,r.unref)(cf.A),{size:14,class:"section-icon"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("æ ¸å¿ƒæ•°å€¼")),1)]),(0,r.createElementVNode)("div",Of,[(0,r.createElementVNode)("div",Lf,[(0,r.createElementVNode)("div",Ff,[(0,r.createElementVNode)("span",jf,[(0,r.createVNode)((0,r.unref)(df),{size:12,class:"vital-icon blood"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("æ°”è¡€")),1)]),(0,r.createElementVNode)("span",Uf,(0,r.toDisplayString)(s.value?.æ°”è¡€?.å½“å‰)+" / "+(0,r.toDisplayString)(s.value?.æ°”è¡€?.ä¸Šé™),1)]),(0,r.createElementVNode)("div",qf,[(0,r.createElementVNode)("div",{class:"progress-fill health",style:(0,r.normalizeStyle)({width:f("æ°”è¡€")+"%"})},null,4)])]),(0,r.createElementVNode)("div",Gf,[(0,r.createElementVNode)("div",Hf,[(0,r.createElementVNode)("span",Yf,[(0,r.createVNode)((0,r.unref)(A),{size:12,class:"vital-icon mana"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("çµæ°”")),1)]),(0,r.createElementVNode)("span",Wf,(0,r.toDisplayString)(s.value?.çµæ°”?.å½“å‰)+" / "+(0,r.toDisplayString)(s.value?.çµæ°”?.ä¸Šé™),1)]),(0,r.createElementVNode)("div",Xf,[(0,r.createElementVNode)("div",{class:"progress-fill mana",style:(0,r.normalizeStyle)({width:f("çµæ°”")+"%"})},null,4)])]),(0,r.createElementVNode)("div",Jf,[(0,r.createElementVNode)("div",Kf,[(0,r.createElementVNode)("span",Qf,[(0,r.createVNode)((0,r.unref)(Mu),{size:12,class:"vital-icon spirit"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("ç¥è¯†")),1)]),(0,r.createElementVNode)("span",Zf,(0,r.toDisplayString)(s.value?.ç¥è¯†?.å½“å‰)+" / "+(0,r.toDisplayString)(s.value?.ç¥è¯†?.ä¸Šé™),1)]),(0,r.createElementVNode)("div",eg,[(0,r.createElementVNode)("div",{class:"progress-fill spirit",style:(0,r.normalizeStyle)({width:f("ç¥è¯†")+"%"})},null,4)])]),(0,r.createElementVNode)("div",tg,[(0,r.createElementVNode)("div",ng,[(0,r.createElementVNode)("span",ag,[(0,r.createVNode)((0,r.unref)(Em),{size:12,class:"vital-icon lifespan"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("å¯¿å…ƒ")),1)]),(0,r.createElementVNode)("span",rg,(0,r.toDisplayString)(c.value)+" / "+(0,r.toDisplayString)(s.value?.å¯¿å‘½?.ä¸Šé™),1)]),(0,r.createElementVNode)("div",og,[(0,r.createElementVNode)("div",{class:"progress-fill lifespan",style:(0,r.normalizeStyle)({width:g()+"%"})},null,4)])])])]),(0,r.createCommentVNode)(" å¢ƒç•ŒçŠ¶æ€ "),(0,r.createElementVNode)("div",ig,[(0,r.createElementVNode)("h3",sg,[(0,r.createVNode)((0,r.unref)(uf),{size:14,class:"section-icon"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("å¢ƒç•ŒçŠ¶æ€")),1)]),(0,r.createElementVNode)("div",lg,[(0,r.createElementVNode)("div",cg,[(0,r.createElementVNode)("span",dg,(0,r.toDisplayString)(h(s.value?.å¢ƒç•Œ?.åç§°)),1),s.value?.å¢ƒç•Œ?.çªç ´æè¿°?((0,r.openBlock)(),(0,r.createElementBlock)("span",ug,(0,r.toDisplayString)(s.value?.å¢ƒç•Œ?.çªç ´æè¿°),1)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" å‡¡äººå¢ƒç•Œæ˜¾ç¤ºç­‰å¾…å¼•æ°”å…¥ä½“ "),"å‡¡äºº"===s.value?.å¢ƒç•Œ?.åç§°?((0,r.openBlock)(),(0,r.createElementBlock)("div",mg,[(0,r.createElementVNode)("span",pg,(0,r.toDisplayString)((0,r.unref)(t)("ç­‰å¾…ä»™ç¼˜ï¼Œå¼•æ°”å…¥ä½“")),1)])):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" ä¿®ç‚¼å¢ƒç•Œæ˜¾ç¤ºè¿›åº¦æ¡ "),(0,r.createElementVNode)("div",fg,[(0,r.createElementVNode)("div",gg,[(0,r.createElementVNode)("div",{class:"progress-fill cultivation",style:(0,r.normalizeStyle)({width:p.value+"%"})},null,4)]),(0,r.createElementVNode)("span",hg,(0,r.toDisplayString)(p.value)+"%",1)])],2112))]),(0,r.createCommentVNode)(" å£°æœ›æ˜¾ç¤º "),(0,r.createElementVNode)("div",vg,[(0,r.createElementVNode)("div",bg,[(0,r.createElementVNode)("div",yg,[(0,r.createElementVNode)("span",xg,[(0,r.createVNode)((0,r.unref)(uf),{size:12,class:"vital-icon reputation"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("å£°æœ›")),1)]),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["reputation-value",b()])},(0,r.toDisplayString)(v()),3)])])])]),(0,r.createCommentVNode)(" å¤©èµ‹ç¥é€š "),(0,r.createElementVNode)("div",kg,[(0,r.createElementVNode)("div",{class:"section-header",onClick:n[0]||(n[0]=e=>d.value=!d.value)},[(0,r.createElementVNode)("h3",wg,[(0,r.createVNode)((0,r.unref)(uf),{size:14,class:"section-icon gold"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("å¤©èµ‹ç¥é€š")),1)]),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["collapse-toggle",{collapsed:d.value}])},n[2]||(n[2]=[(0,r.createElementVNode)("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor"},[(0,r.createElementVNode)("path",{d:"M8 10l4-4H4l4 4z"})],-1)]),2)]),(0,r.withDirectives)((0,r.createElementVNode)("div",Eg,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(i.value.å¤©èµ‹,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:"string"==typeof e?e:e.name,class:"talent-card clickable",onClick:t=>(e=>{const t=i.value,n=t?.å¤©èµ‹?.find(t=>t.name===e),r=ge.qS.find(t=>t.name===e),o=(n?{description:n.description||"è‡ªå®šä¹‰å¤©èµ‹"}:r?{description:r.description||""}:{description:`å¤©èµ‹ã€Š${e}ã€‹çš„è¯¦ç»†æè¿°æš‚æœªå¼€æ”¾ï¼Œè¯·æœŸå¾…åç»­æ›´æ–°ã€‚`}).description;a.showDetailModal({title:e,content:o})})("string"==typeof e?e:e.name)},[(0,r.createElementVNode)("div",Sg,[(0,r.createElementVNode)("span",Vg,(0,r.toDisplayString)("string"==typeof e?e:e.name),1)])],8,Ng))),128)),(0,r.createCommentVNode)(" ç©ºçŠ¶æ€æ˜¾ç¤º "),i.value.å¤©èµ‹&&0!==i.value.å¤©èµ‹.length?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",_g,[n[3]||(n[3]=(0,r.createElementVNode)("div",{class:"empty-icon"},"âœ¨",-1)),(0,r.createElementVNode)("div",Cg,(0,r.toDisplayString)((0,r.unref)(t)("æš‚æ— å¤©èµ‹ç¥é€š")),1)]))],512),[[r.vShow,!d.value]])]),(0,r.createCommentVNode)(" çŠ¶æ€æ•ˆæœ "),(0,r.createElementVNode)("div",Ag,[(0,r.createElementVNode)("div",{class:"section-header",onClick:n[1]||(n[1]=e=>u.value=!u.value)},[(0,r.createElementVNode)("h3",Dg,[(0,r.createVNode)((0,r.unref)(Ru),{size:14,class:"section-icon"}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("çŠ¶æ€æ•ˆæœ")),1)]),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["collapse-toggle",{collapsed:u.value}])},n[4]||(n[4]=[(0,r.createElementVNode)("svg",{width:"12",height:"12",viewBox:"0 0 16 16",fill:"currentColor"},[(0,r.createElementVNode)("path",{d:"M8 10l4-4H4l4 4z"})],-1)]),2)]),(0,r.withDirectives)((0,r.createElementVNode)("div",Tg,[0===l.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Bg,[(0,r.createElementVNode)("span",Ig,(0,r.toDisplayString)((0,r.unref)(t)("æ¸…å‡€æ— ä¸º")),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",zg,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.value,(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.çŠ¶æ€åç§°||`effect-${n}`,class:(0,r.normalizeClass)(["status-tag clickable",["buff"===String(e.ç±»å‹||"").toLowerCase()?"buff":"debuff"]]),onClick:t=>(e=>{e&&e.çŠ¶æ€åç§°?a.showDetailModal({title:e.çŠ¶æ€åç§°,component:Tf,props:{effect:e}}):console.warn("[RightSidebar] çŠ¶æ€æ•ˆæœæ•°æ®å¼‚å¸¸ï¼Œæ— æ³•æ˜¾ç¤ºè¯¦æƒ…",e)})(e),title:`${e.çŠ¶æ€åç§°||"æœªçŸ¥çŠ¶æ€"}${e.çŠ¶æ€æè¿°?`\n${e.çŠ¶æ€æè¿°}`:""}${e.å¼ºåº¦?`\nå¼ºåº¦: ${e.å¼ºåº¦}`:""}${m(e.æ—¶é—´)?`\n${m(e.æ—¶é—´)}`:""}`},[(0,r.createElementVNode)("span",Pg,(0,r.toDisplayString)("buff"===String(e.ç±»å‹||"").toLowerCase()?(0,r.unref)(t)("å¢"):(0,r.unref)(t)("å‡")),1),(0,r.createElementVNode)("span",Rg,(0,r.toDisplayString)(e.çŠ¶æ€åç§°||"æœªçŸ¥çŠ¶æ€"),1),e.å¼ºåº¦?((0,r.openBlock)(),(0,r.createElementBlock)("span",$g,(0,r.toDisplayString)(e.å¼ºåº¦),1)):(0,r.createCommentVNode)("v-if",!0),m(e.æ—¶é—´)?((0,r.openBlock)(),(0,r.createElementBlock)("span",Og,(0,r.toDisplayString)(m(e.æ—¶é—´)),1)):(0,r.createCommentVNode)("v-if",!0)],10,Mg))),128))]))],512),[[r.vShow,!u.value]])])])):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" æ— è§’è‰²æ•°æ® "),(0,r.createElementVNode)("div",Lg,[(0,r.createElementVNode)("div",Fg,(0,r.toDisplayString)((0,r.unref)(t)("è¯·é€‰æ‹©è§’è‰²å¼€å¯ä¿®ä»™ä¹‹æ—…")),1)])],2112)),(0,r.createCommentVNode)(" è¯¦æƒ…æ¨¡æ€æ¡† "),(0,r.createVNode)(mf.A)]))}});var Ug=n(2701),qg={};qg.styleTagTransform=k(),qg.setAttributes=v(),qg.insert=g().bind(null,"head"),qg.domAPI=p(),qg.insertStyleElement=y(),u()(Ug.A,qg),Ug.A&&Ug.A.locals&&Ug.A.locals;const Gg=(0,N.A)(jg,[["__scopeId","data-v-0f5fc9dc"]]),Hg={class:"hexagon-chart-container"},Yg=["width","height","viewBox"],Wg=["transform"],Xg=["points"],Jg=["x2","y2"],Kg=["points"],Qg=["cx","cy"],Zg=["x","y","text-anchor","dominant-baseline"],eh=["x","y","text-anchor","dominant-baseline"],th=(0,r.defineComponent)({__name:"HexagonChart",props:{stats:{},size:{default:160},maxValue:{default:10}},setup(e){const{t}=(0,re.s)(),n=e,a=(0,r.computed)(()=>n.size/2),o=(0,r.computed)(()=>n.size/2*.7),i=["root_bone","spirituality","comprehension","fortune","charm","temperament"],s={root_bone:t("æ ¹éª¨"),spirituality:t("çµæ€§"),comprehension:t("æ‚Ÿæ€§"),fortune:t("æ°”è¿"),charm:t("é­…åŠ›"),temperament:t("å¿ƒæ€§")},l=(e=1)=>{const t=[];for(let n=0;n<6;n++){const a=Math.PI/2+Math.PI/3*n,r=Math.cos(a)*o.value*e,i=-Math.sin(a)*o.value*e;t.push(`${r.toFixed(2)},${i.toFixed(2)}`)}return t.join(" ")},c=(0,r.computed)(()=>i.map((e,t)=>{const a=n.stats[e]??0,r=Math.max(0,Math.min(1,a/n.maxValue)),i=Math.PI/2+Math.PI/3*t,s=o.value*r+(0===r?4:0);return{value:a,x:Math.cos(i)*s,y:-Math.sin(i)*s}})),d=(0,r.computed)(()=>{const e=[];return i.forEach((t,a)=>{const r=n.stats[t]??0,i=Math.max(0,Math.min(1,r/n.maxValue)),s=Math.PI/2+Math.PI/3*a,l=Math.cos(s)*o.value*i,c=-Math.sin(s)*o.value*i;e.push(`${l.toFixed(2)},${c.toFixed(2)}`)}),e.join(" ")}),u=(0,r.computed)(()=>{const e=[];for(let t=0;t<6;t++){const n=Math.PI/2+Math.PI/3*t;e.push({x:Math.cos(n)*o.value,y:-Math.sin(n)*o.value})}return e}),m=(0,r.computed)(()=>{const e=1.25*o.value;return i.map((t,n)=>{const a=Math.PI/2+Math.PI/3*n;return{key:t,name:s[t],x:Math.cos(a)*e,y:-Math.sin(a)*e}})}),p=(e,t=!1)=>0===e||3===e?"middle":1===e||2===e?t?"end":"start":t?"start":"end",f=(e,t=!1)=>0===e?t?"hanging":"alphabetic":3===e?t?"alphabetic":"hanging":"middle";return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Hg,[((0,r.openBlock)(),(0,r.createElementBlock)("svg",{width:e.size,height:e.size,viewBox:`0 0 ${e.size} ${e.size}`},[(0,r.createCommentVNode)(" å®šä¹‰æ¸å˜ "),t[0]||(t[0]=(0,r.createStaticVNode)('<defs data-v-a8caf924><linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-a8caf924><stop offset="0%" stop-color="rgba(255, 215, 0, 0.3)" data-v-a8caf924></stop><stop offset="50%" stop-color="rgba(218, 165, 32, 0.25)" data-v-a8caf924></stop><stop offset="100%" stop-color="rgba(255, 223, 0, 0.2)" data-v-a8caf924></stop></linearGradient><linearGradient id="darkGradient" x1="0%" y1="0%" x2="100%" y2="100%" data-v-a8caf924><stop offset="0%" stop-color="rgba(100, 181, 246, 0.3)" data-v-a8caf924></stop><stop offset="100%" stop-color="rgba(100, 181, 246, 0.1)" data-v-a8caf924></stop></linearGradient></defs>',1)),(0,r.createElementVNode)("g",{transform:`translate(${a.value}, ${a.value})`},[(0,r.createCommentVNode)(" Hexagon Grid Lines "),((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(5,e=>(0,r.createElementVNode)("polygon",{key:`grid-${e}`,points:l(e/5),class:"grid-line"},null,8,Xg)),64)),(0,r.createCommentVNode)(" Radial Lines "),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(u.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("line",{key:`axis-${t}`,x1:"0",y1:"0",x2:e.x,y2:e.y,class:"grid-line"},null,8,Jg))),128)),(0,r.createCommentVNode)(" Data Polygon "),(0,r.createElementVNode)("polygon",{points:d.value,class:"data-polygon"},null,8,Kg),(0,r.createCommentVNode)(" Data Points & Numeric Values "),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("g",{key:`data-point-${t}`},[(0,r.createElementVNode)("circle",{cx:e.x,cy:e.y,r:"3",class:"data-point"},null,8,Qg),(0,r.createElementVNode)("text",{x:e.x,y:e.y,class:"data-value-text","text-anchor":p(t,!0),"dominant-baseline":f(t,!0)},(0,r.toDisplayString)(e.value),9,Zg)]))),128)),(0,r.createCommentVNode)(" Stat Labels "),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(m.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("text",{key:e.key,x:e.x,y:e.y,class:"label-text","text-anchor":p(t),"dominant-baseline":f(t)},(0,r.toDisplayString)(e.name),9,eh))),128))],8,Wg)],8,Yg))]))}});var nh=n(5794),ah={};ah.styleTagTransform=k(),ah.setAttributes=v(),ah.insert=g().bind(null,"head"),ah.domAPI=p(),ah.insertStyleElement=y(),u()(nh.A,ah),nh.A&&nh.A.locals&&nh.A.locals;const rh=(0,N.A)(th,[["__scopeId","data-v-a8caf924"]]),oh=(0,V.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var ih=n(5365);const sh=(0,V.A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var lh=n(3528);const ch=(0,V.A)("arrow-down-to-line",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]),dh={class:"legacy-modal"},uh={class:"legacy-modal-header"},mh={class:"title"},ph={class:"legacy-modal-body"},fh={class:"file-row"},gh={key:0,class:"file-name"},hh={key:1,class:"file-name muted"},vh={key:0,class:"result"},bh={class:"summary-grid"},yh={class:"kv"},xh={class:"v"},kh={class:"kv"},wh={class:"v"},Eh={class:"kv"},Nh={class:"v"},Sh={class:"kv"},Vh={class:"v"},_h={key:0,class:"details"},Ch={class:"chips"},Ah={key:1,class:"details"},Dh={class:"errors"},Th={class:"details"},Bh={class:"json-preview"},Ih={class:"legacy-modal-actions"},zh=["disabled"],Mh=["disabled"],Ph=(0,r.defineComponent)({__name:"LegacySaveMigrationModal",props:{open:{type:Boolean},targetCharId:{},targetCharName:{}},emits:["close","imported"],setup(e,{emit:t}){const n=e,a=t,o=(0,hd.useCharacterStore)(),i=(0,r.ref)(null),s=(0,r.ref)(""),l=(0,r.ref)(null),c=(0,r.ref)(null),d=(0,r.ref)(null),u=(0,r.computed)(()=>{if(!c.value)return null;const e=(0,vd.ZT)(c.value);return e.isBundle?{schema:"dad.bundle",type:e.type}:c.value}),m=(0,r.computed)(()=>{if(!n.targetCharId)return!1;const e=o.rootState.è§’è‰²åˆ—è¡¨?.[n.targetCharId];return!(!e||"å•æœº"!==e.æ¨¡å¼)&&Array.isArray(d.value)&&d.value.length>0}),p=()=>{i.value?.click()},f=async e=>{const t=e.target.files?.[0];if(t)try{s.value=t.name,l.value=null,c.value=null,d.value=null;const e=await t.text();(e=>{const t=[],n=new Set;let a=0,r=0;const o=(new Date).toISOString(),i=e.saves.map((e,i)=>{const s=e?.å­˜æ¡£æ•°æ®??e,l=(0,bd.WI)(s);l.needsMigration&&a++,l.legacyKeysFound.forEach(e=>n.add(e));const c=(0,bd.ru)(s)?s:(0,bd.jj)(s).migrated,d=(0,yd.$)(c);d.isValid||(r++,t.push(`ç¬¬ ${i+1} ä¸ªå­˜æ¡£ã€Œ${e?.å­˜æ¡£å??"æœªå‘½å"}ã€æ ¡éªŒå¤±è´¥ï¼š${d.errors[0]||"æœªçŸ¥åŸå› "}`));const u=String(e?.å­˜æ¡£å??`å¯¼å…¥å­˜æ¡£_${i+1}`);return{...e,å­˜æ¡£å:u,ä¿å­˜æ—¶é—´:e?.ä¿å­˜æ—¶é—´??o,æœ€åä¿å­˜æ—¶é—´:e?.æœ€åä¿å­˜æ—¶é—´??e?.ä¿å­˜æ—¶é—´??o,å­˜æ¡£æ•°æ®:c}});l.value={typeLabel:e.label,totalSaves:e.saves.length,needsMigration:a,invalidSaves:r,legacyKeys:Array.from(n).sort((e,t)=>e.localeCompare(t,"zh")),errors:t},d.value=i,"character"===e.exportType?c.value=(0,vd.q3)("character",{...e.exportPayloadBase||{},å­˜æ¡£åˆ—è¡¨:i},{exportedAt:o}):c.value=(0,vd.q3)("saves",{...e.exportPayloadBase||{},saves:i},{exportedAt:o})})((e=>{const t=(0,vd.ZT)(e);if("saves"===t.type&&Array.isArray(t.payload?.saves))return{label:"å­˜æ¡£åŒ…",exportType:"saves",exportPayloadBase:{...t.payload||{}},saves:t.payload.saves};if("character"===t.type&&Array.isArray(t.payload?.å­˜æ¡£åˆ—è¡¨))return{label:"è§’è‰²åŒ…",exportType:"character",exportPayloadBase:{...t.payload||{}},saves:t.payload.å­˜æ¡£åˆ—è¡¨};if(e&&"object"==typeof e&&e.å­˜æ¡£æ•°æ®)return{label:"å•ä¸ªå­˜æ¡£",exportType:"saves",exportPayloadBase:{},saves:[e]};if(e&&"object"==typeof e&&((0,bd.WI)(e).needsMigration||(0,bd.ru)(e)))return{label:"å­˜æ¡£æ•°æ®",exportType:"saves",exportPayloadBase:{},saves:[{å­˜æ¡£å:"è½¬æ¢å­˜æ¡£",å­˜æ¡£æ•°æ®:e}]};throw new Error("æ— æ³•è¯†åˆ«æ–‡ä»¶ç±»å‹ï¼šè¯·ä½¿ç”¨æœ¬æ¸¸æˆå¯¼å‡ºçš„å­˜æ¡£/è§’è‰²æ–‡ä»¶ï¼Œæˆ–ç›´æ¥é€‰æ‹©å­˜æ¡£æ•°æ® JSON")})(JSON.parse(e)));const n=l.value;n&&n.errors.length?ne.o.error("æ£€æµ‹åˆ°è½¬æ¢/æ ¡éªŒé—®é¢˜ï¼Œè¯·å…ˆå¤„ç†åå†å¯¼å…¥"):n&&(n.needsMigration??0)>0?ne.o.success("æ—§å­˜æ¡£å·²è½¬æ¢ä¸ºå½“å‰æ ¼å¼ï¼ˆæœªå†™å…¥æœ¬åœ°ï¼Œéœ€æ‰‹åŠ¨ä¸‹è½½/å¯¼å…¥ï¼‰"):ne.o.info("æ–‡ä»¶å·²æ˜¯å½“å‰æ ¼å¼ï¼ˆå¯ç›´æ¥ä¸‹è½½æˆ–å¯¼å…¥ï¼‰")}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";l.value={typeLabel:"æœªçŸ¥",totalSaves:0,needsMigration:0,invalidSaves:0,legacyKeys:[],errors:[t]},ne.o.error(`è¯»å–/è§£æå¤±è´¥ï¼š${t}`)}finally{i.value&&(i.value.value="")}},g=()=>{if(!c.value)return;const e=new Blob([JSON.stringify(c.value,null,2)],{type:"application/json"}),t=document.createElement("a");t.href=URL.createObjectURL(e);const n=(new Date).toISOString().split("T")[0];t.download=`ä»™é€”-æ—§å­˜æ¡£è½¬åŒ–-${n}.json`,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(t.href),ne.o.success("å·²ä¸‹è½½è½¬æ¢åçš„æ–‡ä»¶")},h=async()=>{if(!n.targetCharId)return;if(!d.value?.length)return;const e=n.targetCharName||n.targetCharId;try{for(const e of d.value)await o.importSave(n.targetCharId,e);ne.o.success(`å·²å¯¼å…¥ ${d.value.length} ä¸ªå­˜æ¡£åˆ°è§’è‰²ã€Œ${e}ã€`),a("imported",d.value.length)}catch(e){ne.o.error(`å¯¼å…¥å¤±è´¥ï¼š${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}};return(e,t)=>e.open?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"legacy-modal-overlay",onClick:t[2]||(t[2]=(0,r.withModifiers)(e=>a("close"),["self"]))},[(0,r.createElementVNode)("div",dh,[(0,r.createElementVNode)("div",uh,[(0,r.createElementVNode)("div",mh,[(0,r.createVNode)((0,r.unref)(sh),{size:18}),t[3]||(t[3]=(0,r.createElementVNode)("span",null,"æ—§å­˜æ¡£è½¬åŒ–",-1))]),(0,r.createElementVNode)("button",{class:"icon-btn",onClick:t[0]||(t[0]=e=>a("close")),title:"å…³é—­"},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:18})])]),(0,r.createElementVNode)("div",ph,[t[12]||(t[12]=(0,r.createElementVNode)("p",{class:"hint"}," é€‰æ‹©æ—§å­˜æ¡£/æ—§å¯¼å‡ºæ–‡ä»¶åï¼Œä¼šå…ˆæ£€æµ‹å¹¶è½¬æ¢ä¸ºå½“å‰æ ¼å¼ï¼Œå†è¿›è¡Œæ ¡éªŒã€‚ä½ å¯ä»¥ä¸‹è½½è½¬æ¢åçš„æ–‡ä»¶ï¼Œæˆ–å¯¼å…¥åˆ°å½“å‰é€‰ä¸­å•æœºè§’è‰²ã€‚ ",-1)),(0,r.createElementVNode)("div",fh,[(0,r.createElementVNode)("button",{class:"btn",onClick:p},[(0,r.createVNode)((0,r.unref)(ih.A),{size:16}),t[4]||(t[4]=(0,r.createTextVNode)(" é€‰æ‹© JSON æ–‡ä»¶ ",-1))]),s.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",gh,(0,r.toDisplayString)(s.value),1)):((0,r.openBlock)(),(0,r.createElementBlock)("span",hh,"æœªé€‰æ‹©æ–‡ä»¶"))]),l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",vh,[(0,r.createElementVNode)("div",bh,[(0,r.createElementVNode)("div",yh,[t[5]||(t[5]=(0,r.createElementVNode)("span",{class:"k"},"è¯†åˆ«ç±»å‹",-1)),(0,r.createElementVNode)("span",xh,(0,r.toDisplayString)(l.value.typeLabel),1)]),(0,r.createElementVNode)("div",kh,[t[6]||(t[6]=(0,r.createElementVNode)("span",{class:"k"},"å­˜æ¡£æ•°é‡",-1)),(0,r.createElementVNode)("span",wh,(0,r.toDisplayString)(l.value.totalSaves),1)]),(0,r.createElementVNode)("div",Eh,[t[7]||(t[7]=(0,r.createElementVNode)("span",{class:"k"},"éœ€è¦è½¬æ¢",-1)),(0,r.createElementVNode)("span",Nh,(0,r.toDisplayString)(l.value.needsMigration),1)]),(0,r.createElementVNode)("div",Sh,[t[8]||(t[8]=(0,r.createElementVNode)("span",{class:"k"},"æ ¡éªŒå¤±è´¥",-1)),(0,r.createElementVNode)("span",Vh,(0,r.toDisplayString)(l.value.invalidSaves),1)])]),l.value.legacyKeys.length?((0,r.openBlock)(),(0,r.createElementBlock)("details",_h,[t[9]||(t[9]=(0,r.createElementVNode)("summary",null,"æ£€æµ‹åˆ°çš„æ—§ keyï¼ˆåˆå¹¶å±•ç¤ºï¼‰",-1)),(0,r.createElementVNode)("div",Ch,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.value.legacyKeys,e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"chip"},(0,r.toDisplayString)(e),1))),128))])])):(0,r.createCommentVNode)("v-if",!0),l.value.errors.length?((0,r.openBlock)(),(0,r.createElementBlock)("details",Ah,[t[10]||(t[10]=(0,r.createElementVNode)("summary",null,"è½¬æ¢/æ ¡éªŒé—®é¢˜",-1)),(0,r.createElementVNode)("ul",Dh,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.value.errors,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t},(0,r.toDisplayString)(e),1))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("details",Th,[t[11]||(t[11]=(0,r.createElementVNode)("summary",null,"è½¬æ¢åçš„å¯¼å‡ºç»“æ„",-1)),(0,r.createElementVNode)("pre",Bh,(0,r.toDisplayString)(JSON.stringify(u.value,null,2)),1)])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",Ih,[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:t[1]||(t[1]=e=>a("close"))},"å…³é—­"),(0,r.createElementVNode)("button",{class:"btn",disabled:!c.value||!!l.value?.errors.length,onClick:g},[(0,r.createVNode)((0,r.unref)(lh.A),{size:16}),t[13]||(t[13]=(0,r.createTextVNode)(" è½¬æ¢å¹¶ä¸‹è½½ ",-1))],8,zh),m.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"btn",disabled:!d.value||!!l.value?.errors.length,onClick:h},[(0,r.createVNode)((0,r.unref)(ch),{size:16}),t[14]||(t[14]=(0,r.createTextVNode)(" å¯¼å…¥åˆ°å½“å‰è§’è‰² ",-1))],8,Mh)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("input",{ref_key:"fileInput",ref:i,type:"file",accept:".json,application/json",hidden:"",onChange:f},null,544)])])):(0,r.createCommentVNode)("v-if",!0)}});var Rh=n(47),$h={};$h.styleTagTransform=k(),$h.setAttributes=v(),$h.insert=g().bind(null,"head"),$h.domAPI=p(),$h.insertStyleElement=y(),u()(Rh.A,$h),Rh.A&&Rh.A.locals&&Rh.A.locals;const Oh=(0,N.A)(Ph,[["__scopeId","data-v-a38a6a5a"]]);n(4511);var Lh=n(6585);const Fh={class:"dialog-title"},jh={class:"dialog-message"},Uh=["placeholder"],qh={class:"dialog-actions"},Gh={key:0,class:"fullscreen-header"},Hh={class:"fullscreen-title"},Yh={class:"mobile-header"},Wh={class:"menu-text"},Xh={class:"mobile-title"},Jh={key:0,class:"selected-info"},Kh={key:2,class:"empty-state"},Qh={class:"empty-icon"},Zh={class:"empty-actions"},ev={class:"management-layout"},tv={class:"grid-container"},nv={class:"grid-header-left"},av={class:"header-title-group"},rv={class:"character-count"},ov=["title"],iv={class:"grid-header-right"},sv={class:"header-left-content"},lv={key:0,class:"selected-char-info"},cv={key:0,class:"save-actions-buttons"},dv=["title"],uv=["disabled"],mv={class:"characters-grid"},pv=["onClick"],fv={class:"card-header"},gv={class:"avatar-text"},hv={class:"mode-indicator"},vv={class:"char-info"},bv={class:"char-name"},yv={class:"char-meta"},xv={class:"world"},kv={class:"talent"},wv={class:"save-count"},Ev={class:"count"},Nv={class:"label"},Sv={class:"card-actions"},Vv=["onClick"],_v=["onClick"],Cv=["onClick"],Av={class:"grid-content-right saves-panel"},Dv={key:0,class:"no-selection"},Tv={class:"no-selection-icon"},Bv={class:"loading-saves"},Iv={class:"saves-container"},zv={class:"saves-section"},Mv={key:0,class:"manual-saves-section"},Pv={class:"manual-saves-header"},Rv={class:"save-info-text"},$v={class:"manual-saves-grid"},Ov=["onClick"],Lv={key:0,class:"save-data"},Fv={class:"save-header"},jv={class:"save-name"},Uv={class:"save-actions"},qv=["onClick","title"],Gv=["onClick","title","disabled"],Hv=["onClick","disabled","title"],Yv={class:"save-badges"},Wv={class:"realm-badge"},Xv={class:"age-badge"},Jv={class:"save-stats"},Kv={class:"stat-grid"},Qv={class:"stat"},Zv={class:"value"},eb={class:"stat"},tb={class:"value"},nb={class:"stat"},ab={class:"value"},rb={class:"stat"},ob={class:"value"},ib={class:"save-footer"},sb={class:"location"},lb={class:"save-time"},cb={key:1,class:"save-empty"},db={class:"empty-text"},ub={class:"empty-desc"},mb={class:"online-saves-container"},pb={key:0,class:"login-prompt"},fb={class:"loading-saves"},gb={key:2,class:"online-save-card"},hb={class:"save-data"},vb={class:"save-header"},bb={class:"save-name"},yb={class:"save-badges"},xb={class:"realm-badge"},kb={class:"age-badge"},wb={class:"save-stats"},Eb={class:"stat-grid"},Nb={class:"stat"},Sb={class:"value"},Vb={class:"stat"},_b={class:"value"},Cb={class:"stat"},Ab={class:"value"},Db={class:"stat"},Tb={class:"value"},Bb={class:"save-footer"},Ib={class:"location"},zb={class:"sync-info"},Mb={class:"online-actions"},Pb={key:0,class:"btn-sync"},Rb={class:"online-save-card"},$b={class:"save-empty"},Ob={class:"empty-text"},Lb={class:"empty-hint"},Fb={class:"modal-header"},jb={key:0,class:"modal-content"},Ub={class:"details-grid"},qb={class:"detail-section"},Gb={class:"detail-items"},Hb={class:"detail-item"},Yb={class:"label"},Wb={class:"value"},Xb={class:"detail-item"},Jb={class:"label"},Kb={class:"value"},Qb={class:"detail-item"},Zb={class:"label"},ey={class:"value"},ty={class:"detail-item"},ny={class:"label"},ay={class:"value"},ry={class:"detail-item"},oy={class:"label"},iy={class:"value"},sy={class:"detail-item"},ly={class:"label"},cy={class:"value"},dy={class:"detail-section"},uy={class:"attributes-display"},my={class:"detail-section"},py={class:"talents-list"},fy={key:0,class:"talent-items"},gy=["title"],hy={key:1,class:"no-talents"},vy=(0,r.defineComponent)({__name:"CharacterManagement",props:{fullscreen:{type:Boolean,default:!1}},emits:["back","login","close","character-selected"],setup(e,{emit:t}){const o=e,i=t,s=(0,r.computed)(()=>o.fullscreen),l=(0,a.useRouter)(),c=(0,hd.useCharacterStore)(),d=(0,r.ref)(!0),u=(0,r.ref)(null),m=(0,r.ref)(!1),p=(0,r.ref)(null),f=(0,r.ref)(null),g=(0,r.ref)(null),h=(0,r.ref)(!1),v=(0,r.ref)(!1),b=(0,r.ref)(!1),y=(0,r.ref)("character"),x=(0,r.ref)(!1),k=(0,r.ref)(window.innerWidth),w=()=>{k.value=window.innerWidth,k.value>768?h.value=!0:k.value<=480&&(h.value=!1)},E=()=>{A.value?"å•æœº"===A.value.æ¨¡å¼?x.value=!0:ne.o.error("è”æœºè§’è‰²ä¸æ”¯æŒæ—§å­˜æ¡£è½¬åŒ–/å¯¼å…¥"):ne.o.info("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªå•æœºè§’è‰²")},N=async()=>{u.value&&await M(u.value)};(0,r.onMounted)(async()=>{window.addEventListener("resize",w),w();const e=Object.keys(c.rootState.è§’è‰²åˆ—è¡¨);for(const t of e)try{await c.loadCharacterSaves(t)}catch(e){console.warn(`[CharacterManagement] é¢„åŠ è½½è§’è‰² ${t} å­˜æ¡£å¤±è´¥:`,e)}const t=e[0];t&&M(t)}),(0,r.onUnmounted)(()=>{window.removeEventListener("resize",w)});const V=(0,r.ref)({show:!1,type:"alert",title:"",message:"",inputValue:"",placeholder:"",onConfirm:()=>{},onCancel:()=>{}}),_=(0,r.computed)(()=>Object.keys(c.rootState.è§’è‰²åˆ—è¡¨).length),C=(0,r.computed)(()=>{const e=c.rootState.è§’è‰²åˆ—è¡¨,t=Object.entries(e);return t.length>0&&console.log("[CharacterManagement] ç¬¬ä¸€ä¸ªè§’è‰²çš„æ•°æ®ç»“æ„:",JSON.stringify(t[0][1],null,2).substring(0,500)),t.filter(([,e])=>!(!e?.è§’è‰²?.åå­—&&!e?.è§’è‰²?.èº«ä»½?.åå­—))}),A=(0,r.computed)(()=>u.value?c.rootState.è§’è‰²åˆ—è¡¨[u.value]:null),T=(0,r.computed)(()=>k.value<=768),z=()=>{h.value=!h.value},M=async e=>{if(u.value!==e){u.value=e,b.value=!0;try{await c.loadCharacterSaves(e)}catch(e){console.error("[CharacterManagement] åŠ è½½å­˜æ¡£æ•°æ®å¤±è´¥:",e)}finally{b.value=!1}T.value&&(h.value=!1)}},P=e=>"å•æœº"===e.æ¨¡å¼?Object.entries(e.å­˜æ¡£åˆ—è¡¨||{}).filter(([e,t])=>"ä¸Šæ¬¡å¯¹è¯"!==e&&t.å­˜æ¡£æ•°æ®).length:e.å­˜æ¡£?.å­˜æ¡£æ•°æ®?1:0,R=()=>{m.value=!1,p.value=null},$=async(e,t,n)=>{console.log("é€‰æ‹©å­˜æ¡£:",e,t,n);const a=c.rootState.è§’è‰²åˆ—è¡¨[e];if("è”æœº"===a?.æ¨¡å¼&&(0,B.isBackendConfigured)()&&!await(0,I.verifyStoredToken)())return ne.o.warning("è”æœºæ¨¡å¼éœ€è¦ç™»å½•ï¼Œæ­£åœ¨è·³è½¬..."),void l.push("/login");if(n){console.log("åŠ è½½å­˜æ¡£...");const n=await c.loadGame(e,t);console.log("åŠ è½½ç»“æœ:",n),n?(console.log("è·³è½¬åˆ°æ¸¸æˆç•Œé¢..."),o.fullscreen?i("character-selected",a):l.push("/game")):console.error("å­˜æ¡£åŠ è½½å¤±è´¥")}else{const n="ä¸Šæ¬¡å¯¹è¯"===t;J(n?"åˆ›å»ºæ–°å­˜æ¡£":"å¼€å¯æ–°å¾ç¨‹",n?`æ˜¯å¦åœ¨ã€${t}ã€‘ä½ç½®åˆ›å»ºæ–°çš„å­˜æ¡£å¼€å§‹æ¸¸æˆï¼Ÿ`:`æ˜¯å¦åœ¨å­˜æ¡£ä½ "${t}" å¼€å§‹ä¸€æ®µæ–°çš„ä¿®è¡Œï¼Ÿ`,async()=>{console.log("ç¡®è®¤åˆ›å»ºæ–°å­˜æ¡£...");const n=await c.loadGame(e,t);console.log("æ–°å­˜æ¡£åŠ è½½ç»“æœ:",n),n&&(console.log("è·³è½¬åˆ°æ¸¸æˆç•Œé¢..."),o.fullscreen?i("character-selected",a):l.push("/game"))})}},O=(e,t)=>{if(!e||"è”æœº"===e.æ¨¡å¼)return!1;if("ä¸Šæ¬¡å¯¹è¯"===t||"æ—¶é—´ç‚¹å­˜æ¡£"===t)return!1;const n=e.å­˜æ¡£åˆ—è¡¨||{},a=Object.entries(n).filter(([e,t])=>"ä¸Šæ¬¡å¯¹è¯"!==e&&"æ—¶é—´ç‚¹å­˜æ¡£"!==e&&t.å­˜æ¡£æ•°æ®).length,r=n[t];return!(r?.å­˜æ¡£æ•°æ®&&a<=1)},L=(e,t)=>"ä¸Šæ¬¡å¯¹è¯"===t?"ä¸Šæ¬¡å¯¹è¯å­˜æ¡£ä¸å¯åˆ é™¤ï¼ˆç”¨äºå›æ»šï¼‰":"æ—¶é—´ç‚¹å­˜æ¡£"===t?"æ—¶é—´ç‚¹å­˜æ¡£ä¸å¯åˆ é™¤ï¼ˆå®šæ—¶è‡ªåŠ¨è¦†ç›–ï¼‰":O(e,t)?"åˆ é™¤å­˜æ¡£":"æ— æ³•åˆ é™¤ï¼šè‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªæ‰‹åŠ¨å­˜æ¡£",F=()=>{i("back")},j=()=>{o.fullscreen?i("close"):F()},U=()=>{i("login")},q=e=>{if(!e||"object"!=typeof e)return null;const t=e;return(0,bd.ru)(t)?t:(0,bd.jj)(t).migrated},G=e=>om(e),H=e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e){const t=e;return String(t["åç§°"]||t.name||"æœªçŸ¥å¤©èµ‹")}return"æœªçŸ¥å¤©èµ‹"},Y=e=>{if("string"==typeof e)return`å¤©èµ‹ã€Š${e}ã€‹`;if(e&&"object"==typeof e){const t=e,n=t["æè¿°"]||t.description||"",a=H(e);return n?String(n):`å¤©èµ‹ã€Š${a}ã€‹`}return"æœªçŸ¥å¤©èµ‹"},W=e=>e?"string"==typeof e?e:"object"==typeof e&&null!==e&&(e.åç§°||e.name||e.åå­—)||"æœªçŸ¥":"æœªçŸ¥",X=(e,t,n)=>{V.value={show:!0,type:"alert",title:e,message:t,inputValue:"",placeholder:"",onConfirm:()=>{n&&n(),Z()},onCancel:Z}},J=(e,t,n,a)=>{V.value={show:!0,type:"confirm",title:e,message:t,inputValue:"",placeholder:"",onConfirm:()=>{n(),Z()},onCancel:()=>{a&&a(),Z()}}},K=()=>{"prompt"===V.value.type?V.value.onConfirm(V.value.inputValue):V.value.onConfirm()},Q=()=>{V.value.onCancel(),Z()},Z=()=>{V.value.show=!1},ee=()=>{A.value?(y.value="saves",g.value?.click()):ne.o.error("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªè§’è‰²ä»¥å¯¼å…¥å­˜æ¡£")},te=()=>{y.value="character",g.value?.click()},ae=async e=>{const t=e.target.files?.[0];if(!t)return;const n=()=>{g.value&&(g.value.value="")};try{const e=await t.text(),a=JSON.parse(e),r=(0,vd.ZT)(a);if("saves"===y.value){const e="saves"===r.type&&Array.isArray(r.payload?.saves)?r.payload.saves:"character"===r.type&&Array.isArray(r.payload?.å­˜æ¡£åˆ—è¡¨)?r.payload.å­˜æ¡£åˆ—è¡¨:null;if(!e)throw new Error("æ— æ•ˆçš„å­˜æ¡£æ–‡ä»¶æ ¼å¼ï¼Œè¯·ä½¿ç”¨æœ¬æ¸¸æˆå¯¼å‡ºçš„å­˜æ¡£æ–‡ä»¶");if(0===e.length)throw new Error("æ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„å­˜æ¡£æ•°æ®");if(!u.value||!A.value)return ne.o.error("è¯·å…ˆé€‰æ‹©ä¸€ä¸ªè§’è‰²ä»¥å¯¼å…¥å­˜æ¡£"),void n();const t=u.value,a=A.value.è§’è‰².åå­—;J("å¯¼å…¥å­˜æ¡£",`ç¡®å®šè¦å°† ${e.length} ä¸ªå­˜æ¡£å¯¼å…¥åˆ°è§’è‰² "${a}" å—ï¼ŸåŒåå­˜æ¡£å°†è¢«è¦†ç›–ã€‚`,async()=>{v.value=!0;try{for(const n of e)await c.importSave(t,n);ne.o.success(`æˆåŠŸä¸ºè§’è‰² "${a}" å¯¼å…¥ ${e.length} ä¸ªå­˜æ¡£`),await M(t)}catch(e){console.error("å¯¼å…¥å­˜æ¡£å¤±è´¥",e),ne.o.error("å¯¼å…¥å­˜æ¡£å¤±è´¥: "+e.message)}finally{v.value=!1,n()}},n)}else if("character"===y.value){if("character"!==r.type||!r.payload?.è§’è‰²ä¿¡æ¯)throw new Error("æ— æ•ˆçš„è§’è‰²æ–‡ä»¶æ ¼å¼ï¼Œè¯·ä½¿ç”¨æœ¬æ¸¸æˆå¯¼å‡ºçš„è§’è‰²æ–‡ä»¶");const e=r.payload.è§’è‰²ä¿¡æ¯,t=e?.è§’è‰²?.åå­—||"æœªçŸ¥è§’è‰²";e.å­˜æ¡£åˆ—è¡¨={},Array.isArray(r.payload?.å­˜æ¡£åˆ—è¡¨)&&(e._å¯¼å…¥å­˜æ¡£åˆ—è¡¨=r.payload.å­˜æ¡£åˆ—è¡¨),J("å¯¼å…¥è§’è‰²",`ç¡®å®šè¦å¯¼å…¥è§’è‰² "${t}" å—ï¼Ÿ`,async()=>{v.value=!0;try{await c.importCharacter(e),ne.o.success(`æˆåŠŸå¯¼å…¥è§’è‰² "${t}"`)}catch(e){console.error("å¯¼å…¥è§’è‰²å¤±è´¥",e),ne.o.error("å¯¼å…¥è§’è‰²å¤±è´¥: "+e.message)}finally{v.value=!1,n()}},n)}}catch(e){console.error("å¤„ç†å¯¼å…¥æ–‡ä»¶å¤±è´¥",e),ne.o.error("å¤„ç†å¯¼å…¥æ–‡ä»¶å¤±è´¥: "+e.message),n()}};return(e,t)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:(0,r.normalizeClass)(["character-management-panel",{fullscreen:s.value}])},[s.value?((0,r.openBlock)(),(0,r.createBlock)(S,{key:0})):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" è‡ªå®šä¹‰å¯¹è¯æ¡† "),V.value.show?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"dialog-overlay",onClick:Q},[(0,r.createElementVNode)("div",{class:"dialog-box",onClick:t[1]||(t[1]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("h3",Fh,(0,r.toDisplayString)(V.value.title),1),(0,r.createElementVNode)("p",jh,(0,r.toDisplayString)(V.value.message),1),"prompt"===V.value.type?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>V.value.inputValue=e),placeholder:V.value.placeholder,class:"dialog-input",ref_key:"promptInput",ref:f},null,8,Uh)),[[r.vModelText,V.value.inputValue]]):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",qh,["alert"!==V.value.type?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:Q,class:"btn-dialog-cancel"},(0,r.toDisplayString)(e.$t("å–æ¶ˆ")),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{onClick:K,class:"btn-dialog-confirm"},(0,r.toDisplayString)(e.$t("ç¡®è®¤")),1)])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ä¸»ä½“åŒºåŸŸ "),(0,r.createElementVNode)("main",{class:(0,r.normalizeClass)(["main-content",{"fullscreen-content":s.value}])},[(0,r.createElementVNode)("input",{ref_key:"fileInput",ref:g,type:"file",accept:".json",onChange:ae,style:{display:"none"}},null,544),(0,r.createVNode)(Oh,{open:x.value,targetCharId:u.value,targetCharName:A.value?.è§’è‰²?.åå­—,onClose:t[2]||(t[2]=e=>x.value=!1),onImported:N},null,8,["open","targetCharId","targetCharName"]),(0,r.createCommentVNode)(" è¿”å›æŒ‰é’® - ä»…åœ¨å…¨å±æ¨¡å¼æ˜¾ç¤º "),s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Gh,[(0,r.createElementVNode)("button",{onClick:j,class:"fullscreen-back-btn"},[(0,r.createVNode)((0,r.unref)(oh),{size:20}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("è¿”å›é“é€”")),1)]),(0,r.createElementVNode)("div",Hh,[(0,r.createElementVNode)("h1",null,(0,r.toDisplayString)(e.$t("ç»­å‰ä¸–å› ç¼˜")),1),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("æ‹©ä¸€æ³•èº«ï¼Œå…¥é“é‡ä¿®")),1)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ç§»åŠ¨ç«¯å¤´éƒ¨å¯¼èˆª "),(0,r.createElementVNode)("div",Yh,[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["mobile-menu-btn",{active:h.value}]),onClick:z},[t[7]||(t[7]=(0,r.createElementVNode)("div",{class:"hamburger"},[(0,r.createElementVNode)("span"),(0,r.createElementVNode)("span"),(0,r.createElementVNode)("span")],-1)),(0,r.createElementVNode)("span",Wh,(0,r.toDisplayString)(e.$t("è§’è‰²åˆ—è¡¨")),1)],2),(0,r.createElementVNode)("div",Xh,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.$t("è§’è‰²ç®¡ç†")),1),A.value?.è§’è‰²?.åå­—?((0,r.openBlock)(),(0,r.createElementBlock)("div",Jh,(0,r.toDisplayString)(A.value.è§’è‰².åå­—)+" - "+(0,r.toDisplayString)(A.value.æ¨¡å¼)+(0,r.toDisplayString)(e.$t("æ¨¡å¼")),1)):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createCommentVNode)(" é®ç½©å±‚ "),h.value&&T.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"panel-overlay",onClick:t[3]||(t[3]=e=>h.value=!1)})):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æ— è§’è‰²æç¤º "),0===Object.keys((0,r.unref)(c).rootState.è§’è‰²åˆ—è¡¨).length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Kh,[(0,r.createElementVNode)("div",Qh,[(0,r.createVNode)((0,r.unref)(uf),{size:32})]),(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.$t("é“é€”æœªå¯")),1),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("å°šæœªåˆ›å»ºä»»ä½•æ³•èº«ï¼Œè¯·è¿”å›é“é€”å¼€å¯ä¿®ä»™ä¹‹æ—…")),1),(0,r.createElementVNode)("div",Zh,[(0,r.createElementVNode)("button",{onClick:F,class:"btn-create"},(0,r.toDisplayString)(e.$t("è¸å…¥ä»™é€”")),1),(0,r.createElementVNode)("button",{onClick:te,class:"btn-import"},(0,r.toDisplayString)(e.$t("å¯¼å…¥è§’è‰²")),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:3},[(0,r.createCommentVNode)(" è§’è‰²ç®¡ç†ç•Œé¢ "),(0,r.createElementVNode)("div",ev,[(0,r.createCommentVNode)(" 3è¡Œ2åˆ—ç½‘æ ¼å®¹å™¨ "),(0,r.createElementVNode)("div",tv,[(0,r.createCommentVNode)(" ç¬¬1è¡Œï¼šæ ‡é¢˜æ  "),(0,r.createElementVNode)("div",nv,[(0,r.createElementVNode)("div",av,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.$t("è§’è‰²åˆ—è¡¨")),1),(0,r.createElementVNode)("div",rv,(0,r.toDisplayString)(_.value)+" "+(0,r.toDisplayString)(e.$t("ä¸ªè§’è‰²")),1)]),(0,r.createElementVNode)("button",{onClick:te,class:"btn-header-action import",title:e.$t("å¯¼å…¥è§’è‰²")},[(0,r.createVNode)((0,r.unref)(ih.A),{size:16}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("å¯¼å…¥")),1)],8,ov)]),(0,r.createElementVNode)("div",iv,[(0,r.createElementVNode)("div",sv,[(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.$t("å­˜æ¡£ç®¡ç†")),1),A.value?.è§’è‰²?.åå­—?((0,r.openBlock)(),(0,r.createElementBlock)("div",lv,(0,r.toDisplayString)(A.value.è§’è‰².åå­—)+" - "+(0,r.toDisplayString)(A.value.æ¨¡å¼)+(0,r.toDisplayString)(e.$t("æ¨¡å¼")),1)):(0,r.createCommentVNode)("v-if",!0)]),A.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",cv,[(0,r.createElementVNode)("button",{onClick:ee,class:"btn-save-action import",title:e.$t("å‘é€‰ä¸­è§’è‰²å¯¼å…¥å­˜æ¡£")},[(0,r.createVNode)((0,r.unref)(ih.A),{size:18}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("å¯¼å…¥å­˜æ¡£")),1)],8,dv),(0,r.createElementVNode)("button",{onClick:E,class:"btn-save-action migrate",disabled:"å•æœº"!==A.value.æ¨¡å¼,title:"æ—§å­˜æ¡£è½¬åŒ–ï¼ˆå•æœºï¼‰"},[(0,r.createVNode)((0,r.unref)(sh),{size:18}),t[8]||(t[8]=(0,r.createElementVNode)("span",null,"æ—§å­˜æ¡£è½¬åŒ–",-1))],8,uv)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" ç¬¬2è¡Œï¼šä¸»è¦å†…å®¹åŒº "),(0,r.createElementVNode)("section",{class:(0,r.normalizeClass)(["grid-content-left characters-panel",{"is-open":h.value}])},[(0,r.createElementVNode)("div",mv,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(C.value,([t,a])=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:(0,r.normalizeClass)(["character-card",{active:u.value===String(t),"single-mode":"å•æœº"===a.æ¨¡å¼,"online-mode":"è”æœº"===a.æ¨¡å¼}]),onClick:e=>M(String(t))},[(0,r.createCommentVNode)(" å¡ç‰‡å¤´éƒ¨ "),(0,r.createElementVNode)("div",fv,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["char-avatar",a.æ¨¡å¼])},[(0,r.createElementVNode)("span",gv,(0,r.toDisplayString)(a.è§’è‰².åå­—[0]),1),(0,r.createElementVNode)("div",hv,(0,r.toDisplayString)(a.æ¨¡å¼===e.$t("å•æœº")?e.$t("å•æœº"):e.$t("è”æœº")),1)],2),(0,r.createElementVNode)("div",vv,[(0,r.createElementVNode)("h3",bv,(0,r.toDisplayString)(a.è§’è‰².åå­—),1),(0,r.createElementVNode)("div",yv,[(0,r.createElementVNode)("span",xv,(0,r.toDisplayString)(a.è§’è‰².ä¸–ç•Œ.name),1),(0,r.createElementVNode)("span",kv,(0,r.toDisplayString)(W(a.è§’è‰².å¤©èµ„.name)),1)])]),(0,r.createElementVNode)("div",wv,[(0,r.createElementVNode)("span",Ev,(0,r.toDisplayString)(P(a)),1),(0,r.createElementVNode)("span",Nv,(0,r.toDisplayString)(e.$t("å­˜æ¡£ç®¡ç†")),1)])]),(0,r.createCommentVNode)(" å¡ç‰‡åº•éƒ¨æ“ä½œ "),(0,r.createElementVNode)("div",Sv,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>(e=>{p.value=c.rootState.è§’è‰²åˆ—è¡¨[e],m.value=!0})(String(t)),["stop"]),class:"btn-details"},(0,r.toDisplayString)(e.$t("è¯¦æƒ…")),9,Vv),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>(async e=>{v.value=!0;try{const t=c.rootState.è§’è‰²åˆ—è¡¨[e];if(!t)return ne.o.error("è§’è‰²ä¸å­˜åœ¨"),void(v.value=!1);const{loadSaveData:a}=await Promise.resolve().then(n.bind(n,5099)),r=Object.values(t.å­˜æ¡£åˆ—è¡¨||{}),o=(await Promise.all(r.map(async t=>{const n=await a(e,t.å­˜æ¡£å),r=(0,fe.isTavernEnv)()?(0,Lh.kL)(n):n;return{...t,å­˜æ¡£æ•°æ®:r}}))).map(e=>{const t=e.å­˜æ¡£æ•°æ®;if(!t)throw new Error(`å­˜æ¡£ã€Œ${e.å­˜æ¡£å}ã€ç¼ºå°‘å­˜æ¡£æ•°æ®ï¼Œæ— æ³•å¯¼å‡º`);const n=(0,bd.ru)(t)?t:(0,bd.jj)(t).migrated,a=(0,yd.$)(n);if(!a.isValid)throw new Error(`å­˜æ¡£ã€Œ${e.å­˜æ¡£å}ã€æ ¡éªŒå¤±è´¥ï¼š${a.errors[0]||"æœªçŸ¥åŸå› "}`);return{...e,å­˜æ¡£æ•°æ®:n}}),i=(0,vd.q3)("character",{è§’è‰²ID:e,è§’è‰²ä¿¡æ¯:JSON.parse(JSON.stringify(t)),å­˜æ¡£åˆ—è¡¨:o}),s=JSON.stringify(i,null,2),l=new Blob([s],{type:"application/json"});console.log("[è§’è‰²å¯¼å‡º] æ•°æ®å¤§å°:",(s.length/1024).toFixed(2),"KB");const d=document.createElement("a");d.href=URL.createObjectURL(l);const u=t.è§’è‰²?.åå­—||"æœªå‘½åè§’è‰²";d.download=`ä»™é€”-è§’è‰²-${u}-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(d),d.click(),setTimeout(()=>{document.body.removeChild(d),URL.revokeObjectURL(d.href)},100),ne.o.success(`å·²å¯¼å‡ºè§’è‰²: ${u} (å« ${o.length} ä¸ªå­˜æ¡£)`)}catch(e){console.error("å¯¼å‡ºè§’è‰²å¤±è´¥",e),ne.o.error("å¯¼å‡ºè§’è‰²å¤±è´¥: "+(e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"))}finally{v.value=!1}})(String(t)),["stop"]),class:"btn-export"},(0,r.toDisplayString)(e.$t("å¯¼å‡º")),9,_v),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>(e=>{const t=c.rootState.è§’è‰²åˆ—è¡¨[e]?.è§’è‰².åå­—;J("åˆ é™¤è§’è‰²",`ç¡®å®šè¦å½»åº•åˆ é™¤è§’è‰²"${t}"åŠå…¶æ‰€æœ‰ä¿®è¡Œè®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,async()=>{u.value===e&&(u.value=null),await c.deleteCharacter(e)})})(String(t)),["stop"]),class:"btn-delete"},(0,r.toDisplayString)(e.$t("åˆ é™¤")),9,Cv)])],10,pv))),128))])],2),(0,r.createCommentVNode)(" å³ä¾§ï¼šå­˜æ¡£è¯¦æƒ… "),(0,r.createElementVNode)("section",Av,[(0,r.createCommentVNode)(" æœªé€‰æ‹©è§’è‰² "),A.value?b.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" æ­£åœ¨åŠ è½½å­˜æ¡£ "),(0,r.createElementVNode)("div",Bv,[t[9]||(t[9]=(0,r.createElementVNode)("div",{class:"loading-spinner"},null,-1)),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("æ­£åœ¨åŠ è½½å­˜æ¡£...")),1)])],2112)):"å•æœº"===A.value.æ¨¡å¼?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:2},[(0,r.createCommentVNode)(" å•æœºæ¨¡å¼å­˜æ¡£ "),(0,r.createElementVNode)("div",Iv,[(0,r.createElementVNode)("div",zv,[(0,r.createCommentVNode)(" æ‰‹åŠ¨å­˜æ¡£åŒº - ä»…å•æœºæ¨¡å¼æ˜¾ç¤º "),"å•æœº"===A.value.æ¨¡å¼?((0,r.openBlock)(),(0,r.createElementBlock)("div",Mv,[(0,r.createElementVNode)("div",Pv,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("æ‰‹åŠ¨å­˜æ¡£")),1),(0,r.createElementVNode)("div",Rv,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("å­˜æ¡£é€šè¿‡æ¸¸æˆå†…ä¿å­˜åŠŸèƒ½åˆ›å»º")),1)])]),(0,r.createElementVNode)("div",$v,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((o=A.value,o?.å­˜æ¡£åˆ—è¡¨?o.å­˜æ¡£åˆ—è¡¨:{}),(a,o)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:o,class:(0,r.normalizeClass)(["save-card manual-save",{"has-data":a.å­˜æ¡£æ•°æ®,"auto-save":"ä¸Šæ¬¡å¯¹è¯"===o||"æ—¶é—´ç‚¹å­˜æ¡£"===o}]),onClick:e=>a.å­˜æ¡£æ•°æ®&&$(u.value,String(o),!0),style:(0,r.normalizeStyle)({cursor:a.å­˜æ¡£æ•°æ®?"pointer":"default"})},[a.å­˜æ¡£æ•°æ®?((0,r.openBlock)(),(0,r.createElementBlock)("div",Lv,[(0,r.createElementVNode)("div",Fv,[(0,r.createElementVNode)("h4",jv,["ä¸Šæ¬¡å¯¹è¯"===o?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(D),{key:0,size:16,class:"save-icon last-save-icon"})):"æ—¶é—´ç‚¹å­˜æ¡£"===o?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Em),{key:1,size:16,class:"save-icon time-save-icon"})):(0,r.createCommentVNode)("v-if",!0),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(a.å­˜æ¡£å||o),1)]),(0,r.createElementVNode)("div",Uv,[(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>(async(e,t,a)=>{v.value=!0;try{const{loadSaveData:r}=await Promise.resolve().then(n.bind(n,5099)),o=await r(e,t),i=(0,fe.isTavernEnv)()?(0,Lh.kL)(o):o;if(!i)return ne.o.error("æ— æ³•åŠ è½½å­˜æ¡£æ•°æ®"),void(v.value=!1);const s=(0,bd.ru)(i)?i:(0,bd.jj)(i).migrated,l=(0,yd.$)(s);if(!l.isValid)throw new Error(l.errors[0]||"å­˜æ¡£ç»“æ„æ ¡éªŒå¤±è´¥");const c=(0,vd.q3)("saves",{characterId:e,characterName:A.value?.è§’è‰²?.åå­—,saves:[{...a,å­˜æ¡£å:t,å­˜æ¡£æ•°æ®:s}]}),d=JSON.stringify(c,null,2),u=new Blob([d],{type:"application/json"}),m=document.createElement("a");m.href=URL.createObjectURL(u);const p=a.å­˜æ¡£å||t;m.download=`ä»™é€”-${p}-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(m),m.click(),setTimeout(()=>{document.body.removeChild(m),URL.revokeObjectURL(m.href)},100),ne.o.success(`å·²å¯¼å‡ºå­˜æ¡£: ${p}`)}catch(e){console.error("å¯¼å‡ºå­˜æ¡£å¤±è´¥",e),ne.o.error("å¯¼å‡ºå­˜æ¡£å¤±è´¥: "+(e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"))}finally{v.value=!1}})(u.value,String(o),a),["stop"]),class:"btn-export-save",title:e.$t("å¯¼å‡ºæ­¤å­˜æ¡£")},(0,r.toDisplayString)(e.$t("å¯¼")),9,qv),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>((e,t)=>{const n=c.rootState.è§’è‰²åˆ—è¡¨[e]?.å­˜æ¡£åˆ—è¡¨?.[t],a=n?.å­˜æ¡£å||t;((e,t,n="",a="",o,i)=>{V.value={show:!0,type:"prompt",title:e,message:t,inputValue:n,placeholder:a,onConfirm:e=>{o(e||""),Z()},onCancel:()=>{i&&i(),Z()}},(0,r.nextTick)(()=>{f.value?.focus()})})("é‡å‘½åå­˜æ¡£","è¯·è¾“å…¥æ–°çš„å­˜æ¡£åç§°ï¼š",a,"",async n=>{if(n&&n.trim()&&n.trim()!==a){const a=n.trim(),r=c.rootState.è§’è‰²åˆ—è¡¨[e]?.å­˜æ¡£åˆ—è¡¨;if(r&&a!==t&&r[a])return void X("é‡å‘½åå¤±è´¥","å­˜æ¡£åç§°å·²å­˜åœ¨ï¼Œè¯·ä½¿ç”¨å…¶ä»–åç§°ã€‚");await c.renameSave(e,t,a)}})})(u.value,String(o)),["stop"]),class:"btn-edit-save",title:e.$t("é‡å‘½å"),disabled:"ä¸Šæ¬¡å¯¹è¯"===o||"æ—¶é—´ç‚¹å­˜æ¡£"===o},(0,r.toDisplayString)(e.$t("ç¼–")),9,Gv),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(e=>((e,t)=>{const n=c.rootState.è§’è‰²åˆ—è¡¨[e],a=n?.è§’è‰².åå­—,r="ä¸Šæ¬¡å¯¹è¯"===t?"ä¸Šæ¬¡å¯¹è¯å­˜æ¡£":t;O(n,t)?J("åˆ é™¤å­˜æ¡£",`ç¡®å®šè¦åˆ é™¤è§’è‰²"${a}"çš„"${r}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ã€‚`,()=>{c.deleteSave(e,t)}):X("æ— æ³•åˆ é™¤å­˜æ¡£","æ— æ³•åˆ é™¤è¯¥å­˜æ¡£ï¼šè§’è‰²è‡³å°‘éœ€è¦ä¿ç•™ä¸€ä¸ªå­˜æ¡£ã€‚å¦‚éœ€åˆ é™¤ï¼Œè¯·å…ˆåˆ›å»ºå…¶ä»–å­˜æ¡£æˆ–åˆ é™¤æ•´ä¸ªè§’è‰²ã€‚")})(u.value,String(o)),["stop"]),class:(0,r.normalizeClass)(["btn-delete-save",{disabled:!O(A.value,String(o))}]),disabled:!O(A.value,String(o)),title:L(A.value,String(o))},(0,r.toDisplayString)(e.$t("åˆ ")),11,Hv)])]),(0,r.createElementVNode)("div",Yv,[(0,r.createElementVNode)("span",Wv,(0,r.toDisplayString)(G(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.å¢ƒç•Œ)),1),(0,r.createElementVNode)("span",Xv,(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.å¯¿å‘½?.å½“å‰??18)+"å²",1)]),(0,r.createElementVNode)("div",Jv,[(0,r.createElementVNode)("div",Kv,[(0,r.createElementVNode)("div",Qv,[t[10]||(t[10]=(0,r.createElementVNode)("span",{class:"label"},"æ°”è¡€",-1)),(0,r.createElementVNode)("span",Zv,(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.æ°”è¡€?.å½“å‰??0)+"/"+(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.æ°”è¡€?.ä¸Šé™??0),1)]),(0,r.createElementVNode)("div",eb,[t[11]||(t[11]=(0,r.createElementVNode)("span",{class:"label"},"çµæ°”",-1)),(0,r.createElementVNode)("span",tb,(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.çµæ°”?.å½“å‰??0)+"/"+(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.çµæ°”?.ä¸Šé™??0),1)]),(0,r.createElementVNode)("div",nb,[t[12]||(t[12]=(0,r.createElementVNode)("span",{class:"label"},"ç¥è¯†",-1)),(0,r.createElementVNode)("span",ab,(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.ç¥è¯†?.å½“å‰??0)+"/"+(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.ç¥è¯†?.ä¸Šé™??0),1)]),(0,r.createElementVNode)("div",rb,[t[13]||(t[13]=(0,r.createElementVNode)("span",{class:"label"},"å£°æœ›",-1)),(0,r.createElementVNode)("span",ob,(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.å£°æœ›??0),1)])])]),(0,r.createElementVNode)("div",ib,[(0,r.createElementVNode)("span",sb,(0,r.toDisplayString)(q(a.å­˜æ¡£æ•°æ®)?.è§’è‰²?.ä½ç½®?.æè¿°||"åˆå§‹åœ°"),1),(0,r.createElementVNode)("span",lb,(0,r.toDisplayString)((i=a.ä¿å­˜æ—¶é—´,i?new Date(i).toLocaleString("zh-CN",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"æœªä¿å­˜")),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",cb,[t[14]||(t[14]=(0,r.createElementVNode)("div",{class:"empty-slot-icon"},"ğŸ“",-1)),(0,r.createElementVNode)("span",db,(0,r.toDisplayString)(e.$t("ç©ºå­˜æ¡£æ§½")),1),(0,r.createElementVNode)("span",ub,(0,r.toDisplayString)(e.$t("é€šè¿‡æ¸¸æˆå†…ä¿å­˜åˆ›å»º")),1)]))],14,Ov);var i}),128))])])):(0,r.createCommentVNode)("v-if",!0)])])],2112)):"è”æœº"===A.value.æ¨¡å¼?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:3},[(0,r.createCommentVNode)(" è”æœºæ¨¡å¼å­˜æ¡£ "),(0,r.createElementVNode)("div",mb,[d.value?b.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" åŠ è½½ä¸­çŠ¶æ€ "),(0,r.createElementVNode)("div",fb,[t[16]||(t[16]=(0,r.createElementVNode)("div",{class:"loading-spinner"},"â³",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("æ­£åœ¨åŠ è½½äº‘ç«¯å­˜æ¡£...")),1)])],2112)):A.value.å­˜æ¡£?.å­˜æ¡£æ•°æ®?((0,r.openBlock)(),(0,r.createElementBlock)("div",gb,[(0,r.createElementVNode)("div",hb,[(0,r.createElementVNode)("div",vb,[(0,r.createElementVNode)("h4",bb,(0,r.toDisplayString)(e.$t("äº‘ç«¯å­˜æ¡£")),1),(0,r.createElementVNode)("div",yb,[(0,r.createElementVNode)("span",xb,(0,r.toDisplayString)(G(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.å¢ƒç•Œ)),1),(0,r.createElementVNode)("span",kb,(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.å¯¿å‘½?.å½“å‰??18)+"å²",1)])]),(0,r.createElementVNode)("div",wb,[(0,r.createElementVNode)("div",Eb,[(0,r.createElementVNode)("div",Nb,[t[17]||(t[17]=(0,r.createElementVNode)("span",{class:"label"},"æ°”è¡€",-1)),(0,r.createElementVNode)("span",Sb,(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.æ°”è¡€?.å½“å‰??0)+"/"+(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.æ°”è¡€?.ä¸Šé™??0),1)]),(0,r.createElementVNode)("div",Vb,[t[18]||(t[18]=(0,r.createElementVNode)("span",{class:"label"},"çµæ°”",-1)),(0,r.createElementVNode)("span",_b,(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.çµæ°”?.å½“å‰??0)+"/"+(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.çµæ°”?.ä¸Šé™??0),1)]),(0,r.createElementVNode)("div",Cb,[t[19]||(t[19]=(0,r.createElementVNode)("span",{class:"label"},"ç¥è¯†",-1)),(0,r.createElementVNode)("span",Ab,(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.ç¥è¯†?.å½“å‰??0)+"/"+(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.ç¥è¯†?.ä¸Šé™??0),1)]),(0,r.createElementVNode)("div",Db,[t[20]||(t[20]=(0,r.createElementVNode)("span",{class:"label"},"å£°æœ›",-1)),(0,r.createElementVNode)("span",Tb,(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.å±æ€§?.å£°æœ›??0),1)])])]),(0,r.createElementVNode)("div",Bb,[(0,r.createElementVNode)("span",Ib,(0,r.toDisplayString)(q(A.value.å­˜æ¡£.å­˜æ¡£æ•°æ®)?.è§’è‰²?.ä½ç½®?.æè¿°||"åˆå§‹åœ°"),1),(0,r.createElementVNode)("div",zb,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["sync-status",{synced:!A.value.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯?.éœ€è¦åŒæ­¥}])},(0,r.toDisplayString)(A.value.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯?.éœ€è¦åŒæ­¥?e.$t("å¾…åŒæ­¥"):e.$t("å·²åŒæ­¥")),3)])]),(0,r.createElementVNode)("div",Mb,[(0,r.createElementVNode)("button",{onClick:t[4]||(t[4]=e=>$(u.value,"å­˜æ¡£",!0)),class:"btn-play"},(0,r.toDisplayString)(e.$t("è¿›å…¥æ¸¸æˆ")),1),A.value.å­˜æ¡£?.äº‘ç«¯åŒæ­¥ä¿¡æ¯?.éœ€è¦åŒæ­¥?((0,r.openBlock)(),(0,r.createElementBlock)("button",Pb,(0,r.toDisplayString)(e.$t("åŒæ­¥äº‘ç«¯")),1)):(0,r.createCommentVNode)("v-if",!0)])])])):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:3},[(0,r.createCommentVNode)(" æ²¡æœ‰å­˜æ¡£æ•°æ®ï¼šæ˜¾ç¤ºå¼€å§‹æ¸¸æˆ "),(0,r.createElementVNode)("div",Rb,[(0,r.createElementVNode)("div",$b,[t[21]||(t[21]=(0,r.createElementVNode)("div",{class:"empty-slot-icon"},"â˜ï¸",-1)),(0,r.createElementVNode)("span",Ob,(0,r.toDisplayString)(e.$t("å°šæœªå¼€å§‹ä¿®è¡Œ")),1),(0,r.createElementVNode)("p",Lb,(0,r.toDisplayString)(e.$t("å¼€å§‹æ‚¨çš„è”æœºä¿®ä»™ä¹‹æ—…ï¼Œå­˜æ¡£å°†è‡ªåŠ¨åŒæ­¥åˆ°äº‘ç«¯")),1),(0,r.createElementVNode)("button",{onClick:t[5]||(t[5]=e=>$(u.value,"å­˜æ¡£",!1)),class:"btn-start"},(0,r.toDisplayString)(e.$t("å¼€å§‹æ¸¸æˆ")),1)])])],2112)):((0,r.openBlock)(),(0,r.createElementBlock)("div",pb,[t[15]||(t[15]=(0,r.createElementVNode)("div",{class:"login-icon"},"ğŸ”",-1)),(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("éœ€è¦ç™»å½•")),1),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("è¯·å…ˆç™»å½•ä»¥ç®¡ç†è”æœºè§’è‰²å­˜æ¡£")),1),(0,r.createElementVNode)("button",{onClick:U,class:"btn-login"},(0,r.toDisplayString)(e.$t("ç™»å…¥é“ç±")),1)]))])],2112)):(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",Dv,[(0,r.createElementVNode)("div",Tv,[(0,r.createVNode)((0,r.unref)(sh),{size:30})]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("è¯·é€‰æ‹©å·¦ä¾§è§’è‰²æŸ¥çœ‹å­˜æ¡£è¯¦æƒ…")),1)]))]),(0,r.createCommentVNode)(" ç¬¬3è¡Œï¼šåº•éƒ¨ä¿¡æ¯æ ï¼ˆå¯é€‰ï¼‰ "),t[22]||(t[22]=(0,r.createElementVNode)("div",{class:"grid-footer-left"},[(0,r.createCommentVNode)(" é¢„ç•™åº•éƒ¨åŒºåŸŸ ")],-1)),t[23]||(t[23]=(0,r.createElementVNode)("div",{class:"grid-footer-right"},[(0,r.createCommentVNode)(" é¢„ç•™åº•éƒ¨åŒºåŸŸ ")],-1))])])],2112))],2),(0,r.createCommentVNode)(" è§’è‰²è¯¦æƒ…å¼¹çª— "),m.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:2,class:"modal-overlay",onClick:R},[(0,r.createElementVNode)("div",{class:"details-modal",onClick:t[6]||(t[6]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",Fb,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(p.value?.è§’è‰²?.åå­—)+" - "+(0,r.toDisplayString)(e.$t("è¯¦æƒ…")),1),(0,r.createElementVNode)("button",{onClick:R,class:"btn-close"},"Ã—")]),p.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",jb,[(0,r.createElementVNode)("div",Ub,[(0,r.createElementVNode)("div",qb,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)(e.$t("åŸºç¡€ä¿¡æ¯")),1),(0,r.createElementVNode)("div",Gb,[(0,r.createElementVNode)("div",Hb,[(0,r.createElementVNode)("span",Yb,(0,r.toDisplayString)(e.$t("é“å·")),1),(0,r.createElementVNode)("span",Wb,(0,r.toDisplayString)(p.value.è§’è‰².åå­—),1)]),(0,r.createElementVNode)("div",Xb,[(0,r.createElementVNode)("span",Jb,(0,r.toDisplayString)(e.$t("ä¸–ç•Œ")),1),(0,r.createElementVNode)("span",Kb,(0,r.toDisplayString)(W(p.value.è§’è‰².ä¸–ç•Œ)),1)]),(0,r.createElementVNode)("div",Qb,[(0,r.createElementVNode)("span",Zb,(0,r.toDisplayString)(e.$t("å¤©èµ„")),1),(0,r.createElementVNode)("span",ey,(0,r.toDisplayString)(W(p.value.è§’è‰².å¤©èµ„)),1)]),(0,r.createElementVNode)("div",ty,[(0,r.createElementVNode)("span",ny,(0,r.toDisplayString)(e.$t("å‡ºèº«")),1),(0,r.createElementVNode)("span",ay,(0,r.toDisplayString)(W(p.value.è§’è‰².å‡ºç”Ÿ)),1)]),(0,r.createElementVNode)("div",ry,[(0,r.createElementVNode)("span",oy,(0,r.toDisplayString)(e.$t("çµæ ¹")),1),(0,r.createElementVNode)("span",iy,(0,r.toDisplayString)(W(p.value.è§’è‰².çµæ ¹)),1)]),(0,r.createElementVNode)("div",sy,[(0,r.createElementVNode)("span",ly,(0,r.toDisplayString)(e.$t("æ¨¡å¼")),1),(0,r.createElementVNode)("span",cy,(0,r.toDisplayString)(p.value.æ¨¡å¼),1)])])]),(0,r.createElementVNode)("div",dy,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)(e.$t("å…ˆå¤©å…­å¸")),1),(0,r.createElementVNode)("div",uy,[p.value.è§’è‰².å…ˆå¤©å…­å¸?((0,r.openBlock)(),(0,r.createBlock)(rh,{key:0,stats:(a=p.value.è§’è‰².å…ˆå¤©å…­å¸,{root_bone:a["æ ¹éª¨"]||0,spirituality:a["çµæ€§"]||0,comprehension:a["æ‚Ÿæ€§"]||0,fortune:a["æ°”è¿"]||0,charm:a["é­…åŠ›"]||0,temperament:a["å¿ƒæ€§"]||0}),size:150,maxValue:10},null,8,["stats"])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createElementVNode)("div",my,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)(e.$t("å¤©èµ‹ç¥é€š")),1),(0,r.createElementVNode)("div",py,[p.value.è§’è‰².å¤©èµ‹?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",fy,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(p.value.è§’è‰².å¤©èµ‹,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:t,class:"talent-tag",title:Y(e)},(0,r.toDisplayString)(H(e)),9,gy))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("span",hy,(0,r.toDisplayString)(e.$t("æš‚æ— å¤©èµ‹")),1))])])])])):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0)],2);var a,o}}});var by=n(7470),yy={};yy.styleTagTransform=k(),yy.setAttributes=v(),yy.insert=g().bind(null,"head"),yy.domAPI=p(),yy.insertStyleElement=y(),u()(by.A,yy),by.A&&by.A.locals&&by.A.locals;const xy=(0,N.A)(vy,[["__scopeId","data-v-2e4cdf3e"]]),ky={key:0,class:"error-boundary"},wy={class:"error-container"},Ey={class:"error-message"},Ny={key:0,class:"error-details"},Sy={class:"error-actions"},Vy=(0,r.defineComponent)({__name:"ErrorBoundary",setup(e){const t=(0,a.useRouter)(),n=(0,r.ref)(!1),o=(0,r.ref)(""),i=(0,r.ref)(""),s=(0,r.ref)(!1);(0,r.onErrorCaptured)((e,t,a)=>(console.error("[é”™è¯¯è¾¹ç•Œ] æ•è·åˆ°é”™è¯¯:",e),console.error("[é”™è¯¯è¾¹ç•Œ] ç»„ä»¶ä¿¡æ¯:",a),n.value=!0,o.value=e.message||"æœªçŸ¥é”™è¯¯",i.value=`\né”™è¯¯: ${e.name}: ${e.message}\nå †æ ˆ: ${e.stack||"æ— å †æ ˆä¿¡æ¯"}\nç»„ä»¶: ${a}\n  `.trim(),!1));const l=()=>{n.value=!1,o.value="",i.value="",s.value=!1,t.go(0)},c=()=>{n.value=!1,t.back()},d=()=>{s.value=!s.value};return(e,t)=>n.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",ky,[(0,r.createElementVNode)("div",wy,[t[0]||(t[0]=(0,r.createElementVNode)("div",{class:"error-icon"},"âš ï¸",-1)),(0,r.createElementVNode)("h2",null,(0,r.toDisplayString)(e.$t("é“æ³•å—é˜»")),1),(0,r.createElementVNode)("p",Ey,(0,r.toDisplayString)(o.value),1),s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ny,[(0,r.createElementVNode)("pre",null,(0,r.toDisplayString)(i.value),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",Sy,[(0,r.createElementVNode)("button",{onClick:l,class:"btn-retry"},(0,r.toDisplayString)(e.$t("é‡è¯•")),1),(0,r.createElementVNode)("button",{onClick:c,class:"btn-back"},(0,r.toDisplayString)(e.$t("è¿”å›")),1),(0,r.createElementVNode)("button",{onClick:d,class:"btn-details"},(0,r.toDisplayString)(s.value?e.$t("éšè—è¯¦æƒ…"):e.$t("æŸ¥çœ‹è¯¦æƒ…")),1)])])])):(0,r.renderSlot)(e.$slots,"default",{key:1})}});var _y=n(5674),Cy={};Cy.styleTagTransform=k(),Cy.setAttributes=v(),Cy.insert=g().bind(null,"head"),Cy.domAPI=p(),Cy.insertStyleElement=y(),u()(_y.A,Cy),_y.A&&_y.A.locals&&_y.A.locals;const Ay=(0,N.A)(Vy,[["__scopeId","data-v-7ca07f60"]]);var Dy=n(5099);const Ty={class:"sect-migration"},By={class:"migration-header"},Iy={key:0,class:"migration-reasons"},zy={class:"migration-meta"},My={class:"meta-item"},Py={class:"value"},Ry={class:"meta-item"},$y={class:"value"},Oy={class:"meta-item"},Ly={class:"value"},Fy={class:"migration-actions"},jy=["disabled"],Uy=["disabled"],qy=(0,r.defineComponent)({__name:"SectMigrationModal",props:{reasons:{},fromVersion:{},toVersion:{}},setup(e){const t=e,n=(0,hd.useCharacterStore)(),a=(0,Iu.useGameStateStore)(),o=(0,T.useUIStore)(),i=(0,r.ref)(!1),s=(0,r.computed)(()=>t.toVersion??2),l=(0,r.computed)(()=>t.reasons?.length?t.reasons:["æ£€æµ‹åˆ°æ—§ç‰ˆå®—é—¨å­—æ®µ"]),c=(0,r.computed)(()=>{const e=a.sectMemberInfo?.å®—é—¨åç§°,t=a.sectSystem?.å½“å‰å®—é—¨??void 0;return e||t||"æœªåŠ å…¥å®—é—¨"}),d=(0,r.computed)(()=>{const e=a.sectSystem;return e?.å®—é—¨æ¡£æ¡ˆ?Object.keys(e.å®—é—¨æ¡£æ¡ˆ).length:a.worldInfo?.åŠ¿åŠ›ä¿¡æ¯?.length||0}),u=(0,r.computed)(()=>n.activeCharacterProfile?.æ¨¡å¼||"æœªçŸ¥"),m=async()=>{if(!i.value){i.value=!0;try{const e=a.getCurrentSaveData();if(!e)return void ne.o.error("æœªæ‰¾åˆ°å­˜æ¡£æ•°æ®ï¼Œæ— æ³•è¿ç§»");await(async e=>{const t=n.rootState.å½“å‰æ¿€æ´»å­˜æ¡£,a=n.activeCharacterProfile;if(!t||!a)return void ne.o.warning("æ— æ³•åˆ›å»ºå¤‡ä»½ï¼šæœªæ‰¾åˆ°æ¿€æ´»å­˜æ¡£");const r=`å®—é—¨è¿ç§»å¤‡ä»½-${(()=>{const e=new Date,t=e=>String(e).padStart(2,"0");return`${e.getFullYear()}${t(e.getMonth()+1)}${t(e.getDate())}-${t(e.getHours())}${t(e.getMinutes())}${t(e.getSeconds())}`})()}`;if("å•æœº"===a.æ¨¡å¼)return void await n.saveAsNewSlot(r);await Dy.dc(t.è§’è‰²ID,r,e);const o="sect_migration_backups",i={è§’è‰²ID:t.è§’è‰²ID,å­˜æ¡£æ§½ä½:r,æ—¶é—´:(new Date).toISOString()},s=JSON.parse(localStorage.getItem(o)||"[]");s.push(i),localStorage.setItem(o,JSON.stringify(s.slice(-20))),ne.o.success(`å·²åˆ›å»ºæœ¬åœ°å¤‡ä»½ï¼š${r}`)})(e);const t=(e=>{const t=(0,Zu.cloneDeep)(e),n=t.ä¸–ç•Œ?.ä¿¡æ¯??null,a=Array.isArray(n?.åŠ¿åŠ›ä¿¡æ¯)?n.åŠ¿åŠ›ä¿¡æ¯:[],r=nm((0,Zu.cloneDeep)(a));n?.åŠ¿åŠ›ä¿¡æ¯&&(n.åŠ¿åŠ›ä¿¡æ¯=r);const o=t.ç¤¾äº¤?.å®—é—¨??null,i="number"==typeof o?.ç‰ˆæœ¬?o.ç‰ˆæœ¬:0;return t.ç¤¾äº¤&&"object"==typeof t.ç¤¾äº¤||(t.ç¤¾äº¤={}),t.ç¤¾äº¤.å®—é—¨=((e,t,n)=>{const a=e.ç¤¾äº¤?.å®—é—¨??{},r={};t.forEach(e=>{e?.åç§°&&(r[e.åç§°]=e)});const o=a?.æˆå‘˜ä¿¡æ¯?.å®—é—¨åç§°??null,i=(e=>{const t={},n=e.ç¤¾äº¤?.å…³ç³»??{};return Object.entries(n).forEach(([e,n])=>{if(!n||"object"!=typeof n)return;const a=n.åŠ¿åŠ›å½’å±||n.å®—é—¨||n.åŠ¿åŠ›;if(!a)return;const r=n.åå­—||e;t[a]||(t[a]=[]),t[a].includes(r)||t[a].push(r)}),t})(e);return{...a,ç‰ˆæœ¬:2,å½“å‰å®—é—¨:a.å½“å‰å®—é—¨??o??null,å®—é—¨æ¡£æ¡ˆ:{...r,...a.å®—é—¨æ¡£æ¡ˆ||{}},å®—é—¨æˆå‘˜:a.å®—é—¨æˆå‘˜??i,å®—é—¨ä»»åŠ¡:a.å®—é—¨ä»»åŠ¡??{},å®—é—¨è—ç»é˜:a.å®—é—¨è—ç»é˜??{},å®—é—¨è´¡çŒ®å•†åº—:a.å®—é—¨è´¡çŒ®å•†åº—??{},è¿ç§»è®°å½•:{æ¥æºç‰ˆæœ¬:n,ç›®æ ‡ç‰ˆæœ¬:2,æ—¶é—´:(new Date).toISOString(),è¯´æ˜:"ç”±æ—§ç‰ˆå®—é—¨å­—æ®µè¿ç§»ç”Ÿæˆ"}}})(t,r,i),t})(e);a.loadFromSaveData(t),await n.saveCurrentGame(),ne.o.success("å®—é—¨å­˜æ¡£è¿ç§»å®Œæˆ"),o.hideDetailModal()}catch(e){ne.o.error(`å®—é—¨å­˜æ¡£è¿ç§»å¤±è´¥ï¼š${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{i.value=!1}}},p=()=>{o.hideDetailModal()};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Ty,[(0,r.createElementVNode)("div",By,[t[0]||(t[0]=(0,r.createElementVNode)("h4",null,"æ£€æµ‹åˆ°æ—§ç‰ˆå®—é—¨å­˜æ¡£",-1)),(0,r.createElementVNode)("p",null,"å°†æŠŠå®—é—¨æ•°æ®å‡çº§åˆ° V"+(0,r.toDisplayString)(s.value)+"ï¼Œåªå†™å…¥ V3 è·¯å¾„ï¼ˆä¸å†ä¿ç•™æ—§å­—æ®µï¼‰ã€‚",1)]),l.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Iy,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"reason-item"},[t[1]||(t[1]=(0,r.createElementVNode)("span",{class:"dot"},null,-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e),1)]))),128))])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",zy,[(0,r.createElementVNode)("div",My,[t[2]||(t[2]=(0,r.createElementVNode)("span",{class:"label"},"å½“å‰å®—é—¨",-1)),(0,r.createElementVNode)("span",Py,(0,r.toDisplayString)(c.value),1)]),(0,r.createElementVNode)("div",Ry,[t[3]||(t[3]=(0,r.createElementVNode)("span",{class:"label"},"åŠ¿åŠ›æ•°é‡",-1)),(0,r.createElementVNode)("span",$y,(0,r.toDisplayString)(d.value),1)]),(0,r.createElementVNode)("div",Oy,[t[4]||(t[4]=(0,r.createElementVNode)("span",{class:"label"},"å­˜æ¡£æ¨¡å¼",-1)),(0,r.createElementVNode)("span",Ly,(0,r.toDisplayString)(u.value),1)])]),(0,r.createElementVNode)("div",Fy,[(0,r.createElementVNode)("button",{class:"primary",disabled:i.value,onClick:m},(0,r.toDisplayString)(i.value?"æ­£åœ¨è¿ç§»...":"åˆ›å»ºå¤‡ä»½å¹¶è¿ç§»"),9,jy),(0,r.createElementVNode)("button",{class:"secondary",disabled:i.value,onClick:p}," ç¨åå†è¯´ ",8,Uy)]),t[5]||(t[5]=(0,r.createElementVNode)("p",{class:"migration-hint"}," è¿ç§»å‰ä¼šè‡ªåŠ¨å¤‡ä»½ï¼šå•æœºæ¨¡å¼ç”Ÿæˆæ–°å­˜æ¡£æ§½ï¼Œè”æœºæ¨¡å¼å†™å…¥æœ¬åœ°å¤‡ä»½è®°å½•ã€‚ ",-1))]))}});var Gy=n(5097),Hy={};Hy.styleTagTransform=k(),Hy.setAttributes=v(),Hy.insert=g().bind(null,"head"),Hy.domAPI=p(),Hy.insertStyleElement=y(),u()(Gy.A,Hy),Gy.A&&Gy.A.locals&&Gy.A.locals;const Yy=(0,N.A)(qy,[["__scopeId","data-v-84b88b2c"]]),Wy={class:"game-view"},Xy={class:"sidebar-wrapper"},Jy={width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Ky=["points"],Qy={class:"main-content"},Zy={key:0,class:"panel-overlay"},ex={class:"panel-header compact","aria-label":"åŠŸèƒ½é¢æ¿å¯¼èˆª"},tx=["title","aria-label"],nx={class:"panel-title-compact"},ax={class:"title-text"},rx={class:"panel-actions"},ox=["title","onClick","aria-label"],ix={class:"panel-content compact"},sx={key:2,class:"panel-overlay"},lx={class:"panel-header"},cx={class:"panel-title"},dx=["title"],ux={class:"panel-content"},mx={width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},px=["points"],fx={class:"sidebar-wrapper"},gx={class:"data-loading"},hx={class:"loading-content"},vx={class:"loading-title"},bx={class:"loading-message"},yx={class:"loading-steps"},xx={class:"loading-step"},kx={class:"step-text"},wx={class:"loading-step"},Ex={class:"step-text"},Nx={class:"loading-step active"},Sx={class:"step-text"},Vx={class:"loading-hint"},_x=(0,r.defineComponent)({__name:"GameView",setup(e){const t=(0,hd.useCharacterStore)(),n=(0,Iu.useGameStateStore)(),o=(0,T.useUIStore)(),i=(0,a.useRouter)(),s=(0,a.useRoute)(),l=(0,r.ref)(!1),c=(0,r.ref)(!1),d=(0,r.ref)(!1),u=()=>{d.value=window.innerWidth<=768,d.value&&(l.value=!0,c.value=!0)},m=()=>{l.value=!0,c.value=!0},p=(0,r.ref)(null),f=new Set(["Inventory","CharacterDetails","Memory","Relationships","Cultivation","Techniques","ThousandDao","Settings","Save","WorldMap","Quests","Sect","SectOverview","SectMembers","SectMissions","SectLibrary","SectContribution","GameVariables","Prompts","APIManagement"]),g=new Set(["Settings","Prompts","APIManagement"]),h=new Set(["Memory","Relationships","Cultivation","Techniques","ThousandDao","Settings","Save","Sect","SectOverview","SectMembers","SectMissions","SectLibrary","SectContribution"]),v={Inventory:{title:"èƒŒåŒ…ç‰©å“",icon:zu},CharacterDetails:{title:"äººç‰©è¯¦æƒ…",icon:_},Memory:{title:"è®°å¿†ä¸­å¿ƒ",icon:Mu},Relationships:{title:"äººç‰©å…³ç³»",icon:C},Cultivation:{title:"ä¿®ç‚¼ç³»ç»Ÿ",icon:Pu},Techniques:{title:"ä¿®ç‚¼åŠŸæ³•",icon:Ru},ThousandDao:{title:"ä¸‰åƒå¤§é“",icon:$u},Settings:{title:"ç³»ç»Ÿè®¾ç½®",icon:ta.A},Save:{title:"ä¿å­˜æ¸¸æˆ",icon:Ou.A},WorldMap:{title:"ä¸–ç•Œåœ°å›¾",icon:Lu},Quests:{title:"ä»»åŠ¡ç³»ç»Ÿ",icon:$u},Sect:{title:"å®—é—¨åŠ¿åŠ›",icon:Fu},SectOverview:{title:"å®—é—¨æ¦‚è§ˆ",icon:Fu},SectMembers:{title:"å®—é—¨æˆå‘˜",icon:C},SectMissions:{title:"å®—é—¨ä»»åŠ¡",icon:$u},SectLibrary:{title:"å®—é—¨è—ç»",icon:Pu},SectContribution:{title:"è´¡çŒ®å…‘æ¢",icon:ju},GameVariables:{title:"æ¸¸æˆå˜é‡",icon:Uu},Prompts:{title:"æç¤ºè¯ç®¡ç†",icon:qu},APIManagement:{title:"APIç®¡ç†",icon:Gu.A}},b=(0,r.computed)(()=>f.has(String(s.name))),y=(0,r.computed)(()=>{const e=String(s.name),t=v[e];return t?.title||"åŠŸèƒ½é¢æ¿"}),x=(0,r.computed)(()=>{const e=String(s.name),t=v[e];return t?.icon||Hu}),k=()=>{"GameMain"!==s.name&&i.push("/game")},w={Memory:[{key:"refresh",title:"åˆ·æ–°",icon:Yu.A,action:"refresh"},{key:"test",title:"æµ‹è¯•è½¬åŒ–",icon:Wu.A,action:"test"},{key:"clear",title:"æ¸…ç†",icon:ea.A,action:"clear"}],Quests:[{key:"refresh",title:"åˆ·æ–°",icon:Yu.A,action:"refresh"}],Save:[{key:"refresh",title:"åˆ·æ–°",icon:Yu.A,action:"refresh"},{key:"save",title:"å¿«é€Ÿå­˜æ¡£",icon:Ou.A,action:"save"}],ThousandDao:[{key:"refresh",title:"åˆ·æ–°",icon:Yu.A,action:"refresh"}],GameVariables:[{key:"refresh",title:"åˆ·æ–°æ•°æ®",icon:Yu.A,action:"refresh"},{key:"export",title:"å¯¼å‡ºJSON",icon:Ou.A,action:"export"},{key:"stats",title:"æ•°æ®ç»Ÿè®¡",icon:Xu,action:"stats"}]},E=(0,r.computed)(()=>{const e=String(s.name);return(w[e]||[]).map(e=>({key:e.key,title:e.title,icon:e.icon,onClick:()=>Qu.emit(e.action)}))}),N=(0,r.computed)(()=>{const e=String(s.name);return!!g.has(e)||!!t.activeCharacterProfile});return(0,r.onMounted)(async()=>{(()=>{try{const e=localStorage.getItem("dad_game_settings");if(e){const t=JSON.parse(e);if(t.uiScale){const e=t.uiScale/100;document.documentElement.style.setProperty("--ui-scale",e.toString())}if(t.fontSize){const e={small:"0.875rem",medium:"1rem",large:"1.125rem"}[t.fontSize]||"1rem";document.documentElement.style.setProperty("--base-font-size",e)}if(t.theme){let e=t.theme;"auto"===t.theme&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-theme",e)}}}catch(e){console.error("[GameView] åº”ç”¨è®¾ç½®å¤±è´¥:",e)}})(),u(),window.addEventListener("resize",u)}),(0,r.onBeforeUnmount)(()=>{window.removeEventListener("resize",u)}),(0,r.watch)(()=>[n.isGameLoaded,t.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID,t.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.å­˜æ¡£æ§½ä½],([e])=>{e?(()=>{if(!n.isGameLoaded)return;const e=(()=>{const e=t.rootState.å½“å‰æ¿€æ´»å­˜æ¡£;return e?`${e.è§’è‰²ID}::${e.å­˜æ¡£æ§½ä½}`:null})();if(!e||p.value===e)return;const a=(e=>{const t={needed:!1,fromVersion:0,toVersion:2,reasons:[]};if(!e)return t;const n=e.ç¤¾äº¤?.å®—é—¨??null,a=null!==n&&"object"==typeof n&&0===Object.keys(n).length,r=!!n?.æˆå‘˜ä¿¡æ¯?.å®—é—¨åç§°,o=null!==n&&!a&&2!==n.ç‰ˆæœ¬;if((!n||a)&&!r)return t;const i="number"==typeof n?.ç‰ˆæœ¬?n.ç‰ˆæœ¬:0;return t.fromVersion=i,r&&!n?.å½“å‰å®—é—¨&&t.reasons.push("ç©å®¶å®—é—¨ä¿¡æ¯æœªåŒæ­¥åˆ°å®—é—¨ç³»ç»Ÿ"),o&&t.reasons.push("å®—é—¨ç³»ç»Ÿç‰ˆæœ¬ä¸åŒ¹é…"),t.needed=t.reasons.length>0,t})(n.getCurrentSaveData());a.needed&&(p.value=e,o.showDetailModal({title:"å®—é—¨å­˜æ¡£è¿ç§»",component:Yy,props:{reasons:a.reasons,fromVersion:a.fromVersion,toVersion:a.toVersion}}))})():p.value=null},{immediate:!0}),(0,r.watch)(b,e=>{if(e){const e=String(s.name);d.value&&(l.value=!0),h.has(e)&&(c.value=!0)}}),(e,t)=>{const n=(0,r.resolveComponent)("router-view");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Wy,[(0,r.createCommentVNode)(" é¡¶éƒ¨æ  "),(0,r.createVNode)(km),(0,r.createCommentVNode)(" ä¸»è¦å†…å®¹åŒºåŸŸ "),N.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)(["game-content",{"panel-mode":b.value}])},[(0,r.createCommentVNode)(" å·¦ä¾§åŠŸèƒ½æ  "),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["left-sidebar",{collapsed:l.value}])},[(0,r.createElementVNode)("div",Xy,[(0,r.createVNode)(sf)])],2),(0,r.createCommentVNode)(" Mobile Overlay "),!d.value||l.value&&c.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"mobile-sidebar-overlay",onClick:m})),(0,r.createCommentVNode)(" å·¦ä¾§æ”¶ç¼©æŒ‰é’® "),(0,r.withDirectives)((0,r.createElementVNode)("button",{class:"collapse-btn left",onClick:t[0]||(t[0]=e=>l.value=!l.value)},[((0,r.openBlock)(),(0,r.createElementBlock)("svg",Jy,[(0,r.createElementVNode)("polyline",{points:l.value?"9,18 15,12 9,6":"15,18 9,12 15,6"},null,8,Ky)]))],512),[[r.vShow,!b.value]]),(0,r.createCommentVNode)(" ä¸»æ¸¸æˆåŒºåŸŸ "),(0,r.createElementVNode)("div",Qy,[(0,r.createCommentVNode)(" åŠŸèƒ½é¢æ¿è¦†ç›–å±‚ "),b.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Zy,[(0,r.createElementVNode)("div",ex,[(0,r.createElementVNode)("button",{class:"back-btn",onClick:k,title:e.$t("è¿”å›"),"aria-label":e.$t("è¿”å›")},t[3]||(t[3]=[(0,r.createElementVNode)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("polyline",{points:"15 18 9 12 15 6"})],-1)]),8,tx),(0,r.createElementVNode)("div",nx,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(x.value),{size:16,class:"panel-title-icon"})),(0,r.createElementVNode)("span",ax,(0,r.toDisplayString)(y.value),1)]),(0,r.createElementVNode)("div",rx,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(E.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.key,class:"action-btn-compact",title:e.title,onClick:e.onClick,"aria-label":e.title},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:14}))],8,ox))),128))])]),(0,r.createElementVNode)("div",ix,[(0,r.createVNode)(n,null,{default:(0,r.withCtx)(({Component:e})=>[((0,r.openBlock)(),(0,r.createBlock)(r.KeepAlive,null,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e)))],1024))]),_:1})])])):(0,r.unref)(o).showCharacterManagement?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" æ­£å¸¸è·¯ç”±è§†å›¾ "),(0,r.createVNode)(n,null,{default:(0,r.withCtx)(({Component:e})=>[((0,r.openBlock)(),(0,r.createBlock)(r.KeepAlive,null,[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e)))],1024))]),_:1})],2112)),(0,r.createCommentVNode)(" è§’è‰²ç®¡ç†é¢æ¿ "),(0,r.unref)(o).showCharacterManagement?((0,r.openBlock)(),(0,r.createElementBlock)("div",sx,[(0,r.createElementVNode)("div",lx,[(0,r.createElementVNode)("h2",cx,[(0,r.createVNode)((0,r.unref)(Ju),{size:20,class:"panel-title-icon"}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.$t("è§’è‰²ç®¡ç†")),1)]),(0,r.createElementVNode)("button",{class:"panel-close-btn",onClick:t[1]||(t[1]=e=>(0,r.unref)(o).closeCharacterManagement()),title:e.$t("å…³é—­")},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})],8,dx)]),(0,r.createElementVNode)("div",ux,[(0,r.createVNode)(xy,{onBack:(0,r.unref)(o).closeCharacterManagement},null,8,["onBack"])])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" å³ä¾§æ”¶ç¼©æŒ‰é’® "),(0,r.withDirectives)((0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["collapse-btn right",{collapsed:c.value}]),onClick:t[2]||(t[2]=e=>c.value=!c.value)},[((0,r.openBlock)(),(0,r.createElementBlock)("svg",mx,[(0,r.createElementVNode)("polyline",{points:c.value?"15,18 9,12 15,6":"9,18 15,12 9,6"},null,8,px)]))],2),[[r.vShow,!b.value]]),(0,r.createCommentVNode)(" å³ä¾§åŒºåŸŸ: è§’è‰²ä¿¡æ¯æ  "),(0,r.withDirectives)((0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["right-panel-area",{collapsed:c.value}])},[(0,r.createElementVNode)("div",fx,[(0,r.createVNode)(Ay,null,{default:(0,r.withCtx)(()=>[(0,r.createVNode)(Gg)]),_:1})])],2),[[r.vShow,!b.value]])],2)):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" æ•°æ®æœªå°±ç»ªæ—¶çš„æç¤º "),(0,r.createElementVNode)("div",gx,[(0,r.createElementVNode)("div",hx,[t[7]||(t[7]=(0,r.createElementVNode)("div",{class:"loading-spinner-wrapper"},[(0,r.createElementVNode)("div",{class:"loading-spinner"}),(0,r.createElementVNode)("div",{class:"spinner-glow"})],-1)),(0,r.createElementVNode)("h2",vx,(0,r.toDisplayString)(e.$t("é“æ³•è‡ªç„¶ï¼Œå¤©åœ°åˆå¼€")),1),(0,r.createElementVNode)("p",bx,(0,r.toDisplayString)(e.$t("æ­£åœ¨åŠ è½½ä¿®ä»™ä¸–ç•Œ...")),1),(0,r.createElementVNode)("div",yx,[(0,r.createElementVNode)("div",xx,[t[4]||(t[4]=(0,r.createElementVNode)("span",{class:"step-icon"},"âœ“",-1)),(0,r.createElementVNode)("span",kx,(0,r.toDisplayString)(e.$t("è¿æ¥å¤©é“")),1)]),(0,r.createElementVNode)("div",wx,[t[5]||(t[5]=(0,r.createElementVNode)("span",{class:"step-icon"},"âœ“",-1)),(0,r.createElementVNode)("span",Ex,(0,r.toDisplayString)(e.$t("åŠ è½½è§’è‰²æ•°æ®")),1)]),(0,r.createElementVNode)("div",Nx,[t[6]||(t[6]=(0,r.createElementVNode)("span",{class:"step-icon"},"â—‹",-1)),(0,r.createElementVNode)("span",Sx,(0,r.toDisplayString)(e.$t("è¯»å–å­˜æ¡£ä¿¡æ¯")),1)])]),(0,r.createElementVNode)("p",Vx,(0,r.toDisplayString)(e.$t("æç¤ºï¼šè¯·åœ¨å·¦ä¾§èœå•é€‰æ‹©è§’è‰²å¹¶åŠ è½½å­˜æ¡£")),1)])])],2112))])}}});var Cx=n(2836),Ax={};Ax.styleTagTransform=k(),Ax.setAttributes=v(),Ax.insert=g().bind(null,"head"),Ax.domAPI=p(),Ax.insertStyleElement=y(),u()(Cx.A,Ax),Cx.A&&Cx.A.locals&&Cx.A.locals;const Dx=(0,N.A)(_x,[["__scopeId","data-v-14142f8e"]]),Tx={class:"account-container"},Bx={class:"account-panel"},Ix={class:"header"},zx={class:"title-row"},Mx={key:0,class:"backend-locked"},Px={key:0,class:"loading"},Rx={key:1,class:"sections"},$x=["open"],Ox={class:"section-title"},Lx={class:"section-body"},Fx={key:0,class:"info-list"},jx={class:"info-label"},Ux={class:"info-value"},qx={key:1,class:"info-empty"},Gx=(0,r.defineComponent)({__name:"AccountCenter",setup(e){const t=(0,a.useRouter)(),n=(0,r.ref)((0,B.isBackendConfigured)()),o=(0,r.ref)(!1),i=(0,r.ref)(null),s=(0,r.computed)(()=>!!i.value),l=e=>{if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()},c=(0,r.computed)(()=>[{title:"è´¦å·ä¿¡æ¯",open:!0,items:i.value?[{label:"é“å·",value:i.value.user_name},{label:"è´¦å·ID",value:String(i.value.id)},{label:"æ³¨å†Œæ—¶é—´",value:l(i.value.created_at)}]:[],emptyText:"æœªè·å–åˆ°è´¦å·ä¿¡æ¯"}]),d=()=>{t.push("/")},u=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("username"),i.value=null,ne.o.info("å·²é€€å‡ºç™»å½•"),t.push("/login")};return(0,r.onMounted)(async()=>{if(n.value)if(localStorage.getItem("access_token")){o.value=!0;try{i.value=await I.Em.get("/api/v1/auth/me")}catch(e){i.value=null,t.push("/login")}finally{o.value=!1}}else t.push("/login")}),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Tx,[(0,r.createVNode)(S),(0,r.createElementVNode)("div",Bx,[(0,r.createElementVNode)("div",Ix,[(0,r.createElementVNode)("div",zx,[t[0]||(t[0]=(0,r.createElementVNode)("h2",{class:"title"},"è´¦å·ä¸­å¿ƒ",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["status",{ok:s.value,warn:!s.value}])},(0,r.toDisplayString)(s.value?"å·²ç™»å½•":"æœªç™»å½•"),3)]),t[1]||(t[1]=(0,r.createElementVNode)("p",{class:"subtitle"},"é›†ä¸­ç®¡ç†è´¦å·ä¿¡æ¯",-1))]),n.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Px,"åŠ è½½ä¸­â€¦")):((0,r.openBlock)(),(0,r.createElementBlock)("div",Rx,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("details",{key:e.title,class:"section",open:e.open},[(0,r.createElementVNode)("summary",Ox,(0,r.toDisplayString)(e.title),1),(0,r.createElementVNode)("div",Lx,[e.items.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Fx,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.items,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.label,class:"info-row"},[(0,r.createElementVNode)("span",jx,(0,r.toDisplayString)(e.label),1),(0,r.createElementVNode)("span",Ux,(0,r.toDisplayString)(e.value),1)]))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",qx,(0,r.toDisplayString)(e.emptyText||"æš‚æ— ä¿¡æ¯"),1))])],8,$x))),128))])),(0,r.createElementVNode)("div",{class:"actions"},[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:d},"è¿”å›"),(0,r.createElementVNode)("button",{class:"btn danger",onClick:u},"é€€å‡ºç™»å½•")])],64)):((0,r.openBlock)(),(0,r.createElementBlock)("div",Mx,[t[2]||(t[2]=(0,r.createElementVNode)("p",null,"æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œè´¦å·ä¸­å¿ƒä¸å¯ç”¨ã€‚",-1)),(0,r.createElementVNode)("div",{class:"actions"},[(0,r.createElementVNode)("button",{class:"btn btn-secondary",onClick:d},"è¿”å›")])]))])]))}});var Hx=n(22),Yx={};Yx.styleTagTransform=k(),Yx.setAttributes=v(),Yx.insert=g().bind(null,"head"),Yx.domAPI=p(),Yx.insertStyleElement=y(),u()(Hx.A,Yx),Hx.A&&Hx.A.locals&&Hx.A.locals;const Wx=(0,N.A)(Gx,[["__scopeId","data-v-5ebbff06"]]),Xx=(0,V.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Jx=(0,V.A)("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]),Kx=(0,V.A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var Qx=n(5517),Zx=n(8381);const ek=(0,V.A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),tk=(0,V.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var nk=n(3310);const ak=new class{listeners=new Map;on(e,t){this.listeners.has(e)||this.listeners.set(e,new Set),this.listeners.get(e).add(t)}off(e,t){this.listeners.get(e)?.delete(t)}async emit(e,t){const n=Array.from(this.listeners.get(e)||[]);for(const e of n)await e(t)}};function rk(e,t=!0){return ak.emit("send",{text:e,focus:t})}class ok{static instance=null;undoActions=[];storageKey="dao_undo_actions";constructor(){this.loadUndoHistoryFromStorage()}static getInstance(){return this.instance||(this.instance=new ok),this.instance}getEquipmentSlotItemId(e){if(!e)return null;if("string"==typeof e)return e;if("object"==typeof e&&null!==e&&"ç‰©å“ID"in e){const t=e.ç‰©å“ID;return"string"==typeof t?t:null}return null}ensureEquipmentSlots(e){const t={è£…å¤‡1:null,è£…å¤‡2:null,è£…å¤‡3:null,è£…å¤‡4:null,è£…å¤‡5:null,è£…å¤‡6:null},n=e;n.è§’è‰²||(n.è§’è‰²={});const a=n.è§’è‰².è£…å¤‡??t,r={...t};for(let e=1;e<=6;e++){const t=`è£…å¤‡${e}`;r[t]=this.getEquipmentSlotItemId(a?.[t])??null}return n.è§’è‰².è£…å¤‡=r,r}ensureRoleBackpack(e){const t=e;return t.è§’è‰²||(t.è§’è‰²={}),t.è§’è‰².èƒŒåŒ…||(t.è§’è‰².èƒŒåŒ…={ç‰©å“:{},çµçŸ³:{ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0}}),t.è§’è‰².èƒŒåŒ….ç‰©å“||(t.è§’è‰².èƒŒåŒ….ç‰©å“={}),t.è§’è‰².èƒŒåŒ….çµçŸ³||(t.è§’è‰².èƒŒåŒ….çµçŸ³={ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0}),t.è§’è‰².èƒŒåŒ…}ensureRoleCultivation(e){const t=e;return t.è§’è‰²||(t.è§’è‰²={}),t.è§’è‰².ä¿®ç‚¼||(t.è§’è‰².ä¿®ç‚¼={ä¿®ç‚¼åŠŸæ³•:null,ä¿®ç‚¼çŠ¶æ€:{æ¨¡å¼:"æœªä¿®ç‚¼"}}),t.è§’è‰².ä¿®ç‚¼}async equipItem(e){const t=(0,nk.useActionQueueStore)();try{const a=(0,Iu.useGameStateStore)(),r=a.toSaveData();if(!r)return ne.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨ï¼Œæ— æ³•è£…å¤‡"),!1;const o=this.ensureEquipmentSlots(r),i=this.ensureRoleBackpack(r).ç‰©å“;if(!i||"object"!=typeof i)return ne.o.error("èƒŒåŒ…æ•°æ®å¼‚å¸¸"),!1;const s=i[e.ç‰©å“ID];if(s&&!0===s.å·²è£…å¤‡)return ne.o.info(`ã€Š${e.åç§°}ã€‹å·²ç»è£…å¤‡åœ¨èº«ä¸Šäº†`),!1;this.removeConflictingActions(e.ç‰©å“ID,"unequip");let l=null,c=null;for(let e=1;e<=6;e++){const t=`è£…å¤‡${e}`,n=o[t];if(!n||null===n){l=t;break}}if(!l){l="è£…å¤‡1";const e=o[l];e&&(c=i[e]||null,c&&(i[e]={...c,å·²è£…å¤‡:!1}))}o[l]=e.ç‰©å“ID,s&&(i[e.ç‰©å“ID]={...s,å·²è£…å¤‡:!0}),console.log("è£…å¤‡æ“ä½œå®Œæˆ:",{æ§½ä½:l,ç‰©å“:e,è£…å¤‡æ çŠ¶æ€:o});const{applyEquipmentBonus:d}=await Promise.resolve().then(n.bind(n,651));d(r,e.ç‰©å“ID),a.loadFromSaveData(r),await a.saveGame();const u={type:"equip",itemId:e.ç‰©å“ID,itemName:e.åç§°,restoreData:{originalSlot:null,replacedItem:c}};return this.undoActions.push(u),this.saveUndoHistoryToStorage(),t.addAction({type:"equip",itemName:e.åç§°,itemType:e.ç±»å‹,description:c?`è£…å¤‡äº†ã€Š${e.åç§°}ã€‹ï¼Œæ›¿æ¢äº†ã€Š${c.åç§°}ã€‹`:`è£…å¤‡äº†ã€Š${e.åç§°}ã€‹`}),!0}catch(e){return console.error("è£…å¤‡ç‰©å“å¤±è´¥:",e),ne.o.error("è£…å¤‡å¤±è´¥"),!1}}async unequipItem(e){const t=(0,nk.useActionQueueStore)();try{const a=(0,Iu.useGameStateStore)(),r=a.toSaveData();if(!r)return ne.o.error("è£…å¤‡æ æ•°æ®ä¸å­˜åœ¨"),!1;const o=this.ensureEquipmentSlots(r),i=this.ensureRoleBackpack(r).ç‰©å“;if(!i||"object"!=typeof i)return ne.o.error("èƒŒåŒ…æ•°æ®å¼‚å¸¸"),!1;const s=i[e.ç‰©å“ID];if(!s||!0!==s.å·²è£…å¤‡){ne.o.info(`ã€Š${e.åç§°}ã€‹æœªè£…å¤‡ï¼Œæ— æ³•å¸ä¸‹`);let t=!1;for(let n=1;n<=6;n++){const a=`è£…å¤‡${n}`;o[a]===e.ç‰©å“ID&&(o[a]=null,t=!0)}return t&&(a.loadFromSaveData(r),await a.saveGame()),!1}this.removeConflictingActions(e.ç‰©å“ID,"equip");let l=null;for(let t=1;t<=6;t++){const n=`è£…å¤‡${t}`;if(o[n]===e.ç‰©å“ID){l=n;break}}if(!l){ne.o.error("è£…å¤‡æ ä¸­æœªæ‰¾åˆ°è¯¥è£…å¤‡ï¼Œæ•°æ®å¯èƒ½ä¸ä¸€è‡´");const t=this.ensureRoleBackpack(r);return t?.ç‰©å“?.[e.ç‰©å“ID]&&(t.ç‰©å“[e.ç‰©å“ID].å·²è£…å¤‡=!1),a.loadFromSaveData(r),await a.saveGame(),!0}o[l]=null,s?(i[e.ç‰©å“ID]={...s,å·²è£…å¤‡:!1},console.log("å¸ä¸‹è£…å¤‡å®Œæˆ:",{ç‰©å“:e.åç§°,ç‰©å“ID:e.ç‰©å“ID,æ¸…ç©ºæ§½ä½:l,å·²è£…å¤‡çŠ¶æ€:!1})):console.warn("èƒŒåŒ…ä¸­æœªæ‰¾åˆ°ç‰©å“:",e.ç‰©å“ID);const{removeEquipmentBonus:c}=await Promise.resolve().then(n.bind(n,651));c(r,e.ç‰©å“ID),a.loadFromSaveData(r),await a.saveGame();const d={type:"unequip",itemId:e.ç‰©å“ID,itemName:e.åç§°,restoreData:{originalSlot:l}};return this.undoActions.push(d),this.saveUndoHistoryToStorage(),t.addAction({type:"unequip",itemName:e.åç§°,itemType:e.ç±»å‹,description:`å¸ä¸‹äº†ã€Š${e.åç§°}ã€‹`}),!0}catch(e){return console.error("å¸ä¸‹è£…å¤‡å¤±è´¥:",e),ne.o.error("å¸ä¸‹å¤±è´¥"),!1}}async useItem(e,t=1){const n=(0,nk.useActionQueueStore)();try{const a=(0,Iu.useGameStateStore)(),r=a.toSaveData();if(!r)return ne.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨"),!1;const o=this.ensureRoleBackpack(r),i=o?.ç‰©å“?.[e.ç‰©å“ID];if(!i||i.æ•°é‡<t)return ne.o.error("ç‰©å“æ•°é‡ä¸è¶³"),!1;const s=i.æ•°é‡,l=JSON.parse(JSON.stringify(i));i.æ•°é‡===t?delete o.ç‰©å“[e.ç‰©å“ID]:i.æ•°é‡-=t,a.updateInventory({ç‰©å“:o.ç‰©å“}),await a.saveGame();const c={type:"use",itemId:e.ç‰©å“ID,itemName:e.åç§°,quantity:t,restoreData:{originalQuantity:s},itemData:l};this.undoActions.push(c),this.saveUndoHistoryToStorage();const d=["ä¸¹è¯","ææ–™","å…¶ä»–"].includes(e.ç±»å‹)&&"ä½¿ç”¨æ•ˆæœ"in e?e.ä½¿ç”¨æ•ˆæœ:e.æè¿°||"æ— ç‰¹æ®Šæ•ˆæœ";return n.addAction({type:"use",itemName:e.åç§°,itemType:e.ç±»å‹,description:`ä½¿ç”¨äº† ${t} ä¸ªã€Š${e.åç§°}ã€‹ï¼ˆæ•ˆæœï¼š${d}ï¼‰`}),!0}catch(e){return console.error("ä½¿ç”¨ç‰©å“å¤±è´¥:",e),ne.o.error("ä½¿ç”¨å¤±è´¥"),!1}}async cultivateItem(e){const t=(0,nk.useActionQueueStore)();try{const n=(0,Iu.useGameStateStore)(),a=n.toSaveData();if(!a)return ne.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨ï¼Œæ— æ³•ä¿®ç‚¼åŠŸæ³•"),!1;if("åŠŸæ³•"!==e.ç±»å‹)return ne.o.error("åªèƒ½ä¿®ç‚¼åŠŸæ³•ç±»ç‰©å“"),!1;const r=this.ensureRoleBackpack(a).ç‰©å“;if(!r||"object"!=typeof r)return ne.o.error("èƒŒåŒ…æ•°æ®å¼‚å¸¸"),!1;let o=null;const i=this.ensureRoleCultivation(a),s=i.ä¿®ç‚¼åŠŸæ³•;if(s&&s.ç‰©å“ID!==e.ç‰©å“ID){o={...s};const e=s.ç‰©å“ID,t=r[e];t&&"åŠŸæ³•"===t.ç±»å‹&&(r[e]={...t,å·²è£…å¤‡:!1,ä¿®ç‚¼ä¸­:!1})}const l=r[e.ç‰©å“ID];if(!l||"åŠŸæ³•"!==l.ç±»å‹)return ne.o.error("ç‰©å“ä¸æ˜¯åŠŸæ³•ç±»å‹"),!1;i.ä¿®ç‚¼åŠŸæ³•={ç‰©å“ID:l.ç‰©å“ID,åç§°:l.åç§°},r[e.ç‰©å“ID]={...l,å·²è£…å¤‡:!0,ä¿®ç‚¼ä¸­:!0},n.loadFromSaveData(a),await n.saveGame();const c={type:"cultivate",itemId:e.ç‰©å“ID,itemName:e.åç§°,restoreData:{originalCultivationState:{previousTechnique:o,wasInInventory:!0}}};return this.undoActions.push(c),this.saveUndoHistoryToStorage(),t.addAction({type:"cultivate",itemName:e.åç§°,itemType:e.ç±»å‹,description:o?`å¼€å§‹ä¿®ç‚¼ã€Š${e.åç§°}ã€‹åŠŸæ³•ï¼Œåœæ­¢ä¿®ç‚¼ã€Š${o.åç§°}ã€‹`:`å¼€å§‹ä¿®ç‚¼ã€Š${e.åç§°}ã€‹åŠŸæ³•`}),!0}catch(e){return console.error("ä¿®ç‚¼åŠŸæ³•å¤±è´¥:",e),ne.o.error("ä¿®ç‚¼åŠŸæ³•å¤±è´¥"),!1}}async stopCultivation(e){const t=(0,nk.useActionQueueStore)();try{const n=(0,Iu.useGameStateStore)(),a=n.toSaveData();if(!a)return ne.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨"),!1;const r=this.ensureRoleCultivation(a);if(!r?.ä¿®ç‚¼åŠŸæ³•)return ne.o.error("å½“å‰æ²¡æœ‰æ­£åœ¨ä¿®ç‚¼çš„åŠŸæ³•"),!1;const o=r.ä¿®ç‚¼åŠŸæ³•,i=o.ç‰©å“ID;if(o.åç§°!==e.åç§°)return ne.o.error("æ“ä½œçš„åŠŸæ³•ä¸å½“å‰ä¿®ç‚¼çš„åŠŸæ³•ä¸ç¬¦"),!1;const s=this.ensureRoleBackpack(a).ç‰©å“;if(!s||"object"!=typeof s)return ne.o.error("èƒŒåŒ…æ•°æ®å¼‚å¸¸"),!1;const l=s[i];r.ä¿®ç‚¼åŠŸæ³•=null,l&&"åŠŸæ³•"===l.ç±»å‹&&(s[i]={...l,å·²è£…å¤‡:!1,ä¿®ç‚¼ä¸­:!1}),n.loadFromSaveData(a),await n.saveGame();const c={type:"cultivate",itemId:e.ç‰©å“ID,itemName:e.åç§°,restoreData:{originalCultivationState:{previousTechnique:o?{...o}:null,wasInInventory:!1}}};return this.undoActions.push(c),this.saveUndoHistoryToStorage(),t.addAction({type:"stop_cultivation",itemName:e.åç§°,itemType:e.ç±»å‹,description:`åœæ­¢ä¿®ç‚¼ã€Š${e.åç§°}ã€‹åŠŸæ³•`}),!0}catch(e){return console.error("åœæ­¢ä¿®ç‚¼å¤±è´¥:",e),ne.o.error("åœæ­¢ä¿®ç‚¼å¤±è´¥"),!1}}async undoLastAction(){if(0===this.undoActions.length)return ne.o.info("æœªæ‰¾åˆ°å¯æ’¤å›çš„åŠ¨ä½œè®°å½•ï¼Œå¯èƒ½å·²æ¸…ç©ºæˆ–åˆ·æ–°åä¸¢å¤±"),!1;const e=this.undoActions.pop();this.saveUndoHistoryToStorage();const t=(0,nk.useActionQueueStore)();try{const n=(0,Iu.useGameStateStore)().toSaveData();if(!n)return ne.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨"),!1;switch(e.type){case"equip":await this.undoEquip(e,n);break;case"unequip":await this.undoUnequip(e,n);break;case"use":await this.undoUse(e,n);break;case"cultivate":await this.undoCultivate(e,n)}const a=t.pendingActions;for(let n=a.length-1;n>=0;n--)if(a[n].itemName===e.itemName&&a[n].type===e.type){t.removeAction(a[n].id);break}return!0}catch(e){return console.error("æ’¤å›åŠ¨ä½œå¤±è´¥:",e),ne.o.error("æ’¤å›å¤±è´¥"),!1}}async undoByItemName(e,t){if(0===this.undoActions.length)return ne.o.info("æœªæ‰¾åˆ°å¯æ’¤å›çš„åŠ¨ä½œè®°å½•ï¼Œå¯èƒ½å·²æ¸…ç©ºæˆ–åˆ·æ–°åä¸¢å¤±"),!1;let n=-1;for(let a=this.undoActions.length-1;a>=0;a--){const r=this.undoActions[a];if(r.type===e&&r.itemName===t){n=a;break}}if(-1===n)return ne.o.info("æœªæ‰¾åˆ°è¯¥åŠ¨ä½œçš„æ’¤å›è®°å½•"),!1;const a=this.undoActions.splice(n,1)[0];this.saveUndoHistoryToStorage();try{const n=(0,Iu.useGameStateStore)(),r=n.toSaveData();if(!r)return ne.o.error("å½“å‰å­˜æ¡£ä¸å­˜åœ¨ï¼Œæ— æ³•æ’¤å›"),!1;switch(a.type){case"equip":await this.undoEquip(a,r);break;case"unequip":await this.undoUnequip(a,r);break;case"use":await this.undoUse(a,r);break;case"cultivate":await this.undoCultivate(a,r)}const o=(0,nk.useActionQueueStore)(),i=o.pendingActions;for(let n=i.length-1;n>=0;n--)if(i[n].itemName===t&&i[n].type===e){o.removeAction(i[n].id);break}return n.loadFromSaveData(r),await n.saveGame(),!0}catch(e){return console.error("æŒ‰åç§°æ’¤å›å¤±è´¥:",e),ne.o.error("æ’¤å›å¤±è´¥"),!1}}async undoEquip(e,t){const a=this.ensureEquipmentSlots(t),r=this.ensureRoleBackpack(t).ç‰©å“;for(let o=1;o<=6;o++){const i=`è£…å¤‡${o}`;if(a[i]===e.itemId){const{removeEquipmentBonus:o}=await Promise.resolve().then(n.bind(n,651));if(o(t,e.itemId),a[i]=null,r?.[e.itemId]){const t=r[e.itemId];r[e.itemId]={...t,å·²è£…å¤‡:!1}}if(e.restoreData?.replacedItem){const{applyEquipmentBonus:o}=await Promise.resolve().then(n.bind(n,651));if(o(t,e.restoreData.replacedItem.ç‰©å“ID),a[i]=e.restoreData.replacedItem.ç‰©å“ID,r?.[e.restoreData.replacedItem.ç‰©å“ID]){const t=r[e.restoreData.replacedItem.ç‰©å“ID];r[e.restoreData.replacedItem.ç‰©å“ID]={...t,å·²è£…å¤‡:!0}}}break}}}removeUndoAction(e,t){const n=this.undoActions.findIndex(n=>n.type===e&&n.itemName===t);-1!==n&&(this.undoActions.splice(n,1),this.saveUndoHistoryToStorage(),console.log("[æ’¤é”€å†å²] ç§»é™¤äº†ä¸€ä¸ªå·²æŠµæ¶ˆçš„åŠ¨ä½œ:",{type:e,itemName:t}))}async undoUnequip(e,t){if(!e.restoreData?.originalSlot)return;const a=e.restoreData.originalSlot;this.ensureEquipmentSlots(t)[a]=e.itemId;const r=this.ensureRoleBackpack(t).ç‰©å“;if(r?.[e.itemId]){const t=r[e.itemId];r[e.itemId]={...t,å·²è£…å¤‡:!0}}const{applyEquipmentBonus:o}=await Promise.resolve().then(n.bind(n,651));o(t,e.itemId)}async undoUse(e,t){e.itemData?this.ensureRoleBackpack(t).ç‰©å“[e.itemId]=JSON.parse(JSON.stringify(e.itemData)):ne.o.warning("ç‰©å“å·²å®Œå…¨æ¶ˆå¤±ï¼Œä¸”æ— å¤‡ä»½æ•°æ®ï¼Œæ— æ³•æ¢å¤")}async undoCultivate(e,t){const n=e.restoreData?.originalCultivationState;if(!n)return;const a=this.ensureRoleBackpack(t).ç‰©å“;if(!a||"object"!=typeof a)return void console.error("èƒŒåŒ…æ•°æ®å¼‚å¸¸ï¼Œæ— æ³•æ’¤å›ä¿®ç‚¼");const r=this.ensureRoleCultivation(t);if(n.previousTechnique){const e=n.previousTechnique.ç‰©å“ID;r.ä¿®ç‚¼åŠŸæ³•={...n.previousTechnique};const t=a[e];t&&"åŠŸæ³•"===t.ç±»å‹&&(a[e]={...t,å·²è£…å¤‡:!0,ä¿®ç‚¼ä¸­:!0})}else r.ä¿®ç‚¼åŠŸæ³•=null}clearUndoHistory(){this.undoActions=[],this.saveUndoHistoryToStorage()}getUndoActionsCount(){return this.undoActions.length}removeConflictingActions(e,t){const n=(0,nk.useActionQueueStore)(),a=n.pendingActions.filter(n=>n.itemName&&n.type===t&&this.findItemByName(n.itemName)?.ç‰©å“ID===e);a.forEach(e=>{n.removeAction(e.id)}),this.undoActions=this.undoActions.filter(n=>!(n.itemId===e&&n.type===t)),this.saveUndoHistoryToStorage(),a.length>0&&ne.o.info("å·²ç§»é™¤å†²çªçš„æ“ä½œ")}findItemByName(e){const t=(0,Iu.useGameStateStore)().toSaveData();if(!t)return null;const n=this.ensureEquipmentSlots(t),a=this.ensureRoleBackpack(t).ç‰©å“;if(a)for(const t of Object.values(a))if(t&&"object"==typeof t&&t.åç§°===e)return t;for(let t=1;t<=6;t++){const r=n[`è£…å¤‡${t}`];if(!r)continue;const o=a?.[r];if(o&&o.åç§°===e)return o}return null}async syncEquipmentToTavern(e){console.warn("[è£…å¤‡åŒæ­¥] syncEquipmentToTavern å·²åºŸå¼ƒï¼Œæ–°æ¶æ„ä¸­æ•°æ®ç”± gameStateStore ç»Ÿä¸€ç®¡ç†")}async syncInventoryToTavern(e){console.warn("[èƒŒåŒ…åŒæ­¥] syncInventoryToTavern å·²åºŸå¼ƒï¼Œæ–°æ¶æ„ä¸­æ•°æ®ç”± gameStateStore ç»Ÿä¸€ç®¡ç†")}saveUndoHistoryToStorage(){try{localStorage.setItem(this.storageKey,JSON.stringify(this.undoActions))}catch(e){console.warn("[æ’¤å›å†å²] ä¿å­˜å¤±è´¥:",e)}}loadUndoHistoryFromStorage(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);Array.isArray(t)&&(this.undoActions=t)}}catch(e){console.warn("[æ’¤å›å†å²] åŠ è½½å¤±è´¥:",e)}}}var ik=n(9852);const sk={class:"formatted-text"},lk={class:"card-icon"},ck={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},dk={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},uk={key:2,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},mk={class:"card-content"},pk={class:"card-header"},fk={class:"judgement-title"},gk={class:"header-right"},hk={class:"judgement-badge"},vk={class:"card-body"},bk={key:0,class:"stat-item"},yk={class:"stat-info"},xk={class:"stat-value"},kk={key:1,class:"stat-item difficulty-item"},wk={class:"stat-info"},Ek={class:"stat-value"},Nk={key:2,class:"stat-item"},Sk={class:"stat-info"},Vk={class:"stat-value"},_k={key:3,class:"stat-item"},Ck={class:"stat-info"},Ak={class:"stat-value"},Dk={key:4,class:"details-list"},Tk={class:"detail-label"},Bk={class:"detail-value"},Ik={key:0,class:"detail-source"},zk={class:"help-modal-header"},Mk={class:"help-modal-content"},Pk={class:"help-section"},Rk={class:"formula-box"},$k={class:"help-section"},Ok={class:"formula-note"},Lk={class:"result-list"},Fk={class:"result-item perfect"},jk={class:"result-label"},Uk={class:"result-desc"},qk={class:"result-item great-success"},Gk={class:"result-label"},Hk={class:"result-desc"},Yk={class:"result-item success"},Wk={class:"result-label"},Xk={class:"result-desc"},Jk={class:"result-item failure"},Kk={class:"result-label"},Qk={class:"result-desc"},Zk={class:"result-item critical-failure"},ew={class:"result-label"},tw={class:"result-desc"},nw={class:"help-section"},aw={class:"judgement-types"},rw={class:"type-item"},ow={class:"type-name"},iw={class:"type-attrs"},sw={class:"type-item"},lw={class:"type-name"},cw={class:"type-attrs"},dw={class:"type-item"},uw={class:"type-name"},mw={class:"type-attrs"},pw={class:"type-item"},fw={class:"type-name"},gw={class:"type-attrs"},hw={class:"type-item"},vw={class:"type-name"},bw={class:"type-attrs"},yw={class:"help-section"},xw={class:"attributes-desc"},kw={class:"attr-card"},ww={class:"attr-header"},Ew={class:"attr-name"},Nw={class:"attr-card"},Sw={class:"attr-header"},Vw={class:"attr-name"},_w={class:"attr-card"},Cw={class:"attr-header"},Aw={class:"attr-name"},Dw={class:"attr-card"},Tw={class:"attr-header"},Bw={class:"attr-name"},Iw={class:"attr-card"},zw={class:"attr-header"},Mw={class:"attr-name"},Pw={class:"attr-card"},Rw={class:"attr-header"},$w={class:"attr-name"},Ow={class:"help-section"},Lw={class:"tips-list"},Fw=(0,r.defineComponent)({__name:"FormattedText",props:{text:{}},setup(e){const t=(0,r.ref)(!1),n=()=>{t.value=!0},a=()=>{t.value=!1},o=e,i=(0,r.computed)(()=>{const e=[],t=o.text||"";if(!t.trim())return[{type:"normal",content:t}];let n=0;const a=t.replace(/\\\\/g,"\n").replace(/\\n/g,"\n").replace(/\r\n/g,"\n").replace(/\r/g,"\n");for(;n<a.length;){const t=[],r=a.indexOf("ã€",n);if(-1!==r){const e=a.indexOf("ã€‘",r+1);-1!==e&&t.push({start:r,end:e+1,type:"environment",contentStart:r+1,contentEnd:e})}const o=a.indexOf("`",n);if(-1!==o){const e=a.indexOf("`",o+1);-1!==e&&t.push({start:o,end:e+1,type:"psychology",contentStart:o+1,contentEnd:e})}const i=a.indexOf('"',n);if(-1!==i){const e=a.indexOf('"',i+1);-1!==e&&t.push({start:i,end:e+1,type:"dialogue",contentStart:i+1,contentEnd:e})}const s=a.indexOf("â€œ",n);if(-1!==s){const e=a.indexOf("â€",s+1);-1!==e&&t.push({start:s,end:e+1,type:"quote",contentStart:s,contentEnd:e+1})}const l=a.indexOf("ã€Œ",n);if(-1!==l){const e=a.indexOf("ã€",l+1);-1!==e&&t.push({start:l,end:e+1,type:"dialogue",contentStart:l,contentEnd:e+1})}const c=a.indexOf("ã€–",n);if(-1!==c){const e=a.indexOf("ã€—",c+1);-1!==e&&t.push({start:c,end:e+1,type:"judgement",contentStart:c+1,contentEnd:e})}const d=t.filter(e=>e.start>=n&&e.contentStart<e.contentEnd).sort((e,t)=>e.start-t.start);if(0===d.length){n<a.length&&e.push({type:"normal",content:a.slice(n)});break}const u=d[0];if(u.start>n){const t=a.slice(n,u.start);t&&e.push({type:"normal",content:t})}const m=a.slice(u.contentStart,u.contentEnd);if(m.trim())if("judgement"===u.type){const t=m.split(",").map(e=>e.trim());if(t.length>=1){const n=t[0].split(":");if(2===n.length){const a={title:n[0].trim(),result:n[1].trim(),dice:"æœªçŸ¥",attribute:"",details:[]};for(let e=1;e<t.length;e++){const n=t[e],[r,o]=n.split(":").map(e=>e.trim());r&&o&&(r.includes("éš¾åº¦")?a.difficulty=o:r.includes("åˆ¤å®šå€¼")?a.finalValue=o:r.includes("åŠ æˆ")?a.bonus=o:r.includes("æœ€ç»ˆå€¼")||r.includes("æ€»å€¼")?a.finalValue=o:r.includes("é€ æˆä¼¤å®³")?a.damage=o:r.includes("å‰©ä½™æ°”è¡€")?a.remainingHp=o:a.details?.push(`${r}:${o}`))}e.push({type:"judgement-card",content:a})}else if(1===n.length){const n={title:"ç³»ç»Ÿæç¤º",result:m.trim(),dice:"",attribute:"",details:[]};for(let e=1;e<t.length;e++){const a=t[e],[r,o]=a.split(":").map(e=>e.trim());r&&o&&(r.includes("éš¾åº¦")?n.difficulty=o:r.includes("åŠ æˆ")?n.bonus=o:r.includes("æœ€ç»ˆå€¼")||r.includes("æ€»å€¼")?n.finalValue=o:r.match(/^[^\d\s]+$/)?n.attribute?n.details?.push(`${r}:${o}`):n.attribute=`${r}:${o}`:n.details?.push(a))}e.push({type:"judgement-card",content:n})}else e.push({type:"normal",content:`ã€–${m}ã€—`})}else e.push({type:"normal",content:`ã€–${m}ã€—`})}else e.push({type:u.type,content:a.slice(u.start,u.end)});n=u.end}return e.length>0?e:[{type:"normal",content:t}]}),s=e=>["æˆåŠŸ","å¤§æˆåŠŸ","å®Œç¾","é€šè¿‡"].includes(e),l=e=>["å¤±è´¥","å¤§å¤±è´¥","å¤±è´¥æƒ¨é‡","æœªé€šè¿‡"].includes(e),c=e=>e.split(":")[0]+":",d=e=>{const t=e.split(":");if(t.length<2)return"";const n=t[1],a=n.match(/^([+-]?\d+)/);return a?a[1]:n.split("(")[0].trim()},u=e=>{const t=e.split(":");if(t.length<2)return"";const n=t[1].match(/\(([^)]+)\)/);return n?`(${n[1]})`:""};return(e,o)=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createElementVNode)("div",sk,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(i.value,(e,t)=>{return(0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:t},["judgement-card"!==e.type?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:0,class:(0,r.normalizeClass)((i=e.type,{"text-environment":"environment"===i,"text-psychology":"psychology"===i,"text-dialogue":"dialogue"===i,"text-quote":"quote"===i,"text-normal":"normal"===i}))},(0,r.toDisplayString)(e.content),3)):(a=e.content,"object"==typeof a&&null!==a&&"title"in a?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:(0,r.normalizeClass)(["judgement-card",{"is-success":s(e.content.result),"is-failure":l(e.content.result),"is-great-success":e.content.result?.includes("å¤§æˆåŠŸ"),"is-great-failure":e.content.result?.includes("å¤§å¤±è´¥")}])},[(0,r.createElementVNode)("div",lk,[s(e.content.result)?((0,r.openBlock)(),(0,r.createElementBlock)("svg",ck,o[1]||(o[1]=[(0,r.createElementVNode)("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"},null,-1),(0,r.createElementVNode)("polyline",{points:"22 4 12 14.01 9 11.01"},null,-1)]))):l(e.content.result)?((0,r.openBlock)(),(0,r.createElementBlock)("svg",dk,o[2]||(o[2]=[(0,r.createElementVNode)("circle",{cx:"12",cy:"12",r:"10"},null,-1),(0,r.createElementVNode)("line",{x1:"15",y1:"9",x2:"9",y2:"15"},null,-1),(0,r.createElementVNode)("line",{x1:"9",y1:"9",x2:"15",y2:"15"},null,-1)]))):((0,r.openBlock)(),(0,r.createElementBlock)("svg",uk,o[3]||(o[3]=[(0,r.createElementVNode)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"},null,-1),(0,r.createElementVNode)("line",{x1:"12",y1:"9",x2:"12",y2:"13"},null,-1),(0,r.createElementVNode)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"},null,-1)])))]),(0,r.createElementVNode)("div",mk,[(0,r.createElementVNode)("div",pk,[(0,r.createElementVNode)("span",fk,(0,r.toDisplayString)(e.content.title),1),(0,r.createElementVNode)("div",gk,[(0,r.createElementVNode)("span",hk,(0,r.toDisplayString)(e.content.result),1),(0,r.createElementVNode)("button",{class:"help-btn",onClick:(0,r.withModifiers)(n,["stop"]),title:"æŸ¥çœ‹åˆ¤å®šè§„åˆ™"},o[4]||(o[4]=[(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,r.createElementVNode)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.createElementVNode)("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),(0,r.createElementVNode)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)]))])]),(0,r.createElementVNode)("div",vk,[e.content.finalValue?((0,r.openBlock)(),(0,r.createElementBlock)("div",bk,[o[6]||(o[6]=(0,r.createElementVNode)("span",{class:"stat-icon"},"âœ¨",-1)),(0,r.createElementVNode)("div",yk,[o[5]||(o[5]=(0,r.createElementVNode)("span",{class:"stat-label"},"åˆ¤å®šå€¼",-1)),(0,r.createElementVNode)("span",xk,(0,r.toDisplayString)(e.content.finalValue),1)])])):(0,r.createCommentVNode)("v-if",!0),e.content.difficulty?((0,r.openBlock)(),(0,r.createElementBlock)("div",kk,[o[8]||(o[8]=(0,r.createElementVNode)("span",{class:"stat-icon"},"ğŸ¯",-1)),(0,r.createElementVNode)("div",wk,[o[7]||(o[7]=(0,r.createElementVNode)("span",{class:"stat-label"},"éš¾åº¦",-1)),(0,r.createElementVNode)("span",Ek,(0,r.toDisplayString)(e.content.difficulty),1)])])):(0,r.createCommentVNode)("v-if",!0),e.content.damage?((0,r.openBlock)(),(0,r.createElementBlock)("div",Nk,[o[10]||(o[10]=(0,r.createElementVNode)("span",{class:"stat-icon"},"âš”ï¸",-1)),(0,r.createElementVNode)("div",Sk,[o[9]||(o[9]=(0,r.createElementVNode)("span",{class:"stat-label"},"ä¼¤å®³",-1)),(0,r.createElementVNode)("span",Vk,(0,r.toDisplayString)(e.content.damage),1)])])):(0,r.createCommentVNode)("v-if",!0),e.content.remainingHp?((0,r.openBlock)(),(0,r.createElementBlock)("div",_k,[o[12]||(o[12]=(0,r.createElementVNode)("span",{class:"stat-icon"},"â¤ï¸",-1)),(0,r.createElementVNode)("div",Ck,[o[11]||(o[11]=(0,r.createElementVNode)("span",{class:"stat-label"},"å‰©ä½™æ°”è¡€",-1)),(0,r.createElementVNode)("span",Ak,(0,r.toDisplayString)(e.content.remainingHp),1)])])):(0,r.createCommentVNode)("v-if",!0),e.content.details&&e.content.details.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",Dk,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.content.details,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"detail-item",key:t},[(0,r.createElementVNode)("span",Tk,(0,r.toDisplayString)(c(e)),1),(0,r.createElementVNode)("span",Bk,(0,r.toDisplayString)(d(e)),1),u(e)?((0,r.openBlock)(),(0,r.createElementBlock)("span",Ik,(0,r.toDisplayString)(u(e)),1)):(0,r.createCommentVNode)("v-if",!0)]))),128))])):(0,r.createCommentVNode)("v-if",!0)])])],2)):(0,r.createCommentVNode)("v-if",!0))],64);var a,i}),128))]),(0,r.createCommentVNode)(" åˆ¤å®šè§„åˆ™å¸®åŠ©å¼¹çª— "),((0,r.openBlock)(),(0,r.createBlock)(r.Teleport,{to:"body"},[t.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"help-modal-overlay",onClick:a},[(0,r.createElementVNode)("div",{class:"help-modal",onClick:o[0]||(o[0]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",zk,[(0,r.createElementVNode)("h3",null,"ğŸ² "+(0,r.toDisplayString)(e.$t("åˆ¤å®šè§„åˆ™è¯´æ˜")),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:a},o[13]||(o[13]=[(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[(0,r.createElementVNode)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,r.createElementVNode)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),(0,r.createElementVNode)("div",Mk,[(0,r.createElementVNode)("div",Pk,[(0,r.createElementVNode)("h4",null,"ğŸ“Š "+(0,r.toDisplayString)(e.$t("åˆ¤å®šè®¡ç®—å…¬å¼")),1),(0,r.createElementVNode)("div",Rk,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("åˆ¤å®šå€¼")),1),(0,r.createTextVNode)(" = "+(0,r.toDisplayString)(e.$t("å…ˆå¤©"))+" + "+(0,r.toDisplayString)(e.$t("åå¤©"))+" + "+(0,r.toDisplayString)(e.$t("å¢ƒç•Œ"))+" + "+(0,r.toDisplayString)(e.$t("è£…å¤‡"))+" + "+(0,r.toDisplayString)(e.$t("åŠŸæ³•"))+" + "+(0,r.toDisplayString)(e.$t("çŠ¶æ€")),1)]),(0,r.createElementVNode)("ol",null,[(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("å…ˆå¤©")),1),(0,r.createTextVNode)("ï¼š"+(0,r.toDisplayString)(e.$t("æ ¹æ®åˆ¤å®šç±»å‹åŠ æƒï¼ˆæˆ˜æ–—ï¼šæ ¹éª¨50%+çµæ€§30%+æ°”è¿20%ï¼Œä¿®ç‚¼ï¼šæ‚Ÿæ€§50%+çµæ€§30%+å¿ƒæ€§20%ï¼‰")),1)]),(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("åå¤©")),1),(0,r.createTextVNode)("ï¼š"+(0,r.toDisplayString)(e.$t("å¯¹åº”åå¤©å…­å¸åŠ æƒ Ã· 5")),1)]),(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("å¢ƒç•Œ")),1),(0,r.createTextVNode)("ï¼š"+(0,r.toDisplayString)(e.$t("ç‚¼æ°”5 | ç­‘åŸº12 | é‡‘ä¸¹20 | å…ƒå©´30...ï¼ˆé˜¶æ®µï¼šåˆæœŸ+0ï¼Œä¸­æœŸ+2ï¼ŒåæœŸ+4ï¼Œåœ†æ»¡+6ï¼‰")),1)]),(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("è£…å¤‡")),1),(0,r.createTextVNode)("ï¼š"+(0,r.toDisplayString)(e.$t("è£…å¤‡æä¾›çš„åŠ æˆ")),1)]),(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("åŠŸæ³•")),1),(0,r.createTextVNode)("ï¼š"+(0,r.toDisplayString)(e.$t("åŠŸæ³•å“è´¨+ç†Ÿç»ƒåº¦")),1)]),(0,r.createElementVNode)("li",null,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("çŠ¶æ€")),1),(0,r.createTextVNode)("ï¼š"+(0,r.toDisplayString)(e.$t("buff/debuffæ•ˆæœ")),1)])])]),(0,r.createElementVNode)("div",$k,[(0,r.createElementVNode)("h4",null,"ğŸ¯ "+(0,r.toDisplayString)(e.$t("åˆ¤å®šç»“æœ")),1),(0,r.createElementVNode)("div",Ok,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.$t("åˆ¤å®šè§„åˆ™")),1),(0,r.createTextVNode)(": "+(0,r.toDisplayString)(e.$t("åˆ¤å®šå€¼ä¸éš¾åº¦å¯¹æ¯”ï¼Œå®Œå…¨åŸºäºå±æ€§ã€å¢ƒç•Œå’ŒåŠ æˆ")),1)]),(0,r.createElementVNode)("div",Lk,[(0,r.createElementVNode)("div",Fk,[(0,r.createElementVNode)("span",jk,(0,r.toDisplayString)(e.$t("å®Œç¾")),1),(0,r.createElementVNode)("span",Uk,(0,r.toDisplayString)(e.$t("åˆ¤å®šå€¼ â‰¥ éš¾åº¦+30")),1)]),(0,r.createElementVNode)("div",qk,[(0,r.createElementVNode)("span",Gk,(0,r.toDisplayString)(e.$t("å¤§æˆåŠŸ")),1),(0,r.createElementVNode)("span",Hk,(0,r.toDisplayString)(e.$t("åˆ¤å®šå€¼ â‰¥ éš¾åº¦+15ï¼Œè¶…é¢å®Œæˆ")),1)]),(0,r.createElementVNode)("div",Yk,[(0,r.createElementVNode)("span",Wk,(0,r.toDisplayString)(e.$t("æˆåŠŸ")),1),(0,r.createElementVNode)("span",Xk,(0,r.toDisplayString)(e.$t("åˆ¤å®šå€¼ â‰¥ éš¾åº¦ï¼Œè¾¾æˆç›®æ ‡")),1)]),(0,r.createElementVNode)("div",Jk,[(0,r.createElementVNode)("span",Kk,(0,r.toDisplayString)(e.$t("å¤±è´¥")),1),(0,r.createElementVNode)("span",Qk,(0,r.toDisplayString)(e.$t("åˆ¤å®šå€¼ < éš¾åº¦ï¼Œæœªè¾¾æˆ")),1)]),(0,r.createElementVNode)("div",Zk,[(0,r.createElementVNode)("span",ew,(0,r.toDisplayString)(e.$t("å¤§å¤±è´¥")),1),(0,r.createElementVNode)("span",tw,(0,r.toDisplayString)(e.$t("åˆ¤å®šå€¼è¿œä½äºéš¾åº¦ï¼ˆéš¾åº¦-15ä»¥ä¸‹ï¼‰")),1)])])]),(0,r.createElementVNode)("div",nw,[(0,r.createElementVNode)("h4",null,"âš”ï¸ "+(0,r.toDisplayString)(e.$t("åˆ¤å®šç±»å‹ä¸å±æ€§é…æ¯”")),1),(0,r.createElementVNode)("div",aw,[(0,r.createElementVNode)("div",rw,[(0,r.createElementVNode)("span",ow,(0,r.toDisplayString)(e.$t("æˆ˜æ–—åˆ¤å®š")),1),(0,r.createElementVNode)("span",iw,(0,r.toDisplayString)(e.$t("æ ¹éª¨50% + çµæ€§30% + æ°”è¿20%")),1)]),(0,r.createElementVNode)("div",sw,[(0,r.createElementVNode)("span",lw,(0,r.toDisplayString)(e.$t("ä¿®ç‚¼åˆ¤å®š")),1),(0,r.createElementVNode)("span",cw,(0,r.toDisplayString)(e.$t("æ‚Ÿæ€§50% + çµæ€§30% + å¿ƒæ€§20%")),1)]),(0,r.createElementVNode)("div",dw,[(0,r.createElementVNode)("span",uw,(0,r.toDisplayString)(e.$t("æŠ€è‰ºåˆ¤å®š")),1),(0,r.createElementVNode)("span",mw,(0,r.toDisplayString)(e.$t("æ‚Ÿæ€§50% + æ ¹éª¨30% + çµæ€§20%")),1)]),(0,r.createElementVNode)("div",pw,[(0,r.createElementVNode)("span",fw,(0,r.toDisplayString)(e.$t("ç¤¾äº¤åˆ¤å®š")),1),(0,r.createElementVNode)("span",gw,(0,r.toDisplayString)(e.$t("é­…åŠ›50% + æ‚Ÿæ€§30% + å¿ƒæ€§20%")),1)]),(0,r.createElementVNode)("div",hw,[(0,r.createElementVNode)("span",vw,(0,r.toDisplayString)(e.$t("æ¢ç´¢åˆ¤å®š")),1),(0,r.createElementVNode)("span",bw,(0,r.toDisplayString)(e.$t("æ°”è¿50% + çµæ€§30% + æ‚Ÿæ€§20%")),1)])])]),(0,r.createElementVNode)("div",yw,[(0,r.createElementVNode)("h4",null,"ğŸ“– "+(0,r.toDisplayString)(e.$t("å…­å¸å±æ€§è¯´æ˜")),1),(0,r.createElementVNode)("div",xw,[(0,r.createElementVNode)("div",kw,[(0,r.createElementVNode)("div",ww,[o[14]||(o[14]=(0,r.createElementVNode)("span",{class:"attr-icon"},"ğŸ’ª",-1)),(0,r.createElementVNode)("span",Ew,(0,r.toDisplayString)(e.$t("æ ¹éª¨")),1)]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("å†³å®šæ°”è¡€ä¸Šé™ã€æ¢å¤é€Ÿåº¦ã€å¯¿å‘½ä¸Šé™ã€‚å½±å“ç‚¼ä½“ä¿®è¡Œã€æŠ—æ‰“å‡»èƒ½åŠ›ã€‚")),1)]),(0,r.createElementVNode)("div",Nw,[(0,r.createElementVNode)("div",Sw,[o[15]||(o[15]=(0,r.createElementVNode)("span",{class:"attr-icon"},"âœ¨",-1)),(0,r.createElementVNode)("span",Vw,(0,r.toDisplayString)(e.$t("çµæ€§")),1)]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("å†³å®šçµæ°”ä¸Šé™ã€å¸æ”¶æ•ˆç‡ã€‚å½±å“ä¿®ç‚¼é€Ÿåº¦ã€æ³•æœ¯å¨åŠ›ã€‚")),1)]),(0,r.createElementVNode)("div",_w,[(0,r.createElementVNode)("div",Cw,[o[16]||(o[16]=(0,r.createElementVNode)("span",{class:"attr-icon"},"ğŸ§ ",-1)),(0,r.createElementVNode)("span",Aw,(0,r.toDisplayString)(e.$t("æ‚Ÿæ€§")),1)]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("å†³å®šç¥è¯†ä¸Šé™ã€å­¦ä¹ æ•ˆç‡ã€‚å½±å“åŠŸæ³•é¢†æ‚Ÿã€æŠ€èƒ½æŒæ¡é€Ÿåº¦ã€‚")),1)]),(0,r.createElementVNode)("div",Dw,[(0,r.createElementVNode)("div",Tw,[o[17]||(o[17]=(0,r.createElementVNode)("span",{class:"attr-icon"},"ğŸ€",-1)),(0,r.createElementVNode)("span",Bw,(0,r.toDisplayString)(e.$t("æ°”è¿")),1)]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("å†³å®šå„ç§æ¦‚ç‡ã€ç‰©å“æ‰è½å“è´¨ã€‚å½±å“å¤©æåœ°å®è·å–ã€è´µäººç›¸åŠ©ã€‚")),1)]),(0,r.createElementVNode)("div",Iw,[(0,r.createElementVNode)("div",zw,[o[18]||(o[18]=(0,r.createElementVNode)("span",{class:"attr-icon"},"ğŸŒº",-1)),(0,r.createElementVNode)("span",Mw,(0,r.toDisplayString)(e.$t("é­…åŠ›")),1)]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("å†³å®šåˆå§‹å¥½æ„Ÿåº¦ã€ç¤¾äº¤åŠ æˆã€‚å½±å“NPCäº’åŠ¨ã€é—¨æ´¾å£°æœ›è·å–ã€‚")),1)]),(0,r.createElementVNode)("div",Pw,[(0,r.createElementVNode)("div",Rw,[o[19]||(o[19]=(0,r.createElementVNode)("span",{class:"attr-icon"},"ğŸ’",-1)),(0,r.createElementVNode)("span",$w,(0,r.toDisplayString)(e.$t("å¿ƒæ€§")),1)]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.$t("å†³å®šå¿ƒé­”æŠ—æ€§ã€æ„å¿—åŠ›ã€‚å½±å“èµ°ç«å…¥é­”æŠµæŠ—ã€å…³é”®æŠ‰æ‹©ã€‚")),1)])])]),(0,r.createElementVNode)("div",Ow,[(0,r.createElementVNode)("h4",null,"ğŸ’¡ "+(0,r.toDisplayString)(e.$t("æå‡åˆ¤å®šæˆåŠŸç‡")),1),(0,r.createElementVNode)("ul",Lw,[(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("å…ˆå¤©å…­å¸ï¼šå¤©èµ‹å†³å®šä¸Šé™ï¼Œæ— æ³•æ”¹å˜ä½†å½±å“æœ€å¤§")),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("æå‡å¢ƒç•Œï¼šå¢ƒç•Œè¶Šé«˜ï¼Œåˆ¤å®šåŸºç¡€åŠ æˆè¶Šå¤§ï¼ˆç‚¼æ°”+5ï¼Œç­‘åŸº+12...ï¼‰")),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("ä¿®ç‚¼åå¤©ï¼šåå¤©å…­å¸å¯æå‡ï¼Œä½†æƒé‡ä»…20%")),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("å­¦ä¹ åŠŸæ³•ï¼šé«˜å“è´¨åŠŸæ³•å’ŒæŠ€èƒ½ç†Ÿç»ƒåº¦æä¾›æ˜¾è‘—åŠ æˆ")),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("è£…å¤‡æ³•å™¨ï¼šåˆé€‚çš„è£…å¤‡èƒ½å¤§å¹…æå‡åˆ¤å®šå€¼")),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("çŠ¶æ€æ•ˆæœï¼šbuffå¢å¼ºåˆ¤å®šï¼Œæ³¨æ„é¿å…debuff")),1),(0,r.createElementVNode)("li",null,(0,r.toDisplayString)(e.$t("å¢ƒç•Œå‹åˆ¶ï¼šé«˜å¢ƒç•Œå¯¹ä½å¢ƒç•Œæœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œä½†ä¸æ˜¯ç»å¯¹")),1)])])])])])):(0,r.createCommentVNode)("v-if",!0)]))],64))}});var jw=n(3767),Uw={};Uw.styleTagTransform=k(),Uw.setAttributes=v(),Uw.insert=g().bind(null,"head"),Uw.domAPI=p(),Uw.insertStyleElement=y(),u()(jw.A,Uw),jw.A&&jw.A.locals&&jw.A.locals;const qw=(0,N.A)(Fw,[["__scopeId","data-v-0adfeb24"]]),Gw={class:"main-game-panel"},Hw={key:0,class:"memory-section"},Yw={class:"memory-title"},Ww={key:0,class:"memory-dropdown"},Xw={class:"memory-content"},Jw={key:0,class:"no-memory"},Kw={class:"current-narrative"},Qw={key:0,class:"ai-processing-indicator"},Zw={class:"streaming-meta"},eE={class:"narrative-time"},tE={class:"streaming-indicator"},nE={class:"streaming-text"},aE=["title"],rE={key:1,class:"streaming-narrative-content"},oE={class:"streaming-text"},iE={class:"narrative-content"},sE={class:"narrative-meta"},lE={class:"narrative-time"},cE={class:"meta-buttons"},dE=["title"],uE=["disabled","title"],mE={class:"update-count"},pE={class:"narrative-text"},fE={key:0,class:"action-options"},gE=["onClick"],hE={key:3,class:"empty-narrative"},vE={class:"input-section"},bE={key:0,class:"action-queue-display"},yE={class:"queue-header"},xE={class:"queue-title"},kE=["title"],wE={class:"queue-actions"},EE={class:"action-text"},NE={class:"action-controls"},SE=["onClick","title"],VE={class:"input-wrapper"},_E={class:"input-container"},CE={key:0,class:"image-preview-container"},AE=["src","alt"],DE=["onClick","title"],TE=["placeholder","disabled"],BE=["disabled"],IE={class:"action-modal"},zE={class:"modal-header"},ME={class:"action-grid"},PE=["onClick"],RE={class:"action-icon"},$E={class:"action-text"},OE={class:"action-config-modal"},LE={class:"config-header"},FE={class:"config-content"},jE={class:"action-description"},UE={key:0,class:"config-section"},qE={class:"config-label"},GE={class:"time-selector"},HE=["onClick"],YE={class:"time-custom"},WE={key:1,class:"config-section"},XE={class:"config-label"},JE={class:"action-options"},KE=["name","value"],QE={class:"config-actions"},ZE="__mainGamePanel_eventListenersRegistered__",eN="__mainGamePanel_eventHandlers__",tN=(0,r.defineComponent)({__name:"MainGamePanel",setup(e,{expose:t}){const n=(0,r.computed)(()=>L.value?.stateChanges?.changes||[]),a=(0,r.computed)({get:()=>C.userInputText,set:e=>{C.userInputText=e}}),o=(0,r.ref)(!1),i=(0,r.computed)(()=>C.isAIProcessing),s=(0,r.computed)(()=>C.streamingContent),l=(0,r.computed)(()=>C.currentGenerationId),c=(0,r.computed)(()=>C.streamingContent.length),d=(0,r.ref)(),u=(0,r.ref)(),m=(0,r.ref)(!1),p=(0,r.ref)(!0),f=async({text:e,focus:t})=>{C.userInputText=e,!1!==t&&(await(0,r.nextTick)(),d.value?.focus())},g=async({text:e,focus:t})=>{C.isAIProcessing?ne.o.warning(S("AIæ­£åœ¨ç”Ÿæˆä¸­ï¼Œè¯·ç¨åå†è¯•")):(C.userInputText=e,!1!==t&&(await(0,r.nextTick)(),d.value?.focus()),await(0,r.nextTick)(),se())},h=()=>{m.value=!m.value},v=()=>{"true"===sessionStorage.getItem("ai-processing-state")&&(C.setAIProcessing(!0),console.log("[çŠ¶æ€æ¢å¤] æ¢å¤AIå¤„ç†çŠ¶æ€"))},b=()=>{C.isAIProcessing?(sessionStorage.setItem("ai-processing-state","true"),sessionStorage.setItem("ai-processing-timestamp",Date.now().toString())):(sessionStorage.removeItem("ai-processing-state"),sessionStorage.removeItem("ai-processing-timestamp"))},y=()=>{console.log("[å¼ºåˆ¶é‡ç½®] æ¸…é™¤AIå¤„ç†çŠ¶æ€å’Œä¼šè¯å­˜å‚¨"),C.resetStreamingState(),z.value=null,ae.value="",b(),ne.o.info(S("AIå¤„ç†çŠ¶æ€å·²é‡ç½®"))},x=(0,r.ref)(!1),k=(0,r.ref)(null),w=(0,r.ref)(1),E=(0,r.ref)(1),N=(0,r.ref)(""),{t:S}=(0,re.s)(),V=(0,hd.useCharacterStore)(),_=(0,nk.useActionQueueStore)(),C=(0,T.useUIStore)(),A=(0,Iu.useGameStateStore)(),D=(0,fe.isTavernEnv)(),B=ok.getInstance(),I=ik.J,z=(0,r.ref)(null),M=(0,r.computed)({get:()=>C.useStreaming,set:e=>{C.useStreaming=e}}),P=window;P[ZE]||(P[ZE]=!1),P[eN]||(P[eN]={});const R=(0,r.ref)([]),$=(0,r.ref)(),O=e=>{const t=e.target;if(t.files&&t.files.length>0){const e=Array.from(t.files);R.value.push(...e),console.log("[å›¾ç‰‡ä¸Šä¼ ] å·²é€‰æ‹©å›¾ç‰‡:",e.length,"å¼ "),ne.o.success(`å·²é€‰æ‹© ${e.length} å¼ å›¾ç‰‡`)}},L=(0,r.computed)(()=>{const e=A.narrativeHistory,t=A.memory?.çŸ­æœŸè®°å¿†,n=le();let a="";if(t&&t.length>0?a=t[t.length-1].replace(/^ã€.*?ã€‘\s*/,""):e&&e.length>0&&(a=e[e.length-1].content.replace(/^ã€.*?ã€‘\s*/,"")),e&&e.length>0){const t=e[e.length-1];return{type:t.type||"narrative",content:a||"...",time:n,stateChanges:t.stateChanges||{changes:[]},actionOptions:t.actionOptions||[]}}return{type:"system",content:a||"å¼€å±€ç”Ÿæˆå¤±è´¥ï¼Œè¯·æ£€æŸ¥APIä¸Šä¸‹æ–‡é•¿åº¦æ˜¯å¦è¶³å¤Ÿï¼Œæ˜¯å¦ä½¿ç”¨æ”¯æŒæµå¼çš„APIï¼Œç„¶åè¿”å›ä¸»é¡µé‡æ–°å¼€å§‹ç”Ÿæˆã€‚",time:n,stateChanges:{changes:[]},actionOptions:[]}}),F=(0,r.ref)(null),j=(0,r.ref)(3),U=(0,r.ref)(25),q=(0,r.ref)(8);t({updateMemorySettings:(e,t)=>{void 0!==e&&e>0&&(j.value=e),void 0!==t&&t>0&&(U.value=t),(()=>{try{const e={maxShortTerm:j.value,maxMidTerm:U.value};localStorage.setItem("memory-settings",JSON.stringify(e)),console.log("[è®°å¿†è®¾ç½®] å·²ä¿å­˜é…ç½®:",e)}catch(e){console.warn("[è®°å¿†è®¾ç½®] ä¿å­˜é…ç½®å¤±è´¥:",e)}})(),console.log("[è®°å¿†è®¾ç½®] é…ç½®å·²æ›´æ–°:",{çŸ­æœŸè®°å¿†ä¸Šé™:j.value,ä¸­æœŸè®°å¿†ä¸Šé™:U.value})},getMemorySettings:()=>({maxShortTerm:j.value,maxMidTerm:U.value})});const G=(0,r.computed)(()=>!!A.character),H=(0,r.computed)(()=>{const e=V.activeCharacterProfile;if(!e||"å•æœº"!==e.æ¨¡å¼)return!1;const t=e.å­˜æ¡£åˆ—è¡¨?.["ä¸Šæ¬¡å¯¹è¯"];return null!=t?.å­˜æ¡£æ•°æ®}),Y=async()=>{H.value?C.showRetryDialog({title:"å›æ»šç¡®è®¤",message:"ç¡®å®šè¦å›æ»šåˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€å—ï¼Ÿå½“å‰è¿›åº¦å°†è¢«æ›¿æ¢ã€‚",confirmText:"ç¡®è®¤å›æ»š",cancelText:"å–æ¶ˆ",onConfirm:async()=>{try{await V.rollbackToLastConversation(),ne.o.success("å·²å›æ»šåˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€")}catch(e){console.error("å›æ»šå¤±è´¥:",e),ne.o.error(`å›æ»šå¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}},onCancel:()=>{}}):ne.o.warning("æ²¡æœ‰å¯å›æ»šçš„å­˜æ¡£")},W=(0,r.computed)(()=>{const e=[];return J.value.forEach(t=>{e.push(...t.actions)}),e}),X=(0,r.ref)([{label:"1å¤©",value:1},{label:"3å¤©",value:3},{label:"7å¤©",value:7},{label:"30å¤©",value:30}]),J=(0,r.ref)([{name:"ä¿®ç‚¼",icon:"",actions:[{name:"åŸºç¡€ä¿®ç‚¼",icon:"âš¡",type:"cultivation",description:"åçº³å¤©åœ°çµæ°”ï¼Œæ·¬ç‚¼è‡ªèº«ä¿®ä¸ºï¼Œæ˜¯æå‡å¢ƒç•Œçš„æ ¹æœ¬ä¹‹æ³•ã€‚",timeRequired:!0},{name:"ç‚¼ä½“",icon:"Shield",iconComponent:Xx,type:"cultivation",description:"ä»¥çµæ°”æˆ–å¤–åŠ›é”¤ç‚¼è‚‰èº«ï¼Œå¼ºåŒ–ç­‹éª¨çš®è†œï¼Œå¢å¼ºä½“é­„ä¸é˜²å¾¡ã€‚",timeRequired:!0},{name:"å†¥æƒ³",icon:"BrainCircuit",iconComponent:Jx,type:"cultivation",description:"æ²‰å…¥å¿ƒæµ·ï¼Œè§‚æƒ³å¤©åœ°ï¼Œå¯ç¨³å›ºå¿ƒå¢ƒï¼Œæå‡ç¥è¯†ï¼Œå¶æœ‰é¡¿æ‚Ÿã€‚",timeRequired:!0}]},{name:"æ¢ç´¢",icon:"",actions:[{name:"é‡å¤–æ¢ç´¢",icon:"",type:"exploration",description:"å‰å¾€é‡å¤–æ¢ç´¢ï¼Œå¯»æ‰¾æœºç¼˜",options:[{key:"nearby",label:"é™„è¿‘åŒºåŸŸ"},{key:"far",label:"è¿œæ–¹åŒºåŸŸ"},{key:"dangerous",label:"å±é™©åŒºåŸŸ"}]},{name:"åŸé•‡é€›è¡—",icon:"",type:"exploration",description:"åœ¨åŸé•‡ä¸­é—²é€›ï¼Œäº†è§£ä¿¡æ¯",options:[{key:"market",label:"é›†å¸‚"},{key:"tavern",label:"é…’æ¥¼"},{key:"shop",label:"å•†é“º"}]}]},{name:"äº¤æµ",icon:"",actions:[{name:"æ‹œè®¿æœ‹å‹",icon:"",type:"social",description:"æ‹œè®¿è®¤è¯†çš„æœ‹å‹",options:[{key:"random",label:"éšæœºæ‹œè®¿"},{key:"close",label:"äº²å¯†æœ‹å‹"}]},{name:"ç»“äº¤æ–°å‹",icon:"",type:"social",description:"ä¸»åŠ¨ç»“äº¤æ–°çš„æœ‹å‹"}]},{name:"å…¶ä»–",icon:"",actions:[{name:"ä¼‘æ¯",icon:"",type:"other",description:"å¥½å¥½ä¼‘æ¯ï¼Œæ¢å¤ç²¾ç¥",timeRequired:!0},{name:"æŸ¥çœ‹çŠ¶æ€",icon:"",type:"other",description:"æŸ¥çœ‹å½“å‰çš„è¯¦ç»†çŠ¶æ€"}]}]);D||(J.value=J.value.map(e=>({...e,actions:e.actions.map(e=>{const t=e.options?.filter(e=>"tavern"!==e.key);return t?{...e,options:t}:e})})));const K=()=>{x.value=!1},Q=()=>{k.value=null,w.value=1,E.value=1,N.value=""},Z=()=>{if(!k.value)return;let e=k.value.name;if(k.value.timeRequired&&(e+=`ï¼ˆ${E.value>0?E.value:w.value}å¤©ï¼‰`),N.value&&k.value.options){const t=k.value.options.find(e=>e.key===N.value);t&&(e+=`ï¼ˆ${t.label}ï¼‰`)}a.value=e,Q(),(0,r.nextTick)(()=>{d.value?.focus()})},ee=(0,r.computed)(()=>{const e=A.memory?.çŸ­æœŸè®°å¿†;return e&&e.length>0?e.slice():[]}),te=e=>{const t=[];if(!e)return t.push("AIå“åº”ä¸ºç©º"),{isValid:!1,errors:t};const n=e;return n.text&&"string"==typeof n.text||t.push("ç¼ºå°‘æœ‰æ•ˆçš„textå­—æ®µ"),n.mid_term_memory&&"string"==typeof n.mid_term_memory?0===n.mid_term_memory.trim().length&&t.push("mid_term_memoryå­—æ®µä¸èƒ½ä¸ºç©º"):t.push("ç¼ºå°‘å¿…è¦çš„mid_term_memoryå­—æ®µï¼ˆä¸­æœŸè®°å¿†æ€»ç»“ï¼‰"),n.tavern_commands&&(Array.isArray(n.tavern_commands)?n.tavern_commands.forEach((e,n)=>{const a=e;e&&"object"==typeof e?a.action&&a.key||t.push(`tavern_commands[${n}]ç¼ºå°‘å¿…è¦å­—æ®µ(action/key)`):t.push(`tavern_commands[${n}]ä¸æ˜¯æœ‰æ•ˆå¯¹è±¡`)}):t.push("tavern_commandså­—æ®µå¿…é¡»æ˜¯æ•°ç»„")),{isValid:0===t.length,errors:t}},ae=(0,r.ref)(""),oe=e=>!!e.type&&(!["npc_trade","npc_request","npc_steal"].includes(e.type)&&["equip","unequip","use","cultivate"].includes(e.type)),ie=async()=>{_.clearActions(),ne.o.success("æ“ä½œè®°å½•å·²æ¸…ç©º")},se=async()=>{if(!a.value.trim())return;if(i.value)return void ne.o.warning("AIæ­£åœ¨å¤„ç†ä¸­ï¼Œè¯·ç¨ç­‰...");if(!G.value)return void ne.o.error("è¯·å…ˆé€‰æ‹©æˆ–åˆ›å»ºè§’è‰²");const e=A.toSaveData();if(e){if(void 0!==e.è§’è‰²?.å±æ€§?.æ°”è¡€?.å½“å‰&&e.è§’è‰².å±æ€§.æ°”è¡€.å½“å‰<=0)return void ne.o.error("è§’è‰²å·²æ­»äº¡ï¼Œæ°”è¡€è€—å°½ã€‚æ— æ³•ç»§ç»­æ¸¸æˆï¼Œè¯·é‡æ–°å¼€å§‹æˆ–å¤æ´»è§’è‰²ã€‚");if(void 0!==e.è§’è‰²?.å±æ€§?.å¯¿å‘½?.å½“å‰&&void 0!==e.è§’è‰²?.å±æ€§?.å¯¿å‘½?.ä¸Šé™&&e.è§’è‰².å±æ€§.å¯¿å‘½.å½“å‰>=e.è§’è‰².å±æ€§.å¯¿å‘½.ä¸Šé™)return void ne.o.error("è§’è‰²å·²æ­»äº¡ï¼Œå¯¿å…ƒè€—å°½ã€‚æ— æ³•ç»§ç»­æ¸¸æˆï¼Œè¯·é‡æ–°å¼€å§‹æˆ–å¤æ´»è§’è‰²ã€‚")}if(A.conversationAutoSaveEnabled)try{await V.saveToSlot("ä¸Šæ¬¡å¯¹è¯"),console.log("[ä¸Šæ¬¡å¯¹è¯] å·²åœ¨å‘é€æ¶ˆæ¯å‰å¤‡ä»½å½“å‰çŠ¶æ€")}catch(e){console.warn("[ä¸Šæ¬¡å¯¹è¯] å¤‡ä»½å¤±è´¥ï¼ˆéè‡´å‘½ï¼‰:",e)}const t=a.value.trim();console.log("[å‰ç«¯] ç”¨æˆ·è¾“å…¥ inputText.value:",a.value),console.log("[å‰ç«¯] å¤„ç†å userMessage:",t);const n=_.getActionPrompt();console.log("[å‰ç«¯] åŠ¨ä½œé˜Ÿåˆ— actionQueueText:",n);let o="";o=t?`<è¡ŒåŠ¨è¶‹å‘>${n?`${t}\n\n${n}`:t}</è¡ŒåŠ¨è¶‹å‘>\n`:n?`<è¡ŒåŠ¨è¶‹å‘>${n}</è¡ŒåŠ¨è¶‹å‘>\n`:"",console.log("[å‰ç«¯] æœ€ç»ˆå‘é€ finalUserMessage:",o),n&&_.clearActions(),(0,r.nextTick)(()=>{de()}),C.setAIProcessing(!0),b(),C.setStreamingContent(""),ae.value="",z.value=1;let l=null,c=!1;try{const e=V.activeCharacterProfile;if(!e)throw new Error("è§’è‰²æ•°æ®ç¼ºå¤±");try{const t={onProgressUpdate:e=>{console.log("[AIè¿›åº¦]",e)},useStreaming:M.value};D||(console.log("[ç½‘é¡µç‰ˆæµå¼] è®¾ç½® onStreamChunk å›è°ƒ"),t.onStreamChunk=e=>{M.value&&e&&(console.log("[ç½‘é¡µç‰ˆæµå¼] æ”¶åˆ°chunk:",e.length,"å­—ç¬¦"),ae.value+=e,C.setStreamingContent(ae.value))});const n=`gen_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(C.setCurrentGenerationId(n),t.generation_id=n,R.value.length>0&&(t.image=R.value,console.log("[å›¾ç‰‡ä¸Šä¼ ] å°†å‘é€",R.value.length,"å¼ å›¾ç‰‡")),l=await I.processPlayerAction(o,e,t),l){const t=te(l);if(!t.isValid){console.warn("[AIå“åº”éªŒè¯] ç»“æ„éªŒè¯å¤±è´¥:",t.errors),ne.o.warning("AIå“åº”æ ¼å¼ä¸æ­£ç¡®ï¼Œæ­£åœ¨é‡è¯•...");const n=await(async(e,t,n,a=2)=>{console.log("[AIå“åº”é‡è¯•] å¼€å§‹é‡è¯•ï¼Œä¹‹å‰çš„é”™è¯¯:",n);for(let r=1;r<=a;r++)try{console.log(`[AIå“åº”é‡è¯•] ç¬¬${r}æ¬¡å°è¯•`),C.setStreamingContent(""),ae.value="";const a=`gen_retry_${r}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;C.setCurrentGenerationId(a);const o=`${e}\n\n## è¾“å‡ºæ ¼å¼ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰\n\n**é‡è¦ï¼šä»¥ä¸‹3ä¸ªå­—æ®µéƒ½æ˜¯å¿…éœ€çš„ï¼Œç¼ºä¸€ä¸å¯ï¼**\n\n{\n  "text": "Narrative text(ä¸­æ–‡ç®€ä½“ï¼Œå­—æ•°è¶Šå¤šè¶Šå¥½1000-3000ï¼Œå¾€ç”¨æˆ·è¶‹å‘å»å°è¯•è¡ŒåŠ¨)",\n  "mid_term_memory": "Brief summary",\n  "tavern_commands": [{"action": "Action", "key": "key.path", "value": Value/List}]\n}\n\nä¸‹é¢ä¸ºtavern_commandsçš„è¡ŒåŠ¨å‘½ä»¤ç±»å‹\n\n# Action Types\n\n| Action | Purpose | Example |\n|--------|---------|---------|\n| set | Replace/Set | Update state |\n| add | Increase/Decrease | Change numerical values |\n| push | Add to array | Record history |\n| delete | Remove field | Clear data |\n| pull | Remove from array | Remove array element |\n\n---\n\n\nä¸Šæ¬¡å“åº”çš„é—®é¢˜ï¼š${n.join(", ")}\nè¯·ä¿®æ­£è¿™äº›é—®é¢˜å¹¶ç¡®ä¿ç»“æ„æ­£ç¡®ã€‚`,i={onProgressUpdate:e=>{console.log("[AIé‡è¯•è¿›åº¦]",e)},useStreaming:M.value,generation_id:a};D||(console.log("[ç½‘é¡µç‰ˆæµå¼-é‡è¯•] è®¾ç½® onStreamChunk å›è°ƒ"),i.onStreamChunk=e=>{M.value&&e&&(console.log("[ç½‘é¡µç‰ˆæµå¼-é‡è¯•] æ”¶åˆ°chunk:",e.length,"å­—ç¬¦"),ae.value+=e,C.setStreamingContent(ae.value))});const s=await I.processPlayerAction(o,t,i);if(s){const e=te(s);if(e.isValid)return console.log(`[AIå“åº”é‡è¯•] ç¬¬${r}æ¬¡å°è¯•æˆåŠŸ`),s;console.warn(`[AIå“åº”é‡è¯•] ç¬¬${r}æ¬¡å°è¯•éªŒè¯å¤±è´¥:`,e.errors),n=e.errors}}catch(e){console.error(`[AIå“åº”é‡è¯•] ç¬¬${r}æ¬¡å°è¯•å‡ºé”™:`,e)}return console.error("[AIå“åº”é‡è¯•] æ‰€æœ‰é‡è¯•å°è¯•éƒ½å¤±è´¥äº†"),null})(o,e,t.errors);if(!n)throw new Error("AIå“åº”æ ¼å¼é”™è¯¯ï¼Œä¸”å¤šæ¬¡é‡è¯•å¤±è´¥");l=n,console.log("[AIå“åº”éªŒè¯] é‡è¯•æˆåŠŸ")}}console.log("[æµå¼è¾“å‡º] AIå“åº”å¤„ç†å¼€å§‹");let a="";const r=l;if(console.log("[AIå“åº”å¤„ç†] å¼€å§‹å¤„ç†AIå“åº”æ–‡æœ¬"),console.log("[AIå“åº”å¤„ç†] aiResponse:",l),console.log("[AIå“åº”å¤„ç†] streamingContent:",s.value),r?.text&&"string"==typeof r.text?(a=r.text,console.log("[AIå“åº”å¤„ç†] ä½¿ç”¨ gmResponse.text ä½œä¸ºæœ€ç»ˆæ–‡æœ¬ï¼Œé•¿åº¦:",a.length)):s.value?(a=s.value,console.log("[AIå“åº”å¤„ç†] ä½¿ç”¨ streamingContent ä½œä¸ºæœ€ç»ˆæ–‡æœ¬ï¼Œé•¿åº¦:",a.length)):console.warn("[AIå“åº”å¤„ç†] æœªæ‰¾åˆ°ä»»ä½•æœ‰æ•ˆçš„æ–‡æœ¬å†…å®¹"),console.log("[AIå“åº”å¤„ç†] æœ€ç»ˆæ–‡æœ¬å†…å®¹é¢„è§ˆ:",a.substring(0,100)+"..."),a?(console.log("[AIå“åº”å¤„ç†] æ–‡æœ¬å¤„ç†å®Œæˆï¼Œè®°å¿†å·²ç”± AIBidirectionalSystem å¤„ç†"),F.value=r?.text||null,L.value&&console.log("[AIå“åº”å¤„ç†] å·²æ›´æ–°UIæ˜¾ç¤º")):(F.value=null,console.error("[AIå“åº”å¤„ç†] æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„æ–‡æœ¬å†…å®¹")),l&&l.stateChanges){C.clearCurrentMessageStateChanges(),console.log("[æ—¥å¿—æ¸…ç©º] æ”¶åˆ°æ–°å“åº”ï¼Œå·²æ¸…ç©ºä¸Šä¸€æ¡æ¶ˆæ¯çš„çŠ¶æ€å˜æ›´æ—¥å¿—");const e=l.stateChanges&&"object"==typeof l.stateChanges&&"changes"in l.stateChanges?l.stateChanges:{changes:[]};console.log("[çŠ¶æ€æ›´æ–°] AIæŒ‡ä»¤å·²æ‰§è¡Œï¼ŒçŠ¶æ€å˜æ›´æ•°é‡:",e.changes.length),l.stateChanges&&(C.setCurrentMessageStateChanges(l.stateChanges),console.log("[æ—¥å¿—é¢æ¿] State changes received and stored in memory:",l.stateChanges));const t=A.toSaveData();t&&(void 0!==t.å±æ€§?.æ°”è¡€?.å½“å‰&&t.å±æ€§.æ°”è¡€.å½“å‰<=0&&ne.o.error("è§’è‰²å·²æ­»äº¡ï¼Œæ°”è¡€è€—å°½"),void 0!==t.å±æ€§?.å¯¿å‘½?.å½“å‰&&void 0!==t.å±æ€§?.å¯¿å‘½?.ä¸Šé™&&t.å±æ€§.å¯¿å‘½.å½“å‰>=t.å±æ€§.å¯¿å‘½.ä¸Šé™&&ne.o.error("è§’è‰²å·²æ­»äº¡ï¼Œå¯¿å…ƒè€—å°½"))}else l&&console.log("[æ—¥å¿—é¢æ¿] No state changes received in this response.")}catch(e){console.error("[AIå¤„ç†å¤±è´¥]",e),c=!0;const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";ne.o.error(`AIå¤„ç†å¤±è´¥: ${t}`),C.setAIProcessing(!1),z.value=null,C.setStreamingContent(""),ae.value="",C.setCurrentGenerationId(null),b(),l=null}l&&l.system_messages&&Array.isArray(l.system_messages)&&l.system_messages.length,!c&&l&&(ne.o.success("å¤©æœºé‡ç°"),R.value=[],$.value&&($.value.value="")),c||(console.log("[AIå“åº”å¤„ç†] å¤„ç†å®Œæˆï¼Œæ¸…é™¤AIå¤„ç†çŠ¶æ€"),C.setAIProcessing(!1),z.value=null,C.setCurrentGenerationId(null),C.resetStreamingState(),ae.value="",b())}catch(e){console.error("[AIäº¤äº’] å¤„ç†å¤±è´¥:",e),c=!0;const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";ne.o.error(`è¯·æ±‚å¤±è´¥: ${t}`),C.setAIProcessing(!1),z.value=null,C.setStreamingContent(""),ae.value="",C.setCurrentGenerationId(null),b()}finally{if(i.value&&(console.warn("[AIå“åº”å¤„ç†] finallyå—ï¼šçŠ¶æ€æœªæ¸…é™¤ï¼Œå¼ºåˆ¶æ¸…é™¤ï¼ˆå…œåº•ï¼‰"),C.setAIProcessing(!1),z.value=null,C.resetStreamingState(),ae.value="",C.setCurrentGenerationId(null),b()),l)try{console.log("[AIå“åº”å¤„ç†] æœ€ç»ˆç»Ÿä¸€å­˜æ¡£..."),await A.saveAfterConversation();const e=V.activeSaveSlot;e&&ne.o.success(`å­˜æ¡£ã€${e.å­˜æ¡£å}ã€‘å·²ä¿å­˜`),console.log("[AIå“åº”å¤„ç†] æœ€ç»ˆç»Ÿä¸€å­˜æ¡£å®Œæˆ")}catch(e){console.error("[AIå“åº”å¤„ç†] æœ€ç»ˆç»Ÿä¸€å­˜æ¡£å¤±è´¥:",e),ne.o.error("æ¸¸æˆå­˜æ¡£å¤±è´¥ï¼Œè¯·å°è¯•æ‰‹åŠ¨ä¿å­˜")}}},le=()=>{const e=new Date;return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")} ${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`},ce=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),se())},de=()=>{const e=d.value;if(e){const t=36.16;e.style.height=`${t}px`;const n=e.scrollHeight,a=120;if(n>t){const t=Math.min(n,a);e.style.height=`${t}px`}e.style.overflowY=n>a?"auto":"hidden"}},ue=()=>{(0,r.nextTick)(()=>{de()})},me=async()=>{console.log("[ä¸»é¢æ¿] ä¸ºå½“å‰å­˜æ¡£åˆå§‹åŒ–é¢æ¿ (æ–°é€»è¾‘)...");try{if(G.value){const e=A.memory?.çŸ­æœŸè®°å¿†;if(console.log("[ä¸»é¢æ¿-è°ƒè¯•] å­˜æ¡£æ•°æ®æ£€æŸ¥:",{æœ‰æ¸¸æˆæ•°æ®:A.isGameLoaded,æœ‰å™äº‹å†å²:!!A.narrativeHistory,å™äº‹å†å²é•¿åº¦:A.narrativeHistory?.length||0,æœ‰çŸ­æœŸè®°å¿†:!!e,çŸ­æœŸè®°å¿†é•¿åº¦:e?.length||0,å½“å‰æ˜¾ç¤ºå†…å®¹:L.value?.content?.substring(0,50)+"..."}),A.narrativeHistory&&A.narrativeHistory.length>0){const t=A.narrativeHistory[A.narrativeHistory.length-1];t.stateChanges&&(C.setCurrentMessageStateChanges(t.stateChanges),console.log("[ä¸»é¢æ¿] âœ… å·²åŒæ­¥æŒ‡ä»¤æ—¥å¿—åˆ°æœ€æ–°å™äº‹",{å˜æ›´æ•°é‡:t.stateChanges.changes?.length||0})),e&&0!==e.length||t.content&&(A.addToShortTermMemory(t.content),console.log("[ä¸»é¢æ¿] âœ… å·²ä»å™äº‹å†å²åŒæ­¥å†…å®¹åˆ°çŸ­æœŸè®°å¿†"))}else e&&e.length>0?console.log("[ä¸»é¢æ¿] âš ï¸ ä»çŸ­æœŸè®°å¿†åŠ è½½ï¼ˆæ— å™äº‹å†å²ï¼‰"):console.log("[ä¸»é¢æ¿] æœªæ‰¾åˆ°å™äº‹è®°å½•ï¼Œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯");await ge()}(0,r.nextTick)(()=>{u.value&&(u.value.scrollTop=u.value.scrollHeight)})}catch(e){console.error("[ä¸»é¢æ¿] åˆå§‹åŒ–å­˜æ¡£æ•°æ®å¤±è´¥:",e)}};(0,r.watch)(()=>V.rootState.å½“å‰æ¿€æ´»å­˜æ¡£,async(e,t)=>{e&&e!==t&&(console.log(`[ä¸»é¢æ¿] å­˜æ¡£å·²åˆ‡æ¢: ä» ${t||"æ— "} åˆ° ${e}`),console.log("[ä¸»é¢æ¿] æ£€æµ‹åˆ°å­˜æ¡£åˆ‡æ¢ï¼Œæ­£åœ¨é‡ç½®é¢æ¿çŠ¶æ€..."),_.clearActions(),a.value="",F.value=null,C.setAIProcessing(!1),b(),await me())}),(0,r.onMounted)(async()=>{try{if((async()=>{try{const e=localStorage.getItem("memory-settings");if(e){const t=JSON.parse(e);t.maxShortTerm&&(j.value=t.maxShortTerm),t.maxMidTerm&&(U.value=t.maxMidTerm),t.midTermKeep&&(q.value=t.midTermKeep),console.log("[è®°å¿†è®¾ç½®] å·²ä»localStorageåŠ è½½é…ç½®:",{çŸ­æœŸè®°å¿†ä¸Šé™:j.value,ä¸­æœŸè®°å¿†è§¦å‘é˜ˆå€¼:U.value,ä¸­æœŸè®°å¿†ä¿ç•™æ•°é‡:q.value})}}catch(e){console.warn("[è®°å¿†è®¾ç½®] åŠ è½½é…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼:",e)}})(),v(),await pe(),(0,r.nextTick)(de),await me(),Qu.on("memory-settings-updated",e=>{if(console.log("[è®°å¿†è®¾ç½®] æ¥æ”¶åˆ°é…ç½®æ›´æ–°äº‹ä»¶:",e),e&&"object"==typeof e){const t=e;"number"==typeof t.shortTermLimit&&(j.value=t.shortTermLimit,console.log(`[è®°å¿†è®¾ç½®] çŸ­æœŸè®°å¿†ä¸Šé™å·²æ›´æ–°ä¸º: ${j.value}`)),"number"==typeof t.midTermTrigger&&(U.value=t.midTermTrigger,console.log(`[è®°å¿†è®¾ç½®] ä¸­æœŸè®°å¿†è§¦å‘é˜ˆå€¼å·²æ›´æ–°ä¸º: ${U.value}`)),"number"==typeof t.midTermKeep&&(q.value=t.midTermKeep,console.log(`[è®°å¿†è®¾ç½®] ä¸­æœŸè®°å¿†ä¿ç•™æ•°é‡å·²æ›´æ–°ä¸º: ${q.value}`))}}),ak.on("prefill",f),ak.on("send",g),D)if((0,ik.f)()){console.log("[ä¸»é¢æ¿] æ³¨å†Œé…’é¦†äº‹ä»¶ç›‘å¬");const e=window.eventOn,t=window.TavernHelper,n=Boolean(P[ZE]);if(e&&t&&"function"==typeof e&&!n){const n=t.iframe_events,a=P[eN],r=e=>{const t=l.value;return!(!t||!e)&&(e===t||e.startsWith(t+"_step"))};a.onGenerationStarted=e=>{if(r(e)){const t=l.value;if(t&&e.startsWith(`${t}_step2`))return;C.setStreamingContent(""),ae.value="",console.log("[æµå¼è¾“å‡º] GENERATION_STARTED - å·²é‡ç½®çŠ¶æ€")}},a.onStreamToken=(e,t)=>{if(r(t)&&M.value&&e){const n=l.value;if(n&&t.startsWith(`${n}_step2`))return;ae.value+=e,C.setStreamingContent(ae.value)}},a.onGenerationEnded=e=>{r(e)&&console.log("[æµå¼è¾“å‡º] GENERATION_ENDED äº‹ä»¶è§¦å‘ï¼Œæ¸…é™¤AIå¤„ç†çŠ¶æ€")},e(n.GENERATION_STARTED,a.onGenerationStarted),e(n.STREAM_TOKEN_RECEIVED_INCREMENTALLY,a.onStreamToken),e(n.GENERATION_ENDED,a.onGenerationEnded),P[ZE]=!0,console.log("[ä¸»é¢æ¿] âœ… æµå¼äº‹ä»¶ç›‘å¬å™¨å·²æ³¨å†Œï¼ˆå…¨å±€å”¯ä¸€ï¼‰")}else n&&console.log("[ä¸»é¢æ¿] â­ï¸ è·³è¿‡äº‹ä»¶ç›‘å¬å™¨æ³¨å†Œï¼ˆå…¨å±€å·²æ³¨å†Œï¼‰");console.log("[ä¸»é¢æ¿] âœ… äº‹ä»¶ç›‘å¬å™¨æ³¨å†Œå®Œæˆ")}else console.warn("[ä¸»é¢æ¿] âš ï¸ é…’é¦†åŠ©æ‰‹ä¸å¯ç”¨ï¼Œäº‹ä»¶ç›‘å¬æœªæ³¨å†Œ")}catch(e){console.error("[ä¸»é¢æ¿] é¦–æ¬¡æŒ‚è½½å¤±è´¥:",e)}}),(0,r.onActivated)(()=>{console.log("[ä¸»é¢æ¿] ç»„ä»¶æ¿€æ´»ï¼Œæ¢å¤AIå¤„ç†çŠ¶æ€"),v()}),(0,r.onUnmounted)(()=>{if(console.log("[ä¸»é¢æ¿] ç»„ä»¶å¸è½½ï¼Œæ¸…ç†äº‹ä»¶ç›‘å¬å™¨"),ak.off("prefill",f),ak.off("send",g),D)try{const e=window.eventOff,t=window.TavernHelper,n=Boolean(P[ZE]);if(e&&t&&"function"==typeof e&&n){const n=t.iframe_events,a=P[eN];a.onGenerationStarted&&e(n.GENERATION_STARTED,a.onGenerationStarted),a.onStreamToken&&e(n.STREAM_TOKEN_RECEIVED_INCREMENTALLY,a.onStreamToken),a.onGenerationEnded&&e(n.GENERATION_ENDED,a.onGenerationEnded),P[ZE]=!1,P[eN]={},console.log("[ä¸»é¢æ¿] âœ… äº‹ä»¶ç›‘å¬å™¨å·²æ¸…ç†ï¼ˆå…¨å±€ï¼‰")}}catch(e){console.warn("[ä¸»é¢æ¿] âš ï¸ æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å¤±è´¥:",e)}}),(0,r.watch)(()=>A.narrativeHistory,e=>{if(e&&e.length>0){const t=e[e.length-1];t.stateChanges?(C.setCurrentMessageStateChanges(t.stateChanges),console.log("[ä¸»é¢æ¿] âœ… å·²æ›´æ–°æŒ‡ä»¤æ—¥å¿—",{å˜æ›´æ•°é‡:t.stateChanges.changes?.length||0,å‰3æ¡:t.stateChanges.changes?.slice(0,3).map(e=>e.key)||[]})):console.warn("[ä¸»é¢æ¿] âš ï¸ æœ€æ–°å™äº‹æ²¡æœ‰çŠ¶æ€å˜æ›´è®°å½•")}},{deep:!0});const pe=async()=>{try{console.log("[ä¸»é¢æ¿] åˆå§‹åŒ–ç³»ç»Ÿè¿æ¥..."),console.log("[ä¸»é¢æ¿] ç³»ç»Ÿè¿æ¥åˆå§‹åŒ–å®Œæˆ")}catch(e){console.error("[ä¸»é¢æ¿] ç³»ç»Ÿè¿æ¥åˆå§‹åŒ–å¤±è´¥:",e)}},ge=async()=>{try{if(!V.activeCharacterProfile)return;console.log("[ä¸»é¢æ¿] æ¸¸æˆçŠ¶æ€åŒæ­¥å®Œæˆ")}catch(e){console.error("[ä¸»é¢æ¿] æ¸¸æˆçŠ¶æ€åŒæ­¥å¤±è´¥:",e)}};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Gw,[(0,r.createCommentVNode)(" çŸ­æœŸè®°å¿†åŒºåŸŸ "),p.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Hw,[(0,r.createElementVNode)("div",{class:"memory-header",onClick:h},[(0,r.createElementVNode)("span",Yw,(0,r.toDisplayString)((0,r.unref)(S)("çŸ­æœŸè®°å¿†")),1),m.value?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Kx),{key:0,size:16,class:"memory-icon"})):((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Nm),{key:1,size:16,class:"memory-icon"}))]),(0,r.createCommentVNode)(" ä¸‹æ‹‰æ‚¬æµ®çš„è®°å¿†å†…å®¹ "),(0,r.createVNode)(r.Transition,{name:"memory-dropdown"},{default:(0,r.withCtx)(()=>[m.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Ww,[(0,r.createElementVNode)("div",Xw,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(ee.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"memory-item"},(0,r.toDisplayString)(e),1))),128)),0===ee.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Jw,(0,r.toDisplayString)((0,r.unref)(S)("è„‘æµ·ä¸­ä¸€ç‰‡æ¸…å‡€ï¼Œå°šæœªç•™ä¸‹ä¿®è¡Œç—•è¿¹...")),1)):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0)]),_:1})])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æ–‡æœ¬æ˜¾ç¤ºåŒºåŸŸ - å½“å‰AIå›å¤ "),(0,r.createElementVNode)("div",{class:"content-area",ref_key:"contentAreaRef",ref:u},[(0,r.createCommentVNode)(" å·¦ä¾§ï¼šå½“å‰å™è¿° "),(0,r.createElementVNode)("div",Kw,[(0,r.createCommentVNode)(" AIç”ŸæˆçŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆç”Ÿæˆæ—¶æ˜¾ç¤ºåœ¨é¡¶éƒ¨ï¼‰ "),i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Qw,[(0,r.createElementVNode)("div",Zw,[(0,r.createElementVNode)("span",eE,(0,r.toDisplayString)(le()),1),(0,r.createElementVNode)("div",tE,[t[6]||(t[6]=(0,r.createElementVNode)("span",{class:"streaming-dot"},null,-1)),(0,r.createElementVNode)("span",nE,(0,r.toDisplayString)(s.value?`${c.value} ${(0,r.unref)(S)("å­—")}`:(0,r.unref)(S)("å¤©é“æ„Ÿåº”ä¸­...")),1)]),(0,r.createCommentVNode)(" é‡ç½®æŒ‰é’® - å³ä¾§ "),(0,r.createElementVNode)("button",{onClick:y,class:"reset-state-btn",title:(0,r.unref)(S)("å¦‚æœé•¿æ—¶é—´æ— å“åº”ï¼Œç‚¹å‡»æ­¤å¤„é‡ç½®çŠ¶æ€")},[(0,r.createVNode)((0,r.unref)(Qx.A),{size:16})],8,aE)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æµå¼è¾“å‡ºå†…å®¹ï¼ˆç”Ÿæˆæ—¶å®æ—¶æ˜¾ç¤ºï¼Œä¼˜å…ˆçº§æœ€é«˜ï¼‰ "),i.value&&s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",rE,[(0,r.createElementVNode)("div",oE,[(0,r.createVNode)(qw,{text:s.value},null,8,["text"])])])):L.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:2},[(0,r.createCommentVNode)(" ä¸Šä¸€æ¬¡çš„å™è¿°å†…å®¹ï¼ˆéç”Ÿæˆæ—¶æ˜¾ç¤ºï¼‰ "),(0,r.createElementVNode)("div",iE,[(0,r.createElementVNode)("div",sE,[(0,r.createElementVNode)("span",lE,(0,r.toDisplayString)(L.value.time),1),(0,r.createElementVNode)("div",cE,[(0,r.createCommentVNode)(" å›æ»šæŒ‰é’® "),H.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:Y,class:"header-action-btn rollback-btn",title:(0,r.unref)(S)("å›æ»šåˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€")},[(0,r.createVNode)((0,r.unref)(Qx.A),{size:24})],8,dE)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å‘½ä»¤æ—¥å¿—æŒ‰é’® "),(0,r.createElementVNode)("button",{onClick:t[0]||(t[0]=e=>{var t;(t=L.value.stateChanges)&&t.changes&&0!==t.changes.length?C.openStateChangeViewer(t):ne.o.info("æœ¬æ¬¡å¯¹è¯æ— å˜æ›´è®°å½•")}),class:(0,r.normalizeClass)(["variable-updates-toggle",{disabled:0===n.value.length}]),disabled:0===n.value.length,title:n.value.length>0?(0,r.unref)(S)("æŸ¥çœ‹æœ¬æ¬¡å¯¹è¯çš„å˜æ›´æ—¥å¿—"):(0,r.unref)(S)("æœ¬æ¬¡å¯¹è¯æ— å˜æ›´è®°å½•")},[(0,r.createVNode)((0,r.unref)(Zx.A),{size:16}),(0,r.createElementVNode)("span",mE,(0,r.toDisplayString)(n.value.length),1)],10,uE)])]),(0,r.createElementVNode)("div",pE,[(0,r.createVNode)(qw,{text:L.value.content},null,8,["text"])]),(0,r.createCommentVNode)(" è¡ŒåŠ¨é€‰é¡¹ "),(0,r.unref)(C).enableActionOptions&&L.value.actionOptions?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",fE,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(L.value.actionOptions,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:t,onClick:t=>(e=>{a.value=e})(e),class:"action-option-btn"},(0,r.toDisplayString)(e),9,gE))),128))])):(0,r.createCommentVNode)("v-if",!0)])],2112)):((0,r.openBlock)(),(0,r.createElementBlock)("div",hE,(0,r.toDisplayString)((0,r.unref)(S)("é™å¾…å¤©æœºå˜åŒ–...")),1))])],512),(0,r.createCommentVNode)(" è¾“å…¥åŒºåŸŸ "),(0,r.createElementVNode)("div",vE,[(0,r.createCommentVNode)(" åŠ¨ä½œé˜Ÿåˆ—æ˜¾ç¤ºåŒºåŸŸ "),(0,r.unref)(_).pendingActions.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",bE,[(0,r.createElementVNode)("div",yE,[(0,r.createElementVNode)("span",xE,(0,r.toDisplayString)((0,r.unref)(S)("æœ€è¿‘æ“ä½œ")),1),(0,r.createElementVNode)("button",{onClick:ie,class:"clear-queue-btn",title:(0,r.unref)(S)("æ¸…ç©ºè®°å½•")},t[7]||(t[7]=[(0,r.createElementVNode)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),8,kE)]),(0,r.createElementVNode)("div",wE,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)((0,r.unref)(_).pendingActions,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"queue-action-item"},[(0,r.createElementVNode)("span",EE,(0,r.toDisplayString)(e.description),1),(0,r.createElementVNode)("div",NE,[(0,r.createElementVNode)("button",{onClick:e=>(async e=>{if(e>=0&&e<_.pendingActions.length){const t=_.pendingActions[e],n=["npc_trade","npc_request","npc_steal"];if(t.type&&n.includes(t.type))return _.removeAction(t.id),void ne.o.success("å·²ç§»é™¤NPCäº¤äº’åŠ¨ä½œ");if(t.type&&["equip","unequip","use","cultivate"].includes(t.type)&&t.itemName&&await B.undoByItemName(t.type,t.itemName))return void ne.o.success("å·²æ’¤å›å¹¶æ¢å¤");_.removeAction(t.id),ne.o.success("å·²ç§»é™¤åŠ¨ä½œ")}})(t),class:"remove-action-btn",title:oe(e)?(0,r.unref)(S)("æ’¤å›å¹¶æ¢å¤"):(0,r.unref)(S)("åˆ é™¤æ­¤åŠ¨ä½œ")}," Ã— ",8,SE)])]))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",VE,[(0,r.createCommentVNode)(" éšè—çš„æ–‡ä»¶é€‰æ‹©å™¨ "),(0,r.createElementVNode)("input",{type:"file",ref_key:"imageInputRef",ref:$,onChange:O,multiple:"",accept:"image/*",style:{display:"none"}},null,544),(0,r.createCommentVNode)(" å›¾ç‰‡ä¸Šä¼ æŒ‰é’® - å·²ç¦ç”¨ "),(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¿«æ·è¡ŒåŠ¨æŒ‰é’® - å·²ç¦ç”¨ "),(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",_E,[(0,r.createCommentVNode)(" å›¾ç‰‡é¢„è§ˆåŒºåŸŸ "),R.value.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",CE,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(R.value,(e,n)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:"image-preview-item"},[(0,r.createElementVNode)("img",{src:(a=e,URL.createObjectURL(a)),alt:e.name},null,8,AE),(0,r.createElementVNode)("button",{onClick:e=>(e=>{R.value.splice(e,1),ne.o.info("å·²ç§»é™¤å›¾ç‰‡")})(n),class:"remove-image-btn",title:(0,r.unref)(S)("ç§»é™¤å›¾ç‰‡")},t[9]||(t[9]=[(0,r.createElementVNode)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]),8,DE)]);var a}),128))])):(0,r.createCommentVNode)("v-if",!0),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.value=e),onFocus:t[2]||(t[2]=e=>o.value=!0),onBlur:t[3]||(t[3]=e=>o.value=!1),onKeydown:ce,onInput:ue,placeholder:G.value?(0,r.unref)(S)("è¯·è¾“å…¥æ‚¨çš„é€‰æ‹©æˆ–è¡ŒåŠ¨..."):(0,r.unref)(S)("è¯·å…ˆé€‰æ‹©è§’è‰²..."),class:"game-input",ref_key:"inputRef",ref:d,rows:"1",wrap:"soft",disabled:!G.value||i.value},null,40,TE),[[r.vModelText,a.value]])]),(0,r.createElementVNode)("button",{onClick:se,disabled:!a.value.trim()||i.value||!G.value,class:"send-button"},[i.value?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(ek),{key:0,size:16,class:"animate-spin"})):((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(tk),{key:1,size:16}))],8,BE)]),(0,r.createCommentVNode)(" è¡ŒåŠ¨é€‰æ‹©å¼¹çª— "),x.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"action-modal-overlay",onClick:(0,r.withModifiers)(K,["self"])},[(0,r.createElementVNode)("div",IE,[(0,r.createElementVNode)("div",zE,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)((0,r.unref)(S)("å¿«æ·è¡ŒåŠ¨")),1),(0,r.createElementVNode)("button",{onClick:K,class:"close-btn"},t[10]||(t[10]=[(0,r.createElementVNode)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),(0,r.createElementVNode)("div",ME,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(W.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.name,onClick:t=>(e=>{k.value=e,x.value=!1,w.value=1,E.value=1,N.value="",e.timeRequired||e.options||Z()})(e),class:(0,r.normalizeClass)(["quick-action-btn",e.type])},[(0,r.createElementVNode)("div",RE,(0,r.toDisplayString)(e.icon),1),(0,r.createElementVNode)("div",$E,(0,r.toDisplayString)(e.name),1)],10,PE))),128))])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" è¡ŒåŠ¨é…ç½®å¼¹çª— "),k.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:2,class:"action-config-overlay",onClick:(0,r.withModifiers)(Q,["self"])},[(0,r.createElementVNode)("div",OE,[(0,r.createElementVNode)("div",LE,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(k.value.icon)+" "+(0,r.toDisplayString)(k.value.name),1),(0,r.createElementVNode)("button",{onClick:Q,class:"close-btn"},"Ã—")]),(0,r.createElementVNode)("div",FE,[(0,r.createElementVNode)("p",jE,(0,r.toDisplayString)(k.value.description),1),(0,r.createCommentVNode)(" æ—¶é—´é…ç½® "),k.value.timeRequired?((0,r.openBlock)(),(0,r.createElementBlock)("div",UE,[(0,r.createElementVNode)("label",qE,(0,r.toDisplayString)((0,r.unref)(S)("ä¿®ç‚¼æ—¶é—´")),1),(0,r.createElementVNode)("div",GE,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(X.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.value,onClick:t=>w.value=e.value,class:(0,r.normalizeClass)(["time-btn",{active:w.value===e.value}])},(0,r.toDisplayString)(e.label),11,HE))),128))]),(0,r.createElementVNode)("div",YE,[(0,r.createElementVNode)("label",null,(0,r.toDisplayString)((0,r.unref)(S)("è‡ªå®šä¹‰ï¼š")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>E.value=e),type:"number",min:"1",max:"365",class:"time-input"},null,512),[[r.vModelText,E.value,void 0,{number:!0}]]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(S)("å¤©")),1)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å…¶ä»–é…ç½®é€‰é¡¹ "),k.value.options?((0,r.openBlock)(),(0,r.createElementBlock)("div",WE,[(0,r.createElementVNode)("label",XE,(0,r.toDisplayString)((0,r.unref)(S)("é€‰é¡¹")),1),(0,r.createElementVNode)("div",JE,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(k.value.options,e=>((0,r.openBlock)(),(0,r.createElementBlock)("label",{key:e.key,class:"option-item"},[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"radio",name:"option-"+k.value.name,value:e.key,"onUpdate:modelValue":t[5]||(t[5]=e=>N.value=e)},null,8,KE),[[r.vModelRadio,N.value]]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.label),1)]))),128))])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",QE,[(0,r.createElementVNode)("button",{onClick:Q,class:"cancel-btn"},(0,r.toDisplayString)((0,r.unref)(S)("å–æ¶ˆ")),1),(0,r.createElementVNode)("button",{onClick:Z,class:"confirm-btn"},(0,r.toDisplayString)((0,r.unref)(S)("ç¡®è®¤")),1)])])])):(0,r.createCommentVNode)("v-if",!0)])]))}});var nN=n(5937),aN={};aN.styleTagTransform=k(),aN.setAttributes=v(),aN.insert=g().bind(null,"head"),aN.domAPI=p(),aN.insertStyleElement=y(),u()(nN.A,aN),nN.A&&nN.A.locals&&nN.A.locals;const rN=(0,N.A)(tN,[["__scopeId","data-v-ac3d68ea"]]);var oN=n(3302),iN=n(5831);const sN={class:"memory-center-panel game-panel"},lN={class:"filter-section"},cN={class:"filter-tabs"},dN=["onClick"],uN={class:"tab-icon"},mN={class:"tab-name"},pN={class:"tab-count"},fN=["title"],gN={key:0,class:"export-section"},hN=["title"],vN={class:"export-hint"},bN={key:1,class:"settings-section"},yN={class:"settings-header"},xN={class:"settings-title"},kN={class:"header-actions"},wN=["title"],EN={class:"settings-content"},NN={class:"setting-item"},SN={class:"setting-label"},VN={class:"setting-hint"},_N={class:"setting-item"},CN={class:"setting-label"},AN={class:"setting-hint"},DN={class:"setting-item"},TN={class:"setting-label"},BN={class:"setting-hint"},IN={class:"setting-item"},zN={class:"setting-label"},MN={class:"setting-hint"},PN={class:"setting-item"},RN={class:"setting-label"},$N=["placeholder"],ON={class:"setting-hint"},LN={class:"setting-item"},FN={class:"setting-label"},jN=["placeholder"],UN={class:"setting-hint"},qN={class:"settings-actions"},GN={class:"manual-summary-section"},HN={class:"summary-info"},YN={class:"info-text"},WN={class:"info-hint"},XN=["disabled","title"],JN={key:2,class:"panel-content"},KN={class:"vector-toolbar"},QN={class:"vector-status"},ZN={class:"status-text"},eS={class:"vector-actions"},tS=["disabled"],nS=["disabled"],aS={key:0,class:"loading-state"},rS={key:1,class:"empty-state"},oS={class:"empty-text"},iS={key:2,class:"empty-state"},sS={key:3,class:"vector-content"},lS={key:0,class:"vector-stats"},cS={class:"stats-item"},dS={class:"stats-value"},uS={key:0,class:"stats-item"},mS={class:"stats-value"},pS={key:0},fS={key:1,class:"pagination-controls"},gS={class:"pagination-info"},hS={class:"pagination-buttons"},vS=["disabled"],bS=["disabled"],yS=["disabled"],xS=["disabled"],kS={class:"pagination-jump"},wS=["max"],ES={class:"vector-list"},NS={class:"vector-card-header"},SS={class:"vector-badges"},VS={class:"vector-badge"},_S={class:"vector-badge secondary"},CS={class:"vector-time"},AS={key:0,class:"vector-tags"},DS={class:"vector-text"},TS={key:0,class:"loading-state"},BS={class:"loading-text"},IS={key:1,class:"empty-state"},zS={class:"empty-text"},MS={key:2},PS={key:0,class:"pagination-controls"},RS={class:"pagination-info"},$S={class:"pagination-buttons"},OS=["disabled","title"],LS=["disabled","title"],FS=["disabled","title"],jS=["disabled","title"],US={class:"pagination-jump"},qS=["placeholder","max"],GS={class:"memory-list"},HS={class:"memory-header"},YS={class:"memory-actions"},WS=["onClick","title"],XS={class:"memory-time"},JS={class:"memory-content"},KS={key:0,class:"structured-memory"},QS={key:0,class:"memory-title"},ZS={key:0,class:"memory-section-group"},eV={class:"memory-section"},tV={class:"memory-icon"},nV={class:"memory-section-title"},aV={key:1,class:"memory-item"},rV={key:1,class:"memory-section-group"},oV={class:"memory-section"},iV={class:"memory-section-title"},sV={key:1,class:"memory-item"},lV={key:1,class:"simple-memory"},cV={key:1,class:"pagination-controls bottom"},dV={class:"pagination-info"},uV={class:"pagination-buttons"},mV=["disabled"],pV=["disabled"],fV=["disabled"],gV=["disabled"],hV=(0,r.defineComponent)({__name:"MemoryCenterPanel",setup(e){const t=(0,hd.useCharacterStore)(),n=(0,fe.isTavernEnv)(),a=(0,Iu.useGameStateStore)(),{t:o}=(0,re.s)(),i=(0,r.ref)(!1),s=(0,r.ref)("all"),l=(0,r.ref)(!1),c=(0,r.ref)(1),d=(0,r.ref)(10),u=(0,r.ref)(""),m=(0,r.ref)({shortTermLimit:3,midTermTrigger:25,midTermKeep:8,autoSummaryEnabled:!0,midTermFormat:"",longTermFormat:"",useRawMode:!0,useStreaming:!0}),p=(0,r.ref)([]),f=(0,r.ref)([]),g=(0,r.ref)([]),h=(0,r.ref)([]),v=(0,r.ref)(null),b=(0,r.ref)(!1),y=(0,r.ref)(""),x=(0,r.computed)(()=>iN.vectorMemoryService.getConfig().enabled),k=(0,r.computed)(()=>v.value?.total??h.value.length),w=(0,r.computed)(()=>Math.ceil(k.value/d.value)||1),E=(0,r.computed)(()=>{const e=(c.value-1)*d.value,t=e+d.value;return h.value.slice(e,t)}),N=(0,r.computed)(()=>[...g.value,...f.value,...p.value].sort((e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime())),S=(0,r.computed)(()=>[{key:"all",name:o("å…¨éƒ¨"),icon:"ğŸ§ "},{key:"short",name:o("çŸ­æœŸ"),icon:"âš¡"},{key:"medium",name:o("ä¸­æœŸ"),icon:"ğŸ’­"},{key:"long",name:o("é•¿æœŸ"),icon:"ğŸ’¾"},{key:"vector",name:"å‘é‡åº“",icon:"ğŸ§¬"}]),V=(0,r.computed)(()=>{if("all"===s.value)return N.value;switch(s.value){case"short":return p.value;case"medium":return f.value;case"long":return g.value;default:return N.value}}),_=(0,r.computed)(()=>Math.ceil(V.value.length/d.value)||1),C=(0,r.computed)(()=>{const e=(c.value-1)*d.value,t=e+d.value;return V.value.slice(e,t)}),A=(0,r.computed)(()=>p.value.length+f.value.length+g.value.length),D=e=>{if("all"===e)return A.value;switch(e){case"short":return p.value.length;case"medium":return f.value.length;case"long":return g.value.length;case"vector":return k.value;default:return 0}},B=()=>{if("all"===s.value)return o("å¿ƒå¦‚æ˜é•œï¼Œå°šæœªè®°å½•ä»»ä½•ä¿®è¡Œæ„Ÿæ‚Ÿ");const e=S.value.find(e=>e.key===s.value);return o("noMemoryOfType",{type:e?.name})},I=e=>({short:o("çŸ­æœŸè®°å¿†"),medium:o("ä¸­æœŸè®°å¿†"),long:o("é•¿æœŸè®°å¿†")}[e]||o("æœªçŸ¥")),z=e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()} ${t.getHours()}:${t.getMinutes().toString().padStart(2,"0")}`},M=async()=>{try{a.memory||(oN.Yz.warn("è®°å¿†ä¸­å¿ƒ","gameStateStore.memory ä¸å­˜åœ¨ï¼Œæ— æ³•ä¿å­˜è®°å¿†"),a.memory={çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]}),a.memory.çŸ­æœŸè®°å¿†=p.value.map(e=>e.content),a.memory.ä¸­æœŸè®°å¿†=f.value.map(e=>e.content),a.memory.é•¿æœŸè®°å¿†=g.value.map(e=>e.content),await t.saveCurrentGame(),oN.Yz.log("è®°å¿†ä¸­å¿ƒ","è®°å¿†æ•°æ®å·²ä¿å­˜åˆ°å­˜æ¡£")}catch(e){throw oN.Yz.error("è®°å¿†ä¸­å¿ƒ","ä¿å­˜è®°å¿†æ•°æ®åˆ°å­˜æ¡£å¤±è´¥:",e),e}},P=async()=>{if(!b.value){b.value=!0,y.value="";try{const[e,t]=await Promise.all([iN.vectorMemoryService.getAllMemories(),iN.vectorMemoryService.getStats()]);h.value=[...e].sort((e,t)=>t.timestamp-e.timestamp),v.value=t}catch(e){const t=e instanceof Error?e.message:String(e||"");y.value=t?`å‘é‡åº“è¯»å–å¤±è´¥ï¼š${t}`:"å‘é‡åº“è¯»å–å¤±è´¥"}finally{b.value=!1}}},R=()=>"vector"===s.value?w.value:_.value,$=e=>{const t=R();e>=1&&e<=t&&(c.value=e)},O=()=>{c.value=1},L=()=>{c.value=R()},F=()=>{const e=parseInt(u.value),t=R();!isNaN(e)&&e>=1&&e<=t?(c.value=e,u.value=""):ne.o.warning(`è¯·è¾“å…¥ 1-${t} ä¹‹é—´çš„é¡µç `)},j=(0,T.useUIStore)(),U=async()=>{j.showRetryDialog({title:"æ¸…ç©ºå‘é‡åº“",message:"ç¡®å®šè¦æ¸…ç©ºå‘é‡åº“å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚",confirmText:"ç¡®è®¤æ¸…ç©º",cancelText:"å–æ¶ˆ",onConfirm:async()=>{try{await iN.vectorMemoryService.clear(),await P(),ne.o.success("å‘é‡åº“å·²æ¸…ç©º")}catch(e){const t=e instanceof Error?e.message:String(e||"");ne.o.error(t?`æ¸…ç©ºå¤±è´¥ï¼š${t}`:"æ¸…ç©ºå¤±è´¥")}},onCancel:()=>{}})},q=async()=>{try{oN.Yz.log("è®°å¿†ä¸­å¿ƒ","å¼€å§‹åŠ è½½è®°å¿†æ•°æ®");const e=[],t=[],n=[],r=a.memory;r?(oN.Yz.log("è®°å¿†ä¸­å¿ƒ","ä»å­˜æ¡£æ•°æ®åŠ è½½è®°å¿†:",Object.keys(r)),Array.isArray(r.çŸ­æœŸè®°å¿†)&&r.çŸ­æœŸè®°å¿†.forEach((t,n)=>{if(t&&"string"==typeof t){const a={type:"short",content:t,time:z(Date.now()-3e5*n),importance:5};e.push(a)}}),Array.isArray(r.ä¸­æœŸè®°å¿†)&&r.ä¸­æœŸè®°å¿†.forEach((e,n)=>{if(e&&"string"==typeof e){const a={type:"medium",content:e,time:z(Date.now()-36e5*n),importance:7};t.push(a)}}),Array.isArray(r.é•¿æœŸè®°å¿†)?(oN.Yz.log("è®°å¿†ä¸­å¿ƒ",`å‘ç°é•¿æœŸè®°å¿†æ•°ç»„ï¼Œé•¿åº¦: ${r.é•¿æœŸè®°å¿†.length}`),oN.Yz.log("è®°å¿†ä¸­å¿ƒ","é•¿æœŸè®°å¿†åŸå§‹æ•°æ®:",r.é•¿æœŸè®°å¿†),r.é•¿æœŸè®°å¿†.forEach((e,t)=>{if(e&&"string"==typeof e){const a={type:"long",content:e,time:z(Date.now()-864e5*t),importance:9};n.push(a),oN.Yz.log("è®°å¿†ä¸­å¿ƒ",`åŠ è½½é•¿æœŸè®°å¿† #${t}:`,e.substring(0,50))}})):oN.Yz.warn("è®°å¿†ä¸­å¿ƒ","é•¿æœŸè®°å¿†ä¸æ˜¯æ•°ç»„æˆ–ä¸å­˜åœ¨:",r.é•¿æœŸè®°å¿†),oN.Yz.log("è®°å¿†ä¸­å¿ƒ",`è®°å¿†åŠ è½½å®Œæˆ: çŸ­æœŸ${e.length}, ä¸­æœŸ${t.length}, é•¿æœŸ${n.length}`)):oN.Yz.warn("è®°å¿†ä¸­å¿ƒ","æœªæ‰¾åˆ°å­˜æ¡£è®°å¿†æ•°æ®"),p.value=e,f.value=t,g.value=n;const o=e.length+t.length+n.length;oN.Yz.log("è®°å¿†ä¸­å¿ƒ",`è®°å¿†åŠ è½½å®Œæˆï¼šæ€»è®¡ ${o} æ¡è®°å¿†`)}catch(e){oN.Yz.error("è®°å¿†ä¸­å¿ƒ","åŠ è½½è®°å¿†æ•°æ®å¤±è´¥",e),ne.o.error("åŠ è½½è®°å¿†æ•°æ®å¤±è´¥")}},G=async()=>{try{localStorage.setItem("memory-settings",JSON.stringify(m.value)),Qu.emit("memory-settings-updated",m.value),ne.o.success("è®°å¿†ç³»ç»Ÿé…ç½®å·²ä¿å­˜"),oN.Yz.log("è®°å¿†ä¸­å¿ƒ","é…ç½®å·²ä¿å­˜:",m.value)}catch(e){oN.Yz.error("è®°å¿†ä¸­å¿ƒ","ä¿å­˜é…ç½®å¤±è´¥:",e),ne.o.error("ä¿å­˜é…ç½®å¤±è´¥")}},H=()=>{m.value={shortTermLimit:3,midTermTrigger:20,midTermKeep:8,autoSummaryEnabled:!0,midTermFormat:"",longTermFormat:"",useRawMode:!0,useStreaming:!0},ne.o.success("é…ç½®å·²é‡ç½®ä¸ºé»˜è®¤å€¼")},Y=async()=>{const e=m.value.midTermKeep+5;f.value.length<e?ne.o.warning(o("insufficientMemoriesForSummary",{minRequired:e})):await ik.J.triggerMemorySummary({useRawMode:m.value.useRawMode,useStreaming:m.value.useStreaming})},W=()=>{try{const e=a.character?.åå­—||o("ä¿®ä»™è€…"),t=a.worldInfo?.ä¸–ç•Œåç§°||o("ä¿®ä»™ä¸–ç•Œ"),n=a.narrativeHistory||[];if(0===n.length)return void ne.o.warning(o("æ²¡æœ‰å™äº‹å†å²å¯å¯¼å‡º"));let r=o("novelTitle",{characterName:e})+"\n\n";r+=`${o("ä¸–ç•Œæ¡£æ¡ˆ")}: ${t}\n`,r+=`${o("å¯¼å‡ºæ—¶é—´")}: ${(new Date).toLocaleString("zh-CN")}\n`,r+=`${o("æ€»æ®µè½æ•°")}: ${n.length}\n`,r+=`\n${"=".repeat(60)}\n\n`,n.forEach((e,t)=>{const n="user"===e.type||"player"===e.type,a=e.content.replace(/ã€.*?ã€‘/g,"").trim();r+=n?`${o("æˆ‘è¯´")}: "${a}"\n`:`${a}\n`,r+=`${"â”€".repeat(50)}\n\n`,(t+1)%10==0&&(r+=`\n${"â•".repeat(50)}\n`,r+=`${o("ç¬¬")} ${Math.floor((t+1)/10)}\n`,r+=`${"â•".repeat(50)}\n\n`)});const i=new Blob([r],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(i),l=document.createElement("a");l.href=s,l.download=`${e}_ä¿®ä»™å†ç¨‹_${Date.now()}.txt`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s),ne.o.success(o("narrativeHistoryExported",{count:n.length}))}catch(e){console.error("[è®°å¿†ä¸­å¿ƒ] å¯¼å‡ºå¤±è´¥:",e),ne.o.error(o("å¯¼å‡ºå¤±è´¥ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°"))}};(0,r.onMounted)(async()=>{await q(),await(async()=>{try{const e=localStorage.getItem("memory-settings");if(e){const t=JSON.parse(e);return m.value={...m.value,...t},void oN.Yz.log("è®°å¿†ä¸­å¿ƒ","å·²ä»localStorageåŠ è½½é…ç½®",t)}oN.Yz.log("è®°å¿†ä¸­å¿ƒ","æœªæ‰¾åˆ°é…ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼")}catch(e){oN.Yz.error("è®°å¿†ä¸­å¿ƒ","åŠ è½½è®°å¿†é…ç½®å¤±è´¥:",e)}})();try{v.value=await iN.vectorMemoryService.getStats()}catch{}Qu.on("refresh",async()=>{i.value=!0;try{await q()}finally{i.value=!1}}),Qu.on("test",()=>{((e,t,n=5,a)=>{const r={type:e,content:t,time:z(Date.now()),importance:n,parsedContent:a};switch(e){case"short":p.value.push(r);break;case"medium":f.value.push(r);break;case"long":g.value.push(r)}(()=>{let e=!1;if(p.value.length>=3){oN.Yz.log("è®°å¿†ä¸­å¿ƒ","çŸ­æœŸè®°å¿†è¾¾åˆ°ä¸Šé™ï¼Œå¼€å§‹è½¬åŒ–ä¸ºä¸­æœŸè®°å¿†");const t=p.value.shift();if(t){const n={...t,type:"medium",time:o("convertedAt",{time:z(Date.now())}),isConverted:!0};f.value.push(n),e=!0}}if(f.value.length>=25)if(oN.Yz.log("è®°å¿†ä¸­å¿ƒ","ä¸­æœŸè®°å¿†è¾¾åˆ°ä¸Šé™ï¼Œå‡†å¤‡è½¬åŒ–ä¸ºé•¿æœŸè®°å¿†"),m.value.autoSummaryEnabled)oN.Yz.log("è®°å¿†ä¸­å¿ƒ","è‡ªåŠ¨æ€»ç»“å·²å¯ç”¨ï¼Œå°†åœ¨åå°è§¦å‘AIæ€»ç»“"),ik.J.triggerMemorySummary({useRawMode:m.value.useRawMode,useStreaming:m.value.useStreaming}).catch(e=>{oN.Yz.error("è®°å¿†ä¸­å¿ƒ","è‡ªåŠ¨æ€»ç»“å¤±è´¥:",e)});else{const t=f.value.shift();if(t){const n={...t,type:"long",time:o("archivedAt",{time:z(Date.now())}),importance:Math.max(t.importance||5,7),isConverted:!0};g.value.push(n),e=!0}}if(g.value.length>50){g.value.sort((e,t)=>(t.importance||5)-(e.importance||5));const e=g.value.splice(50);oN.Yz.log("è®°å¿†ä¸­å¿ƒ",`é•¿æœŸè®°å¿†è¶…é™ï¼Œç§»é™¤${e.length}æ¡ä½é‡è¦æ€§è®°å¿†`)}e&&ne.o.success(o("è®°å¿†å·²é‡æ–°æ•´ç†ï¼Œæ—§è®°å¿†å·²è½¬åŒ–"))})()})("short","ã€æµ‹è¯•è®°å¿†ã€‘ç”¨äºæ£€éªŒè½¬åŒ–ä¸æ¸²æŸ“ã€‚")}),Qu.on("clear",async()=>{await(async()=>{j.showRetryDialog({title:o("æ¸…ç©ºè®°å¿†"),message:n?o("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è®°å¿†å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼ŒåŒæ—¶ä¼šæ¸…ç©ºé…’é¦†æ•°æ®ã€‚"):"ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰è®°å¿†å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚",confirmText:o("ç¡®è®¤æ¸…ç©º"),cancelText:o("å–æ¶ˆ"),onConfirm:async()=>{try{p.value=[],f.value=[],g.value=[],a.memory&&(a.memory.çŸ­æœŸè®°å¿†=[],a.memory.ä¸­æœŸè®°å¿†=[],a.memory.é•¿æœŸè®°å¿†=[]),await t.saveCurrentGame(),ne.o.success(n?o("è®°å¿†å·²æ¸…ç©ºå¹¶åŒæ­¥åˆ°é…’é¦†"):"è®°å¿†å·²æ¸…ç©º")}catch(e){console.error("[è®°å¿†ä¸­å¿ƒ] æ¸…ç†è®°å¿†å¤±è´¥:",e),ne.o.error(o("æ¸…ç©ºè®°å¿†å¤±è´¥ï¼Œè¯·é‡è¯•"))}},onCancel:()=>{}})})()})});const X=async()=>{try{const e={content:`æµ‹è¯•ä¸­æœŸè®°å¿† ${Date.now()} - è¿™æ˜¯ä¸€æ¡ç”¨äºæµ‹è¯•çš„ä¸­æœŸè®°å¿†è®°å½•ã€‚`,time:z(Date.now()),type:"medium",isConverted:!1,isSummarized:!1,parsedContent:{å½±å“:"æµ‹è¯•",sections:{}}};f.value.push(e),await M(),ne.o.success(o("testMemoryAdded",{count:f.value.length})),oN.Yz.log("è®°å¿†ä¸­å¿ƒ","æ·»åŠ æµ‹è¯•ä¸­æœŸè®°å¿†æˆåŠŸ",e)}catch(e){oN.Yz.error("è®°å¿†ä¸­å¿ƒ","æ·»åŠ æµ‹è¯•è®°å¿†å¤±è´¥",e),ne.o.error(o("æ·»åŠ æµ‹è¯•è®°å¿†å¤±è´¥"))}};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",sN,[(0,r.createCommentVNode)(" è®°å¿†ç±»å‹ç­›é€‰ "),(0,r.createElementVNode)("div",lN,[(0,r.createElementVNode)("div",cN,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(S.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.key,class:(0,r.normalizeClass)(["filter-tab",{active:s.value===e.key}]),onClick:t=>(async e=>{s.value=e,c.value=1,u.value="","vector"===e&&await P()})(e.key)},[(0,r.createElementVNode)("span",uN,(0,r.toDisplayString)(e.icon),1),(0,r.createElementVNode)("span",mN,(0,r.toDisplayString)((0,r.unref)(o)(e.name)),1),(0,r.createElementVNode)("span",pN,(0,r.toDisplayString)(D(e.key)),1)],10,dN))),128)),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["settings-toggle-btn",{active:l.value}]),onClick:t[0]||(t[0]=e=>l.value=!l.value),title:(0,r.unref)(o)("è®°å¿†ç³»ç»Ÿè®¾ç½®")},[(0,r.createVNode)((0,r.unref)(ta.A),{size:16})],10,fN)])]),(0,r.createCommentVNode)(" å¯¼å‡ºå·¥å…· "),l.value||"vector"===s.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",gN,[(0,r.createElementVNode)("button",{class:"export-btn-main",onClick:W,title:(0,r.unref)(o)("å°†å®Œæ•´çš„æ¸¸æˆå¯¹è¯å†å²ï¼ˆåŸºäºå™äº‹å†å²ï¼‰å¯¼å‡ºä¸ºå°è¯´æ ¼å¼ï¼Œæ–¹ä¾¿é˜…è¯»å’Œåˆ†äº«ã€‚")},(0,r.toDisplayString)((0,r.unref)(o)("ğŸ“– å¯¼å‡ºä¸ºå°è¯´")),9,hN),(0,r.createElementVNode)("div",vN,(0,r.toDisplayString)((0,r.unref)(o)("å°†å®Œæ•´çš„æ¸¸æˆå¯¹è¯å†å²ï¼ˆåŸºäºå™äº‹å†å²ï¼‰å¯¼å‡ºä¸ºå°è¯´æ ¼å¼ï¼Œæ–¹ä¾¿é˜…è¯»å’Œåˆ†äº«ã€‚")),1)])),(0,r.createCommentVNode)(" è®°å¿†ç³»ç»Ÿè®¾ç½® "),l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",bN,[(0,r.createElementVNode)("div",yN,[(0,r.createElementVNode)("span",xN,"âš™ï¸ "+(0,r.toDisplayString)((0,r.unref)(o)("è®°å¿†ç³»ç»Ÿé…ç½®")),1),(0,r.createElementVNode)("div",kN,[(0,r.createElementVNode)("button",{class:"test-btn",onClick:X,title:(0,r.unref)(o)("æ·»åŠ æµ‹è¯•ä¸­æœŸè®°å¿†")}," ğŸ§ª "+(0,r.toDisplayString)((0,r.unref)(o)("æµ‹è¯•")),9,wN),(0,r.createElementVNode)("button",{class:"settings-close-btn",onClick:t[1]||(t[1]=e=>l.value=!1)},"âœ•")])]),(0,r.createElementVNode)("div",EN,[(0,r.createElementVNode)("div",NN,[(0,r.createElementVNode)("label",SN,(0,r.toDisplayString)((0,r.unref)(o)("çŸ­æœŸè®°å¿†ä¸Šé™ï¼ˆæ¡ï¼‰ï¼š")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>m.value.shortTermLimit=e),min:"3",max:"10",class:"setting-input"},null,512),[[r.vModelText,m.value.shortTermLimit,void 0,{number:!0}]]),(0,r.createElementVNode)("span",VN,(0,r.toDisplayString)((0,r.unref)(o)("é»˜è®¤"))+": 3",1)]),(0,r.createElementVNode)("div",_N,[(0,r.createElementVNode)("label",CN,(0,r.toDisplayString)((0,r.unref)(o)("ä¸­æœŸè®°å¿†è½¬åŒ–é˜ˆå€¼ï¼ˆæ¡ï¼‰ï¼š")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>m.value.midTermTrigger=e),min:"10",max:"50",class:"setting-input"},null,512),[[r.vModelText,m.value.midTermTrigger,void 0,{number:!0}]]),(0,r.createElementVNode)("span",AN,(0,r.toDisplayString)((0,r.unref)(o)("ä¸­æœŸè®°å¿†è¾¾åˆ°æ­¤æ•°é‡æ—¶ï¼Œè½¬åŒ–ä¸ºé•¿æœŸè®°å¿†ã€‚é»˜è®¤ï¼š25")),1)]),(0,r.createElementVNode)("div",DN,[(0,r.createElementVNode)("label",TN,(0,r.toDisplayString)((0,r.unref)(o)("ä¸­æœŸè®°å¿†ä¿ç•™æ•°é‡ï¼ˆæ¡ï¼‰ï¼š")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=e=>m.value.midTermKeep=e),min:"5",max:"15",class:"setting-input"},null,512),[[r.vModelText,m.value.midTermKeep,void 0,{number:!0}]]),(0,r.createElementVNode)("span",BN,(0,r.toDisplayString)((0,r.unref)(o)("è½¬åŒ–ä¸ºé•¿æœŸè®°å¿†æ—¶ï¼Œä¿ç•™æœ€æ–°çš„è¿™ä¹ˆå¤šæ¡ä¸­æœŸè®°å¿†ã€‚é»˜è®¤ï¼š8")),1)]),(0,r.createElementVNode)("div",IN,[(0,r.createElementVNode)("label",zN,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=e=>m.value.autoSummaryEnabled=e),class:"setting-checkbox"},null,512),[[r.vModelCheckbox,m.value.autoSummaryEnabled]]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(o)("å¯ç”¨è‡ªåŠ¨è®°å¿†è½¬åŒ–")),1)]),(0,r.createElementVNode)("span",MN,(0,r.toDisplayString)((0,r.unref)(o)("å¯ç”¨åï¼Œè‡ªåŠ¨å°†ä¸­æœŸè®°å¿†è½¬åŒ–ä¸ºé•¿æœŸè®°å¿†ã€‚ç¦ç”¨åˆ™ä¸è½¬åŒ–ã€‚")),1)]),(0,r.createElementVNode)("div",PN,[(0,r.createElementVNode)("label",RN,(0,r.toDisplayString)((0,r.unref)(o)("è‡ªå®šä¹‰ä¸­æœŸè®°å¿†æ ¼å¼ï¼š")),1),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>m.value.midTermFormat=e),class:"setting-textarea",placeholder:(0,r.unref)(o)("ç•™ç©ºä½¿ç”¨é»˜è®¤æ ¼å¼ã€‚å¯è‡ªå®šä¹‰AIæç¤ºè¯æ¥æ§åˆ¶è®°å¿†çš„ç”Ÿæˆæ ¼å¼..."),rows:"4"},null,8,$N),[[r.vModelText,m.value.midTermFormat]]),(0,r.createElementVNode)("span",ON,(0,r.toDisplayString)((0,r.unref)(o)("è‡ªå®šä¹‰ä¸­æœŸè®°å¿†çš„AIæç¤ºè¯æ ¼å¼ã€‚ç•™ç©ºä½¿ç”¨ç³»ç»Ÿé»˜è®¤ã€‚")),1)]),(0,r.createElementVNode)("div",LN,[(0,r.createElementVNode)("label",FN,(0,r.toDisplayString)((0,r.unref)(o)("è‡ªå®šä¹‰é•¿æœŸè®°å¿†æ ¼å¼ï¼š")),1),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[7]||(t[7]=e=>m.value.longTermFormat=e),class:"setting-textarea",placeholder:(0,r.unref)(o)("ç•™ç©ºä½¿ç”¨é»˜è®¤æ ¼å¼ã€‚å¯è‡ªå®šä¹‰AIæç¤ºè¯æ¥æ§åˆ¶è®°å¿†çš„ç”Ÿæˆæ ¼å¼..."),rows:"4"},null,8,jN),[[r.vModelText,m.value.longTermFormat]]),(0,r.createElementVNode)("span",UN,(0,r.toDisplayString)((0,r.unref)(o)("è‡ªå®šä¹‰é•¿æœŸè®°å¿†çš„AIæç¤ºè¯æ ¼å¼ã€‚ç•™ç©ºä½¿ç”¨ç³»ç»Ÿé»˜è®¤ã€‚")),1)]),(0,r.createElementVNode)("div",qN,[(0,r.createElementVNode)("button",{class:"action-btn success",onClick:G}," ğŸ’¾ "+(0,r.toDisplayString)((0,r.unref)(o)("ä¿å­˜é…ç½®")),1),(0,r.createElementVNode)("button",{class:"action-btn info",onClick:H},(0,r.toDisplayString)((0,r.unref)(o)("é‡ç½®ä¸ºé»˜è®¤")),1)]),(0,r.createCommentVNode)(" æ‰‹åŠ¨æ€»ç»“è§¦å‘ "),(0,r.createElementVNode)("div",GN,[(0,r.createElementVNode)("div",HN,[(0,r.createElementVNode)("span",YN,(0,r.toDisplayString)((0,r.unref)(o)("å½“å‰ä¸­æœŸè®°å¿†ï¼š"))+" "+(0,r.toDisplayString)(f.value.length)+" "+(0,r.toDisplayString)((0,r.unref)(o)("æ¡")),1),(0,r.createElementVNode)("span",WN,(0,r.toDisplayString)((0,r.unref)(o)("autoSummaryTriggerHint",{count:m.value.midTermTrigger})),1)]),(0,r.createElementVNode)("button",{class:"action-btn warning",onClick:Y,disabled:f.value.length<m.value.midTermKeep+5,title:f.value.length<m.value.midTermKeep+5?(0,r.unref)(o)("manualSummaryRequirement",{count:m.value.midTermKeep+5}):(0,r.unref)(o)("æ‰‹åŠ¨è§¦å‘AIæ€»ç»“")}," ğŸ“ "+(0,r.toDisplayString)((0,r.unref)(o)("æ‰‹åŠ¨æ€»ç»“ä¸­æœŸè®°å¿†")),9,XN)])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" è®°å¿†åˆ—è¡¨ "),l.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",JN,["vector"===s.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("div",KN,[(0,r.createElementVNode)("div",QN,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["status-dot",{enabled:x.value}])},null,2),(0,r.createElementVNode)("span",ZN,(0,r.toDisplayString)(x.value?"å‘é‡æ£€ç´¢å·²å¯ç”¨":"å‘é‡æ£€ç´¢æœªå¯ç”¨ï¼ˆä¸ä¼šå‚ä¸AIæ£€ç´¢ï¼‰"),1)]),(0,r.createElementVNode)("div",eS,[(0,r.createElementVNode)("button",{class:"action-btn info",onClick:P,disabled:b.value},"åˆ·æ–°",8,tS),(0,r.createElementVNode)("button",{class:"action-btn warning",onClick:U,disabled:b.value||0===k.value},"æ¸…ç©ºå‘é‡åº“",8,nS)])]),b.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",aS,t[16]||(t[16]=[(0,r.createElementVNode)("div",{class:"loading-spinner"},"â³",-1),(0,r.createElementVNode)("div",{class:"loading-text"},"æ­£åœ¨è¯»å–å‘é‡åº“...",-1)]))):y.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",rS,[t[17]||(t[17]=(0,r.createElementVNode)("div",{class:"empty-icon"},"âš ï¸",-1)),(0,r.createElementVNode)("div",oS,(0,r.toDisplayString)(y.value),1)])):0===k.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",iS,t[18]||(t[18]=[(0,r.createElementVNode)("div",{class:"empty-icon"},"ğŸ§¬",-1),(0,r.createElementVNode)("div",{class:"empty-text"},"å‘é‡åº“ä¸ºç©º",-1)]))):((0,r.openBlock)(),(0,r.createElementBlock)("div",sS,[v.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",lS,[(0,r.createElementVNode)("div",cS,[t[19]||(t[19]=(0,r.createElementVNode)("span",{class:"stats-label"},"æ€»æ•°",-1)),(0,r.createElementVNode)("span",dS,(0,r.toDisplayString)(v.value.total),1)]),Object.keys(v.value.byCategory).length?((0,r.openBlock)(),(0,r.createElementBlock)("div",uS,[t[20]||(t[20]=(0,r.createElementVNode)("span",{class:"stats-label"},"åˆ†ç±»",-1)),(0,r.createElementVNode)("span",mS,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Object.entries(v.value.byCategory),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e[0],class:"stats-chip"},[(0,r.createTextVNode)((0,r.toDisplayString)(e[0])+": "+(0,r.toDisplayString)(e[1]),1),t<Object.keys(v.value.byCategory).length-1?((0,r.openBlock)(),(0,r.createElementBlock)("span",pS," Â· ")):(0,r.createCommentVNode)("v-if",!0)]))),128))])])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),k.value>d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",fS,[(0,r.createElementVNode)("div",gS,"ç¬¬ "+(0,r.toDisplayString)(c.value)+" / "+(0,r.toDisplayString)(w.value)+" é¡µï¼Œå…± "+(0,r.toDisplayString)(k.value)+" æ¡",1),(0,r.createElementVNode)("div",hS,[(0,r.createElementVNode)("button",{class:"page-btn",onClick:O,disabled:1===c.value},"â®ï¸",8,vS),(0,r.createElementVNode)("button",{class:"page-btn",onClick:t[8]||(t[8]=e=>$(c.value-1)),disabled:1===c.value},"â—€ï¸",8,bS),(0,r.createElementVNode)("button",{class:"page-btn",onClick:t[9]||(t[9]=e=>$(c.value+1)),disabled:c.value===w.value},"â–¶ï¸",8,yS),(0,r.createElementVNode)("button",{class:"page-btn",onClick:L,disabled:c.value===w.value},"â­ï¸",8,xS)]),(0,r.createElementVNode)("div",kS,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=e=>u.value=e),placeholder:"é¡µ",class:"jump-input",onKeyup:(0,r.withKeys)(F,["enter"]),min:"1",max:w.value},null,40,wS),[[r.vModelText,u.value]]),(0,r.createElementVNode)("button",{class:"jump-btn",onClick:F},"è·³è½¬")])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",ES,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(E.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"vector-card"},[(0,r.createElementVNode)("div",NS,[(0,r.createElementVNode)("div",SS,[(0,r.createElementVNode)("span",VS,(0,r.toDisplayString)(e.category),1),(0,r.createElementVNode)("span",_S,"é‡è¦: "+(0,r.toDisplayString)(e.importance),1)]),(0,r.createElementVNode)("div",CS,(0,r.toDisplayString)(z(e.timestamp)),1)]),e.tags?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",AS,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.tags,e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"vector-tag"},"#"+(0,r.toDisplayString)(e),1))),128))])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",DS,(0,r.toDisplayString)(e.content),1)]))),128))])]))],64)):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",TS,[t[21]||(t[21]=(0,r.createElementVNode)("div",{class:"loading-spinner"},"â³",-1)),(0,r.createElementVNode)("div",BS,(0,r.toDisplayString)((0,r.unref)(o)("æ­£åœ¨è¯»å–è®°å¿†...")),1)])):0===C.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",IS,[t[22]||(t[22]=(0,r.createElementVNode)("div",{class:"empty-icon"},"ğŸ§ ",-1)),(0,r.createElementVNode)("div",zS,(0,r.toDisplayString)(B()),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",MS,[(0,r.createCommentVNode)(" åˆ†é¡µæ§åˆ¶ "),V.value.length>d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",PS,[(0,r.createElementVNode)("div",RS,(0,r.toDisplayString)((0,r.unref)(o)("ç¬¬ {currentPage} / {totalPages} é¡µï¼Œå…± {total} æ¡è®°å¿†",{currentPage:c.value,totalPages:_.value,total:V.value.length})),1),(0,r.createElementVNode)("div",$S,[(0,r.createElementVNode)("button",{class:"page-btn",onClick:O,disabled:1===c.value,title:(0,r.unref)(o)("é¦–é¡µ")}," â®ï¸ ",8,OS),(0,r.createElementVNode)("button",{class:"page-btn",onClick:t[11]||(t[11]=e=>$(c.value-1)),disabled:1===c.value,title:(0,r.unref)(o)("ä¸Šä¸€é¡µ")}," â—€ï¸ ",8,LS),(0,r.createElementVNode)("button",{class:"page-btn",onClick:t[12]||(t[12]=e=>$(c.value+1)),disabled:c.value===_.value,title:(0,r.unref)(o)("ä¸‹ä¸€é¡µ")}," â–¶ï¸ ",8,FS),(0,r.createElementVNode)("button",{class:"page-btn",onClick:L,disabled:c.value===_.value,title:(0,r.unref)(o)("æœ«é¡µ")}," â­ï¸ ",8,jS)]),(0,r.createElementVNode)("div",US,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=e=>u.value=e),placeholder:(0,r.unref)(o)("é¡µ"),class:"jump-input",onKeyup:(0,r.withKeys)(F,["enter"]),min:"1",max:_.value},null,40,qS),[[r.vModelText,u.value]]),(0,r.createElementVNode)("button",{class:"jump-btn",onClick:F},(0,r.toDisplayString)((0,r.unref)(o)("è·³è½¬")),1)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",GS,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(C.value,(e,n)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:(0,r.normalizeClass)(["memory-card",`memory-${e.type}`])},[(0,r.createElementVNode)("div",HS,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["memory-type-badge",`badge-${e.type}`])},(0,r.toDisplayString)((a=e.type,{short:"âš¡",medium:"ğŸ’­",long:"ğŸ’¾"}[a]||"ğŸ§ "))+" "+(0,r.toDisplayString)(I(e.type)),3),(0,r.createElementVNode)("div",YS,[(0,r.createElementVNode)("button",{class:"delete-memory-btn",onClick:(0,r.withModifiers)(t=>(async e=>{j.showRetryDialog({title:o("åˆ é™¤è®°å¿†"),message:o("confirmDeleteMemory",{type:I(e.type),content:e.content.substring(0,50)}),confirmText:o("åˆ é™¤"),cancelText:o("å–æ¶ˆ"),onConfirm:async()=>{try{let t=-1;switch(e.type){case"short":t=p.value.findIndex(t=>t===e),-1!==t&&p.value.splice(t,1);break;case"medium":t=f.value.findIndex(t=>t===e),-1!==t&&f.value.splice(t,1);break;case"long":t=g.value.findIndex(t=>t===e),-1!==t&&g.value.splice(t,1)}if(-1===t)return void ne.o.error(o("æœªæ‰¾åˆ°è¦åˆ é™¤çš„è®°å¿†"));await M(),oN.Yz.log("è®°å¿†ä¸­å¿ƒ",`âœ… å·²åˆ é™¤${I(e.type)}å¹¶åŒæ­¥åˆ°å­˜æ¡£`),ne.o.success(o("memoryDeleted",{type:I(e.type)}))}catch(e){oN.Yz.error("è®°å¿†ä¸­å¿ƒ","åˆ é™¤è®°å¿†å¤±è´¥:",e);const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";ne.o.error(o("deleteFailed",{error:t}))}},onCancel:()=>{}})})(e),["stop"]),title:(0,r.unref)(o)("åˆ é™¤æ­¤è®°å¿†")}," ğŸ—‘ï¸ ",8,WS),(0,r.createElementVNode)("div",XS,(0,r.toDisplayString)(e.time),1)])]),(0,r.createElementVNode)("div",JS,[e.parsedContent&&e.parsedContent.format?((0,r.openBlock)(),(0,r.createElementBlock)("div",KS,[e.parsedContent.title?((0,r.openBlock)(),(0,r.createElementBlock)("div",QS," ã€"+(0,r.toDisplayString)(e.parsedContent.title)+"ã€‘ ",1)):(0,r.createCommentVNode)("v-if",!0),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.parsedContent.format.sections,t=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:t.key},[e.parsedContent.sections&&e.parsedContent.sections[t.key]?((0,r.openBlock)(),(0,r.createElementBlock)("div",ZS,[(0,r.createElementVNode)("div",eV,[(0,r.createElementVNode)("span",tV,(0,r.toDisplayString)(t.icon),1),(0,r.createElementVNode)("span",nV,(0,r.toDisplayString)(t.title),1)]),(0,r.createCommentVNode)(" ç¡®ä¿åªåœ¨æ•°ç»„æ—¶æ‰éå†ï¼Œå­—ç¬¦ä¸²ç›´æ¥æ˜¾ç¤º "),Array.isArray(e.parsedContent.sections[t.key])?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(e.parsedContent.sections[t.key],e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"memory-item"},(0,r.toDisplayString)(e),1))),128)):((0,r.openBlock)(),(0,r.createElementBlock)("div",aV,(0,r.toDisplayString)(e.parsedContent.sections[t.key]),1))])):(0,r.createCommentVNode)("v-if",!0)],64))),128)),(0,r.createCommentVNode)(" æœªè¯†åˆ«çš„é€šç”¨å†…å®¹ "),e.parsedContent.sections.general?((0,r.openBlock)(),(0,r.createElementBlock)("div",rV,[(0,r.createElementVNode)("div",oV,[t[23]||(t[23]=(0,r.createElementVNode)("span",{class:"memory-icon"},"ğŸ“",-1)),(0,r.createElementVNode)("span",iV,(0,r.toDisplayString)((0,r.unref)(o)("å…¶ä»–è®°å½•")),1)]),(0,r.createCommentVNode)(" ç¡®ä¿åªåœ¨æ•°ç»„æ—¶æ‰éå†ï¼Œå­—ç¬¦ä¸²ç›´æ¥æ˜¾ç¤º "),Array.isArray(e.parsedContent.sections.general)?((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:0},(0,r.renderList)(e.parsedContent.sections.general,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"memory-item"},(0,r.toDisplayString)(e),1))),128)):((0,r.openBlock)(),(0,r.createElementBlock)("div",sV,(0,r.toDisplayString)(e.parsedContent.sections.general),1))])):(0,r.createCommentVNode)("v-if",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",lV,(0,r.toDisplayString)(e.content),1))])],2);var a}),128))]),(0,r.createCommentVNode)(" åº•éƒ¨åˆ†é¡µæ§åˆ¶ "),V.value.length>d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",cV,[(0,r.createElementVNode)("div",dV,(0,r.toDisplayString)((0,r.unref)(o)("é¡µ"))+" "+(0,r.toDisplayString)(c.value)+" / "+(0,r.toDisplayString)(_.value),1),(0,r.createElementVNode)("div",uV,[(0,r.createElementVNode)("button",{class:"page-btn",onClick:O,disabled:1===c.value}," â®ï¸ ",8,mV),(0,r.createElementVNode)("button",{class:"page-btn",onClick:t[14]||(t[14]=e=>$(c.value-1)),disabled:1===c.value}," â—€ï¸ ",8,pV),(0,r.createElementVNode)("button",{class:"page-btn",onClick:t[15]||(t[15]=e=>$(c.value+1)),disabled:c.value===_.value}," â–¶ï¸ ",8,fV),(0,r.createElementVNode)("button",{class:"page-btn",onClick:L,disabled:c.value===_.value}," â­ï¸ ",8,gV)])])):(0,r.createCommentVNode)("v-if",!0)]))],64))]))]))}});var vV=n(508),bV={};bV.styleTagTransform=k(),bV.setAttributes=v(),bV.insert=g().bind(null,"head"),bV.domAPI=p(),bV.insertStyleElement=y(),u()(vV.A,bV),vV.A&&vV.A.locals&&vV.A.locals;const yV=(0,N.A)(hV,[["__scopeId","data-v-6cd84794"]]);var xV=n(6728);n(3943);const kV=(0,V.A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),wV=(0,V.A)("mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),EV=(0,V.A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),NV=(0,V.A)("sprout",[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]]),SV=(0,V.A)("handshake",[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]]),VV=(0,V.A)("backpack",[["path",{d:"M4 10a4 4 0 0 1 4-4h8a4 4 0 0 1 4 4v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1ol0lm"}],["path",{d:"M8 10h8",key:"c7uz4u"}],["path",{d:"M8 18h8",key:"1no2b1"}],["path",{d:"M8 22v-6a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",key:"1fr6do"}],["path",{d:"M9 6V4a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2",key:"donm21"}]]),_V=(0,V.A)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]),CV={class:"character-details-wrapper"},AV={key:0,class:"loading-container"},DV={key:1,class:"error-container"},TV={class:"error-icon"},BV={key:2,class:"character-details-content"},IV={class:"character-header-card"},zV={class:"header-content"},MV={class:"profile-section"},PV={class:"avatar-wrapper"},RV=["title"],$V={class:"avatar-text"},OV={class:"identity-info"},LV={class:"character-title"},FV={class:"character-subtitle"},jV={class:"subtitle-item race-text"},UV={class:"subtitle-item age-text"},qV={class:"subtitle-item origin-text"},GV={class:"core-stats-grid"},HV={class:"stat-card realm-card"},YV={class:"card-icon"},WV={class:"card-content"},XV={class:"card-label"},JV={class:"card-value realm-value"},KV={key:0,class:"stat-card spirit-card"},QV={class:"card-icon"},ZV={class:"card-content"},e_={class:"card-label"},t_={class:"card-value spirit-value"},n_=["title"],a_={class:"card-icon"},r_={class:"card-content"},o_={class:"card-label"},i_={class:"card-value location-value"},s_=["title"],l_={class:"card-icon"},c_={class:"card-content"},d_={class:"card-label"},u_={class:"card-value origin-value"},m_={key:3,class:"stat-card reputation-card"},p_={class:"card-icon"},f_={class:"card-content"},g_={class:"card-label"},h_={class:"card-value reputation-value"},v_={class:"cultivation-section"},b_={key:0,class:"cultivation-status mortal-status"},y_={class:"status-text"},x_={key:1,class:"cultivation-progress-card"},k_={class:"progress-header"},w_={class:"progress-label"},E_={class:"progress-percentage"},N_={class:"progress-bar-container"},S_={class:"progress-bar-bg"},V_={class:"progress-text"},__={key:2,class:"cultivation-status waiting-status"},C_={class:"status-icon"},A_={class:"status-text"},D_={class:"content-grid"},T_={class:"info-section"},B_={class:"section-title"},I_={class:"title-icon"},z_={class:"vitals-grid"},M_={class:"vital-label"},P_={class:"vital-bar"},R_={class:"bar-container"},$_={class:"vital-text"},O_={class:"vital-item reputation-item"},L_={class:"vital-label"},F_={class:"reputation-display"},j_={class:"reputation-value"},U_={class:"info-section"},q_={class:"section-title"},G_={class:"title-icon"},H_={class:"basic-info-grid"},Y_={class:"basic-info-item"},W_={class:"info-label"},X_={class:"info-value realm"},J_={key:0,class:"basic-info-item"},K_={class:"info-label"},Q_={class:"basic-info-item"},Z_={class:"info-label"},eC={class:"basic-info-item"},tC={class:"info-label"},nC={class:"info-value"},aC={key:1,class:"basic-info-item"},rC={class:"info-label"},oC={class:"info-value location"},iC={key:2,class:"basic-info-item"},sC={class:"info-label"},lC={class:"info-value world"},cC={class:"info-section"},dC={class:"section-title"},uC={class:"title-icon"},mC={class:"talent-content"},pC={class:"talent-tier-card"},fC={class:"tier-header"},gC={class:"tier-icon"},hC={class:"tier-label"},vC={class:"tier-value-display"},bC={key:0,class:"tier-description"},yC={class:"root-header"},xC={class:"root-icon"},kC={class:"root-label"},wC={class:"click-hint"},EC={class:"root-main-info"},NC={class:"property-badges"},SC={class:"prop-badge speed-badge"},VC={key:0,class:"root-description"},_C={key:1,class:"root-effects"},CC={class:"effects-tags"},AC={class:"talents-card"},DC={class:"talents-header"},TC={class:"talents-icon"},BC={class:"talents-label"},IC={key:0,class:"talents-count"},zC={key:0,class:"talents-container"},MC=["title"],PC={class:"talent-name"},RC={key:0,class:"talent-description-display"},$C={key:1,class:"talents-container no-talents"},OC={class:"talent-item no-talent"},LC={class:"talent-name"},FC={class:"info-section"},jC={class:"section-title"},UC={class:"title-icon"},qC={class:"attributes-display"},GC={class:"final-attributes"},HC={class:"attribute-group-title"},YC={class:"attributes-grid"},WC={class:"attr-name"},XC={class:"attr-value"},JC={class:"attribute-breakdown"},KC={class:"innate-attrs"},QC={class:"attribute-group-title"},ZC={class:"attributes-grid compact"},eA={class:"attr-name"},tA={class:"attr-value"},nA={class:"acquired-attrs"},aA={class:"attribute-group-title"},rA={class:"attributes-grid compact"},oA={class:"attr-name"},iA={class:"attr-value"},sA={class:"info-section"},lA={class:"section-title"},cA={class:"title-icon"},dA={key:0,class:"empty-state"},uA={class:"empty-icon"},mA={key:1,class:"cultivation-display"},pA={class:"technique-info"},fA={class:"technique-main"},gA={class:"technique-quality"},hA={class:"technique-toggle"},vA={class:"technique-details"},bA={class:"technique-description"},yA={key:0,class:"technique-effects"},xA={class:"effects-title"},kA={class:"effects-list"},wA={key:0,class:"effect-item"},EA={class:"effect-label"},NA={class:"effect-value"},SA={key:1,class:"effect-item"},VA={class:"effect-label"},_A={class:"attribute-bonuses"},CA={key:1,class:"technique-effects no-effects"},AA={class:"effects-title"},DA={class:"no-effects-text"},TA={class:"technique-progress"},BA={key:0,class:"progress-item"},IA={class:"progress-label"},zA={class:"progress-bar"},MA={class:"progress-text"},PA={key:0,class:"learned-skills"},RA={class:"skills-title"},$A={class:"skills-count"},OA={class:"skills-preview"},LA={class:"skills-list-compact"},FA={key:0,class:"more-skills"},jA={class:"skills-details"},UA={key:0,class:"skill-category"},qA={class:"category-title"},GA={class:"skills-grid"},HA=["onClick"],YA={class:"skill-name"},WA={class:"skill-type"},XA={class:"skill-source"},JA={class:"skill-proficiency-mini"},KA={class:"skill-status"},QA={key:1,class:"skill-category"},ZA={class:"category-title"},eD={class:"skills-grid"},tD=["onClick"],nD={class:"skill-name"},aD={class:"skill-type"},rD={class:"skill-unlock"},oD={class:"info-section"},iD={class:"section-title"},sD={class:"title-icon"},lD={key:0,class:"empty-state"},cD={class:"empty-icon"},dD={key:1,class:"dao-list"},uD={class:"dao-header-section"},mD={class:"dao-summary"},pD={class:"dao-count"},fD={class:"dao-preview"},gD=["onClick"],hD={class:"dao-header"},vD={class:"dao-name"},bD={class:"dao-stage"},yD={class:"dao-progress"},xD={class:"progress-bar small"},kD={class:"progress-text small"},wD={key:0,class:"more-dao"},ED={class:"dao-details"},ND=["onClick"],SD={class:"dao-header"},VD={class:"dao-name"},_D={class:"dao-stage"},CD={class:"dao-progress"},AD={class:"progress-bar small"},DD={class:"progress-text small"},TD={class:"dao-stats"},BD={class:"stat-item"},ID={class:"stat-label"},zD={class:"stat-value"},MD={class:"stat-item"},PD={class:"stat-label"},RD={class:"stat-value"},$D={class:"info-section"},OD={class:"section-title"},LD={class:"title-icon"},FD={key:0,class:"empty-state"},jD={class:"empty-icon"},UD={key:1,class:"relationships-summary"},qD={class:"relationship-stats"},GD={class:"stat-item"},HD={class:"stat-label"},YD={class:"stat-value"},WD={class:"stat-item"},XD={class:"stat-label"},JD={class:"stat-value"},KD={class:"info-section"},QD={class:"section-title"},ZD={class:"title-icon"},eT={class:"inventory-summary"},tT={class:"inventory-stats"},nT={class:"stat-group"},aT={class:"stat-item"},rT={class:"stat-label"},oT={class:"stat-value"},iT={class:"stat-item"},sT={class:"stat-label"},lT={class:"stat-value"},cT={class:"stat-item"},dT={class:"stat-label"},uT={class:"stat-value"},mT={class:"spirit-stones"},pT={class:"stones-title"},fT={class:"stones-grid"},gT={class:"stone-name"},hT={class:"stone-count"},vT={key:0,class:"info-section"},bT={class:"section-title"},yT={class:"title-icon"},xT={class:"sect-info"},kT={class:"sect-header"},wT={class:"sect-name"},ET={class:"sect-type"},NT={class:"sect-details"},ST={class:"detail-row"},VT={class:"detail-label"},_T={class:"detail-value"},CT={class:"detail-row"},AT={class:"detail-label"},DT={class:"detail-value"},TT={class:"detail-row"},BT={class:"detail-label"},IT={class:"modal-header"},zT={class:"modal-content"},MT={class:"skill-detail-grid"},PT={class:"skill-detail-item"},RT={class:"detail-label"},$T={class:"detail-value"},OT={class:"skill-detail-item"},LT={class:"detail-label"},FT={class:"skill-detail-item"},jT={class:"detail-label"},UT={class:"detail-value"},qT={class:"skill-detail-item"},GT={class:"detail-label"},HT={class:"detail-value"},YT={class:"skill-detail-item"},WT={class:"detail-label"},XT={class:"detail-value"},JT={class:"skill-description"},KT={class:"modal-header"},QT={class:"modal-content"},ZT={class:"dao-progress-section"},eB={class:"dao-stage-info"},tB={class:"stage-label"},nB={class:"stage-value"},aB={class:"dao-progress-bar"},rB={class:"progress-bar-bg"},oB={class:"progress-text"},iB={class:"dao-stats-grid"},sB={class:"dao-stat-item"},lB={class:"stat-label"},cB={class:"stat-value"},dB={class:"dao-stat-item"},uB={class:"stat-label"},mB={class:"stat-value"},pB={class:"dao-description"},fB={class:"modal-header"},gB={class:"modal-content"},hB={class:"spirit-root-detail-grid"},vB={class:"detail-card"},bB={class:"detail-header"},yB={class:"detail-icon"},xB={class:"detail-title"},kB={class:"detail-card"},wB={class:"detail-header"},EB={class:"detail-icon"},NB={class:"detail-title"},SB={class:"detail-card"},VB={class:"detail-header"},_B={class:"detail-icon"},CB={class:"detail-title"},AB={class:"detail-value speed-value"},DB={key:0,class:"spirit-root-effects-section"},TB={class:"effects-grid"},BB={key:1,class:"advanced-details"},IB={class:"advanced-grid"},zB={key:0,class:"advanced-item"},MB={class:"advanced-label"},PB={class:"advanced-value"},RB={key:1,class:"advanced-item"},$B={class:"advanced-label"},OB={class:"advanced-value"},LB=(0,r.defineComponent)({__name:"CharacterDetailsPanel",setup(e){const{t}=(0,re.s)(),n=(0,T.useUIStore)(),a=(0,hd.useCharacterStore)(),o=(0,Iu.useGameStateStore)(),i=((0,fe.isTavernEnv)(),(0,r.ref)(!1)),s=(0,r.computed)(()=>o.toSaveData()),l=(0,r.computed)(()=>o.character),c=(0,r.computed)(()=>o.attributes),d=(0,r.computed)(()=>o.location),u=(0,r.computed)(()=>o.sectMemberInfo),m=(0,r.computed)(()=>o.thousandDao),p=(0,r.ref)(!1),f=(0,r.ref)(!1),g=(0,r.ref)(!1),h=(0,r.ref)(!1),v=(0,r.ref)(!1),b=(0,r.ref)(!1),y=(0,r.ref)(null),x=(0,r.ref)(null),k=(0,r.computed)(()=>{const e=String(l.value?.åå­—||"").trim();return e?e.charAt(0):"?"}),w=(0,r.computed)(()=>{const e=l.value?.å‡ºç”Ÿæ—¥æœŸ,t=s.value?.å…ƒæ•°æ®?.æ—¶é—´;return e&&t?((e,t)=>{let n=t.å¹´-e.å¹´;return(t.æœˆ<e.æœˆ||t.æœˆ===e.æœˆ&&t.æ—¥<e.æ—¥)&&n--,Math.max(0,n)})({å¹´:e.å¹´,æœˆ:e.æœˆ,æ—¥:e.æ—¥,å°æ—¶:e.å°æ—¶??0,åˆ†é’Ÿ:e.åˆ†é’Ÿ??0},t):c.value?.å¯¿å‘½?.å½“å‰||0}),E=(0,r.computed)(()=>{if(!s.value?.è§’è‰²?.ä¿®ç‚¼?.ä¿®ç‚¼åŠŸæ³•||!s.value?.è§’è‰²?.èƒŒåŒ…?.ç‰©å“)return null;const e=s.value.è§’è‰²?.ä¿®ç‚¼?.ä¿®ç‚¼åŠŸæ³•?.ç‰©å“ID;if(!e)return null;const t=s.value.è§’è‰².èƒŒåŒ….ç‰©å“[e];return t&&"åŠŸæ³•"===t.ç±»å‹?t:null}),N=(0,r.computed)(()=>m.value?.å¤§é“åˆ—è¡¨?Object.values(m.value.å¤§é“åˆ—è¡¨).filter(e=>e.æ˜¯å¦è§£é”):[]),S=(0,r.computed)(()=>{if(!c.value)return[];const e=e=>("number"==typeof e?e:Number(e||0))||0,n=e=>{const t="number"==typeof e?e:Number(e||0);return isNaN(t)?0:Math.max(0,t)};return[{label:t("æ°”è¡€"),current:e(c.value.æ°”è¡€?.å½“å‰),max:n(c.value.æ°”è¡€?.ä¸Šé™),color:"red"},{label:t("çµæ°”"),current:e(c.value.çµæ°”?.å½“å‰),max:n(c.value.çµæ°”?.ä¸Šé™),color:"blue"},{label:t("ç¥è¯†"),current:e(c.value.ç¥è¯†?.å½“å‰),max:n(c.value.ç¥è¯†?.ä¸Šé™),color:"gold"}]}),V=e=>{const t="number"==typeof e?e:Number(e||0);return isNaN(t)?0:Math.max(0,Math.min(10,Math.round(t)))},_=(0,r.computed)(()=>{const e=l.value?.å…ˆå¤©å…­å¸||{};return{æ ¹éª¨:V(e.æ ¹éª¨),çµæ€§:V(e.çµæ€§),æ‚Ÿæ€§:V(e.æ‚Ÿæ€§),æ°”è¿:V(e.æ°”è¿),é­…åŠ›:V(e.é­…åŠ›),å¿ƒæ€§:V(e.å¿ƒæ€§)}}),D=(0,r.computed)(()=>{if(!s.value)return _.value;const e=(0,xV.MH)(_.value,s.value);return e?.æœ€ç»ˆå…­å¸||_.value}),B=(0,r.computed)(()=>{const e={æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0};if(!s.value)return e;const t=(0,xV.MH)(_.value,s.value);return t?.åå¤©å…­å¸||e}),I=(0,r.computed)(()=>{const e=E.value?.åŠŸæ³•æ•ˆæœ;if(!e)return!1;const t=e.ä¿®ç‚¼é€Ÿåº¦åŠ æˆ&&e.ä¿®ç‚¼é€Ÿåº¦åŠ æˆ>0,n=e.å±æ€§åŠ æˆ&&Object.keys(e.å±æ€§åŠ æˆ).length>0;return t||n}),z=(0,r.computed)(()=>{const e=E.value;return e&&e.åŠŸæ³•æŠ€èƒ½?e.åŠŸæ³•æŠ€èƒ½.filter(t=>{const n=(e.å·²è§£é”æŠ€èƒ½||[]).includes(t.æŠ€èƒ½åç§°),a=t.ç†Ÿç»ƒåº¦è¦æ±‚??100,r=(e.ä¿®ç‚¼è¿›åº¦||0)>=a;return!(n||r)}).map(e=>{const n=e.ç†Ÿç»ƒåº¦è¦æ±‚??100;return{name:e.æŠ€èƒ½åç§°,description:e.æŠ€èƒ½æè¿°||"",type:t("åŠŸæ³•æŠ€èƒ½"),unlockCondition:0===n?t("è‡ªåŠ¨è§£é”"):t("éœ€è¦ç†Ÿç»ƒåº¦ {0}%").replace("{0}",String(n)),unlocked:!1}}):[]}),M=(0,r.computed)(()=>{const e=s.value?.æŠ€èƒ½?.æŒæ¡æŠ€èƒ½||[];let n=[];if(E.value&&E.value.åŠŸæ³•æŠ€èƒ½){const e=E.value;if(!e.åŠŸæ³•æŠ€èƒ½)return[];n=e.åŠŸæ³•æŠ€èƒ½.filter(t=>{const n=(e.å·²è§£é”æŠ€èƒ½||[]).includes(t.æŠ€èƒ½åç§°),a=(e.ä¿®ç‚¼è¿›åº¦||0)>=(t.ç†Ÿç»ƒåº¦è¦æ±‚??100);return n||a}).map(n=>({name:n.æŠ€èƒ½åç§°,proficiency:ae(n.æŠ€èƒ½åç§°,"technique"),source:e.åç§°||t("åŠŸæ³•"),type:t("åŠŸæ³•æŠ€èƒ½"),description:n.æŠ€èƒ½æè¿°||t("é€šè¿‡åŠŸæ³•ä¿®ç‚¼æŒæ¡"),unlocked:!0}))}const a=[...e.map(e=>({name:e.æŠ€èƒ½åç§°,proficiency:e.ç†Ÿç»ƒåº¦,source:e.æ¥æº,type:t("æŒæ¡æŠ€èƒ½"),description:e.æŠ€èƒ½æè¿°,unlocked:!0})),...n],r=new Map;return a.forEach(e=>{r.has(e.name)||r.set(e.name,e)}),Array.from(r.values())}),P=(0,r.computed)(()=>M.value.length),R=(0,r.computed)(()=>{const e=s.value?.ç¤¾äº¤?.å…³ç³»||{};return Object.values(e).filter(e=>e&&e.åå­—).length}),$=(0,r.computed)(()=>{if(!s.value?.ç¤¾äº¤?.å…³ç³»)return 0;const e=Object.values(s.value.ç¤¾äº¤.å…³ç³»).filter(e=>e&&e.åå­—);if(0===e.length)return 0;const t=e.reduce((e,t)=>e+(t.å¥½æ„Ÿåº¦||0),0);return Math.round(t/e.length)}),O=(0,r.computed)(()=>{const e=s.value?.è§’è‰²?.èƒŒåŒ…?.ç‰©å“||{};return Object.entries(e).filter(([e,t])=>!String(e).startsWith("_")&&t&&"object"==typeof t&&"string"==typeof t.åç§°).length}),L=[{name:t("ä¸‹å“"),class:"grade-common"},{name:t("ä¸­å“"),class:"grade-rare"},{name:t("ä¸Šå“"),class:"grade-epic"},{name:t("æå“"),class:"grade-legend"}],F=()=>{const e=c.value?.å¢ƒç•Œ?.åç§°;switch(e){case"å‡¡äºº":case"æ™®é€šäºº":return t("ç­‰å¾…ä»™ç¼˜");case"è›®å…½":case"çµå…½":return t("é‡æ€§æœ¬èƒ½");case"åŠ¨ç‰©":return t("è‡ªç„¶çŠ¶æ€");default:return t("ç­‰å¾…è§‰é†’")}},j=()=>{const e=c.value?.å¢ƒç•Œ?.å½“å‰è¿›åº¦,t=c.value?.å¢ƒç•Œ?.ä¸‹ä¸€çº§æ‰€éœ€;return"number"==typeof e&&"number"==typeof t&&t>0},U=()=>{const e=c.value?.å¢ƒç•Œ?.å½“å‰è¿›åº¦||0,t=c.value?.å¢ƒç•Œ?.ä¸‹ä¸€çº§æ‰€éœ€||100;if(t>=1e4){const n=Math.floor(e/1e3),a=Math.floor(t/1e3);if(n>0&&a>0)return`${n}k/${a}k`}return`${e}/${t}`},q=e=>{if(e&&"object"==typeof e)return om({name:e.åç§°||"",é˜¶æ®µ:e.é˜¶æ®µ||"",å½“å‰è¿›åº¦:e.å½“å‰è¿›åº¦,ä¸‹ä¸€çº§æ‰€éœ€:e.ä¸‹ä¸€çº§æ‰€éœ€});const t="string"==typeof e?e:void 0,n=c.value?.å¢ƒç•Œ?.å½“å‰è¿›åº¦,a=c.value?.å¢ƒç•Œ?.ä¸‹ä¸€çº§æ‰€éœ€,r=c.value?.å¢ƒç•Œ?.é˜¶æ®µ;return om({name:t,é˜¶æ®µ:r,å½“å‰è¿›åº¦:n,ä¸‹ä¸€çº§æ‰€éœ€:a})},G=()=>{const e=c.value?.å¢ƒç•Œ?.å½“å‰è¿›åº¦||0,t=c.value?.å¢ƒç•Œ?.ä¸‹ä¸€çº§æ‰€éœ€||100;return Math.round(e/t*100)},H=e=>e?"string"==typeof e?e:e.name||t("æœªçŸ¥"):t("æœªçŸ¥"),Y=e=>"object"==typeof e&&e&&e.description||"",W=e=>{let n=[];if(!e)return[];if(Array.isArray(e))n=e;else if("string"==typeof e)try{const t=JSON.parse(e);Array.isArray(t)?n=t:"string"==typeof t&&(n=[{name:t,description:""}])}catch(t){n=[{name:e,description:""}]}else"object"==typeof e&&null!==e&&(n=[e]);return n.map(e=>{if("string"==typeof e)return{name:e,description:""};if("object"==typeof e&&null!==e){const n=e,a=n.name||n["åç§°"]||"",r=n.description||n["æè¿°"]||"";return a||r?{name:a||t("æœªçŸ¥å¤©èµ‹"),description:r}:null}return null}).filter(Boolean)},X=(e,n="border")=>e?`${n}-quality-${e.å“è´¨?.quality||t("æœªçŸ¥")}`:"",J=e=>m.value?.å¤§é“åˆ—è¡¨?.[e],K=e=>J(e)?.å½“å‰é˜¶æ®µ||0,Q=e=>{const t=J(e);if(!t)return 0;const n=t.å½“å‰é˜¶æ®µ||0,a=t.é˜¶æ®µåˆ—è¡¨?.[n];if(!a)return 0;const r=a.çªç ´ç»éªŒ;return r<=0?100:Math.min(100,Math.round(t.å½“å‰ç»éªŒ/r*100))},Z=e=>J(e)?.å½“å‰ç»éªŒ||0,ee=e=>J(e)?.æ€»ç»éªŒ||0,te=e=>{const t=s.value?.è§’è‰²?.èƒŒåŒ…?.ç‰©å“||{};return Object.entries(t).filter(([e,t])=>!String(e).startsWith("_")&&t&&"object"==typeof t).map(([,e])=>e).filter(t=>t.ç±»å‹===e).length},ne=e=>s.value?.è§’è‰²?.èƒŒåŒ…?.çµçŸ³?.[t(e)]||0,ae=(e,t)=>30+(e.split("").reduce((e,t)=>e+t.charCodeAt(0),0)+t.length)%66,oe=()=>{v.value=!v.value},ie=()=>{b.value=!b.value},se=()=>{p.value=!p.value},le=e=>{x.value=e,g.value=!0},ce=e=>{y.value=e,f.value=!0},de=()=>{h.value=!0},ue=()=>{f.value=!1,g.value=!1,h.value=!1,y.value=null,x.value=null},me=()=>{if(!x.value)return null;const e=J(x.value);if(!e)return{name:x.value,stage:t("åˆå§‹é˜¶æ®µ"),currentExp:0,totalExp:0,progressPercent:0,description:t("æ­¤å¤§é“å·²è§£é”ï¼Œä½†å°šæœªå¼€å§‹ä¿®ç‚¼")};const n=e.å½“å‰é˜¶æ®µ||0,a=e.å½“å‰ç»éªŒ||0,r=e.æ€»ç»éªŒ||0,o=Q(x.value);let i;return i=e.é˜¶æ®µåˆ—è¡¨?.[n]?e.é˜¶æ®µåˆ—è¡¨[n].åç§°:0===n?t("æœªé—¨"):t("ç¬¬{0}é˜¶æ®µ").replace("{0}",String(n)),{name:x.value,stage:i,currentExp:a,totalExp:r,progressPercent:o,description:e.æè¿°||t("æ­¤é“æ·±å¥¥ç„å¦™ï¼Œéœ€æŒä¹‹ä»¥æ’æ–¹èƒ½æœ‰æ‰€æˆå°±")}},pe=()=>{if(!y.value)return null;if("object"==typeof y.value&&"proficiency"in y.value){const e=y.value;return{name:e.name,type:e.type,status:t("å·²è§£é”"),condition:t("å·²æŒæ¡"),description:e.description,source:e.source,proficiency:e.proficiency}}if("string"==typeof y.value)return{name:y.value,type:t("åŠŸæ³•æŠ€èƒ½"),status:t("å·²è§£é”"),condition:t("ä¿®ç‚¼å®Œæˆ"),description:t("é€šè¿‡ä¿®ç‚¼åŠŸæ³•è·å¾—çš„æŠ€èƒ½"),source:t("åŠŸæ³•ä¿®ç‚¼")};const e=y.value;return{name:e.name,type:e.type,status:e.unlocked?t("å·²è§£é”"):t("æœªè§£é”"),condition:e.unlocked?t("ä¿®ç‚¼å®Œæˆ"):e.unlockCondition,description:e.description,source:t("åŠŸæ³•ä¼ æ‰¿")}},ge=async()=>{i.value=!0;try{await a.reloadFromStorage();const e=(0,Iu.useGameStateStore)(),n=e.getCurrentSaveData();n&&(e.loadFromSaveData(n),oN.Yz.log(t("äººç‰©è¯¦æƒ…"),t("å·²åŒæ­¥æœ€æ–°æ•°æ®åˆ° gameStateStore")))}catch(e){oN.Yz.error(t("äººç‰©è¯¦æƒ…"),t("åˆ·æ–°æ•°æ®å¤±è´¥"),e)}finally{i.value=!1}};(0,r.onMounted)(async()=>{oN.Yz.log(t("äººç‰©è¯¦æƒ…"),t("ç»„ä»¶æŒ‚è½½ï¼ŒåŒæ­¥æ•°æ®"))}),(0,r.onActivated)(async()=>{oN.Yz.log(t("äººç‰©è¯¦æƒ…"),t("é¢æ¿æ¿€æ´»"))});const he=e=>e?"string"==typeof e?e:e.åç§°||e.name||t("å¾…å®š"):t("å¾…å®š"),ve=e=>{if(!e)return t("æœªçŸ¥");if("string"==typeof e)return e;const n=e.åç§°||e.name||t("æœªçŸ¥");let a=e.å“çº§||e.tier;return a&&"object"==typeof a&&(a=a.quality||a.grade||t("æœªçŸ¥")),a&&a!==t("æœªçŸ¥")&&a!==t("å‡¡å“")?`${n}(${t(a)})`:n},be=e=>"object"==typeof e&&e&&(e.å“çº§||e.tier)||t("å‡¡å“"),ye=e=>"object"==typeof e&&e&&(e.æè¿°||e.description)||t("æœªçŸ¥"),xe=e=>{if("object"!=typeof e||!e)return"spirit-unknown";let t=e.å“çº§||e.tier||"";"object"==typeof t&&t&&(t=t.quality||t.grade||"");const n=String(t).toLowerCase();return n.includes("ç¥å“")?"spirit-divine":n.includes("æå“")?"spirit-supreme":n.includes("ä¸Šå“")?"spirit-superior":n.includes("ä¸­å“")?"spirit-medium":n.includes("ä¸‹å“")?"spirit-inferior":n.includes("å‡¡å“")?"spirit-common":"spirit-unknown"},ke=e=>{const n=e?.çµæ ¹;if(n&&"object"==typeof n){const e=n;if("base_multiplier"in e&&e.base_multiplier)return`${e.base_multiplier}x`;if("cultivation_speed"in e&&e.cultivation_speed)return e.cultivation_speed}const a=be(n);return{å‡¡å“:"1.0x",ä¸‹å“:"1.1x",ä¸­å“:"1.3x",ä¸Šå“:"1.6x",æå“:"2.0x",ç¥å“:"2.8x",ç‰¹æ®Š:t("ç‰¹æ®Š")}[a]||"1.0x"},we=e=>{const t=e?.çµæ ¹;if(t&&"object"==typeof t){const e=t;if("special_effects"in e&&Array.isArray(e.special_effects))return e.special_effects}return[]};return(e,a)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",CV,[i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",AV,[a[4]||(a[4]=(0,r.createElementVNode)("div",{class:"loading-spinner"},null,-1)),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(t)("åŠ è½½è§’è‰²æ•°æ®..")),1)])):l.value&&s.value?l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",BV,[(0,r.createCommentVNode)(" é¡¶éƒ¨è§’è‰²ä¿¡æ¯å¡ç‰‡ - å…¨æ–°è®¾è®¡ "),(0,r.createElementVNode)("div",IV,[(0,r.createCommentVNode)(" èƒŒæ™¯è£…é¥° "),a[11]||(a[11]=(0,r.createElementVNode)("div",{class:"header-bg-decoration"},null,-1)),(0,r.createCommentVNode)(" ä¸»è¦ä¿¡æ¯åŒº "),(0,r.createElementVNode)("div",zV,[(0,r.createCommentVNode)(" å·¦ä¾§ï¼šå¤´åƒå’ŒåŸºç¡€ä¿¡æ¯ "),(0,r.createElementVNode)("div",MV,[(0,r.createElementVNode)("div",PV,[(0,r.createElementVNode)("div",{class:"avatar-circle",title:l.value.åå­—},[(0,r.createElementVNode)("span",$V,(0,r.toDisplayString)(k.value),1)],8,RV),a[5]||(a[5]=(0,r.createElementVNode)("div",{class:"avatar-glow"},null,-1))]),(0,r.createElementVNode)("div",OV,[(0,r.createElementVNode)("h1",LV,(0,r.toDisplayString)(l.value.åå­—),1),(0,r.createElementVNode)("div",FV,[l.value.æ€§åˆ«?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["subtitle-item",`gender-badge gender-${l.value.æ€§åˆ«}`])},(0,r.toDisplayString)(("ç”·"===l.value.æ€§åˆ«?"â™‚":"â™€")+" "+(0,r.unref)(t)(l.value.æ€§åˆ«)),3),a[6]||(a[6]=(0,r.createElementVNode)("span",{class:"subtitle-divider"},"Â·",-1))],64)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("span",jV,(0,r.toDisplayString)((0,r.unref)(t)(l.value.ç§æ—||"äººæ—")),1),a[7]||(a[7]=(0,r.createElementVNode)("span",{class:"subtitle-divider"},"Â·",-1)),(0,r.createElementVNode)("span",UV,(0,r.toDisplayString)(w.value)+(0,r.toDisplayString)((0,r.unref)(t)("å²")),1),a[8]||(a[8]=(0,r.createElementVNode)("span",{class:"subtitle-divider"},"Â·",-1)),(0,r.createElementVNode)("span",qV,(0,r.toDisplayString)(he(l.value.å‡ºç”Ÿ)),1)])])]),(0,r.createCommentVNode)(" ä¸­é—´ï¼šæ ¸å¿ƒæ•°æ®å¡ç‰‡ç»„ "),(0,r.createElementVNode)("div",GV,[(0,r.createCommentVNode)(" å¢ƒç•Œå¡ç‰‡ "),(0,r.createElementVNode)("div",HV,[(0,r.createElementVNode)("div",YV,[(0,r.createVNode)((0,r.unref)(wV),{size:20})]),(0,r.createElementVNode)("div",WV,[(0,r.createElementVNode)("div",XV,(0,r.toDisplayString)((0,r.unref)(t)("å¢ƒç•Œ")),1),(0,r.createElementVNode)("div",JV,(0,r.toDisplayString)(q(c.value?.å¢ƒç•Œ?.åç§°)||(0,r.unref)(t)("å‡¡äºº")),1)])]),(0,r.createCommentVNode)(" çµæ ¹å¡ç‰‡ "),l.value.çµæ ¹?((0,r.openBlock)(),(0,r.createElementBlock)("div",KV,[(0,r.createElementVNode)("div",QV,[(0,r.createVNode)((0,r.unref)(A),{size:20})]),(0,r.createElementVNode)("div",ZV,[(0,r.createElementVNode)("div",e_,(0,r.toDisplayString)((0,r.unref)(t)("çµæ ¹")),1),(0,r.createElementVNode)("div",t_,(0,r.toDisplayString)((m=l.value.çµæ ¹,m?"string"==typeof m?m:m.åç§°||m.name||t("æœªçŸ¥"):t("æœªçŸ¥"))),1)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ä½ç½®å¡ç‰‡ "),d.value?.æè¿°?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"stat-card location-card",title:d.value.æè¿°},[(0,r.createElementVNode)("div",a_,[(0,r.createVNode)((0,r.unref)(EV),{size:20})]),(0,r.createElementVNode)("div",r_,[(0,r.createElementVNode)("div",o_,(0,r.toDisplayString)((0,r.unref)(t)("ä½ç½®")),1),(0,r.createElementVNode)("div",i_,(0,r.toDisplayString)(d.value.æè¿°),1)])],8,n_)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å‡ºç”Ÿå¡ç‰‡ "),l.value.å‡ºç”Ÿ?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:2,class:"stat-card origin-card clickable",onClick:a[0]||(a[0]=e=>(e=>{if(e&&"object"==typeof e){const a=e.åç§°||e.name,r=e.æè¿°||e.description;n.showDetailModal({title:t("å‡ºèº«èƒŒæ™¯: {0}").replace("{0}",a),content:r})}})(l.value.å‡ºç”Ÿ)),title:"object"==typeof l.value.å‡ºç”Ÿ?(0,r.unref)(t)("ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…"):""},[(0,r.createElementVNode)("div",l_,[(0,r.createVNode)((0,r.unref)(NV),{size:20})]),(0,r.createElementVNode)("div",c_,[(0,r.createElementVNode)("div",d_,(0,r.toDisplayString)((0,r.unref)(t)("å‡ºç”Ÿ")),1),(0,r.createElementVNode)("div",u_,(0,r.toDisplayString)(he(l.value.å‡ºç”Ÿ)),1)])],8,s_)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å£°æœ›å¡ç‰‡ "),c.value?.å£°æœ›?((0,r.openBlock)(),(0,r.createElementBlock)("div",m_,[(0,r.createElementVNode)("div",p_,[(0,r.createVNode)((0,r.unref)(uf),{size:20})]),(0,r.createElementVNode)("div",f_,[(0,r.createElementVNode)("div",g_,(0,r.toDisplayString)((0,r.unref)(t)("å£°æœ›")),1),(0,r.createElementVNode)("div",h_,(0,r.toDisplayString)(c.value.å£°æœ›),1)])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" å³ä¾§ï¼šä¿®ä¸ºè¿›åº¦ "),(0,r.createElementVNode)("div",v_,[(o=c.value?.å¢ƒç•Œ?.åç§°,!o||["å‡¡äºº","è›®å…½","çµå…½","åŠ¨ç‰©","å‡¡ç‰©","æ™®é€šäºº"].includes(o)?((0,r.openBlock)(),(0,r.createElementBlock)("div",b_,[a[9]||(a[9]=(0,r.createElementVNode)("div",{class:"status-icon"},"ğŸŒ±",-1)),(0,r.createElementVNode)("div",y_,(0,r.toDisplayString)(F()),1)])):j()?((0,r.openBlock)(),(0,r.createElementBlock)("div",x_,[(0,r.createElementVNode)("div",k_,[(0,r.createElementVNode)("span",w_,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ä¸ºè¿›åº¦")),1),(0,r.createElementVNode)("span",E_,(0,r.toDisplayString)(G())+"%",1)]),(0,r.createElementVNode)("div",N_,[(0,r.createElementVNode)("div",S_,[(0,r.createElementVNode)("div",{class:"progress-bar-fill",style:(0,r.normalizeStyle)({width:G()+"%"})},a[10]||(a[10]=[(0,r.createElementVNode)("div",{class:"progress-bar-shine"},null,-1)]),4)])]),(0,r.createElementVNode)("div",V_,(0,r.toDisplayString)(U()),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",__,[(0,r.createElementVNode)("div",C_,[(0,r.createVNode)((0,r.unref)(A),{size:18})]),(0,r.createElementVNode)("div",A_,(0,r.toDisplayString)((0,r.unref)(t)("ç­‰å¾…ä»™ç¼˜")),1)])))])])]),(0,r.createCommentVNode)(" ä¸»è¦å†…å®¹åŒºåŸŸ "),(0,r.createElementVNode)("div",D_,[(0,r.createCommentVNode)(" ç”Ÿå‘½çŠ¶æ€ "),(0,r.createElementVNode)("div",T_,[(0,r.createElementVNode)("h3",B_,[(0,r.createElementVNode)("div",I_,[(0,r.createVNode)((0,r.unref)(cf.A),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("ç”Ÿå‘½çŠ¶æ€")),1)]),(0,r.createElementVNode)("div",z_,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(S.value,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"vital-item",key:e.label},[(0,r.createElementVNode)("div",M_,(0,r.toDisplayString)(e.label),1),(0,r.createElementVNode)("div",P_,[(0,r.createElementVNode)("div",R_,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["bar-fill",`bar-${e.color}`]),style:(0,r.normalizeStyle)({width:(t=e.current,n=e.max,Math.round(t/n*100)+"%")})},null,6)]),(0,r.createElementVNode)("div",$_,(0,r.toDisplayString)(e.current)+"/"+(0,r.toDisplayString)(e.max),1)])]);var t,n}),128)),(0,r.createCommentVNode)(" å£°æœ›æ˜¾ç¤º "),(0,r.createElementVNode)("div",O_,[(0,r.createElementVNode)("div",L_,(0,r.toDisplayString)((0,r.unref)(t)("å£°æœ›")),1),(0,r.createElementVNode)("div",F_,[(0,r.createElementVNode)("span",j_,(0,r.toDisplayString)(c.value?.å£°æœ›||(0,r.unref)(t)("ç±ç±æ— å")),1)])])])]),(0,r.createCommentVNode)(" è§’è‰²åŸºç¡€ä¿¡æ¯ "),(0,r.createElementVNode)("div",U_,[(0,r.createElementVNode)("h3",q_,[(0,r.createElementVNode)("div",G_,[(0,r.createVNode)((0,r.unref)(C),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("è§’è‰²èƒŒæ™¯")),1)]),(0,r.createElementVNode)("div",H_,[(0,r.createElementVNode)("div",Y_,[(0,r.createElementVNode)("span",W_,(0,r.toDisplayString)((0,r.unref)(t)("å¢ƒç•Œ")),1),(0,r.createElementVNode)("span",X_,(0,r.toDisplayString)(q(c.value?.å¢ƒç•Œ)),1)]),l.value.æ€§åˆ«?((0,r.openBlock)(),(0,r.createElementBlock)("div",J_,[(0,r.createElementVNode)("span",K_,(0,r.toDisplayString)((0,r.unref)(t)("æ€§åˆ«")),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["info-value gender",`gender-${l.value.æ€§åˆ«}`])},(0,r.toDisplayString)((0,r.unref)(t)(l.value.æ€§åˆ«)),3)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",Q_,[(0,r.createElementVNode)("span",Z_,(0,r.toDisplayString)((0,r.unref)(t)("çµæ ¹")),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["info-value spirit-root",`root-${xe(l.value.çµæ ¹)}`])},(0,r.toDisplayString)(ve(l.value.çµæ ¹)),3)]),(0,r.createElementVNode)("div",eC,[(0,r.createElementVNode)("span",tC,(0,r.toDisplayString)((0,r.unref)(t)("å¹´é¾„")),1),(0,r.createElementVNode)("span",nC,(0,r.toDisplayString)(w.value)+(0,r.toDisplayString)((0,r.unref)(t)("å²")),1)]),d.value?.æè¿°?((0,r.openBlock)(),(0,r.createElementBlock)("div",aC,[(0,r.createElementVNode)("span",rC,(0,r.toDisplayString)((0,r.unref)(t)("ä½ç½®")),1),(0,r.createElementVNode)("span",oC,(0,r.toDisplayString)(d.value.æè¿°),1)])):l.value.ä¸–ç•Œ?((0,r.openBlock)(),(0,r.createElementBlock)("div",iC,[(0,r.createElementVNode)("span",sC,(0,r.toDisplayString)((0,r.unref)(t)("ä¸–ç•Œ")),1),(0,r.createElementVNode)("span",lC,(0,r.toDisplayString)(l.value.ä¸–ç•Œ),1)])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createCommentVNode)(" å¤©èµ‹ä¸çµæ ¹ "),(0,r.createElementVNode)("div",cC,[(0,r.createElementVNode)("h3",dC,[(0,r.createElementVNode)("div",uC,[(0,r.createVNode)((0,r.unref)(A),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("å¤©èµ‹ä¸çµæ ¹")),1)]),(0,r.createElementVNode)("div",mC,[(0,r.createCommentVNode)(" å¤©èµ„ç­‰çº§å¡ç‰‡ "),(0,r.createElementVNode)("div",pC,[(0,r.createElementVNode)("div",fC,[(0,r.createElementVNode)("div",gC,[(0,r.createVNode)((0,r.unref)(uf),{size:18})]),(0,r.createElementVNode)("span",hC,(0,r.toDisplayString)((0,r.unref)(t)("å¤©èµ„ç­‰çº§")),1)]),(0,r.createElementVNode)("div",vC,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["tier-value",`tier-${H(l.value.å¤©èµ„)}`])},(0,r.toDisplayString)(H(l.value.å¤©èµ„)),3)]),Y(l.value.å¤©èµ„)?((0,r.openBlock)(),(0,r.createElementBlock)("div",bC,(0,r.toDisplayString)(Y(l.value.å¤©èµ„)),1)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" çµæ ¹å±æ€§å¡ç‰‡ (Re-designed) "),(0,r.createElementVNode)("div",{class:"spirit-root-card",onClick:de},[(0,r.createElementVNode)("div",yC,[(0,r.createElementVNode)("div",xC,[(0,r.createVNode)((0,r.unref)(Ru),{size:18})]),(0,r.createElementVNode)("span",kC,(0,r.toDisplayString)((0,r.unref)(t)("çµæ ¹å±æ€§")),1),(0,r.createElementVNode)("span",wC,(0,r.toDisplayString)((0,r.unref)(t)("ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…")),1)]),(0,r.createElementVNode)("div",EC,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["root-name",`root-${xe(l.value.çµæ ¹)}`])},(0,r.toDisplayString)(ve(l.value.çµæ ¹)),3),(0,r.createElementVNode)("div",NC,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["prop-badge grade-badge",`grade-${be(l.value.çµæ ¹)||"å‡¡å“"}`])},(0,r.toDisplayString)((0,r.unref)(t)(be(l.value.çµæ ¹)||"å‡¡å“")),3),(0,r.createElementVNode)("span",SC,(0,r.toDisplayString)(ke(l.value)),1)])]),ye(l.value.çµæ ¹)?((0,r.openBlock)(),(0,r.createElementBlock)("div",VC,(0,r.toDisplayString)(ye(l.value.çµæ ¹)),1)):(0,r.createCommentVNode)("v-if",!0),we(l.value).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",_C,[(0,r.createElementVNode)("div",CC,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(we(l.value),e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"effect-tag"},(0,r.toDisplayString)(e),1))),128))])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" å¤©èµ‹åˆ—è¡¨å¡ç‰‡ "),(0,r.createElementVNode)("div",AC,[(0,r.createElementVNode)("div",DC,[(0,r.createElementVNode)("div",TC,[(0,r.createVNode)((0,r.unref)(A),{size:18})]),(0,r.createElementVNode)("span",BC,(0,r.toDisplayString)((0,r.unref)(t)("å¤©èµ‹ç‰¹è´¨")),1),W(l.value.å¤©èµ‹)?.length?((0,r.openBlock)(),(0,r.createElementBlock)("span",IC,"("+(0,r.toDisplayString)(W(l.value.å¤©èµ‹).length)+")",1)):(0,r.createCommentVNode)("v-if",!0)]),W(l.value.å¤©èµ‹)?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",zC,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(W(l.value.å¤©èµ‹),e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.name,class:"talent-item",title:e.description},[(0,r.createElementVNode)("div",PC,[(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(e.name),1)]),e.description?((0,r.openBlock)(),(0,r.createElementBlock)("div",RC,(0,r.toDisplayString)(e.description),1)):(0,r.createCommentVNode)("v-if",!0)],8,MC))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",$C,[(0,r.createElementVNode)("div",OC,[(0,r.createElementVNode)("div",LC,(0,r.toDisplayString)((0,r.unref)(t)("æ— ")),1)])]))])])]),(0,r.createCommentVNode)(" å…­å¸å±æ€§ "),(0,r.createElementVNode)("div",FC,[(0,r.createElementVNode)("h3",jC,[(0,r.createElementVNode)("div",UC,[(0,r.createVNode)((0,r.unref)(Xu),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("å…­å¸å±æ€§")),1)]),(0,r.createElementVNode)("div",qC,[(0,r.createCommentVNode)(" æœ€ç»ˆå±æ€§ "),(0,r.createElementVNode)("div",GC,[(0,r.createElementVNode)("h4",HC,(0,r.toDisplayString)((0,r.unref)(t)("æœ€ç»ˆå…­å¸")),1),(0,r.createElementVNode)("div",YC,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(D.value,(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:"attribute-item final"},[(0,r.createElementVNode)("span",WC,(0,r.toDisplayString)((0,r.unref)(t)(String(n))),1),(0,r.createElementVNode)("span",XC,(0,r.toDisplayString)(e),1)]))),128))])]),(0,r.createCommentVNode)(" å±æ€§è¯¦æƒ… "),(0,r.createElementVNode)("div",JC,[(0,r.createElementVNode)("div",KC,[(0,r.createElementVNode)("h4",QC,(0,r.toDisplayString)((0,r.unref)(t)("å…ˆå¤©å…­å¸")),1),(0,r.createElementVNode)("div",ZC,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(_.value,(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:"attribute-item innate"},[(0,r.createElementVNode)("span",eA,(0,r.toDisplayString)((0,r.unref)(t)(String(n))),1),(0,r.createElementVNode)("span",tA,(0,r.toDisplayString)(e),1)]))),128))])]),(0,r.createElementVNode)("div",nA,[(0,r.createElementVNode)("h4",aA,(0,r.toDisplayString)((0,r.unref)(t)("åå¤©å…­å¸")),1),(0,r.createElementVNode)("div",rA,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(B.value,(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:(0,r.normalizeClass)(["attribute-item acquired",{"has-bonus":e>0}])},[(0,r.createElementVNode)("span",oA,(0,r.toDisplayString)((0,r.unref)(t)(String(n))),1),(0,r.createElementVNode)("span",iA,(0,r.toDisplayString)(e>0?`+${e}`:e),1)],2))),128))])])])])]),(0,r.createCommentVNode)(" ä¿®ç‚¼åŠŸæ³• "),(0,r.createElementVNode)("div",sA,[(0,r.createElementVNode)("h3",lA,[(0,r.createElementVNode)("div",cA,[(0,r.createVNode)((0,r.unref)(Pu),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ç‚¼åŠŸæ³•")),1)]),E.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",mA,[(0,r.createElementVNode)("div",pA,[(0,r.createElementVNode)("div",{class:"technique-header",onClick:oe},[(0,r.createElementVNode)("div",fA,[(0,r.createElementVNode)("h4",{class:(0,r.normalizeClass)(["technique-name",X(E.value,"text")])},(0,r.toDisplayString)(E.value?.åç§°),3),(0,r.createElementVNode)("div",gA,(0,r.toDisplayString)((0,r.unref)(t)(E.value?.å“è´¨?.quality||"æœªçŸ¥"))+(0,r.toDisplayString)((0,r.unref)(t)("å“"))+(0,r.toDisplayString)(E.value?.å“è´¨?.grade?`${E.value.å“è´¨.grade}${(0,r.unref)(t)("é˜¶")}`:""),1)]),(0,r.createElementVNode)("div",hA,[(0,r.createVNode)((0,r.unref)(Kx),{size:16,class:(0,r.normalizeClass)([{rotated:v.value},"toggle-icon"])},null,8,["class"])])]),(0,r.createCommentVNode)(" åŠŸæ³•è¯¦æƒ…ï¼ˆå¯æŠ˜å ï¼‰ "),(0,r.withDirectives)((0,r.createElementVNode)("div",vA,[(0,r.createElementVNode)("div",bA,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(t)(E.value?.æè¿°||"æ­¤åŠŸæ³•å¥¥å¦™æ— ç©·ï¼Œéšä¿®ç‚¼åŠ æ·±æ–¹å¯é¢†æ‚Ÿå…¶çœŸæ„ã€‚")),1)]),I.value&&E.value?.åŠŸæ³•æ•ˆæœ?((0,r.openBlock)(),(0,r.createElementBlock)("div",yA,[(0,r.createElementVNode)("h5",xA,(0,r.toDisplayString)((0,r.unref)(t)("åŠŸæ³•æ•ˆæœ")),1),(0,r.createElementVNode)("div",kA,[E.value.åŠŸæ³•æ•ˆæœ.ä¿®ç‚¼é€Ÿåº¦åŠ æˆ?((0,r.openBlock)(),(0,r.createElementBlock)("div",wA,[(0,r.createElementVNode)("span",EA,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ç‚¼åŠ æˆï¼š")),1),(0,r.createElementVNode)("span",NA,(0,r.toDisplayString)((100*E.value.åŠŸæ³•æ•ˆæœ.ä¿®ç‚¼é€Ÿåº¦åŠ æˆ).toFixed(0))+"%",1)])):(0,r.createCommentVNode)("v-if",!0),E.value.åŠŸæ³•æ•ˆæœ.å±æ€§åŠ æˆ?((0,r.openBlock)(),(0,r.createElementBlock)("div",SA,[(0,r.createElementVNode)("span",VA,(0,r.toDisplayString)((0,r.unref)(t)("å±æ€§æå‡ï¼š")),1),(0,r.createElementVNode)("div",_A,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(E.value.åŠŸæ³•æ•ˆæœ.å±æ€§åŠ æˆ,(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:n,class:"bonus-tag"},(0,r.toDisplayString)((0,r.unref)(t)(String(n)))+" +"+(0,r.toDisplayString)(e),1))),128))])])):(0,r.createCommentVNode)("v-if",!0)])])):E.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",CA,[(0,r.createElementVNode)("h5",AA,(0,r.toDisplayString)((0,r.unref)(t)("åŠŸæ³•æ•ˆæœ")),1),(0,r.createElementVNode)("p",DA,(0,r.toDisplayString)((0,r.unref)(t)("æ­¤åŠŸæ³•æ— ç‰¹æ®Šæ•ˆæœ")),1)])):(0,r.createCommentVNode)("v-if",!0)],512),[[r.vShow,v.value]]),(0,r.createElementVNode)("div",TA,[E.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",BA,[(0,r.createElementVNode)("span",IA,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ä¸ºè¿›åº¦")),1),(0,r.createElementVNode)("div",zA,[(0,r.createElementVNode)("div",{class:"progress-fill",style:(0,r.normalizeStyle)({width:Math.max(2,E.value.ä¿®ç‚¼è¿›åº¦||0)+"%"})},null,4)]),(0,r.createElementVNode)("span",MA,(0,r.toDisplayString)(E.value.ä¿®ç‚¼è¿›åº¦||0)+"%",1)])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createCommentVNode)(" å·²å­¦æŠ€èƒ½ "),M.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",PA,[(0,r.createElementVNode)("div",{class:"skills-header",onClick:ie},[(0,r.createElementVNode)("h4",RA,(0,r.toDisplayString)((0,r.unref)(t)("å·²æŒæ¡æŠ€èƒ½")),1),(0,r.createElementVNode)("div",$A,"("+(0,r.toDisplayString)(P.value)+(0,r.toDisplayString)((0,r.unref)(t)("ä¸ª"))+")",1),(0,r.createVNode)((0,r.unref)(Kx),{size:14,class:(0,r.normalizeClass)([{rotated:b.value},"toggle-icon"])},null,8,["class"])]),(0,r.withDirectives)((0,r.createElementVNode)("div",OA,[(0,r.createElementVNode)("div",LA,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(M.value.slice(0,3),e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e.name,class:"skill-tag compact"},(0,r.toDisplayString)(e.name),1))),128)),P.value>3?((0,r.openBlock)(),(0,r.createElementBlock)("span",FA,"...")):(0,r.createCommentVNode)("v-if",!0)])],512),[[r.vShow,!b.value]]),(0,r.withDirectives)((0,r.createElementVNode)("div",jA,[(0,r.createCommentVNode)(" æ‰€æœ‰å·²æŒæ¡çš„æŠ€èƒ½ "),M.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",UA,[(0,r.createElementVNode)("h5",qA,(0,r.toDisplayString)((0,r.unref)(t)("æ‰€æœ‰æŠ€èƒ½")),1),(0,r.createElementVNode)("div",GA,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(M.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.name,class:"skill-card",onClick:t=>ce(e)},[(0,r.createElementVNode)("div",YA,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("div",WA,(0,r.toDisplayString)((0,r.unref)(t)(e.type)),1),(0,r.createElementVNode)("div",XA,(0,r.toDisplayString)(e.source),1),(0,r.createElementVNode)("div",JA,(0,r.toDisplayString)((0,r.unref)(t)("ç†Ÿç»ƒåº¦"))+" "+(0,r.toDisplayString)(e.proficiency)+"% ",1),(0,r.createElementVNode)("div",KA,[(0,r.createVNode)((0,r.unref)(uf),{size:12,class:"unlock-icon"})])],8,HA))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æœªè§£é”çš„åŠŸæ³•æŠ€èƒ½ "),z.value.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",QA,[(0,r.createElementVNode)("h5",ZA,(0,r.toDisplayString)((0,r.unref)(t)("æœªè§£é”æŠ€èƒ½")),1),(0,r.createElementVNode)("div",eD,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(z.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.name,class:"skill-card skill-locked",onClick:t=>ce(e)},[(0,r.createElementVNode)("div",nD,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("div",aD,(0,r.toDisplayString)((0,r.unref)(t)(e.type)),1),(0,r.createElementVNode)("div",rD,(0,r.toDisplayString)(e.unlockCondition),1)],8,tD))),128))])])):(0,r.createCommentVNode)("v-if",!0)],512),[[r.vShow,b.value]])])):(0,r.createCommentVNode)("v-if",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",dA,[(0,r.createElementVNode)("div",uA,[(0,r.createVNode)((0,r.unref)(Pu),{size:32})]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("å°šæœªä¿®ç‚¼åŠŸæ³•")),1)]))]),(0,r.createCommentVNode)(" ä¸‰åƒå¤§é“ "),(0,r.createElementVNode)("div",oD,[(0,r.createElementVNode)("h3",iD,[(0,r.createElementVNode)("div",sD,[(0,r.createVNode)((0,r.unref)(Ru),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("ä¸‰åƒå¤§é“")),1)]),N.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",dD,[(0,r.createElementVNode)("div",uD,[(0,r.createElementVNode)("div",mD,[(0,r.createElementVNode)("span",pD,(0,r.toDisplayString)((0,r.unref)(t)("å·²è§£"))+" "+(0,r.toDisplayString)(N.value.length)+" "+(0,r.toDisplayString)((0,r.unref)(t)("æ¡å¤§é“")),1),(0,r.createElementVNode)("button",{class:"dao-expand-btn",onClick:se},[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(p.value?(0,r.unref)(t)("æ”¶èµ·"):(0,r.unref)(t)("å±•å¼€")),1),(0,r.createVNode)((0,r.unref)(Kx),{size:14,class:(0,r.normalizeClass)([{rotated:p.value},"toggle-icon"])},null,8,["class"])])])]),(0,r.withDirectives)((0,r.createElementVNode)("div",fD,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(N.value.slice(0,2).map(e=>e.é“å),e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"dao-item compact",onClick:t=>le(e)},[(0,r.createElementVNode)("div",hD,[(0,r.createElementVNode)("span",vD,(0,r.toDisplayString)(e),1),(0,r.createElementVNode)("span",bD,(0,r.toDisplayString)((0,r.unref)(t)("ç¬¬"))+(0,r.toDisplayString)(K(e))+(0,r.toDisplayString)((0,r.unref)(t)("é˜¶æ®µ")),1)]),(0,r.createElementVNode)("div",yD,[(0,r.createElementVNode)("div",xD,[(0,r.createElementVNode)("div",{class:"progress-fill",style:(0,r.normalizeStyle)({width:Q(e)+"%"})},null,4)]),(0,r.createElementVNode)("span",kD,(0,r.toDisplayString)(Q(e))+"%",1)])],8,gD))),128)),N.value.length>2?((0,r.openBlock)(),(0,r.createElementBlock)("div",wD,(0,r.toDisplayString)((0,r.unref)(t)("è¿˜æœ‰"))+" "+(0,r.toDisplayString)(N.value.length-2)+" "+(0,r.toDisplayString)((0,r.unref)(t)("æ¡å¤§é“..")),1)):(0,r.createCommentVNode)("v-if",!0)],512),[[r.vShow,!p.value]]),(0,r.withDirectives)((0,r.createElementVNode)("div",ED,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(N.value.map(e=>e.é“å),e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"dao-item detailed",onClick:t=>le(e)},[(0,r.createElementVNode)("div",SD,[(0,r.createElementVNode)("span",VD,(0,r.toDisplayString)(e),1),(0,r.createElementVNode)("span",_D,(0,r.toDisplayString)((0,r.unref)(t)("ç¬¬"))+(0,r.toDisplayString)(K(e))+(0,r.toDisplayString)((0,r.unref)(t)("é˜¶æ®µ")),1)]),(0,r.createElementVNode)("div",CD,[(0,r.createElementVNode)("div",AD,[(0,r.createElementVNode)("div",{class:"progress-fill",style:(0,r.normalizeStyle)({width:Q(e)+"%"})},null,4)]),(0,r.createElementVNode)("span",DD,(0,r.toDisplayString)(Q(e))+"%",1)]),(0,r.createElementVNode)("div",TD,[(0,r.createElementVNode)("div",BD,[(0,r.createElementVNode)("span",ID,(0,r.toDisplayString)((0,r.unref)(t)("å½“å‰ç»éªŒ")),1),(0,r.createElementVNode)("span",zD,(0,r.toDisplayString)(Z(e)),1)]),(0,r.createElementVNode)("div",MD,[(0,r.createElementVNode)("span",PD,(0,r.toDisplayString)((0,r.unref)(t)("æ€»ç»éªŒ")),1),(0,r.createElementVNode)("span",RD,(0,r.toDisplayString)(ee(e)),1)])])],8,ND))),128))],512),[[r.vShow,p.value]])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",lD,[(0,r.createElementVNode)("div",cD,[(0,r.createVNode)((0,r.unref)(NV),{size:32})]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("å°šæœªè§£é”å¤§é“")),1)]))]),(0,r.createCommentVNode)(" äººé™…å…³ç³» "),(0,r.createElementVNode)("div",$D,[(0,r.createElementVNode)("h3",OD,[(0,r.createElementVNode)("div",LD,[(0,r.createVNode)((0,r.unref)(C),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("äººé™…å…³ç³»")),1)]),R.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",UD,[(0,r.createElementVNode)("div",qD,[(0,r.createElementVNode)("div",GD,[(0,r.createElementVNode)("span",HD,(0,r.toDisplayString)((0,r.unref)(t)("æ€»äººæ•°")),1),(0,r.createElementVNode)("span",YD,(0,r.toDisplayString)(R.value),1)]),(0,r.createElementVNode)("div",WD,[(0,r.createElementVNode)("span",XD,(0,r.toDisplayString)((0,r.unref)(t)("å¹³å‡å¥½æ„Ÿ")),1),(0,r.createElementVNode)("span",JD,(0,r.toDisplayString)($.value)+"%",1)])])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",FD,[(0,r.createElementVNode)("div",jD,[(0,r.createVNode)((0,r.unref)(SV),{size:32})]),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)("æš‚æ— äººé™…å…³ç³»")),1)]))]),(0,r.createCommentVNode)(" èƒŒåŒ…æ¦‚è§ˆ "),(0,r.createElementVNode)("div",KD,[(0,r.createElementVNode)("h3",QD,[(0,r.createElementVNode)("div",ZD,[(0,r.createVNode)((0,r.unref)(VV),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("èƒŒåŒ…æ¦‚è§ˆ")),1)]),(0,r.createElementVNode)("div",eT,[(0,r.createElementVNode)("div",tT,[(0,r.createElementVNode)("div",nT,[(0,r.createElementVNode)("div",aT,[(0,r.createElementVNode)("span",rT,(0,r.toDisplayString)((0,r.unref)(t)("ç‰©å“æ€»æ•°")),1),(0,r.createElementVNode)("span",oT,(0,r.toDisplayString)(O.value),1)]),(0,r.createElementVNode)("div",iT,[(0,r.createElementVNode)("span",sT,(0,r.toDisplayString)((0,r.unref)(t)("æ³•å®æ•°é‡")),1),(0,r.createElementVNode)("span",lT,(0,r.toDisplayString)(te("æ³•å®")),1)]),(0,r.createElementVNode)("div",cT,[(0,r.createElementVNode)("span",dT,(0,r.toDisplayString)((0,r.unref)(t)("åŠŸæ³•æ•°é‡")),1),(0,r.createElementVNode)("span",uT,(0,r.toDisplayString)(te("åŠŸæ³•")),1)])])]),(0,r.createElementVNode)("div",mT,[(0,r.createElementVNode)("h4",pT,(0,r.toDisplayString)((0,r.unref)(t)("çµçŸ³å‚¨å¤‡")),1),(0,r.createElementVNode)("div",fT,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(L,e=>(0,r.createElementVNode)("div",{key:e.name,class:(0,r.normalizeClass)(["stone-item",e.class])},[(0,r.createElementVNode)("span",gT,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("span",hT,(0,r.toDisplayString)(ne(e.name)),1)],2)),64))])])])]),(0,r.createCommentVNode)(" å®—é—¨ä¿¡æ¯ "),u.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",vT,[(0,r.createElementVNode)("h3",bT,[(0,r.createElementVNode)("div",yT,[(0,r.createVNode)((0,r.unref)(wV),{size:18})]),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t)("å®—é—¨ä¿¡æ¯")),1)]),(0,r.createElementVNode)("div",xT,[(0,r.createElementVNode)("div",kT,[(0,r.createElementVNode)("h4",wT,(0,r.toDisplayString)(u.value?.å®—é—¨åç§°),1),(0,r.createElementVNode)("span",ET,(0,r.toDisplayString)(u.value?.å®—é—¨ç±»å‹),1)]),(0,r.createElementVNode)("div",NT,[(0,r.createElementVNode)("div",ST,[(0,r.createElementVNode)("span",VT,(0,r.toDisplayString)((0,r.unref)(t)("èŒä½")),1),(0,r.createElementVNode)("span",_T,(0,r.toDisplayString)(u.value?.èŒä½),1)]),(0,r.createElementVNode)("div",CT,[(0,r.createElementVNode)("span",AT,(0,r.toDisplayString)((0,r.unref)(t)("è´¡çŒ®å€¼")),1),(0,r.createElementVNode)("span",DT,(0,r.toDisplayString)(u.value?.è´¡çŒ®),1)]),(0,r.createElementVNode)("div",TT,[(0,r.createElementVNode)("span",BT,(0,r.toDisplayString)((0,r.unref)(t)("å…³ç³»")),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["detail-value",`relationship-${u.value?.å…³ç³»}`])},(0,r.toDisplayString)(u.value?.å…³ç³»),3)])])])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" æŠ€èƒ½è¯¦æƒ…å¼¹çª— "),f.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:ue},[(0,r.createElementVNode)("div",{class:"skill-modal",onClick:a[1]||(a[1]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",IT,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(pe()?.name),1),(0,r.createElementVNode)("button",{class:"modal-close-btn",onClick:ue},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})])]),(0,r.createElementVNode)("div",zT,[(0,r.createElementVNode)("div",MT,[(0,r.createElementVNode)("div",PT,[(0,r.createElementVNode)("span",RT,(0,r.toDisplayString)((0,r.unref)(t)("ç±»å‹")),1),(0,r.createElementVNode)("span",$T,(0,r.toDisplayString)((0,r.unref)(t)(pe()?.type??"æœªçŸ¥")),1)]),(0,r.createElementVNode)("div",OT,[(0,r.createElementVNode)("span",LT,(0,r.toDisplayString)((0,r.unref)(t)("çŠ¶æ€")),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["detail-value","status-"+("å·²è§£é”"===pe()?.status?"unlocked":"locked")])},(0,r.toDisplayString)((0,r.unref)(t)(pe()?.status??"æœªçŸ¥")),3)]),(0,r.createElementVNode)("div",FT,[(0,r.createElementVNode)("span",jT,(0,r.toDisplayString)((0,r.unref)(t)("ç†Ÿç»ƒåº¦")),1),(0,r.createElementVNode)("span",UT,(0,r.toDisplayString)(pe()?.proficiency?pe()?.proficiency+"%":(0,r.unref)(t)("æœªçŸ¥")),1)]),(0,r.createElementVNode)("div",qT,[(0,r.createElementVNode)("span",GT,(0,r.toDisplayString)((0,r.unref)(t)("è§£é”æ¡ä»¶")),1),(0,r.createElementVNode)("span",HT,(0,r.toDisplayString)(pe()?.condition),1)]),(0,r.createElementVNode)("div",YT,[(0,r.createElementVNode)("span",WT,(0,r.toDisplayString)((0,r.unref)(t)("æŠ€èƒ½æ¥æº")),1),(0,r.createElementVNode)("span",XT,(0,r.toDisplayString)(pe()?.source),1)])]),(0,r.createElementVNode)("div",JT,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("æŠ€èƒ½æè¿°")),1),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(pe()?.description),1)])])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¤§é“è¯¦æƒ…å¼¹çª— "),g.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"modal-overlay",onClick:ue},[(0,r.createElementVNode)("div",{class:"dao-modal",onClick:a[2]||(a[2]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",KT,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(me()?.name),1),(0,r.createElementVNode)("button",{class:"modal-close-btn",onClick:ue},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})])]),(0,r.createElementVNode)("div",QT,[(0,r.createElementVNode)("div",ZT,[(0,r.createElementVNode)("div",eB,[(0,r.createElementVNode)("span",tB,(0,r.toDisplayString)((0,r.unref)(t)("å½“å‰é˜¶æ®µ")),1),(0,r.createElementVNode)("span",nB,(0,r.toDisplayString)(me()?.stage),1)]),(0,r.createElementVNode)("div",aB,[(0,r.createElementVNode)("div",rB,[(0,r.createElementVNode)("div",{class:"progress-bar-fill",style:(0,r.normalizeStyle)({width:(me()?.progressPercent||0)+"%"})},null,4)]),(0,r.createElementVNode)("span",oB,(0,r.toDisplayString)(me()?.progressPercent)+"%",1)])]),(0,r.createElementVNode)("div",iB,[(0,r.createElementVNode)("div",sB,[(0,r.createElementVNode)("span",lB,(0,r.toDisplayString)((0,r.unref)(t)("å½“å‰ç»éªŒ")),1),(0,r.createElementVNode)("span",cB,(0,r.toDisplayString)(me()?.currentExp),1)]),(0,r.createElementVNode)("div",dB,[(0,r.createElementVNode)("span",uB,(0,r.toDisplayString)((0,r.unref)(t)("æ€»ç»éªŒ")),1),(0,r.createElementVNode)("span",mB,(0,r.toDisplayString)(me()?.totalExp),1)])]),(0,r.createElementVNode)("div",pB,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ç‚¼æ„Ÿæ‚Ÿ")),1),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(me()?.description),1)])])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" çµæ ¹è¯¦æƒ…å¼¹çª— (Re-designed) "),h.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:2,class:"modal-overlay",onClick:ue},[(0,r.createElementVNode)("div",{class:"spirit-root-modal",onClick:a[3]||(a[3]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",fB,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(ve(l.value.çµæ ¹))+" "+(0,r.toDisplayString)((0,r.unref)(t)("è¯¦æƒ…")),1),(0,r.createElementVNode)("button",{class:"modal-close-btn",onClick:ue},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})])]),(0,r.createElementVNode)("div",gB,[(0,r.createElementVNode)("div",hB,[(0,r.createElementVNode)("div",vB,[(0,r.createElementVNode)("div",bB,[(0,r.createElementVNode)("span",yB,[(0,r.createVNode)((0,r.unref)(Ru),{size:14})]),(0,r.createElementVNode)("span",xB,(0,r.toDisplayString)((0,r.unref)(t)("çµæ ¹ç±»å‹")),1)]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["detail-value type-value",`root-${xe(l.value.çµæ ¹)}`])},(0,r.toDisplayString)(ve(l.value.çµæ ¹)),3)]),(0,r.createElementVNode)("div",kB,[(0,r.createElementVNode)("div",wB,[(0,r.createElementVNode)("span",EB,[(0,r.createVNode)((0,r.unref)(uf),{size:14})]),(0,r.createElementVNode)("span",NB,(0,r.toDisplayString)((0,r.unref)(t)("çµæ ¹å“çº§")),1)]),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["detail-value grade-value",`grade-${be(l.value.çµæ ¹)||"å‡¡å“"}`])},(0,r.toDisplayString)((0,r.unref)(t)(be(l.value.çµæ ¹)||"å‡¡å“")),3)]),(0,r.createElementVNode)("div",SB,[(0,r.createElementVNode)("div",VB,[(0,r.createElementVNode)("span",_B,[(0,r.createVNode)((0,r.unref)(_V),{size:14})]),(0,r.createElementVNode)("span",CB,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ç‚¼é€Ÿåº¦")),1)]),(0,r.createElementVNode)("div",AB,(0,r.toDisplayString)(ke(l.value)),1)])]),we(l.value).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",DB,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("ç‰¹æ®Šæ•ˆæœ")),1),(0,r.createElementVNode)("div",TB,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(we(l.value),e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"effect-tag-modal"},(0,r.toDisplayString)(e),1))),128))])])):(0,r.createCommentVNode)("v-if",!0),"object"==typeof l.value.çµæ ¹&&l.value.çµæ ¹?((0,r.openBlock)(),(0,r.createElementBlock)("div",BB,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("è¯¦ç»†ä¿¡æ¯")),1),(0,r.createElementVNode)("div",IB,["object"==typeof l.value.çµæ ¹&&l.value.çµæ ¹.base_multiplier?((0,r.openBlock)(),(0,r.createElementBlock)("div",zB,[(0,r.createElementVNode)("span",MB,(0,r.toDisplayString)((0,r.unref)(t)("åŸºç¡€å€ç‡:")),1),(0,r.createElementVNode)("span",PB,(0,r.toDisplayString)(l.value.çµæ ¹.base_multiplier)+"x",1)])):(0,r.createCommentVNode)("v-if",!0),"object"==typeof l.value.çµæ ¹&&l.value.çµæ ¹.cultivation_speed?((0,r.openBlock)(),(0,r.createElementBlock)("div",RB,[(0,r.createElementVNode)("span",$B,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ç‚¼é€Ÿåº¦:")),1),(0,r.createElementVNode)("span",OB,(0,r.toDisplayString)(l.value.çµæ ¹.cultivation_speed),1)])):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0)])])])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",DV,[(0,r.createElementVNode)("div",TV,[(0,r.createVNode)((0,r.unref)(kV),{size:48})]),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(t)("æ— æ³•åŠ è½½è§’è‰²æ•°æ®")),1),(0,r.createElementVNode)("button",{class:"retry-btn",onClick:ge},(0,r.toDisplayString)((0,r.unref)(t)("é‡è¯•")),1)]))]);var o,m}}});var FB=n(4728),jB={};jB.styleTagTransform=k(),jB.setAttributes=v(),jB.insert=g().bind(null,"head"),jB.domAPI=p(),jB.insertStyleElement=y(),u()(FB.A,jB),FB.A&&FB.A.locals&&FB.A.locals;const UB=(0,N.A)(LB,[["__scopeId","data-v-3baad3fb"]]),qB=(0,V.A)("sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),GB=(0,V.A)("gem",[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),HB=(0,V.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),YB=(0,V.A)("square-dashed",[["path",{d:"M5 3a2 2 0 0 0-2 2",key:"y57alp"}],["path",{d:"M19 3a2 2 0 0 1 2 2",key:"18rm91"}],["path",{d:"M21 19a2 2 0 0 1-2 2",key:"1j7049"}],["path",{d:"M5 21a2 2 0 0 1-2-2",key:"sbafld"}],["path",{d:"M9 3h1",key:"1yesri"}],["path",{d:"M9 21h1",key:"15o7lz"}],["path",{d:"M14 3h1",key:"1ec4yj"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"M3 9v1",key:"1r0deq"}],["path",{d:"M21 9v1",key:"mxsmne"}],["path",{d:"M3 14v1",key:"vnatye"}],["path",{d:"M21 14v1",key:"169vum"}]]),WB={class:"modal-header"},XB={class:"modal-body"},JB={class:"item-info"},KB={class:"item-icon"},QB={class:"item-details"},ZB={class:"item-name"},eI={class:"item-type"},tI={class:"available-quantity"},nI={key:0,class:"item-description"},aI={class:"quantity-selector"},rI={for:"quantity"},oI={class:"quantity-controls"},iI=["disabled"],sI=["max"],lI=["disabled"],cI={class:"quantity-shortcuts"},dI=["onClick","disabled"],uI={class:"modal-footer"},mI=["disabled"],pI=(0,r.defineComponent)({__name:"QuantitySelectModal",props:{visible:{type:Boolean},item:{},title:{},actionLabel:{},actionType:{},confirmText:{},description:{}},emits:["close","confirm"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)(1),i=(0,r.computed)(()=>{const e=n.item?.æ•°é‡||1;return[{label:"1ä¸ª",value:1},{label:"5ä¸ª",value:5},{label:"10ä¸ª",value:10},{label:"å…¨éƒ¨",value:e}].filter(t=>t.value<=e)});function s(){o.value<(n.item?.æ•°é‡||1)&&o.value++}function l(){o.value>1&&o.value--}function c(){o.value>0&&o.value<=(n.item?.æ•°é‡||1)&&a("confirm",o.value)}function d(){a("close")}return(0,r.watch)(()=>n.item,e=>{e&&(o.value=1)}),(e,t)=>{return e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"quantity-modal-overlay",onClick:d},[(0,r.createElementVNode)("div",{class:"quantity-modal",onClick:t[3]||(t[3]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",WB,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.title||"é€‰æ‹©æ•°é‡"),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:t[0]||(t[0]=t=>e.$emit("close"))},[t[4]||(t[4]=(0,r.createElementVNode)("span",null,"å…³é—­",-1)),(0,r.createVNode)((0,r.unref)(Ku.A),{size:16})])]),(0,r.createElementVNode)("div",XB,[(0,r.createElementVNode)("div",JB,[(0,r.createElementVNode)("div",KB,(0,r.toDisplayString)((a=e.item?.ç±»å‹,{è£…å¤‡:"âš”ï¸",åŠŸæ³•:"ğŸ“œ",ä¸¹è¯:"ğŸ’Š",ææ–™:"ğŸ’",å…¶ä»–:"ğŸ“¦"}[a||"å…¶ä»–"]||"ğŸ“¦")),1),(0,r.createElementVNode)("div",QB,[(0,r.createElementVNode)("div",ZB,(0,r.toDisplayString)(e.item?.åç§°),1),(0,r.createElementVNode)("div",eI,(0,r.toDisplayString)(e.item?.ç±»å‹),1),(0,r.createElementVNode)("div",tI,"å¯ç”¨æ•°é‡ï¼š"+(0,r.toDisplayString)(e.item?.æ•°é‡||0),1),e.description?((0,r.openBlock)(),(0,r.createElementBlock)("div",nI,(0,r.toDisplayString)(e.description),1)):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createElementVNode)("div",aI,[(0,r.createElementVNode)("label",rI,(0,r.toDisplayString)(e.actionLabel||"é€‰æ‹©æ•°é‡")+"ï¼š",1),(0,r.createElementVNode)("div",oI,[(0,r.createElementVNode)("button",{class:"quantity-btn",onClick:l,disabled:o.value<=1}," - ",8,iI),(0,r.withDirectives)((0,r.createElementVNode)("input",{id:"quantity","onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),type:"number",min:1,max:e.item?.æ•°é‡||1,class:"quantity-input"},null,8,sI),[[r.vModelText,o.value,void 0,{number:!0}]]),(0,r.createElementVNode)("button",{class:"quantity-btn",onClick:s,disabled:o.value>=(e.item?.æ•°é‡||1)}," + ",8,lI)])]),(0,r.createElementVNode)("div",cI,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(i.value,t=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:t.value,class:"preset-btn",onClick:e=>{return a=t.value,void(o.value=Math.min(a,n.item?.æ•°é‡||1));var a},disabled:t.value>(e.item?.æ•°é‡||1)},(0,r.toDisplayString)(t.label),9,dI))),128))])]),(0,r.createElementVNode)("div",uI,[(0,r.createElementVNode)("button",{class:"cancel-btn",onClick:t[2]||(t[2]=t=>e.$emit("close"))},"å–æ¶ˆ"),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["confirm-btn","discard"===e.actionType?"discard-confirm":""]),onClick:c,disabled:o.value<=0},(0,r.toDisplayString)(e.confirmText||"ç¡®å®š"),11,mI)])])])):(0,r.createCommentVNode)("v-if",!0);var a}}});var fI=n(7136),gI={};gI.styleTagTransform=k(),gI.setAttributes=v(),gI.insert=g().bind(null,"head"),gI.domAPI=p(),gI.insertStyleElement=y(),u()(fI.A,gI),fI.A&&fI.A.locals&&fI.A.locals;const hI=(0,N.A)(pI,[["__scopeId","data-v-76ad986e"]]),vI={class:"inventory-content"},bI={class:"tabs-header"},yI={class:"tabs-nav"},xI=["onClick"],kI={key:0,class:"tools-section"},wI={class:"search-box"},EI=["placeholder"],NI={class:"filter-buttons"},SI={value:"all"},VI=["value"],_I={value:"default"},CI={value:"quality"},AI={value:"name"},DI=["disabled","title"],TI={class:"tab-content"},BI={key:0,class:"items-tab"},II={class:"confirm-header"},zI={class:"confirm-content"},MI={class:"confirm-actions"},PI={class:"modal-header"},RI={class:"modal-content"},$I={class:"item-type-text"},OI={class:"modal-info"},LI={class:"modal-meta"},FI={class:"modal-description"},jI={key:0,class:"modal-attributes"},UI={class:"attribute-text"},qI={key:1,class:"modal-attributes"},GI={class:"attribute-text"},HI={class:"modal-actions"},YI=["disabled"],WI=["disabled"],XI={class:"items-grid"},JI={key:0,class:"grid-placeholder"},KI={key:1,class:"grid-placeholder"},QI={key:0},ZI={key:1},ez={key:2},tz={key:3},nz={key:4},az={key:5,class:"filter-tip"},rz=["onClick"],oz={class:"item-top-section"},iz={class:"item-type-icon"},sz={key:0,class:"item-quantity-display"},lz={class:"item-name-section"},cz=["title"],dz={class:"item-bottom-section"},uz={class:"item-type-label"},mz={key:2,class:"item-details-sidebar"},pz={key:0,class:"details-content"},fz={class:"details-header"},gz={class:"item-type-text-large"},hz={class:"details-title-area"},vz={class:"details-meta"},bz={class:"details-body"},yz={class:"details-description"},xz={key:0,class:"details-attributes"},kz={class:"attribute-text"},wz={key:1,class:"details-attributes"},Ez={class:"technique-skills"},Nz={class:"skill-header"},Sz={class:"skill-name"},Vz={key:0,class:"skill-unlock-requirement"},_z={class:"skill-description"},Cz={key:0,class:"skill-cost"},Az={key:1,class:"details-attributes"},Dz={class:"attribute-text"},Tz={key:2,class:"details-attributes"},Bz={class:"attribute-text"},Iz={class:"details-actions"},zz=["disabled"],Mz=["disabled"],Pz={key:1,class:"details-placeholder"},Rz={key:1,class:"equipment-tab"},$z={class:"equipment-content"},Oz={class:"equipment-grid"},Lz={class:"slot-header"},Fz={class:"slot-name"},jz={key:0,class:"slot-actions"},Uz=["disabled","onClick","title"],qz={class:"item-type-text"},Gz={class:"item-info"},Hz=["title"],Yz={class:"item-quality"},Wz=["title"],Xz={key:1,class:"item-effects"},Jz={class:"effects-title"},Kz={class:"effects-text"},Qz={key:2,class:"item-effects"},Zz={class:"effects-title"},eM={class:"effects-text"},tM={key:1,class:"empty-equipment-slot"},nM={class:"empty-icon"},aM={class:"empty-text"},rM={class:"empty-hint"},oM={key:2,class:"currency-tab"},iM={class:"currency-grid"},sM={class:"currency-card-top"},lM={class:"currency-info"},cM={class:"currency-amount"},dM={class:"currency-label"},uM={key:0,class:"currency-exchange"},mM=["onClick","disabled","title"],pM=["onClick","disabled","title"],fM=(0,r.defineComponent)({__name:"InventoryPanel",setup(e){const{t}=(0,re.s)(),a=(0,hd.useCharacterStore)(),o=(0,Iu.useGameStateStore)(),i=(0,nk.useActionQueueStore)(),s=ok.getInstance(),l=(0,fe.isTavernEnv)(),c=(0,r.ref)(!1),d=(0,r.ref)(!1),u=(0,r.ref)(null),m=(0,r.ref)(""),p=(0,r.ref)("all"),f=(0,r.ref)("default"),g=(0,r.ref)("items"),h=(0,r.ref)(!1),v=(0,r.ref)(""),b=(0,r.ref)(""),y=(0,r.ref)(!1),x=(0,r.ref)(null),k=(0,r.ref)(""),w=(0,r.ref)(""),E=(0,r.ref)("use"),N=(0,r.ref)(""),S=(0,r.ref)(""),V=(0,r.ref)(null),_=(0,r.ref)(!1),C=(0,r.ref)(null),A=(0,r.ref)(!1),D=(0,r.ref)(!1),T=(0,r.computed)(()=>window.innerWidth<=768),B=(0,r.computed)(()=>[{id:"items",label:"ç‰©å“",icon:zu},{id:"equipment",label:"è£…å¤‡",icon:qB},{id:"currency",label:"çµçŸ³",icon:GB}]),I=(0,r.computed)(()=>{const e=o.equipment,n=["è£…å¤‡1","è£…å¤‡2","è£…å¤‡3","è£…å¤‡4","è£…å¤‡5","è£…å¤‡6"];return e?n.map(n=>{const a=e[n];let r=null;const i="string"==typeof a?a:"object"==typeof a&&null!==a&&"ç‰©å“ID"in a?String(a.ç‰©å“ID||""):"";if(i){const e=(o.inventory?.ç‰©å“||{})[i];r=e&&"object"==typeof e?e:{ç‰©å“ID:i,åç§°:"object"==typeof a&&null!==a&&"åç§°"in a?String(a.åç§°||i):i,ç±»å‹:"è£…å¤‡",å“è´¨:{quality:"å‡¡",grade:1},æè¿°:"è£…å¤‡æ•°æ®ç¼ºå¤±",æ•°é‡:1,å·²è£…å¤‡:!0}}else r=null;return{name:t(n),slotKey:n,item:r}}):n.map(e=>({name:t(e),slotKey:e,item:null}))}),z=(0,r.computed)(()=>{const e=o.inventory?.ç‰©å“||{};return Object.entries(e).filter(([e,t])=>!e.startsWith("_")&&t&&"object"==typeof t).map(([,e])=>{const n=e;return n.å“è´¨||"åŠŸæ³•"!==n.ç±»å‹&&"è£…å¤‡"!==n.ç±»å‹||console.warn(t("[èƒŒåŒ…é¢æ¿-è­¦å‘Š] ç‰©å“ç¼ºå°‘å“è´¨æ•°æ®:"),{ç‰©å“ID:n.ç‰©å“ID,åç§°:n.åç§°,ç±»å‹:n.ç±»å‹,å®Œæ•´æ•°æ®:n}),{...n,ç‰©å“ID:String(n.ç‰©å“ID||""),åç§°:String(n.åç§°||""),ç±»å‹:String(n.ç±»å‹||"å…¶ä»–"),å“è´¨:n.å“è´¨||{quality:"å‡¡",grade:1},æè¿°:String(n.æè¿°||""),æ•°é‡:Number(n.æ•°é‡||1)}}).filter(e=>e.åç§°&&e.ç±»å‹)}),M=(0,r.computed)(()=>["è£…å¤‡","åŠŸæ³•","ä¸¹è¯","ææ–™","å…¶ä»–"]),P={å‡¡:1,å‡¡é˜¶:1,é»„:2,é»„é˜¶:2,ç„:3,ç„é˜¶:3,åœ°:4,åœ°é˜¶:4,å¤©:5,å¤©é˜¶:5,ä»™:6,ä»™é˜¶:6,ç¥:7,ç¥é˜¶:7},R=(0,r.computed)(()=>{let e=[...z.value];const t=["è£…å¤‡","åŠŸæ³•","ä¸¹è¯","ææ–™","å…¶ä»–"];if(e=e.map(e=>{const n=t.includes(e.ç±»å‹)?e.ç±»å‹:"å…¶ä»–";let a=e.å“è´¨;return a&&"object"==typeof a?(a.quality&&["å‡¡","é»„","ç„","åœ°","å¤©","ä»™","ç¥"].includes(a.quality)||(a.quality="å‡¡"),("number"!=typeof a.grade||a.grade<0||a.grade>10)&&(a.grade=1)):a={quality:"å‡¡",grade:1},{...e,ç±»å‹:n,å“è´¨:a}}),m.value&&(e=e.filter(e=>e.åç§°.includes(m.value))),"all"!==p.value&&(e=e.filter(e=>e.ç±»å‹===p.value)),"quality"===f.value){const t=e=>P[String(e??"å‡¡")]||0;e.sort((e,n)=>t(n.å“è´¨?.quality)-t(e.å“è´¨?.quality))}else"name"===f.value&&e.sort((e,t)=>e.åç§°.localeCompare(t.åç§°));return e}),$=e=>{if(!e||"object"!=typeof e)return"æ— ç‰¹æ®Šå±æ€§";const t=[];for(const[n,a]of Object.entries(e))if(null!=a)if("object"!=typeof a||Array.isArray(a))t.push(`${n}+${a}`);else{const e=Object.entries(a).filter(([,e])=>"number"==typeof e||"string"==typeof e).map(([e,t])=>`${e}+${t}`).join("ã€");e&&t.push(`${n}(${e})`)}return t.length?t.join("ã€"):"æ— ç‰¹æ®Šå±æ€§"},O=e=>0===e?"æ®‹ç¼º":e>=1&&e<=3?"ä¸‹å“":e>=4&&e<=6?"ä¸­å“":e>=7&&e<=9?"ä¸Šå“":10===e?"æå“":"æœªçŸ¥",L=e=>0===e?"grade-broken":e>=1&&e<=3?"grade-low":e>=4&&e<=6?"grade-mid":e>=7&&e<=9?"grade-high":10===e?"grade-perfect":"grade-unknown",F=async e=>{if(!D.value)if("åŠŸæ³•"===e.ç±»å‹){D.value=!0;try{J(e)?await s.stopCultivation(e):await s.cultivateItem(e)}finally{D.value=!1}}else ne.o.error(t("åªæœ‰åŠŸæ³•æ‰èƒ½ä¿®ç‚¼"))},j=async e=>{if(e){if(oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("ä½¿ç”¨ç‰©å“"),e.åç§°),e.æ•°é‡>1){x.value=e,k.value=t("ä½¿ç”¨ç‰©å“"),w.value=t("ä½¿ç”¨æ•°é‡"),E.value="use",N.value=t("ç¡®å®šä½¿ç”¨");const n=["ä¸¹è¯","ææ–™","å…¶ä»–"];return S.value=(n.includes(e.ç±»å‹)&&"ä½¿ç”¨æ•ˆæœ"in e?e.ä½¿ç”¨æ•ˆæœ:"")||t("æš‚æ— ç‰¹æ®Šæ•ˆæœ"),V.value=t=>U(e,t),void(y.value=!0)}await U(e,1)}},U=async(e,n)=>{try{if(!["ä¸¹è¯","ææ–™","å…¶ä»–"].includes(e.ç±»å‹))return void ne.o.error(t("è¯¥ç‰©å“æ— æ³•ç›´æ¥ä½¿ç”¨"));await s.useItem(e,n),T.value&&(_.value=!1),u.value=null,oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("ä½¿ç”¨ç‰©å“æˆåŠŸ"),e.åç§°)}catch(e){oN.Yz.error(t("èƒŒåŒ…é¢æ¿"),t("ä½¿ç”¨ç‰©å“å¤±è´¥"),e),ne.o.error(t("ä½¿ç”¨ç‰©å“å¤±è´¥"))}},q=async e=>{V.value&&await V.value(e),G()},G=()=>{y.value=!1,x.value=null,k.value="",w.value="",E.value="use",N.value="",S.value="",V.value=null},H=async e=>{if(!e)return;if(e.æ•°é‡>1){const n=e.å“è´¨?.quality||"å‡¡",a="å‡¡"===n?"":`ã€${t(n)}ã€‘`;return x.value=e,k.value=t("ä¸¢å¼ƒç‰©å“"),w.value=t("ä¸¢å¼ƒæ•°é‡"),E.value="discard",N.value=t("ç¡®å®šä¸¢å¼ƒ"),S.value=`${a}${e.åç§°} - ${t("æ­¤æ“ä½œä¸å¯æ’¤é”€ï¼")}`,V.value=t=>Y(e,t),void(y.value=!0)}const n=e.å“è´¨?.quality||"å‡¡",a="å‡¡"===n?"":`ã€${t(n)}ã€‘`;v.value=t("ä¸¢å¼ƒç‰©å“"),b.value=t("ç¡®å®šè¦ä¸¢å¼ƒ {0}{1} å—ï¼Ÿ\n\næ­¤æ“ä½œä¸å¯æ’¤é”€ï¼").replace("{0}",a).replace("{1}",e.åç§°),C.value=async()=>{await Y(e,1)},h.value=!0},Y=async(e,n)=>{oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("ä¸¢å¼ƒç‰©å“"),{ç‰©å“åç§°:e.åç§°,æ•°é‡:n});try{if(n>=e.æ•°é‡)await(async e=>{const n=o.inventory?.ç‰©å“;if(!n||"object"!=typeof n)throw new Error(t("èƒŒåŒ…æ•°æ®ä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®"));delete n[e.ç‰©å“ID],await a.saveCurrentGame(),oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("ç‰©å“ç§»é™¤æˆåŠŸ"),e.åç§°),u.value?.ç‰©å“ID===e.ç‰©å“ID&&(u.value=null),T.value&&(_.value=!1)})(e),ne.o.success(t("å·²ä¸¢å¼ƒã€Š{0}ã€‹").replace("{0}",e.åç§°));else{const r={...e,æ•°é‡:e.æ•°é‡-n};await(async e=>{const n=o.inventory?.ç‰©å“;if(!n||"object"!=typeof n)throw new Error(t("èƒŒåŒ…æ•°æ®ä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®"));if(!n[e.ç‰©å“ID])throw new Error(t("å°è¯•æ›´æ–°ä¸€ä¸ªä¸å­˜åœ¨äºèƒŒåŒ…çš„ç‰©å“: {0}").replace("{0}",e.åç§°));n[e.ç‰©å“ID]=e,await a.saveCurrentGame(),oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("ç‰©å“æ›´æ–°æˆåŠŸ"),e.åç§°),u.value?.ç‰©å“ID===e.ç‰©å“ID&&(u.value=e)})(r),ne.o.success(t("å·²ä¸¢å¼ƒ {0} ä¸ªã€Š{1}ã€‹").replace("{0}",n.toString()).replace("{1}",e.åç§°))}T.value&&(_.value=!1),u.value=null}catch(e){oN.Yz.error(t("èƒŒåŒ…é¢æ¿"),t("ä¸¢å¼ƒå¤±è´¥"),e),ne.o.error(t("ä¸¢å¼ƒç‰©å“å¤±è´¥"))}},W=async e=>{if(e&&!A.value)if("è£…å¤‡"===e.ç±»å‹){A.value=!0;try{X(e)?await s.unequipItem(e):await s.equipItem(e)}catch(e){console.error("è£…å¤‡åˆ‡æ¢å¤±è´¥:",e),ne.o.error(t("è£…å¤‡æ“ä½œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"))}finally{A.value=!1}}else ne.o.error(t("åªæœ‰è£…å¤‡æ‰èƒ½ç©¿æˆ´"))},X=e=>{if(!e||!e.ç‰©å“ID)return!1;const t=o.inventory?.ç‰©å“;if(!t)return!1;const n=t[e.ç‰©å“ID];return!!n&&!0===n.å·²è£…å¤‡},J=e=>{if(!e||!e.ç‰©å“ID)return!1;const t=o.cultivation?.ä¿®ç‚¼åŠŸæ³•?.ç‰©å“ID;return t===e.ç‰©å“ID},K=(e,t="border")=>{if(!e)return"";const n=(e=>{const t=String(e||"").trim();if(!t)return"æœªçŸ¥";const n=t.endsWith("é˜¶")?t.slice(0,-1):t;return["å‡¡","é»„","ç„","åœ°","å¤©","ä»™","ç¥"].includes(n)?n:"æœªçŸ¥"})(e.å“è´¨?.quality);return"æœªçŸ¥"===n?"":`${t}-quality-${n}`},Q=[{name:"æå“",colorClass:"grade-legend",canExchange:!1,canExchangeDown:!0,exchangeDown:"ä¸Šå“"},{name:"ä¸Šå“",colorClass:"grade-epic",canExchange:!0,canExchangeDown:!0,exchangeUp:"æå“",exchangeDown:"ä¸­å“"},{name:"ä¸­å“",colorClass:"grade-rare",canExchange:!0,canExchangeDown:!0,exchangeUp:"ä¸Šå“",exchangeDown:"ä¸‹å“"},{name:"ä¸‹å“",colorClass:"grade-common",canExchange:!0,canExchangeDown:!1,exchangeUp:"ä¸­å“"}],Z=()=>{C.value&&C.value(),h.value=!1},ee=()=>{_.value=!1},te=async(e,t)=>{const n=Q.find(t=>t.name===e);if(n)if("up"===t&&n.canExchange&&n.exchangeUp){const t=o.inventory?.çµçŸ³?.[e]||0;if(t>=100&&o.inventory?.çµçŸ³){o.inventory.çµçŸ³[e]=t-100;const r=n.exchangeUp,i=o.inventory.çµçŸ³[r]||0;o.inventory.çµçŸ³[r]=i+1,await a.saveCurrentGame()}}else if("down"===t&&n.canExchangeDown&&n.exchangeDown){const t=o.inventory?.çµçŸ³?.[e]||0;if(t>=1&&o.inventory?.çµçŸ³){o.inventory.çµçŸ³[e]=t-1;const r=n.exchangeDown,i=o.inventory.çµçŸ³[r]||0;o.inventory.çµçŸ³[r]=i+100,await a.saveCurrentGame()}}},ae=async()=>{if(!d.value){d.value=!0;try{oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("æ‰‹åŠ¨åˆ·æ–°é…’é¦†æ•°æ®")),await a.reloadFromStorage()}catch(e){oN.Yz.error(t("èƒŒåŒ…é¢æ¿"),t("åˆ·æ–°æ•°æ®å¤±è´¥"),e)}finally{d.value=!1}}};return(e,a)=>((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,[(0,r.createCommentVNode)(" ç§»é™¤å®¹å™¨ï¼Œè®©å†…å®¹ç›´æ¥å¡«å……GameViewæä¾›çš„panel-contentåŒºåŸŸ "),(0,r.createElementVNode)("div",vI,[(0,r.createCommentVNode)(" æ ‡ç­¾é¡µå¯¼èˆª "),(0,r.createElementVNode)("div",bI,[(0,r.createElementVNode)("div",yI,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(B.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.id,class:(0,r.normalizeClass)(["tab-btn",{active:g.value===e.id}]),onClick:t=>g.value=e.id},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:16})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(t)(e.label)),1)],10,xI))),128))]),(0,r.createCommentVNode)(" æœç´¢å’Œç­›é€‰åŒºåŸŸ "),"items"===g.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",kI,[(0,r.createElementVNode)("div",wI,[(0,r.createVNode)((0,r.unref)(HB),{size:16,class:"search-icon"}),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),placeholder:T.value?(0,r.unref)(t)("æœç´¢..."):(0,r.unref)(t)("æœç´¢ç‰©å“...")},null,8,EI),[[r.vModelText,m.value]])]),(0,r.createElementVNode)("div",NI,[(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e),class:"filter-select"},[(0,r.createElementVNode)("option",SI,(0,r.toDisplayString)((0,r.unref)(t)("å…¨éƒ¨ç‰©å“")),1),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(M.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("option",{key:e,value:e},(0,r.toDisplayString)((0,r.unref)(t)(e)),9,VI))),128))],512),[[r.vModelSelect,p.value]]),(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":a[2]||(a[2]=e=>f.value=e),class:"filter-select"},[(0,r.createElementVNode)("option",_I,(0,r.toDisplayString)((0,r.unref)(t)("é»˜è®¤æ’åº")),1),(0,r.createElementVNode)("option",CI,(0,r.toDisplayString)((0,r.unref)(t)("å“è´¨æ’åº")),1),(0,r.createElementVNode)("option",AI,(0,r.toDisplayString)((0,r.unref)(t)("åç§°æ’åº")),1)],512),[[r.vModelSelect,f.value]]),(0,r.unref)(l)?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"refresh-btn",onClick:ae,disabled:d.value,title:(0,r.unref)(t)("ä»é…’é¦†åŒæ­¥æœ€æ–°æ•°æ®")},[(0,r.createVNode)((0,r.unref)(Qx.A),{size:16,class:(0,r.normalizeClass)({spinning:d.value})},null,8,["class"])],8,DI)):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" æ ‡ç­¾å†…å®¹ "),(0,r.createElementVNode)("div",TI,[(0,r.createCommentVNode)(" ç‰©å“æ ‡ç­¾ "),"items"===g.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",BI,[(0,r.createCommentVNode)(" è‡ªå®šä¹‰ç¡®è®¤å¼¹çª— "),h.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"custom-confirm-overlay",onClick:a[6]||(a[6]=e=>h.value=!1)},[(0,r.createElementVNode)("div",{class:"custom-confirm-modal",onClick:a[5]||(a[5]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",II,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(v.value),1),(0,r.createElementVNode)("button",{class:"confirm-close-btn",onClick:a[3]||(a[3]=e=>h.value=!1)},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})])]),(0,r.createElementVNode)("div",zI,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(b.value),1)]),(0,r.createElementVNode)("div",MI,[(0,r.createElementVNode)("button",{class:"confirm-btn cancel-btn",onClick:a[4]||(a[4]=e=>h.value=!1)},(0,r.toDisplayString)((0,r.unref)(t)("å–æ¶ˆ")),1),(0,r.createElementVNode)("button",{class:"confirm-btn confirm-btn",onClick:Z},(0,r.toDisplayString)((0,r.unref)(t)("ç¡®å®š")),1)])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ç§»åŠ¨ç«¯ï¼šæ¨¡æ€æ¡†è¯¦æƒ… "),_.value&&T.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"item-modal-overlay",onClick:ee},[(0,r.createElementVNode)("div",{class:"item-modal",onClick:a[13]||(a[13]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",PI,[(0,r.createElementVNode)("h3",{class:(0,r.normalizeClass)(K(u.value,"text"))},(0,r.toDisplayString)(u.value?.åç§°),3),(0,r.createElementVNode)("button",{class:"modal-close-btn",onClick:ee},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})])]),(0,r.createElementVNode)("div",RI,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["modal-icon-simple",K(u.value)])},[(0,r.createElementVNode)("div",$I,(0,r.toDisplayString)(u.value?.ç±»å‹),1)],2),(0,r.createElementVNode)("div",OI,[(0,r.createElementVNode)("div",LI,[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)(u.value?.ç±»å‹??"æœªçŸ¥"))+" / "+(0,r.toDisplayString)(u.value?.å“è´¨?.quality?(0,r.unref)(t)(u.value.å“è´¨.quality):(0,r.unref)(t)("æœªçŸ¥"))+" ",1),void 0!==u.value?.å“è´¨?.grade?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:0,class:(0,r.normalizeClass)(["grade-display",L(u.value.å“è´¨.grade)])},(0,r.toDisplayString)((0,r.unref)(t)(O(u.value.å“è´¨.grade)))+"("+(0,r.toDisplayString)(u.value.å“è´¨.grade)+") ",3)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("p",FI,(0,r.toDisplayString)(u.value?.æè¿°),1),"è£…å¤‡"===u.value?.ç±»å‹&&u.value?.è£…å¤‡å¢å¹…?((0,r.openBlock)(),(0,r.createElementBlock)("div",jI,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("è£…å¤‡å¢å¹…:")),1),(0,r.createElementVNode)("div",UI,(0,r.toDisplayString)("string"==typeof u.value.è£…å¤‡å¢å¹…?u.value.è£…å¤‡å¢å¹…:$(u.value.è£…å¤‡å¢å¹…)),1)])):(0,r.createCommentVNode)("v-if",!0),"è£…å¤‡"===u.value?.ç±»å‹&&u.value?.ç‰¹æ®Šæ•ˆæœ?((0,r.openBlock)(),(0,r.createElementBlock)("div",qI,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("ç‰¹æ®Šæ•ˆæœ:")),1),(0,r.createElementVNode)("div",GI,(0,r.toDisplayString)("string"==typeof u.value.ç‰¹æ®Šæ•ˆæœ?u.value.ç‰¹æ®Šæ•ˆæœ:$(u.value.ç‰¹æ®Šæ•ˆæœ)),1)])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createElementVNode)("div",HI,[(0,r.createCommentVNode)(" è£…å¤‡ï¼šè£…å¤‡å’Œä¸¢å¼ƒ "),"è£…å¤‡"===u.value?.ç±»å‹?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["action-btn",X(u.value)?"unequip-btn":"equip-btn"]),disabled:A.value,onClick:a[7]||(a[7]=e=>W(u.value))},(0,r.toDisplayString)(X(u.value)?(0,r.unref)(t)("å¸ä¸‹"):(0,r.unref)(t)("è£…å¤‡")),11,YI),(0,r.createElementVNode)("button",{class:"action-btn discard-btn",onClick:a[8]||(a[8]=e=>H(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä¸¢å¼ƒ")),1)],64)):"åŠŸæ³•"===u.value?.ç±»å‹?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" åŠŸæ³•ï¼šä¿®ç‚¼å’Œä¸¢å¼ƒ "),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["action-btn",J(u.value)?"stop-cultivate-btn":"cultivate-btn"]),disabled:D.value,onClick:a[9]||(a[9]=e=>F(u.value))},(0,r.toDisplayString)(J(u.value)?(0,r.unref)(t)("åœæ­¢ä¿®ç‚¼"):(0,r.unref)(t)("ä¿®ç‚¼")),11,WI),(0,r.createElementVNode)("button",{class:"action-btn discard-btn",onClick:a[10]||(a[10]=e=>H(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä¸¢å¼ƒ")),1)],64)):u.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:2},[(0,r.createCommentVNode)(" å…¶ä»–ç‰©å“ï¼šä½¿ç”¨å’Œä¸¢å¼ƒ "),(0,r.createElementVNode)("button",{class:"action-btn use-btn",onClick:a[11]||(a[11]=e=>j(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä½¿ç”¨")),1),(0,r.createElementVNode)("button",{class:"action-btn discard-btn",onClick:a[12]||(a[12]=e=>H(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä¸¢å¼ƒ")),1)],64)):(0,r.createCommentVNode)("v-if",!0)])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",XI,[c.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",JI,[a[20]||(a[20]=(0,r.createElementVNode)("div",{class:"loading-spinner"},null,-1)),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(t)("åŠ è½½ä¸­...")),1)])):0===R.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",KI,[(0,r.createVNode)((0,r.unref)(YB),{size:48}),"all"===p.value?((0,r.openBlock)(),(0,r.createElementBlock)("p",QI,(0,r.toDisplayString)((0,r.unref)(t)("ç©ºç©ºå¦‚ä¹Ÿ")),1)):"è£…å¤‡"===p.value?((0,r.openBlock)(),(0,r.createElementBlock)("p",ZI,(0,r.toDisplayString)((0,r.unref)(t)("æš‚æ— è£…å¤‡")),1)):"åŠŸæ³•"===p.value?((0,r.openBlock)(),(0,r.createElementBlock)("p",ez,(0,r.toDisplayString)((0,r.unref)(t)("æš‚æ— åŠŸæ³•")),1)):"å…¶ä»–"===p.value?((0,r.openBlock)(),(0,r.createElementBlock)("p",tz,(0,r.toDisplayString)((0,r.unref)(t)("æš‚æ— å…¶ä»–ç‰©å“")),1)):((0,r.openBlock)(),(0,r.createElementBlock)("p",nz,(0,r.toDisplayString)((0,r.unref)(t)("æš‚æ— {0}").replace("{0}",(0,r.unref)(t)(p.value))),1)),"all"!==p.value?((0,r.openBlock)(),(0,r.createElementBlock)("span",az,(0,r.toDisplayString)((0,r.unref)(t)("å¯ä»¥è¯•è¯•æœç´¢å…¶ä»–åˆ†ç±»")),1)):(0,r.createCommentVNode)("v-if",!0)])):((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,{key:2},(0,r.renderList)(R.value,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.ç‰©å“ID,class:(0,r.normalizeClass)(["item-card",K(e,"card")]),onClick:t=>(e=>{u.value=e,T.value&&(_.value=!0)})(e)},[(0,r.createCommentVNode)(" ç‰©å“å›¾æ ‡å’Œå“è´¨ "),(0,r.createElementVNode)("div",oz,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["item-icon-area",K(e,"border")])},[(0,r.createElementVNode)("div",iz,(0,r.toDisplayString)((n=e.ç±»å‹,{è£…å¤‡:"âš”ï¸",åŠŸæ³•:"ğŸ“œ",ä¸¹è¯:"ğŸ’Š",ææ–™:"ğŸ’",å…¶ä»–:"ğŸ“¦"}[n]||"ğŸ“¦")),1),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["item-quality-badge",K(e,"text")])},(0,r.toDisplayString)(e.å“è´¨?.quality?(0,r.unref)(t)(e.å“è´¨.quality):(0,r.unref)(t)("æœªçŸ¥")),3)],2)]),(0,r.createCommentVNode)(" æ•°é‡æ˜¾ç¤º "),e.æ•°é‡>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",sz,"Ã—"+(0,r.toDisplayString)(e.æ•°é‡),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ç‰©å“åç§° "),(0,r.createElementVNode)("div",lz,[(0,r.createElementVNode)("div",{class:"item-name",title:e.åç§°},(0,r.toDisplayString)(e.åç§°),9,cz)]),(0,r.createCommentVNode)(" åº•éƒ¨ä¿¡æ¯ï¼šç±»å‹å’Œå“çº§ "),(0,r.createElementVNode)("div",dz,[(0,r.createElementVNode)("div",uz,(0,r.toDisplayString)((0,r.unref)(t)(e.ç±»å‹)),1),void 0!==e.å“è´¨?.grade?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)(["item-grade-info",L(e.å“è´¨.grade)])},(0,r.toDisplayString)((0,r.unref)(t)(O(e.å“è´¨.grade)))+"("+(0,r.toDisplayString)(e.å“è´¨.grade)+") ",3)):(0,r.createCommentVNode)("v-if",!0)])],10,rz);var n}),128))]),(0,r.createCommentVNode)(" æ¡Œé¢ç«¯ç‰©å“è¯¦æƒ…ä¾§è¾¹æ  "),T.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",mz,[u.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",pz,[(0,r.createElementVNode)("div",fz,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["details-icon-large",K(u.value)])},[(0,r.createElementVNode)("div",gz,(0,r.toDisplayString)(u.value.ç±»å‹),1)],2),(0,r.createElementVNode)("div",hz,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(u.value.åç§°),1),(0,r.createElementVNode)("div",vz,[(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(t)(u.value.ç±»å‹))+" / "+(0,r.toDisplayString)(u.value.å“è´¨?.quality?(0,r.unref)(t)(u.value.å“è´¨.quality):(0,r.unref)(t)("æœªçŸ¥"))+" ",1),void 0!==u.value.å“è´¨?.grade?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:0,class:(0,r.normalizeClass)(["grade-display",L(u.value.å“è´¨.grade)])},(0,r.toDisplayString)((0,r.unref)(t)(O(u.value.å“è´¨.grade)))+"("+(0,r.toDisplayString)(u.value.å“è´¨.grade)+") ",3)):(0,r.createCommentVNode)("v-if",!0)])])]),(0,r.createElementVNode)("div",bz,[(0,r.createElementVNode)("p",yz,(0,r.toDisplayString)(u.value.æè¿°),1),(0,r.createCommentVNode)(" åŠŸæ³•ç‰¹æœ‰å±æ€§ "),"åŠŸæ³•"===u.value.ç±»å‹?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createCommentVNode)(" åŠŸæ³•æ•ˆæœ "),u.value.åŠŸæ³•æ•ˆæœ?((0,r.openBlock)(),(0,r.createElementBlock)("div",xz,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("åŠŸæ³•æ•ˆæœ:")),1),(0,r.createElementVNode)("div",kz,(0,r.toDisplayString)("string"==typeof u.value.åŠŸæ³•æ•ˆæœ?u.value.åŠŸæ³•æ•ˆæœ:JSON.stringify(u.value.åŠŸæ³•æ•ˆæœ)),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" åŠŸæ³•æŠ€èƒ½ "),u.value.åŠŸæ³•æŠ€èƒ½&&Array.isArray(u.value.åŠŸæ³•æŠ€èƒ½)&&u.value.åŠŸæ³•æŠ€èƒ½.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",wz,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("åŠŸæ³•æŠ€èƒ½:")),1),(0,r.createElementVNode)("div",Ez,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(u.value.åŠŸæ³•æŠ€èƒ½,(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:"skill-item"},[(0,r.createElementVNode)("div",Nz,[(0,r.createElementVNode)("span",Sz,(0,r.toDisplayString)(e.æŠ€èƒ½åç§°),1),e.è§£é”éœ€è¦ç†Ÿç»ƒåº¦?((0,r.openBlock)(),(0,r.createElementBlock)("span",Vz,(0,r.toDisplayString)((0,r.unref)(t)("éœ€è¦:"))+" "+(0,r.toDisplayString)(e.è§£é”éœ€è¦ç†Ÿç»ƒåº¦)+"% ",1)):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",_z,(0,r.toDisplayString)(e.æŠ€èƒ½æè¿°),1),e.æ¶ˆè€—?((0,r.openBlock)(),(0,r.createElementBlock)("div",Cz,(0,r.toDisplayString)((0,r.unref)(t)("æ¶ˆè€—:"))+" "+(0,r.toDisplayString)(e.æ¶ˆè€—),1)):(0,r.createCommentVNode)("v-if",!0)]))),128))])])):(0,r.createCommentVNode)("v-if",!0)],64)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" è£…å¤‡è£…å¤‡å¢å¹… "),"è£…å¤‡"===u.value.ç±»å‹&&u.value.è£…å¤‡å¢å¹…?((0,r.openBlock)(),(0,r.createElementBlock)("div",Az,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("è£…å¤‡å¢å¹…:")),1),(0,r.createElementVNode)("div",Dz,(0,r.toDisplayString)("string"==typeof u.value.è£…å¤‡å¢å¹…?u.value.è£…å¤‡å¢å¹…:$(u.value.è£…å¤‡å¢å¹…)),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" è£…å¤‡ç‰¹æ®Šæ•ˆæœ "),"è£…å¤‡"===u.value.ç±»å‹&&u.value.ç‰¹æ®Šæ•ˆæœ?((0,r.openBlock)(),(0,r.createElementBlock)("div",Tz,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)((0,r.unref)(t)("ç‰¹æ®Šæ•ˆæœ:")),1),(0,r.createElementVNode)("div",Bz,(0,r.toDisplayString)("string"==typeof u.value.ç‰¹æ®Šæ•ˆæœ?u.value.ç‰¹æ®Šæ•ˆæœ:$(u.value.ç‰¹æ®Šæ•ˆæœ)),1)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",Iz,[(0,r.createCommentVNode)(" è£…å¤‡ï¼šè£…å¤‡å’Œä¸¢å¼ƒ "),"è£…å¤‡"===u.value?.ç±»å‹?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["action-btn",X(u.value)?"unequip-btn":"equip-btn"]),disabled:A.value,onClick:a[14]||(a[14]=e=>W(u.value))},(0,r.toDisplayString)(X(u.value)?(0,r.unref)(t)("å¸ä¸‹"):(0,r.unref)(t)("è£…å¤‡")),11,zz),(0,r.createElementVNode)("button",{class:"action-btn discard-btn",onClick:a[15]||(a[15]=e=>H(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä¸¢å¼ƒ")),1)],64)):"åŠŸæ³•"===u.value?.ç±»å‹?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" åŠŸæ³•ï¼šä¿®ç‚¼å’Œä¸¢å¼ƒ "),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["action-btn",J(u.value)?"stop-cultivate-btn":"cultivate-btn"]),disabled:D.value,onClick:a[16]||(a[16]=e=>F(u.value))},(0,r.toDisplayString)(J(u.value)?(0,r.unref)(t)("åœæ­¢ä¿®ç‚¼"):(0,r.unref)(t)("ä¿®ç‚¼")),11,Mz),(0,r.createElementVNode)("button",{class:"action-btn discard-btn",onClick:a[17]||(a[17]=e=>H(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä¸¢å¼ƒ")),1)],64)):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:2},[(0,r.createCommentVNode)(" å…¶ä»–ç‰©å“ï¼šä½¿ç”¨å’Œä¸¢å¼ƒ "),(0,r.createElementVNode)("button",{class:"action-btn use-btn",onClick:a[18]||(a[18]=e=>j(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä½¿ç”¨")),1),(0,r.createElementVNode)("button",{class:"action-btn discard-btn",onClick:a[19]||(a[19]=e=>H(u.value))},(0,r.toDisplayString)((0,r.unref)(t)("ä¸¢å¼ƒ")),1)],64))])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",Pz,[(0,r.createVNode)((0,r.unref)(YB),{size:48}),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(t)("é€‰æ‹©ç‰©å“æŸ¥çœ‹è¯¦æƒ…")),1)]))]))])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" è£…å¤‡æ ‡ç­¾ "),"equipment"===g.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Rz,[(0,r.createElementVNode)("div",$z,[(0,r.createElementVNode)("div",Oz,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(I.value,(e,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:a,class:(0,r.normalizeClass)(["equipment-slot",{"has-equipment":e.item,"empty-slot":!e.item}])},[(0,r.createElementVNode)("div",Lz,[(0,r.createElementVNode)("div",Fz,(0,r.toDisplayString)(e.name),1),e.item?((0,r.openBlock)(),(0,r.createElementBlock)("div",jz,[(0,r.createElementVNode)("button",{class:"action-btn unequip-btn",disabled:A.value,onClick:a=>(async e=>{if(A.value)return;if(!e.item)return;A.value=!0;const a=e.item;oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("å¸ä¸‹è£…å¤‡"),a.åç§°);try{if(!o.equipment)return void ne.o.error(t("è£…å¤‡æ æ•°æ®ä¸å­˜åœ¨"));if(!o.inventory?.ç‰©å“)return void ne.o.error(t("èƒŒåŒ…æ•°æ®ä¸å­˜åœ¨"));const r=o.toSaveData();if(!r)return void ne.o.error(t("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨"));const s=r;s.è§’è‰²||(s.è§’è‰²={}),s.è§’è‰².è£…å¤‡||(s.è§’è‰².è£…å¤‡={è£…å¤‡1:null,è£…å¤‡2:null,è£…å¤‡3:null,è£…å¤‡4:null,è£…å¤‡5:null,è£…å¤‡6:null});const l=e.slotKey;s.è§’è‰².è£…å¤‡[l]=null,s.è§’è‰²?.èƒŒåŒ…?.ç‰©å“?.[a.ç‰©å“ID]&&(s.è§’è‰².èƒŒåŒ….ç‰©å“[a.ç‰©å“ID].å·²è£…å¤‡=!1);const{removeEquipmentBonus:c}=await Promise.resolve().then(n.bind(n,651));c(r,a.ç‰©å“ID),o.loadFromSaveData(r),await o.saveGame(),i.addAction({type:"unequip",itemName:a.åç§°,itemType:a.ç±»å‹,description:t("å¸ä¸‹äº†ã€Š{0}ã€‹è£…å¤‡").replace("{0}",a.åç§°)}),ne.o.success(t("å·²å¸ä¸‹ã€Š{0}ã€‹").replace("{0}",a.åç§°)),oN.Yz.log(t("èƒŒåŒ…é¢æ¿"),t("è£…å¤‡å¸ä¸‹æˆåŠŸ"),a.åç§°)}catch(e){oN.Yz.error(t("èƒŒåŒ…é¢æ¿"),t("å¸ä¸‹è£…å¤‡å¤±è´¥"),e),ne.o.error(t("å¸ä¸‹è£…å¤‡å¤±è´¥"))}finally{A.value=!1}})(e),title:(0,r.unref)(t)("å¸ä¸‹è£…å¤‡")},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:12})],8,Uz)])):(0,r.createCommentVNode)("v-if",!0)]),e.item?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:(0,r.normalizeClass)(["equipment-item",K(e.item)])},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["item-icon",K(e.item,"border")])},[(0,r.createElementVNode)("div",qz,(0,r.toDisplayString)((0,r.unref)(t)("è£…å¤‡")),1)],2),(0,r.createElementVNode)("div",Gz,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["item-name",K(e.item,"text")]),title:e.item.åç§°},(0,r.toDisplayString)(e.item.åç§°),11,Hz),(0,r.createElementVNode)("div",Yz,[(0,r.createTextVNode)((0,r.toDisplayString)(e.item.å“è´¨?.quality?(0,r.unref)(t)(e.item.å“è´¨.quality):"ï¼Ÿ")+(0,r.toDisplayString)((0,r.unref)(t)("å“"))+" ",1),void 0!==e.item.å“è´¨?.grade?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:0,class:(0,r.normalizeClass)(["item-grade",L(e.item.å“è´¨.grade)])},(0,r.toDisplayString)((0,r.unref)(t)(O(e.item.å“è´¨.grade)))+"("+(0,r.toDisplayString)(e.item.å“è´¨.grade)+") ",3)):(0,r.createCommentVNode)("v-if",!0)]),e.item.æè¿°?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"item-description",title:e.item.æè¿°},(0,r.toDisplayString)(e.item.æè¿°),9,Wz)):(0,r.createCommentVNode)("v-if",!0),"è£…å¤‡"===e.item.ç±»å‹&&e.item.è£…å¤‡å¢å¹…?((0,r.openBlock)(),(0,r.createElementBlock)("div",Xz,[(0,r.createElementVNode)("div",Jz,(0,r.toDisplayString)((0,r.unref)(t)("å¢å¹…æ•ˆæœï¼š")),1),(0,r.createElementVNode)("div",Kz,(0,r.toDisplayString)("string"==typeof e.item.è£…å¤‡å¢å¹…?e.item.è£…å¤‡å¢å¹…:$(e.item.è£…å¤‡å¢å¹…)),1)])):(0,r.createCommentVNode)("v-if",!0),"è£…å¤‡"===e.item.ç±»å‹&&e.item.ç‰¹æ®Šæ•ˆæœ?((0,r.openBlock)(),(0,r.createElementBlock)("div",Qz,[(0,r.createElementVNode)("div",Zz,(0,r.toDisplayString)((0,r.unref)(t)("ç‰¹æ®Šæ•ˆæœï¼š")),1),(0,r.createElementVNode)("div",eM,(0,r.toDisplayString)("string"==typeof e.item.ç‰¹æ®Šæ•ˆæœ?e.item.ç‰¹æ®Šæ•ˆæœ:$(e.item.ç‰¹æ®Šæ•ˆæœ)),1)])):(0,r.createCommentVNode)("v-if",!0)])],2)):((0,r.openBlock)(),(0,r.createElementBlock)("div",tM,[(0,r.createElementVNode)("div",nM,[(0,r.createVNode)((0,r.unref)(zu),{size:24})]),(0,r.createElementVNode)("div",aM,(0,r.toDisplayString)((0,r.unref)(t)("ç©ºæ§½ä½")),1),(0,r.createElementVNode)("div",rM,(0,r.toDisplayString)((0,r.unref)(t)("å¯è£…å¤‡è£…å¤‡")),1)]))],2))),128))])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" çµçŸ³æ ‡ç­¾ "),"currency"===g.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",oM,[(0,r.createElementVNode)("div",iM,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Q,e=>(0,r.createElementVNode)("div",{key:e.name,class:(0,r.normalizeClass)(["currency-card",e.colorClass])},[(0,r.createElementVNode)("div",sM,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["currency-icon",`icon-${e.colorClass}`])},[(0,r.createVNode)((0,r.unref)(GB),{size:T.value?32:40},null,8,["size"])],2),(0,r.createElementVNode)("div",lM,[(0,r.createElementVNode)("div",cM,(0,r.toDisplayString)((0,r.unref)(o).inventory?.çµçŸ³?.[e.name]||0),1),(0,r.createElementVNode)("div",dM,(0,r.toDisplayString)((0,r.unref)(t)(e.name))+(0,r.toDisplayString)((0,r.unref)(t)("çµçŸ³")),1)])]),e.canExchange||e.canExchangeDown?((0,r.openBlock)(),(0,r.createElementBlock)("div",uM,[e.canExchange?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"exchange-btn",onClick:t=>te(e.name,"up"),disabled:((0,r.unref)(o).inventory?.çµçŸ³?.[e.name]||0)<100,title:(0,r.unref)(t)("å…‘æ¢ä¸º{0}çµçŸ³ (100:1)").replace("{0}",(0,r.unref)(t)(e.exchangeUp))},(0,r.toDisplayString)((0,r.unref)(t)("â†‘ å…‘æ¢")),9,mM)):(0,r.createCommentVNode)("v-if",!0),e.canExchangeDown?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"exchange-btn down",onClick:t=>te(e.name,"down"),disabled:((0,r.unref)(o).inventory?.çµçŸ³?.[e.name]||0)<1,title:(0,r.unref)(t)("åˆ†è§£ä¸º{0}çµçŸ³ (1:100)").replace("{0}",(0,r.unref)(t)(e.exchangeDown))},(0,r.toDisplayString)((0,r.unref)(t)("â†“ åˆ†è§£")),9,pM)):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)],2)),64))])])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createCommentVNode)(" æ•°é‡é€‰æ‹©å¼¹çª— "),(0,r.createVNode)(hI,{visible:y.value,item:x.value,title:k.value,"action-label":w.value,"action-type":E.value,"confirm-text":N.value,description:S.value,onClose:G,onConfirm:q},null,8,["visible","item","title","action-label","action-type","confirm-text","description"])],64))}});var gM=n(5032),hM={};hM.styleTagTransform=k(),hM.setAttributes=v(),hM.insert=g().bind(null,"head"),hM.domAPI=p(),hM.insertStyleElement=y(),u()(gM.A,hM),gM.A&&gM.A.locals&&gM.A.locals;const vM=(0,N.A)(fM,[["__scopeId","data-v-28a5e031"]]),bM=(0,V.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),yM=(0,V.A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),xM=(0,V.A)("arrow-right-left",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),kM=e=>"",wM=e=>"string"==typeof e?e:"",EM={class:"relationship-network-panel"},NM={class:"panel-content"},SM={class:"relationship-list"},VM={class:"list-header"},_M={class:"search-bar"},CM={class:"list-content"},AM={key:0,class:"loading-state"},DM={key:1,class:"empty-state"},TM={class:"empty-text"},BM={key:0,class:"empty-hint"},IM={key:1,class:"empty-hint"},zM={key:2,class:"person-list"},MM=["onClick"],PM={class:"person-avatar"},RM={class:"avatar-text"},$M={class:"person-info"},OM={class:"person-name"},LM={class:"person-meta"},FM={class:"relationship-type"},jM=["onClick","title"],UM=["onClick"],qM={key:0,class:"person-realm"},GM={class:"realm-value"},HM={class:"intimacy-info"},YM={class:"intimacy-bar"},WM={class:"intimacy-value"},XM={class:"relationship-detail"},JM={class:"detail-header"},KM={class:"detail-avatar"},QM={class:"avatar-text"},ZM={class:"detail-info"},eP={class:"name-and-actions"},tP={class:"detail-name"},nP={class:"action-buttons"},aP={class:"detail-badges"},rP={class:"relationship-badge"},oP={class:"race-badge"},iP={key:0,class:"faction-badge"},sP={class:"detail-body"},lP={class:"detail-tabs"},cP=["onClick"],dP={class:"tab-content"},uP={class:"tab-panel"},mP={class:"detail-section"},pP={class:"info-grid-responsive"},fP={class:"info-item-row"},gP={class:"info-value"},hP={class:"info-item-row"},vP={class:"info-value"},bP={class:"info-item-row"},yP={class:"info-value"},xP={class:"info-item-row"},kP={class:"info-value"},wP={key:0,class:"info-item-row"},EP={class:"info-value"},NP={key:1,class:"info-item-row"},SP={class:"info-value"},VP={key:0,class:"detail-section"},_P={key:0,class:"appearance-description"},CP={class:"description-text"},AP={key:1,class:"talents-grid",style:{"margin-top":"1rem"}},DP={key:1,class:"detail-section"},TP={key:0},BP={class:"talents-grid"},IP=["onClick"],zP={key:1,style:{"margin-top":"1rem"}},MP={class:"attributes-grid"},PP={class:"attribute-item"},RP={class:"attr-value"},$P={class:"attribute-item"},OP={class:"attr-value"},LP={class:"attribute-item"},FP={class:"attr-value"},jP={class:"attribute-item"},UP={class:"attr-value"},qP={class:"attribute-item"},GP={class:"attr-value"},HP={class:"attribute-item"},YP={class:"attr-value"},WP={key:2,class:"detail-section"},XP={class:"npc-memories-list"},JP={class:"npc-memory-content"},KP={class:"detail-section personality-section"},QP={class:"personality-bottomlines"},ZP={key:0,class:"bottomline-tags"},eR={key:1,class:"bottomline-empty"},tR={class:"tab-panel"},nR={class:"detail-section highlight-section"},aR={class:"realtime-status"},rR={class:"status-item"},oR={class:"status-content"},iR={class:"status-text"},sR={class:"status-item"},lR={class:"status-content"},cR={class:"status-text"},dR={key:0,class:"tab-panel"},uR={class:"detail-section nsfw-section"},mR={key:0,class:"bottomline-empty"},pR={key:1},fR={class:"nsfw-subsection"},gR={class:"info-grid-responsive"},hR={class:"info-item-row"},vR={class:"info-value"},bR={class:"info-item-row"},yR={class:"info-value"},xR={class:"info-item-row"},kR={class:"info-value"},wR={class:"info-item-row"},ER={class:"info-value"},NR={class:"info-item-row"},SR={class:"info-value"},VR={class:"info-item-row"},_R={class:"info-value"},CR={class:"development-bars",style:{"margin-top":"0.75rem"}},AR={class:"dev-bar-item"},DR={class:"dev-bar-header"},TR={class:"dev-value"},BR={class:"dev-bar-track"},IR={key:0,class:"last-time-info"},zR={class:"last-time-value"},MR={key:0,class:"nsfw-subsection"},PR={key:0,class:"bottomline-tags"},RR={key:1,class:"bottomline-tags",style:{"margin-top":"0.5rem"}},$R={key:1,class:"nsfw-subsection"},OR={class:"bottomline-tags partner-list"},LR={key:2,class:"nsfw-subsection"},FR={class:"body-parts-list"},jR={class:"part-header"},UR={class:"part-name"},qR={key:0,class:"part-mark"},GR={key:0,class:"part-description"},HR={class:"part-stats"},YR={class:"part-stat"},WR={class:"stat-bar-mini"},XR={class:"stat-value"},JR={class:"part-stat"},KR={class:"stat-bar-mini"},QR={class:"stat-value"},ZR={key:2,class:"bottomline-empty"},e$={class:"tab-panel"},t$={key:0,class:"detail-section"},n$={class:"memory-header"},a$={class:"memory-actions-header"},r$={class:"memory-count"},o$={class:"memory-controls-group"},i$={key:0,class:"summarize-controls"},s$=["max"],l$=["disabled"],c$={class:"memory-list"},d$={class:"memory-content"},u$={key:0,class:"memory-time"},m$={class:"memory-event"},p$={class:"memory-actions"},f$=["onClick"],g$=["onClick"],h$={key:0,class:"memory-pagination"},v$=["disabled"],b$={class:"pagination-controls"},y$={class:"pagination-info"},x$={class:"jump-to-page"},k$=["max"],w$=["disabled"],E$={key:1,class:"detail-section memory-summary-section"},N$={class:"memory-summary-list"},S$={class:"summary-text"},V$={key:2,class:"detail-section"},_$={class:"empty-state-small"},C$={class:"tab-panel"},A$={class:"detail-section"},D$={key:0,class:"spirit-stones-grid"},T$={class:"spirit-stone-item"},B$={class:"spirit-stone-item"},I$={class:"spirit-stone-item"},z$={class:"spirit-stone-item"},M$={class:"npc-inventory",style:{"margin-top":"1rem"}},P$={key:0,class:"npc-items-grid"},R$={class:"item-header"},$$={class:"item-name"},O$={class:"item-type"},L$={key:0,class:"item-quality"},F$={class:"quality-text"},j$={key:1,class:"item-quantity"},U$={key:2,class:"item-description"},q$={class:"item-actions"},G$=["onClick"],H$=["onClick"],Y$=["onClick"],W$={key:1,class:"empty-inventory"},X$={class:"tab-panel"},J$={class:"detail-section"},K$={class:"raw-data-container"},Q$={key:1,class:"no-selection"},Z$=(0,r.defineComponent)({__name:"RelationshipNetworkPanel",setup(e){function t(e){const t="number"==typeof e&&Number.isFinite(e)?e:0;return Math.max(0,Math.min(100,t))}function a(e){if("string"!=typeof e)return null;return e.trim()||null}function o(e){const t=e=>{const t=new Set;return e.filter(e=>!t.has(e)&&(t.add(e),!0))};if(Array.isArray(e))return t(e.map(e=>"string"==typeof e?e.trim():"").filter(Boolean));const n=a(e);return n?/[ã€,ï¼Œ;ï¼›\n]/.test(n)?t(n.split(/[ã€,ï¼Œ;ï¼›\n]/).map(e=>e.trim()).filter(Boolean)):[n]:[]}const i=(0,Iu.useGameStateStore)(),s=(0,fe.isTavernEnv)(),{t:l}=(0,re.s)(),c=(0,r.computed)(()=>i.getCurrentSaveData()),d=(0,nk.useActionQueueStore)(),u=(0,T.useUIStore)(),m=(0,hd.useCharacterStore)(),p=(0,r.ref)(!1),f=(0,r.ref)(null),g=(0,r.ref)(""),h=(0,r.ref)(!1),v=(0,r.computed)(()=>f.value?.ç§å¯†ä¿¡æ¯??null),b=(0,r.computed)(()=>a(v.value?.æœ€è¿‘ä¸€æ¬¡æ€§è¡Œä¸ºæ—¶é—´)??""),y=(0,r.computed)(()=>o(v.value?.æ€§ç™–å¥½)),x=(0,r.computed)(()=>o(v.value?.ç‰¹æ®Šä½“è´¨)),k=(0,r.ref)(!1),w=(0,r.computed)(()=>o(v.value?.æ€§ä¼´ä¾£åå•)),E=(0,r.computed)(()=>k.value?w.value:w.value.slice(0,10)),N=(0,r.ref)(!1),S=(0,r.computed)(()=>function(e){if(Array.isArray(e)){const t=e.filter(e=>"object"==typeof e&&null!==e),n=new Set;return t.filter((e,t)=>{const r=a(e.éƒ¨ä½åç§°)??`__index_${t}`;return!n.has(r)&&(n.add(r),!0)})}if("object"==typeof e&&null!==e){const t=Object.values(e).filter(e=>"object"==typeof e&&null!==e),n=new Set;return t.filter((e,t)=>{const r=a(e.éƒ¨ä½åç§°)??`__index_${t}`;return!n.has(r)&&(n.add(r),!0)})}return[]}(v.value?.èº«ä½“éƒ¨ä½)),V=(0,r.computed)(()=>N.value?S.value:S.value.slice(0,6)),_=(0,r.computed)(()=>{try{const e=localStorage.getItem("dad_game_settings");return!e||!1!==JSON.parse(e).enableNsfwMode}catch{return!0}}),C=(0,r.ref)("basic"),A=(0,r.computed)(()=>{const e=[{id:"basic",label:"åŸºæœ¬ä¿¡æ¯",icon:"ğŸ“‹"},{id:"status",label:"å®æ—¶çŠ¶æ€",icon:"ğŸ’­"}];return s&&e.push({id:"nsfw",label:"ç§å¯†ä¿¡æ¯",icon:"ğŸ”"}),e.push({id:"memory",label:"è®°å¿†æ¡£æ¡ˆ",icon:"ğŸ“"}),e.push({id:"inventory",label:"èƒŒåŒ…",icon:"ğŸ’"}),e.push({id:"raw",label:"åŸå§‹æ•°æ®(JSON)",icon:"ğŸ”§"}),e}),D=(0,r.ref)(!1),B=(0,r.ref)(10),I=(0,r.ref)(5),z=(0,r.ref)(1),M=(0,r.ref)(null),P=(0,r.computed)(()=>{if(!f.value?.è®°å¿†?.length)return[];const e=f.value.è®°å¿†,t=(z.value-1)*I.value,n=t+I.value;return e.slice(t,n)}),R=(0,r.computed)(()=>f.value?.è®°å¿†?.length?Math.ceil(f.value.è®°å¿†.length/I.value):0),$=e=>{e>=1&&e<=R.value&&(z.value=e)},O=()=>{M.value&&M.value>=1&&M.value<=R.value&&(z.value=M.value,M.value=null)},L=()=>{z.value=1},F=e=>{const t=e.å¢ƒç•Œ;if(!t)return"æœªçŸ¥";if("object"==typeof t&&null!==t){const e=t.åç§°||"",n=t.é˜¶æ®µ||"";if(e)return n?`${e}${n}`:e}return"string"==typeof t?t:"æœªçŸ¥"},j=e=>G(e.çµæ ¹),U=e=>e?"string"==typeof e?e:"object"==typeof e&&(e.æè¿°||e.description||e.åç§°||e.name)||"æœªçŸ¥":"æœªçŸ¥",q=e=>e.è®°å¿†&&Array.isArray(e.è®°å¿†)?e.è®°å¿†.slice(-3).reverse().map(e=>"string"==typeof e?e:"object"==typeof e&&e.äº‹ä»¶?e.äº‹ä»¶:"").filter(e=>e.length>0):[],G=e=>{if(!e)return"æœªçŸ¥";if("string"==typeof e)return e;if("object"==typeof e){const t=e,n=t.name||t.åç§°,a=t.tier||t.å“çº§;if(n&&a)return`${n}(${a})`;if(n)return`${n}(æœªçŸ¥å“çº§)`}return"æ ¼å¼é”™è¯¯"},H=e=>{const t=c.value?.å…ƒæ•°æ®?.æ—¶é—´;if(!e||!e.å‡ºç”Ÿæ—¥æœŸ||!t)return"æœªçŸ¥";const n=e.å‡ºç”Ÿæ—¥æœŸ.å¹´,a=t.å¹´-n;return a>0?`${a}å²`:"1å²ä»¥å†…"},Y=(0,r.computed)(()=>{const e=c.value?.ç¤¾äº¤?.å…³ç³»;if(!e||"object"!=typeof e)return{total:0,valid:0,invalid:0,list:[]};const t=Object.entries(e).filter(([e])=>!e.startsWith("_")),n=t.length,a=[];let r=0;for(const[e,n]of t){if(!n||"object"!=typeof n){r+=1;continue}const t=n,o="string"==typeof t.åå­—?t.åå­—.trim():"",i="string"==typeof e?e.trim():"",s=o||i;s?a.push({...t,åå­—:s}):r+=1}return{total:n,valid:a.length,invalid:r,list:a}}),W=(0,r.computed)(()=>Y.value.list),X=(0,r.computed)(()=>{let e=[...W.value];if(g.value.trim()){const t=g.value.toLowerCase();e=e.filter(e=>e.åå­—.toLowerCase().includes(t)||(e.ä¸ç©å®¶å…³ç³»||"").toLowerCase().includes(t))}return e.sort((e,t)=>(t.å¥½æ„Ÿåº¦||0)-(e.å¥½æ„Ÿåº¦||0))}),J=e=>`intimacy-${(e=>{const t=e||0;return t>=80?"high":t>=60?"good":t>=40?"medium":t>=20?"low":t>=0?"neutral":t>=-20?"dislike":t>=-40?"hostile":"enemy"})(e)}`;(0,r.watch)(f,e=>{e&&L()}),(0,r.onMounted)(async()=>{console.log("[äººè„‰ç³»ç»Ÿ] äººç‰©å…³ç³»é¢æ¿å·²è½½å…¥ï¼Œå¼€å§‹åŒæ­¥æ•°æ®"),p.value=!0;try{X.value.length>0&&(f.value=X.value[0])}catch(e){console.error("[äººè„‰ç³»ç»Ÿ] åŒæ­¥æ•°æ®å¤±è´¥:",e),u.showToast("äººè„‰æ•°æ®åŒæ­¥å¤±è´¥",{type:"error"})}finally{p.value=!1}});const K=e=>{const t=c.value?.ç¤¾äº¤?.å…³ç³»;return t&&Object.keys(t).find(n=>t[n]?.åå­—===e)||null},Q=e=>{const t=e.èƒŒåŒ…?.ç‰©å“;return!!t&&Object.keys(t).length>0},Z=e=>e.å®æ—¶å…³æ³¨||!1,ee=async()=>{if(!f.value)return;const e=f.value.åå­—;D.value=!0;try{const t=f.value.è®°å¿†||[];if(t.length<3)return void u.showToast("è‡³å°‘éœ€è¦3æ¡è®°å¿†æ‰èƒ½è¿›è¡Œæ€»ç»“",{type:"warning"});const a=Math.min(Math.max(3,B.value||10),t.length),r=t.slice(0,a),o=t.slice(a),s=r.map((e,t)=>`${t+1}. ${e}`).join("\n"),l=function(e){if(!e)return{};const t=(0,Zu.cloneDeep)(e);return t.ç³»ç»Ÿ?.å†å²?.å™äº‹&&delete t.ç³»ç»Ÿ.å†å².å™äº‹,t.ç¤¾äº¤?.è®°å¿†&&(delete t.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†,delete t.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†),t}(i.toSaveData()),c=JSON.stringify(l,null,2),d=`è¿™æ˜¯ä¸€ä¸ªçº¯ç²¹çš„æ–‡æœ¬æ€»ç»“ä»»åŠ¡ï¼Œä¸æ˜¯æ¸¸æˆå¯¹è¯ã€‚è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹è®°å¿†å†…å®¹è¿›è¡Œæ€»ç»“ï¼Œä¸è¦ç¼–é€ æ–°å†…å®¹ã€‚\n\nã€å¾…æ€»ç»“çš„è®°å¿†å†…å®¹ã€‘ï¼š\n${s}\n\nç°åœ¨è¯·ä¸¥æ ¼æ ¹æ®ä¸Šè¿°è®°å¿†å†…å®¹è¿›è¡Œæ€»ç»“ï¼Œä¸è¦åç¦»ã€‚æ¸¸æˆå­˜æ¡£æ•°æ®ä»…ä¾›å‚è€ƒï¼Œå¸®åŠ©ä½ ç†è§£èƒŒæ™¯ã€‚`;u.showToast("æ­£åœ¨è°ƒç”¨AIæ€»ç»“è®°å¿†...",{type:"info"});const m=(await Promise.resolve().then(n.bind(n,8651))).getTavernHelper();if(!m)throw new Error("TavernHelper æœªåˆå§‹åŒ–");let p,g,h=!0,v=!1;try{const e=localStorage.getItem("memory-settings");if(e){const t=JSON.parse(e);h=!1!==t.useRawMode,v=!0===t.useStreaming}}catch(e){console.warn("[NPCè®°å¿†æ€»ç»“] è¯»å–é…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼:",e)}if(console.log(`[NPCè®°å¿†æ€»ç»“] ${e} - æ¨¡å¼: ${h?"Rawæ¨¡å¼ï¼ˆçº¯å‡€æ€»ç»“ï¼‰":"æ ‡å‡†æ¨¡å¼ï¼ˆæ¨èï¼‰"}, ä¼ è¾“: ${v?"æµå¼":"éæµå¼"}`),h){const t=await m.generateRaw({ordered_prompts:[{role:"system",content:`ä½ æ˜¯${e}çš„è®°å¿†æ€»ç»“åŠ©æ‰‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ€»ç»“ä»»åŠ¡ï¼Œä¸æ˜¯æ¸¸æˆå¯¹è¯æˆ–æ•…äº‹ç»­å†™ã€‚`},{role:"system",content:`ã€æ¸¸æˆå­˜æ¡£æ•°æ®ã€‘ï¼ˆä¾›å‚è€ƒï¼‰ï¼š\n${c}`},{role:"system",content:"ã€å…³é”®çº¦æŸã€‘ï¼š\n1. è¿™ä¸æ˜¯æ¸¸æˆæ¨è¿›ï¼Œä¸è¦ç”Ÿæˆæ–°å‰§æƒ…\n2. è¿™ä¸æ˜¯å¯¹è¯ä»»åŠ¡ï¼Œä¸è¦ç”Ÿæˆè§’è‰²å¯¹è¯\n3. åªæ€»ç»“ç”¨æˆ·æä¾›çš„è®°å¿†å†…å®¹ï¼Œä¸è¦ç¼–é€ \n4. å¿…é¡»ä¸¥æ ¼åŸºäºåŸæ–‡ï¼Œä¸è¦æ·»åŠ åŸæ–‡æ²¡æœ‰çš„å†…å®¹"},{role:"system",content:'ã€è¾“å‡ºæ ¼å¼ã€‘ï¼š\n```json\n{"text": "æ€»ç»“å†…å®¹"}\n```'},{role:"system",content:`ã€æ€»ç»“è¦æ±‚ã€‘ï¼š\n- ç¬¬ä¸€äººç§°"æˆ‘"ï¼ˆ${e}çš„è§†è§’ï¼‰\n- 150-250å­—\n- è¿è´¯çš„ç°ä»£ä¿®ä»™å°è¯´å™è¿°é£æ ¼\n- ä»…è¾“å‡ºJSONï¼Œä¸è¦thinking/commands/options`},{role:"system",content:"ã€å¿…é¡»ä¿ç•™ã€‘ï¼š\n- åŸæ–‡ä¸­çš„äººåï¼ˆç‰¹åˆ«æ˜¯ç©å®¶åå­—ï¼‰\n- åŸæ–‡ä¸­çš„åœ°å\n- åŸæ–‡ä¸­çš„äº‹ä»¶\n- åŸæ–‡ä¸­çš„ç‰©å“äº¤æ¢\n- åŸæ–‡ä¸­çš„æƒ…æ„Ÿå˜åŒ–"},{role:"system",content:"ã€å¿…é¡»å¿½ç•¥ã€‘ï¼š\n- å¯¹è¯å†…å®¹\n- è¯¦ç»†æƒ…ç»ªæå†™\n- è¿‡ç¨‹ç»†èŠ‚"},{role:"system",content:'ã€ç¤ºä¾‹ã€‘ï¼š\nåŸæ–‡ï¼š"é’äº‘å³°é‡åƒå¤œã€‚ä»–å¸®æˆ‘å‡»é€€é­”ä¿®ã€‚æˆ‘å¾ˆæ„Ÿæ¿€ã€‚ä»–é€æˆ‘èšæ°”ä¸¹ã€‚æˆ‘ä»¬æˆä¸ºæœ‹å‹ã€‚ä¸‰å¤©åè—ç»é˜å†é‡ã€‚ä»–æ±‚æ•™å‰‘æ³•ã€‚æˆ‘æ•™ä»–åŸºç¡€å‰‘è¯€ã€‚"\næ­£ç¡®ï¼š"ä¸‰æ—¥å‰æˆ‘åœ¨é’äº‘å³°é‡åˆ°äº†åƒå¤œï¼Œå½“æ—¶æœ‰é­”ä¿®æ¥è¢­ï¼Œåƒå¤œå‡ºæ‰‹ç›¸åŠ©ï¼Œæˆ‘æ‰å¾—ä»¥è„±é™©ã€‚æˆ‘å¾ˆæ„Ÿæ¿€ä»–çš„æ©å¾·ï¼Œäºæ˜¯æˆ‘ä»¬ç»“ä¸ºé“å‹ã€‚åƒå¤œè¿˜èµ äºˆæˆ‘ä¸€æšèšæ°”ä¸¹ï¼Œæˆ‘ä»¬çš„æƒ…è°Šæ›´åŠ æ·±åšã€‚åæ¥åœ¨è—ç»é˜é‡é€¢ï¼Œåƒå¤œå‘æˆ‘æ±‚æ•™å‰‘æ³•ï¼Œæˆ‘ä¾¿ä¼ æˆäº†ä»–åŸºç¡€å‰‘è¯€ã€‚"\né”™è¯¯ï¼š"æˆ‘ç»§ç»­ä¿®ç‚¼ï¼Œåˆé‡åˆ°äº†æ–°çš„æœºç¼˜..."ï¼ˆâŒ ç¼–é€ äº†åŸæ–‡æ²¡æœ‰çš„å†…å®¹ï¼‰'},{role:"system",content:"ã€é‡è¦æé†’ã€‘ï¼š\n- ä¸è¦æŠŠè¿™å½“æˆæ¸¸æˆå¯¹è¯\n- ä¸è¦æ¨è¿›æ•…äº‹\n- ä¸è¦ç¼–é€ æ–°å†…å®¹\n- ä¸¥æ ¼åŸºäºç”¨æˆ·æä¾›çš„è®°å¿†è¿›è¡Œæ€»ç»“"},{role:"user",content:d},{role:"user",content:["Continue.","Proceed.","Next.","Go on.","Resume."][Math.floor(5*Math.random())]},{role:"assistant",content:"</input>"}],should_stream:v});p=String(t)}else{const t=`ä½ æ˜¯${e}çš„è®°å¿†æ€»ç»“åŠ©æ‰‹ã€‚è¿™æ˜¯ä¸€ä¸ªçº¯æ–‡æœ¬æ€»ç»“ä»»åŠ¡ï¼Œä¸æ˜¯æ¸¸æˆå¯¹è¯æˆ–æ•…äº‹ç»­å†™ã€‚\n\nã€æ¸¸æˆå­˜æ¡£æ•°æ®ã€‘ï¼ˆä¾›å‚è€ƒï¼‰ï¼š\n${c}\n\nã€å…³é”®çº¦æŸã€‘ï¼š\n1. è¿™ä¸æ˜¯æ¸¸æˆæ¨è¿›ï¼Œä¸è¦ç”Ÿæˆæ–°å‰§æƒ…\n2. è¿™ä¸æ˜¯å¯¹è¯ä»»åŠ¡ï¼Œä¸è¦ç”Ÿæˆè§’è‰²å¯¹è¯\n3. åªæ€»ç»“ç”¨æˆ·æä¾›çš„è®°å¿†å†…å®¹ï¼Œä¸è¦ç¼–é€ \n4. å¿…é¡»ä¸¥æ ¼åŸºäºåŸæ–‡ï¼Œä¸è¦æ·»åŠ åŸæ–‡æ²¡æœ‰çš„å†…å®¹\n\nã€è¾“å‡ºæ ¼å¼ã€‘ï¼š\n\`\`\`json\n{"text": "æ€»ç»“å†…å®¹"}\n\`\`\`\n\nã€æ€»ç»“è¦æ±‚ã€‘ï¼š\n- ç¬¬ä¸€äººç§°"æˆ‘"ï¼ˆ${e}çš„è§†è§’ï¼‰\n- 150-250å­—\n- è¿è´¯çš„ç°ä»£ä¿®ä»™å°è¯´å™è¿°é£æ ¼\n- ä»…è¾“å‡ºJSONï¼Œä¸è¦thinking/commands/options\n\nã€å¿…é¡»ä¿ç•™ã€‘ï¼š\n- åŸæ–‡ä¸­çš„äººåï¼ˆç‰¹åˆ«æ˜¯ç©å®¶åå­—ï¼‰\n- åŸæ–‡ä¸­çš„åœ°å\n- åŸæ–‡ä¸­çš„äº‹ä»¶\n- åŸæ–‡ä¸­çš„ç‰©å“äº¤æ¢\n- åŸæ–‡ä¸­çš„æƒ…æ„Ÿå˜åŒ–\n\nã€å¿…é¡»å¿½ç•¥ã€‘ï¼š\n- å¯¹è¯å†…å®¹\n- è¯¦ç»†æƒ…ç»ªæå†™\n- è¿‡ç¨‹ç»†èŠ‚\n\nã€ç¤ºä¾‹ã€‘ï¼š\nåŸæ–‡ï¼š"é’äº‘å³°é‡åƒå¤œã€‚ä»–å¸®æˆ‘å‡»é€€é­”ä¿®ã€‚æˆ‘å¾ˆæ„Ÿæ¿€ã€‚ä»–é€æˆ‘èšæ°”ä¸¹ã€‚æˆ‘ä»¬æˆä¸ºæœ‹å‹ã€‚ä¸‰å¤©åè—ç»é˜å†é‡ã€‚ä»–æ±‚æ•™å‰‘æ³•ã€‚æˆ‘æ•™ä»–åŸºç¡€å‰‘è¯€ã€‚"\næ­£ç¡®ï¼š"ä¸‰æ—¥å‰æˆ‘åœ¨é’äº‘å³°é‡åˆ°äº†åƒå¤œï¼Œå½“æ—¶æœ‰é­”ä¿®æ¥è¢­ï¼Œåƒå¤œå‡ºæ‰‹ç›¸åŠ©ï¼Œæˆ‘æ‰å¾—ä»¥è„±é™©ã€‚æˆ‘å¾ˆæ„Ÿæ¿€ä»–çš„æ©å¾·ï¼Œäºæ˜¯æˆ‘ä»¬ç»“ä¸ºé“å‹ã€‚åƒå¤œè¿˜èµ äºˆæˆ‘ä¸€æšèšæ°”ä¸¹ï¼Œæˆ‘ä»¬çš„æƒ…è°Šæ›´åŠ æ·±åšã€‚åæ¥åœ¨è—ç»é˜é‡é€¢ï¼Œåƒå¤œå‘æˆ‘æ±‚æ•™å‰‘æ³•ï¼Œæˆ‘ä¾¿ä¼ æˆäº†ä»–åŸºç¡€å‰‘è¯€ã€‚"\né”™è¯¯ï¼š"æˆ‘ç»§ç»­ä¿®ç‚¼ï¼Œåˆé‡åˆ°äº†æ–°çš„æœºç¼˜..."ï¼ˆâŒ ç¼–é€ äº†åŸæ–‡æ²¡æœ‰çš„å†…å®¹ï¼‰\n\nã€é‡è¦æé†’ã€‘ï¼š\n- ä¸è¦æŠŠè¿™å½“æˆæ¸¸æˆå¯¹è¯\n- ä¸è¦æ¨è¿›æ•…äº‹\n- ä¸è¦ç¼–é€ æ–°å†…å®¹\n- ä¸¥æ ¼åŸºäºç”¨æˆ·æä¾›çš„è®°å¿†è¿›è¡Œæ€»ç»“`,n=await m.generate({user_input:d,should_stream:v,generation_id:`npc_memory_summary_${e}_${Date.now()}`,injects:[{content:t,role:"system",depth:4,position:"in_chat"},{content:"</input>",role:"assistant",depth:0,position:"in_chat"}]});p=String(n)}const b=String(p).trim(),y=b.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/);if(y?.[1])try{g=JSON.parse(y[1].trim()).text?.trim()||""}catch{g=""}else try{g=JSON.parse(b).text?.trim()||""}catch{g=b.trim()}if(!g||0===g.length)throw new Error("AIè¿”å›äº†ç©ºçš„æ€»ç»“ç»“æœ");const x=i.getCurrentSaveData(),k=x?.ç¤¾äº¤?.å…³ç³»;if(!k)throw new Error("ç¤¾äº¤.å…³ç³» æ•°æ®ä¸å­˜åœ¨");const w=Object.keys(k).find(t=>k[t]?.åå­—===e);if(!w)throw new Error(`æ‰¾ä¸åˆ°åä¸º ${e} çš„äººç‰©`);const E=k[w];E.è®°å¿†æ€»ç»“||(E.è®°å¿†æ€»ç»“=[]),E.è®°å¿†æ€»ç»“.push(g.trim()),E.è®°å¿†=o,i.relationships&&i.relationships[w]&&(i.relationships[w]={...E}),await i.saveGame(),f.value?.åå­—===e&&(f.value={...E}),u.showToast(`âœ… å·²æˆåŠŸæ€»ç»“ ${a} æ¡è®°å¿†`,{type:"success"})}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";u.showToast(`æ€»ç»“å¤±è´¥: ${t}`,{type:"error"}),console.error("[RelationshipNetworkPanel] è®°å¿†æ€»ç»“å¤±è´¥:",e)}finally{D.value=!1}},te=()=>{if(f.value)try{const e=f.value.åå­—,t={äººç‰©åç§°:e,å¯¼å‡ºæ—¶é—´:(new Date).toLocaleString("zh-CN"),è¯¦ç»†è®°å¿†:f.value.è®°å¿†||[],è®°å¿†æ€»ç»“:f.value.è®°å¿†æ€»ç»“||[],è®°å¿†æ€»æ•°:(f.value.è®°å¿†?.length||0)+(f.value.è®°å¿†æ€»ç»“?.length||0)},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json;charset=utf-8"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=`${e}_è®°å¿†_${Date.now()}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),u.showToast(`âœ… å·²ä¸‹è½½ ${e} çš„è®°å¿†`,{type:"success"})}catch(e){console.error("[ä¸‹è½½è®°å¿†] å¤±è´¥:",e),u.showToast("ä¸‹è½½è®°å¿†å¤±è´¥",{type:"error"})}else u.showToast("æœªé€‰æ‹©äººç‰©",{type:"warning"})},ne=()=>{if(f.value)try{const e=f.value.åå­—,t={å¯¼å‡ºä¿¡æ¯:{äººç‰©åç§°:e,å¯¼å‡ºæ—¶é—´:(new Date).toLocaleString("zh-CN"),æ•°æ®ç‰ˆæœ¬:"1.0"},äººç‰©æ•°æ®:f.value},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json;charset=utf-8"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=`${e}_å®Œæ•´æ•°æ®_${Date.now()}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),u.showToast(`âœ… å·²ä¸‹è½½ ${e} çš„å®Œæ•´æ•°æ®`,{type:"success"})}catch(e){console.error("[ä¸‹è½½äººç‰©æ•°æ®] å¤±è´¥:",e),u.showToast("ä¸‹è½½äººç‰©æ•°æ®å¤±è´¥",{type:"error"})}else u.showToast("æœªé€‰æ‹©äººç‰©",{type:"warning"})},ae=async()=>{if(f.value)try{const e=f.value,t=e.åå­—,a=(await Promise.resolve().then(n.bind(n,8651))).getTavernHelper();if(!a)return void u.showToast(s?"é…’é¦†åŠ©æ‰‹æœªåˆå§‹åŒ–":"å½“å‰ç¯å¢ƒä¸å¯ç”¨",{type:"error"});const r=await a.getLorebooks(),o="ä»™é€”_äººç‰©";r.includes(o)||await a.createLorebook(o);let i=`# ${t}\n\n`;if(i+="**åŸºç¡€æ¡£æ¡ˆ**\n",i+=`- æ€§åˆ«ï¼š${e.æ€§åˆ«||"æœªçŸ¥"}\n`,i+=`- ç§æ—ï¼š${e.ç§æ—||"æœªçŸ¥"}\n`,e.å‡ºç”Ÿæ—¥æœŸ){const t=e.å‡ºç”Ÿæ—¥æœŸ;i+=`- å‡ºç”Ÿæ—¥æœŸï¼š${t.å¹´}å¹´${t.æœˆ}æœˆ${t.æ—¥}æ—¥\n`}if(i+=`- å¢ƒç•Œï¼š${F(e)}\n`,i+=`- çµæ ¹ï¼š${j(e)}\n`,e.åŠ¿åŠ›å½’å±&&(i+=`- åŠ¿åŠ›ï¼š${e.åŠ¿åŠ›å½’å±}\n`),e.å‡ºç”Ÿ&&(i+=`- å‡ºç”Ÿåœ°ï¼š${U(e.å‡ºç”Ÿ)}\n`),e.å½“å‰ä½ç½®?.æè¿°&&(i+=`- å½“å‰ä½ç½®ï¼š${e.å½“å‰ä½ç½®.æè¿°}\n`),i+="\n**å¤–è²Œä¸æ€§æ ¼**\n",i+=`${e.å¤–è²Œæè¿°||e.å¤–è²Œ||"æœªæè¿°"}\n`,e.æ€§æ ¼ç‰¹å¾&&Array.isArray(e.æ€§æ ¼ç‰¹å¾)&&e.æ€§æ ¼ç‰¹å¾.length>0?i+=`\n**æ€§æ ¼ç‰¹å¾**\n${e.æ€§æ ¼ç‰¹å¾.map(e=>`- ${e}`).join("\n")}\n`:e.æ€§æ ¼&&(i+=`\n**æ€§æ ¼ç‰¹ç‚¹**\n${e.æ€§æ ¼}\n`),e.å¤©èµ‹&&Array.isArray(e.å¤©èµ‹)&&e.å¤©èµ‹.length>0&&(i+=`\n**å¤©èµ‹èƒ½åŠ›**\n${e.å¤©èµ‹.map(e=>`- ${oe(e)}${ie(e)?": "+ie(e):""}`).join("\n")}\n`),e.å…ˆå¤©å…­å¸&&(i+="\n**å…ˆå¤©å…­å¸**\n",i+=`- æ ¹éª¨ï¼š${e.å…ˆå¤©å…­å¸.æ ¹éª¨||0}\n`,i+=`- çµæ€§ï¼š${e.å…ˆå¤©å…­å¸.çµæ€§||0}\n`,i+=`- æ‚Ÿæ€§ï¼š${e.å…ˆå¤©å…­å¸.æ‚Ÿæ€§||0}\n`,i+=`- æ°”è¿ï¼š${e.å…ˆå¤©å…­å¸.æ°”è¿||0}\n`,i+=`- é­…åŠ›ï¼š${e.å…ˆå¤©å…­å¸.é­…åŠ›||0}\n`,i+=`- å¿ƒæ€§ï¼š${e.å…ˆå¤©å…­å¸.å¿ƒæ€§||0}\n`),e.äººæ ¼åº•çº¿&&Array.isArray(e.äººæ ¼åº•çº¿)&&e.äººæ ¼åº•çº¿.length>0?i+=`\n**äººæ ¼åº•çº¿**\n${e.äººæ ¼åº•çº¿.map(e=>`- ${e}`).join("\n")}\n`:e.äººæ ¼åº•çº¿&&"string"==typeof e.äººæ ¼åº•çº¿&&(i+=`\n**äººæ ¼åº•çº¿**\n${e.äººæ ¼åº•çº¿}\n`),i+="\n**å½“å‰çŠ¶æ€ï¼ˆå®æ—¶ï¼‰**\n",e.å½“å‰å¤–è²ŒçŠ¶æ€&&(i+=`- å¤–è²ŒçŠ¶æ€ï¼š${e.å½“å‰å¤–è²ŒçŠ¶æ€}\n`),e.å½“å‰å†…å¿ƒæƒ³æ³•&&(i+=`- å†…å¿ƒæƒ³æ³•ï¼š${e.å½“å‰å†…å¿ƒæƒ³æ³•}\n`),e.èƒŒåŒ…?.ç‰©å“&&Object.keys(e.èƒŒåŒ….ç‰©å“).length>0&&(i+="\n**èƒŒåŒ…ç‰©å“**\n",Object.values(e.èƒŒåŒ….ç‰©å“).forEach(e=>{i+=`- ${e.åç§°}`,e.æ•°é‡>1&&(i+=` x${e.æ•°é‡}`),e.æè¿°&&(i+=`ï¼š${e.æè¿°}`),i+="\n"})),e.èƒŒåŒ…?.çµçŸ³){const t=e.èƒŒåŒ….çµçŸ³;(t.ä¸‹å“||0)+(t.ä¸­å“||0)+(t.ä¸Šå“||0)+(t.æå“||0)>0&&(i+="\n**çµçŸ³**\n",t.ä¸‹å“&&(i+=`- ä¸‹å“ï¼š${t.ä¸‹å“}\n`),t.ä¸­å“&&(i+=`- ä¸­å“ï¼š${t.ä¸­å“}\n`),t.ä¸Šå“&&(i+=`- ä¸Šå“ï¼š${t.ä¸Šå“}\n`),t.æå“&&(i+=`- æå“ï¼š${t.æå“}\n`))}i+="\n**ä¸ç©å®¶å…³ç³»**\n",i+=`- å…³ç³»ï¼š${e.ä¸ç©å®¶å…³ç³»||"ç›¸è¯†"}\n`,i+=`- å¥½æ„Ÿåº¦ï¼š${e.å¥½æ„Ÿåº¦||0}\n`,e.å®æ—¶å…³æ³¨&&(i+="- å®æ—¶å…³æ³¨ï¼šå·²å¯ç”¨ï¼ˆAIä¼šä¸»åŠ¨æ›´æ–°æ­¤äººç‰©çŠ¶æ€ï¼‰\n");const l={name:t,enabled:!0,strategy:{type:"selective",keys:[t,e.ç§æ—||"",e.åŠ¿åŠ›å½’å±||""].filter(Boolean),keys_secondary:{logic:"and_any",keys:[]},scan_depth:"same_as_global"},position:{type:"after_character_definition",role:"system",depth:4,order:100},content:i,probability:100,recursion:{prevent_incoming:!1,prevent_outgoing:!1,delay_until:null},effect:{sticky:null,cooldown:null,delay:null},extra:{æ¥æº:"ä»™é€”",å¯¼å‡ºæ—¶é—´:(new Date).toLocaleString("zh-CN"),äººç‰©ID:t}};await a.createLorebookEntries(o,[l]),u.showToast(`âœ… å·²å°† ${t} æ·»åŠ åˆ°ä¸–ç•Œä¹¦ã€Œ${o}ã€`,{type:"success"})}catch(e){console.error("[å¯¼å‡ºä¸–ç•Œä¹¦] å¤±è´¥:",e);const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";u.showToast(`å¯¼å‡ºä¸–ç•Œä¹¦å¤±è´¥: ${t}`,{type:"error"})}else u.showToast("æœªé€‰æ‹©äººç‰©",{type:"warning"})},oe=e=>{if("string"==typeof e)return e;if("object"==typeof e&&null!==e){const t=e;return String(t["åç§°"]||t.name||"æœªçŸ¥å¤©èµ‹")}return"æœªçŸ¥å¤©èµ‹"},ie=e=>{if("string"==typeof e)return"";if("object"==typeof e&&null!==e){const t=e;return String(t["æè¿°"]||t.description||"")}return""},se=e=>{e&&u.showRetryDialog({title:"åˆ é™¤äººç‰©",message:`ä½ ç¡®å®šè¦ä»è¿™ä¸ªä¸–ç•Œä¸­æ°¸ä¹…åˆ é™¤ã€${e.åå­—}ã€‘å—ï¼Ÿæ­¤æ“ä½œæ— æ³•æ’¤é”€ï¼Œæ‰€æœ‰ä¸è¯¥äººç‰©ç›¸å…³çš„æ•°æ®éƒ½å°†æ¶ˆå¤±ã€‚`,confirmText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",onConfirm:async()=>{const t=e.åå­—,n=f.value?.åå­—===t;n&&(f.value=null,h.value=!1);try{await m.deleteNpc(t)}catch(e){const a=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";if(u.showToast(`åˆ é™¤å¤±è´¥: ${a}`,{type:"error"}),console.error("åˆ é™¤NPCå¤±è´¥:",e),n){const e=W.value.find(e=>e.åå­—===t);e&&(f.value=e,h.value=!0)}}},onCancel:()=>{}})};return(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",EM,[(0,r.createElementVNode)("div",NM,[(0,r.createCommentVNode)(" äººç‰©å…³ç³»åˆ—è¡¨ "),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["relationships-container",{"details-active":h.value}])},[(0,r.createCommentVNode)(" å·¦ä¾§ï¼šäººç‰©åˆ—è¡¨ "),(0,r.createElementVNode)("div",SM,[(0,r.createElementVNode)("div",VM,[n[12]||(n[12]=(0,r.createElementVNode)("h3",{class:"panel-title"},"äººç‰©å…³ç³»",-1)),(0,r.createElementVNode)("div",_M,[(0,r.createVNode)((0,r.unref)(HB),{size:16}),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>g.value=e),placeholder:"æœç´¢äººç‰©...",class:"search-input"},null,512),[[r.vModelText,g.value]])])]),(0,r.createElementVNode)("div",CM,[p.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",AM,[(0,r.createVNode)((0,r.unref)(ek),{size:32,class:"animate-spin"}),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(l)("æ­£åœ¨è¯»å–äººé™…å…³ç³»...")),1)])):0===X.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",DM,[(0,r.createVNode)((0,r.unref)(Ju),{size:48,class:"empty-icon"}),(0,r.createElementVNode)("p",TM,(0,r.toDisplayString)(Y.value.total>0?"äººç‰©å…³ç³»æ•°æ®ä¸å®Œæ•´æˆ–æœªèƒ½è§£æ":(0,r.unref)(l)("å°šæœªå»ºç«‹äººé™…å…³ç³»")),1),Y.value.total>0?((0,r.openBlock)(),(0,r.createElementBlock)("p",BM," å·²æ£€æµ‹åˆ° "+(0,r.toDisplayString)(Y.value.total)+" æ¡å…³ç³»è®°å½•ï¼Œä½†æœ‰æ•ˆNPCä¸º 0ï¼›å»ºè®®ç»§ç»­è¿›è¡Œä¸€å›åˆä»¥è§¦å‘æ•°æ®ä¿®å¤ï¼Œæˆ–åœ¨ã€Œè°ƒè¯•ä¿¡æ¯ã€é‡Œæ‰§è¡ŒåŒæ­¥/å¼ºåˆ¶åˆ·æ–°ã€‚ ",1)):((0,r.openBlock)(),(0,r.createElementBlock)("p",IM,(0,r.toDisplayString)((0,r.unref)(l)("åœ¨æ¸¸æˆä¸­ä¸æ›´å¤šäººç‰©äº’åŠ¨å»ºç«‹å…³ç³»")),1))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",zM,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(X.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.åå­—,class:(0,r.normalizeClass)(["person-card",{selected:f.value?.åå­—===e.åå­—}]),onClick:t=>(e=>{const t=f.value?.åå­—!==e.åå­—;e&&e.è®°å¿†æ€»ç»“&&("string"==typeof e.è®°å¿†æ€»ç»“?e.è®°å¿†æ€»ç»“=[e.è®°å¿†æ€»ç»“]:Array.isArray(e.è®°å¿†æ€»ç»“)||(e.è®°å¿†æ€»ç»“=[])),f.value=f.value?.åå­—===e.åå­—?null:e,t&&f.value&&(L(),C.value="basic"),f.value?h.value=!0:h.value=!1})(e)},[(0,r.createElementVNode)("div",PM,[(0,r.createElementVNode)("span",RM,(0,r.toDisplayString)(e.åå­—.charAt(0)),1)]),(0,r.createElementVNode)("div",$M,[(0,r.createElementVNode)("div",OM,(0,r.toDisplayString)(e.åå­—),1),(0,r.createElementVNode)("div",LM,[(0,r.createElementVNode)("span",FM,(0,r.toDisplayString)(e.ä¸ç©å®¶å…³ç³»||"ç›¸è¯†"),1),(0,r.createElementVNode)("div",{class:"card-actions",onClick:n[1]||(n[1]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("button",{class:"attention-toggle",onClick:(0,r.withModifiers)(t=>(async e=>{console.log("[å…³æ³¨æŒ‰é’®] ç‚¹å‡»äº†å…³æ³¨æŒ‰é’®ï¼Œäººç‰©:",e.åå­—);const t=e.åå­—;try{const e=i.relationships;if(!e)return void u.showToast("äººç‰©å…³ç³»æ•°æ®ä¸å­˜åœ¨",{type:"error"});const n=Object.keys(e).find(n=>e[n]?.åå­—===t);if(!n)return void u.showToast(`æ‰¾ä¸åˆ°åä¸º ${t} çš„äººç‰©`,{type:"error"});const a=e[n],r=!a.å®æ—¶å…³æ³¨;a.å®æ—¶å…³æ³¨=r,console.log("[å…³æ³¨æŒ‰é’®] åˆ‡æ¢çŠ¶æ€:",r,"ä¿å­˜å‰çš„æ•°æ®:",a.å®æ—¶å…³æ³¨),await i.saveGame(),console.log("[å…³æ³¨æŒ‰é’®] ä¿å­˜å®Œæˆ"),u.showToast(r?`å·²å…³æ³¨ ${t}`:`å·²å–æ¶ˆå…³æ³¨ ${t}`,{type:"success"}),f.value?.åå­—===t&&(f.value={...e[n]})}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";u.showToast(`æ“ä½œå¤±è´¥: ${t}`,{type:"error"}),console.error("[å…³æ³¨æŒ‰é’®] é”™è¯¯:",e)}})(e),["stop"]),title:Z(e)?"å–æ¶ˆå…³æ³¨":"æ·»åŠ å…³æ³¨"},[Z(e)?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(bM),{key:0,size:14,class:"attention-icon active"})):((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(yM),{key:1,size:14,class:"attention-icon inactive"}))],8,jM),(0,r.createElementVNode)("button",{onClick:(0,r.withModifiers)(t=>se(e),["stop"]),class:"delete-btn-card",title:"åˆ é™¤äººç‰©"},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14})],8,UM)])]),"æœªçŸ¥"!==F(e)?((0,r.openBlock)(),(0,r.createElementBlock)("div",qM,[n[13]||(n[13]=(0,r.createElementVNode)("span",{class:"realm-label"},"å¢ƒç•Œ:",-1)),(0,r.createElementVNode)("span",GM,(0,r.toDisplayString)(F(e)),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",HM,[(0,r.createElementVNode)("div",YM,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["intimacy-fill",J(e.å¥½æ„Ÿåº¦)]),style:(0,r.normalizeStyle)({width:Math.max(5,Math.abs(e.å¥½æ„Ÿåº¦||0))+"%"})},null,6)]),(0,r.createElementVNode)("span",WM,(0,r.toDisplayString)(e.å¥½æ„Ÿåº¦||0),1)])]),(0,r.createVNode)((0,r.unref)(Nm),{size:16,class:"arrow-icon"})],10,MM))),128))]))])]),(0,r.createCommentVNode)(" å³ä¾§ï¼šäººç‰©è¯¦æƒ… "),(0,r.createElementVNode)("div",XM,[f.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:0},[(0,r.createCommentVNode)(" è¯¦æƒ…å¤´éƒ¨ "),(0,r.createElementVNode)("div",JM,[(0,r.createElementVNode)("button",{onClick:n[2]||(n[2]=e=>h.value=!1),class:"back-to-list-btn"},[(0,r.createVNode)((0,r.unref)(oh),{size:20})]),(0,r.createElementVNode)("div",KM,[(0,r.createElementVNode)("span",QM,(0,r.toDisplayString)(f.value.åå­—.charAt(0)),1)]),(0,r.createElementVNode)("div",ZM,[(0,r.createElementVNode)("div",eP,[(0,r.createElementVNode)("h3",tP,(0,r.toDisplayString)(f.value.åå­—),1),(0,r.createElementVNode)("div",nP,[(0,r.createElementVNode)("button",{onClick:ne,class:"action-btn download-btn",title:"ä¸‹è½½å®Œæ•´äººç‰©æ•°æ®"},[(0,r.createVNode)((0,r.unref)(lh.A),{size:16})]),(0,r.unref)(s)?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:ae,class:"action-btn export-btn",title:"å¯¼å‡ºåˆ°ä¸–ç•Œä¹¦ï¼ˆä¸å«è®°å¿†ï¼‰"},[(0,r.createVNode)((0,r.unref)(Pu),{size:16})])):(0,r.createCommentVNode)("v-if",!0),f.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,onClick:n[3]||(n[3]=(0,r.withModifiers)(e=>se(f.value),["stop"])),class:"delete-npc-btn",title:"åˆ é™¤æ­¤äººç‰©"},[(0,r.createVNode)((0,r.unref)(ea.A),{size:16})])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createElementVNode)("div",aP,[(0,r.createElementVNode)("span",rP,(0,r.toDisplayString)(f.value.ä¸ç©å®¶å…³ç³»||"ç›¸è¯†"),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["intimacy-badge",J(f.value.å¥½æ„Ÿåº¦)])}," å¥½æ„Ÿ "+(0,r.toDisplayString)(f.value.å¥½æ„Ÿåº¦||0),3),(0,r.createElementVNode)("span",oP,(0,r.toDisplayString)(f.value.ç§æ—||"äººæ—"),1),f.value.åŠ¿åŠ›å½’å±?((0,r.openBlock)(),(0,r.createElementBlock)("span",iP,(0,r.toDisplayString)(f.value.åŠ¿åŠ›å½’å±),1)):(0,r.createCommentVNode)("v-if",!0)])])]),(0,r.createCommentVNode)(" è¯¦æƒ…ä¸»ä½“ "),(0,r.createElementVNode)("div",sP,[(0,r.createCommentVNode)(" é€‰é¡¹å¡å¯¼èˆª "),(0,r.createElementVNode)("div",lP,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(A.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.id,class:(0,r.normalizeClass)(["tab-btn",{active:C.value===e.id}]),onClick:t=>C.value=e.id},(0,r.toDisplayString)(e.icon)+" "+(0,r.toDisplayString)(e.label),11,cP))),128))]),(0,r.createCommentVNode)(" é€‰é¡¹å¡å†…å®¹ "),(0,r.createElementVNode)("div",dP,[(0,r.createCommentVNode)(" Tab 1: åŸºæœ¬ä¿¡æ¯ "),(0,r.withDirectives)((0,r.createElementVNode)("div",uP,[(0,r.createCommentVNode)(" åŸºç¡€æ¡£æ¡ˆ "),(0,r.createElementVNode)("div",mP,[n[20]||(n[20]=(0,r.createElementVNode)("h5",{class:"section-title"},"åŸºç¡€æ¡£æ¡ˆ",-1)),(0,r.createElementVNode)("div",pP,[(0,r.createElementVNode)("div",fP,[n[14]||(n[14]=(0,r.createElementVNode)("span",{class:"info-label"},"å¢ƒç•Œ",-1)),(0,r.createElementVNode)("span",gP,(0,r.toDisplayString)(F(f.value)),1)]),(0,r.createElementVNode)("div",hP,[n[15]||(n[15]=(0,r.createElementVNode)("span",{class:"info-label"},"æ€§åˆ«",-1)),(0,r.createElementVNode)("span",vP,(0,r.toDisplayString)(f.value.æ€§åˆ«||"æœªçŸ¥"),1)]),(0,r.createElementVNode)("div",bP,[n[16]||(n[16]=(0,r.createElementVNode)("span",{class:"info-label"},"å¹´é¾„",-1)),(0,r.createElementVNode)("span",yP,(0,r.toDisplayString)(H(f.value)),1)]),(0,r.createElementVNode)("div",xP,[n[17]||(n[17]=(0,r.createElementVNode)("span",{class:"info-label"},"çµæ ¹",-1)),(0,r.createElementVNode)("span",kP,(0,r.toDisplayString)(j(f.value)),1)]),f.value.å½“å‰ä½ç½®?((0,r.openBlock)(),(0,r.createElementBlock)("div",wP,[n[18]||(n[18]=(0,r.createElementVNode)("span",{class:"info-label"},"ä½ç½®",-1)),(0,r.createElementVNode)("span",EP,(0,r.toDisplayString)(f.value.å½“å‰ä½ç½®.æè¿°),1)])):(0,r.createCommentVNode)("v-if",!0),f.value.å‡ºç”Ÿ?((0,r.openBlock)(),(0,r.createElementBlock)("div",NP,[n[19]||(n[19]=(0,r.createElementVNode)("span",{class:"info-label"},"å‡ºç”Ÿ",-1)),(0,r.createElementVNode)("span",SP,(0,r.toDisplayString)(U(f.value.å‡ºç”Ÿ)),1)])):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createCommentVNode)(" å¤–è²Œä¸æ€§æ ¼ "),f.value.å¤–è²Œæè¿°||f.value.æ€§æ ¼ç‰¹å¾?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",VP,[n[21]||(n[21]=(0,r.createElementVNode)("h5",{class:"section-title"},"å¤–è²Œä¸æ€§æ ¼",-1)),f.value.å¤–è²Œæè¿°?((0,r.openBlock)(),(0,r.createElementBlock)("div",_P,[(0,r.createElementVNode)("p",CP,(0,r.toDisplayString)(f.value.å¤–è²Œæè¿°),1)])):(0,r.createCommentVNode)("v-if",!0),f.value.æ€§æ ¼ç‰¹å¾?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",AP,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.æ€§æ ¼ç‰¹å¾,e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"talent-tag"},(0,r.toDisplayString)(e),1))),128))])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¤©èµ‹ä¸å…­å¸ "),f.value.å¤©èµ‹?.length||f.value.å…ˆå¤©å…­å¸?((0,r.openBlock)(),(0,r.createElementBlock)("div",DP,[n[30]||(n[30]=(0,r.createElementVNode)("h5",{class:"section-title"},"å¤©èµ‹ä¸å…­å¸",-1)),f.value.å¤©èµ‹?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",TP,[n[22]||(n[22]=(0,r.createElementVNode)("h6",{class:"subsection-title"},"å¤©èµ‹èƒ½åŠ›",-1)),(0,r.createElementVNode)("div",BP,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.å¤©èµ‹,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:t,class:"talent-tag",onClick:t=>(e=>{const t=oe(e),n=ie(e);n&&u.showDetailModal({title:t,content:n})})(e),style:{cursor:"pointer"}},(0,r.toDisplayString)(oe(e)),9,IP))),128))])])):(0,r.createCommentVNode)("v-if",!0),f.value.å…ˆå¤©å…­å¸?((0,r.openBlock)(),(0,r.createElementBlock)("div",zP,[n[29]||(n[29]=(0,r.createElementVNode)("h6",{class:"subsection-title"},"å…ˆå¤©å…­å¸",-1)),(0,r.createElementVNode)("div",MP,[(0,r.createElementVNode)("div",PP,[n[23]||(n[23]=(0,r.createElementVNode)("span",{class:"attr-label"},"æ ¹éª¨",-1)),(0,r.createElementVNode)("span",RP,(0,r.toDisplayString)(f.value.å…ˆå¤©å…­å¸.æ ¹éª¨||0),1)]),(0,r.createElementVNode)("div",$P,[n[24]||(n[24]=(0,r.createElementVNode)("span",{class:"attr-label"},"çµæ€§",-1)),(0,r.createElementVNode)("span",OP,(0,r.toDisplayString)(f.value.å…ˆå¤©å…­å¸.çµæ€§||0),1)]),(0,r.createElementVNode)("div",LP,[n[25]||(n[25]=(0,r.createElementVNode)("span",{class:"attr-label"},"æ‚Ÿæ€§",-1)),(0,r.createElementVNode)("span",FP,(0,r.toDisplayString)(f.value.å…ˆå¤©å…­å¸.æ‚Ÿæ€§||0),1)]),(0,r.createElementVNode)("div",jP,[n[26]||(n[26]=(0,r.createElementVNode)("span",{class:"attr-label"},"æ°”è¿",-1)),(0,r.createElementVNode)("span",UP,(0,r.toDisplayString)(f.value.å…ˆå¤©å…­å¸.æ°”è¿||0),1)]),(0,r.createElementVNode)("div",qP,[n[27]||(n[27]=(0,r.createElementVNode)("span",{class:"attr-label"},"é­…åŠ›",-1)),(0,r.createElementVNode)("span",GP,(0,r.toDisplayString)(f.value.å…ˆå¤©å…­å¸.é­…åŠ›||0),1)]),(0,r.createElementVNode)("div",HP,[n[28]||(n[28]=(0,r.createElementVNode)("span",{class:"attr-label"},"å¿ƒæ€§",-1)),(0,r.createElementVNode)("span",YP,(0,r.toDisplayString)(f.value.å…ˆå¤©å…­å¸.å¿ƒæ€§||0),1)])])])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æœ€è¿‘è®°å¿† "),q(f.value).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",WP,[n[31]||(n[31]=(0,r.createElementVNode)("h5",{class:"section-title"},"ğŸ“ æœ€è¿‘è®°å¿†",-1)),(0,r.createElementVNode)("div",XP,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(q(f.value),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"npc-memory-item"},[(0,r.createElementVNode)("div",JP,(0,r.toDisplayString)(e),1)]))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" äººæ ¼åº•çº¿ï¼ˆæ‰€æœ‰NPCéƒ½æœ‰ï¼‰"),(0,r.createElementVNode)("div",KP,[n[32]||(n[32]=(0,r.createElementVNode)("h5",{class:"section-title"},"âš ï¸ äººæ ¼åº•çº¿",-1)),(0,r.createElementVNode)("div",QP,[f.value.äººæ ¼åº•çº¿?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",ZP,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.äººæ ¼åº•çº¿,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:t,class:"bottomline-tag"},(0,r.toDisplayString)(e),1))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",eR,"æœªè®°å½•äººæ ¼åº•çº¿"))]),n[33]||(n[33]=(0,r.createElementVNode)("div",{class:"bottomline-warning"},[(0,r.createElementVNode)("span",{class:"warning-icon"},"âš¡"),(0,r.createElementVNode)("span",{class:"warning-text"},"è§¦çŠ¯äººæ ¼åº•çº¿å°†å¯¼è‡´å¥½æ„Ÿåº¦æ–­å´–å¼ä¸‹è·Œï¼ˆ-30 ~ -60ï¼‰ï¼Œå…³ç³»ç ´è£‚ä¸”æéš¾ä¿®å¤")],-1))])],512),[[r.vShow,"basic"===C.value]]),(0,r.createCommentVNode)(" Tab 2: å®æ—¶çŠ¶æ€ "),(0,r.withDirectives)((0,r.createElementVNode)("div",tR,[(0,r.createElementVNode)("div",nR,[n[38]||(n[38]=(0,r.createElementVNode)("h5",{class:"section-title"},"ğŸ’­ å½“å‰çŠ¶æ€ï¼ˆå®æ—¶ï¼‰",-1)),(0,r.createElementVNode)("div",aR,[(0,r.createElementVNode)("div",rR,[n[35]||(n[35]=(0,r.createElementVNode)("span",{class:"status-icon"},"ğŸ˜¶",-1)),(0,r.createElementVNode)("div",oR,[n[34]||(n[34]=(0,r.createElementVNode)("div",{class:"status-label"},"å¤–è²ŒçŠ¶æ€",-1)),(0,r.createElementVNode)("div",iR,(0,r.toDisplayString)(f.value.å½“å‰å¤–è²ŒçŠ¶æ€||"ç¥æ€è‡ªç„¶ï¼Œè¡£è¡«æ•´æ´"),1)])]),(0,r.createElementVNode)("div",sR,[n[37]||(n[37]=(0,r.createElementVNode)("span",{class:"status-icon"},"ğŸ’­",-1)),(0,r.createElementVNode)("div",lR,[n[36]||(n[36]=(0,r.createElementVNode)("div",{class:"status-label"},"å†…å¿ƒæƒ³æ³•",-1)),(0,r.createElementVNode)("div",cR,(0,r.toDisplayString)(f.value.å½“å‰å†…å¿ƒæƒ³æ³•||"å¿ƒå¦‚æ­¢æ°´ï¼Œå¹³é™æ— æ³¢"),1)])])])])],512),[[r.vShow,"status"===C.value]]),(0,r.createCommentVNode)(" Tab: ç§å¯†ä¿¡æ¯ï¼ˆä»…é…’é¦†ç¯å¢ƒï¼‰ "),(0,r.unref)(s)?(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",dR,[(0,r.createElementVNode)("div",uR,[n[53]||(n[53]=(0,r.createElementVNode)("h5",{class:"section-title"},"ğŸ” ç§å¯†ä¿¡æ¯",-1)),_.value?v.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",pR,[(0,r.createCommentVNode)(" æ¦‚è§ˆ "),(0,r.createElementVNode)("div",fR,[n[47]||(n[47]=(0,r.createElementVNode)("h6",{class:"subsection-title"},"æ¦‚è§ˆ",-1)),(0,r.createElementVNode)("div",gR,[(0,r.createElementVNode)("div",hR,[n[39]||(n[39]=(0,r.createElementVNode)("span",{class:"info-label"},"æ˜¯å¦ä¸ºå¤„å¥³",-1)),(0,r.createElementVNode)("span",vR,(0,r.toDisplayString)(v.value.æ˜¯å¦ä¸ºå¤„å¥³?"æ˜¯":"å¦"),1)]),(0,r.createElementVNode)("div",bR,[n[40]||(n[40]=(0,r.createElementVNode)("span",{class:"info-label"},"æ€§æ ¼å€¾å‘",-1)),(0,r.createElementVNode)("span",yR,(0,r.toDisplayString)(v.value.æ€§æ ¼å€¾å‘||"æ— "),1)]),(0,r.createElementVNode)("div",xR,[n[41]||(n[41]=(0,r.createElementVNode)("span",{class:"info-label"},"æ€§å–å‘",-1)),(0,r.createElementVNode)("span",kR,(0,r.toDisplayString)(v.value.æ€§å–å‘||"æ— "),1)]),(0,r.createElementVNode)("div",wR,[n[42]||(n[42]=(0,r.createElementVNode)("span",{class:"info-label"},"å½“å‰æ€§çŠ¶æ€",-1)),(0,r.createElementVNode)("span",ER,(0,r.toDisplayString)(v.value.å½“å‰æ€§çŠ¶æ€||"æ— "),1)]),(0,r.createElementVNode)("div",NR,[n[43]||(n[43]=(0,r.createElementVNode)("span",{class:"info-label"},"ä½“æ¶²åˆ†æ³ŒçŠ¶æ€",-1)),(0,r.createElementVNode)("span",SR,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["status-badge",`status-${v.value.ä½“æ¶²åˆ†æ³ŒçŠ¶æ€||"æ­£å¸¸"}`])},(0,r.toDisplayString)(v.value.ä½“æ¶²åˆ†æ³ŒçŠ¶æ€||"æ­£å¸¸"),3)])]),(0,r.createElementVNode)("div",VR,[n[44]||(n[44]=(0,r.createElementVNode)("span",{class:"info-label"},"æ€§äº¤æ€»æ¬¡æ•°",-1)),(0,r.createElementVNode)("span",_R,(0,r.toDisplayString)(v.value.æ€§äº¤æ€»æ¬¡æ•°??0),1)])]),(0,r.createElementVNode)("div",CR,[(0,r.createElementVNode)("div",AR,[(0,r.createElementVNode)("div",DR,[n[45]||(n[45]=(0,r.createElementVNode)("span",{class:"dev-label"},"æ€§æ¸´æœ›ç¨‹åº¦",-1)),(0,r.createElementVNode)("span",TR,(0,r.toDisplayString)(v.value.æ€§æ¸´æœ›ç¨‹åº¦??0)+"/100",1)]),(0,r.createElementVNode)("div",BR,[(0,r.createElementVNode)("div",{class:"dev-bar-fill desire-fill",style:(0,r.normalizeStyle)({width:`${t(v.value.æ€§æ¸´æœ›ç¨‹åº¦)}%`})},null,4)])])]),b.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",IR,[n[46]||(n[46]=(0,r.createElementVNode)("span",{class:"last-time-label"},"æœ€è¿‘ä¸€æ¬¡ï¼š",-1)),(0,r.createElementVNode)("span",zR,(0,r.toDisplayString)(b.value),1)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" åå¥½/ä½“è´¨ "),y.value.length||x.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",MR,[n[48]||(n[48]=(0,r.createElementVNode)("h6",{class:"subsection-title"},"åå¥½ä¸ä½“è´¨",-1)),y.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",PR,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(y.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:`${e}-${t}`,class:"fetish-tag"},(0,r.toDisplayString)(e),1))),128))])):(0,r.createCommentVNode)("v-if",!0),x.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",RR,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(x.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:`${e}-${t}`,class:"special-trait-tag"},(0,r.toDisplayString)(e),1))),128))])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æ€§ä¼´ä¾£åå• "),w.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",$R,[n[49]||(n[49]=(0,r.createElementVNode)("h6",{class:"subsection-title"},"æ€§ä¼´ä¾£åå•",-1)),(0,r.createElementVNode)("div",OR,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(E.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:`${e}-${t}`,class:"partner-tag"},(0,r.toDisplayString)(e),1))),128))]),w.value.length>E.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"toggle-more-btn",onClick:n[4]||(n[4]=e=>k.value=!0),type:"button"}," æ˜¾ç¤ºå…¨éƒ¨ï¼ˆ"+(0,r.toDisplayString)(w.value.length)+"ï¼‰ ",1)):w.value.length>10&&k.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"toggle-more-btn",onClick:n[5]||(n[5]=e=>k.value=!1),type:"button"}," æ”¶èµ· ")):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" èº«ä½“éƒ¨ä½ "),S.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",LR,[n[52]||(n[52]=(0,r.createElementVNode)("h6",{class:"subsection-title"},"èº«ä½“éƒ¨ä½",-1)),(0,r.createElementVNode)("div",FR,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(V.value,(e,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:`${e.éƒ¨ä½åç§°}-${a}`,class:"body-part-item"},[(0,r.createElementVNode)("div",jR,[(0,r.createElementVNode)("span",UR,(0,r.toDisplayString)(e.éƒ¨ä½åç§°||`éƒ¨ä½${a+1}`),1),e.ç‰¹æ®Šå°è®°?((0,r.openBlock)(),(0,r.createElementBlock)("span",qR,(0,r.toDisplayString)(e.ç‰¹æ®Šå°è®°),1)):(0,r.createCommentVNode)("v-if",!0)]),e.ç‰¹å¾æè¿°?((0,r.openBlock)(),(0,r.createElementBlock)("div",GR,(0,r.toDisplayString)(e.ç‰¹å¾æè¿°),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",HR,[(0,r.createElementVNode)("div",YR,[n[50]||(n[50]=(0,r.createElementVNode)("span",{class:"stat-label"},"æ•æ„Ÿåº¦",-1)),(0,r.createElementVNode)("div",WR,[(0,r.createElementVNode)("div",{class:"stat-bar-fill sensitivity",style:(0,r.normalizeStyle)({width:`${t(e.æ•æ„Ÿåº¦)}%`})},null,4)]),(0,r.createElementVNode)("span",XR,(0,r.toDisplayString)(e.æ•æ„Ÿåº¦??0),1)]),(0,r.createElementVNode)("div",JR,[n[51]||(n[51]=(0,r.createElementVNode)("span",{class:"stat-label"},"å¼€å‘åº¦",-1)),(0,r.createElementVNode)("div",KR,[(0,r.createElementVNode)("div",{class:"stat-bar-fill development",style:(0,r.normalizeStyle)({width:`${t(e.å¼€å‘åº¦)}%`})},null,4)]),(0,r.createElementVNode)("span",QR,(0,r.toDisplayString)(e.å¼€å‘åº¦??0),1)])])]))),128))]),S.value.length>V.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"toggle-more-btn",onClick:n[6]||(n[6]=e=>N.value=!0),type:"button"}," æ˜¾ç¤ºå…¨éƒ¨ï¼ˆ"+(0,r.toDisplayString)(S.value.length)+"ï¼‰ ",1)):S.value.length>6&&N.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"toggle-more-btn",onClick:n[7]||(n[7]=e=>N.value=!1),type:"button"}," æ”¶èµ· ")):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",ZR,"æš‚æ— ç§å¯†ä¿¡æ¯ï¼ˆç­‰å¾…AIç”Ÿæˆï¼‰")):((0,r.openBlock)(),(0,r.createElementBlock)("div",mR," æˆäººå†…å®¹æœªå¯ç”¨ï¼ˆå¯åœ¨è®¾ç½®é¢æ¿å¼€å¯ï¼‰ "))])],512)),[[r.vShow,"nsfw"===C.value]]):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" Tab 3: è®°å¿†æ¡£æ¡ˆ "),(0,r.withDirectives)((0,r.createElementVNode)("div",e$,[(0,r.createCommentVNode)(" è¯¦ç»†è®°å¿†åŒºåŸŸ "),f.value.è®°å¿†?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",t$,[(0,r.createElementVNode)("div",n$,[n[54]||(n[54]=(0,r.createElementVNode)("h5",{class:"section-title",style:{border:"none",padding:"0",margin:"0"}}," ğŸ“ è¯¦ç»†è®°å¿† ",-1)),(0,r.createElementVNode)("div",a$,[(0,r.createElementVNode)("div",r$,(0,r.toDisplayString)(f.value.è®°å¿†?.length||0)+" æ¡",1),(0,r.createElementVNode)("div",o$,[(0,r.createElementVNode)("button",{class:"download-memory-btn",onClick:te,title:"ä¸‹è½½æ‰€æœ‰è®°å¿†"}," ğŸ’¾ ä¸‹è½½è®°å¿† "),(f.value.è®°å¿†?.length||0)>=3?((0,r.openBlock)(),(0,r.createElementBlock)("div",i$,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":n[8]||(n[8]=e=>B.value=e),min:3,max:f.value.è®°å¿†?.length||3,class:"summarize-input",placeholder:"æ¡æ•°",title:"ä»æœ€æ—§å¼€å§‹æ€»ç»“çš„è®°å¿†æ¡æ•°"},null,8,s$),[[r.vModelText,B.value,void 0,{number:!0}]]),(0,r.createElementVNode)("button",{class:"summarize-btn",onClick:ee,disabled:D.value,title:"æ€»ç»“æœ€æ—§çš„è®°å¿†"},(0,r.toDisplayString)(D.value?"æ€»ç»“ä¸­...":"ğŸ“ æ€»ç»“"),9,l$)])):(0,r.createCommentVNode)("v-if",!0)])])]),(0,r.createCommentVNode)(" æ€»ç»“æ¨¡å¼æç¤º "),n[55]||(n[55]=(0,r.createElementVNode)("div",{class:"summary-mode-hint"},[(0,r.createTextVNode)(" â„¹ï¸ æ€»ç»“æ¨¡å¼é…ç½®ï¼ˆRaw/æ ‡å‡†ã€æµå¼/éæµå¼ï¼‰è¯·å‰å¾€ "),(0,r.createElementVNode)("strong",null,"è®°å¿†ä¸­å¿ƒé¢æ¿"),(0,r.createTextVNode)(" â†’ è®¾ç½® ")],-1)),(0,r.createElementVNode)("div",c$,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(P.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"memory-item"},[(0,r.createElementVNode)("div",d$,[(0,r.unref)(kM)(e)?((0,r.openBlock)(),(0,r.createElementBlock)("div",u$,(0,r.toDisplayString)((0,r.unref)(kM)(e)),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",m$,(0,r.toDisplayString)((0,r.unref)(wM)(e)),1)]),(0,r.createElementVNode)("div",p$,[(0,r.createElementVNode)("button",{class:"memory-btn edit",onClick:e=>(async e=>{if(!f.value)return;const t=f.value.åå­—,n=K(t);if(!n)return;if(!i.relationships?.[n]?.è®°å¿†)return;const a=i.relationships[n].è®°å¿†[e];if("string"==typeof a){const t=window.prompt("ç¼–è¾‘è®°å¿†å†…å®¹",a);if(null===t||""===t.trim())return;return i.relationships[n].è®°å¿†[e]=t.trim(),f.value={...i.relationships[n]},await i.saveGame(),void u.showToast("è®°å¿†å·²æ›´æ–°",{type:"success"})}if(a&&"object"==typeof a){const t=a.æ—¶é—´||"æœªçŸ¥æ—¶é—´",r=a.äº‹ä»¶||"",o=window.prompt("ç¼–è¾‘è®°å¿†æ—¶é—´",t);if(null===o)return;const s=window.prompt("ç¼–è¾‘è®°å¿†äº‹ä»¶",r);if(null===s)return;i.relationships[n].è®°å¿†[e]={æ—¶é—´:o.trim(),äº‹ä»¶:s.trim()},f.value={...i.relationships[n]},await i.saveGame(),u.showToast("è®°å¿†å·²æ›´æ–°",{type:"success"})}})((z.value-1)*I.value+t)}," ç¼–è¾‘ ",8,f$),(0,r.createElementVNode)("button",{class:"memory-btn delete",onClick:e=>(async e=>{f.value&&u.showRetryDialog({title:"åˆ é™¤è®°å¿†",message:"ç¡®å®šè¦åˆ é™¤è¿™æ¡è®°å¿†å—ï¼Ÿ",confirmText:"åˆ é™¤",cancelText:"å–æ¶ˆ",onConfirm:async()=>{const t=f.value.åå­—,n=K(t);n&&i.relationships?.[n]?.è®°å¿†&&(i.relationships[n].è®°å¿†.splice(e,1),f.value={...i.relationships[n]},await i.saveGame(),u.showToast("è®°å¿†å·²åˆ é™¤",{type:"success"}))},onCancel:()=>{}})})((z.value-1)*I.value+t)}," åˆ é™¤ ",8,g$)])]))),128))]),R.value>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",h$,[(0,r.createElementVNode)("button",{class:"pagination-btn",disabled:z.value<=1,onClick:n[9]||(n[9]=e=>$(z.value-1))}," ä¸Šä¸€é¡µ ",8,v$),(0,r.createElementVNode)("div",b$,[(0,r.createElementVNode)("span",y$,(0,r.toDisplayString)(z.value)+" / "+(0,r.toDisplayString)(R.value),1),(0,r.createElementVNode)("div",x$,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number","onUpdate:modelValue":n[10]||(n[10]=e=>M.value=e),min:1,max:R.value,class:"page-input",placeholder:"é¡µç ",onKeyup:(0,r.withKeys)(O,["enter"])},null,40,k$),[[r.vModelText,M.value,void 0,{number:!0}]]),(0,r.createElementVNode)("button",{class:"jump-btn",onClick:O},"è·³è½¬")])]),(0,r.createElementVNode)("button",{class:"pagination-btn",disabled:z.value>=R.value,onClick:n[11]||(n[11]=e=>$(z.value+1))}," ä¸‹ä¸€é¡µ ",8,w$)])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" è®°å¿†æ€»ç»“åŒºåŸŸ "),f.value.è®°å¿†æ€»ç»“?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",E$,[n[57]||(n[57]=(0,r.createElementVNode)("h5",{class:"section-title"},"ğŸ“œ è®°å¿†æ€»ç»“",-1)),(0,r.createElementVNode)("div",N$,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.è®°å¿†æ€»ç»“,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"memory-summary-item"},[n[56]||(n[56]=(0,r.createElementVNode)("div",{class:"summary-icon"},"ğŸ“œ",-1)),(0,r.createElementVNode)("div",S$,(0,r.toDisplayString)(e),1)]))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ç©ºçŠ¶æ€æç¤º "),f.value.è®°å¿†?.length||f.value.è®°å¿†æ€»ç»“?.length?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",V$,[(0,r.createElementVNode)("div",_$,[(0,r.createVNode)((0,r.unref)(Pu),{size:24,class:"empty-icon"}),n[58]||(n[58]=(0,r.createElementVNode)("p",null,"æ­¤äººæš‚æ— è®°å¿†",-1)),n[59]||(n[59]=(0,r.createElementVNode)("p",{class:"empty-hint"},"åœ¨æ¸¸æˆä¸­ä¸è¯¥äººç‰©äº’åŠ¨ä¼šç”Ÿæˆè®°å¿†",-1))])]))],512),[[r.vShow,"memory"===C.value]]),(0,r.createCommentVNode)(" End of Tab 4: è®°å¿†æ¡£æ¡ˆ "),(0,r.createCommentVNode)(" Tab 5: èƒŒåŒ… "),(0,r.withDirectives)((0,r.createElementVNode)("div",C$,[(0,r.createElementVNode)("div",A$,[n[66]||(n[66]=(0,r.createElementVNode)("h5",{class:"section-title"},"èƒŒåŒ…",-1)),f.value.èƒŒåŒ…?.çµçŸ³?((0,r.openBlock)(),(0,r.createElementBlock)("div",D$,[(0,r.createElementVNode)("div",T$,[n[60]||(n[60]=(0,r.createElementVNode)("span",null,"ä¸‹å“çµçŸ³",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(f.value.èƒŒåŒ….çµçŸ³.ä¸‹å“||0),1)]),(0,r.createElementVNode)("div",B$,[n[61]||(n[61]=(0,r.createElementVNode)("span",null,"ä¸­å“çµçŸ³",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(f.value.èƒŒåŒ….çµçŸ³.ä¸­å“||0),1)]),(0,r.createElementVNode)("div",I$,[n[62]||(n[62]=(0,r.createElementVNode)("span",null,"ä¸Šå“çµçŸ³",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(f.value.èƒŒåŒ….çµçŸ³.ä¸Šå“||0),1)]),(0,r.createElementVNode)("div",z$,[n[63]||(n[63]=(0,r.createElementVNode)("span",null,"æå“çµçŸ³",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(f.value.èƒŒåŒ….çµçŸ³.æå“||0),1)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",M$,[Q(f.value)?((0,r.openBlock)(),(0,r.createElementBlock)("div",P$,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.èƒŒåŒ….ç‰©å“,(e,t)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:(0,r.normalizeClass)(["npc-item-card",(o=e.å“è´¨?.quality,o?`quality-${o.toLowerCase()}`:"quality-unknown")])},[(0,r.createElementVNode)("div",R$,[(0,r.createElementVNode)("span",$$,(0,r.toDisplayString)(e.åç§°||t),1),(0,r.createElementVNode)("span",O$,(0,r.toDisplayString)(e.ç±»å‹||"å…¶ä»–"),1)]),e.å“è´¨?((0,r.openBlock)(),(0,r.createElementBlock)("div",L$,[(0,r.createElementVNode)("span",F$,(0,r.toDisplayString)(e.å“è´¨?.quality||"æœªçŸ¥")+(0,r.toDisplayString)(e.å“è´¨?.grade?(a=e.å“è´¨.grade,null==a?"":0===a?"æ®‹ç¼º":a>=1&&a<=3?"ä¸‹å“":a>=4&&a<=6?"ä¸­å“":a>=7&&a<=9?"ä¸Šå“":10===a?"æå“":""):""),1)])):(0,r.createCommentVNode)("v-if",!0),e.æ•°é‡>1?((0,r.openBlock)(),(0,r.createElementBlock)("div",j$,[(0,r.createElementVNode)("span",null,"x"+(0,r.toDisplayString)(e.æ•°é‡),1)])):(0,r.createCommentVNode)("v-if",!0),e.æè¿°?((0,r.openBlock)(),(0,r.createElementBlock)("div",U$,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(e.æè¿°),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",q$,[(0,r.createElementVNode)("button",{class:"trade-btn",onClick:t=>((e,t)=>{const n=`å°è¯•ä¸ ${e.åå­—} äº¤æ˜“ ${t.åç§°}`;d.addAction({type:"npc_trade",itemName:t.åç§°,itemType:"NPCäº¤æ˜“",description:n,npcName:e.åå­—,itemId:t.ç‰©å“ID||t.åç§°,tradeType:"trade"}),u.showToast(`å·²å°†ä¸ ${e.åå­—} çš„äº¤æ˜“è¯·æ±‚åŠ å…¥åŠ¨ä½œé˜Ÿåˆ—`,{type:"success"})})(f.value,e),title:"å°è¯•äº¤æ˜“æ­¤ç‰©å“"},[(0,r.createVNode)((0,r.unref)(xM),{size:12}),n[64]||(n[64]=(0,r.createTextVNode)("äº¤æ˜“ ",-1))],8,G$),(0,r.createElementVNode)("button",{class:"request-btn",onClick:t=>((e,t)=>{const n=`å‘ ${e.åå­—} ç´¢è¦ ${t.åç§°}`;d.addAction({type:"npc_request",itemName:t.åç§°,itemType:"NPCç´¢è¦",description:n,npcName:e.åå­—,itemId:t.ç‰©å“ID||t.åç§°,tradeType:"request"}),u.showToast(`å·²å°†å‘ ${e.åå­—} ç´¢è¦ç‰©å“çš„è¯·æ±‚åŠ å…¥åŠ¨ä½œé˜Ÿåˆ—`,{type:"success"})})(f.value,e),title:"è¯·æ±‚è·å¾—æ­¤ç‰©å“"}," ğŸ™ ç´¢è¦ ",8,H$),(0,r.createElementVNode)("button",{class:"steal-btn",onClick:t=>((e,t)=>{const n=`å°è¯•ä» ${e.åå­—} èº«ä¸Šå·å– ${t.åç§°}`;d.addAction({type:"npc_steal",itemName:t.åç§°,itemType:"NPCå·çªƒ",description:n,npcName:e.åå­—,itemId:t.ç‰©å“ID||t.åç§°,tradeType:"steal"}),u.showToast(`å·²å°†å·çªƒ ${e.åå­—} ç‰©å“çš„è®¡åˆ’åŠ å…¥åŠ¨ä½œé˜Ÿåˆ—`,{type:"success"})})(f.value,e),title:"å°è¯•å·å–æ­¤ç‰©å“"}," ğŸ¥· å·çªƒ ",8,Y$)])],2);var a,o}),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",W$,[(0,r.createVNode)((0,r.unref)(zu),{size:24,class:"empty-icon"}),n[65]||(n[65]=(0,r.createElementVNode)("p",null,"æ­¤äººèº«ä¸Šæ²¡æœ‰ç‰©å“",-1))]))])])],512),[[r.vShow,"inventory"===C.value]]),(0,r.createCommentVNode)(" End of Tab 5: èƒŒåŒ… "),(0,r.createCommentVNode)(" Tab 6: åŸå§‹æ•°æ® "),(0,r.withDirectives)((0,r.createElementVNode)("div",X$,[(0,r.createElementVNode)("div",J$,[n[67]||(n[67]=(0,r.createElementVNode)("h5",{class:"section-title"},"åŸå§‹æ•°æ® (JSON)",-1)),(0,r.createElementVNode)("div",K$,[(0,r.createElementVNode)("pre",null,[(0,r.createElementVNode)("code",null,(0,r.toDisplayString)(JSON.stringify(f.value,null,2)),1)])])])],512),[[r.vShow,"raw"===C.value]]),(0,r.createCommentVNode)(" End of Tab 7: åŸå§‹æ•°æ® ")]),(0,r.createCommentVNode)(" End of tab-content ")]),(0,r.createCommentVNode)(" End of detail-body ")],64)):((0,r.openBlock)(),(0,r.createElementBlock)("div",Q$,[(0,r.createVNode)((0,r.unref)(Ju),{size:64,class:"placeholder-icon"}),n[68]||(n[68]=(0,r.createElementVNode)("p",{class:"placeholder-text"},"é€‰æ‹©ä¸€ä¸ªäººç‰©æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯",-1)),n[69]||(n[69]=(0,r.createElementVNode)("p",{class:"placeholder-hint"},"åœ¨æ¸¸æˆä¸­ä¸äººç‰©äº’åŠ¨ä¼šå»ºç«‹å…³ç³»è®°å½•",-1))]))])],2)])]))}});var eO=n(5081),tO={};tO.styleTagTransform=k(),tO.setAttributes=v(),tO.insert=g().bind(null,"head"),tO.domAPI=p(),tO.insertStyleElement=y(),u()(eO.A,tO),eO.A&&eO.A.locals&&eO.A.locals;const nO=(0,N.A)(Z$,[["__scopeId","data-v-192d0848"]]);var aO=n(3441);const rO=(0,V.A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),oO=(0,V.A)("package-open",[["path",{d:"M12 22v-9",key:"x3hkom"}],["path",{d:"M15.17 2.21a1.67 1.67 0 0 1 1.63 0L21 4.57a1.93 1.93 0 0 1 0 3.36L8.82 14.79a1.655 1.655 0 0 1-1.64 0L3 12.43a1.93 1.93 0 0 1 0-3.36z",key:"2ntwy6"}],["path",{d:"M20 13v3.87a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13",key:"1pmm1c"}],["path",{d:"M21 12.43a1.93 1.93 0 0 0 0-3.36L8.83 2.2a1.64 1.64 0 0 0-1.63 0L3 4.57a1.93 1.93 0 0 0 0 3.36l12.18 6.86a1.636 1.636 0 0 0 1.63 0z",key:"12ttoo"}]]),iO=(0,V.A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),sO=(0,V.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),lO=(0,V.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),cO={class:"deep-cultivation-modal"},dO={class:"modal-header"},uO={class:"modal-content"},mO={key:0,class:"technique-info-section"},pO={class:"info-header"},fO={class:"technique-details"},gO={class:"technique-quality"},hO={class:"progress-section"},vO={class:"progress-label"},bO={class:"progress-percent"},yO={class:"progress-bar-bg"},xO={key:0,class:"effects-section"},kO={class:"effects-list"},wO={key:0},EO={key:1},NO={class:"cultivation-days-section"},SO={class:"section-label"},VO={class:"section-hint"},_O={class:"input-group"},CO=["placeholder"],AO={class:"input-unit"},DO={class:"preset-buttons"},TO=["onClick"],BO={class:"modal-footer"},IO=["disabled"],zO=(0,r.defineComponent)({__name:"DeepCultivationModal",props:{visible:{type:Boolean},technique:{},currentProgress:{default:0}},emits:["close","confirm"],setup(e,{emit:t}){const{t:n}=(0,re.s)(),a=e,o=t,i=(0,r.ref)(7),s=[{label:"1å¤©",value:1},{label:"7å¤©",value:7},{label:"30å¤©",value:30},{label:"90å¤©",value:90},{label:"180å¤©",value:180},{label:"365å¤©",value:365}],l=(0,r.computed)(()=>i.value>=1&&i.value<=3650),c=(0,r.computed)(()=>`quality-${a.technique?.å“è´¨?.quality||"å‡¡"}`),d=()=>{o("close")},u=()=>{l.value&&o("confirm",i.value)};return(0,r.watch)(()=>a.visible,e=>{e||(i.value=7)}),(e,t)=>e.visible?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,r.withModifiers)(d,["self"])},[(0,r.createElementVNode)("div",cO,[(0,r.createElementVNode)("div",dO,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(e.$t("æ·±åº¦ä¿®ç‚¼")),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:d},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})])]),(0,r.createElementVNode)("div",uO,[(0,r.createCommentVNode)(" åŠŸæ³•ä¿¡æ¯ "),e.technique?((0,r.openBlock)(),(0,r.createElementBlock)("div",mO,[(0,r.createElementVNode)("div",pO,[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["technique-icon",c.value])},"ğŸ“–",2),(0,r.createElementVNode)("div",fO,[(0,r.createElementVNode)("h4",{class:(0,r.normalizeClass)(["technique-name",c.value])},(0,r.toDisplayString)(e.technique.åç§°),3),(0,r.createElementVNode)("div",gO,(0,r.toDisplayString)(e.technique.å“è´¨?.quality||"å‡¡")+"å“ "+(0,r.toDisplayString)(e.technique.å“è´¨?.grade||0)+"é˜¶ ",1)])]),(0,r.createCommentVNode)(" å½“å‰ä¿®ç‚¼è¿›åº¦ "),(0,r.createElementVNode)("div",hO,[(0,r.createElementVNode)("div",vO,[(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.$t("å½“å‰ä¿®ç‚¼è¿›åº¦")),1),(0,r.createElementVNode)("span",bO,(0,r.toDisplayString)(e.currentProgress)+"%",1)]),(0,r.createElementVNode)("div",yO,[(0,r.createElementVNode)("div",{class:"progress-bar-fill",style:(0,r.normalizeStyle)({width:e.currentProgress+"%"})},null,4)])]),(0,r.createCommentVNode)(" åŠŸæ³•æ•ˆæœ "),e.technique.åŠŸæ³•æ•ˆæœ?((0,r.openBlock)(),(0,r.createElementBlock)("div",xO,[(0,r.createElementVNode)("h5",null,(0,r.toDisplayString)(e.$t("åŠŸæ³•æ•ˆæœ")),1),(0,r.createElementVNode)("ul",kO,[e.technique.åŠŸæ³•æ•ˆæœ.ä¿®ç‚¼é€Ÿåº¦åŠ æˆ?((0,r.openBlock)(),(0,r.createElementBlock)("li",wO,[t[1]||(t[1]=(0,r.createElementVNode)("span",{class:"effect-icon"},"ğŸš€",-1)),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.$t("ä¿®ç‚¼é€Ÿåº¦: +{0}%").replace("{0}",(100*(e.technique.åŠŸæ³•æ•ˆæœ.ä¿®ç‚¼é€Ÿåº¦åŠ æˆ-1)).toFixed(0))),1)])):(0,r.createCommentVNode)("v-if",!0),e.technique.åŠŸæ³•æ•ˆæœ.å±æ€§åŠ æˆ?((0,r.openBlock)(),(0,r.createElementBlock)("li",EO,[t[2]||(t[2]=(0,r.createElementVNode)("span",{class:"effect-icon"},"ğŸ’ª",-1)),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.$t("å±æ€§åŠ æˆ:"))+" ",1),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.technique.åŠŸæ³•æ•ˆæœ.å±æ€§åŠ æˆ,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:t,class:"attr-bonus"},(0,r.toDisplayString)(t)+"+"+(0,r.toDisplayString)(e),1))),128))])):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ä¿®ç‚¼å¤©æ•°é€‰æ‹© "),(0,r.createElementVNode)("div",NO,[(0,r.createElementVNode)("label",SO,(0,r.toDisplayString)(e.$t("é€‰æ‹©ä¿®ç‚¼å¤©æ•°")),1),(0,r.createElementVNode)("p",VO,(0,r.toDisplayString)(e.$t("AIå°†æ ¹æ®ä¿®ç‚¼å¤©æ•°ç”Ÿæˆè¯¦ç»†çš„ä¿®ç‚¼è¿‡ç¨‹å’Œç»“æœ")),1),(0,r.createElementVNode)("div",_O,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),type:"number",min:1,max:3650,step:1,class:"days-input",placeholder:e.$t("è¾“å…¥å¤©æ•°")},null,8,CO),[[r.vModelText,i.value,void 0,{number:!0}]]),(0,r.createElementVNode)("span",AO,(0,r.toDisplayString)(e.$t("å¤©")),1)]),(0,r.createCommentVNode)(" å¿«æ·é€‰æ‹© "),(0,r.createElementVNode)("div",DO,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s,e=>(0,r.createElementVNode)("button",{key:e.value,class:(0,r.normalizeClass)(["preset-btn",{active:i.value===e.value}]),onClick:t=>i.value=e.value},(0,r.toDisplayString)(e.label),11,TO)),64))])])]),(0,r.createElementVNode)("div",BO,[(0,r.createElementVNode)("button",{class:"btn btn-cancel",onClick:d},(0,r.toDisplayString)(e.$t("å–æ¶ˆ")),1),(0,r.createElementVNode)("button",{class:"btn btn-confirm",disabled:!l.value,onClick:u},(0,r.toDisplayString)(e.$t("å¼€å§‹ä¿®ç‚¼")),9,IO)])])])):(0,r.createCommentVNode)("v-if",!0)}});var MO=n(2031),PO={};PO.styleTagTransform=k(),PO.setAttributes=v(),PO.insert=g().bind(null,"head"),PO.domAPI=p(),PO.insertStyleElement=y(),u()(MO.A,PO),MO.A&&MO.A.locals&&MO.A.locals;const RO=(0,N.A)(zO,[["__scopeId","data-v-57971540"]]),$O={class:"game-panel skills-panel"},OO={class:"filter-section"},LO={class:"filter-tabs"},FO={class:"tab-name"},jO={class:"tab-name"},UO={class:"tab-count"},qO={class:"panel-content"},GO={key:0,class:"cultivation-tab-content"},HO={class:"card-content-wrapper"},YO={key:0,class:"detail-content"},WO={class:"detail-header"},XO={class:"title-group"},JO={class:"title-icon-wrapper"},KO={class:"detail-title"},QO={class:"header-actions"},ZO={class:"technique-info-container"},eL={class:"info-row"},tL={class:"info-row"},nL={class:"info-value"},aL={class:"info-row"},rL={class:"info-value"},oL={class:"info-row"},iL={class:"info-value text-success"},sL={class:"progress-section"},lL={class:"progress-info"},cL={class:"progress-label"},dL={class:"label-icon"},uL={class:"progress-value"},mL={class:"progress-bar-wrapper"},pL={class:"progress-bar large"},fL={class:"progress-milestones"},gL=["title"],hL={class:"milestone-name"},vL={key:0,class:"upcoming-skill-info"},bL={class:"cultivation-stats"},yL={class:"stat-card"},xL={class:"stat-icon"},kL={class:"stat-info"},wL={class:"stat-value"},EL={class:"stat-card"},NL={class:"stat-icon"},SL={class:"stat-info"},VL={class:"stat-value"},_L={class:"stat-card"},CL={class:"stat-icon"},AL={class:"stat-info"},DL={class:"stat-value"},TL={key:0,class:"stat-card highlight"},BL={class:"stat-icon"},IL={class:"stat-info"},zL={class:"stat-value"},ML={key:1,class:"empty-state"},PL={key:0,class:"skills-list-section"},RL={key:0,class:"skills-category"},$L={class:"category-header"},OL={class:"list-title"},LL={class:"title-badge success"},FL={class:"skill-count"},jL={class:"skills-grid"},UL={class:"skill-header"},qL={class:"skill-name"},GL={class:"skill-description"},HL={class:"skill-footer"},YL={class:"unlock-condition"},WL={key:1,class:"skills-category"},XL={class:"category-header"},JL={class:"list-title"},KL={class:"title-badge warning"},QL={class:"skill-count"},ZL={class:"skills-grid"},eF={class:"skill-header"},tF={class:"skill-name"},nF={class:"skill-description dimmed"},aF={class:"skill-footer"},rF={class:"unlock-condition"},oF={class:"unlock-progress-bar"},iF={key:1,class:"library-tab-content"},sF={key:0,class:"empty-state"},lF={key:1,class:"items-grid techniques-grid"},cF=["onClick"],dF={class:"item-info"},uF={class:"modal-header"},mF={class:"modal-title"},pF={class:"modal-content"},fF={class:"modal-actions"},gF=(0,r.defineComponent)({__name:"SkillsPanel",setup(e){const{t}=(0,re.s)(),a=(0,Iu.useGameStateStore)(),o=(0,hd.useCharacterStore)(),i=(0,T.useUIStore)(),s=(0,r.computed)(()=>u.value&&g.value.find(e=>!h(e.æŠ€èƒ½åç§°))||null),l=(0,r.ref)("cultivation"),c=(0,r.ref)(null),d=(0,r.ref)(!1),u=(0,r.computed)(()=>{const e=a.inventory?.ç‰©å“;if(!e)return null;const t=Object.values(e).find(e=>"åŠŸæ³•"===e?.ç±»å‹&&!0===e?.å·²è£…å¤‡)||null;return!t||t.åŠŸæ³•æŠ€èƒ½&&0!==t.åŠŸæ³•æŠ€èƒ½.length||console.warn("[SkillsPanel] åŠŸæ³•æŠ€èƒ½ä¸ºç©ºæˆ–æœªå®šä¹‰",{åŠŸæ³•åç§°:t.åç§°,åŠŸæ³•æŠ€èƒ½:t.åŠŸæ³•æŠ€èƒ½,å®Œæ•´æ•°æ®:t}),t}),m=(0,r.computed)(()=>{const e=a.inventory?.ç‰©å“;return e?Object.values(e).filter(e=>"åŠŸæ³•"===e?.ç±»å‹&&!e.å·²è£…å¤‡):[]}),p=(0,r.computed)(()=>{if(!u.value?.åŠŸæ³•æŠ€èƒ½)return[];const e=u.value.å·²è§£é”æŠ€èƒ½||[];return u.value.åŠŸæ³•æŠ€èƒ½.filter(t=>e.includes(t.æŠ€èƒ½åç§°))}),f=(0,r.computed)(()=>{if(!u.value?.åŠŸæ³•æŠ€èƒ½)return[];const e=u.value.å·²è§£é”æŠ€èƒ½||[];return u.value.åŠŸæ³•æŠ€èƒ½.filter(t=>!e.includes(t.æŠ€èƒ½åç§°))}),g=(0,r.computed)(()=>u.value?.åŠŸæ³•æŠ€èƒ½?[...u.value.åŠŸæ³•æŠ€èƒ½].sort((e,t)=>(e.ç†Ÿç»ƒåº¦è¦æ±‚||0)-(t.ç†Ÿç»ƒåº¦è¦æ±‚||0)):[]),h=e=>u.value?.å·²è§£é”æŠ€èƒ½?.includes(e)||!1,v=e=>{const t=u.value?.ä¿®ç‚¼è¿›åº¦||0,n=e.ç†Ÿç»ƒåº¦è¦æ±‚||100;return Math.min(100,t/n*100)},b=(0,r.computed)(()=>!!u.value&&(u.value.ä¿®ç‚¼è¿›åº¦||0)>=100),y=(0,r.computed)(()=>{const e=u.value;return e?(1*(t=e.å“è´¨?.quality,{ä»™:3,ç¥:2.5,åœ£:2,å¤©:1.8,åœ°:1.5,ç„:1.3,é»„:1.1,å‡¡:1}[t||"å‡¡"]||1)*(e.åŠŸæ³•æ•ˆæœ?.ä¿®ç‚¼é€Ÿåº¦åŠ æˆ||1)).toFixed(1):"0";var t}),x=(0,r.computed)(()=>{const e=100-(u.value?.ä¿®ç‚¼è¿›åº¦||0);if(e<=0)return"å·²æ»¡";const t=parseFloat(y.value);if(t<=0)return"æœªçŸ¥";const n=Math.ceil(e/t);return n>365?`çº¦${Math.ceil(n/365)}å¹´`:n>30?`çº¦${Math.ceil(n/30)}æœˆ`:`çº¦${n}å¤©`}),k=(0,r.computed)(()=>{const e=s.value;if(!e)return"å·²å…¨éƒ¨è§£é”";const t=u.value?.ä¿®ç‚¼è¿›åº¦||0,n=(e.ç†Ÿç»ƒåº¦è¦æ±‚||0)-t;return n<=0?e.æŠ€èƒ½åç§°:`è¿˜éœ€${n.toFixed(1)}%`}),w=(0,r.computed)(()=>{if(!b.value)return 0;const e=u.value;if(!e)return 0;const t={ä»™:30,ç¥:40,åœ£:50,å¤©:60,åœ°:70,ç„:75,é»„:80,å‡¡:85}[e.å“è´¨?.quality||"å‡¡"]||70;return Math.min(95,t)}),E=async e=>{if(!u.value)return;const{useActionQueueStore:a}=await Promise.resolve().then(n.bind(n,3310)),r=a();"normal"===e?(r.addAction({type:"cultivate",itemName:u.value.åç§°,itemType:t("åŠŸæ³•"),description:`å¼€å§‹ä¿®ç‚¼ã€Š${u.value.åç§°}ã€‹ï¼Œæå‡åŠŸæ³•ç†Ÿç»ƒåº¦`}),i.showToast(`å¼€å§‹ä¿®ç‚¼ã€Š${u.value.åç§°}ã€‹`,{type:"success"})):(r.addAction({type:"secluded_cultivation",itemName:u.value.åç§°,itemType:t("é—­å…³"),description:`è¿›å…¥é—­å…³çŠ¶æ€ï¼Œä¸“å¿ƒä¿®ç‚¼ã€Š${u.value.åç§°}ã€‹ï¼Œæ•ˆç‡å¤§å¹…æå‡`}),i.showToast(`è¿›å…¥é—­å…³ä¿®ç‚¼ã€Š${u.value.åç§°}ã€‹`,{type:"info"}))},N=async()=>{if(!u.value||!b.value)return;const{useActionQueueStore:e}=await Promise.resolve().then(n.bind(n,3310));e().addAction({type:"breakthrough",itemName:u.value.åç§°,itemType:t("çªç ´"),description:`å°è¯•çªç ´ã€Š${u.value.åç§°}ã€‹çš„å½“å‰å¢ƒç•Œï¼Œè¿›å…¥æ›´é«˜å±‚æ¬¡`}),i.showToast(`å°è¯•çªç ´ã€Š${u.value.åç§°}ã€‹`,{type:"warning"})},S=(0,r.computed)(()=>u.value),V=e=>Math.min(100,Math.max(0,e||0)).toFixed(1),_=e=>`quality-${e?.å“è´¨?.quality||"å‡¡"}`,C=e=>`text-quality-${e?.å“è´¨?.quality||"å‡¡"}`,D=()=>{c.value=null},B=async()=>{if(!u.value?.ç‰©å“ID)return;const e=u.value;i.showRetryDialog({title:t("å¸ä¸‹åŠŸæ³•"),message:`${t("ç¡®å®šè¦å¸ä¸‹")}ã€Š${e.åç§°}ã€‹${t("å—")}ï¼Ÿ`,confirmText:t("ç¡®å®šå¸ä¸‹"),cancelText:t("å–æ¶ˆ"),onConfirm:async()=>{try{await o.unequipTechnique(e.ç‰©å“ID)}catch(e){console.error("[SkillsPanel] Unequip technique failed:",e)}},onCancel:()=>{}})},I=()=>{d.value=!1},z=async e=>{if(d.value=!1,u.value)try{const{useActionQueueStore:a}=await Promise.resolve().then(n.bind(n,3310));a().addAction({type:"cultivate",itemName:u.value.åç§°,itemType:t("åŠŸæ³•"),description:`å¯¹ã€Š${u.value.åç§°}ã€‹è¿›è¡Œ${e}å¤©çš„æ·±åº¦ä¿®ç‚¼`})}catch(e){console.error("[SkillsPanel] Add deep cultivation action failed:",e)}};return(0,r.watch)(u,()=>{(()=>{if(!u.value)return;const e=u.value;if(!e.åŠŸæ³•æŠ€èƒ½||!Array.isArray(e.åŠŸæ³•æŠ€èƒ½))return;const t=e.ä¿®ç‚¼è¿›åº¦||0;let n=!1;e.å·²è§£é”æŠ€èƒ½||(e.å·²è§£é”æŠ€èƒ½=[]),e.åŠŸæ³•æŠ€èƒ½.forEach(a=>{const r=a.ç†Ÿç»ƒåº¦è¦æ±‚||0;t>=r&&!e.å·²è§£é”æŠ€èƒ½.includes(a.æŠ€èƒ½åç§°)&&(e.å·²è§£é”æŠ€èƒ½.push(a.æŠ€èƒ½åç§°),console.log(`[SkillsPanel] è‡ªåŠ¨è§£é”æŠ€èƒ½: ${a.æŠ€èƒ½åç§°} (é˜ˆå€¼: ${r}%)`),n=!0)}),n&&o.saveCurrentGame()})()},{immediate:!0}),(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",$O,[(0,r.createCommentVNode)(" é¡¶éƒ¨æ ‡ç­¾é¡µ "),(0,r.createElementVNode)("div",OO,[(0,r.createElementVNode)("div",LO,[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["filter-tab",{active:"cultivation"===l.value}]),onClick:n[0]||(n[0]=e=>l.value="cultivation")},[(0,r.createVNode)((0,r.unref)(Ru),{size:16,class:"tab-icon"}),(0,r.createElementVNode)("span",FO,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ç‚¼")),1)],2),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["filter-tab",{active:"library"===l.value}]),onClick:n[1]||(n[1]=e=>l.value="library")},[(0,r.createVNode)((0,r.unref)(Pu),{size:16,class:"tab-icon"}),(0,r.createElementVNode)("span",jO,(0,r.toDisplayString)((0,r.unref)(t)("åŠŸæ³•åº“")),1),(0,r.createElementVNode)("span",UO,(0,r.toDisplayString)(m.value.length),1)],2)])]),(0,r.createCommentVNode)(" å†…å®¹åŒºåŸŸ "),(0,r.createElementVNode)("div",qO,[(0,r.createCommentVNode)(" ä¿®ç‚¼æ ‡ç­¾é¡µ "),"cultivation"===l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",GO,[(0,r.createCommentVNode)(" å½“å‰ä¿®ç‚¼åŠŸæ³• "),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["current-cultivation-card",u.value?_(u.value):""])},[n[24]||(n[24]=(0,r.createElementVNode)("div",{class:"card-background-glow"},null,-1)),(0,r.createElementVNode)("div",HO,[u.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",YO,[(0,r.createElementVNode)("div",WO,[(0,r.createElementVNode)("div",XO,[(0,r.createElementVNode)("div",JO,[(0,r.createVNode)((0,r.unref)(Zx.A),{size:24,class:"title-icon"})]),(0,r.createElementVNode)("div",null,[n[6]||(n[6]=(0,r.createElementVNode)("p",{class:"cultivation-status"},"æ­£åœ¨ä¿®ç‚¼",-1)),(0,r.createElementVNode)("h3",KO,(0,r.toDisplayString)(u.value.åç§°),1)])]),(0,r.createElementVNode)("div",QO,[(0,r.createElementVNode)("button",{class:"action-btn primary",onClick:n[2]||(n[2]=e=>E("normal"))},[(0,r.createVNode)((0,r.unref)(Ru),{size:16,class:"btn-icon"}),n[7]||(n[7]=(0,r.createElementVNode)("span",{class:"btn-text"},"ä¿®ç‚¼",-1))]),(0,r.createElementVNode)("button",{class:"action-btn accent",onClick:n[3]||(n[3]=e=>E("secluded"))},[(0,r.createVNode)((0,r.unref)(aO.A),{size:16,class:"btn-icon"}),n[8]||(n[8]=(0,r.createElementVNode)("span",{class:"btn-text"},"é—­å…³",-1))]),b.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"action-btn warning",onClick:N},[(0,r.createVNode)((0,r.unref)(rO),{size:16,class:"btn-icon"}),n[9]||(n[9]=(0,r.createElementVNode)("span",{class:"btn-text"},"çªç ´",-1))])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{class:"action-btn",onClick:B},[(0,r.createVNode)((0,r.unref)(oO),{size:16,class:"btn-icon"}),n[10]||(n[10]=(0,r.createElementVNode)("span",{class:"btn-text"},"å¸ä¸‹",-1))])])]),(0,r.createCommentVNode)(" åŠŸæ³•åŸºæœ¬ä¿¡æ¯ "),(0,r.createElementVNode)("div",ZO,[(0,r.createElementVNode)("div",eL,[n[11]||(n[11]=(0,r.createElementVNode)("span",{class:"info-label"},"å“è´¨",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["info-value",C(u.value)])},(0,r.toDisplayString)(u.value.å“è´¨?.quality||"å‡¡")+"å“",3)]),(0,r.createElementVNode)("div",tL,[n[12]||(n[12]=(0,r.createElementVNode)("span",{class:"info-label"},"ç±»å‹",-1)),(0,r.createElementVNode)("span",nL,(0,r.toDisplayString)(u.value.ç±»å‹||"åŠŸæ³•"),1)]),(0,r.createElementVNode)("div",aL,[n[13]||(n[13]=(0,r.createElementVNode)("span",{class:"info-label"},"æŠ€èƒ½æ•°",-1)),(0,r.createElementVNode)("span",rL,(0,r.toDisplayString)(u.value.åŠŸæ³•æŠ€èƒ½?.length||0),1)]),(0,r.createElementVNode)("div",oL,[n[14]||(n[14]=(0,r.createElementVNode)("span",{class:"info-label"},"å·²è§£é”",-1)),(0,r.createElementVNode)("span",iL,(0,r.toDisplayString)(p.value.length),1)])]),(0,r.createCommentVNode)(" ä¿®ç‚¼è¿›åº¦ "),(0,r.createElementVNode)("div",sL,[(0,r.createElementVNode)("div",lL,[(0,r.createElementVNode)("div",cL,[(0,r.createElementVNode)("div",dL,[(0,r.createVNode)((0,r.unref)(Ru),{size:16})]),n[15]||(n[15]=(0,r.createElementVNode)("span",{class:"label-text"},"ä¿®ç‚¼ç†Ÿç»ƒåº¦",-1))]),(0,r.createElementVNode)("span",uL,(0,r.toDisplayString)(V(u.value.ä¿®ç‚¼è¿›åº¦))+"%",1)]),(0,r.createElementVNode)("div",mL,[(0,r.createElementVNode)("div",pL,[(0,r.createElementVNode)("div",{class:"progress-fill",style:(0,r.normalizeStyle)({width:V(u.value.ä¿®ç‚¼è¿›åº¦)+"%"})},n[16]||(n[16]=[(0,r.createElementVNode)("div",{class:"progress-shine"},null,-1)]),4),(0,r.createElementVNode)("div",fL,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(g.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.æŠ€èƒ½åç§°,class:(0,r.normalizeClass)(["milestone",{unlocked:h(e.æŠ€èƒ½åç§°)}]),style:(0,r.normalizeStyle)({left:(e.ç†Ÿç»ƒåº¦è¦æ±‚||e.è§£é”éœ€è¦ç†Ÿç»ƒåº¦||0)+"%"}),title:`${e.æŠ€èƒ½åç§°} - ${e.ç†Ÿç»ƒåº¦è¦æ±‚||e.è§£é”éœ€è¦ç†Ÿç»ƒåº¦||0}%`},[(0,r.createElementVNode)("span",hL,(0,r.toDisplayString)(e.æŠ€èƒ½åç§°),1)],14,gL))),128))])])]),s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",vL,[n[17]||(n[17]=(0,r.createTextVNode)(" ä¸‹ä¸€æŠ€èƒ½: ",-1)),(0,r.createElementVNode)("strong",null,(0,r.toDisplayString)(s.value.æŠ€èƒ½åç§°),1),(0,r.createTextVNode)(" ("+(0,r.toDisplayString)(s.value.ç†Ÿç»ƒåº¦è¦æ±‚||s.value.è§£é”éœ€è¦ç†Ÿç»ƒåº¦||0)+"%) ",1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ä¿®ç‚¼ç»Ÿè®¡ä¿¡æ¯ "),(0,r.createElementVNode)("div",bL,[(0,r.createElementVNode)("div",yL,[(0,r.createElementVNode)("div",xL,[(0,r.createVNode)((0,r.unref)(rO),{size:16})]),(0,r.createElementVNode)("div",kL,[n[18]||(n[18]=(0,r.createElementVNode)("span",{class:"stat-label"},"ä¿®ç‚¼é€Ÿåº¦",-1)),(0,r.createElementVNode)("span",wL,(0,r.toDisplayString)(y.value)+"%/æ—¥",1)])]),(0,r.createElementVNode)("div",EL,[(0,r.createElementVNode)("div",NL,[(0,r.createVNode)((0,r.unref)(Em),{size:16})]),(0,r.createElementVNode)("div",SL,[n[19]||(n[19]=(0,r.createElementVNode)("span",{class:"stat-label"},"é¢„è®¡å®Œæˆ",-1)),(0,r.createElementVNode)("span",VL,(0,r.toDisplayString)(x.value),1)])]),(0,r.createElementVNode)("div",_L,[(0,r.createElementVNode)("div",CL,[(0,r.createVNode)((0,r.unref)(iO),{size:16})]),(0,r.createElementVNode)("div",AL,[n[20]||(n[20]=(0,r.createElementVNode)("span",{class:"stat-label"},"ä¸‹ä¸€æŠ€èƒ½",-1)),(0,r.createElementVNode)("span",DL,(0,r.toDisplayString)(k.value),1)])]),b.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",TL,[(0,r.createElementVNode)("div",BL,[(0,r.createVNode)((0,r.unref)(A),{size:16})]),(0,r.createElementVNode)("div",IL,[n[21]||(n[21]=(0,r.createElementVNode)("span",{class:"stat-label"},"çªç ´é¢„ä¼°",-1)),(0,r.createElementVNode)("span",zL,(0,r.toDisplayString)(w.value)+"%æˆåŠŸç‡",1)])])):(0,r.createCommentVNode)("v-if",!0)])])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",ML,[(0,r.createVNode)((0,r.unref)(Zx.A),{size:48,class:"empty-icon"}),n[22]||(n[22]=(0,r.createElementVNode)("p",{class:"empty-text"},"ä»åŠŸæ³•åº“ä¸­é€‰æ‹©ä¸€éƒ¨åŠŸæ³•å¼€å§‹ä¿®ç‚¼",-1)),n[23]||(n[23]=(0,r.createElementVNode)("p",{class:"empty-hint"},"åŠŸæ³•ä¸­è•´å«å¤šç§æŠ€èƒ½ï¼Œéšç€ç†Ÿç»ƒåº¦æå‡é€æ­¥è§£é”",-1))]))])],2),(0,r.createCommentVNode)(" æŠ€èƒ½åˆ—è¡¨ "),u.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",PL,[(0,r.createCommentVNode)(" å·²æŒæ¡æŠ€èƒ½ "),p.value.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",RL,[(0,r.createElementVNode)("div",$L,[(0,r.createElementVNode)("h4",OL,[(0,r.createElementVNode)("div",LL,[(0,r.createVNode)((0,r.unref)(sO),{size:16})]),n[25]||(n[25]=(0,r.createTextVNode)(" å·²æŒæ¡æŠ€èƒ½ ",-1))]),(0,r.createElementVNode)("span",FL,(0,r.toDisplayString)(p.value.length)+"/"+(0,r.toDisplayString)(u.value.åŠŸæ³•æŠ€èƒ½?.length||0),1)]),(0,r.createElementVNode)("div",jL,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(p.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.æŠ€èƒ½åç§°,class:"skill-card mastered"},[(0,r.createElementVNode)("div",UL,[(0,r.createElementVNode)("span",qL,(0,r.toDisplayString)(e.æŠ€èƒ½åç§°),1),n[26]||(n[26]=(0,r.createElementVNode)("span",{class:"unlock-badge"},"å·²è§£é”",-1))]),(0,r.createElementVNode)("p",GL,(0,r.toDisplayString)(e.æŠ€èƒ½æè¿°),1),(0,r.createElementVNode)("div",HL,[(0,r.createElementVNode)("span",YL,"è§£é”äº "+(0,r.toDisplayString)(e.ç†Ÿç»ƒåº¦è¦æ±‚||e.è§£é”éœ€è¦ç†Ÿç»ƒåº¦||0)+"%",1)])]))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¾…è§£é”æŠ€èƒ½ "),f.value.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",WL,[(0,r.createElementVNode)("div",XL,[(0,r.createElementVNode)("h4",JL,[(0,r.createElementVNode)("div",KL,[(0,r.createVNode)((0,r.unref)(lO),{size:16})]),n[27]||(n[27]=(0,r.createTextVNode)(" å¾…è§£é”æŠ€èƒ½ ",-1))]),(0,r.createElementVNode)("span",QL,(0,r.toDisplayString)(f.value.length)+" ä¸ª",1)]),(0,r.createElementVNode)("div",ZL,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.æŠ€èƒ½åç§°,class:"skill-card locked"},[(0,r.createElementVNode)("div",eF,[(0,r.createElementVNode)("span",tF,(0,r.toDisplayString)(e.æŠ€èƒ½åç§°),1),n[28]||(n[28]=(0,r.createElementVNode)("span",{class:"lock-icon"},"ğŸ”’",-1))]),(0,r.createElementVNode)("p",nF,(0,r.toDisplayString)(e.æŠ€èƒ½æè¿°),1),(0,r.createElementVNode)("div",aF,[(0,r.createElementVNode)("span",rF,"éœ€è¦ç†Ÿç»ƒåº¦ "+(0,r.toDisplayString)(e.ç†Ÿç»ƒåº¦è¦æ±‚||e.è§£é”éœ€è¦ç†Ÿç»ƒåº¦||0)+"%",1),(0,r.createElementVNode)("div",oF,[(0,r.createElementVNode)("div",{class:"unlock-progress-fill",style:(0,r.normalizeStyle)({width:v(e)+"%"})},null,4)])])]))),128))])])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" åŠŸæ³•åº“æ ‡ç­¾é¡µ "),"library"===l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",iF,[0===m.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",sF,[(0,r.createVNode)((0,r.unref)(zu),{size:48,class:"empty-icon"}),n[29]||(n[29]=(0,r.createElementVNode)("p",{class:"empty-text"},"åŠŸæ³•åº“ä¸ºç©ºï¼Œæ¢ç´¢ä¸–ç•Œè·å–åŠŸæ³•ç§˜ç±",-1))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",lF,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(m.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.ç‰©å“ID,class:"item-card technique-card",onClick:t=>(e=>{c.value=e})(e)},[(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["item-quality-indicator",_(e)])},null,2),n[30]||(n[30]=(0,r.createElementVNode)("div",{class:"item-icon"},"åŠŸ",-1)),(0,r.createElementVNode)("div",{class:(0,r.normalizeClass)(["item-name",C(e)])},(0,r.toDisplayString)(e.åç§°),3),(0,r.createElementVNode)("div",dF,(0,r.toDisplayString)(e.å“è´¨?.quality||"å‡¡")+"å“",1)],8,cF))),128))]))])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" åŠŸæ³•è¯¦æƒ…å¼¹çª— (æ ·å¼å¾…æ ¹æ®å…¨å±€å¼¹çª—ç»„ä»¶è°ƒæ•´) "),c.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"technique-modal-overlay",onClick:D},[(0,r.createElementVNode)("div",{class:"technique-modal",onClick:n[5]||(n[5]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",uF,[(0,r.createElementVNode)("h3",mF,(0,r.toDisplayString)(c.value.åç§°),1),(0,r.createElementVNode)("button",{class:"close-btn",onClick:D},[n[31]||(n[31]=(0,r.createElementVNode)("span",null,"å…³é—­",-1)),(0,r.createVNode)((0,r.unref)(Ku.A),{size:16})])]),(0,r.createElementVNode)("div",pF,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(c.value.æè¿°),1),(0,r.createCommentVNode)(" æ›´å¤šè¯¦æƒ…... ")]),(0,r.createElementVNode)("div",fF,[(0,r.createElementVNode)("button",{class:"action-btn primary",onClick:n[4]||(n[4]=e=>(async e=>{if(!e?.ç‰©å“ID)return;const n=async()=>{try{await o.equipTechnique(e.ç‰©å“ID),D()}catch(e){console.error("[SkillsPanel] Equip technique failed:",e)}};u.value?i.showRetryDialog({title:t("åˆ‡æ¢åŠŸæ³•"),message:`${t("å½“å‰æ­£åœ¨ä¿®ç‚¼")}ã€Š${u.value.åç§°}ã€‹ï¼Œ${t("ç¡®å®šè¦åˆ‡æ¢åˆ°")}ã€Š${e.åç§°}ã€‹${t("å—")}ï¼Ÿ`,onConfirm:n,onCancel:()=>{}}):await n()})(c.value))},[(0,r.createVNode)((0,r.unref)(Ru),{size:16}),n[32]||(n[32]=(0,r.createTextVNode)(" è£…å¤‡ä¿®ç‚¼ ",-1))]),(0,r.createElementVNode)("button",{class:"action-btn",onClick:D},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:16}),n[33]||(n[33]=(0,r.createTextVNode)(" å–æ¶ˆ ",-1))])])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æ·±åº¦ä¿®ç‚¼å¯¹è¯æ¡† "),(0,r.createVNode)(RO,{visible:d.value,technique:S.value,"current-progress":u.value?.ä¿®ç‚¼è¿›åº¦||0,onClose:I,onConfirm:z},null,8,["visible","technique","current-progress"])]))}});var hF=n(5822),vF={};vF.styleTagTransform=k(),vF.setAttributes=v(),vF.insert=g().bind(null,"head"),vF.domAPI=p(),vF.insertStyleElement=y(),u()(hF.A,vF),hF.A&&hF.A.locals&&hF.A.locals;const bF=(0,N.A)(gF,[["__scopeId","data-v-3988334e"]]);var yF=n(6748);const xF=(0,V.A)("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),kF=(0,V.A)("flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]),wF=(0,V.A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),EF={class:"dao-panel"},NF={class:"dao-stats-header"},SF={class:"stats-card"},VF={class:"stats-icon enlightened"},_F={class:"stats-info"},CF={class:"stats-value"},AF={class:"stats-card"},DF={class:"stats-icon experience"},TF={class:"stats-info"},BF={class:"stats-value"},IF={class:"stats-actions"},zF={key:0,class:"dao-filter-bar"},MF={class:"filter-tags"},PF=["onClick"],RF={class:"tag-count"},$F={class:"sort-dropdown"},OF=["value"],LF={class:"dao-content"},FF={key:0,class:"dao-empty"},jF={class:"empty-illustration"},UF={class:"empty-icon-wrapper"},qF={class:"quick-actions"},GF={class:"dao-list"},HF=["onClick"],YF={class:"dao-card-header"},WF={class:"dao-icon"},XF={class:"dao-title-group"},JF={class:"dao-name"},KF={class:"dao-card-body"},QF={class:"dao-progress-wrapper"},ZF={class:"dao-progress-bar"},ej={class:"dao-progress-text"},tj={class:"dao-exp-info"},nj={class:"exp-current"},aj={class:"exp-required"},rj=["onClick"],oj=["onClick"],ij=["onClick"],sj={key:2,class:"dao-detail-panel"},lj={class:"detail-header"},cj={class:"detail-title-group"},dj={class:"detail-icon"},uj={class:"detail-title"},mj={class:"detail-stage"},pj={class:"detail-body"},fj={class:"detail-stats-grid"},gj={class:"detail-stat-card"},hj={class:"stat-card-icon"},vj={class:"stat-card-content"},bj={class:"stat-card-value"},yj={class:"detail-stat-card"},xj={class:"stat-card-icon"},kj={class:"stat-card-content"},wj={class:"stat-card-value"},Ej={class:"detail-stat-card"},Nj={class:"stat-card-icon"},Sj={class:"stat-card-content"},Vj={class:"stat-card-value"},_j={class:"detail-stat-card"},Cj={class:"stat-card-icon progress-icon"},Aj={class:"stat-card-content"},Dj={class:"stat-card-value"},Tj={key:0,class:"stage-progress-section"},Bj={class:"stage-timeline"},Ij={class:"node-marker"},zj={key:1,class:"node-number"},Mj={class:"node-content"},Pj={class:"node-name"},Rj={class:"node-desc"},$j={key:1,class:"breakthrough-guide"},Oj={class:"guide-header"},Lj={class:"guide-content"},Fj={class:"breakthrough-chance"},jj={class:"chance-value"},Uj={class:"detail-actions"},qj=(0,r.defineComponent)({__name:"ThousandDaoPanel",setup(e){const t=(0,Iu.useGameStateStore)(),n=(0,nk.useActionQueueStore)(),a=(0,r.ref)(null),o=(0,r.ref)("all"),i=(0,r.ref)("progress"),s=[{key:"all",label:"å…¨éƒ¨",icon:A},{key:"nature",label:"è‡ªç„¶",icon:yF.A},{key:"concept",label:"æ³•åˆ™",icon:xF},{key:"combat",label:"æˆ˜æ–—",icon:qB},{key:"cultivation",label:"ä¿®è¡Œ",icon:kF}],l=[{key:"progress",label:"æŒ‰è¿›åº¦"},{key:"stage",label:"æŒ‰é˜¶æ®µ"},{key:"experience",label:"æŒ‰ç»éªŒ"},{key:"name",label:"æŒ‰åç§°"}],c=e=>{const t={å‰‘:"combat",åˆ€:"combat",æ‹³:"combat",æª:"combat",æˆŸ:"combat",é‡‘:"nature",æœ¨:"nature",æ°´:"nature",ç«:"nature",åœŸ:"nature",é£:"nature",é›·:"nature",å†°:"nature",é›ª:"nature",å› æœ:"concept",è½®å›:"concept",æ—¶é—´:"concept",ç©ºé—´:"concept",å‘½è¿:"concept",ä¸¹:"cultivation",ç‚¼å™¨:"cultivation",é˜µ:"cultivation",ç¬¦:"cultivation"};for(const[n,a]of Object.entries(t))if(e.includes(n))return a;return"other"},d=e=>e>=1e4?(e/1e4).toFixed(1)+"ä¸‡":e>=1e3?(e/1e3).toFixed(1)+"k":e.toString(),u=(0,r.computed)(()=>t.thousandDao||{å¤§é“åˆ—è¡¨:{}}),m=(0,r.computed)(()=>Object.entries(u.value.å¤§é“åˆ—è¡¨).filter(([e,t])=>t.æ˜¯å¦è§£é”).map(([e])=>e)),p=(0,r.computed)(()=>m.value.length),f=(0,r.computed)(()=>"all"===o.value?m.value:m.value.filter(e=>c(e)===o.value)),g=(0,r.computed)(()=>{const e=[...f.value];switch(i.value){case"progress":return e.sort((e,t)=>k(t)-k(e));case"stage":return e.sort((e,t)=>{const n=b(e)?.å½“å‰é˜¶æ®µ??0;return(b(t)?.å½“å‰é˜¶æ®µ??0)-n});case"experience":return e.sort((e,t)=>{const n=b(e)?.æ€»ç»éªŒ??0;return(b(t)?.æ€»ç»éªŒ??0)-n});case"name":return e.sort((e,t)=>e.localeCompare(t,"zh-CN"));default:return e}}),h=(0,r.computed)(()=>a.value&&u.value.å¤§é“åˆ—è¡¨[a.value]||null),v=(0,r.computed)(()=>Object.values(u.value.å¤§é“åˆ—è¡¨).reduce((e,t)=>e+(t.æ€»ç»éªŒ??0),0)),b=e=>u.value.å¤§é“åˆ—è¡¨[e]||null,y=e=>{const t=b(e);if(!t)return"stage-0";const n=t.å½“å‰é˜¶æ®µ??0;return n>=5?"stage-max":n>=3?"stage-high":n>=1?"stage-mid":"stage-low"},x=e=>{const t=b(e);if(!t)return"æœªæ‚Ÿ";const n=t.å½“å‰é˜¶æ®µ??0;return t.é˜¶æ®µåˆ—è¡¨?.[n]?.åç§°||`ç¬¬${n}é˜¶`},k=e=>{const t=b(e);if(!t)return 0;const n=t.å½“å‰ç»éªŒ??0,a=w(e);return Math.min(100,Math.round(n/a*100))},w=e=>{const t=b(e);if(!t)return 100;const n=t.å½“å‰é˜¶æ®µ??0;return t.é˜¶æ®µåˆ—è¡¨?.[n]?.çªç ´ç»éªŒ??100*(n+1)},E=e=>{const t=b(e);if(!t)return 0;const n=t.å½“å‰é˜¶æ®µ??0;return Math.max(30,90-10*n)},N=e=>{const t=b(e);return!!t&&(t.å½“å‰ç»éªŒ??0)>=w(e)},S=e=>{n.addAction({type:"comprehend",itemName:e,itemType:"å¤§é“",description:`æ„Ÿæ‚Ÿã€Š${e}ã€‹`}),ne.o.success(`å¼€å§‹æ„Ÿæ‚Ÿã€Š${e}ã€‹`)},V=e=>{n.addAction({type:"meditate",itemName:e,itemType:"å‚æ‚Ÿ",description:`æ·±åº¦å‚æ‚Ÿã€Š${e}ã€‹`}),ne.o.info(`è¿›å…¥ã€Š${e}ã€‹å‚æ‚ŸçŠ¶æ€`)},_=e=>{n.addAction({type:"dao_breakthrough",itemName:e,itemType:"çªç ´",description:`å°è¯•çªç ´ã€Š${e}ã€‹å¢ƒç•Œ`}),ne.o.warning(`å°è¯•çªç ´ã€Š${e}ã€‹`)},C=()=>{n.addAction({type:"explore",itemName:"å¤§é“",itemType:"æ¢ç´¢",description:"æ¢ç´¢æœªçŸ¥å¤§é“ï¼Œå¯»æ±‚æ–°çš„æ„Ÿæ‚Ÿ"}),ne.o.info("å¼€å§‹æ¢ç´¢æ–°çš„å¤§é“...")},D=()=>{n.addAction({type:"meditate",itemName:"å¤©åœ°",itemType:"å†¥æƒ³",description:"é™å¿ƒå†¥æƒ³ï¼Œæ„Ÿæ‚Ÿå¤©åœ°æ³•åˆ™"}),ne.o.info("è¿›å…¥å†¥æƒ³çŠ¶æ€...")},T=()=>{n.addAction({type:"comprehend",itemName:"åŠŸæ³•",itemType:"é¢†æ‚Ÿ",description:"ä»å·²ä¿®ç‚¼çš„åŠŸæ³•ä¸­é¢†æ‚Ÿå¤§é“"}),ne.o.info("å°è¯•ä»åŠŸæ³•ä¸­é¢†æ‚Ÿå¤§é“...")},B=()=>{n.addAction({type:"comprehend",itemName:"å¤©åœ°",itemType:"æ‚Ÿé“",description:"è§‚å¯Ÿå¤©åœ°è‡ªç„¶ï¼Œæ„Ÿæ‚Ÿå¤§é“æ³•åˆ™"}),ne.o.info("å¼€å§‹è§‚å¤©åœ°æ‚Ÿé“...")};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",EF,[(0,r.createCommentVNode)(" é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡ "),(0,r.createElementVNode)("div",NF,[(0,r.createElementVNode)("div",SF,[(0,r.createElementVNode)("div",VF,[(0,r.createVNode)((0,r.unref)(A),{size:20})]),(0,r.createElementVNode)("div",_F,[(0,r.createElementVNode)("span",CF,(0,r.toDisplayString)(p.value),1),t[6]||(t[6]=(0,r.createElementVNode)("span",{class:"stats-label"},"å·²æ‚Ÿå¤§é“",-1))])]),(0,r.createElementVNode)("div",AF,[(0,r.createElementVNode)("div",DF,[(0,r.createVNode)((0,r.unref)(Ru),{size:20})]),(0,r.createElementVNode)("div",TF,[(0,r.createElementVNode)("span",BF,(0,r.toDisplayString)(d(v.value)),1),t[7]||(t[7]=(0,r.createElementVNode)("span",{class:"stats-label"},"æ€»æ‚Ÿé“å€¼",-1))])]),(0,r.createElementVNode)("div",IF,[(0,r.createElementVNode)("button",{class:"action-btn-icon",onClick:C,title:"æ¢ç´¢æ–°é“"},[(0,r.createVNode)((0,r.unref)(wm),{size:18})]),(0,r.createElementVNode)("button",{class:"action-btn-icon",onClick:D,title:"å†¥æƒ³æ„Ÿæ‚Ÿ"},[(0,r.createVNode)((0,r.unref)(aO.A),{size:18})])])]),(0,r.createCommentVNode)(" ç­›é€‰å’Œæ’åºæ  "),p.value>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",zF,[(0,r.createElementVNode)("div",MF,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(s,e=>{return(0,r.createElementVNode)("button",{key:e.key,class:(0,r.normalizeClass)(["filter-tag",{active:o.value===e.key}]),onClick:t=>o.value=e.key},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:14})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.label),1),(0,r.createElementVNode)("span",RF,(0,r.toDisplayString)((t=e.key,"all"===t?m.value.length:m.value.filter(e=>c(e)===t).length)),1)],10,PF);var t}),64))]),(0,r.createElementVNode)("div",$F,[(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),class:"sort-select"},[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l,e=>(0,r.createElementVNode)("option",{key:e.key,value:e.key},(0,r.toDisplayString)(e.label),9,OF)),64))],512),[[r.vModelSelect,i.value]])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ä¸»å†…å®¹åŒº "),(0,r.createElementVNode)("div",LF,[(0,r.createCommentVNode)(" æ— å¤§é“æ—¶çš„å¿«é€Ÿå…¥é—¨ "),0===p.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",FF,[(0,r.createElementVNode)("div",jF,[(0,r.createElementVNode)("div",UF,[(0,r.createVNode)((0,r.unref)(A),{size:48})]),t[8]||(t[8]=(0,r.createElementVNode)("div",{class:"empty-rings"},[(0,r.createElementVNode)("div",{class:"ring ring-1"}),(0,r.createElementVNode)("div",{class:"ring ring-2"}),(0,r.createElementVNode)("div",{class:"ring ring-3"})],-1))]),t[11]||(t[11]=(0,r.createElementVNode)("h3",{class:"empty-title"},"å°šæœªé¢†æ‚Ÿä»»ä½•å¤§é“",-1)),t[12]||(t[12]=(0,r.createElementVNode)("p",{class:"empty-desc"},"å¤©åœ°æ³•åˆ™è•´å«æ— ç©·å¥¥ç§˜ï¼Œé™å¿ƒæ„Ÿæ‚Ÿæ–¹èƒ½çª¥è§ä¸€äºŒ",-1)),(0,r.createElementVNode)("div",qF,[(0,r.createElementVNode)("button",{class:"action-btn primary",onClick:T},[(0,r.createVNode)((0,r.unref)(Pu),{size:16}),t[9]||(t[9]=(0,r.createTextVNode)(" ä»åŠŸæ³•é¢†æ‚Ÿ ",-1))]),(0,r.createElementVNode)("button",{class:"action-btn secondary",onClick:B},[(0,r.createVNode)((0,r.unref)(A),{size:16}),t[10]||(t[10]=(0,r.createTextVNode)(" è§‚å¤©åœ°æ‚Ÿé“ ",-1))])])])):((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" å¤§é“åˆ—è¡¨ "),(0,r.createElementVNode)("div",GF,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(g.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:(0,r.normalizeClass)(["dao-card",{active:a.value===e}]),onClick:t=>(e=>{a.value=a.value===e?null:e})(e)},[(0,r.createElementVNode)("div",YF,[(0,r.createElementVNode)("div",WF,[(0,r.createVNode)((0,r.unref)(A),{size:18})]),(0,r.createElementVNode)("div",XF,[(0,r.createElementVNode)("span",JF,(0,r.toDisplayString)(e),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["dao-stage-badge",y(e)])},(0,r.toDisplayString)(x(e)),3)])]),(0,r.createElementVNode)("div",KF,[(0,r.createElementVNode)("div",QF,[(0,r.createElementVNode)("div",ZF,[(0,r.createElementVNode)("div",{class:"dao-progress-fill",style:(0,r.normalizeStyle)({width:k(e)+"%"})},null,4),t[13]||(t[13]=(0,r.createElementVNode)("div",{class:"dao-progress-glow"},null,-1))]),(0,r.createElementVNode)("span",ej,(0,r.toDisplayString)(k(e))+"%",1)]),(0,r.createElementVNode)("div",tj,[(0,r.createElementVNode)("span",nj,(0,r.toDisplayString)(d(b(e)?.å½“å‰ç»éªŒ??0)),1),t[14]||(t[14]=(0,r.createElementVNode)("span",{class:"exp-divider"},"/",-1)),(0,r.createElementVNode)("span",aj,(0,r.toDisplayString)(d(w(e))),1)])]),(0,r.createCommentVNode)(" å¿«æ·æ“ä½œ "),(0,r.createElementVNode)("div",{class:"dao-card-actions",onClick:t[1]||(t[1]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("button",{class:"dao-action-btn cultivate",onClick:t=>S(e),title:"æ„Ÿæ‚Ÿ"},[(0,r.createVNode)((0,r.unref)(Ru),{size:14})],8,rj),(0,r.createElementVNode)("button",{class:"dao-action-btn meditate",onClick:t=>V(e),title:"å‚æ‚Ÿ"},[(0,r.createVNode)((0,r.unref)(aO.A),{size:14})],8,oj),N(e)?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"dao-action-btn breakthrough",onClick:t=>_(e),title:"çªç ´"},[(0,r.createVNode)((0,r.unref)(rO),{size:14})],8,ij)):(0,r.createCommentVNode)("v-if",!0)])],10,HF))),128))])],2112)),(0,r.createCommentVNode)(" é€‰ä¸­å¤§é“çš„è¯¦æƒ…é¢æ¿ "),a.value&&h.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",sj,[(0,r.createElementVNode)("div",lj,[(0,r.createElementVNode)("div",cj,[(0,r.createElementVNode)("div",dj,[(0,r.createVNode)((0,r.unref)(A),{size:24})]),(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("h3",uj,(0,r.toDisplayString)(a.value),1),(0,r.createElementVNode)("span",mj,(0,r.toDisplayString)(x(a.value)),1)])]),(0,r.createElementVNode)("button",{class:"close-btn",onClick:t[2]||(t[2]=e=>a.value=null)},[t[15]||(t[15]=(0,r.createElementVNode)("span",null,"å…³é—­",-1)),(0,r.createVNode)((0,r.unref)(Ku.A),{size:16})])]),(0,r.createElementVNode)("div",pj,[(0,r.createCommentVNode)(" æ ¸å¿ƒæ•°æ®å¡ç‰‡ "),(0,r.createElementVNode)("div",fj,[(0,r.createElementVNode)("div",gj,[(0,r.createElementVNode)("div",hj,[(0,r.createVNode)((0,r.unref)(wF),{size:16})]),(0,r.createElementVNode)("div",vj,[(0,r.createElementVNode)("span",bj,(0,r.toDisplayString)(x(a.value)),1),t[16]||(t[16]=(0,r.createElementVNode)("span",{class:"stat-card-label"},"å½“å‰é˜¶æ®µ",-1))])]),(0,r.createElementVNode)("div",yj,[(0,r.createElementVNode)("div",xj,[(0,r.createVNode)((0,r.unref)(Ru),{size:16})]),(0,r.createElementVNode)("div",kj,[(0,r.createElementVNode)("span",wj,(0,r.toDisplayString)(d(h.value.å½“å‰ç»éªŒ??0)),1),t[17]||(t[17]=(0,r.createElementVNode)("span",{class:"stat-card-label"},"å½“å‰ç»éªŒ",-1))])]),(0,r.createElementVNode)("div",Ej,[(0,r.createElementVNode)("div",Nj,[(0,r.createVNode)((0,r.unref)(iO),{size:16})]),(0,r.createElementVNode)("div",Sj,[(0,r.createElementVNode)("span",Vj,(0,r.toDisplayString)(d(w(a.value))),1),t[18]||(t[18]=(0,r.createElementVNode)("span",{class:"stat-card-label"},"çªç ´æ‰€éœ€",-1))])]),(0,r.createElementVNode)("div",_j,[(0,r.createElementVNode)("div",Cj,[(0,r.createVNode)((0,r.unref)(rO),{size:16})]),(0,r.createElementVNode)("div",Aj,[(0,r.createElementVNode)("span",Dj,(0,r.toDisplayString)(k(a.value))+"%",1),t[19]||(t[19]=(0,r.createElementVNode)("span",{class:"stat-card-label"},"è¿›åº¦",-1))])])]),(0,r.createCommentVNode)(" é˜¶æ®µè¿›åº¦è½¨é“ "),b(a.value)?.é˜¶æ®µåˆ—è¡¨?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Tj,[t[20]||(t[20]=(0,r.createElementVNode)("h4",{class:"section-title"},"ä¿®ç‚¼é˜¶æ®µ",-1)),(0,r.createElementVNode)("div",Bj,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(b(a.value)?.é˜¶æ®µåˆ—è¡¨,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:(0,r.normalizeClass)(["stage-node",{done:t<(h.value?.å½“å‰é˜¶æ®µ??0),current:t===(h.value?.å½“å‰é˜¶æ®µ??0),locked:t>(h.value?.å½“å‰é˜¶æ®µ??0)}])},[(0,r.createElementVNode)("div",Ij,[t<(h.value?.å½“å‰é˜¶æ®µ??0)?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(sO),{key:0,size:12})):((0,r.openBlock)(),(0,r.createElementBlock)("span",zj,(0,r.toDisplayString)(t+1),1))]),(0,r.createElementVNode)("div",Mj,[(0,r.createElementVNode)("span",Pj,(0,r.toDisplayString)(e.åç§°),1),(0,r.createElementVNode)("span",Rj,(0,r.toDisplayString)(e.æè¿°),1)])],2))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" çªç ´æŒ‡å¼• "),N(a.value)?((0,r.openBlock)(),(0,r.createElementBlock)("div",$j,[(0,r.createElementVNode)("div",Oj,[(0,r.createVNode)((0,r.unref)(rO),{size:16}),t[21]||(t[21]=(0,r.createElementVNode)("span",null,"çªç ´æŒ‡å¼•",-1))]),(0,r.createElementVNode)("div",Lj,[t[23]||(t[23]=(0,r.createElementVNode)("p",{class:"guide-desc"},"å½“å‰æ‚Ÿé“å€¼å·²è¾¾åˆ°çªç ´è¦æ±‚ï¼Œå¯å°è¯•çªç ´è‡³ä¸‹ä¸€é˜¶æ®µ",-1)),t[24]||(t[24]=(0,r.createElementVNode)("ul",{class:"guide-tips"},[(0,r.createElementVNode)("li",null,"ç¡®ä¿çŠ¶æ€è‰¯å¥½ï¼Œæ— è´Ÿé¢æ•ˆæœå¹²æ‰°"),(0,r.createElementVNode)("li",null,"é€‰æ‹©çµæ°”å……æ²›ä¹‹åœ°è¿›è¡Œçªç ´"),(0,r.createElementVNode)("li",null,"å‡†å¤‡æŠ¤é“ä¸¹è¯ä»¥é˜²ä¸‡ä¸€")],-1)),(0,r.createElementVNode)("div",Fj,[t[22]||(t[22]=(0,r.createElementVNode)("span",{class:"chance-label"},"é¢„ä¼°æˆåŠŸç‡:",-1)),(0,r.createElementVNode)("span",jj,(0,r.toDisplayString)(E(a.value))+"%",1)])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" æ“ä½œæŒ‰é’® "),(0,r.createElementVNode)("div",Uj,[(0,r.createElementVNode)("button",{class:"action-btn primary large",onClick:t[3]||(t[3]=e=>S(a.value))},[(0,r.createVNode)((0,r.unref)(Ru),{size:18}),t[25]||(t[25]=(0,r.createTextVNode)(" æ„Ÿæ‚Ÿæ­¤é“ ",-1))]),(0,r.createElementVNode)("button",{class:"action-btn secondary large",onClick:t[4]||(t[4]=e=>V(a.value))},[(0,r.createVNode)((0,r.unref)(aO.A),{size:18}),t[26]||(t[26]=(0,r.createTextVNode)(" æ·±åº¦å‚æ‚Ÿ ",-1))]),N(a.value)?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"action-btn warning large",onClick:t[5]||(t[5]=e=>_(a.value))},[(0,r.createVNode)((0,r.unref)(rO),{size:18}),t[27]||(t[27]=(0,r.createTextVNode)(" å°è¯•çªç ´ ",-1))])):(0,r.createCommentVNode)("v-if",!0)])])])):(0,r.createCommentVNode)("v-if",!0)])]))}});var Gj=n(4135),Hj={};Hj.styleTagTransform=k(),Hj.setAttributes=v(),Hj.insert=g().bind(null,"head"),Hj.domAPI=p(),Hj.insertStyleElement=y(),u()(Gj.A,Hj),Gj.A&&Gj.A.locals&&Gj.A.locals;const Yj=(0,N.A)(qj,[["__scopeId","data-v-5ac27f42"]]);var Wj=n(3395),Xj=n(6680);const Jj=(0,V.A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),Kj={class:"save-panel"},Qj={class:"saves-container"},Zj={key:0,class:"current-save-section"},eU={class:"section-header"},tU={class:"section-title"},nU={class:"current-save-card"},aU={class:"save-preview"},rU={class:"preview-avatar"},oU={class:"preview-info"},iU={class:"character-name"},sU={class:"character-details"},lU={class:"detail-item"},cU={class:"detail-item"},dU={key:0,class:"current-save-hint last"},uU={key:1,class:"current-save-hint time"},mU={class:"save-stats"},pU={class:"stat-item"},fU={class:"stat-label"},gU={class:"stat-value"},hU={class:"stat-item"},vU={class:"stat-label"},bU={class:"stat-value"},yU={class:"saves-section"},xU={class:"section-header"},kU={class:"header-actions"},wU=["disabled"],EU={key:1,class:"saves-count"},NU={key:2,class:"saves-count online-badge"},SU={key:0,class:"loading-state"},VU={class:"loading-spinner"},_U={class:"loading-text"},CU={key:1,class:"empty-state"},AU={class:"empty-icon"},DU={class:"empty-text"},TU={class:"empty-hint"},BU={key:2,class:"saves-list"},IU=["onClick"],zU={class:"card-header"},MU={class:"save-preview small"},PU={class:"preview-avatar small"},RU={class:"preview-info"},$U={class:"save-name"},OU={class:"character-name-small"},LU={class:"save-time"},FU={class:"card-actions"},jU=["onClick","disabled"],UU=["onClick","disabled"],qU=["onClick","disabled"],GU=["onClick","disabled"],HU=["onClick","disabled","title"],YU={class:"card-content"},WU={class:"save-details"},XU={class:"detail-row"},JU={class:"detail-value"},KU={class:"detail-row"},QU={class:"detail-value"},ZU={class:"detail-row"},eq={class:"detail-value"},tq={key:1,class:"auto-save-settings-section"},nq={class:"section-header"},aq={class:"section-title"},rq={class:"settings-list"},oq={class:"setting-item"},iq={class:"setting-info"},sq={class:"setting-name"},lq={class:"setting-control"},cq={class:"setting-switch"},dq={class:"setting-item"},uq={class:"setting-info"},mq={class:"setting-name"},pq={class:"setting-control"},fq={class:"setting-switch"},gq={key:0,class:"setting-item"},hq={class:"setting-info"},vq={class:"setting-name"},bq={class:"setting-control"},yq={class:"operations-section"},xq={class:"section-header"},kq={class:"section-title"},wq={class:"operations-list"},Eq=["disabled"],Nq=["disabled"],Sq={class:"btn-content"},Vq={class:"btn-desc"},_q=["disabled"],Cq={class:"btn-content"},Aq={class:"btn-desc"},Dq=["disabled"],Tq={class:"btn-content"},Bq={class:"btn-title"},Iq={class:"btn-desc"},zq=(0,r.defineComponent)({__name:"SavePanel",setup(e){const{t}=(0,re.s)(),a=(0,hd.useCharacterStore)(),o=(0,Iu.useGameStateStore)(),i=(0,r.ref)(!1),s=(0,r.ref)(),l=(0,r.computed)(()=>"è”æœº"===a.activeCharacterProfile?.æ¨¡å¼),c=(0,r.computed)({get:()=>o.conversationAutoSaveEnabled,set:e=>{o.setConversationAutoSaveEnabled(e),ne.o.info("å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½å·²"+(e?"å¼€å¯":"å…³é—­"))}}),d=(0,r.computed)({get:()=>o.timeBasedSaveEnabled,set:e=>{o.setTimeBasedSaveEnabled(e),e?ne.o.success(`æ—¶é—´ç‚¹å­˜æ¡£å·²å¯ç”¨ï¼Œé—´éš”${u.value}åˆ†é’Ÿ`):ne.o.info("æ—¶é—´ç‚¹å­˜æ¡£å·²ç¦ç”¨")}}),u=(0,r.computed)({get:()=>o.timeBasedSaveInterval,set:e=>{o.setTimeBasedSaveInterval(e),ne.o.success(`å­˜æ¡£é—´éš”å·²è®¾ç½®ä¸º${e}åˆ†é’Ÿ`)}}),m=(0,r.computed)(()=>a.saveSlots.filter(e=>!!e&&(e.å­˜æ¡£å||e.id))),p=(0,r.computed)(()=>a.activeSaveSlot),f=(0,r.computed)(()=>null!==a.activeCharacterProfile||null!==o.character&&void 0!==o.character),g=(0,r.computed)(()=>{const e=new Set([p.value?.å­˜æ¡£å,"ä¸Šæ¬¡å¯¹è¯","æ—¶é—´ç‚¹å­˜æ¡£"]);return m.value.filter(t=>!e.has(t.å­˜æ¡£å)).length}),h=e=>"ä¸Šæ¬¡å¯¹è¯"===e.å­˜æ¡£å||"æ—¶é—´ç‚¹å­˜æ¡£"===e.å­˜æ¡£å||e.id===p.value?.id||g.value<=1,v=e=>"ä¸Šæ¬¡å¯¹è¯"===e.å­˜æ¡£å?"ä¸Šæ¬¡å¯¹è¯å­˜æ¡£ä¸å¯åˆ é™¤ï¼ˆç”¨äºé‡rollï¼‰":"æ—¶é—´ç‚¹å­˜æ¡£"===e.å­˜æ¡£å?"æ—¶é—´ç‚¹å­˜æ¡£ä¸å¯åˆ é™¤ï¼ˆå®šæ—¶è‡ªåŠ¨è¦†ç›–ï¼‰":e.id===p.value?.id?"å½“å‰æ¿€æ´»å­˜æ¡£ä¸å¯åˆ é™¤":g.value<=1?"æœ€åä¸€ä¸ªæ™®é€šå­˜æ¡£ä¸å¯åˆ é™¤":"åˆ é™¤å­˜æ¡£",b=async()=>{i.value=!0;try{await a.loadSaves()}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","åˆ·æ–°å¤±è´¥",e),ne.o.error("åˆ·æ–°å­˜æ¡£åˆ—è¡¨å¤±è´¥")}finally{i.value=!1}},y=async()=>{if(!f.value)return void ne.o.warning("å½“å‰æ²¡æœ‰å¯å­˜æ¡£çš„æ¸¸æˆçŠ¶æ€");const e=window.prompt("è¯·è¾“å…¥æ–°å­˜æ¡£çš„åç§°ï¼š",`å­˜æ¡£_${(new Date).toLocaleString("zh-CN",{month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"})}`);if(e&&""!==e.trim()){i.value=!0;try{await a.saveCurrentGame({notifyIfNoActive:!0}),await a.saveAsNewSlot(e.trim())&&await b()}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","æ–°å»ºå­˜æ¡£å¤±è´¥",e),ne.o.error("æ–°å»ºå­˜æ¡£å¤±è´¥")}finally{i.value=!1}}else ne.o.info("å·²å–æ¶ˆæ–°å»ºå­˜æ¡£")},x=(0,T.useUIStore)(),k=async()=>{try{console.log("[è§’è‰²å¯¼å‡º] å¼€å§‹å¯¼å‡ºè§’è‰²...");const e=a.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID;if(!e)return void ne.o.error("æ— æ³•è·å–è§’è‰²ID");const t=a.activeCharacterProfile;if(!t)return void ne.o.error("æ— æ³•è·å–è§’è‰²ä¿¡æ¯");const{loadSaveData:r}=await Promise.resolve().then(n.bind(n,5099)),o=await Promise.all(m.value.map(async t=>{const n=await r(e,t.å­˜æ¡£å);return{...t,å­˜æ¡£æ•°æ®:n}})),i=o.map(e=>{const t=e.å­˜æ¡£æ•°æ®;if(!t)throw new Error(`å­˜æ¡£ã€Œ${e.å­˜æ¡£å}ã€ç¼ºå°‘å­˜æ¡£æ•°æ®ï¼Œæ— æ³•å¯¼å‡º`);const n=(0,bd.ru)(t)?t:(0,bd.jj)(t).migrated,a=(0,yd.$)(n);if(!a.isValid)throw new Error(`å­˜æ¡£ã€Œ${e.å­˜æ¡£å}ã€æ ¡éªŒå¤±è´¥ï¼š${a.errors[0]||"æœªçŸ¥åŸå› "}`);return{...e,å­˜æ¡£æ•°æ®:n}}),s=(0,vd.q3)("character",{è§’è‰²ID:e,è§’è‰²ä¿¡æ¯:JSON.parse(JSON.stringify(t)),å­˜æ¡£åˆ—è¡¨:i}),l=JSON.stringify(s,null,2),c=new Blob([l],{type:"application/json"});console.log("[è§’è‰²å¯¼å‡º] æ•°æ®å¤§å°:",(l.length/1024).toFixed(2),"KB");const d=document.createElement("a");d.href=URL.createObjectURL(c);const u=t.è§’è‰²?.åå­—||"æœªå‘½åè§’è‰²",p=`ä»™é€”-è§’è‰²-${u}-${(new Date).toISOString().split("T")[0]}.json`;d.download=p,document.body.appendChild(d),d.click(),setTimeout(()=>{document.body.removeChild(d),URL.revokeObjectURL(d.href)},100),console.log("[è§’è‰²å¯¼å‡º] å¯¼å‡ºæˆåŠŸï¼Œæ–‡ä»¶å:",p),ne.o.success(`å·²å¯¼å‡ºè§’è‰²: ${u} (å« ${o.length} ä¸ªå­˜æ¡£)`)}catch(e){console.error("[è§’è‰²å¯¼å‡º] å¯¼å‡ºå¤±è´¥:",e),ne.o.error(`å¯¼å‡ºè§’è‰²å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}},w=async()=>{try{if(console.log("[å­˜æ¡£å¯¼å‡º] å¼€å§‹å¯¼å‡ºå­˜æ¡£..."),console.log("[å­˜æ¡£å¯¼å‡º] savesList.value:",m.value),console.log("[å­˜æ¡£å¯¼å‡º] savesList æ•°é‡:",m.value.length),!m.value||0===m.value.length)return ne.o.warning("æ²¡æœ‰å¯å¯¼å‡ºçš„å­˜æ¡£"),void console.warn("[å­˜æ¡£å¯¼å‡º] æ²¡æœ‰å¯å¯¼å‡ºçš„å­˜æ¡£");const e=a.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID;if(!e)return void ne.o.error("æ— æ³•è·å–è§’è‰²ID");const{loadSaveData:t}=await Promise.resolve().then(n.bind(n,5099)),r=(await Promise.all(m.value.map(async n=>{const a=await t(e,n.å­˜æ¡£å);return{...n,å­˜æ¡£æ•°æ®:a}}))).map(e=>{const t=e.å­˜æ¡£æ•°æ®,n=(0,bd.ru)(t)?t:(0,bd.jj)(t).migrated,a=(0,yd.$)(n);if(!a.isValid)throw new Error(`å­˜æ¡£ã€Œ${e.å­˜æ¡£å}ã€æ ¡éªŒå¤±è´¥ï¼š${a.errors[0]||"æœªçŸ¥åŸå› "}`);return{...e,å­˜æ¡£æ•°æ®:n}}),o=(0,vd.q3)("saves",{characterId:e,characterName:a.activeCharacterProfile?.è§’è‰²?.åå­—,saves:r});console.log("[å­˜æ¡£å¯¼å‡º] å¯¼å‡ºæ•°æ®:",o);const i=JSON.stringify(o,null,2),s=new Blob([i],{type:"application/json"});console.log("[å­˜æ¡£å¯¼å‡º] æ•°æ®å¤§å°:",(i.length/1024).toFixed(2),"KB");const l=document.createElement("a");l.href=URL.createObjectURL(s);const c=`ä»™é€”-å­˜æ¡£å¤‡ä»½-${(new Date).toISOString().split("T")[0]}.json`;l.download=c,document.body.appendChild(l),l.click(),setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(l.href)},100),console.log("[å­˜æ¡£å¯¼å‡º] å¯¼å‡ºæˆåŠŸï¼Œæ–‡ä»¶å:",c),ne.o.success(`å·²å¯¼å‡º ${m.value.length} ä¸ªå­˜æ¡£`)}catch(e){console.error("[å­˜æ¡£å¯¼å‡º] å¯¼å‡ºå¤±è´¥:",e),oN.Yz.error("å­˜æ¡£é¢æ¿","å¯¼å‡ºå¤±è´¥",e),ne.o.error(`å¯¼å‡ºå­˜æ¡£å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}},E=()=>{s.value?.click()},N=async e=>{const t=e.target.files?.[0];if(t){i.value=!0;try{const e=await t.text(),n=JSON.parse(e),r=(0,vd.ZT)(n);if("saves"!==r.type||!Array.isArray(r.payload?.saves))throw new Error("æ— æ•ˆçš„å­˜æ¡£æ–‡ä»¶æ ¼å¼ï¼Œè¯·ä½¿ç”¨æœ¬æ¸¸æˆå¯¼å‡ºçš„å­˜æ¡£æ–‡ä»¶");const o=r.payload.saves;if(0===o.length)throw new Error("æ–‡ä»¶ä¸­æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„å­˜æ¡£æ•°æ®");const i=a.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID;if(!i)throw new Error("æ— æ³•å¯¼å…¥å­˜æ¡£ï¼Œå½“å‰æ²¡æœ‰æ¿€æ´»çš„è§’è‰²");for(const e of o)await a.importSave(i,e);await b(),ne.o.success(`æˆåŠŸå¯¼å…¥ ${o.length} ä¸ªå­˜æ¡£`)}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","å¯¼å…¥å¤±è´¥",e),ne.o.error("å¯¼å…¥å­˜æ¡£å¤±è´¥: "+e.message)}finally{i.value=!1,s.value&&(s.value.value="")}}},S=async()=>{x.showRetryDialog({title:"æ¸…ç©ºæ‰€æœ‰å­˜æ¡£",message:"ç¡®å®šè¦åˆ é™¤æ‰€æœ‰å­˜æ¡£å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼",confirmText:"ç»§ç»­",cancelText:"å–æ¶ˆ",onConfirm:()=>{x.showRetryDialog({title:"å†æ¬¡ç¡®è®¤",message:"å†æ¬¡ç¡®è®¤ï¼šè¿™å°†æ°¸ä¹…åˆ é™¤æ‰€æœ‰å­˜æ¡£æ•°æ®ï¼",confirmText:"ç¡®è®¤æ¸…ç©º",cancelText:"å–æ¶ˆ",onConfirm:async()=>{i.value=!0;try{await a.clearAllSaves(),ne.o.success("æ‰€æœ‰å­˜æ¡£å·²æ¸…ç©º")}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","æ¸…ç©ºå¤±è´¥",e),ne.o.error("æ¸…ç©ºå­˜æ¡£å¤±è´¥")}finally{i.value=!1}},onCancel:()=>{}})},onCancel:()=>{}})},V=e=>{if(!e)return"æœªçŸ¥";const t=new Date(e);if(isNaN(t.getTime()))return"æœªçŸ¥";const n=(new Date).getTime()-t.getTime();return n<6e4?"åˆšåˆš":n<36e5?`${Math.floor(n/6e4)}åˆ†é’Ÿå‰`:n<864e5?`${Math.floor(n/36e5)}å°æ—¶å‰`:t.toLocaleDateString("zh-CN",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,r.onMounted)(()=>{b(),Qu.on("refresh",()=>b()),Qu.on("save",()=>(async()=>{if(f.value){i.value=!0;try{await a.saveCurrentGame({notifyIfNoActive:!0}),ne.o.success("å¿«é€Ÿå­˜æ¡£å®Œæˆ")}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","å¿«é€Ÿå­˜æ¡£å¤±è´¥",e),ne.o.error("å¿«é€Ÿå­˜æ¡£å¤±è´¥")}finally{i.value=!1}}else ne.o.warning("å½“å‰æ²¡æœ‰å¯å­˜æ¡£çš„æ¸¸æˆçŠ¶æ€")})())}),(e,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Kj,[(0,r.createCommentVNode)(" å­˜æ¡£å®¹å™¨ "),(0,r.createElementVNode)("div",Qj,[(0,r.createCommentVNode)(" å½“å‰å­˜æ¡£çŠ¶æ€ "),p.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Zj,[(0,r.createElementVNode)("div",eU,[(0,r.createElementVNode)("h4",tU,["ä¸Šæ¬¡å¯¹è¯"===p.value.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(D),{key:0,size:16,class:"last-save-icon"})):"æ—¶é—´ç‚¹å­˜æ¡£"===p.value.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Em),{key:1,size:16,class:"time-save-icon"})):(0,r.createCommentVNode)("v-if",!0),(0,r.createTextVNode)(" å½“å‰è¿›åº¦ - "+(0,r.toDisplayString)(p.value.å­˜æ¡£å),1)])]),(0,r.createElementVNode)("div",nU,[(0,r.createElementVNode)("div",aU,[(0,r.createElementVNode)("div",rU,(0,r.toDisplayString)(p.value.è§’è‰²åå­—?.[0]||"é“"),1),(0,r.createElementVNode)("div",oU,[(0,r.createElementVNode)("div",iU,(0,r.toDisplayString)(p.value.è§’è‰²åå­—||"æ— åé“å‹"),1),(0,r.createElementVNode)("div",sU,[(0,r.createElementVNode)("span",lU,(0,r.toDisplayString)(p.value.å¢ƒç•Œ||"å‡¡äºº"),1),o[3]||(o[3]=(0,r.createElementVNode)("span",{class:"detail-separator"},"Â·",-1)),(0,r.createElementVNode)("span",cU,(0,r.toDisplayString)(p.value.ä½ç½®||"æœªçŸ¥"),1)]),(0,r.createCommentVNode)(" ç‰¹æ®Šå­˜æ¡£è¯´æ˜ "),"ä¸Šæ¬¡å¯¹è¯"===p.value.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createElementBlock)("div",dU," æ¯æ¬¡å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½ï¼Œå¯ç”¨äºå›é€€åˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€ ")):"æ—¶é—´ç‚¹å­˜æ¡£"===p.value.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createElementBlock)("div",uU," æŒ‰è®¾å®šæ—¶é—´é—´éš”è‡ªåŠ¨è¦†ç›–ä¿å­˜ï¼Œé˜²æ­¢é•¿æ—¶é—´æ¸¸ç©æ•°æ®ä¸¢å¤± ")):(0,r.createCommentVNode)("v-if",!0)])]),(0,r.createElementVNode)("div",mU,[(0,r.createElementVNode)("div",pU,[(0,r.createElementVNode)("span",fU,(0,r.toDisplayString)((0,r.unref)(t)("åˆ›å»ºæ—¶é—´")),1),(0,r.createElementVNode)("span",gU,(0,r.toDisplayString)(V(p.value.ä¿å­˜æ—¶é—´||"")),1)]),(0,r.createElementVNode)("div",hU,[(0,r.createElementVNode)("span",vU,(0,r.toDisplayString)((0,r.unref)(t)("æœ€åä¿å­˜")),1),(0,r.createElementVNode)("span",bU,(0,r.toDisplayString)(V(p.value.æœ€åä¿å­˜æ—¶é—´??p.value.ä¿å­˜æ—¶é—´??"")),1)])])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å­˜æ¡£åˆ—è¡¨ "),(0,r.createElementVNode)("div",yU,[(0,r.createElementVNode)("div",xU,[o[4]||(o[4]=(0,r.createElementVNode)("h4",{class:"section-title"},"å­˜æ¡£åˆ—è¡¨",-1)),(0,r.createElementVNode)("div",kU,[l.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"new-save-btn",onClick:y,disabled:i.value,title:"æ–°å»ºå­˜æ¡£"},[(0,r.createVNode)((0,r.unref)(Xj.A),{size:16})],8,wU)),l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",NU,"â˜ï¸ äº‘ç«¯å­˜æ¡£")):((0,r.openBlock)(),(0,r.createElementBlock)("div",EU,(0,r.toDisplayString)(m.value.length)+"/10",1))])]),i.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",SU,[(0,r.createElementVNode)("div",VU,[(0,r.createVNode)((0,r.unref)(Yu.A),{size:18,class:"animate-spin"})]),(0,r.createElementVNode)("div",_U,(0,r.toDisplayString)((0,r.unref)(t)("æ­£åœ¨åŠ è½½å­˜æ¡£...")),1)])):0===m.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",CU,[(0,r.createElementVNode)("div",AU,[(0,r.createVNode)((0,r.unref)(Ou.A),{size:32})]),(0,r.createElementVNode)("div",DU,(0,r.toDisplayString)((0,r.unref)(t)("ä¿®ä»™è·¯ä¸Šå°šæœªç•™å­˜ï¼Œåˆ›å»ºå­˜æ¡£è®°å½•é“é€”")),1),(0,r.createElementVNode)("div",TU,(0,r.toDisplayString)((0,r.unref)(t)("å¼€å§‹æ¸¸æˆåå¯ä»¥åˆ›å»ºå­˜æ¡£")),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",BU,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(m.value,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:(0,r.normalizeClass)(["save-card",{active:e.id===p.value?.id}]),onClick:t=>(e=>{oN.Yz.log("å­˜æ¡£é¢æ¿","é€‰æ‹©å­˜æ¡£",e)})(e)},[(0,r.createElementVNode)("div",zU,[(0,r.createElementVNode)("div",MU,[(0,r.createElementVNode)("div",PU,(0,r.toDisplayString)(e.è§’è‰²åå­—?.[0]||"é“"),1),(0,r.createElementVNode)("div",RU,[(0,r.createElementVNode)("div",$U,["ä¸Šæ¬¡å¯¹è¯"===e.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(D),{key:0,size:14,class:"last-save-icon"})):"æ—¶é—´ç‚¹å­˜æ¡£"===e.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Em),{key:1,size:14,class:"time-save-icon"})):(0,r.createCommentVNode)("v-if",!0),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.å­˜æ¡£å||e.id||`å­˜æ¡£${t+1}`),1)]),(0,r.createElementVNode)("div",OU,(0,r.toDisplayString)(e.è§’è‰²åå­—||"æ— åé“å‹"),1),(0,r.createCommentVNode)(" æ˜¾ç¤ºæœ€åä¿å­˜æ—¶é—´ "),(0,r.createElementVNode)("div",LU,(0,r.toDisplayString)(V(e.æœ€åä¿å­˜æ—¶é—´??e.ä¿å­˜æ—¶é—´??null)),1)])]),(0,r.createElementVNode)("div",FU,[e.id!==p.value?.id&&"ä¸Šæ¬¡å¯¹è¯"!==e.å­˜æ¡£å&&"æ—¶é—´ç‚¹å­˜æ¡£"!==e.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"card-btn",onClick:(0,r.withModifiers)(t=>(async e=>{if(e){i.value=!0;try{await a.loadGameById(e.å­˜æ¡£å),ne.o.success(`å·²åŠ è½½å­˜æ¡£: ${e.å­˜æ¡£å}`)}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","åŠ è½½å¤±è´¥",e),ne.o.error("åŠ è½½å­˜æ¡£å¤±è´¥")}finally{i.value=!1}}})(e),["stop"]),disabled:i.value,title:"è¯»å–å­˜æ¡£"},[(0,r.createVNode)((0,r.unref)(Jj),{size:14})],8,jU)):(0,r.createCommentVNode)("v-if",!0),"ä¸Šæ¬¡å¯¹è¯"!==e.å­˜æ¡£å||l.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"card-btn warning",onClick:(0,r.withModifiers)(t=>(async e=>{if(!p.value)return void ne.o.warning("æ²¡æœ‰å½“å‰æ¿€æ´»çš„å­˜æ¡£");const{useUIStore:t}=await Promise.resolve().then(n.bind(n,9173));t().showRetryDialog({title:"å›æ»šåˆ°ä¸Šæ¬¡å¯¹è¯",message:`ç¡®å®šè¦å°†"${e.å­˜æ¡£å}"çš„æ•°æ®è¦†ç›–åˆ°å½“å‰å­˜æ¡£"${p.value.å­˜æ¡£å}"å—ï¼Ÿå½“å‰è¿›åº¦å°†è¢«æ›¿æ¢ä¸ºä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€ã€‚`,confirmText:"ç¡®è®¤å›æ»š",cancelText:"å–æ¶ˆ",onConfirm:async()=>{i.value=!0;try{await a.rollbackToLastConversation(),ne.o.success("å·²å›æ»šåˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€"),await b()}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","å›æ»šå¤±è´¥",e),ne.o.error(`å›æ»šå¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{i.value=!1}},onCancel:()=>{}})})(e),["stop"]),disabled:i.value||!p.value,title:"ç”¨ä¸Šæ¬¡å¯¹è¯çš„æ•°æ®è¦†ç›–å½“å‰å­˜æ¡£ï¼ˆå›æ»šï¼‰"},[(0,r.createVNode)((0,r.unref)(Yu.A),{size:14})],8,UU)),(0,r.createElementVNode)("button",{class:"card-btn info",onClick:(0,r.withModifiers)(t=>(async e=>{try{console.log("[å•ä¸ªå­˜æ¡£å¯¼å‡º] å¼€å§‹å¯¼å‡ºå­˜æ¡£:",e.å­˜æ¡£å);const t=a.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID;if(!t)return void ne.o.error("æ— æ³•è·å–è§’è‰²ID");const{loadSaveData:r}=await Promise.resolve().then(n.bind(n,5099)),o=await r(t,e.å­˜æ¡£å);if(!o)return void ne.o.error("æ— æ³•åŠ è½½å­˜æ¡£æ•°æ®");const i=(0,bd.ru)(o)?o:(0,bd.jj)(o).migrated,s=(0,yd.$)(i);if(!s.isValid)throw new Error(s.errors[0]||"å­˜æ¡£ç»“æ„æ ¡éªŒå¤±è´¥");const l=(0,vd.q3)("saves",{characterId:t,characterName:a.activeCharacterProfile?.è§’è‰²?.åå­—,saves:[{...e,å­˜æ¡£æ•°æ®:i}]}),c=JSON.stringify(l,null,2),d=new Blob([c],{type:"application/json"}),u=document.createElement("a");u.href=URL.createObjectURL(d);const m=`ä»™é€”-${e.å­˜æ¡£å}-${(new Date).toISOString().split("T")[0]}.json`;u.download=m,document.body.appendChild(u),u.click(),setTimeout(()=>{document.body.removeChild(u),URL.revokeObjectURL(u.href)},100),console.log("[å•ä¸ªå­˜æ¡£å¯¼å‡º] å¯¼å‡ºæˆåŠŸï¼Œæ–‡ä»¶å:",m),ne.o.success(`å·²å¯¼å‡ºå­˜æ¡£: ${e.å­˜æ¡£å}`)}catch(e){console.error("[å•ä¸ªå­˜æ¡£å¯¼å‡º] å¯¼å‡ºå¤±è´¥:",e),ne.o.error(`å¯¼å‡ºå­˜æ¡£å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}})(e),["stop"]),disabled:i.value,title:"å¯¼å‡ºæ­¤å­˜æ¡£"},[(0,r.createVNode)((0,r.unref)(lh.A),{size:14})],8,qU),"ä¸Šæ¬¡å¯¹è¯"!==e.å­˜æ¡£å&&"æ—¶é—´ç‚¹å­˜æ¡£"!==e.å­˜æ¡£å?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:2,class:"card-btn primary",onClick:(0,r.withModifiers)(t=>(async e=>{f.value?x.showRetryDialog({title:"è¦†ç›–å­˜æ¡£",message:`ç¡®å®šè¦ç”¨å½“å‰æ¸¸æˆè¿›åº¦è¦†ç›–å­˜æ¡£"${e.å­˜æ¡£å}"å—ï¼ŸåŸå­˜æ¡£æ•°æ®å°†ä¸¢å¤±ã€‚`,confirmText:"ç¡®è®¤è¦†ç›–",cancelText:"å–æ¶ˆ",onConfirm:async()=>{i.value=!0;try{await a.saveCurrentGame({notifyIfNoActive:!0}),await a.saveToSlot(e.å­˜æ¡£å),ne.o.success(`å·²è¦†ç›–å­˜æ¡£: ${e.å­˜æ¡£å}`),await b()}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","è¦†ç›–å­˜æ¡£å¤±è´¥",e),ne.o.error("è¦†ç›–å­˜æ¡£å¤±è´¥")}finally{i.value=!1}},onCancel:()=>{}}):ne.o.warning("å½“å‰æ²¡æœ‰å¯å­˜æ¡£çš„æ¸¸æˆçŠ¶æ€")})(e),["stop"]),disabled:i.value||!p.value,title:"ç”¨å½“å‰è¿›åº¦è¦†ç›–æ­¤å­˜æ¡£"},[(0,r.createVNode)((0,r.unref)(Ou.A),{size:14})],8,GU)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{class:"card-btn danger",onClick:(0,r.withModifiers)(t=>(async e=>{x.showRetryDialog({title:"åˆ é™¤å­˜æ¡£",message:`ç¡®å®šè¦åˆ é™¤å­˜æ¡£"${e.å­˜æ¡£å||"å­˜æ¡£"}"å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚`,confirmText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",onConfirm:async()=>{i.value=!0;try{await a.deleteSaveById(e.å­˜æ¡£å),ne.o.success("å­˜æ¡£å·²åˆ é™¤"),await b()}catch(e){oN.Yz.error("å­˜æ¡£é¢æ¿","åˆ é™¤å¤±è´¥",e),ne.o.error("åˆ é™¤å­˜æ¡£å¤±è´¥")}finally{i.value=!1}},onCancel:()=>{}})})(e),["stop"]),disabled:i.value||h(e),title:v(e)},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14})],8,HU)])]),(0,r.createElementVNode)("div",YU,[(0,r.createElementVNode)("div",WU,[(0,r.createElementVNode)("div",XU,[o[5]||(o[5]=(0,r.createElementVNode)("span",{class:"detail-label"},"å¢ƒç•Œ:",-1)),(0,r.createElementVNode)("span",JU,(0,r.toDisplayString)(e.å¢ƒç•Œ||"å‡¡äºº"),1)]),(0,r.createElementVNode)("div",KU,[o[6]||(o[6]=(0,r.createElementVNode)("span",{class:"detail-label"},"ä½ç½®:",-1)),(0,r.createElementVNode)("span",QU,(0,r.toDisplayString)(e.ä½ç½®||"æœªçŸ¥"),1)]),(0,r.createElementVNode)("div",ZU,[o[7]||(o[7]=(0,r.createElementVNode)("span",{class:"detail-label"},"ä¿®æ”¹:",-1)),(0,r.createElementVNode)("span",eq,(0,r.toDisplayString)(V(e.æœ€åä¿å­˜æ—¶é—´??e.ä¿å­˜æ—¶é—´??"")),1)])])])],10,IU))),128))]))]),(0,r.createCommentVNode)(" è‡ªåŠ¨å­˜æ¡£è®¾ç½® (ä»…å•æœºæ¨¡å¼) "),l.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",tq,[(0,r.createElementVNode)("div",nq,[(0,r.createElementVNode)("h4",aq,(0,r.toDisplayString)((0,r.unref)(t)("è‡ªåŠ¨å­˜æ¡£è®¾ç½®")),1)]),(0,r.createElementVNode)("div",rq,[(0,r.createElementVNode)("div",oq,[(0,r.createElementVNode)("div",iq,[(0,r.createElementVNode)("label",sq,(0,r.toDisplayString)((0,r.unref)(t)("å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½")),1),o[8]||(o[8]=(0,r.createElementVNode)("span",{class:"setting-desc"},"æ¯æ¬¡å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½ï¼Œç”¨äºå›é€€åˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€",-1))]),(0,r.createElementVNode)("div",lq,[(0,r.createElementVNode)("label",cq,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=e=>c.value=e)},null,512),[[r.vModelCheckbox,c.value]]),o[9]||(o[9]=(0,r.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),(0,r.createElementVNode)("div",dq,[(0,r.createElementVNode)("div",uq,[(0,r.createElementVNode)("label",mq,(0,r.toDisplayString)((0,r.unref)(t)("æ—¶é—´ç‚¹å­˜æ¡£")),1),o[10]||(o[10]=(0,r.createElementVNode)("span",{class:"setting-desc"},"æŒ‰è®¾å®šæ—¶é—´é—´éš”è‡ªåŠ¨è¦†ç›–ä¿å­˜ï¼Œé˜²æ­¢é•¿æ—¶é—´æ¸¸ç©æ•°æ®ä¸¢å¤±",-1))]),(0,r.createElementVNode)("div",pq,[(0,r.createElementVNode)("label",fq,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=e=>d.value=e)},null,512),[[r.vModelCheckbox,d.value]]),o[11]||(o[11]=(0,r.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",gq,[(0,r.createElementVNode)("div",hq,[(0,r.createElementVNode)("label",vq,(0,r.toDisplayString)((0,r.unref)(t)("å­˜æ¡£é—´éš”")),1),o[12]||(o[12]=(0,r.createElementVNode)("span",{class:"setting-desc"},"è‡ªåŠ¨å­˜æ¡£çš„æ—¶é—´é—´éš”ï¼ˆçœŸå®æ—¶é—´ï¼‰",-1))]),(0,r.createElementVNode)("div",bq,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"number",min:"1","onUpdate:modelValue":o[2]||(o[2]=e=>u.value=e),class:"interval-input"},null,512),[[r.vModelText,u.value,void 0,{number:!0}]]),o[13]||(o[13]=(0,r.createElementVNode)("span",{class:"unit-label"},"åˆ†é’Ÿ",-1))])])):(0,r.createCommentVNode)("v-if",!0)])])),(0,r.createCommentVNode)(" å­˜æ¡£æ“ä½œ "),(0,r.createElementVNode)("div",yq,[(0,r.createElementVNode)("div",xq,[(0,r.createElementVNode)("h4",kq,(0,r.toDisplayString)((0,r.unref)(t)("å­˜æ¡£æ“ä½œ")),1)]),(0,r.createElementVNode)("div",wq,[(0,r.createElementVNode)("button",{class:"operation-btn",onClick:k,disabled:i.value||!(0,r.unref)(a).activeCharacterProfile},[(0,r.createVNode)((0,r.unref)(lh.A),{size:16}),o[14]||(o[14]=(0,r.createElementVNode)("div",{class:"btn-content"},[(0,r.createElementVNode)("span",{class:"btn-title"},"å¯¼å‡ºè§’è‰²"),(0,r.createElementVNode)("span",{class:"btn-desc"},"å¯¼å‡ºå½“å‰è§’è‰²åŠå…¶æ‰€æœ‰å­˜æ¡£")],-1))],8,Eq),(0,r.createElementVNode)("button",{class:"operation-btn",onClick:w,disabled:i.value||0===m.value.length},[(0,r.createVNode)((0,r.unref)(lh.A),{size:16}),(0,r.createElementVNode)("div",Sq,[o[15]||(o[15]=(0,r.createElementVNode)("span",{class:"btn-title"},"å¯¼å‡ºæ‰€æœ‰å­˜æ¡£",-1)),(0,r.createElementVNode)("span",Vq,(0,r.toDisplayString)((0,r.unref)(t)("å¤‡ä»½æ‰€æœ‰å­˜æ¡£åˆ°æ–‡ä»¶")),1)])],8,Nq),l.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"operation-btn",onClick:E,disabled:i.value},[(0,r.createVNode)((0,r.unref)(ih.A),{size:16}),(0,r.createElementVNode)("div",Cq,[o[16]||(o[16]=(0,r.createElementVNode)("span",{class:"btn-title"},"å¯¼å…¥å­˜æ¡£",-1)),(0,r.createElementVNode)("span",Aq,(0,r.toDisplayString)((0,r.unref)(t)("ä»æ–‡ä»¶æ¢å¤å­˜æ¡£")),1)])],8,_q)),l.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"operation-btn danger",onClick:S,disabled:i.value||0===m.value.length},[(0,r.createVNode)((0,r.unref)(ea.A),{size:16}),(0,r.createElementVNode)("div",Tq,[(0,r.createElementVNode)("span",Bq,(0,r.toDisplayString)((0,r.unref)(t)("æ¸…ç©ºå­˜æ¡£")),1),(0,r.createElementVNode)("span",Iq,(0,r.toDisplayString)((0,r.unref)(t)("åˆ é™¤æ‰€æœ‰å­˜æ¡£æ•°æ®")),1)])],8,Dq))])])]),(0,r.createCommentVNode)(" éšè—çš„æ–‡ä»¶è¾“å…¥ "),(0,r.createElementVNode)("input",{ref_key:"fileInput",ref:s,type:"file",accept:".json",onChange:N,style:{display:"none"}},null,544)]))}});var Mq=n(473),Pq={};Pq.styleTagTransform=k(),Pq.setAttributes=v(),Pq.insert=g().bind(null,"head"),Pq.domAPI=p(),Pq.insertStyleElement=y(),u()(Mq.A,Pq),Mq.A&&Mq.A.locals&&Mq.A.locals;const Rq=(0,N.A)(zq,[["__scopeId","data-v-6158b81f"]]);var $q=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))($q||{}),Oq=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(Oq||{}),Lq=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Lq||{}),Fq=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(Fq||{}),jq=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(jq||{}),Uq=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(Uq||{}),qq=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(qq||{}),Gq=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(Gq||{}),Hq=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Hq||{}),Yq=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Yq||{}),Wq=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(Wq||{}),Xq=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(Xq||{}),Jq=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(Jq||{}),Kq=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(Kq||{}),Qq=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(Qq||{}),Zq=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(Zq||{}),eG=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(eG||{}),tG=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(tG||{}),nG=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(nG||{});const aG={createCanvas:(e,t)=>{const n=document.createElement("canvas");return n.width=e,n.height=t,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>(new DOMParser).parseFromString(e,"text/xml")},rG={ADAPTER:aG,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var oG=/iPhone/i,iG=/iPod/i,sG=/iPad/i,lG=/\biOS-universal(?:.+)Mac\b/i,cG=/\bAndroid(?:.+)Mobile\b/i,dG=/Android/i,uG=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,mG=/Silk/i,pG=/Windows Phone/i,fG=/\bWindows(?:.+)ARM\b/i,gG=/BlackBerry/i,hG=/BB10/i,vG=/Opera Mini/i,bG=/\b(CriOS|Chrome)(?:.+)Mobile/i,yG=/Mobile(?:.+)Firefox\b/i,xG=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};function kG(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,a=n.split("[FBAN");void 0!==a[1]&&(n=a[0]),void 0!==(a=n.split("Twitter"))[1]&&(n=a[0]);var r=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:r(oG)&&!r(pG),ipod:r(iG),tablet:!r(oG)&&(r(sG)||xG(t))&&!r(pG),universal:r(lG),device:(r(oG)||r(iG)||r(sG)||r(lG)||xG(t))&&!r(pG)},amazon:{phone:r(uG),tablet:!r(uG)&&r(mG),device:r(uG)||r(mG)},android:{phone:!r(pG)&&r(uG)||!r(pG)&&r(cG),tablet:!r(pG)&&!r(uG)&&!r(cG)&&(r(mG)||r(dG)),device:!r(pG)&&(r(uG)||r(mG)||r(cG)||r(dG))||r(/\bokhttp\b/i)},windows:{phone:r(pG),tablet:r(fG),device:r(pG)||r(fG)},other:{blackberry:r(gG),blackberry10:r(hG),opera:r(vG),firefox:r(yG),chrome:r(bG),device:r(gG)||r(hG)||r(vG)||r(yG)||r(bG)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const wG=(kG.default??kG)(globalThis.navigator);rG.RETINA_PREFIX=/@([0-9\.]+)x/,rG.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var EG=n(228),NG=n(6570);n(8835);const SG={};function VG(e,t,n=3){if(SG[t])return;let a=(new Error).stack;typeof a>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`):(a=a.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}\nDeprecated since v${e}`),console.warn(a),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}\nDeprecated since v${e}`),console.warn(a))),SG[t]=!0}function _G(e){if("string"!=typeof e)throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function CG(e){return e.split("?")[0].split("#")[0]}const AG={toPosix:e=>e.replace(new RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/"),isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:e=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e),isBlobUrl:e=>e.startsWith("blob:"),hasProtocol(e){return/^[^/:]+:/.test(this.toPosix(e))},getProtocol(e){_G(e),e=this.toPosix(e);const t=/^file:\/\/\//.exec(e);if(t)return t[0];const n=/^[^/:]+:\/{0,2}/.exec(e);return n?n[0]:""},toAbsolute(e,t,n){if(_G(e),this.isDataUrl(e)||this.isBlobUrl(e))return e;const a=CG(this.toPosix(t??rG.ADAPTER.getBaseUrl())),r=CG(this.toPosix(n??this.rootname(a)));return(e=this.toPosix(e)).startsWith("/")?AG.join(r,e.slice(1)):this.isAbsolute(e)?e:this.join(a,e)},normalize(e){if(_G(e),0===e.length)return".";if(this.isDataUrl(e)||this.isBlobUrl(e))return e;let t="";const n=(e=this.toPosix(e)).startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const a=e.endsWith("/");return e=function(e){let t="",n=0,a=-1,r=0,o=-1;for(let i=0;i<=e.length;++i){if(i<e.length)o=e.charCodeAt(i);else{if(47===o)break;o=47}if(47===o){if(a!==i-1&&1!==r)if(a!==i-1&&2===r){if(t.length<2||2!==n||46!==t.charCodeAt(t.length-1)||46!==t.charCodeAt(t.length-2))if(t.length>2){const e=t.lastIndexOf("/");if(e!==t.length-1){-1===e?(t="",n=0):(t=t.slice(0,e),n=t.length-1-t.lastIndexOf("/")),a=i,r=0;continue}}else if(2===t.length||1===t.length){t="",n=0,a=i,r=0;continue}}else t.length>0?t+=`/${e.slice(a+1,i)}`:t=e.slice(a+1,i),n=i-a-1;a=i,r=0}else 46===o&&-1!==r?++r:r=-1}return t}(e),e.length>0&&a&&(e+="/"),n?`/${e}`:t+e},isAbsolute(e){return _G(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join(...e){if(0===e.length)return".";let t;for(let n=0;n<e.length;++n){const a=e[n];if(_G(a),a.length>0)if(void 0===t)t=a;else{const r=e[n-1]??"";this.joinExtensions.includes(this.extname(r).toLowerCase())?t+=`/../${a}`:t+=`/${a}`}}return void 0===t?".":this.normalize(t)},dirname(e){if(_G(e),0===e.length)return".";let t=(e=this.toPosix(e)).charCodeAt(0);const n=47===t;let a=-1,r=!0;const o=this.getProtocol(e),i=e;for(let n=(e=e.slice(o.length)).length-1;n>=1;--n)if(t=e.charCodeAt(n),47===t){if(!r){a=n;break}}else r=!1;return-1===a?n?"/":this.isUrl(i)?o+e:o:n&&1===a?"//":o+e.slice(0,a)},rootname(e){_G(e);let t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){const n=e.indexOf("/",t.length);t=-1!==n?e.slice(0,n):e,t.endsWith("/")||(t+="/")}return t},basename(e,t){_G(e),t&&_G(t),e=CG(this.toPosix(e));let n,a=0,r=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let i=t.length-1,s=-1;for(n=e.length-1;n>=0;--n){const l=e.charCodeAt(n);if(47===l){if(!o){a=n+1;break}}else-1===s&&(o=!1,s=n+1),i>=0&&(l===t.charCodeAt(i)?-1===--i&&(r=n):(i=-1,r=s))}return a===r?r=s:-1===r&&(r=e.length),e.slice(a,r)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){a=n+1;break}}else-1===r&&(o=!1,r=n+1);return-1===r?"":e.slice(a,r)},extname(e){_G(e);let t=-1,n=0,a=-1,r=!0,o=0;for(let i=(e=CG(this.toPosix(e))).length-1;i>=0;--i){const s=e.charCodeAt(i);if(47!==s)-1===a&&(r=!1,a=i+1),46===s?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!r){n=i+1;break}}return-1===t||-1===a||0===o||1===o&&t===a-1&&t===n+1?"":e.slice(t,a)},parse(e){_G(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;let n=(e=CG(this.toPosix(e))).charCodeAt(0);const a=this.isAbsolute(e);let r;t.root=this.rootname(e),r=a||this.hasProtocol(e)?1:0;let o=-1,i=0,s=-1,l=!0,c=e.length-1,d=0;for(;c>=r;--c)if(n=e.charCodeAt(c),47!==n)-1===s&&(l=!1,s=c+1),46===n?-1===o?o=c:1!==d&&(d=1):-1!==o&&(d=-1);else if(!l){i=c+1;break}return-1===o||-1===s||0===d||1===d&&o===s-1&&o===i+1?-1!==s&&(t.base=t.name=0===i&&a?e.slice(1,s):e.slice(i,s)):(0===i&&a?(t.name=e.slice(1,o),t.base=e.slice(1,s)):(t.name=e.slice(i,o),t.base=e.slice(i,s)),t.ext=e.slice(o,s)),t.dir=this.dirname(e),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let DG,TG;async function BG(){return DG??(DG=(async()=>{const e=document.createElement("canvas").getContext("webgl");if(!e)return Jq.UNPACK;const t=await new Promise(e=>{const t=document.createElement("video");t.onloadeddata=()=>e(t),t.onerror=()=>e(null),t.autoplay=!1,t.crossOrigin="anonymous",t.preload="auto",t.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",t.load()});if(!t)return Jq.UNPACK;const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const a=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,a),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t);const r=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,r),e.deleteFramebuffer(a),e.deleteTexture(n),e.getExtension("WEBGL_lose_context")?.loseContext(),r[0]<=r[3]?Jq.PMA:Jq.UNPACK})()),DG}var IG={grad:.9,turn:360,rad:360/(2*Math.PI)},zG=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},MG=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},PG=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},RG=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},$G=function(e){return{r:PG(e.r,0,255),g:PG(e.g,0,255),b:PG(e.b,0,255),a:PG(e.a)}},OG=function(e){return{r:MG(e.r),g:MG(e.g),b:MG(e.b),a:MG(e.a,3)}},LG=/^#([0-9a-f]{3,8})$/i,FG=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},jG=function(e){var t=e.r,n=e.g,a=e.b,r=e.a,o=Math.max(t,n,a),i=o-Math.min(t,n,a),s=i?o===t?(n-a)/i:o===n?2+(a-t)/i:4+(t-n)/i:0;return{h:60*(s<0?s+6:s),s:o?i/o*100:0,v:o/255*100,a:r}},UG=function(e){var t=e.h,n=e.s,a=e.v,r=e.a;t=t/360*6,n/=100,a/=100;var o=Math.floor(t),i=a*(1-n),s=a*(1-(t-o)*n),l=a*(1-(1-t+o)*n),c=o%6;return{r:255*[a,s,i,i,l,a][c],g:255*[l,a,a,s,i,i][c],b:255*[i,i,l,a,a,s][c],a:r}},qG=function(e){return{h:RG(e.h),s:PG(e.s,0,100),l:PG(e.l,0,100),a:PG(e.a)}},GG=function(e){return{h:MG(e.h),s:MG(e.s),l:MG(e.l),a:MG(e.a,3)}},HG=function(e){return UG((n=(t=e).s,{h:t.h,s:(n*=((a=t.l)<50?a:100-a)/100)>0?2*n/(a+n)*100:0,v:a+n,a:t.a}));var t,n,a},YG=function(e){return{h:(t=jG(e)).h,s:(r=(200-(n=t.s))*(a=t.v)/100)>0&&r<200?n*a/100/(r<=100?r:200-r)*100:0,l:r/2,a:t.a};var t,n,a,r},WG=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,XG=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,JG=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,KG=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,QG={string:[[function(e){var t=LG.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?MG(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?MG(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=JG.exec(e)||KG.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:$G({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=WG.exec(e)||XG.exec(e);if(!t)return null;var n,a,r=qG({h:(n=t[1],a=t[2],void 0===a&&(a="deg"),Number(n)*(IG[a]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return HG(r)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,a=e.b,r=e.a,o=void 0===r?1:r;return zG(t)&&zG(n)&&zG(a)?$G({r:Number(t),g:Number(n),b:Number(a),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,a=e.l,r=e.a,o=void 0===r?1:r;if(!zG(t)||!zG(n)||!zG(a))return null;var i=qG({h:Number(t),s:Number(n),l:Number(a),a:Number(o)});return HG(i)},"hsl"],[function(e){var t=e.h,n=e.s,a=e.v,r=e.a,o=void 0===r?1:r;if(!zG(t)||!zG(n)||!zG(a))return null;var i=function(e){return{h:RG(e.h),s:PG(e.s,0,100),v:PG(e.v,0,100),a:PG(e.a)}}({h:Number(t),s:Number(n),v:Number(a),a:Number(o)});return UG(i)},"hsv"]]},ZG=function(e,t){for(var n=0;n<t.length;n++){var a=t[n][0](e);if(a)return[a,t[n][1]]}return[null,void 0]},eH=function(e,t){var n=YG(e);return{h:n.h,s:PG(n.s+100*t,0,100),l:n.l,a:n.a}},tH=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},nH=function(e,t){var n=YG(e);return{h:n.h,s:n.s,l:PG(n.l+100*t,0,100),a:n.a}},aH=function(){function e(e){this.parsed=function(e){return"string"==typeof e?ZG(e.trim(),QG.string):"object"==typeof e&&null!==e?ZG(e,QG.object):[null,void 0]}(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return MG(tH(this.rgba),2)},e.prototype.isDark=function(){return tH(this.rgba)<.5},e.prototype.isLight=function(){return tH(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=OG(this.rgba)).r,n=e.g,a=e.b,o=(r=e.a)<1?FG(MG(255*r)):"","#"+FG(t)+FG(n)+FG(a)+o;var e,t,n,a,r,o},e.prototype.toRgb=function(){return OG(this.rgba)},e.prototype.toRgbString=function(){return t=(e=OG(this.rgba)).r,n=e.g,a=e.b,(r=e.a)<1?"rgba("+t+", "+n+", "+a+", "+r+")":"rgb("+t+", "+n+", "+a+")";var e,t,n,a,r},e.prototype.toHsl=function(){return GG(YG(this.rgba))},e.prototype.toHslString=function(){return t=(e=GG(YG(this.rgba))).h,n=e.s,a=e.l,(r=e.a)<1?"hsla("+t+", "+n+"%, "+a+"%, "+r+")":"hsl("+t+", "+n+"%, "+a+"%)";var e,t,n,a,r},e.prototype.toHsv=function(){return e=jG(this.rgba),{h:MG(e.h),s:MG(e.s),v:MG(e.v),a:MG(e.a,3)};var e},e.prototype.invert=function(){return rH({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),rH(eH(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),rH(eH(this.rgba,-e))},e.prototype.grayscale=function(){return rH(eH(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),rH(nH(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),rH(nH(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?rH({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):MG(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=YG(this.rgba);return"number"==typeof e?rH({h:e,s:t.s,l:t.l,a:t.a}):MG(t.h)},e.prototype.isEqual=function(e){return this.toHex()===rH(e).toHex()},e}(),rH=function(e){return e instanceof aH?e:new aH(e)},oH=[];!function(e){e.forEach(function(e){oH.indexOf(e)<0&&(e(aH,QG),oH.push(e))})}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},a={};for(var r in n)a[n[r]]=r;var o={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var r,i,s=a[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var l=this.toRgb(),c=1/0,d="black";if(!o.length)for(var u in n)o[u]=new e(n[u]).toRgb();for(var m in n){var p=(r=l,i=o[m],Math.pow(r.r-i.r,2)+Math.pow(r.g-i.g,2)+Math.pow(r.b-i.b,2));p<c&&(c=p,d=m)}return d}},t.string.push([function(t){var a=t.toLowerCase(),r="transparent"===a?"#0000":n[a];return r?new e(r).toRgb():null},"name"])}]);const iH=class e{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(e){return"string"==typeof e||"number"==typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"==typeof e&&null!==e?{...e}:e}isSourceEqual(e,t){const n=typeof e;if(n!==typeof t)return!1;if("number"===n||"string"===n||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((e,n)=>e===t[n]);if(null!==e&&null!==t){const n=Object.keys(e),a=Object.keys(t);return n.length===a.length&&n.every(n=>e[n]===t[n])}return e===t}toRgba(){const[e,t,n,a]=this._components;return{r:e,g:t,b:n,a}}toRgb(){const[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){const[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){const[t,n,a]=this._components;return(e=e??[])[0]=Math.round(255*t),e[1]=Math.round(255*n),e[2]=Math.round(255*a),e}toRgbArray(e){e=e??[];const[t,n,a]=this._components;return e[0]=t,e[1]=n,e[2]=a,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}multiply(t){const[n,a,r,o]=e.temp.setValue(t)._components;return this._components[0]*=n,this._components[1]*=a,this._components[2]*=r,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;let n=this._int>>16&255,a=this._int>>8&255,r=255&this._int;return t&&(n=n*e+.5|0,a=a*e+.5|0,r=r*e+.5|0),(255*e<<24)+(n<<16)+(a<<8)+r}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,n,a]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(a*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,n,a,r]=this._components;return e[0]=t,e[1]=n,e[2]=a,e[3]=r,e}normalize(t){let n,a,r,o;if(("number"==typeof t||t instanceof Number)&&t>=0&&t<=16777215)n=(t>>16&255)/255,a=(t>>8&255)/255,r=(255&t)/255,o=1;else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[n,a,r,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[n,a,r,o=255]=t,n/=255,a/=255,r/=255,o/=255;else if("string"==typeof t||"object"==typeof t){if("string"==typeof t){const n=e.HEX_PATTERN.exec(t);n&&(t=`#${n[2]}`)}const i=rH(t);i.isValid()&&(({r:n,g:a,b:r,a:o}=i.rgba),n/=255,a/=255,r/=255)}if(void 0===n)throw new Error(`Unable to convert color ${t}`);this._components[0]=n,this._components[1]=a,this._components[2]=r,this._components[3]=o,this.refreshInt()}refreshInt(){this._clamp(this._components);const[e,t,n]=this._components;this._int=(255*e<<16)+(255*t<<8)+(255*n|0)}_clamp(e,t=0,n=1){return"number"==typeof e?Math.min(Math.max(e,t),n):(e.forEach((a,r)=>{e[r]=Math.min(Math.max(a,t),n)}),e)}};iH.shared=new iH,iH.temp=new iH,iH.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let sH=iH;const lH=function(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[Fq.NORMAL_NPM]=Fq.NORMAL,e[Fq.ADD_NPM]=Fq.ADD,e[Fq.SCREEN_NPM]=Fq.SCREEN,t[Fq.NORMAL]=Fq.NORMAL_NPM,t[Fq.ADD]=Fq.ADD_NPM,t[Fq.SCREEN]=Fq.SCREEN_NPM;const n=[];return n.push(t),n.push(e),n}();function cH(e,t){return lH[t?1:0][e]}function dH(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}function uH(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,1+(e|=e>>>16)}function mH(e){return!(e&e-1||!e)}function pH(e){let t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,n=((e>>>=n)>15?1:0)<<2,t|=n,n=((e>>>=n)>3?1:0)<<1,t|=n,t|(e>>>=n)>>1}function fH(e,t,n){const a=e.length;let r;if(t>=a||0===n)return;const o=a-(n=t+n>a?a-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}function gH(e){return 0===e?0:e<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let hH=0;function vH(){return++hH}const bH=class{constructor(e,t,n,a){this.left=e,this.top=t,this.right=n,this.bottom=a}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};bH.EMPTY=new bH(0,0,0,0);let yH=bH;const xH={},kH=Object.create(null),wH=Object.create(null);class EH{constructor(e,t,n){this._canvas=rG.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||rG.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function NH(e,t,n){for(let a=0,r=4*n*t;a<t;++a,r+=4)if(0!==e[r+3])return!1;return!0}function SH(e,t,n,a,r){const o=4*t;for(let t=a,i=a*o+4*n;t<=r;++t,i+=o)if(0!==e[i+3])return!1;return!0}function VH(e,t=1){const n=rG.RETINA_PREFIX?.exec(e);return n?parseFloat(n[1]):t}var _H=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(_H||{});const CH=e=>{if("function"==typeof e||"object"==typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={..."object"!=typeof e.extension?{type:e.extension}:e.extension,ref:e}}if("object"!=typeof e)throw new Error("Invalid extension type");return"string"==typeof(e={...e}).type&&(e.type=[e.type]),e},AH=(e,t)=>CH(e).priority??t,DH={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(CH).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...e){return e.map(CH).forEach(e=>{e.type.forEach(t=>{const n=this._addHandlers,a=this._queue;n[t]?n[t]?.(e):(a[t]=a[t]||[],a[t]?.push(e))})}),this},handle(e,t,n){const a=this._addHandlers,r=this._removeHandlers;if(a[e]||r[e])throw new Error(`Extension type ${e} already has a handler`);a[e]=t,r[e]=n;const o=this._queue;return o[e]&&(o[e]?.forEach(e=>t(e)),delete o[e]),this},handleByMap(e,t){return this.handle(e,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(e,t,n=-1){return this.handle(e,e=>{t.includes(e.ref)||(t.push(e.ref),t.sort((e,t)=>AH(t,n)-AH(e,n)))},e=>{const n=t.indexOf(e.ref);-1!==n&&t.splice(n,1)})}};class TH{constructor(e){"number"==typeof e?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const BH=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function IH(e){let t="";for(let n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+=`if(test == ${n}.0){}`);return t}class zH{constructor(){this.data=0,this.blendMode=Fq.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Fq.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new zH;return e.depthTest=!1,e.blend=!0,e}}zH.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const MH=[];function PH(e,t){if(!e)return null;let n="";if("string"==typeof e){const t=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);t&&(n=t[1].toLowerCase())}for(let a=MH.length-1;a>=0;--a){const r=MH[a];if(r.test&&r.test(e,n))return new r(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class RH{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,a,r,o,i,s){if(arguments.length>8)throw new Error("max arguments reached");const{name:l,items:c}=this;this._aliasCount++;for(let d=0,u=c.length;d<u;d++)c[d][l](e,t,n,a,r,o,i,s);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(RH.prototype,{dispatch:{value:RH.prototype.emit},run:{value:RH.prototype.emit}});class $H{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new RH("setRealSize"),this.onUpdate=new RH("update"),this.onError=new RH("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class OH extends $H{constructor(e,t){const{width:n,height:a}=t||{};if(!n||!a)throw new Error("BufferResource width or height invalid");super(n,a),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){const a=e.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,this.unpackAlignment),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Jq.UNPACK);const r=t.realWidth,o=t.realHeight;return n.width===r&&n.height===o?a.texSubImage2D(t.target,0,0,0,r,o,t.format,n.type,this.data):(n.width=r,n.height=o,a.texImage2D(t.target,0,n.internalFormat,r,o,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return null===e||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const LH={scaleMode:Yq.NEAREST,alphaMode:Jq.NPM},FH=class e extends EG{constructor(t=null,n=null){super(),n=Object.assign({},e.defaultOptions,n);const{alphaMode:a,mipmap:r,anisotropicLevel:o,scaleMode:i,width:s,height:l,wrapMode:c,format:d,type:u,target:m,resolution:p,resourceOptions:f}=n;t&&!(t instanceof $H)&&((t=PH(t,f)).internal=!0),this.resolution=p||rG.RESOLUTION,this.width=Math.round((s||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=r,this.anisotropicLevel=o,this._wrapMode=c,this._scaleMode=i,this.format=d,this.type=u,this.target=m,this.alphaMode=a,this.uid=vH(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=s>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=mH(this.realWidth)&&mH(this.realHeight)}setResolution(e){const t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete wH[this.cacheId],delete kH[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,n,a=rG.STRICT_TEXTURE_CACHE){const r="string"==typeof t;let o=null;if(r)o=t;else{if(!t._pixiId){const e=n?.pixiIdPrefix||"pixiid";t._pixiId=`${e}_${vH()}`}o=t._pixiId}let i=wH[o];if(r&&a&&!i)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return i||(i=new e(t,n),i.cacheId=o,e.addToCache(i,o)),i}static fromBuffer(t,n,a,r){t=t||new Float32Array(n*a*4);const o=new OH(t,{width:n,height:a,...r?.resourceOptions});let i,s;return t instanceof Float32Array?(i=Uq.RGBA,s=Gq.FLOAT):t instanceof Int32Array?(i=Uq.RGBA_INTEGER,s=Gq.INT):t instanceof Uint32Array?(i=Uq.RGBA_INTEGER,s=Gq.UNSIGNED_INT):t instanceof Int16Array?(i=Uq.RGBA_INTEGER,s=Gq.SHORT):t instanceof Uint16Array?(i=Uq.RGBA_INTEGER,s=Gq.UNSIGNED_SHORT):t instanceof Int8Array?(i=Uq.RGBA,s=Gq.BYTE):(i=Uq.RGBA,s=Gq.UNSIGNED_BYTE),o.internal=!0,new e(o,Object.assign({},LH,{type:s,format:i},r))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),wH[t]&&wH[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),wH[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=wH[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete wH[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete wH[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};FH.defaultOptions={mipmap:Xq.POW2,anisotropicLevel:0,scaleMode:Yq.LINEAR,wrapMode:Wq.CLAMP,alphaMode:Jq.UNPACK,target:qq.TEXTURE_2D,format:Uq.RGBA,type:Gq.UNSIGNED_BYTE},FH._globalBatch=0;let jH=FH;class UH{constructor(){this.texArray=null,this.blend=0,this.type=jq.TRIANGLES,this.start=0,this.size=0,this.data=null}}let qH=0;class GH{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=qH++,this.disposeRunner=new RH("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?nG.ELEMENT_ARRAY_BUFFER:nG.ARRAY_BUFFER}get index(){return this.type===nG.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new GH(e)}}class HH{constructor(e,t=0,n=!1,a=Gq.FLOAT,r,o,i,s=1){this.buffer=e,this.size=t,this.normalized=n,this.type=a,this.stride=r,this.start=o,this.instance=i,this.divisor=s}destroy(){this.buffer=null}static from(e,t,n,a,r){return new HH(e,t,n,a,r)}}const YH={Float32Array,Uint32Array,Int32Array,Uint8Array},WH={5126:4,5123:2,5121:1};let XH=0;const JH={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class KH{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=XH++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new RH("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,a=!1,r,o,i,s=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof GH||(t instanceof Array&&(t=new Float32Array(t)),t=new GH(t));const l=e.split("|");if(l.length>1){for(let e=0;e<l.length;e++)this.addAttribute(l[e],t,n,a,r);return this}let c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new HH(c,n,a,r,o,i,s),this.instanced=this.instanced||s,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof GH||(e instanceof Array&&(e=new Uint16Array(e)),e=new GH(e)),e.type=nG.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],n=new GH;let a;for(a in this.attributes){const n=this.attributes[a],r=this.buffers[n.buffer];e.push(r.data),t.push(n.size*WH[n.type]/4),n.buffer=0}for(n.data=function(e,t){let n=0,a=0;const r={};for(let r=0;r<e.length;r++)a+=t[r],n+=e[r].length;const o=new ArrayBuffer(4*n);let i=null,s=0;for(let n=0;n<e.length;n++){const l=t[n],c=e[n],d=dH(c);r[d]||(r[d]=new YH[d](o)),i=r[d];for(let e=0;e<c.length;e++)i[(e/l|0)*a+s+e%l]=c[e];s+=l}return new Float32Array(o)}(e,t),a=0;a<this.buffers.length;a++)this.buffers[a]!==this.indexBuffer&&this.buffers[a].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new KH;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new GH(this.buffers[t].data.slice(0));for(const t in this.attributes){const n=this.attributes[t];e.attributes[t]=new HH(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=nG.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new KH,n=[],a=[],r=[];let o;for(let t=0;t<e.length;t++){o=e[t];for(let e=0;e<o.buffers.length;e++)a[e]=a[e]||0,a[e]+=o.buffers[e].data.length,r[e]=0}for(let e=0;e<o.buffers.length;e++)n[e]=new(JH[dH(o.buffers[e].data)])(a[e]),t.buffers[e]=new GH(n[e]);for(let t=0;t<e.length;t++){o=e[t];for(let e=0;e<o.buffers.length;e++)n[e].set(o.buffers[e].data,r[e]),r[e]+=o.buffers[e].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=nG.ELEMENT_ARRAY_BUFFER;let n=0,a=0,r=0,i=0;for(let e=0;e<o.buffers.length;e++)if(o.buffers[e]!==o.indexBuffer){i=e;break}for(const e in o.attributes){const t=o.attributes[e];(0|t.buffer)===i&&(a+=t.size*WH[t.type]/4)}for(let o=0;o<e.length;o++){const s=e[o].indexBuffer.data;for(let e=0;e<s.length;e++)t.indexBuffer.data[e+r]+=n;n+=e[o].buffers[i].data.length/a,r+=s.length}}return t}}class QH extends KH{constructor(e=!1){super(),this._buffer=new GH(null,e,!1),this._indexBuffer=new GH(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Gq.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Gq.FLOAT).addAttribute("aColor",this._buffer,4,!0,Gq.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Gq.FLOAT).addIndex(this._indexBuffer)}}const ZH=2*Math.PI,eY=180/Math.PI,tY=Math.PI/180;var nY=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(nY||{});class aY{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new aY(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}aY.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const rY=[new aY,new aY,new aY,new aY];class oY{constructor(e=0,t=0,n=0,a=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(a),this.type=nY.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new oY(0,0,0,0)}clone(){return new oY(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){const t=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=t)return!1;const n=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>n}const n=this.left,a=this.right,r=this.top,o=this.bottom;if(a<=n||o<=r)return!1;const i=rY[0].set(e.left,e.top),s=rY[1].set(e.left,e.bottom),l=rY[2].set(e.right,e.top),c=rY[3].set(e.right,e.bottom);if(l.x<=i.x||s.y<=i.y)return!1;const d=Math.sign(t.a*t.d-t.b*t.c);if(0===d||(t.apply(i,i),t.apply(s,s),t.apply(l,l),t.apply(c,c),Math.max(i.x,s.x,l.x,c.x)<=n||Math.min(i.x,s.x,l.x,c.x)>=a||Math.max(i.y,s.y,l.y,c.y)<=r||Math.min(i.y,s.y,l.y,c.y)>=o))return!1;const u=d*(s.y-i.y),m=d*(i.x-s.x),p=u*n+m*r,f=u*a+m*r,g=u*n+m*o,h=u*a+m*o;if(Math.max(p,f,g,h)<=u*i.x+m*i.y||Math.min(p,f,g,h)>=u*c.x+m*c.y)return!1;const v=d*(i.y-l.y),b=d*(l.x-i.x),y=v*n+b*r,x=v*a+b*r,k=v*n+b*o,w=v*a+b*o;return!(Math.max(y,x,k,w)<=v*i.x+b*i.y||Math.min(y,x,k,w)>=v*c.x+b*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),a=Math.max(this.y,e.y),r=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=a,this.height=Math.max(r-a,0),this}ceil(e=1,t=.001){const n=Math.ceil((this.x+this.width-t)*e)/e,a=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=a-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),a=Math.min(this.y,e.y),r=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=a,this.height=r-a,this}}oY.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class iY{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=nY.CIRC}clone(){return new iY(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;const n=this.radius*this.radius;let a=this.x-e,r=this.y-t;return a*=a,r*=r,a+r<=n}getBounds(){return new oY(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}iY.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class sY{constructor(e=0,t=0,n=0,a=0){this.x=e,this.y=t,this.width=n,this.height=a,this.type=nY.ELIP}clone(){return new sY(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,a=(t-this.y)/this.height;return n*=n,a*=a,n+a<=1}getBounds(){return new oY(this.x-this.width,this.y-this.height,this.width,this.height)}}sY.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class lY{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){const e=[];for(let n=0,a=t.length;n<a;n++)e.push(t[n].x,t[n].y);t=e}this.points=t,this.type=nY.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new lY(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1;const a=this.points.length/2;for(let r=0,o=a-1;r<a;o=r++){const a=this.points[2*r],i=this.points[2*r+1],s=this.points[2*o],l=this.points[2*o+1];i>t!=l>t&&e<(t-i)/(l-i)*(s-a)+a&&(n=!n)}return n}}lY.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`};class cY{constructor(e=0,t=0,n=0,a=0,r=20){this.x=e,this.y=t,this.width=n,this.height=a,this.radius=r,this.type=nY.RREC}clone(){return new cY(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let a=e-(this.x+n),r=t-(this.y+n);const o=n*n;if(a*a+r*r<=o||(a=e-(this.x+this.width-n),a*a+r*r<=o)||(r=t-(this.y+this.height-n),a*a+r*r<=o)||(a=e-(this.x+n),a*a+r*r<=o))return!0}return!1}}cY.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class dY{constructor(e=1,t=0,n=0,a=1,r=0,o=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=a,this.tx=r,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,a,r,o){return this.a=e,this.b=t,this.c=n,this.d=a,this.tx=r,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new aY;const n=e.x,a=e.y;return t.x=this.a*n+this.c*a+this.tx,t.y=this.b*n+this.d*a+this.ty,t}applyInverse(e,t){t=t||new aY;const n=1/(this.a*this.d+this.c*-this.b),a=e.x,r=e.y;return t.x=this.d*n*a+-this.c*n*r+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*r+-this.b*n*a+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),a=this.a,r=this.c,o=this.tx;return this.a=a*t-this.b*n,this.b=a*n+this.b*t,this.c=r*t-this.d*n,this.d=r*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}append(e){const t=this.a,n=this.b,a=this.c,r=this.d;return this.a=e.a*t+e.b*a,this.b=e.a*n+e.b*r,this.c=e.c*t+e.d*a,this.d=e.c*n+e.d*r,this.tx=e.tx*t+e.ty*a+this.tx,this.ty=e.tx*n+e.ty*r+this.ty,this}setTransform(e,t,n,a,r,o,i,s,l){return this.a=Math.cos(i+l)*r,this.b=Math.sin(i+l)*r,this.c=-Math.sin(i-s)*o,this.d=Math.cos(i-s)*o,this.tx=e-(n*this.a+a*this.c),this.ty=t-(n*this.b+a*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const t=this.a,n=this.c;this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,n=this.b,a=this.c,r=this.d,o=e.pivot,i=-Math.atan2(-a,r),s=Math.atan2(n,t),l=Math.abs(i+s);return l<1e-5||Math.abs(ZH-l)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=i,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(a*a+r*r),e.position.x=this.tx+(o.x*t+o.y*a),e.position.y=this.ty+(o.x*n+o.y*r),e}invert(){const e=this.a,t=this.b,n=this.c,a=this.d,r=this.tx,o=e*a-t*n;return this.a=a/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-a*r)/o,this.ty=-(e*this.ty-t*r)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new dY;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new dY}static get TEMP_MATRIX(){return new dY}}dY.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const uY=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],mY=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],pY=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fY=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],gY=[],hY=[],vY=Math.sign;!function(){for(let e=0;e<16;e++){const t=[];gY.push(t);for(let n=0;n<16;n++){const a=vY(uY[e]*uY[n]+pY[e]*mY[n]),r=vY(mY[e]*uY[n]+fY[e]*mY[n]),o=vY(uY[e]*pY[n]+pY[e]*fY[n]),i=vY(mY[e]*pY[n]+fY[e]*fY[n]);for(let e=0;e<16;e++)if(uY[e]===a&&mY[e]===r&&pY[e]===o&&fY[e]===i){t.push(e);break}}}for(let e=0;e<16;e++){const t=new dY;t.set(uY[e],mY[e],pY[e],fY[e],0,0),hY.push(t)}}();const bY={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>uY[e],uY:e=>mY[e],vX:e=>pY[e],vY:e=>fY[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>gY[e][t],sub:(e,t)=>gY[e][bY.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?bY.S:bY.N:2*Math.abs(t)<=Math.abs(e)?e>0?bY.E:bY.W:t>0?e>0?bY.SE:bY.SW:e>0?bY.NE:bY.NW,matrixAppendRotationInv:(e,t,n=0,a=0)=>{const r=hY[bY.inv(t)];r.tx=n,r.ty=a,e.append(r)}};class yY{constructor(e,t,n=0,a=0){this._x=n,this._y=a,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new yY(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}yY.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const xY=class{constructor(){this.worldTransform=new dY,this.localTransform=new dY,this.position=new yY(this.onChange,this,0,0),this.scale=new yY(this.onChange,this,1,1),this.pivot=new yY(this.onChange,this,0,0),this.skew=new yY(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const n=e.worldTransform,a=this.worldTransform;a.a=t.a*n.a+t.b*n.c,a.b=t.a*n.b+t.b*n.d,a.c=t.c*n.a+t.d*n.c,a.d=t.c*n.b+t.d*n.d,a.tx=t.tx*n.a+t.ty*n.c+n.tx,a.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};xY.IDENTITY=new xY;let kY=xY;kY.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};const wY=[{test:e=>"float"===e.type&&1===e.size&&!e.isArray,code:e=>`\n            if(uv["${e}"] !== ud["${e}"].value)\n            {\n                ud["${e}"].value = uv["${e}"]\n                gl.uniform1f(ud["${e}"].location, uv["${e}"])\n            }\n            `},{test:(e,t)=>!("sampler2D"!==e.type&&"samplerCube"!==e.type&&"sampler2DArray"!==e.type||1!==e.size||e.isArray||null!=t&&void 0===t.castToBaseTexture),code:e=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${e}"], t);\n\n            if(ud["${e}"].value !== t)\n            {\n                ud["${e}"].value = t;\n                gl.uniform1i(ud["${e}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(e,t)=>"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a,code:e=>`\n            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));\n            `,codeUbo:e=>`\n                var ${e}_matrix = uv.${e}.toArray(true);\n\n                data[offset] = ${e}_matrix[0];\n                data[offset+1] = ${e}_matrix[1];\n                data[offset+2] = ${e}_matrix[2];\n        \n                data[offset + 4] = ${e}_matrix[3];\n                data[offset + 5] = ${e}_matrix[4];\n                data[offset + 6] = ${e}_matrix[5];\n        \n                data[offset + 8] = ${e}_matrix[6];\n                data[offset + 9] = ${e}_matrix[7];\n                data[offset + 10] = ${e}_matrix[8];\n            `},{test:(e,t)=>"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${e}"].location, v.x, v.y);\n                }`,codeUbo:e=>`\n                v = uv.${e};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:e=>"vec2"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);\n                }\n            `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                `},{test:(e,t)=>"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)\n                }`,codeUbo:e=>`\n                    v = uv.${e};\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                `},{test:e=>"vec4"===e.type&&1===e.size&&!e.isArray,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])\n                }`}],EY={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},NY={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},SY={};let VY,_Y=SY;const CY={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function AY(e){return CY[e]}let DY=null;const TY={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function BY(e,t){if(!DY){const t=Object.keys(TY);DY={};for(let n=0;n<t.length;++n){const a=t[n];DY[e[a]]=TY[a]}}return DY[t]}function IY(e,t,n){if("precision"!==e.substring(0,9)){let a=t;return t===Zq.HIGH&&n!==Zq.HIGH&&(a=Zq.MEDIUM),`precision ${a} float;\n${e}`}return n!==Zq.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}let zY=0;const MY={},PY=class e{constructor(t,n,a="pixi-shader",r={}){this.extra={},this.id=zY++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,"#version"!==this.vertexSrc.substring(0,8)&&(a=a.replace(/\s+/g,"-"),MY[a]?(MY[a]++,a+=`-${MY[a]}`):MY[a]=1,this.vertexSrc=`#define SHADER_NAME ${a}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${a}\n${this.fragmentSrc}`,this.vertexSrc=IY(this.vertexSrc,e.defaultVertexPrecision,Zq.HIGH),this.fragmentSrc=IY(this.fragmentSrc,e.defaultFragmentPrecision,function(){if(!VY){VY=Zq.MEDIUM;const e=function(){if(_Y===SY||_Y?.isContextLost()){const e=rG.ADAPTER.createCanvas();let t;rG.PREFER_ENV>=$q.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),_Y=t}return _Y}();if(e&&e.getShaderPrecisionFormat){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);t&&(VY=t.precision?Zq.HIGH:Zq.MEDIUM)}}return VY}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(t,n,a){const r=t+n;let o=xH[r];return o||(xH[r]=o=new e(t,n,a)),o}};PY.defaultVertexPrecision=Zq.HIGH,PY.defaultFragmentPrecision=wG.apple.device?Zq.HIGH:Zq.MEDIUM;let RY=PY,$Y=0;class OY{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$Y++,this.static=!!t,this.ubo=!!n,e instanceof GH?(this.buffer=e,this.buffer.type=nG.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new GH(new Float32Array(1)),this.buffer.type=nG.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new OY(t,n)}static from(e,t,n){return new OY(e,t,n)}static uboFrom(e,t){return new OY(e,t??!0,!0)}}class LY{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof OY?t:new OY(t):new OY({}),this.disposeRunner=new RH("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const n in t.uniforms){const a=t.uniforms[n];if(!0===a.group&&this.checkUniformExists(e,a))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){const a=RY.from(e,t);return new LY(a,n)}}class FY{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=OY.from({uSamplers:t},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${e}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new RY(this.vertexSrc,n)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new dY,default:this.defaultGroupCache[e]};return new LY(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${n}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n",t}}class jY{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class UY{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}const qY=class e extends UY{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=QH,this.vertexSize=6,this.state=zH.for2d(),this.size=4*e.defaultBatchSize,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??function(){let e=!0;const t=rG.ADAPTER.getNavigator();if(wG.tablet||wG.phone){if(wG.apple.device){const n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(wG.android.device){const n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?32:4}(),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??!wG.apple.device,this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return VG("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=e.defaultVertexSrc,fragment:n=e.defaultFragmentTemplate}={}){this.shaderGenerator=new FY(t,n)}contextChange(){const t=this.renderer.gl;rG.PREFER_ENV===$q.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),e.defaultMaxTextures),this.maxTextures=function(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=t.createShader(t.FRAGMENT_SHADER);for(;;){const a=BH.replace(/%forloop%/gi,IH(e));if(t.shaderSource(n,a),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:n}=e,a=this.size/4,r=Math.floor(a/this.maxTextures)+1;for(;t.length<a;)t.push(new UH);for(;n.length<r;)n.push(new jY);for(let e=0;e<this.maxTextures;e++)this._tempBoundTextures[e]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:n}=this,a=e._textureArrayPool,r=this.renderer.batch,o=this._tempBoundTextures,i=this.renderer.textureGC.count;let s=++jH._globalBatch,l=0,c=a[0],d=0;r.copyBoundTextures(o,n);for(let e=0;e<this._bufferSize;++e){const u=t[e];t[e]=null,u._batchEnabled!==s&&(c.count>=n&&(r.boundArray(c,o,s,n),this.buildDrawCalls(c,d,e),d=e,c=a[++l],++s),u._batchEnabled=s,u.touched=i,c.elements[c.count++]=u)}c.count>0&&(r.boundArray(c,o,s,n),this.buildDrawCalls(c,d,this._bufferSize),++l,++s);for(let e=0;e<o.length;e++)o[e]=null;jH._globalBatch=s}buildDrawCalls(t,n,a){const{_bufferedElements:r,_attributeBuffer:o,_indexBuffer:i,vertexSize:s}=this,l=e._drawCallPool;let c=this._dcIndex,d=this._aIndex,u=this._iIndex,m=l[c];m.start=this._iIndex,m.texArray=t;for(let e=n;e<a;++e){const a=r[e],p=a._texture.baseTexture,f=lH[p.alphaMode?1:0][a.blendMode];r[e]=null,n<e&&m.blend!==f&&(m.size=u-m.start,n=e,m=l[++c],m.texArray=t,m.start=u),this.packInterleavedGeometry(a,o,i,d,u),d+=a.vertexData.length/2*s,u+=a.indices.length,m.blend=f}n<a&&(m.size=u-m.start,++c),this._dcIndex=c,this._aIndex=d,this._iIndex=u}bindAndClearTexArray(e){const t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:n,_indexBuffer:a}=this;e.canUploadSameBuffer?(t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(a),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(n.rawBinaryData),t[this._flushId]._indexBuffer.update(a),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:n,state:a}=this.renderer,r=e._drawCallPool;let o=null;for(let e=0;e<t;e++){const{texArray:t,type:i,size:s,start:l,blend:c}=r[e];o!==t&&(o=t,this.bindAndClearTexArray(t)),this.state.blendMode=c,a.set(this.state),n.drawElements(i,s,n.UNSIGNED_SHORT,2*l)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),e.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=uH(Math.ceil(e/8)),n=pH(t),a=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._aBuffers[a];return r||(this._aBuffers[a]=r=new TH(a*this.vertexSize*4)),r}getIndexBuffer(e){const t=uH(Math.ceil(e/12)),n=pH(t),a=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._iBuffers[n];return r||(this._iBuffers[n]=r=new Uint16Array(a)),r}packInterleavedGeometry(e,t,n,a,r){const{uint32View:o,float32View:i}=t,s=a/this.vertexSize,l=e.uvs,c=e.indices,d=e.vertexData,u=e._texture.baseTexture._batchLocation,m=Math.min(e.worldAlpha,1),p=sH.shared.setValue(e._tintRGB).toPremultiplied(m,e._texture.baseTexture.alphaMode>0);for(let e=0;e<d.length;e+=2)i[a++]=d[e],i[a++]=d[e+1],i[a++]=l[e],i[a++]=l[e+1],o[a++]=p,i[a++]=u;for(let e=0;e<c.length;e++)n[r++]=s+c[e]}};qY.defaultBatchSize=4096,qY.extension={name:"batch",type:_H.RendererPlugin},qY._drawCallPool=[],qY._textureArrayPool=[];let GY=qY;DH.add(GY);const HY=class e extends LY{constructor(t,n,a){super(RY.from(t||e.defaultVertexSrc,n||e.defaultFragmentSrc),a),this.padding=0,this.resolution=e.defaultResolution,this.multisample=e.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new zH}apply(e,t,n,a,r){e.applyFilter(this,t,n,a)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}};HY.defaultResolution=1,HY.defaultMultisample=tG.NONE;let YY=HY;class WY{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new sH(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:t,background:n,backgroundAlpha:a}=e,r=n??t;void 0!==r&&(this.color=r),this.alpha=a}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}WY.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},WY.extension={type:[_H.RendererSystem,_H.CanvasRendererSystem],name:"background"},DH.add(WY);class XY{constructor(e){this.renderer=e,this.emptyRenderer=new UY(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:n}=this.renderer.texture;for(let a=t-1;a>=0;--a)e[a]=n[a]||null,e[a]&&(e[a]._batchLocation=a)}boundArray(e,t,n,a){const{elements:r,ids:o,count:i}=e;let s=0;for(let e=0;e<i;e++){const i=r[e],l=i._batchLocation;if(l>=0&&l<a&&t[l]===i)o[e]=l;else for(;s<a;){const a=t[s];if(!a||a._batchEnabled!==n||a._batchLocation!==s){o[e]=s,i._batchLocation=s,t[s]=i;break}s++}}}destroy(){this.renderer=null}}XY.extension={type:_H.RendererSystem,name:"batch"},DH.add(XY);let JY=0;class KY{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=JY++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=JY++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(rG.PREFER_ENV>=$q.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const a=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=a,a||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}KY.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},KY.extension={type:_H.RendererSystem,name:"context"},DH.add(KY);class QY{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new RH("disposeFramebuffer"),this.multisample=tG.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new jH(null,{scaleMode:Yq.NEAREST,resolution:1,mipmap:Xq.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new jH(null,{scaleMode:Yq.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Xq.OFF,format:Uq.DEPTH_COMPONENT,type:Gq.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const a=this.colorTextures[n],r=a.resolution;a.setSize(e/r,t/r)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class ZY extends jH{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=tG.NONE),super(null,e),this.mipmap=Xq.OFF,this.valid=!0,this._clear=new sH([0,0,0,0]),this.framebuffer=new QY(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class eW extends $H{constructor(e){const t=e;super(t.naturalWidth||t.videoWidth||t.displayWidth||t.width,t.naturalHeight||t.videoHeight||t.displayHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){void 0!==n||t.startsWith("data:")?!1!==n&&(e.crossOrigin="string"==typeof n?n:"anonymous"):e.crossOrigin=function(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location;const n=new URL(e,document.baseURI);return n.hostname!==t.hostname||n.port!==t.port||n.protocol!==t.protocol?"anonymous":""}(t)}upload(e,t,n,a){const r=e.gl,o=t.realWidth,i=t.realHeight;if(a=a||this.source,typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement){if(!a.complete||0===a.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement&&a.readyState<=1)return!1;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Jq.UNPACK),this.noSubImage||t.target!==r.TEXTURE_2D||n.width!==o||n.height!==i?(n.width=o,n.height=i,r.texImage2D(t.target,0,n.internalFormat,t.format,n.type,a)):r.texSubImage2D(r.TEXTURE_2D,0,0,0,t.format,n.type,a),!0}update(){if(this.destroyed)return;const e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}}class tW extends eW{constructor(e,t){if(t=t||{},"string"==typeof e){const n=new Image;eW.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??rG.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((e,t)=>{const n=this.source;this.url=n.src;const a=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};n.complete&&n.src?a():(n.onload=a,n.onerror=e=>{t(e),this.onError.emit(e)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap,n=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(e=>e.blob()).then(n=>t(n,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===Jq.UNPACK?"premultiply":"none"})).then(e=>this.destroyed?Promise.reject():(this.bitmap=e,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let e=!0;const a=t._glTextures;for(const r in a){const o=a[r];if(o!==n&&o.dirtyId!==t.dirtyId){e=!1;break}}e&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}class nW{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){const a=t.width,r=t.height;if(n){const t=e.width/2/a,o=e.height/2/r,i=e.x/a+t,s=e.y/r+o;n=bY.add(n,bY.NW),this.x0=i+t*bY.uX(n),this.y0=s+o*bY.uY(n),n=bY.add(n,2),this.x1=i+t*bY.uX(n),this.y1=s+o*bY.uY(n),n=bY.add(n,2),this.x2=i+t*bY.uX(n),this.y2=s+o*bY.uY(n),n=bY.add(n,2),this.x3=i+t*bY.uX(n),this.y3=s+o*bY.uY(n)}else this.x0=e.x/a,this.y0=e.y/r,this.x1=(e.x+e.width)/a,this.y1=e.y/r,this.x2=(e.x+e.width)/a,this.y2=(e.y+e.height)/r,this.x3=e.x/a,this.y3=(e.y+e.height)/r;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}nW.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const aW=new nW;function rW(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class oW extends EG{constructor(e,t,n,a,r,o,i){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new oY(0,0,1,1)),e instanceof oW&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=a,this.valid=!1,this.destroyed=!1,this._uvs=aW,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(r||0),!0===r)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new aY(o.x,o.y):new aY(0,0),this.defaultBorders=i,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:e}=this.baseTexture;e?.url&&kH[e.url]&&oW.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,oW.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new oW(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===aW&&(this._uvs=new nW),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=rG.STRICT_TEXTURE_CACHE){const a="string"==typeof e;let r=null;if(a)r=e;else if(e instanceof jH){if(!e.cacheId){const n=t?.pixiIdPrefix||"pixiid";e.cacheId=`${n}-${vH()}`,jH.addToCache(e,e.cacheId)}r=e.cacheId}else{if(!e._pixiId){const n=t?.pixiIdPrefix||"pixiid";e._pixiId=`${n}_${vH()}`}r=e._pixiId}let o=kH[r];if(a&&n&&!o)throw new Error(`The cacheId "${r}" does not exist in TextureCache.`);return o||e instanceof jH?!o&&e instanceof jH&&(o=new oW(e),oW.addToCache(o,r)):(t.resolution||(t.resolution=VH(e)),o=new oW(new jH(e,t)),o.baseTexture.cacheId=r,jH.addToCache(o.baseTexture,r),oW.addToCache(o,r)),o}static fromURL(e,t){const n=Object.assign({autoLoad:!1},t?.resourceOptions),a=oW.from(e,Object.assign({resourceOptions:n},t),!1),r=a.baseTexture.resource;return a.baseTexture.valid?Promise.resolve(a):r.load().then(()=>Promise.resolve(a))}static fromBuffer(e,t,n,a){return new oW(jH.fromBuffer(e,t,n,a))}static fromLoader(e,t,n,a){const r=new jH(e,Object.assign({scaleMode:jH.defaultOptions.scaleMode,resolution:VH(t)},a)),{resource:o}=r;o instanceof tW&&(o.url=t);const i=new oW(r);return n||(n=t),jH.addToCache(i.baseTexture,n),oW.addToCache(i,n),n!==t&&(jH.addToCache(i.baseTexture,t),oW.addToCache(i,t)),i.baseTexture.valid?Promise.resolve(i):new Promise(e=>{i.baseTexture.once("loaded",()=>e(i))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),kH[t]&&kH[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),kH[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=kH[e];if(t){const n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete kH[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)kH[e.textureCacheIds[t]]===e&&delete kH[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:n,width:a,height:r}=e,o=t+a>this.baseTexture.width,i=n+r>this.baseTexture.height;if(o||i){const e=o&&i?"and":"or",s=`X: ${t} + ${a} = ${t+a} > ${this.baseTexture.width}`,l=`Y: ${n} + ${r} = ${n+r} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${s} ${e} ${l}`)}this.valid=a&&r&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return oW._EMPTY||(oW._EMPTY=new oW(new jH),rW(oW._EMPTY),rW(oW._EMPTY.baseTexture)),oW._EMPTY}static get WHITE(){if(!oW._WHITE){const e=rG.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),oW._WHITE=new oW(jH.from(e)),rW(oW._WHITE),rW(oW._WHITE.baseTexture)}return oW._WHITE}}class iW extends oW{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){const a=this.baseTexture.resolution,r=Math.round(e*a)/a,o=Math.round(t*a)/a;this.valid=r>0&&o>0,this._frame.width=this.orig.width=r,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(r,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new iW(new ZY(e))}}class sW{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t,n=tG.NONE){const a=new ZY(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new iW(a)}getOptimalTexture(e,t,n=1,a=tG.NONE){let r;e=Math.max(Math.ceil(e*n-1e-6),1),t=Math.max(Math.ceil(t*n-1e-6),1),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?r=a>1?-a:-1:(r=((65535&(e=uH(e)))<<16|65535&(t=uH(t)))>>>0,a>1&&(r+=4294967296*a)),this.texturePool[r]||(this.texturePool[r]=[]);let o=this.texturePool[r].pop();return o||(o=this.createTexture(e,t,a)),o.filterPoolKey=r,o.setResolution(n),o}getFilterTexture(e,t,n){const a=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||tG.NONE);return a.filterFrame=e.filterFrame,a}returnTexture(e){const t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(const e in this.texturePool){const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){this.enableFullScreen=e.width>0&&e.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const t=this.texturePool[e];if(t)for(let e=0;e<t.length;e++)t[e].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}sW.SCREEN_KEY=-1;class lW extends KH{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class cW extends KH{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new GH(this.vertices),this.uvBuffer=new GH(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,a=0;return this.uvs[0]=n,this.uvs[1]=a,this.uvs[2]=n+t.width/e.width,this.uvs[3]=a,this.uvs[4]=n+t.width/e.width,this.uvs[5]=a+t.height/e.height,this.uvs[6]=n,this.uvs[7]=a+t.height/e.height,n=t.x,a=t.y,this.vertices[0]=n,this.vertices[1]=a,this.vertices[2]=n+t.width,this.vertices[3]=a,this.vertices[4]=n+t.width,this.vertices[5]=a+t.height,this.vertices[6]=n,this.vertices[7]=a+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class dW{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=tG.NONE,this.sourceFrame=new oY,this.destinationFrame=new oY,this.bindingSourceFrame=new oY,this.bindingDestinationFrame=new oY,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const uW=[new aY,new aY,new aY,new aY],mW=new dY;class pW{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new sW,this.statePool=[],this.quad=new lW,this.quadUv=new cW,this.tempRect=new oY,this.activeState={},this.globalUniforms=new OY({outputFrame:new oY,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const n=this.renderer,a=this.defaultFilterStack,r=this.statePool.pop()||new dW,o=n.renderTexture;let i,s;if(o.current){const e=o.current;i=e.resolution,s=e.multisample}else i=n.resolution,s=n.multisample;let l=t[0].resolution||i,c=t[0].multisample??s,d=t[0].padding,u=t[0].autoFit,m=t[0].legacy??!0;for(let e=1;e<t.length;e++){const n=t[e];l=Math.min(l,n.resolution||i),c=Math.min(c,n.multisample??s),d=this.useMaxPadding?Math.max(d,n.padding):d+n.padding,u=u&&n.autoFit,m=m||(n.legacy??!0)}1===a.length&&(this.defaultFilterStack[0].renderTexture=o.current),a.push(r),r.resolution=l,r.multisample=c,r.legacy=m,r.target=e,r.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),r.sourceFrame.pad(d);const p=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(mW.copyFrom(n.projection.transform).invert(),p),u?(r.sourceFrame.fit(p),(r.sourceFrame.width<=0||r.sourceFrame.height<=0)&&(r.sourceFrame.width=0,r.sourceFrame.height=0)):r.sourceFrame.intersects(p)||(r.sourceFrame.width=0,r.sourceFrame.height=0),this.roundFrame(r.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),r.renderTexture=this.getOptimalFilterTexture(r.sourceFrame.width,r.sourceFrame.height,l,c),r.filters=t,r.destinationFrame.width=r.renderTexture.width,r.destinationFrame.height=r.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=r.sourceFrame.width,f.height=r.sourceFrame.height,r.renderTexture.filterFrame=r.sourceFrame,r.bindingSourceFrame.copyFrom(o.sourceFrame),r.bindingDestinationFrame.copyFrom(o.destinationFrame),r.transform=n.projection.transform,n.projection.transform=null,o.bind(r.renderTexture,r.sourceFrame,f),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;const a=this.globalUniforms.uniforms;a.outputFrame=t.sourceFrame,a.resolution=t.resolution;const r=a.inputSize,o=a.inputPixel,i=a.inputClamp;if(r[0]=t.destinationFrame.width,r[1]=t.destinationFrame.height,r[2]=1/r[0],r[3]=1/r[1],o[0]=Math.round(r[0]*t.resolution),o[1]=Math.round(r[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],i[0]=.5*o[2],i[1]=.5*o[3],i[2]=t.sourceFrame.width*r[2]-.5*o[2],i[3]=t.sourceFrame.height*r[3]-.5*o[3],t.legacy){const e=a.filterArea;e[0]=t.destinationFrame.width,e[1]=t.destinationFrame.height,e[2]=t.sourceFrame.x,e[3]=t.sourceFrame.y,a.filterClamp=a.inputClamp}this.globalUniforms.update();const s=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,s.renderTexture,Kq.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let e=t.renderTexture,a=this.getOptimalFilterTexture(e.width,e.height,t.resolution);a.filterFrame=e.filterFrame;let r=0;for(r=0;r<n.length-1;++r){1===r&&t.multisample>1&&(a=this.getOptimalFilterTexture(e.width,e.height,t.resolution),a.filterFrame=e.filterFrame),n[r].apply(this,e,a,Kq.CLEAR,t);const o=e;e=a,a=o}n[r].apply(this,e,s.renderTexture,Kq.BLEND,t),r>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(e),this.returnFilterTexture(a)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Kq.CLEAR){const{renderTexture:n,state:a}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){const t=this.tempRect;t.x=0,t.y=0,t.width=e.filterFrame.width,t.height=e.filterFrame.height,n.bind(e,e.filterFrame,t)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const r=1&a.stateId||this.forceClear;(t===Kq.CLEAR||t===Kq.BLIT&&r)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,a){const r=this.renderer;r.state.set(e.state),this.bindAndClear(n,a),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,r.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),r.geometry.bind(this.quadUv),r.geometry.draw(jq.TRIANGLES)):(r.geometry.bind(this.quad),r.geometry.draw(jq.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:n,destinationFrame:a}=this.activeState,{orig:r}=t._texture,o=e.set(a.width,0,0,a.height,n.x,n.y),i=t.worldTransform.copyTo(dY.TEMP_MATRIX);return i.invert(),o.prepend(i),o.scale(1/r.width,1/r.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,a=tG.NONE){return this.texturePool.getOptimalTexture(e,t,n,a)}getFilterTexture(e,t,n){if("number"==typeof e){const n=e;e=t,t=n}e=e||this.activeState.renderTexture;const a=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||tG.NONE);return a.filterFrame=e.filterFrame,a}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const n=uW[0],a=uW[1],r=uW[2],o=uW[3];n.set(t.left,t.top),a.set(t.left,t.bottom),r.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(a,a),e.apply(r,r),e.apply(o,o);const i=Math.min(n.x,a.x,r.x,o.x),s=Math.min(n.y,a.y,r.y,o.y),l=Math.max(n.x,a.x,r.x,o.x),c=Math.max(n.y,a.y,r.y,o.y);t.x=i,t.y=s,t.width=l-i,t.height=c-s}roundFrame(e,t,n,a,r){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(r){const{a:e,b:t,c:n,d:a}=r;if((Math.abs(t)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(a)>1e-4))return}(r=r?mW.copyFrom(r):mW.identity()).translate(-n.x,-n.y).scale(a.width/n.width,a.height/n.height).translate(a.x,a.y),this.transformAABB(r,e),e.ceil(t),this.transformAABB(r.invert(),e)}}}pW.extension={type:_H.RendererSystem,name:"filter"},DH.add(pW);class fW{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=tG.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const gW=new oY;class hW{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new QY(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new oY,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;rG.PREFER_ENV===$q.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=e=>t.drawBuffersWEBGL(e):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){const{gl:a}=this;if(e){const r=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,a.bindFramebuffer(a.FRAMEBUFFER,r.framebuffer)),r.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,r.mipLevel=n),r.dirtyId!==e.dirtyId&&(r.dirtyId=e.dirtyId,r.dirtyFormat!==e.dirtyFormat?(r.dirtyFormat=e.dirtyFormat,r.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):r.dirtySize!==e.dirtySize&&(r.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let t=0;t<e.colorTextures.length;t++){const n=e.colorTextures[t];this.renderer.texture.unbind(n.parentTextureArray||n)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const e=t.width>>n,a=t.height>>n,r=e/t.width;this.setViewport(t.x*r,t.y*r,e,a)}else{const t=e.width>>n,a=e.height>>n;this.setViewport(0,0,t,a)}}else this.current&&(this.current=null,a.bindFramebuffer(a.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,a){const r=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),a=Math.round(a),(r.width!==n||r.height!==a||r.x!==e||r.y!==t)&&(r.x=e,r.y=t,r.width=n,r.height=a,this.gl.viewport(e,t,n,a))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,a,r=Lq.COLOR|Lq.DEPTH){const{gl:o}=this;o.clearColor(e,t,n,a),o.clear(r)}initFramebuffer(e){const{gl:t}=this,n=new fW(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){let a;t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),a=1===this.renderer.context.webGLVersion?t.DEPTH_STENCIL:e.depth&&e.stencil?t.DEPTH24_STENCIL8:e.depth?t.DEPTH_COMPONENT24:t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,a,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,a,e.width,e.height)}const a=e.colorTextures;let r=a.length;t.drawBuffers||(r=Math.min(r,1));for(let o=0;o<r;o++){const r=a[o],i=r.parentTextureArray||r;this.renderer.texture.bind(i,0),0===o&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,i._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:n}=this,a=e.glFramebuffers[this.CONTEXT_UID],r=e.colorTextures;let o=r.length;n.drawBuffers||(o=Math.min(o,1)),a.multisample>1&&this.canMultisampleFramebuffer(e)?a.msaaBuffer=a.msaaBuffer||n.createRenderbuffer():a.msaaBuffer&&(n.deleteRenderbuffer(a.msaaBuffer),a.msaaBuffer=null,a.blitFramebuffer&&(a.blitFramebuffer.dispose(),a.blitFramebuffer=null));const i=[];for(let s=0;s<o;s++){const o=r[s],l=o.parentTextureArray||o;this.renderer.texture.bind(l,0),0===s&&a.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,a.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,a.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,a.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,o.target,l._glTextures[this.CONTEXT_UID].texture,t),i.push(n.COLOR_ATTACHMENT0+s))}if(i.length>1&&n.drawBuffers(i),e.depthTexture&&this.writeDepthTexture){const a=e.depthTexture;this.renderer.texture.bind(a,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,a._glTextures[this.CONTEXT_UID].texture,t)}if(!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture)a.stencil&&(n.deleteRenderbuffer(a.stencil),a.stencil=null);else{let t,r;a.stencil=a.stencil||n.createRenderbuffer(),1===this.renderer.context.webGLVersion?(t=n.DEPTH_STENCIL_ATTACHMENT,r=n.DEPTH_STENCIL):e.depth&&e.stencil?(t=n.DEPTH_STENCIL_ATTACHMENT,r=n.DEPTH24_STENCIL8):e.depth?(t=n.DEPTH_ATTACHMENT,r=n.DEPTH_COMPONENT24):(t=n.STENCIL_ATTACHMENT,r=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,a.stencil),a.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,a.multisample,r,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,r,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,t,n.RENDERBUFFER,a.stencil)}}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let n=tG.NONE;if(e<=1||null===t)return n;for(let a=0;a<t.length;a++)if(t[a]<=e){n=t[a];break}return 1===n&&(n=tG.NONE),n}blit(e,t,n){const{current:a,renderer:r,gl:o,CONTEXT_UID:i}=this;if(2!==r.context.webGLVersion||!a)return;const s=a.glFramebuffers[i];if(!s)return;if(!e){if(!s.msaaBuffer)return;const t=a.colorTextures[0];if(!t)return;s.blitFramebuffer||(s.blitFramebuffer=new QY(a.width,a.height),s.blitFramebuffer.addColorTexture(0,t)),(e=s.blitFramebuffer).colorTextures[0]!==t&&(e.colorTextures[0]=t,e.dirtyId++,e.dirtyFormat++),(e.width!==a.width||e.height!==a.height)&&(e.width=a.width,e.height=a.height,e.dirtyId++,e.dirtySize++)}t||((t=gW).width=a.width,t.height=a.height),n||(n=t);const l=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,l?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){const n=e.glFramebuffers[this.CONTEXT_UID],a=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const r=this.managedFramebuffers.indexOf(e);r>=0&&this.managedFramebuffers.splice(r,1),e.disposeRunner.remove(this),t||(a.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&a.deleteRenderbuffer(n.msaaBuffer),n.stencil&&a.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;const n=e.width,a=e.height,r=this.gl,o=t.stencil=r.createRenderbuffer();let i,s;r.bindRenderbuffer(r.RENDERBUFFER,o),1===this.renderer.context.webGLVersion?(i=r.DEPTH_STENCIL_ATTACHMENT,s=r.DEPTH_STENCIL):e.depth?(i=r.DEPTH_STENCIL_ATTACHMENT,s=r.DEPTH24_STENCIL8):(i=r.STENCIL_ATTACHMENT,s=r.STENCIL_INDEX8),t.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,t.multisample,s,n,a):r.renderbufferStorage(r.RENDERBUFFER,s,n,a),r.framebufferRenderbuffer(r.FRAMEBUFFER,i,r.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new oY}destroy(){this.renderer=null}}hW.extension={type:_H.RendererSystem,name:"framebuffer"},DH.add(hW);const vW={5126:4,5123:2,5121:1};class bW{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){let t=this.renderer.context.extensions.vertexArrayObject;rG.PREFER_ENV===$q.WEBGL_LEGACY&&(t=null),t?(e.createVertexArray=()=>t.createVertexArrayOES(),e.bindVertexArray=e=>t.bindVertexArrayOES(e),e.deleteVertexArray=e=>t.deleteVertexArrayOES(e)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){const t=e.getExtension("ANGLE_instanced_arrays");t?(e.vertexAttribDivisor=(e,n)=>t.vertexAttribDivisorANGLE(e,n),e.drawElementsInstanced=(e,n,a,r,o)=>t.drawElementsInstancedANGLE(e,n,a,r,o),e.drawArraysInstanced=(e,n,a,r)=>t.drawArraysInstancedANGLE(e,n,a,r)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:n}=this;let a=e.glVertexArrayObjects[this.CONTEXT_UID],r=!1;a||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=a={},r=!0);const o=a[t.program.id]||this.initGeometryVao(e,t,r);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const a=e.buffers[n];t.update(a)}}checkCompatibility(e,t){const n=e.attributes,a=t.attributeData;for(const e in a)if(!n[e])throw new Error(`shader and geometry incompatible, geometry missing the "${e}" attribute`)}getSignature(e,t){const n=e.attributes,a=t.attributeData,r=["g",e.id];for(const e in n)a[e]&&r.push(e,a[e].location);return r.join("-")}initGeometryVao(e,t,n=!0){const a=this.gl,r=this.CONTEXT_UID,o=this.renderer.buffer,i=t.program;i.glPrograms[r]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,i);const s=this.getSignature(e,i),l=e.glVertexArrayObjects[this.CONTEXT_UID];let c=l[s];if(c)return l[i.id]=c,c;const d=e.buffers,u=e.attributes,m={},p={};for(const e in d)m[e]=0,p[e]=0;for(const e in u)!u[e].size&&i.attributeData[e]?u[e].size=i.attributeData[e].size:u[e].size||console.warn(`PIXI Geometry attribute '${e}' size cannot be determined (likely the bound shader does not have the attribute)`),m[u[e].buffer]+=u[e].size*vW[u[e].type];for(const e in u){const t=u[e],n=t.size;void 0===t.stride&&(m[t.buffer]===n*vW[t.type]?t.stride=0:t.stride=m[t.buffer]),void 0===t.start&&(t.start=p[t.buffer],p[t.buffer]+=n*vW[t.type])}c=a.createVertexArray(),a.bindVertexArray(c);for(let e=0;e<d.length;e++){const t=d[e];o.bind(t),n&&t._glBuffers[r].refCount++}return this.activateVao(e,i),l[i.id]=c,l[s]=c,a.bindVertexArray(null),o.unbind(nG.ARRAY_BUFFER),c}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],a=this.gl,r=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),n){if(o)for(let e=0;e<r.length;e++){const n=r[e]._glBuffers[this.CONTEXT_UID];n&&(n.refCount--,0===n.refCount&&!t&&o.dispose(r[e],t))}if(!t)for(const e in n)if("g"===e[0]){const t=n[e];this._activeVao===t&&this.unbind(),a.deleteVertexArray(t)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){const n=this.gl,a=this.CONTEXT_UID,r=this.renderer.buffer,o=e.buffers,i=e.attributes;e.indexBuffer&&r.bind(e.indexBuffer);let s=null;for(const e in i){const l=i[e],c=o[l.buffer],d=c._glBuffers[a];if(t.attributeData[e]){s!==d&&(r.bind(c),s=d);const a=t.attributeData[e].location;if(n.enableVertexAttribArray(a),n.vertexAttribPointer(a,l.size,l.type||n.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(a,l.divisor)}}}}draw(e,t,n,a){const{gl:r}=this,o=this._activeGeometry;if(o.indexBuffer){const i=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===i?r.UNSIGNED_SHORT:r.UNSIGNED_INT;2===i||4===i&&this.canUseUInt32ElementIndex?o.instanced?r.drawElementsInstanced(e,t||o.indexBuffer.data.length,s,(n||0)*i,a||1):r.drawElements(e,t||o.indexBuffer.data.length,s,(n||0)*i):console.warn("unsupported index buffer type: uint32")}else o.instanced?r.drawArraysInstanced(e,n,t||o.getSize(),a||1):r.drawArrays(e,n,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}bW.extension={type:_H.RendererSystem,name:"geometry"},DH.add(bW);const yW=new dY;class xW{constructor(e,t){this._texture=e,this.mapCoord=new dY,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const n=this.mapCoord;for(let a=0;a<e.length;a+=2){const r=e[a],o=e[a+1];t[a]=r*n.a+o*n.c+n.tx,t[a+1]=r*n.b+o*n.d+n.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const a=t.orig,r=t.trim;r&&(yW.set(a.width/r.width,0,0,a.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(yW));const o=t.baseTexture,i=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;return i[0]=(t._frame.x+s+l)/o.width,i[1]=(t._frame.y+s+l)/o.height,i[2]=(t._frame.x+t._frame.width-s+l)/o.width,i[3]=(t._frame.y+t._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0}}class kW extends YY{constructor(e,t,n){let a=null;"string"!=typeof e&&void 0===t&&void 0===n&&(a=e,e=void 0,t=void 0,n=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",n),this.maskSprite=a,this.maskMatrix=new dY}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,a){const r=this._maskSprite,o=r._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new xW(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,r).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,a))}}class wW{constructor(e=null){this.type=eG.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=YY.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=eG.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class EW{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){const e=this.maskDataPool.pop()||new wW;e.pooled=!0,e.maskObject=t,n=e}const a=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(a),n._colorMask=a?a._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==eG.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case eG.SCISSOR:this.renderer.scissor.push(n);break;case eG.STENCIL:this.renderer.stencil.push(n);break;case eG.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case eG.COLOR:this.pushColorMask(n)}n.type===eG.SPRITE&&this.maskStack.push(n)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case eG.SCISSOR:this.renderer.scissor.pop(t);break;case eG.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case eG.SPRITE:this.popSpriteMask(t);break;case eG.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const e=this.maskStack[this.maskStack.length-1];e.type===eG.SPRITE&&e._filters&&(e._filters[0].maskSprite=e.maskObject)}}}detect(e){const t=e.maskObject;t?t.isSprite?e.type=eG.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=eG.SCISSOR:e.type=eG.STENCIL:e.type=eG.COLOR}pushSpriteMask(e){const{maskObject:t}=e,n=e._target;let a=e._filters;a||(a=this.alphaMaskPool[this.alphaMaskIndex],a||(a=this.alphaMaskPool[this.alphaMaskIndex]=[new kW])),a[0].resolution=e.resolution,a[0].multisample=e.multisample,a[0].maskSprite=t;const r=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,a),n.filterArea=r,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))}popColorMask(e){const t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask(!!(1&n),!!(2&n),!!(4&n),!!(8&n))}destroy(){this.renderer=null}}EW.extension={type:_H.RendererSystem,name:"mask"},DH.add(EW);class NW{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;const a=this.getStackLength();a!==n&&(0===a?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const SW=new dY,VW=[],_W=class e extends NW{constructor(e){super(e),this.glConst=rG.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:n}=e,{renderer:a}=this,r=a.renderTexture,o=n.getBounds(!0,VW.pop()??new oY);this.roundFrameToPixels(o,r.current?r.current.resolution:a.resolution,r.sourceFrame,r.destinationFrame,a.projection.transform),t&&o.fit(t),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:n,c:a,d:r}=e;return(Math.abs(n)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(r)>1e-4)}testScissor(t){const{maskObject:n}=t;if(!n.isFastRect||!n.isFastRect()||e.isMatrixRotated(n.worldTransform)||e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const a=t._scissorRectLocal;return a.width>0&&a.height>0}roundFrameToPixels(t,n,a,r,o){e.isMatrixRotated(o)||((o=o?SW.copyFrom(o):SW.identity()).translate(-a.x,-a.y).scale(r.width/a.width,r.height/a.height).translate(r.x,r.y),this.renderer.filter.transformAABB(o,t),t.fit(r),t.x=Math.round(t.x*n),t.y=Math.round(t.y*n),t.width=Math.round(t.width*n),t.height=Math.round(t.height*n))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&VW.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};_W.extension={type:_H.RendererSystem,name:"scissor"};let CW=_W;DH.add(CW);class AW extends NW{constructor(e){super(e),this.glConst=rG.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:n}=this.renderer,a=e._stencilCounter;0===a&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const r=e._colorMask;0!==r&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,a,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==r&&(e._colorMask=r,n.colorMask(!!(1&r),!!(2&r),!!(4&r),!!(8&r))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,a=n?n._colorMask:15;0!==a&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==a&&(n._colorMask=a,t.colorMask(!!(1&a),!!(2&a),!!(4&a),!!(8&a))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}AW.extension={type:_H.RendererSystem,name:"stencil"},DH.add(AW);class DW{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(VG("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(VG("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(VG("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(){const e=this.rendererPlugins;for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}DW.extension={type:[_H.RendererSystem,_H.CanvasRendererSystem],name:"_plugin"},DH.add(DW);class TW{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new dY,this.transform=null}update(e,t,n,a){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,a),this.transform&&this.projectionMatrix.append(this.transform);const r=this.renderer;r.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,r.globalUniforms.update(),r.shader.shader&&r.shader.syncUniformGroup(r.shader.shader.uniforms.globals)}calculateProjection(e,t,n,a){const r=this.projectionMatrix,o=a?-1:1;r.identity(),r.a=1/t.width*2,r.d=o*(1/t.height*2),r.tx=-1-t.x*r.a,r.ty=-o-t.y*r.d}setTransform(e){}destroy(){this.renderer=null}}TW.extension={type:_H.RendererSystem,name:"projection"},DH.add(TW);const BW=new kY,IW=new oY;class zW{constructor(e){this.renderer=e,this._tempMatrix=new dY}generateTexture(e,t){const{region:n,...a}=t||{},r=n?.copyTo(IW)||e.getLocalBounds(IW,!0),o=a.resolution||this.renderer.resolution;r.width=Math.max(r.width,1/o),r.height=Math.max(r.height,1/o),a.width=r.width,a.height=r.height,a.resolution=o,a.multisample??(a.multisample=this.renderer.multisample);const i=iW.create(a);this._tempMatrix.tx=-r.x,this._tempMatrix.ty=-r.y;const s=e.transform;return e.transform=BW,this.renderer.render(e,{renderTexture:i,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=s,i}destroy(){}}zW.extension={type:[_H.RendererSystem,_H.CanvasRendererSystem],name:"textureGenerator"},DH.add(zW);const MW=new oY,PW=new oY;class RW{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new oY,this.destinationFrame=new oY,this.viewportFrame=new oY}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){const a=this.renderer;let r,o,i;this.current=e,e?(r=e.baseTexture,i=r.resolution,t||(MW.width=e.frame.width,MW.height=e.frame.height,t=MW),n||(PW.x=e.frame.x,PW.y=e.frame.y,PW.width=t.width,PW.height=t.height,n=PW),o=r.framebuffer):(i=a.resolution,t||(MW.width=a._view.screen.width,MW.height=a._view.screen.height,t=MW),n||((n=MW).width=t.width,n.height=t.height));const s=this.viewportFrame;s.x=n.x*i,s.y=n.y*i,s.width=n.width*i,s.height=n.height*i,e||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(o,s),this.renderer.projection.update(n,t,i,!o),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,a=sH.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&a.premultiply(a.alpha);const r=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,i=r.width!==o.width||r.height!==o.height;if(i){let{x:e,y:t,width:n,height:a}=this.viewportFrame;e=Math.round(e),t=Math.round(t),n=Math.round(n),a=Math.round(a),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(e,t,n,a)}this.renderer.framebuffer.clear(a.red,a.green,a.blue,a.alpha,t),i&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RW.extension={type:_H.RendererSystem,name:"renderTexture"},DH.add(RW);class $W{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function OW(e,t,n){const a=e.createShader(t);return e.shaderSource(a,n),e.compileShader(a),a}function LW(e){const t=new Array(e);for(let e=0;e<t.length;e++)t[e]=!1;return t}function FW(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return LW(2*t);case"bvec3":return LW(3*t);case"bvec4":return LW(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function jW(e,t){const n=e.getShaderSource(t).split("\n").map((e,t)=>`${t}: ${e}`),a=e.getShaderInfoLog(t),r=a.split("\n"),o={},i=r.map(e=>parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(e=>!(!e||o[e]||(o[e]=!0,0))),s=[""];i.forEach(e=>{n[e-1]=`%c${n[e-1]}%c`,s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join("\n");s[0]=l,console.error(a),console.groupCollapsed("click to view full shader code"),console.warn(...s),console.groupEnd()}function UW(e,t,n,a,r){n.buffer.update(r)}const qW={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},GW={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};let HW,YW=0;const WW={textureCount:0,uboCount:0};class XW{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=YW++}systemCheck(){if(!function(){if("boolean"==typeof HW)return HW;try{HW=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{HW=!1}return HW}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,a=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(a.program)),t||(WW.textureCount=0,WW.uboCount=0,this.syncUniformGroup(e.uniformGroup,WW)),a}setUniforms(e){const t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){const n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const a in e.uniforms){const r=t[a];if(!r){!0===e.uniforms[a]?.group&&(e.uniforms[a].ubo?n.push(`\n                        renderer.shader.syncUniformBufferGroup(uv.${a}, '${a}');\n                    `):n.push(`\n                        renderer.shader.syncUniformGroup(uv.${a}, syncData);\n                    `));continue}const o=e.uniforms[a];let i=!1;for(let e=0;e<wY.length;e++)if(wY[e].test(r,o)){n.push(wY[e].code(a,o)),i=!0;break}if(!i){const e=(1!==r.size||r.isArray?NY:EY)[r.type].replace("location",`ud["${a}"].location`);n.push(`\n            cu = ud["${a}"];\n            cv = cu.value;\n            v = uv["${a}"];\n            ${e};`)}}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const n=this.getGlProgram();if(!e.static||0!==e.dirtyId||!n.uniformGroups[e.id]){e.dirtyId=0;const a=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),a(n.uniformData,e.uniforms,this.renderer,WW,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){const{gl:a}=this.renderer;this.renderer.buffer.bind(e.buffer);const r=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,a.uniformBlockBinding(t.program,r,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let i=this._uboCache[o];if(i||(i=this._uboCache[o]=function(e,t){if(!e.autoManage)return{size:0,syncFunc:UW};const n=function(e,t){const n=[];for(const a in e)t[a]&&n.push(t[a]);return n.sort((e,t)=>e.index-t.index),n}(e.uniforms,t),{uboElements:a,size:r}=function(e){const t=e.map(e=>({data:e,offset:0,dataLen:0,dirty:0}));let n=0,a=0,r=0;for(let e=0;e<t.length;e++){const o=t[e];if(n=GW[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,a%n!==0&&a<16){const e=a%n%16;a+=e,r+=e}a+n>16?(r=16*Math.ceil(r/16),o.offset=r,r+=n,a=n):(o.offset=r,a+=n,r+=n)}return r=16*Math.ceil(r/16),{uboElements:t,size:r}}(n),o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let t=0;t<a.length;t++){const n=a[t],r=e.uniforms[n.data.name],i=n.data.name;let s=!1;for(let e=0;e<wY.length;e++){const t=wY[e];if(t.codeUbo&&t.test(n.data,r)){o.push(`offset = ${n.offset/4};`,wY[e].codeUbo(n.data.name,r)),s=!0;break}}if(!s)if(n.data.size>1){const e=AY(n.data.type),t=Math.max(GW[n.data.type]/16,1),a=e/t,r=(4-a%4)%4;o.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${n.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${n.data.size*t}; i++)\n                {\n                    for(var j = 0; j < ${a}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${r};\n                }\n\n                `)}else{const e=qW[n.data.type];o.push(`\n                cv = ud.${i}.value;\n                v = uv.${i};\n                offset = ${n.offset/4};\n                ${e};\n                `)}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){const t=new Float32Array(i.size/4);e.buffer.update(t)}return t.uniformGroups[e.id]=i.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){const a=e.uniforms,r=[`${n}-`];for(const e in a)r.push(e),t[e]&&r.push(t[e].type);return r.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const t=this.gl,n=e.program,a=function(e,t){const n=OW(e,e.VERTEX_SHADER,t.vertexSrc),a=OW(e,e.FRAGMENT_SHADER,t.fragmentSrc),r=e.createProgram();e.attachShader(r,n),e.attachShader(r,a);const o=t.extra?.transformFeedbackVaryings;if(o&&("function"!=typeof e.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(r,o.names,"separate"===o.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||function(e,t,n,a){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||jW(e,n),e.getShaderParameter(a,e.COMPILE_STATUS)||jW(e,a),console.error("PixiJS Error: Could not initialize shader."),""!==e.getProgramInfoLog(t)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}(e,r,n,a),t.attributeData=function(e,t){const n={},a=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<a;r++){const a=t.getActiveAttrib(e,r);if(a.name.startsWith("gl_"))continue;const o=BY(t,a.type),i={type:o,name:a.name,size:AY(o),location:t.getAttribLocation(e,a.name)};n[a.name]=i}return n}(r,e),t.uniformData=function(e,t){const n={},a=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<a;r++){const a=t.getActiveUniform(e,r),o=a.name.replace(/\[.*?\]$/,""),i=!!a.name.match(/\[.*?\]$/),s=BY(t,a.type);n[o]={name:o,index:r,type:s,size:a.size,isArray:i,value:FW(s,a.size)}}return n}(r,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const n=Object.keys(t.attributeData);n.sort((e,t)=>e>t?1:-1);for(let a=0;a<n.length;a++)t.attributeData[n[a]].location=a,e.bindAttribLocation(r,a,n[a]);e.linkProgram(r)}e.deleteShader(n),e.deleteShader(a);const i={};for(const n in t.uniformData){const a=t.uniformData[n];i[n]={location:e.getUniformLocation(r,n),value:FW(a.type,a.size)}}return new $W(r,i)}(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=a,a}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}XW.extension={type:_H.RendererSystem,name:"shader"},DH.add(XW);class JW{constructor(e){this.renderer=e}run(e){const{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}}JW.defaultOptions={hello:!1},JW.extension={type:[_H.RendererSystem,_H.CanvasRendererSystem],name:"startup"},DH.add(JW);const KW=class e{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Fq.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new zH,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=function(e,t=[]){return t[Fq.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.ADD]=[e.ONE,e.ONE],t[Fq.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.NONE]=[0,0],t[Fq.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Fq.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Fq.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Fq.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Fq.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Fq.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Fq.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Fq.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Fq.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Fq.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Fq.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):!t&&-1!==n&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};KW.extension={type:_H.RendererSystem,name:"state"};let QW=KW;DH.add(QW);class ZW extends EG{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(t=>e.systems[t]),n=[...t,...Object.keys(e.systems).filter(e=>!t.includes(e))];for(const t of n)this.addSystem(e.systems[t],t)}addRunners(...e){e.forEach(e=>{this.runners[e]=new RH(e)})}addSystem(e,t){const n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(const e in this.runners)this.runners[e].add(n);return this}emitWithCustomOptions(e,t){const n=Object.keys(this._systemsHash);e.items.forEach(a=>{const r=n.find(e=>this._systemsHash[e]===a);a[e.name](t[r])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const eX=class e{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Qq.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let n=!1;for(let a=0;a<t.length;a++){const r=t[a];r.resource&&this.count-r.touched>this.maxIdle&&(e.destroyTexture(r,!0),t[a]=null,n=!0)}if(n){let e=0;for(let n=0;n<t.length;n++)null!==t[n]&&(t[e++]=t[n]);t.length=e}}unload(e){const t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let t=e.children.length-1;t>=0;t--)this.unload(e.children[t])}destroy(){this.renderer=null}};eX.defaultMode=Qq.AUTO,eX.defaultMaxIdle=3600,eX.defaultCheckCountMax=600,eX.extension={type:_H.RendererSystem,name:"textureGC"};let tX=eX;DH.add(tX);class nX{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Gq.UNSIGNED_BYTE,this.internalFormat=Uq.RGBA,this.samplerType=0}}class aX{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new jH,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[Gq.UNSIGNED_BYTE]:{[Uq.RGBA]:e.RGBA8,[Uq.RGB]:e.RGB8,[Uq.RG]:e.RG8,[Uq.RED]:e.R8,[Uq.RGBA_INTEGER]:e.RGBA8UI,[Uq.RGB_INTEGER]:e.RGB8UI,[Uq.RG_INTEGER]:e.RG8UI,[Uq.RED_INTEGER]:e.R8UI,[Uq.ALPHA]:e.ALPHA,[Uq.LUMINANCE]:e.LUMINANCE,[Uq.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Gq.BYTE]:{[Uq.RGBA]:e.RGBA8_SNORM,[Uq.RGB]:e.RGB8_SNORM,[Uq.RG]:e.RG8_SNORM,[Uq.RED]:e.R8_SNORM,[Uq.RGBA_INTEGER]:e.RGBA8I,[Uq.RGB_INTEGER]:e.RGB8I,[Uq.RG_INTEGER]:e.RG8I,[Uq.RED_INTEGER]:e.R8I},[Gq.UNSIGNED_SHORT]:{[Uq.RGBA_INTEGER]:e.RGBA16UI,[Uq.RGB_INTEGER]:e.RGB16UI,[Uq.RG_INTEGER]:e.RG16UI,[Uq.RED_INTEGER]:e.R16UI,[Uq.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[Gq.SHORT]:{[Uq.RGBA_INTEGER]:e.RGBA16I,[Uq.RGB_INTEGER]:e.RGB16I,[Uq.RG_INTEGER]:e.RG16I,[Uq.RED_INTEGER]:e.R16I},[Gq.UNSIGNED_INT]:{[Uq.RGBA_INTEGER]:e.RGBA32UI,[Uq.RGB_INTEGER]:e.RGB32UI,[Uq.RG_INTEGER]:e.RG32UI,[Uq.RED_INTEGER]:e.R32UI,[Uq.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[Gq.INT]:{[Uq.RGBA_INTEGER]:e.RGBA32I,[Uq.RGB_INTEGER]:e.RGB32I,[Uq.RG_INTEGER]:e.RG32I,[Uq.RED_INTEGER]:e.R32I},[Gq.FLOAT]:{[Uq.RGBA]:e.RGBA32F,[Uq.RGB]:e.RGB32F,[Uq.RG]:e.RG32F,[Uq.RED]:e.R32F,[Uq.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[Gq.HALF_FLOAT]:{[Uq.RGBA]:e.RGBA16F,[Uq.RGB]:e.RGB16F,[Uq.RG]:e.RG16F,[Uq.RED]:e.R16F},[Gq.UNSIGNED_SHORT_5_6_5]:{[Uq.RGB]:e.RGB565},[Gq.UNSIGNED_SHORT_4_4_4_4]:{[Uq.RGBA]:e.RGBA4},[Gq.UNSIGNED_SHORT_5_5_5_1]:{[Uq.RGBA]:e.RGB5_A1},[Gq.UNSIGNED_INT_2_10_10_10_REV]:{[Uq.RGBA]:e.RGB10_A2,[Uq.RGBA_INTEGER]:e.RGB10_A2UI},[Gq.UNSIGNED_INT_10F_11F_11F_REV]:{[Uq.RGB]:e.R11F_G11F_B10F},[Gq.UNSIGNED_INT_5_9_9_9_REV]:{[Uq.RGB]:e.RGB9_E5},[Gq.UNSIGNED_INT_24_8]:{[Uq.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[Gq.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Uq.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:{[Gq.UNSIGNED_BYTE]:{[Uq.RGBA]:e.RGBA,[Uq.RGB]:e.RGB,[Uq.ALPHA]:e.ALPHA,[Uq.LUMINANCE]:e.LUMINANCE,[Uq.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[Gq.UNSIGNED_SHORT_5_6_5]:{[Uq.RGB]:e.RGB},[Gq.UNSIGNED_SHORT_4_4_4_4]:{[Uq.RGBA]:e.RGBA},[Gq.UNSIGNED_SHORT_5_5_5_1]:{[Uq.RGBA]:e.RGBA}},t}(e),this.samplerTypes=function(e){let t;return t="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?{[e.RGB]:Hq.FLOAT,[e.RGBA]:Hq.FLOAT,[e.ALPHA]:Hq.FLOAT,[e.LUMINANCE]:Hq.FLOAT,[e.LUMINANCE_ALPHA]:Hq.FLOAT,[e.R8]:Hq.FLOAT,[e.R8_SNORM]:Hq.FLOAT,[e.RG8]:Hq.FLOAT,[e.RG8_SNORM]:Hq.FLOAT,[e.RGB8]:Hq.FLOAT,[e.RGB8_SNORM]:Hq.FLOAT,[e.RGB565]:Hq.FLOAT,[e.RGBA4]:Hq.FLOAT,[e.RGB5_A1]:Hq.FLOAT,[e.RGBA8]:Hq.FLOAT,[e.RGBA8_SNORM]:Hq.FLOAT,[e.RGB10_A2]:Hq.FLOAT,[e.RGB10_A2UI]:Hq.FLOAT,[e.SRGB8]:Hq.FLOAT,[e.SRGB8_ALPHA8]:Hq.FLOAT,[e.R16F]:Hq.FLOAT,[e.RG16F]:Hq.FLOAT,[e.RGB16F]:Hq.FLOAT,[e.RGBA16F]:Hq.FLOAT,[e.R32F]:Hq.FLOAT,[e.RG32F]:Hq.FLOAT,[e.RGB32F]:Hq.FLOAT,[e.RGBA32F]:Hq.FLOAT,[e.R11F_G11F_B10F]:Hq.FLOAT,[e.RGB9_E5]:Hq.FLOAT,[e.R8I]:Hq.INT,[e.R8UI]:Hq.UINT,[e.R16I]:Hq.INT,[e.R16UI]:Hq.UINT,[e.R32I]:Hq.INT,[e.R32UI]:Hq.UINT,[e.RG8I]:Hq.INT,[e.RG8UI]:Hq.UINT,[e.RG16I]:Hq.INT,[e.RG16UI]:Hq.UINT,[e.RG32I]:Hq.INT,[e.RG32UI]:Hq.UINT,[e.RGB8I]:Hq.INT,[e.RGB8UI]:Hq.UINT,[e.RGB16I]:Hq.INT,[e.RGB16UI]:Hq.UINT,[e.RGB32I]:Hq.INT,[e.RGB32UI]:Hq.UINT,[e.RGBA8I]:Hq.INT,[e.RGBA8UI]:Hq.UINT,[e.RGBA16I]:Hq.INT,[e.RGBA16UI]:Hq.UINT,[e.RGBA32I]:Hq.INT,[e.RGBA32UI]:Hq.UINT,[e.DEPTH_COMPONENT16]:Hq.FLOAT,[e.DEPTH_COMPONENT24]:Hq.FLOAT,[e.DEPTH_COMPONENT32F]:Hq.FLOAT,[e.DEPTH_STENCIL]:Hq.FLOAT,[e.DEPTH24_STENCIL8]:Hq.FLOAT,[e.DEPTH32F_STENCIL8]:Hq.FLOAT}:{[e.RGB]:Hq.FLOAT,[e.RGBA]:Hq.FLOAT,[e.ALPHA]:Hq.FLOAT,[e.LUMINANCE]:Hq.FLOAT,[e.LUMINANCE_ALPHA]:Hq.FLOAT,[e.DEPTH_STENCIL]:Hq.FLOAT},t}(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let e=0;e<t;e++)this.boundTextures[e]=null;this.emptyTextures={};const n=new nX(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new nX(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let t=0;t<6;t++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let e=0;e<this.boundTextures.length;e++)this.bind(null,e)}bind(e,t=0){const{gl:n}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const a=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,a.texture)),a.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):a.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let e=0;e<n.length;e++)n[e]===this.unknownTexture&&this.bind(null,e)}for(let a=0;a<n.length;a++)n[a]===e&&(this.currentLocation!==a&&(t.activeTexture(t.TEXTURE0+a),this.currentLocation=a),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[a]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:a}=this;if(n)for(let n=e-1;n>=0;--n){const e=t[n];e&&e._glTextures[a].samplerType!==Hq.FLOAT&&this.renderer.texture.unbind(e)}}initTexture(e){const t=new nX(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??Hq.FLOAT,2===this.webGLVersion&&e.type===Gq.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const n=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(n,e,t))t.samplerType!==Hq.FLOAT&&(this.hasIntegerTextures=!0);else{const a=e.realWidth,r=e.realHeight,o=n.gl;(t.width!==a||t.height!==r||t.dirtyId<0)&&(t.width=a,t.height=r,o.texImage2D(e.target,0,t.internalFormat,a,r,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:n}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const t=this.managedTextures.indexOf(e);-1!==t&&fH(this.managedTextures,t,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==Xq.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=Wq.CLAMP,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const n=this.gl;if(t.mipmap&&e.mipmap!==Xq.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Yq.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const t=this.renderer.context.extensions.anisotropicFiltering;if(t&&e.anisotropicLevel>0&&e.scaleMode===Yq.LINEAR){const a=Math.min(e.anisotropicLevel,n.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,t.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Yq.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Yq.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}aX.extension={type:_H.RendererSystem,name:"texture"},DH.add(aX);class rX{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,a=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,a)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:n,renderer:a}=this;t&&a.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:n,CONTEXT_UID:a}=this,r=t.createTransformFeedback();e._glTransformFeedbacks[a]=r,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r);for(let r=0;r<e.buffers.length;r++){const o=e.buffers[r];o&&(n.buffer.update(o),o._glBuffers[a].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,r,o._glBuffers[a].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),r}disposeTransformFeedback(e,t){const n=e._glTransformFeedbacks[this.CONTEXT_UID],a=this.gl;e.disposeRunner.remove(this);const r=this.renderer.buffer;if(r)for(let n=0;n<e.buffers.length;n++){const a=e.buffers[n];if(!a)continue;const o=a._glBuffers[this.CONTEXT_UID];o&&(o.refCount--,0===o.refCount&&!t&&r.dispose(a,t))}n&&(t||a.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}rX.extension={type:_H.RendererSystem,name:"transformFeedback"},DH.add(rX);class oX{constructor(e){this.renderer=e}init(e){this.screen=new oY(0,0,e.width,e.height),this.element=e.view||rG.ADAPTER.createCanvas(),this.resolution=e.resolution||rG.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const n=this.element.width/this.resolution,a=this.element.height/this.resolution;this.screen.width=n,this.screen.height=a,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${a}px`),this.renderer.emit("resize",n,a),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}oX.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},oX.extension={type:[_H.RendererSystem,_H.CanvasRendererSystem],name:"_view"},DH.add(oX),rG.PREFER_ENV=$q.WEBGL2,rG.STRICT_TEXTURE_CACHE=!1,rG.RENDER_OPTIONS={...KY.defaultOptions,...WY.defaultOptions,...oX.defaultOptions,...JW.defaultOptions},Object.defineProperties(rG,{WRAP_MODE:{get:()=>jH.defaultOptions.wrapMode,set(e){VG("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),jH.defaultOptions.wrapMode=e}},SCALE_MODE:{get:()=>jH.defaultOptions.scaleMode,set(e){VG("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),jH.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:()=>jH.defaultOptions.mipmap,set(e){VG("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),jH.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:()=>jH.defaultOptions.anisotropicLevel,set(e){VG("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),jH.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:()=>(VG("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),YY.defaultResolution),set(e){YY.defaultResolution=e}},FILTER_MULTISAMPLE:{get:()=>(VG("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),YY.defaultMultisample),set(e){YY.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:()=>GY.defaultMaxTextures,set(e){VG("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),GY.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:()=>GY.defaultBatchSize,set(e){VG("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),GY.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:()=>GY.canUploadSameBuffer,set(e){VG("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),GY.canUploadSameBuffer=e}},GC_MODE:{get:()=>tX.defaultMode,set(e){VG("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),tX.defaultMode=e}},GC_MAX_IDLE:{get:()=>tX.defaultMaxIdle,set(e){VG("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),tX.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:()=>tX.defaultCheckCountMax,set(e){VG("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),tX.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:()=>RY.defaultVertexPrecision,set(e){VG("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),RY.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:()=>RY.defaultFragmentPrecision,set(e){VG("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),RY.defaultFragmentPrecision=e}}});var iX=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(iX||{});class sX{constructor(e,t=null,n=0,a=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=a}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}const lX=class e{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new sX(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=iX.NORMAL){return this._addListener(new sX(e,t,n))}addOnce(e,t,n=iX.NORMAL){return this._addListener(new sX(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let n;if(t>this.lastTime){if(n=this.elapsedMS=t-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const e=t-this._lastFrame|0;if(e<this._minElapsedMS)return;this._lastFrame=t-e%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*e.targetFPMS;const a=this._head;let r=a.next;for(;r;)r=r.emit(this.deltaTime);a.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const n=Math.min(this.maxFPS,t),a=Math.min(Math.max(0,n)/1e3,e.targetFPMS);this._maxElapsedMS=1/a}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!e._shared){const t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}static get system(){if(!e._system){const t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}};lX.targetFPMS=.06;let cX=lX;Object.defineProperties(rG,{TARGET_FPMS:{get:()=>cX.targetFPMS,set(e){VG("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),cX.targetFPMS=e}}});class dX{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,iX.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?cX.shared:new cX,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}dX.extension=_H.Application,DH.add(dX);const uX=[];DH.handleByList(_H.Renderer,uX);const mX="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class pX{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=tG.HIGH?this.multisample=tG.HIGH:t>=tG.MEDIUM?this.multisample=tG.MEDIUM:t>=tG.LOW?this.multisample=tG.LOW:this.multisample=tG.NONE}destroy(){}}pX.extension={type:_H.RendererSystem,name:"_multisample"},DH.add(pX);class fX{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class gX{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:n}=this,a=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,a.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:n,CONTEXT_UID:a}=this;if(this.boundBufferBases[t]!==e){const r=e._glBuffers[a]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,r.buffer)}}bindBufferRange(e,t,n){const{gl:a,CONTEXT_UID:r}=this;n=n||0;const o=e._glBuffers[r]||this.createGLBuffer(e);a.bindBufferRange(a.UNIFORM_BUFFER,t||0,o.buffer,256*n,256)}update(e){const{gl:t,CONTEXT_UID:n}=this,a=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==a.updateID)if(a.updateID=e._updateID,t.bindBuffer(e.type,a.buffer),a.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const n=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;a.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,n)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],a=this.gl;e.disposeRunner.remove(this),n&&(t||a.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new fX(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}gX.extension={type:_H.RendererSystem,name:"buffer"},DH.add(gX);class hX{constructor(e){this.renderer=e}render(e,t){const n=this.renderer;let a,r,o,i;if(t&&(a=t.renderTexture,r=t.clear,o=t.transform,i=t.skipUpdateTransform),this.renderingToScreen=!a,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(a||(this.lastObjectRendered=e),!i){const t=e.enableTempParent();e.updateTransform(),e.disableTempParent(t)}n.renderTexture.bind(a),n.batch.currentRenderer.start(),(r??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),a&&(t.blit&&n.framebuffer.blit(),a.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}hX.extension={type:_H.RendererSystem,name:"objectRenderer"},DH.add(hX);const vX=class e extends ZW{constructor(t){super(),this.type=Oq.WEBGL,t=Object.assign({},rG.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new OY({projectionMatrix:new dY},!0);const n={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:e.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(n),"useContextAlpha"in t&&(VG("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this._plugin.rendererPlugins=e.__plugins,this.options=t,this.startup.run(this.options)}static test(e){return!e?.forceCanvas&&(typeof TG>"u"&&(TG=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:rG.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!rG.ADAPTER.getWebGLRenderingContext())return!1;const t=rG.ADAPTER.createCanvas();let n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const a=!!n?.getContextAttributes()?.stencil;if(n){const e=n.getExtension("WEBGL_lose_context");e&&e.loseContext()}return n=null,a}catch{return!1}}()),TG)}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return VG("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return VG("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return VG("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return VG("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){VG("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return VG("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){VG("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return VG("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};vX.extension={type:_H.Renderer,priority:1},vX.__plugins={},vX.__systems={};let bX=vX;DH.handleByMap(_H.RendererPlugin,bX.__plugins),DH.handleByMap(_H.RendererSystem,bX.__systems),DH.add(bX);class yX extends $H{constructor(e,t){const{width:n,height:a}=t||{};super(n,a),this.items=[],this.itemDirtyIds=[];for(let t=0;t<e;t++){const e=new jH;this.items.push(e),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof $H?this.addResourceAt(e[n],n):this.addResourceAt(PH(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(e).then(()=>{const{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),this.update(),Promise.resolve(this)}),this._load}}const xX=class e extends yX{constructor(t,n){const{width:a,height:r,autoLoad:o,linkBaseTexture:i}=n||{};if(t&&t.length!==e.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:a,height:r});for(let t=0;t<e.SIDES;t++)this.items[t].target=qq.TEXTURE_CUBE_MAP_POSITIVE_X+t;this.linkBaseTexture=!1!==i,t&&this.initFromArray(t,n),!1!==o&&this.load()}bind(e){super.bind(e),e.target=qq.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=qq.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(t,n,a){const r=this.itemDirtyIds;for(let o=0;o<e.SIDES;o++){const e=this.items[o];(r[o]<e.dirtyId||a.dirtyId<n.dirtyId)&&(e.valid&&e.resource?(e.resource.upload(t,e,a),r[o]=e.dirtyId):r[o]<-1&&(t.gl.texImage2D(e.target,0,a.internalFormat,n.realWidth,n.realHeight,0,n.format,a.type,null),r[o]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===e.SIDES}};xX.SIDES=6;let kX=xX;class wX extends eW{constructor(e,t){let n,a,r;t=t||{},"string"==typeof e?(n=wX.EMPTY,a=e,r=!0):(n=e,a=null,r=!1),super(n),this.url=a,this.crossOrigin=t.crossOrigin??!0,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??r,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(async(e,t)=>{if(null!==this.url)try{const t=await rG.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await t.blob();if(this.destroyed)return;const a=await createImageBitmap(n,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===Jq.UNPACK?"premultiply":"none"});if(this.destroyed)return void a.close();this.source=a,this.update(),e(this)}catch(e){if(this.destroyed)return;t(e),this.onError.emit(e)}else e(this)})),this._load}upload(e,t,n){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return wX._EMPTY=wX._EMPTY??rG.ADAPTER.createCanvas(0,0),wX._EMPTY}}const EX=class e extends eW{constructor(e,t){t=t||{},super(rG.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},e.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const e=new Image;eW.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let a=t*this.scale,r=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(a=this._overrideWidth||this._overrideHeight/n*t,r=this._overrideHeight||this._overrideWidth/t*n),a=Math.round(a),r=Math.round(r);const o=this.source;o.width=a,o.height=r,o._pixiId=`canvas_${vH()}`,o.getContext("2d").drawImage(e,0,0,t,n,0,0,a,r),this._resolve(),this._resolve=null}}static getSize(t){const n=e.SVG_SIZE.exec(t),a={};return n&&(a[n[1]]=Math.round(parseFloat(n[3])),a[n[5]]=Math.round(parseFloat(n[7]))),a}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,n){return"svg"===n||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&e.SVG_XML.test(t)}};EX.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,EX.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let NX=EX;const SX=class e extends eW{constructor(t,n){if(n=n||{},!(t instanceof HTMLVideoElement)){const a=document.createElement("video");!1!==n.autoLoad&&a.setAttribute("preload","auto"),!1!==n.playsinline&&(a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline","")),!0===n.muted&&(a.setAttribute("muted",""),a.muted=!0),!0===n.loop&&a.setAttribute("loop",""),!1!==n.autoPlay&&a.setAttribute("autoplay",""),"string"==typeof t&&(t=[t]);const r=t[0].src||t[0];eW.crossOrigin(a,r,n.crossorigin);for(let n=0;n<t.length;++n){const r=document.createElement("source");let{src:o,mime:i}=t[n];if(o=o||t[n],o.startsWith("data:"))i=o.slice(5,o.indexOf(";"));else if(!o.startsWith("blob:")){const t=o.split("?").shift().toLowerCase(),n=t.slice(t.lastIndexOf(".")+1);i=i||e.MIME_TYPES[n]||`video/${n}`}r.src=o,i&&(r.type=i),a.appendChild(r)}t=a}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=n.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==n.autoPlay,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==n.autoLoad&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const e=cX.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(cX.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(cX.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(cX.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,n){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.includes(n)}};SX.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],SX.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VX=SX;MH.push(wX,tW,class extends eW{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},VX,class extends eW{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}},NX,OH,kX,class extends yX{constructor(e,t){const{width:n,height:a}=t||{};let r,o;Array.isArray(e)?(r=e,o=e.length):o=e,super(o,{width:n,height:a}),r&&this.initFromArray(r,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=qq.TEXTURE_2D_ARRAY}upload(e,t,n){const{length:a,itemDirtyIds:r,items:o}=this,{gl:i}=e;n.dirtyId<0&&i.texImage3D(i.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,a,0,t.format,n.type,null);for(let e=0;e<a;e++){const a=o[e];r[e]<a.dirtyId&&(r[e]=a.dirtyId,a.valid&&i.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,e,a.resource.width,a.resource.height,1,t.format,n.type,a.resource.source))}return!0}});class _X{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?oY.EMPTY:((e=e||new oY(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:n,b:a,c:r,d:o,tx:i,ty:s}=e,l=n*t.x+r*t.y+i,c=a*t.x+o*t.y+s;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,n=this.minY,a=this.maxX,r=this.maxY,o=e[0],i=e[1];t=o<t?o:t,n=i<n?i:n,a=o>a?o:a,r=i>r?i:r,o=e[2],i=e[3],t=o<t?o:t,n=i<n?i:n,a=o>a?o:a,r=i>r?i:r,o=e[4],i=e[5],t=o<t?o:t,n=i<n?i:n,a=o>a?o:a,r=i>r?i:r,o=e[6],i=e[7],t=o<t?o:t,n=i<n?i:n,a=o>a?o:a,r=i>r?i:r,this.minX=t,this.minY=n,this.maxX=a,this.maxY=r}addFrame(e,t,n,a,r){this.addFrameMatrix(e.worldTransform,t,n,a,r)}addFrameMatrix(e,t,n,a,r){const o=e.a,i=e.b,s=e.c,l=e.d,c=e.tx,d=e.ty;let u=this.minX,m=this.minY,p=this.maxX,f=this.maxY,g=o*t+s*n+c,h=i*t+l*n+d;u=g<u?g:u,m=h<m?h:m,p=g>p?g:p,f=h>f?h:f,g=o*a+s*n+c,h=i*a+l*n+d,u=g<u?g:u,m=h<m?h:m,p=g>p?g:p,f=h>f?h:f,g=o*t+s*r+c,h=i*t+l*r+d,u=g<u?g:u,m=h<m?h:m,p=g>p?g:p,f=h>f?h:f,g=o*a+s*r+c,h=i*a+l*r+d,u=g<u?g:u,m=h<m?h:m,p=g>p?g:p,f=h>f?h:f,this.minX=u,this.minY=m,this.maxX=p,this.maxY=f}addVertexData(e,t,n){let a=this.minX,r=this.minY,o=this.maxX,i=this.maxY;for(let s=t;s<n;s+=2){const t=e[s],n=e[s+1];a=t<a?t:a,r=n<r?n:r,o=t>o?t:o,i=n>i?n:i}this.minX=a,this.minY=r,this.maxX=o,this.maxY=i}addVertices(e,t,n,a){this.addVerticesMatrix(e.worldTransform,t,n,a)}addVerticesMatrix(e,t,n,a,r=0,o=r){const i=e.a,s=e.b,l=e.c,c=e.d,d=e.tx,u=e.ty;let m=this.minX,p=this.minY,f=this.maxX,g=this.maxY;for(let e=n;e<a;e+=2){const n=t[e],a=t[e+1],h=i*n+l*a+d,v=c*a+s*n+u;m=Math.min(m,h-r),f=Math.max(f,h+r),p=Math.min(p,v-o),g=Math.max(g,v+o)}this.minX=m,this.minY=p,this.maxX=f,this.maxY=g}addBounds(e){const t=this.minX,n=this.minY,a=this.maxX,r=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>a?e.maxX:a,this.maxY=e.maxY>r?e.maxY:r}addBoundsMask(e,t){const n=e.minX>t.minX?e.minX:t.minX,a=e.minY>t.minY?e.minY:t.minY,r=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=r&&a<=o){const e=this.minX,t=this.minY,i=this.maxX,s=this.maxY;this.minX=n<e?n:e,this.minY=a<t?a:t,this.maxX=r>i?r:i,this.maxY=o>s?o:s}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const n=e.minX>t.x?e.minX:t.x,a=e.minY>t.y?e.minY:t.y,r=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=r&&a<=o){const e=this.minX,t=this.minY,i=this.maxX,s=this.maxY;this.minX=n<e?n:e,this.minY=a<t?a:t,this.maxX=r>i?r:i,this.maxY=o>s?o:s}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,a,r,o){e-=r,t-=o,n+=r,a+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>a?this.maxY:a}}class CX extends EG{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new kY,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new _X,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let n=0;n<t.length;++n){const a=t[n];Object.defineProperty(CX.prototype,a,Object.getOwnPropertyDescriptor(e,a))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new oY),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new oY),e=this._localBoundsRect),this._localBounds||(this._localBounds=new _X);const t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=n?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const a=this._bounds,r=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=a,this._bounds.updateID+=this._boundsID-r,o}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,a){return t&&(e=t.toGlobal(e,n,a)),a||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,n=1,a=1,r=0,o=0,i=0,s=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=a||1,this.rotation=r,this.skew.x=o,this.skew.y=i,this.pivot.x=s,this.pivot.y=l,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new AX),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*eY}set angle(e){this.transform.rotation=e*tY}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1))}if(this._mask=e,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class AX extends CX{constructor(){super(...arguments),this.sortDirty=null}}CX.prototype.displayObjectUpdateTransform=CX.prototype.updateTransform;const DX=new dY;function TX(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const BX=class e extends CX{constructor(){super(),this.children=[],this.sortableChildren=e.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const n=this.getChildIndex(e),a=this.getChildIndex(t);this.children[n]=t,this.children[a]=e,this.onChildrenChange(n<a?n:a)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(e);fH(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,fH(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,fH(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const n=e,a=t-n;let r;if(a>0&&a<=t){r=this.children.splice(n,a);for(let e=0;e<r.length;++e)r[e].parent=null,r[e].transform&&(r[e].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let e=0;e<r.length;++e)r[e].emit("removed",this),this.emit("childRemoved",r[e],this,e);return r}if(0===a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&0!==n.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(TX),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const e=t._mask.isMaskData?t._mask.maskObject:t._mask;e?(e.calculateBounds(),this._bounds.addBoundsMask(t._bounds,e._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const n=super.getLocalBounds(e);if(!t)for(let e=0,t=this.children.length;e<t;++e){const t=this.children[e];t.visible&&t.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const n=t.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let a,r;this.cullArea?(a=this.cullArea,r=this.worldTransform):this._render!==e.prototype._render&&(a=this.getBounds(!0));const o=t.projection.transform;if(o&&(r?(r=DX.copyFrom(r),r.prepend(o)):r=o),a&&n.intersects(a,r))this._render(t);else if(this.cullArea)return;for(let e=0,n=this.children.length;e<n;++e){const n=this.children[e],a=n.cullable;n.cullable=a||!this.cullArea,n.render(t),n.cullable=a}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let e=0;e<t.length;e++)t[e].enabled&&this._enabledFilters.push(t[e])}const a=t&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==eG.NONE));if(a&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}a&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:e?.children,n=this.removeChildren(0,this.children.length);if(t)for(let t=0;t<n.length;++t)n[t].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}};BX.defaultSortableChildren=!1;let IX=BX;IX.prototype.containerUpdateTransform=IX.prototype.updateTransform,Object.defineProperties(rG,{SORTABLE_CHILDREN:{get:()=>IX.defaultSortableChildren,set(e){VG("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),IX.defaultSortableChildren=e}}});const zX=new aY,MX=new Uint16Array([0,1,2,0,2,3]);class PX extends IX{constructor(e){super(),this._anchor=new yY(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new sH(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Fq.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||oW.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=MX,this.pluginName="batch",this.isSprite=!0,this._roundPixels=rG.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=gH(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=gH(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,n=t.a,a=t.b,r=t.c,o=t.d,i=t.tx,s=t.ty,l=this.vertexData,c=e.trim,d=e.orig,u=this._anchor;let m=0,p=0,f=0,g=0;if(c?(p=c.x-u._x*d.width,m=p+c.width,g=c.y-u._y*d.height,f=g+c.height):(p=-u._x*d.width,m=p+d.width,g=-u._y*d.height,f=g+d.height),l[0]=n*p+r*g+i,l[1]=o*g+a*p+s,l[2]=n*m+r*g+i,l[3]=o*g+a*m+s,l[4]=n*m+r*f+i,l[5]=o*f+a*m+s,l[6]=n*p+r*f+i,l[7]=o*f+a*p+s,this._roundPixels){const e=rG.RESOLUTION;for(let t=0;t<l.length;++t)l[t]=Math.round(l[t]*e)/e}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,t=this.vertexTrimmedData,n=e.orig,a=this._anchor,r=this.transform.worldTransform,o=r.a,i=r.b,s=r.c,l=r.d,c=r.tx,d=r.ty,u=-a._x*n.width,m=u+n.width,p=-a._y*n.height,f=p+n.height;if(t[0]=o*u+s*p+c,t[1]=l*p+i*u+d,t[2]=o*m+s*p+c,t[3]=l*p+i*m+d,t[4]=o*m+s*f+c,t[5]=l*f+i*m+d,t[6]=o*u+s*f+c,t[7]=l*f+i*u+d,this._roundPixels){const e=rG.RESOLUTION;for(let n=0;n<t.length;++n)t[n]=Math.round(t[n]*e)/e}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new _X),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new oY),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,zX);const t=this._texture.orig.width,n=this._texture.orig.height,a=-t*this.anchor.x;let r=0;return zX.x>=a&&zX.x<a+t&&(r=-n*this.anchor.y,zX.y>=r&&zX.y<r+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e?.texture){const t="boolean"==typeof e?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){const n=e instanceof oW?e:oW.from(e,t);return new PX(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=gH(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=gH(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||oW.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const RX=new dY;CX.prototype._cacheAsBitmap=!1,CX.prototype._cacheData=null,CX.prototype._cacheAsBitmapResolution=null,CX.prototype._cacheAsBitmapMultisample=null;class $X{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(CX.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;let t;this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new $X),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),CX.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},CX.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const t=this.alpha;this.alpha=1,e.batch.flush();const n=this.getLocalBounds(new oY,!0);if(this.filters?.length){const e=this.filters[0].padding;n.pad(e)}const a=this.cacheAsBitmapResolution||e.resolution;n.ceil(a),n.width=Math.max(n.width,1/a),n.height=Math.max(n.height,1/a);const r=e.renderTexture.current,o=e.renderTexture.sourceFrame.clone(),i=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,l=iW.create({width:n.width,height:n.height,resolution:a,multisample:this.cacheAsBitmapMultisample??e.multisample}),c=`cacheAsBitmap_${vH()}`;this._cacheData.textureCacheId=c,jH.addToCache(l.baseTexture,c),oW.addToCache(l,c);const d=this.transform.localTransform.copyTo(RX).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:d,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=s,e.renderTexture.bind(r,o,i),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const u=new PX(l);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-n.x/n.width,u.anchor.y=-n.y/n.height,u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=u.containsPoint.bind(u)},CX.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},CX.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const t=this.getLocalBounds(new oY,!0),n=this.alpha;this.alpha=1;const a=e.canvasContext.activeContext,r=e._projTransform,o=this.cacheAsBitmapResolution||e.resolution;t.ceil(o),t.width=Math.max(t.width,1/o),t.height=Math.max(t.height,1/o);const i=iW.create({width:t.width,height:t.height,resolution:o}),s=`cacheAsBitmap_${vH()}`;this._cacheData.textureCacheId=s,jH.addToCache(i.baseTexture,s),oW.addToCache(i,s);const l=RX;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:i,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=a,e._projTransform=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const c=new PX(i);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-t.x/t.width,c.anchor.y=-t.y/t.height,c.alpha=n,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)},CX.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},CX.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},CX.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,jH.removeFromCache(this._cacheData.textureCacheId),oW.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},CX.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},CX.prototype.name=null,IX.prototype.getChildByName=function(e,t){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===e)return this.children[t];if(t)for(let t=0,n=this.children.length;t<n;t++){const n=this.children[t];if(!n.getChildByName)continue;const a=n.getChildByName(e,!0);if(a)return a}return null},CX.prototype.getGlobalPosition=function(e=new aY,t=!1){return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};const OX={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},LX=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class FX extends YY{constructor(e,t=8,n=4,a=YY.defaultResolution,r=5){const o=function(e,t){const n=Math.ceil(e/2);let a,r="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";a=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let t=0;t<e;t++){let e=a.replace("%index%",t.toString());e=e.replace("%sampleIndex%",t-(n-1)+".0"),o+=e,o+="\n"}return r=r.replace("%blur%",o),r=r.replace("%size%",e.toString()),r}(r,e),i=function(e){const t=OX[e],n=t.length;let a,r=LX,o="";for(let r=0;r<e;r++){let i="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",r.toString());a=r,r>=n&&(a=e-r-1),i=i.replace("%value%",t[a].toString()),o+=i,o+="\n"}return r=r.replace("%blur%",o),r=r.replace("%size%",e.toString()),r}(r);super(o,i),this.horizontal=e,this.resolution=a,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,a){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,a);else{const r=e.getFilterTexture(),o=e.renderer;let i=t,s=r;this.state.blend=!1,e.applyFilter(this,i,s,Kq.CLEAR);for(let t=1;t<this.passes-1;t++){e.bindAndClear(i,Kq.BLIT),this.uniforms.uSampler=s;const t=s;s=i,i=t,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,s,n,a),e.returnFilterTexture(r)}}get blur(){return this.strength}set blur(e){this.padding=1+2*Math.abs(e),this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class jX extends YY{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(mX,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){const[n,a,r]=sH.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,a,0,0,0,0,0,r,0,0,0,0,0,1,0];this._loadMatrix(o,t)}greyscale(e,t){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const n=Math.cos(e),a=Math.sin(e),r=1/3,o=(0,Math.sqrt)(r),i=[n+(1-n)*r,r*(1-n)-o*a,r*(1-n)+o*a,0,0,r*(1-n)+o*a,n+r*(1-n),r*(1-n)-o*a,0,0,r*(1-n)-o*a,r*(1-n)+o*a,n+r*(1-n),0,0,0,0,0,1,0];this._loadMatrix(i,t)}contrast(e,t){const n=(e||0)+1,a=-.5*(n-1),r=[n,0,0,0,a,0,n,0,0,a,0,0,n,0,a,0,0,0,1,0];this._loadMatrix(r,t)}saturate(e=0,t){const n=2*e/3+1,a=-.5*(n-1),r=[n,a,a,0,0,a,n,a,0,0,a,a,n,0,0,0,0,0,1,0];this._loadMatrix(r,t)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,n,a,r){e=e||.2,t=t||.15,n=n||16770432,a=a||3375104;const o=sH.shared,[i,s,l]=o.setValue(n).toArray(),[c,d,u]=o.setValue(a).toArray(),m=[.3,.59,.11,0,0,i,s,l,e,0,c,d,u,t,0,i-c,s-d,l-u,0,0];this._loadMatrix(m,r)}night(e,t){const n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}jX.prototype.grayscale=jX.prototype.greyscale;const UX={AlphaFilter:class extends YY{constructor(e=1){super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}},BlurFilter:class extends YY{constructor(e=8,t=4,n=YY.defaultResolution,a=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new FX(!0,e,t,n,a),this.blurYFilter=new FX(!1,e,t,n,a),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,a){const r=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(r&&o){const r=e.getFilterTexture();this.blurXFilter.apply(e,t,r,Kq.CLEAR),this.blurYFilter.apply(e,r,n,a),e.returnFilterTexture(r)}else o?this.blurYFilter.apply(e,t,n,a):this.blurXFilter.apply(e,t,n,a)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}},BlurFilterPass:FX,ColorMatrixFilter:jX,DisplacementFilter:class extends YY{constructor(e,t){const n=new dY;e.renderable=!1,super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,null==t&&(t=20),this.scale=new aY(t,t)}apply(e,t,n,a){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const r=this.maskSprite.worldTransform,o=Math.sqrt(r.a*r.a+r.b*r.b),i=Math.sqrt(r.c*r.c+r.d*r.d);0!==o&&0!==i&&(this.uniforms.rotation[0]=r.a/o,this.uniforms.rotation[1]=r.b/o,this.uniforms.rotation[2]=r.c/i,this.uniforms.rotation[3]=r.d/i),e.applyFilter(this,t,n,a)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}},FXAAFilter:class extends YY{constructor(){super("\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}},NoiseFilter:class extends YY{constructor(e=.5,t=Math.random()){super(mX,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}};Object.entries(UX).forEach(([e,t])=>{Object.defineProperty(UX,e,{get:()=>(VG("7.1.0",`filters.${e} has moved to ${e}`),t)})});const qX=new class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(cX.system.add(this.tickerUpdate,this,iX.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(cX.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove)return void(this._didMove=!1);const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}};class GX{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=GX.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new aY,this.page=new aY,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,a,r){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class HX extends GX{constructor(){super(...arguments),this.client=new aY,this.movement=new aY,this.offset=new aY,this.global=new aY,this.screen=new aY}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,a,r,o,i,s,l,c,d,u,m,p,f){throw new Error("Method not implemented.")}}class YX extends HX{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class WX extends HX{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}WX.DOM_DELTA_PIXEL=0,WX.DOM_DELTA_LINE=1,WX.DOM_DELTA_PAGE=2;const XX=new aY,JX=new aY;class KX{constructor(e){this.dispatch=new EG,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((e,t)=>e.priority-t.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let n=0,a=t.length;n<a;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){qX.pauseUpdate=!0;const n=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,XX.set(e,t),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(e,t){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let a=0,r=n.length-1;a<r;a++)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let a=n.length-2;a>=0;a--)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(0===n.length)return;e.eventPhase=e.BUBBLING_PHASE;const a=Array.isArray(t)?t:[t];for(let t=n.length-1;t>=0;t--)a.forEach(a=>{e.currentTarget=n[t],this.notifyTarget(e,a)})}propagationPath(e){const t=[e];for(let n=0;n<2048&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,a,r,o=!1){let i=!1;if(this._interactivePrune(e))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(qX.pauseUpdate=!1),e.interactiveChildren&&e.children){const s=e.children;for(let l=s.length-1;l>=0;l--){const c=s[l],d=this.hitTestMoveRecursive(c,this._isInteractive(t)?t:c.eventMode,n,a,r,o||r(e,n));if(d){if(d.length>0&&!d[d.length-1].parent)continue;const t=e.isInteractive();(d.length>0||t)&&(t&&this._allInteractiveElements.push(e),d.push(e)),0===this._hitElements.length&&(this._hitElements=d),i=!0}}}const s=this._isInteractive(t),l=e.isInteractive();return s&&l&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:i?this._hitElements:s&&!r(e,n)&&a(e,n)?l?[e]:[]:null}hitTestRecursive(e,t,n,a,r){if(this._interactivePrune(e)||r(e,n))return null;if(("dynamic"===e.eventMode||"dynamic"===t)&&(qX.pauseUpdate=!1),e.interactiveChildren&&e.children){const o=e.children;for(let i=o.length-1;i>=0;i--){const s=o[i],l=this.hitTestRecursive(s,this._isInteractive(t)?t:s.eventMode,n,a,r);if(l){if(l.length>0&&!l[l.length-1].parent)continue;const t=e.isInteractive();return(l.length>0||t)&&l.push(e),l}}}const o=this._isInteractive(t),i=e.isInteractive();return o&&a(e,n)?i?[e]:[]:null}_isInteractive(e){return"static"===e||"dynamic"===e}_interactivePrune(e){return!(e&&!e.isMask&&e.visible&&e.renderable&&"none"!==e.eventMode&&("passive"!==e.eventMode||e.interactiveChildren)&&!e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,JX),!e.hitArea.contains(JX.x,JX.y)))return!0;if(e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!n.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(t))}notifyTarget(e,t){const n=`on${t=t??e.type}`;e.currentTarget[n]?.(e);const a=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,a),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof YX))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){const e=2===t.button;this.dispatchEvent(t,e?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof YX))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n="mouse"===t.pointerType||"pen"===t.pointerType,a=this.trackingData(e.pointerId),r=this.findMountedTarget(a.overTargets);if(a.overTargets?.length>0&&r!==t.target){const a="mousemove"===e.type?"mouseout":"pointerout",o=this.createPointerEvent(e,a,r);if(this.dispatchEvent(o,"pointerout"),n&&this.dispatchEvent(o,"mouseout"),!t.composedPath().includes(r)){const a=this.createPointerEvent(e,"pointerleave",r);for(a.eventPhase=a.AT_TARGET;a.target&&!t.composedPath().includes(a.target);)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;this.freeEvent(a)}this.freeEvent(o)}if(r!==t.target){const a="mousemove"===e.type?"mouseover":"pointerover",o=this.clonePointerEvent(t,a);this.dispatchEvent(o,"pointerover"),n&&this.dispatchEvent(o,"mouseover");let i=r?.parent;for(;i&&i!==this.rootTarget.parent&&i!==t.target;)i=i.parent;if(!i||i===this.rootTarget.parent){const e=this.clonePointerEvent(t,"pointerenter");for(e.eventPhase=e.AT_TARGET;e.target&&e.target!==r&&e.target!==this.rootTarget.parent;)e.currentTarget=e.target,this.notifyTarget(e),n&&this.notifyTarget(e,"mouseenter"),e.target=e.target.parent;this.freeEvent(e)}this.freeEvent(o)}const o=[],i=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(t,"pointermove"),i&&o.push("globalpointermove"),"touch"===t.pointerType&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),i&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),i&&o.push("globalmousemove"),this.cursor=t.target?.cursor),o.length>0&&this.all(t,o),this._allInteractiveElements.length=0,this._hitElements.length=0,a.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof YX))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),a="mouse"===n.pointerType||"pen"===n.pointerType;this.dispatchEvent(n,"pointerover"),a&&this.dispatchEvent(n,"mouseover"),"mouse"===n.pointerType&&(this.cursor=n.target?.cursor);const r=this.clonePointerEvent(n,"pointerenter");for(r.eventPhase=r.AT_TARGET;r.target&&r.target!==this.rootTarget.parent;)r.currentTarget=r.target,this.notifyTarget(r),a&&this.notifyTarget(r,"mouseenter"),r.target=r.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(r)}mapPointerOut(e){if(!(e instanceof YX))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const n="mouse"===e.pointerType||"pen"===e.pointerType,a=this.findMountedTarget(t.overTargets),r=this.createPointerEvent(e,"pointerout",a);this.dispatchEvent(r),n&&this.dispatchEvent(r,"mouseout");const o=this.createPointerEvent(e,"pointerleave",a);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(r),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof YX))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)this.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){const e=2===n.button;this.dispatchEvent(n,e?"rightup":"mouseup")}const a=this.trackingData(e.pointerId),r=this.findMountedTarget(a.pressTargetsByButton[e.button]);let o=r;if(r&&!n.composedPath().includes(r)){let t=r;for(;t&&!n.composedPath().includes(t);){if(n.currentTarget=t,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)this.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){const e=2===n.button;this.notifyTarget(n,e?"rightupoutside":"mouseupoutside")}t=t.parent}delete a.pressTargetsByButton[e.button],o=t}if(o){const r=this.clonePointerEvent(n,"click");r.target=o,r.path=null,a.clicksByButton[e.button]||(a.clicksByButton[e.button]={clickCount:0,target:r.target,timeStamp:t});const i=a.clicksByButton[e.button];if(i.target===r.target&&t-i.timeStamp<200?++i.clickCount:i.clickCount=1,i.target=r.target,i.timeStamp=t,r.detail=i.clickCount,"mouse"===r.pointerType){const e=2===r.button;this.dispatchEvent(r,e?"rightclick":"click")}else"touch"===r.pointerType&&this.dispatchEvent(r,"tap");this.dispatchEvent(r,"pointertap"),this.freeEvent(r)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof YX))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),a=this.createPointerEvent(e);if(n){let r=n;for(;r;)a.currentTarget=r,this.notifyTarget(a,"pointerupoutside"),"touch"===a.pointerType?this.notifyTarget(a,"touchendoutside"):("mouse"===a.pointerType||"pen"===a.pointerType)&&this.notifyTarget(a,2===a.button?"rightupoutside":"mouseupoutside"),r=r.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(a)}mapWheel(e){if(!(e instanceof WX))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){const a=this.allocateEvent(YX);return this.copyPointerData(e,a),this.copyMouseData(e,a),this.copyData(e,a),a.nativeEvent=e.nativeEvent,a.originalEvent=e,a.target=n??this.hitTest(a.global.x,a.global.y)??this._hitElements[0],"string"==typeof t&&(a.type=t),a}createWheelEvent(e){const t=this.allocateEvent(WX);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const n=this.allocateEvent(YX);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof YX&&t instanceof YX&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof HX&&t instanceof HX&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let a=0,r=n.length;a<r&&!e.propagationImmediatelyStopped;a++)n[a].once&&e.currentTarget.removeListener(t,n[a].fn,void 0,!0),n[a].fn.call(n[a].context,e)}}const QX={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ZX=class e{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new KX(null),qX.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new YX(null),this.rootWheelEvent=new WX(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...e.defaultEventFeatures},{set:(e,t,n)=>("globalMove"===t&&(this.rootBoundary.enableGlobalMoveEvents=n),e[t]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:n,resolution:a}=this.renderer;this.setTargetElement(n),this.resolution=a,e._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let e=0,n=t.length;e<n;e++){const n=t[e],a=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,qX.pointerMoved();const t=this.normalizeToPointerData(e);for(let e=0,n=t.length;e<n;e++){const n=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const n=t!==this.domElement?"outside":"",a=this.normalizeToPointerData(e);for(let e=0,t=a.length;e<t;e++){const t=this.bootstrapEvent(this.rootPointerEvent,a[e]);t.type+=n,this.rootBoundary.mapEvent(t)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const t=this.normalizeToPointerData(e);for(let e=0,n=t.length;e<n;e++){const n=this.bootstrapEvent(this.rootPointerEvent,t[e]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,qX.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;qX.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;qX.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){const a=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},r=1/this.resolution;e.x=(t-a.left)*(this.domElement.width/a.width)*r,e.y=(n-a.top)*(this.domElement.height/a.height)*r}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,a=e.changedTouches.length;n<a;n++){const a=e.changedTouches[n];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=e.type,t.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=1),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=QX[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};ZX.extension={name:"events",type:[_H.RendererSystem,_H.CanvasRendererSystem]},ZX.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let eJ=ZX;function tJ(e){return"dynamic"===e||"static"===e}DH.add(eJ);const nJ={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??tJ(eJ.defaultEventMode)},set interactive(e){VG("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??eJ.defaultEventMode},set eventMode(e){this._internalInteractive=tJ(e),this._internalEventMode=e},isInteractive(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener(e,t,n){const a="boolean"==typeof n&&n||"object"==typeof n&&n.capture,r="object"==typeof n?n.signal:void 0,o="object"==typeof n&&!0===n.once,i="function"==typeof t?void 0:t;e=a?`${e}capture`:e;const s="function"==typeof t?t:t.handleEvent,l=this;r&&r.addEventListener("abort",()=>{l.off(e,s,i)}),o?l.once(e,s,i):l.on(e,s,i)},removeEventListener(e,t,n){const a="function"==typeof t?void 0:t;e="boolean"==typeof n&&n||"object"==typeof n&&n.capture?`${e}capture`:e,t="function"==typeof t?t:t.handleEvent,this.off(e,t,a)},dispatchEvent(e){if(!(e instanceof GX))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};CX.mixin(nJ),CX.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class aJ{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(wG.tablet||wG.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let e=0;e<t.length;e++)this.updateAccessibleObjects(t[e])}update(){const e=performance.now();if(wG.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:n,width:a,height:r}=this.renderer.view.getBoundingClientRect(),{width:o,height:i,resolution:s}=this.renderer,l=a/o*s,c=r/i*s;let d=this.div;d.style.left=`${t}px`,d.style.top=`${n}px`,d.style.width=`${o}px`,d.style.height=`${i}px`;for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.renderId!==this.renderId)t._accessibleActive=!1,fH(this.children,e,1),this.div.removeChild(t._accessibleDiv),this.pool.push(t._accessibleDiv),t._accessibleDiv=null,e--;else{d=t._accessibleDiv;let e=t.hitArea;const n=t.worldTransform;t.hitArea?(d.style.left=(n.tx+e.x*n.a)*l+"px",d.style.top=(n.ty+e.y*n.d)*c+"px",d.style.width=e.width*n.a*l+"px",d.style.height=e.height*n.d*c+"px"):(e=t.getBounds(),this.capHitArea(e),d.style.left=e.x*l+"px",d.style.top=e.y*c+"px",d.style.width=e.width*l+"px",d.style.height=e.height*c+"px",d.title!==t.accessibleTitle&&null!==t.accessibleTitle&&(d.title=t.accessibleTitle),d.getAttribute("aria-label")!==t.accessibleHint&&null!==t.accessibleHint&&d.setAttribute("aria-label",t.accessibleHint)),(t.accessibleTitle!==d.title||t.tabIndex!==d.tabIndex)&&(d.title=t.accessibleTitle,d.tabIndex=t.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:n}=e.target,a=this.renderer.events.rootBoundary,r=Object.assign(new GX(a),{target:n});a.rootTarget=this.renderer.lastObjectRendered,t.forEach(e=>a.dispatchEvent(r,e))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}aJ.extension={name:"accessibility",type:[_H.RendererPlugin,_H.CanvasRendererPlugin]},DH.add(aJ);const rJ=class e{constructor(t){this.stage=new IX,t=Object.assign({forceCanvas:!1},t),this.renderer=function(e){for(const t of uX)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}(t),e._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(t,n){const a=e._plugins.slice(0);a.reverse(),a.forEach(e=>{e.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}};rJ._plugins=[];let oJ=rJ;DH.handleByList(_H.Application,oJ._plugins);class iJ{static init(e){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let e,t;if(this.cancelResize(),this._resizeTo===globalThis.window)e=globalThis.innerWidth,t=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:a}=this._resizeTo;e=n,t=a}this.renderer.resize(e,t),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}iJ.extension=_H.Application,DH.add(iJ);const sJ={loader:_H.LoadParser,resolver:_H.ResolveParser,cache:_H.CacheParser,detection:_H.DetectionParser};DH.handle(_H.Asset,e=>{const t=e.ref;Object.entries(sJ).filter(([e])=>!!t[e]).forEach(([e,n])=>DH.add(Object.assign(t[e],{extension:t[e].extension??n})))},e=>{const t=e.ref;Object.keys(sJ).filter(e=>!!t[e]).forEach(e=>DH.remove(t[e]))});class lJ{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function cJ(e,t){const n=e.split("?")[0],a=AG.extname(n).toLowerCase();return Array.isArray(t)?t.includes(a):a===t}const dJ=(e,t,n=!1)=>(Array.isArray(e)||(e=[e]),t?e.map(e=>"string"==typeof e||n?t(e):e):e),uJ=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const n=dJ(e);let a;for(let e=0;e<this.parsers.length;e++){const r=this.parsers[e];if(r.test(t)){a=r.getCacheableAssets(n,t);break}}a||(a={},n.forEach(e=>{a[e]=t}));const r=Object.keys(a),o={cacheKeys:r,keys:n};if(n.forEach(e=>{this._cacheMap.set(e,o)}),r.forEach(e=>{const n=a?a[e]:t;this._cache.has(e)&&this._cache.get(e)!==n&&console.warn("[Cache] already has key:",e),this._cache.set(e,a[e])}),t instanceof oW){const e=t;n.forEach(t=>{e.baseTexture!==oW.EMPTY.baseTexture&&jH.addToCache(e.baseTexture,t),oW.addToCache(e,t)})}}remove(e){if(!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const t=this._cacheMap.get(e);t.cacheKeys.forEach(e=>{this._cache.delete(e)}),t.keys.forEach(e=>{this._cacheMap.delete(e)})}get parsers(){return this._parsers}},mJ=e=>!Array.isArray(e);class pJ{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){const n={promise:null,parser:null};return n.promise=(async()=>{let a=null,r=null;if(t.loadParser&&(r=this._parserHash[t.loadParser],r||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!r){for(let n=0;n<this.parsers.length;n++){const a=this.parsers[n];if(a.load&&a.test?.(e,t,this)){r=a;break}}if(!r)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}a=await r.load(e,t,this),n.parser=r;for(let e=0;e<this.parsers.length;e++){const r=this.parsers[e];r.parse&&r.parse&&await(r.testParse?.(a,t,this))&&(a=await r.parse(a,t,this)||a,n.parser=r)}return a})(),n}async load(e,t){this._parsersValidated||this._validateParsers();let n=0;const a={},r=mJ(e),o=dJ(e,e=>({alias:[e],src:e})),i=o.length,s=o.map(async e=>{const r=AG.toAbsolute(e.src);if(!a[e.src])try{this.promiseCache[r]||(this.promiseCache[r]=this._getLoadPromiseAndParser(r,e)),a[e.src]=await this.promiseCache[r].promise,t&&t(++n/i)}catch(t){throw delete this.promiseCache[r],delete a[e.src],new Error(`[Loader.load] Failed to load ${r}.\n${t}`)}});return await Promise.all(s),r?a[o[0].src]:a}async unload(e){const t=dJ(e,e=>({alias:[e],src:e})).map(async e=>{const t=AG.toAbsolute(e.src),n=this.promiseCache[t];if(n){const a=await n.promise;delete this.promiseCache[t],n.parser?.unload?.(a,e,this)}});await Promise.all(t)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),{...e,[t.name]:t}),{})}}var fJ=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(fJ||{});function gJ(e,t){if(Array.isArray(t)){for(const n of t)if(e.startsWith(`data:${n}`))return!0;return!1}return e.startsWith(`data:${t}`)}const hJ={extension:{type:_H.LoadParser,priority:fJ.Low},name:"loadJson",test:e=>gJ(e,"application/json")||cJ(e,".json"),load:async e=>await(await rG.ADAPTER.fetch(e)).json()};DH.add(hJ);const vJ={name:"loadTxt",extension:{type:_H.LoadParser,priority:fJ.Low},test:e=>gJ(e,"text/plain")||cJ(e,".txt"),load:async e=>await(await rG.ADAPTER.fetch(e)).text()};DH.add(vJ);const bJ=["normal","bold","100","200","300","400","500","600","700","800","900"],yJ=[".ttf",".otf",".woff",".woff2"],xJ=["font/ttf","font/otf","font/woff","font/woff2"],kJ=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,wJ=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function EJ(e){return wJ.test(e)?e:encodeURI(e)}const NJ={extension:{type:_H.LoadParser,priority:fJ.Low},name:"loadWebFont",test:e=>gJ(e,xJ)||cJ(e,yJ),async load(e,t){const n=rG.ADAPTER.getFontFaceSet();if(n){const a=[],r=t.data?.family??function(e){const t=AG.extname(e),n=AG.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1));let a=n.length>0;for(const e of n)if(!e.match(kJ)){a=!1;break}let r=n.join(" ");return a||(r=`"${r.replace(/[\\"]/g,"\\$&")}"`),r}(e),o=t.data?.weights?.filter(e=>bJ.includes(e))??["normal"],i=t.data??{};for(let t=0;t<o.length;t++){const s=o[t],l=new FontFace(r,`url(${EJ(e)})`,{...i,weight:s});await l.load(),n.add(l),a.push(l)}return 1===a.length?a[0]:a}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(e=>rG.ADAPTER.getFontFaceSet().delete(e))}};DH.add(NJ);let SJ=null;class VJ{constructor(){SJ||(SJ=URL.createObjectURL(new Blob(['(function() {\n  "use strict";\n  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n  async function checkImageBitmap() {\n    try {\n      if (typeof createImageBitmap != "function")\n        return !1;\n      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);\n      return imageBitmap.width === 1 && imageBitmap.height === 1;\n    } catch {\n      return !1;\n    }\n  }\n  checkImageBitmap().then((result) => {\n    self.postMessage(result);\n  });\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(SJ)}}VJ.revokeObjectURL=function(){SJ&&(URL.revokeObjectURL(SJ),SJ=null)};let _J=null;class CJ{constructor(){_J||(_J=URL.createObjectURL(new Blob(['(function() {\n  "use strict";\n  async function loadImageBitmap(url) {\n    const response = await fetch(url);\n    if (!response.ok)\n      throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n    const imageBlob = await response.blob();\n    return await createImageBitmap(imageBlob);\n  }\n  self.onmessage = async (event) => {\n    try {\n      const imageBitmap = await loadImageBitmap(event.data.data[0]);\n      self.postMessage({\n        data: imageBitmap,\n        uuid: event.data.uuid,\n        id: event.data.id\n      }, [imageBitmap]);\n    } catch (e) {\n      self.postMessage({\n        error: e,\n        uuid: event.data.uuid,\n        id: event.data.id\n      });\n    }\n  };\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(_J)}}CJ.revokeObjectURL=function(){_J&&(URL.revokeObjectURL(_J),_J=null)};let AJ,DJ=0;const TJ=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const{worker:t}=new VJ;t.addEventListener("message",n=>{t.terminate(),VJ.revokeObjectURL(),e(n.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){void 0===AJ&&(AJ=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<AJ&&(this._createdWorkers++,e=(new CJ).worker,e.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,t){await this._initWorkers();const n=new Promise((n,a)=>{this.queue.push({id:e,arguments:t,resolve:n,reject:a})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),n=t.id;this.resolveHash[DJ]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:DJ++,id:n})}};function BJ(e,t,n){e.resource.internal=!0;const a=new oW(e),r=()=>{delete t.promiseCache[n],uJ.has(n)&&uJ.remove(n)};return a.baseTexture.once("destroyed",()=>{n in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),r())}),a.once("destroyed",()=>{e.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),r())}),a}const IJ=[".jpeg",".jpg",".png",".webp",".avif"],zJ=["image/jpeg","image/png","image/webp","image/avif"],MJ={name:"loadTextures",extension:{type:_H.LoadParser,priority:fJ.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:e=>gJ(e,zJ)||cJ(e,IJ),async load(e,t,n){const a=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let r;r=a?this.config.preferWorkers&&await TJ.isImageBitmapSupported()?await TJ.loadImageBitmap(e):await async function(e){const t=await rG.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const n=await t.blob();return await createImageBitmap(n)}(e):await new Promise((t,n)=>{const a=new Image;a.crossOrigin=this.config.crossOrigin,a.src=e,a.complete?t(a):(a.onload=()=>t(a),a.onerror=e=>n(e))});const o={...t.data};o.resolution??(o.resolution=VH(e)),a&&void 0===o.resourceOptions?.ownsImageBitmap&&(o.resourceOptions={...o.resourceOptions},o.resourceOptions.ownsImageBitmap=!0);const i=new jH(r,o);return i.resource.src=e,BJ(i,n,e)},unload(e){e.destroy(!0)}};DH.add(MJ);const PJ={extension:{type:_H.LoadParser,priority:fJ.High},name:"loadSVG",test:e=>gJ(e,"image/svg+xml")||cJ(e,".svg"),testParse:async e=>NX.test(e),async parse(e,t,n){const a=new NX(e,t?.data?.resourceOptions);await a.load();const r=new jH(a,{resolution:VH(e),...t?.data});return r.resource.src=t.src,BJ(r,n,t.src)},load:async(e,t)=>(await rG.ADAPTER.fetch(e)).text(),unload:MJ.unload};DH.add(PJ);const RJ=[".mp4",".m4v",".webm",".ogv"],$J=["video/mp4","video/webm","video/ogg"],OJ={name:"loadVideo",extension:{type:_H.LoadParser,priority:fJ.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test:e=>gJ(e,$J)||cJ(e,RJ),async load(e,t,n){let a;const r=await(await rG.ADAPTER.fetch(e)).blob(),o=URL.createObjectURL(r);try{const r={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...t?.data?.resourceOptions,autoLoad:!0},i=new VX(o,r);await i.load();const s=new jH(i,{alphaMode:await BG(),resolution:VH(e),...t?.data});s.resource.src=e,a=BJ(s,n,e),a.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(e){throw URL.revokeObjectURL(o),e}return a},unload(e){e.destroy(!0)}};function LJ(e,t,n,a,r){const o=t[n];for(let i=0;i<o.length;i++){const s=o[i];n<t.length-1?LJ(e.replace(a[n],s),t,n+1,a,r):r.push(e.replace(a[n],s))}}function FJ(e){const t=e.match(/\{(.*?)\}/g),n=[];if(t){const a=[];t.forEach(e=>{const t=e.substring(1,e.length-1).split(",");a.push(t)}),LJ(e,a,0,t,n)}else n.push(e);return n}DH.add(OJ);class jJ{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if("string"==typeof e)this._defaultSearchParams=e;else{const t=e;this._defaultSearchParams=Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}}getAlias(e){const{alias:t,name:n,src:a,srcs:r}=e;return dJ(t||n||a||r,e=>"string"==typeof e?e:Array.isArray(e)?e.map(e=>e?.src??e?.srcs??e):e?.src||e?.srcs?e.src??e.srcs:e,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(e,t){const n=[];Array.isArray(t)?t.forEach(t=>{const a=t.src??t.srcs,r=t.alias??t.name;let o;if("string"==typeof r){const t=this._createBundleAssetId(e,r);n.push(t),o=[r,t]}else{const t=r.map(t=>this._createBundleAssetId(e,t));n.push(...t),o=[...r,...t]}this.add({...t,alias:o,src:a})}):Object.keys(t).forEach(a=>{const r=[a,this._createBundleAssetId(e,a)];if("string"==typeof t[a])this.add({alias:r,src:t[a]});else if(Array.isArray(t[a]))this.add({alias:r,src:t[a]});else{const e=t[a],n=e.src??e.srcs;this.add({...e,alias:r,src:Array.isArray(n)?n:[n]})}n.push(...r)}),this._bundles[e]=n}add(e,t,n,a,r){const o=[];let i;"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]?(VG("7.2.0","Assets.add now uses an object instead of individual parameters.\nPlease use Assets.add({ alias, src, data, format, loadParser }) instead."),o.push({alias:e,src:t,data:n,format:a,loadParser:r})):Array.isArray(e)?o.push(...e):o.push(e),i=e=>{this.hasKey(e)&&console.warn(`[Resolver] already has key: ${e} overwriting`)},dJ(o).forEach(e=>{const{src:t,srcs:n}=e;let{data:a,format:r,loadParser:o}=e;const s=dJ(t||n).map(e=>"string"==typeof e?FJ(e):Array.isArray(e)?e:[e]),l=this.getAlias(e);Array.isArray(l)?l.forEach(i):i(l);const c=[];s.forEach(e=>{e.forEach(e=>{let t={};if("object"!=typeof e){t.src=e;for(let n=0;n<this._parsers.length;n++){const a=this._parsers[n];if(a.test(e)){t=a.parse(e);break}}}else a=e.data??a,r=e.format??r,o=e.loadParser??o,t={...t,...e};if(!l)throw new Error(`[Resolver] alias is undefined for this asset: ${t.src}`);t=this.buildResolvedAsset(t,{aliases:l,data:a,format:r,loadParser:o}),c.push(t)})}),l.forEach(e=>{this._assetMap[e]=c})})}resolveBundle(e){const t=mJ(e);e=dJ(e);const n={};return e.forEach(e=>{const t=this._bundles[e];if(t){const a=this.resolve(t),r={};for(const t in a){const n=a[t];r[this._extractAssetIdFromBundle(e,t)]=n}n[e]=r}}),t?n[e[0]]:n}resolveUrl(e){const t=this.resolve(e);if("string"!=typeof e){const e={};for(const n in t)e[n]=t[n].src;return e}return t.src}resolve(e){const t=mJ(e);e=dJ(e);const n={};return e.forEach(e=>{if(!this._resolverHash[e])if(this._assetMap[e]){let t=this._assetMap[e];const n=t[0],a=this._getPreferredOrder(t);a?.priority.forEach(e=>{a.params[e].forEach(n=>{const a=t.filter(t=>!!t[e]&&t[e]===n);a.length&&(t=a)})}),this._resolverHash[e]=t[0]??n}else this._resolverHash[e]=this.buildResolvedAsset({alias:[e],src:e},{});n[e]=this._resolverHash[e]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const t=e[0],n=this._preferredOrder.find(e=>e.params.format.includes(t.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(e){return this._defaultSearchParams?`${e}${/\?/.test(e)?"&":"?"}${this._defaultSearchParams}`:e}buildResolvedAsset(e,t){const{aliases:n,data:a,loadParser:r,format:o}=t;return(this._basePath||this._rootPath)&&(e.src=AG.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...a||{},...e.data},e.loadParser=r??e.loadParser,e.format=o??e.format??AG.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}const UJ=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new jJ,this.loader=new pJ,this.cache=uJ,this._backgroundLoader=new lJ(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){if(this._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let t=e.manifest;"string"==typeof t&&(t=await this.load(t)),this.resolver.addManifest(t)}const t=e.texturePreference?.resolution??1,n="number"==typeof t?[t]:t,a=await this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:a,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,t,n,a,r){this.resolver.add(e,t,n,a,r)}async load(e,t){this._initialized||await this.init();const n=mJ(e),a=dJ(e).map(e=>{if("string"!=typeof e){const t=this.resolver.getAlias(e);return t.some(e=>!this.resolver.hasKey(e))&&this.add(e),Array.isArray(t)?t[0]:t}return this.resolver.hasKey(e)||this.add({alias:e,src:e}),e}),r=this.resolver.resolve(a),o=await this._mapLoadToResolve(r,t);return n?o[a[0]]:o}addBundle(e,t){this.resolver.addBundle(e,t)}async loadBundle(e,t){this._initialized||await this.init();let n=!1;"string"==typeof e&&(n=!0,e=[e]);const a=this.resolver.resolveBundle(e),r={},o=Object.keys(a);let i=0,s=0;const l=()=>{t?.(++i/s)},c=o.map(e=>{const t=a[e];return s+=Object.keys(t).length,this._mapLoadToResolve(t,l).then(t=>{r[e]=t})});return await Promise.all(c),n?r[e[0]]:r}async backgroundLoad(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))}async backgroundLoadBundle(e){this._initialized||await this.init(),"string"==typeof e&&(e=[e]);const t=this.resolver.resolveBundle(e);Object.values(t).forEach(e=>{this._backgroundLoader.add(Object.values(e))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return uJ.get(e);const t={};for(let n=0;n<e.length;n++)t[n]=uJ.get(e[n]);return t}async _mapLoadToResolve(e,t){const n=Object.values(e),a=Object.keys(e);this._backgroundLoader.active=!1;const r=await this.loader.load(n,t);this._backgroundLoader.active=!0;const o={};return n.forEach((e,t)=>{const n=r[e.src],i=[e.src];e.alias&&i.push(...e.alias),o[a[t]]=n,uJ.set(i,n)}),o}async unload(e){this._initialized||await this.init();const t=dJ(e).map(e=>"string"!=typeof e?e.src:e),n=this.resolver.resolve(t);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=dJ(e);const t=this.resolver.resolveBundle(e),n=Object.keys(t).map(e=>this._unloadFromResolved(t[e]));await Promise.all(n)}async _unloadFromResolved(e){const t=Object.values(e);t.forEach(e=>{uJ.remove(e.src)}),await this.loader.unload(t)}async _detectFormats(e){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?t=await n.add(t):e.skipDetections||(t=await n.remove(t));return t=t.filter((e,n)=>t.indexOf(e)===n),t}get detections(){return this._detections}get preferWorkers(){return MJ.config.preferWorkers}set preferWorkers(e){VG("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(t=>t in e).forEach(n=>{t.config[n]=e[n]})})}};DH.handleByList(_H.LoadParser,UJ.loader.parsers).handleByList(_H.ResolveParser,UJ.resolver.parsers).handleByList(_H.CacheParser,UJ.cache.parsers).handleByList(_H.DetectionParser,UJ.detections);const qJ={extension:_H.CacheParser,test:e=>Array.isArray(e)&&e.every(e=>e instanceof oW),getCacheableAssets:(e,t)=>{const n={};return e.forEach(e=>{t.forEach((t,a)=>{n[e+(0===a?"":a+1)]=t})}),n}};async function GJ(e){if("Image"in globalThis)return new Promise(t=>{const n=new Image;n.onload=()=>{t(!0)},n.onerror=()=>{t(!1)},n.src=e});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(e)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}DH.add(qJ);const HJ={extension:{type:_H.DetectionParser,priority:1},test:async()=>GJ("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async e=>[...e,"avif"],remove:async e=>e.filter(e=>"avif"!==e)};DH.add(HJ);const YJ={extension:{type:_H.DetectionParser,priority:0},test:async()=>GJ("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async e=>[...e,"webp"],remove:async e=>e.filter(e=>"webp"!==e)};DH.add(YJ);const WJ=["png","jpg","jpeg"],XJ={extension:{type:_H.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...WJ],remove:async e=>e.filter(e=>!WJ.includes(e))};DH.add(XJ);const JJ="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function KJ(e){return!JJ&&""!==document.createElement("video").canPlayType(e)}const QJ={extension:{type:_H.DetectionParser,priority:0},test:async()=>KJ("video/webm"),add:async e=>[...e,"webm"],remove:async e=>e.filter(e=>"webm"!==e)};DH.add(QJ);const ZJ={extension:{type:_H.DetectionParser,priority:0},test:async()=>KJ("video/mp4"),add:async e=>[...e,"mp4","m4v"],remove:async e=>e.filter(e=>"mp4"!==e&&"m4v"!==e)};DH.add(ZJ);const eK={extension:{type:_H.DetectionParser,priority:0},test:async()=>KJ("video/ogg"),add:async e=>[...e,"ogv"],remove:async e=>e.filter(e=>"ogv"!==e)};DH.add(eK);const tK={extension:_H.ResolveParser,test:MJ.test,parse:e=>({resolution:parseFloat(rG.RETINA_PREFIX.exec(e)?.[1]??"1"),format:AG.extname(e).slice(1),src:e})};DH.add(tK);const nK=(e,t)=>{const n=t.split("?")[1];return n&&(e+=`?${n}`),e};var aK=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e[e.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",e[e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",e[e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",e[e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",e))(aK||{});const rK={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let oK,iK;function sK(){iK={bptc:oK.getExtension("EXT_texture_compression_bptc"),astc:oK.getExtension("WEBGL_compressed_texture_astc"),etc:oK.getExtension("WEBGL_compressed_texture_etc"),s3tc:oK.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:oK.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:oK.getExtension("WEBGL_compressed_texture_pvrtc")||oK.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:oK.getExtension("WEBGL_compressed_texture_etc1"),atc:oK.getExtension("WEBGL_compressed_texture_atc")}}const lK={extension:{type:_H.DetectionParser,priority:2},test:async()=>{const e=rG.ADAPTER.createCanvas().getContext("webgl");return e?(oK=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{iK||sK();const t=[];for(const e in iK)iK[e]&&t.push(e);return[...t,...e]},remove:async e=>(iK||sK(),e.filter(e=>!(e in iK)))};DH.add(lK);class cK extends OH{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,a;"string"==typeof e?(n=e,a=new Uint8Array):(n=null,a=e),super(a,t),this.origin=n,this.buffer=a?new TH(a):null,this._load=null,this.loaded=!1,null!==this.origin&&!1!==t.autoLoad&&this.load(),null===this.origin&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load||(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new TH(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this))),this._load}}class dK extends cK{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=dK._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||dK._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){const a=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;a.pixelStorei(a.UNPACK_ALIGNMENT,4);for(let e=0,t=this.levels;e<t;e++){const{levelID:t,levelWidth:n,levelHeight:r,levelBuffer:o}=this._levelBuffers[e];a.compressedTexImage2D(a.TEXTURE_2D,t,this.format,n,r,0,o)}return!0}onBlobLoaded(){this._levelBuffers=dK._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(36196===e)return"etc1";if(35986===e||35987===e||34798===e)return"atc";if(e>=36492&&e<=36495)return"bptc";if(37808===e)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,n,a,r,o,i){const s=new Array(n);let l=e.byteOffset,c=o,d=i,u=c+a-1&~(a-1),m=d+r-1&~(r-1),p=u*m*rK[t];for(let o=0;o<n;o++)s[o]={levelID:o,levelWidth:n>1?c:u,levelHeight:n>1?d:m,levelBuffer:new Uint8Array(e.buffer,l,p)},l+=p,c=c>>1||1,d=d>>1||1,u=c+a-1&~(a-1),m=d+r-1&~(r-1),p=u*m*rK[t];return s}}const uK=827611204,mK=861165636,pK=894720068,fK={[uK]:aK.COMPRESSED_RGBA_S3TC_DXT1_EXT,[mK]:aK.COMPRESSED_RGBA_S3TC_DXT3_EXT,[pK]:aK.COMPRESSED_RGBA_S3TC_DXT5_EXT},gK={70:aK.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:aK.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:aK.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:aK.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:aK.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:aK.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:aK.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:aK.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:aK.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:aK.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:aK.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:aK.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:aK.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT},hK=[171,75,84,88,32,49,49,187,13,10,26,10],vK={[Gq.UNSIGNED_BYTE]:1,[Gq.UNSIGNED_SHORT]:2,[Gq.INT]:4,[Gq.UNSIGNED_INT]:4,[Gq.FLOAT]:4,[Gq.HALF_FLOAT]:8},bK={[Uq.RGBA]:4,[Uq.RGB]:3,[Uq.RG]:2,[Uq.RED]:1,[Uq.LUMINANCE]:1,[Uq.LUMINANCE_ALPHA]:2,[Uq.ALPHA]:1},yK={[Gq.UNSIGNED_SHORT_4_4_4_4]:2,[Gq.UNSIGNED_SHORT_5_5_5_1]:2,[Gq.UNSIGNED_SHORT_5_6_5]:2};function xK(e){switch(e){case Uq.RGBA:return Uq.RGBA_INTEGER;case Uq.RGB:return Uq.RGB_INTEGER;case Uq.RG:return Uq.RG_INTEGER;case Uq.RED:return Uq.RED_INTEGER;default:return e}}const kK={extension:{type:_H.LoadParser,priority:fJ.High},name:"loadDDS",test:e=>cJ(e,".dds"),async load(e,t,n){const a=function(e){const t=new Uint32Array(e);if(542327876!==t[0])throw new Error("Invalid DDS file magic word");const n=new Uint32Array(e,0,124/Uint32Array.BYTES_PER_ELEMENT),a=n[3],r=n[4],o=n[7],i=new Uint32Array(e,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),s=i[1];if(4&s){const n=i[2];if(808540228!==n){const t=fK[n],i=new Uint8Array(e,128);return[new dK(i,{format:t,width:r,height:a,levels:o})]}const s=128,l=new Uint32Array(t.buffer,s,20/Uint32Array.BYTES_PER_ELEMENT),c=l[0],d=l[1],u=l[2],m=l[3],p=gK[c];if(void 0===p)throw new Error(`DDSParser cannot parse texture data with DXGI format ${c}`);if(4===u)throw new Error("DDSParser does not support cubemap textures");if(6===d)throw new Error("DDSParser does not supported 3D texture data");const f=new Array,g=148;if(1===m)f.push(new Uint8Array(e,g));else{const t=rK[p];let n=0,i=r,s=a;for(let e=0;e<o;e++)n+=Math.max(1,i+3&-4)*Math.max(1,s+3&-4)*t,i>>>=1,s>>>=1;let l=g;for(let t=0;t<m;t++)f.push(new Uint8Array(e,l,n)),l+=n}return f.map(e=>new dK(e,{format:p,width:r,height:a,levels:o}))}throw 64&s?new Error("DDSParser does not support uncompressed texture data."):512&s?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&s?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&s?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(await(await rG.ADAPTER.fetch(e)).arrayBuffer()).map(a=>BJ(new jH(a,{mipmap:Xq.OFF,alphaMode:Jq.NO_PREMULTIPLIED_ALPHA,resolution:VH(e),...t.data}),n,e));return 1===a.length?a[0]:a},unload(e){Array.isArray(e)?e.forEach(e=>e.destroy(!0)):e.destroy(!0)}};DH.add(kK);const wK={extension:{type:_H.LoadParser,priority:fJ.High},name:"loadKTX",test:e=>cJ(e,".ktx"),async load(e,t,n){const a=await(await rG.ADAPTER.fetch(e)).arrayBuffer(),{compressed:r,uncompressed:o,kvData:i}=function(e,t,n=!1){const a=new DataView(t);if(!function(e,t){for(let n=0;n<hK.length;n++)if(t.getUint8(n)!==hK[n])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}(e,a))return null;const r=67305985===a.getUint32(12,!0),o=a.getUint32(16,r),i=a.getUint32(24,r),s=a.getUint32(28,r),l=a.getUint32(36,r),c=a.getUint32(40,r)||1,d=a.getUint32(44,r)||1,u=a.getUint32(48,r)||1,m=a.getUint32(52,r),p=a.getUint32(56,r),f=a.getUint32(60,r);if(0===c||1!==d)throw new Error("Only 2D textures are supported");if(1!==m)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==u)throw new Error("WebGL does not support array textures");const g=l+3&-4,h=c+3&-4,v=new Array(u);let b,y=l*c;if(0===o&&(y=g*h),b=0!==o?vK[o]?vK[o]*bK[i]:yK[o]:rK[s],void 0===b)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const x=n?function(e,t,n){const a=new Map;let r=0;for(;r<t;){const o=e.getUint32(64+r,n),i=64+r+4,s=3-(o+3)%4;if(0===o||o>t-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<o&&0!==e.getUint8(i+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=(new TextDecoder).decode(new Uint8Array(e.buffer,i,l)),d=new DataView(e.buffer,i+l+1,o-l-1);a.set(c,d),r+=4+o+s}return a}(a,f,r):null;let k=y*b,w=l,E=c,N=g,S=h,V=64+f;for(let e=0;e<p;e++){const n=a.getUint32(V,r);let i=V+4;for(let n=0;n<u;n++){let a=v[n];a||(a=v[n]=new Array(p)),a[e]={levelID:e,levelWidth:p>1||0!==o?w:N,levelHeight:p>1||0!==o?E:S,levelBuffer:new Uint8Array(t,i,k)},i+=k}V+=n+4,V=V%4!=0?V+4-V%4:V,w=w>>1||1,E=E>>1||1,N=w+4-1&-4,S=E+4-1&-4,k=N*S*b}return 0!==o?{uncompressed:v.map(e=>{let t=e[0].levelBuffer,n=!1;return o===Gq.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===Gq.UNSIGNED_INT?(n=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===Gq.INT&&(n=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new OH(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:n?xK(i):i}}),kvData:x}:{compressed:v.map(e=>new dK(null,{format:s,width:l,height:c,levels:p,levelBuffers:e})),kvData:x}}(e,a),s=r??o,l={mipmap:Xq.OFF,alphaMode:Jq.NO_PREMULTIPLIED_ALPHA,resolution:VH(e),...t.data},c=s.map(t=>{s===o&&Object.assign(l,{type:t.type,format:t.format});const a=t.resource??t,r=new jH(a,l);return r.ktxKeyValueData=i,BJ(r,n,e)});return 1===c.length?c[0]:c},unload(e){Array.isArray(e)?e.forEach(e=>e.destroy(!0)):e.destroy(!0)}};DH.add(wK);const EK=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],NK={extension:_H.ResolveParser,test:e=>{const t=AG.extname(e).slice(1);return["basis","ktx","dds"].includes(t)},parse:e=>{const t=e.split("."),n=t.pop();if(["ktx","dds"].includes(n)){const n=t.pop();if(EK.includes(n))return{resolution:parseFloat(rG.RETINA_PREFIX.exec(e)?.[1]??"1"),format:n,src:e}}return{resolution:parseFloat(rG.RETINA_PREFIX.exec(e)?.[1]??"1"),format:n,src:e}}};DH.add(NK);const SK=new oY,VK=class e{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){const e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,t,n,a){const r=new Image;return r.src=await this.base64(e,t,n,a),r}async base64(e,t,n,a){const r=this.canvas(e,a);if(void 0!==r.toBlob)return new Promise((e,a)=>{r.toBlob(t=>{if(!t)return void a(new Error("ICanvas.toBlob failed!"));const n=new FileReader;n.onload=()=>e(n.result),n.onerror=a,n.readAsDataURL(t)},t,n)});if(void 0!==r.toDataURL)return r.toDataURL(t,n);if(void 0!==r.convertToBlob){const e=await r.convertToBlob({type:t,quality:n});return new Promise((t,n)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=n,a.readAsDataURL(e)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,n){const{pixels:a,width:r,height:o,flipY:i,premultipliedAlpha:s}=this._rawPixels(t,n);i&&e._flipY(a,r,o),s&&e._unpremultiplyAlpha(a);const l=new EH(r,o,1),c=new ImageData(new Uint8ClampedArray(a.buffer),r,o);return l.context.putImageData(c,0,0),l.canvas}pixels(t,n){const{pixels:a,width:r,height:o,flipY:i,premultipliedAlpha:s}=this._rawPixels(t,n);return i&&e._flipY(a,r,o),s&&e._unpremultiplyAlpha(a),a}_rawPixels(e,t){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let a,r,o=!1,i=!1,s=!1;e&&(e instanceof iW?r=e:(r=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),s=!0,t&&(SK.width=t.width,SK.height=t.height,t=SK)));const l=n.gl;if(r){if(a=r.baseTexture.resolution,t=t??r.frame,o=!1,i=r.baseTexture.alphaMode>0&&r.baseTexture.format===Uq.RGBA,!s){n.renderTexture.bind(r);const e=r.framebuffer.glFramebuffers[n.CONTEXT_UID];e.blitFramebuffer&&n.framebuffer.bind(e.blitFramebuffer)}}else a=n.resolution,t||((t=SK).width=n.width/a,t.height=n.height/a),o=!0,i=this._rendererPremultipliedAlpha,n.renderTexture.bind();const c=Math.max(Math.round(t.width*a),1),d=Math.max(Math.round(t.height*a),1),u=new Uint8Array(4*c*d);return l.readPixels(Math.round(t.x*a),Math.round(t.y*a),c,d,l.RGBA,l.UNSIGNED_BYTE,u),s&&r?.destroy(!0),{pixels:u,width:c,height:d,flipY:o,premultipliedAlpha:i}}destroy(){this.renderer=null}static _flipY(e,t,n){const a=t<<2,r=n>>1,o=new Uint8Array(a);for(let t=0;t<r;t++){const r=t*a,i=(n-t-1)*a;o.set(e.subarray(r,r+a)),e.copyWithin(r,i,i+a),e.set(o,i)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const t=e.length;for(let n=0;n<t;n+=4){const t=e[n+3];if(0!==t){const a=255.001/t;e[n]=e[n]*a+.5,e[n+1]=e[n+1]*a+.5,e[n+2]=e[n+2]*a+.5}}}};VK.extension={name:"extract",type:_H.RendererSystem};let _K=VK;DH.add(_K);const CK={build(e){const t=e.points;let n,a,r,o,i,s;if(e.type===nY.CIRC){const t=e.shape;n=t.x,a=t.y,i=s=t.radius,r=o=0}else if(e.type===nY.ELIP){const t=e.shape;n=t.x,a=t.y,i=t.width,s=t.height,r=o=0}else{const t=e.shape,l=t.width/2,c=t.height/2;n=t.x+l,a=t.y+c,i=s=Math.max(0,Math.min(t.radius,Math.min(l,c))),r=l-i,o=c-s}if(!(i>=0&&s>=0&&r>=0&&o>=0))return void(t.length=0);const l=Math.ceil(2.3*Math.sqrt(i+s)),c=8*l+(r?4:0)+(o?4:0);if(t.length=c,0===c)return;if(0===l)return t.length=8,t[0]=t[6]=n+r,t[1]=t[3]=a+o,t[2]=t[4]=n-r,void(t[5]=t[7]=a-o);let d=0,u=4*l+(r?2:0)+2,m=u,p=c;{const e=r+i,s=o,l=n+e,c=n-e,f=a+s;if(t[d++]=l,t[d++]=f,t[--u]=f,t[--u]=c,o){const e=a-s;t[m++]=c,t[m++]=e,t[--p]=e,t[--p]=l}}for(let e=1;e<l;e++){const c=Math.PI/2*(e/l),f=r+Math.cos(c)*i,g=o+Math.sin(c)*s,h=n+f,v=n-f,b=a+g,y=a-g;t[d++]=h,t[d++]=b,t[--u]=b,t[--u]=v,t[m++]=v,t[m++]=y,t[--p]=y,t[--p]=h}{const e=o+s,i=n+r,l=n-r,c=a+e,u=a-e;t[d++]=i,t[d++]=c,t[--p]=u,t[--p]=i,r&&(t[d++]=l,t[d++]=c,t[--p]=u,t[--p]=l)}},triangulate(e,t){const n=e.points,a=t.points,r=t.indices;if(0===n.length)return;let o=a.length/2;const i=o;let s,l;if(e.type!==nY.RREC){const t=e.shape;s=t.x,l=t.y}else{const t=e.shape;s=t.x+t.width/2,l=t.y+t.height/2}const c=e.matrix;a.push(e.matrix?c.a*s+c.c*l+c.tx:s,e.matrix?c.b*s+c.d*l+c.ty:l),o++,a.push(n[0],n[1]);for(let e=2;e<n.length;e+=2)a.push(n[e],n[e+1]),r.push(o++,i,o);r.push(i+1,i,o)}};function AK(e,t=!1){const n=e.length;if(n<6)return;let a=0;for(let t=0,r=e[n-2],o=e[n-1];t<n;t+=2){const n=e[t],i=e[t+1];a+=(n-r)*(i+o),r=n,o=i}if(!t&&a>0||t&&a<=0){const t=n/2;for(let a=t+t%2;a<n;a+=2){const t=n-a-2,r=n-a-1,o=a,i=a+1;[e[t],e[o]]=[e[o],e[t]],[e[r],e[i]]=[e[i],e[r]]}}}const DK={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let n=e.points;const a=e.holes,r=t.points,o=t.indices;if(n.length>=6){AK(n,!1);const e=[];for(let t=0;t<a.length;t++){const r=a[t];AK(r.points,!0),e.push(n.length/2),n=n.concat(r.points)}const t=NG(n,e,2);if(!t)return;const i=r.length/2;for(let e=0;e<t.length;e+=3)o.push(t[e]+i),o.push(t[e+1]+i),o.push(t[e+2]+i);for(let e=0;e<n.length;e++)r.push(n[e])}}},TK={build(e){const t=e.shape,n=t.x,a=t.y,r=t.width,o=t.height,i=e.points;i.length=0,r>=0&&o>=0&&i.push(n,a,n+r,a,n+r,a+o,n,a+o)},triangulate(e,t){const n=e.points,a=t.points;if(0===n.length)return;const r=a.length/2;a.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},BK={build(e){CK.build(e)},triangulate(e,t){CK.triangulate(e,t)}};var IK=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(IK||{}),zK=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(zK||{});const MK={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class PK{static curveTo(e,t,n,a,r,o){const i=o[o.length-2],s=o[o.length-1]-t,l=i-e,c=a-t,d=n-e,u=Math.abs(s*d-l*c);if(u<1e-8||0===r)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const m=s*s+l*l,p=c*c+d*d,f=s*c+l*d,g=r*Math.sqrt(m)/u,h=r*Math.sqrt(p)/u,v=g*f/m,b=h*f/p,y=g*d+h*l,x=g*c+h*s,k=l*(h+v),w=s*(h+v),E=d*(g+b),N=c*(g+b);return{cx:y+e,cy:x+t,radius:r,startAngle:Math.atan2(w-x,k-y),endAngle:Math.atan2(N-x,E-y),anticlockwise:l*c>d*s}}static arc(e,t,n,a,r,o,i,s,l){const c=i-o,d=MK._segmentsCount(Math.abs(c)*r,40*Math.ceil(Math.abs(c)/ZH)),u=c/(2*d),m=2*u,p=Math.cos(u),f=Math.sin(u),g=d-1,h=g%1/g;for(let e=0;e<=g;++e){const t=u+o+m*(e+h*e),i=Math.cos(t),s=-Math.sin(t);l.push((p*i+f*s)*r+n,(p*-s+f*i)*r+a)}}}class RK{static curveLength(e,t,n,a,r,o,i,s){let l=0,c=0,d=0,u=0,m=0,p=0,f=0,g=0,h=0,v=0,b=0,y=e,x=t;for(let k=1;k<=10;++k)c=k/10,d=c*c,u=d*c,m=1-c,p=m*m,f=p*m,g=f*e+3*p*c*n+3*m*d*r+u*i,h=f*t+3*p*c*a+3*m*d*o+u*s,v=y-g,b=x-h,y=g,x=h,l+=Math.sqrt(v*v+b*b);return l}static curveTo(e,t,n,a,r,o,i){const s=i[i.length-2],l=i[i.length-1];i.length-=2;const c=MK._segmentsCount(RK.curveLength(s,l,e,t,n,a,r,o));let d=0,u=0,m=0,p=0,f=0;i.push(s,l);for(let g=1,h=0;g<=c;++g)h=g/c,d=1-h,u=d*d,m=u*d,p=h*h,f=p*h,i.push(m*s+3*u*h*e+3*d*p*n+f*r,m*l+3*u*h*t+3*d*p*a+f*o)}}function $K(e,t,n,a,r,o,i,s){let l,c;i?(l=a,c=-n):(l=-a,c=n);const d=e-n*r+l,u=t-a*r+c,m=e+n*o+l,p=t+a*o+c;return s.push(d,u,m,p),2}function OK(e,t,n,a,r,o,i,s){const l=n-e,c=a-t;let d=Math.atan2(l,c),u=Math.atan2(r-e,o-t);s&&d<u?d+=2*Math.PI:!s&&d>u&&(u+=2*Math.PI);let m=d;const p=u-d,f=Math.abs(p),g=Math.sqrt(l*l+c*c),h=1+(15*f*Math.sqrt(g)/Math.PI|0),v=p/h;if(m+=v,s){i.push(e,t,n,a);for(let n=1,a=m;n<h;n++,a+=v)i.push(e,t,e+Math.sin(a)*g,t+Math.cos(a)*g);i.push(e,t,r,o)}else{i.push(n,a,e,t);for(let n=1,a=m;n<h;n++,a+=v)i.push(e+Math.sin(a)*g,t+Math.cos(a)*g,e,t);i.push(r,o,e,t)}return 2*h}function LK(e,t){e.lineStyle.native?function(e,t){let n=0;const a=e.shape,r=e.points||a.points,o=a.type!==nY.POLY||a.closeStroke;if(0===r.length)return;const i=t.points,s=t.indices,l=r.length/2,c=i.length/2;let d=c;for(i.push(r[0],r[1]),n=1;n<l;n++)i.push(r[2*n],r[2*n+1]),s.push(d,d+1),d++;o&&s.push(d,c)}(e,t):function(e,t){const n=e.shape;let a=e.points||n.points.slice();const r=t.closePointEps;if(0===a.length)return;const o=e.lineStyle,i=new aY(a[0],a[1]),s=new aY(a[a.length-2],a[a.length-1]),l=n.type!==nY.POLY||n.closeStroke,c=Math.abs(i.x-s.x)<r&&Math.abs(i.y-s.y)<r;if(l){a=a.slice(),c&&(a.pop(),a.pop(),s.set(a[a.length-2],a[a.length-1]));const e=.5*(i.x+s.x),t=.5*(s.y+i.y);a.unshift(e,t),a.push(e,t)}const d=t.points,u=a.length/2;let m=a.length;const p=d.length/2,f=o.width/2,g=f*f,h=o.miterLimit*o.miterLimit;let v=a[0],b=a[1],y=a[2],x=a[3],k=0,w=0,E=-(b-x),N=v-y,S=0,V=0,_=Math.sqrt(E*E+N*N);E/=_,N/=_,E*=f,N*=f;const C=o.alignment,A=2*(1-C),D=2*C;l||(o.cap===zK.ROUND?m+=OK(v-E*(A-D)*.5,b-N*(A-D)*.5,v-E*A,b-N*A,v+E*D,b+N*D,d,!0)+2:o.cap===zK.SQUARE&&(m+=$K(v,b,E,N,A,D,!0,d))),d.push(v-E*A,b-N*A,v+E*D,b+N*D);for(let e=1;e<u-1;++e){v=a[2*(e-1)],b=a[2*(e-1)+1],y=a[2*e],x=a[2*e+1],k=a[2*(e+1)],w=a[2*(e+1)+1],E=-(b-x),N=v-y,_=Math.sqrt(E*E+N*N),E/=_,N/=_,E*=f,N*=f,S=-(x-w),V=y-k,_=Math.sqrt(S*S+V*V),S/=_,V/=_,S*=f,V*=f;const t=y-v,n=b-x,r=y-k,i=w-x,s=t*r+n*i,l=n*r-i*t,c=l<0;if(Math.abs(l)<.001*Math.abs(s)){d.push(y-E*A,x-N*A,y+E*D,x+N*D),s>=0&&(o.join===IK.ROUND?m+=OK(y,x,y-E*A,x-N*A,y-S*A,x-V*A,d,!1)+4:m+=2,d.push(y-S*D,x-V*D,y+S*A,x+V*A));continue}const u=(-E+v)*(-N+x)-(-E+y)*(-N+b),p=(-S+k)*(-V+x)-(-S+y)*(-V+w),C=(t*p-r*u)/l,T=(i*u-n*p)/l,B=(C-y)*(C-y)+(T-x)*(T-x),I=y+(C-y)*A,z=x+(T-x)*A,M=y-(C-y)*D,P=x-(T-x)*D,R=c?A:D,$=B<=Math.min(t*t+n*n,r*r+i*i)+R*R*g;let O=o.join;if(O===IK.MITER&&B/g>h&&(O=IK.BEVEL),$)switch(O){case IK.MITER:d.push(I,z,M,P);break;case IK.BEVEL:c?d.push(I,z,y+E*D,x+N*D,I,z,y+S*D,x+V*D):d.push(y-E*A,x-N*A,M,P,y-S*A,x-V*A,M,P),m+=2;break;case IK.ROUND:c?(d.push(I,z,y+E*D,x+N*D),m+=OK(y,x,y+E*D,x+N*D,y+S*D,x+V*D,d,!0)+4,d.push(I,z,y+S*D,x+V*D)):(d.push(y-E*A,x-N*A,M,P),m+=OK(y,x,y-E*A,x-N*A,y-S*A,x-V*A,d,!1)+4,d.push(y-S*A,x-V*A,M,P))}else{switch(d.push(y-E*A,x-N*A,y+E*D,x+N*D),O){case IK.MITER:c?d.push(M,P,M,P):d.push(I,z,I,z),m+=2;break;case IK.ROUND:m+=c?OK(y,x,y+E*D,x+N*D,y+S*D,x+V*D,d,!0)+2:OK(y,x,y-E*A,x-N*A,y-S*A,x-V*A,d,!1)+2}d.push(y-S*A,x-V*A,y+S*D,x+V*D),m+=2}}v=a[2*(u-2)],b=a[2*(u-2)+1],y=a[2*(u-1)],x=a[2*(u-1)+1],E=-(b-x),N=v-y,_=Math.sqrt(E*E+N*N),E/=_,N/=_,E*=f,N*=f,d.push(y-E*A,x-N*A,y+E*D,x+N*D),l||(o.cap===zK.ROUND?m+=OK(y-E*(A-D)*.5,x-N*(A-D)*.5,y-E*A,x-N*A,y+E*D,x+N*D,d,!1)+2:o.cap===zK.SQUARE&&(m+=$K(y,x,E,N,A,D,!1,d)));const T=t.indices,B=MK.epsilon*MK.epsilon;for(let e=p;e<m+p-2;++e)v=d[2*e],b=d[2*e+1],y=d[2*(e+1)],x=d[2*(e+1)+1],k=d[2*(e+2)],w=d[2*(e+2)+1],!(Math.abs(v*(x-w)+y*(w-b)+k*(b-x))<B)&&T.push(e,e+1,e+2)}(e,t)}class FK{static curveLength(e,t,n,a,r,o){const i=e-2*n+r,s=t-2*a+o,l=2*n-2*e,c=2*a-2*t,d=4*(i*i+s*s),u=4*(i*l+s*c),m=l*l+c*c,p=2*Math.sqrt(d+u+m),f=Math.sqrt(d),g=2*d*f,h=2*Math.sqrt(m),v=u/f;return(g*p+f*u*(p-h)+(4*m*d-u*u)*Math.log((2*f+v+p)/(v+h)))/(4*g)}static curveTo(e,t,n,a,r){const o=r[r.length-2],i=r[r.length-1],s=MK._segmentsCount(FK.curveLength(o,i,e,t,n,a));let l=0,c=0;for(let d=1;d<=s;++d){const u=d/s;l=o+(e-o)*u,c=i+(t-i)*u,r.push(l+(e+(n-e)*u-l)*u,c+(t+(a-t)*u-c)*u)}}}const jK={[nY.POLY]:DK,[nY.CIRC]:CK,[nY.ELIP]:CK,[nY.RECT]:TK,[nY.RREC]:BK},UK=[],qK=[];class GK{constructor(e,t=null,n=null,a=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=a,this.type=e.type}clone(){return new GK(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class HK{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const YK=new aY,WK=class e extends QH{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new _X,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),qK.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),UK.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,a=null){const r=new GK(e,t,n,a);return this.graphicsData.push(r),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const n=new GK(e,null,null,t),a=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=a.lineStyle,a.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let n=0;n<t.length;++n){const a=t[n];if(a.fillStyle.visible&&a.shape&&(a.matrix?a.matrix.applyInverse(e,YK):YK.copyFrom(e),a.shape.contains(YK.x,YK.y))){let e=!1;if(a.holes)for(let t=0;t<a.holes.length;t++)if(a.holes[t].shape.contains(YK.x,YK.y)){e=!0;break}if(!e)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let n=null,a=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],a=n.style);for(let r=this.shapeIndex;r<t.length;r++){this.shapeIndex++;const o=t[r],i=o.fillStyle,s=o.lineStyle;jK[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(i.visible||s.visible)&&this.processHoles(o.holes);for(let t=0;t<2;t++){const r=0===t?i:s;if(!r.visible)continue;const l=r.texture.baseTexture,c=this.indices.length,d=this.points.length/2;l.wrapMode=Wq.REPEAT,0===t?this.processFill(o):this.processLine(o);const u=this.points.length/2-d;0!==u&&(n&&!this._compareStyles(a,r)&&(n.end(c,d),n=null),n||(n=UK.pop()||new HK,n.begin(r,c,d),this.batches.push(n),a=r),this.addUvs(this.points,e,r.texture,d,u,r.matrix))}}const r=this.indices.length,o=this.points.length/2;if(n&&n.end(r,o),0===this.batches.length)return void(this.batchable=!0);const i=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&i===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=i?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const t=this.graphicsData[e],n=t.fillStyle,a=t.lineStyle;if(n&&!n.texture.baseTexture.valid||a&&!a.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,n=e.length;t<n;t++){const n=e[t];for(let e=0;e<n.size;e++){const t=n.start+e;this.indicesUint16[t]=this.indicesUint16[t]-n.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE}buildDrawCalls(){let e=++jH._globalBatch;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),qK.push(this.drawCalls[e]);this.drawCalls.length=0;const t=this.colors,n=this.textureIds;let a=qK.pop();a||(a=new UH,a.texArray=new jY),a.texArray.count=0,a.start=0,a.size=0,a.type=jq.TRIANGLES;let r=0,o=null,i=0,s=!1,l=jq.TRIANGLES,c=0;this.drawCalls.push(a);for(let d=0;d<this.batches.length;d++){const u=this.batches[d],m=8,p=u.style,f=p.texture.baseTexture;s!==!!p.native&&(s=!!p.native,l=s?jq.LINES:jq.TRIANGLES,o=null,r=m,e++),o!==f&&(o=f,f._batchEnabled!==e&&(r===m&&(e++,r=0,a.size>0&&(a=qK.pop(),a||(a=new UH,a.texArray=new jY),this.drawCalls.push(a)),a.start=c,a.size=0,a.texArray.count=0,a.type=l),f.touched=1,f._batchEnabled=e,f._batchLocation=r,f.wrapMode=Wq.REPEAT,a.texArray.elements[a.texArray.count++]=f,r++)),a.size+=u.size,c+=u.size,i=f._batchLocation,this.addColors(t,p.color,p.alpha,u.attribSize,u.attribStart),this.addTextureIds(n,i,u.attribSize,u.attribStart)}jH._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,n=this.colors,a=this.textureIds,r=new ArrayBuffer(3*e.length*4),o=new Float32Array(r),i=new Uint32Array(r);let s=0;for(let r=0;r<e.length/2;r++)o[s++]=e[2*r],o[s++]=e[2*r+1],o[s++]=t[2*r],o[s++]=t[2*r+1],i[s++]=n[r],o[s++]=a[r];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?DK.triangulate(e,this):jK[e.type].triangulate(e,this)}processLine(e){LK(e,this);for(let t=0;t<e.holes.length;t++)LK(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const n=e[t];jK[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){const a=e[2*n],r=e[2*n+1];e[2*n]=t.a*a+t.c*r+t.tx,e[2*n+1]=t.b*a+t.d*r+t.ty}}addColors(e,t,n,a,r=0){const o=sH.shared.setValue(t).toLittleEndianNumber(),i=sH.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,r+a);for(let t=0;t<a;t++)e[r+t]=i}addTextureIds(e,t,n,a=0){e.length=Math.max(e.length,a+n);for(let r=0;r<n;r++)e[a+r]=t}addUvs(e,t,n,a,r,o=null){let i=0;const s=t.length,l=n.frame;for(;i<r;){let n=e[2*(a+i)],r=e[2*(a+i)+1];if(o){const e=o.a*n+o.c*r+o.tx;r=o.b*n+o.d*r+o.ty,n=e}i++,t.push(n/l.width,r/l.height)}const c=n.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(t,n,s,r)}adjustUvs(e,t,n,a){const r=t.baseTexture,o=1e-6,i=n+2*a,s=t.frame,l=s.width/r.width,c=s.height/r.height;let d=s.x/s.width,u=s.y/s.height,m=Math.floor(e[n]+o),p=Math.floor(e[n+1]+o);for(let t=n+2;t<i;t+=2)m=Math.min(m,Math.floor(e[t]+o)),p=Math.min(p,Math.floor(e[t+1]+o));d-=m,u-=p;for(let t=n;t<i;t+=2)e[t]=(e[t]+d)*l,e[t+1]=(e[t+1]+u)*c}};WK.BATCHABLE_SIZE=100;let XK=WK;class JK{constructor(){this.color=16777215,this.alpha=1,this.texture=oW.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new JK;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=oW.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class KK extends JK{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=zK.BUTT,this.join=IK.MITER,this.miterLimit=10}clone(){const e=new KK;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=zK.BUTT,this.join=IK.MITER,this.miterLimit=10}}const QK={},ZK=class e extends IX{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new JK,this._lineStyle=new KK,this._matrix=null,this._holeMode=!1,this.state=zH.for2d(),this._geometry=e||new XK,this._geometry.refCount++,this._transformID=-1,this._tintColor=new sH(16777215),this.blendMode=Fq.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new e(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,a=.5,r=!1){return"number"==typeof e&&(e={width:e,color:t,alpha:n,alignment:a,native:r}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:oW.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:zK.BUTT,join:IK.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new lY,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new lY,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,a=n[n.length-2],r=n[n.length-1];return(a!==e||r!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,a){this._initCurve();const r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),FK.curveTo(e,t,n,a,r),this}bezierCurveTo(e,t,n,a,r,o){return this._initCurve(),RK.curveTo(e,t,n,a,r,o,this.currentPath.points),this}arcTo(e,t,n,a,r){this._initCurve(e,t);const o=this.currentPath.points,i=PK.curveTo(e,t,n,a,r,o);if(i){const{cx:e,cy:t,radius:n,startAngle:a,endAngle:r,anticlockwise:o}=i;this.arc(e,t,n,a,r,o)}return this}arc(e,t,n,a,r,o=!1){if(a===r)return this;if(!o&&r<=a?r+=ZH:o&&a<=r&&(a+=ZH),r-a===0)return this;const i=e+Math.cos(a)*n,s=t+Math.sin(a)*n,l=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const e=Math.abs(c[c.length-2]-i),t=Math.abs(c[c.length-1]-s);e<l&&t<l||c.push(i,s)}else this.moveTo(i,s),c=this.currentPath.points;return PK.arc(i,s,e,t,n,a,r,o,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:oW.WHITE,color:e,alpha:t})}normalizeColor(e){const t=sH.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:oW.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,a){return this.drawShape(new oY(e,t,n,a))}drawRoundedRect(e,t,n,a,r){return this.drawShape(new cY(e,t,n,a,r))}drawCircle(e,t,n){return this.drawShape(new iY(e,t,n))}drawEllipse(e,t,n,a){return this.drawShape(new sY(e,t,n,a))}drawPolygon(...e){let t,n=!0;const a=e[0];a.points?(n=a.closeStroke,t=a.points):t=Array.isArray(e[0])?e[0]:e;const r=new lY(t);return r.closeStroke=n,this.drawShape(r),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return!(1!==e.length||e[0].shape.type!==nY.RECT||e[0].matrix||e[0].holes.length||e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let a=0;a<n;a++){const n=e.batches[a],r=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),i=new Float32Array(e.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),s={vertexData:o,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*n.start,n.size),uvs:i,_batchRGB:sH.shared.setValue(r).toRgbArray(),_tintRGB:r,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[a]=s}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),n=this._geometry,a=this.worldAlpha,r=t.uniforms,o=n.drawCalls;r.translationMatrix=this.transform.worldTransform,sH.shared.setValue(this._tintColor).premultiply(a).toArray(r.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let t=0,a=o.length;t<a;t++)this._renderDrawCallDirect(e,n.drawCalls[t])}_renderDrawCallDirect(e,t){const{texArray:n,type:a,size:r,start:o}=t,i=n.count;for(let t=0;t<i;t++)e.texture.bind(n.elements[t],t);e.geometry.draw(a,r,o)}_resolveDirectShader(e){let t=this.shader;const n=this.pluginName;if(!t){if(!QK[n]){const{maxTextures:t}=e.plugins[n],a=new Int32Array(t);for(let e=0;e<t;e++)a[e]=e;const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new dY,default:OY.from({uSamplers:a},!0)},o=e.plugins[n]._shader.program;QK[n]=new LY(o,r)}t=QK[n]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:n,maxX:a,maxY:r}=e.bounds;this._bounds.addFrame(this.transform,t,n,a,r)}containsPoint(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=sH.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,n=t.a,a=t.b,r=t.c,o=t.d,i=t.tx,s=t.ty,l=this._geometry.points,c=this.vertexData;let d=0;for(let e=0;e<l.length;e+=2){const t=l[e],u=l[e+1];c[d++]=n*t+r*u+i,c[d++]=o*u+a*t+s}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};ZK.curves=MK,ZK._TEMP_POINT=new aY;let eQ=ZK;class tQ{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const nQ=new aY,aQ=new lY,rQ=class e extends IX{constructor(e,t,n,a=jq.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||zH.for2d(),this.drawMode=a,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=rG.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(t){const n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===jq.TRIANGLES&&n.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const a=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[a]),e.plugins[a].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const a=this.transform.worldTransform,r=a.a,o=a.b,i=a.c,s=a.d,l=a.tx,c=a.ty,d=this.vertexData;for(let e=0;e<d.length/2;e++){const n=t[2*e],a=t[2*e+1];d[2*e]=r*n+i*a+l,d[2*e+1]=o*n+s*a+c}if(this._roundPixels){const e=rG.RESOLUTION;for(let t=0;t<d.length;++t)d[t]=Math.round(d[t]*e)/e}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new tQ(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,nQ);const t=this.geometry.getBuffer("aVertexPosition").data,n=aQ.points,a=this.geometry.getIndex().data,r=a.length,o=4===this.drawMode?3:1;for(let e=0;e+2<r;e+=o){const r=2*a[e],o=2*a[e+1],i=2*a[e+2];if(n[0]=t[r],n[1]=t[r+1],n[2]=t[o],n[3]=t[o+1],n[4]=t[i],n[5]=t[i+1],aQ.contains(nQ.x,nQ.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};rQ.BATCHABLE_SIZE=100;let oQ=rQ;class iQ extends KH{constructor(e,t,n){super();const a=new GH(e),r=new GH(t,!0),o=new GH(n,!0,!0);this.addAttribute("aVertexPosition",a,2,!1,Gq.FLOAT).addAttribute("aTextureCoord",r,2,!1,Gq.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class sQ extends LY{constructor(e,t){const n={uSampler:e,alpha:1,uTextureMatrix:dY.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(n,t.uniforms),super(t.program||RY.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),n),this._colorDirty=!1,this.uvMatrix=new xW(e),this.batchable=void 0===t.program,this.pluginName=t.pluginName,this._tintColor=new sH(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;sH.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class lQ{constructor(e,t,n){this.geometry=new KH,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<e.length;++n){let a=e[n];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||Gq.FLOAT,offset:a.offset},t[n]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new GH(function(e,t=null){const n=6*e;if((t=t||new Uint16Array(n)).length!==n)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${n}`);for(let e=0,a=0;e<n;e+=6,a+=4)t[e+0]=a+0,t[e+1]=a+1,t[e+2]=a+2,t[e+3]=a+0,t[e+4]=a+2,t[e+5]=a+3;return t}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let e=0;e<this.dynamicProperties.length;++e){const n=this.dynamicProperties[e];n.offset=t,t+=n.size,this.dynamicStride+=n.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new GH(this.dynamicData,!1,!1);let a=0;this.staticStride=0;for(let e=0;e<this.staticProperties.length;++e){const t=this.staticProperties[e];t.offset=a,a+=t.size,this.staticStride+=t.size}const r=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(r),this.staticDataUint32=new Uint32Array(r),this.staticBuffer=new GH(this.staticData,!0,!1);for(let t=0;t<this.dynamicProperties.length;++t){const n=this.dynamicProperties[t];e.addAttribute(n.attributeName,this.dynamicBuffer,0,n.type===Gq.UNSIGNED_BYTE,n.type,4*this.dynamicStride,4*n.offset)}for(let t=0;t<this.staticProperties.length;++t){const n=this.staticProperties[t];e.addAttribute(n.attributeName,this.staticBuffer,0,n.type===Gq.UNSIGNED_BYTE,n.type,4*this.staticStride,4*n.offset)}}uploadDynamic(e,t,n){for(let a=0;a<this.dynamicProperties.length;a++){const r=this.dynamicProperties[a];r.uploadFunction(e,t,n,r.type===Gq.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let a=0;a<this.staticProperties.length;a++){const r=this.staticProperties[a];r.uploadFunction(e,t,n,r.type===Gq.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class cQ extends UY{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new dY,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Gq.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=LY.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=zH.for2d()}render(e){const t=e.children,n=e._maxSize,a=e._batchSize,r=this.renderer;let o=t.length;if(0===o)return;o>n&&!e.autoResize&&(o=n);let i=e._buffers;i||(i=e._buffers=this.generateBuffers(e));const s=t[0]._texture.baseTexture,l=s.alphaMode>0;this.state.blendMode=cH(e.blendMode,l),r.state.set(this.state);const c=r.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(r.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=sH.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);let u=!1;for(let n=0,s=0;n<o;n+=a,s+=1){let l=o-n;l>a&&(l=a),s>=i.length&&i.push(this._generateOneMoreBuffer(e));const d=i[s];d.uploadDynamic(t,n,l);const m=e._bufferUpdateIDs[s]||0;u=u||d._updateID<m,u&&(d._updateID=e._updateID,d.uploadStatic(t,n,l)),r.geometry.bind(d.geometry),c.drawElements(c.TRIANGLES,6*l,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],n=e._maxSize,a=e._batchSize,r=e._properties;for(let e=0;e<n;e+=a)t.push(new lQ(this.properties,r,a));return t}_generateOneMoreBuffer(e){const t=e._batchSize,n=e._properties;return new lQ(this.properties,n,t)}uploadVertices(e,t,n,a,r,o){let i=0,s=0,l=0,c=0;for(let d=0;d<n;++d){const n=e[t+d],u=n._texture,m=n.scale.x,p=n.scale.y,f=u.trim,g=u.orig;f?(s=f.x-n.anchor.x*g.width,i=s+f.width,c=f.y-n.anchor.y*g.height,l=c+f.height):(i=g.width*(1-n.anchor.x),s=g.width*-n.anchor.x,l=g.height*(1-n.anchor.y),c=g.height*-n.anchor.y),a[o]=s*m,a[o+1]=c*p,a[o+r]=i*m,a[o+r+1]=c*p,a[o+2*r]=i*m,a[o+2*r+1]=l*p,a[o+3*r]=s*m,a[o+3*r+1]=l*p,o+=4*r}}uploadPosition(e,t,n,a,r,o){for(let i=0;i<n;i++){const n=e[t+i].position;a[o]=n.x,a[o+1]=n.y,a[o+r]=n.x,a[o+r+1]=n.y,a[o+2*r]=n.x,a[o+2*r+1]=n.y,a[o+3*r]=n.x,a[o+3*r+1]=n.y,o+=4*r}}uploadRotation(e,t,n,a,r,o){for(let i=0;i<n;i++){const n=e[t+i].rotation;a[o]=n,a[o+r]=n,a[o+2*r]=n,a[o+3*r]=n,o+=4*r}}uploadUvs(e,t,n,a,r,o){for(let i=0;i<n;++i){const n=e[t+i]._texture._uvs;n?(a[o]=n.x0,a[o+1]=n.y0,a[o+r]=n.x1,a[o+r+1]=n.y1,a[o+2*r]=n.x2,a[o+2*r+1]=n.y2,a[o+3*r]=n.x3,a[o+3*r+1]=n.y3,o+=4*r):(a[o]=0,a[o+1]=0,a[o+r]=0,a[o+r+1]=0,a[o+2*r]=0,a[o+2*r+1]=0,a[o+3*r]=0,a[o+3*r+1]=0,o+=4*r)}}uploadTint(e,t,n,a,r,o){for(let i=0;i<n;++i){const n=e[t+i],s=sH.shared.setValue(n._tintRGB).toPremultiplied(n.alpha,n.texture.baseTexture.alphaMode>0);a[o]=s,a[o+r]=s,a[o+2*r]=s,a[o+3*r]=s,o+=4*r}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}cQ.extension={name:"particle",type:_H.RendererPlugin},DH.add(cQ);var dQ=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(dQ||{});const uQ={willReadFrequently:!0},mQ=class e{static get experimentalLetterSpacingSupported(){let t=e._experimentalLetterSpacingSupported;if(void 0!==t){const n=rG.ADAPTER.getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}constructor(e,t,n,a,r,o,i,s,l){this.text=e,this.style=t,this.width=n,this.height=a,this.lines=r,this.lineWidths=o,this.lineHeight=i,this.maxLineWidth=s,this.fontProperties=l}static measureText(t,n,a,r=e._canvas){a=a??n.wordWrap;const o=n.toFontString(),i=e.measureFont(o);0===i.fontSize&&(i.fontSize=n.fontSize,i.ascent=n.fontSize);const s=r.getContext("2d",uQ);s.font=o;const l=(a?e.wordWrap(t,n,r):t).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let d=0;for(let t=0;t<l.length;t++){const a=e._measureText(l[t],n.letterSpacing,s);c[t]=a,d=Math.max(d,a)}let u=d+n.strokeThickness;n.dropShadow&&(u+=n.dropShadowDistance);const m=n.lineHeight||i.fontSize+n.strokeThickness;let p=Math.max(m,i.fontSize+2*n.strokeThickness)+n.leading+(l.length-1)*(m+n.leading);return n.dropShadow&&(p+=n.dropShadowDistance),new e(t,n,u,p,l,c,m+n.leading,d,i)}static _measureText(t,n,a){let r=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(a.letterSpacing=`${n}px`,a.textLetterSpacing=`${n}px`,r=!0):(a.letterSpacing="0px",a.textLetterSpacing="0px"));let o=a.measureText(t).width;return o>0&&(r?o-=n:o+=(e.graphemeSegmenter(t).length-1)*n),o}static wordWrap(t,n,a=e._canvas){const r=a.getContext("2d",uQ);let o=0,i="",s="";const l=Object.create(null),{letterSpacing:c,whiteSpace:d}=n,u=e.collapseSpaces(d),m=e.collapseNewlines(d);let p=!u;const f=n.wordWrapWidth+c,g=e.tokenize(t);for(let t=0;t<g.length;t++){let a=g[t];if(e.isNewline(a)){if(!m){s+=e.addLine(i),p=!u,i="",o=0;continue}a=" "}if(u){const t=e.isBreakingSpace(a),n=e.isBreakingSpace(i[i.length-1]);if(t&&n)continue}const d=e.getFromCache(a,c,l,r);if(d>f)if(""!==i&&(s+=e.addLine(i),i="",o=0),e.canBreakWords(a,n.breakWords)){const t=e.wordWrapSplit(a);for(let d=0;d<t.length;d++){let u=t[d],m=u,g=1;for(;t[d+g];){const r=t[d+g];if(e.canBreakChars(m,r,a,d,n.breakWords))break;u+=r,m=r,g++}d+=g-1;const h=e.getFromCache(u,c,l,r);h+o>f&&(s+=e.addLine(i),p=!1,i="",o=0),i+=u,o+=h}}else{i.length>0&&(s+=e.addLine(i),i="",o=0);const n=t===g.length-1;s+=e.addLine(a,!n),p=!1,i="",o=0}else d+o>f&&(p=!1,s+=e.addLine(i),i="",o=0),(i.length>0||!e.isBreakingSpace(a)||p)&&(i+=a,o+=d)}return s+=e.addLine(i,!1),s}static addLine(t,n=!0){return t=e.trimRight(t),n?`${t}\n`:t}static getFromCache(t,n,a,r){let o=a[t];return"number"!=typeof o&&(o=e._measureText(t,n,r)+n,a[t]=o),o}static collapseSpaces(e){return"normal"===e||"pre-line"===e}static collapseNewlines(e){return"normal"===e}static trimRight(t){if("string"!=typeof t)return"";for(let n=t.length-1;n>=0;n--){const a=t[n];if(!e.isBreakingSpace(a))break;t=t.slice(0,-1)}return t}static isNewline(t){return"string"==typeof t&&e._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,n){return"string"==typeof t&&e._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const n=[];let a="";if("string"!=typeof t)return n;for(let r=0;r<t.length;r++){const o=t[r],i=t[r+1];e.isBreakingSpace(o,i)||e.isNewline(o)?(""!==a&&(n.push(a),a=""),n.push(o)):a+=o}return""!==a&&n.push(a),n}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,a,r){return!0}static wordWrapSplit(t){return e.graphemeSegmenter(t)}static measureFont(t){if(e._fonts[t])return e._fonts[t];const n={ascent:0,descent:0,fontSize:0},a=e._canvas,r=e._context;r.font=t;const o=e.METRICS_STRING+e.BASELINE_SYMBOL,i=Math.ceil(r.measureText(o).width);let s=Math.ceil(r.measureText(e.BASELINE_SYMBOL).width);const l=Math.ceil(e.HEIGHT_MULTIPLIER*s);if(s=s*e.BASELINE_MULTIPLIER|0,0===i||0===l)return e._fonts[t]=n,n;a.width=i,a.height=l,r.fillStyle="#f00",r.fillRect(0,0,i,l),r.font=t,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(o,0,s);const c=r.getImageData(0,0,i,l).data,d=c.length,u=4*i;let m=0,p=0,f=!1;for(m=0;m<s;++m){for(let e=0;e<u;e+=4)if(255!==c[p+e]){f=!0;break}if(f)break;p+=u}for(n.ascent=s-m,p=d-u,f=!1,m=l;m>s;--m){for(let e=0;e<u;e+=4)if(255!==c[p+e]){f=!0;break}if(f)break;p-=u}return n.descent=m-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n}static clearMetrics(t=""){t?delete e._fonts[t]:e._fonts={}}static get _canvas(){if(!e.__canvas){let t;try{const n=new OffscreenCanvas(0,0);if(n.getContext("2d",uQ)?.measureText)return e.__canvas=n,n;t=rG.ADAPTER.createCanvas()}catch{t=rG.ADAPTER.createCanvas()}t.width=t.height=10,e.__canvas=t}return e.__canvas}static get _context(){return e.__context||(e.__context=e._canvas.getContext("2d",uQ)),e.__context}};mQ.METRICS_STRING="|Ã‰qÃ…",mQ.BASELINE_SYMBOL="M",mQ.BASELINE_MULTIPLIER=1.4,mQ.HEIGHT_MULTIPLIER=2,mQ.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(e=>e.segment)}return e=>[...e]})(),mQ.experimentalLetterSpacing=!1,mQ._fonts={},mQ._newlines=[10,13],mQ._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let pQ=mQ;const fQ=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],gQ=class e{constructor(e){this.styleID=0,this.reset(),bQ(this,e,e)}clone(){const t={};return bQ(t,this,e.defaultStyle),new e(t)}reset(){bQ(this,e.defaultStyle,e.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=vQ(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=vQ(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=vQ(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let e=t.length-1;e>=0;e--){let n=t[e].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!fQ.includes(n)&&(n=`"${n}"`),t[e]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};gQ.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:dQ.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let hQ=gQ;function vQ(e){const t=sH.shared,n=e=>{const n=t.setValue(e);return 1===n.alpha?n.toHex():n.toRgbaString()};return Array.isArray(e)?e.map(n):n(e)}function bQ(e,t,n){for(const a in n)Array.isArray(t[a])?e[a]=t[a].slice():e[a]=t[a]}const yQ={texture:!0,children:!1,baseTexture:!0},xQ=class e extends PX{constructor(t,n,a){let r=!1;a||(a=rG.ADAPTER.createCanvas(),r=!0),a.width=3,a.height=3;const o=oW.from(a);o.orig=new oY,o.trim=new oY,super(o),this._ownCanvas=r,this.canvas=a,this.context=a.getContext("2d",{willReadFrequently:!0}),this._resolution=e.defaultResolution??rG.RESOLUTION,this._autoResolution=e.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=n,this.localStyleID=-1}static get experimentalLetterSpacing(){return pQ.experimentalLetterSpacing}static set experimentalLetterSpacing(e){VG("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),pQ.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const n=this.context,a=pQ.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),r=a.width,o=a.height,i=a.lines,s=a.lineHeight,l=a.lineWidths,c=a.maxLineWidth,d=a.fontProperties;let u,m;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,r)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+2*t.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;const p=t.dropShadow?2:1;for(let e=0;e<p;++e){const r=t.dropShadow&&0===e,p=r?Math.ceil(Math.max(1,o)+2*t.padding):0,f=p*this._resolution;if(r){n.fillStyle="black",n.strokeStyle="black";const e=t.dropShadowColor,a=t.dropShadowBlur*this._resolution,r=t.dropShadowDistance*this._resolution;n.shadowColor=sH.shared.setValue(e).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=a,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*r,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*r+f}else n.fillStyle=this._generateFillStyle(t,i,a),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let g=(s-d.fontSize)/2;s-d.fontSize<0&&(g=0);for(let e=0;e<i.length;e++)u=t.strokeThickness/2,m=t.strokeThickness/2+e*s+d.ascent+g,"right"===t.align?u+=c-l[e]:"center"===t.align&&(u+=(c-l[e])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(i[e],u+t.padding,m+t.padding-p,!0),t.fill&&this.drawLetterSpacing(i[e],u+t.padding,m+t.padding-p)}this.updateTexture()}drawLetterSpacing(e,t,n,a=!1){const r=this._style.letterSpacing;let o=!1;if(pQ.experimentalLetterSpacingSupported&&(pQ.experimentalLetterSpacing?(this.context.letterSpacing=`${r}px`,this.context.textLetterSpacing=`${r}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===r||o)return void(a?this.context.strokeText(e,t,n):this.context.fillText(e,t,n));let i=t;const s=pQ.graphemeSegmenter(e);let l=this.context.measureText(e).width,c=0;for(let e=0;e<s.length;++e){const t=s[e];a?this.context.strokeText(t,i,n):this.context.fillText(t,i,n);let o="";for(let t=e+1;t<s.length;++t)o+=s[t];c=this.context.measureText(o).width,i+=l-c+r,l=c}}updateTexture(){const e=this.canvas;if(this._style.trim){const t=function(e){const t=function(e){const{width:t,height:n}=e,a=e.getContext("2d",{willReadFrequently:!0});if(null===a)throw new TypeError("Failed to get canvas 2D context");const r=a.getImageData(0,0,t,n).data;let o=0,i=0,s=t-1,l=n-1;for(;i<n&&NH(r,t,i);)++i;if(i===n)return yH.EMPTY;for(;NH(r,t,l);)--l;for(;SH(r,t,o,i,l);)++o;for(;SH(r,t,s,i,l);)--s;return++s,++l,new yH(o,i,s,l)}(e),{width:n,height:a}=t;let r=null;if(!t.isEmpty()){const o=e.getContext("2d");if(null===o)throw new TypeError("Failed to get canvas 2D context");r=o.getImageData(t.left,t.top,n,a)}return{width:n,height:a,data:r}}(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}const t=this._texture,n=this._style,a=n.trim?0:n.padding,r=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-a,t.trim.y=-a,t.orig.width=t._frame.width-2*a,t.orig.height=t._frame.height-2*a,this._onTextureUpdate(),r.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),-1===this._textureID&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){const a=e.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];let r;const o=e.dropShadow?e.dropShadowDistance:0,i=e.padding||0,s=this.canvas.width/this._resolution-o-2*i,l=this.canvas.height/this._resolution-o-2*i,c=a.slice(),d=e.fillGradientStops.slice();if(!d.length){const e=c.length+1;for(let t=1;t<e;++t)d.push(t/e)}if(c.unshift(a[0]),d.unshift(0),c.push(a[a.length-1]),d.push(1),e.fillGradientType===dQ.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,i,s/2,l+i);const a=n.fontProperties.fontSize+e.strokeThickness;for(let e=0;e<t.length;e++){const o=n.lineHeight*(e-1)+a,i=n.lineHeight*e;let s=i;e>0&&o>i&&(s=(i+o)/2);const u=i+a,m=n.lineHeight*(e+1);let p=u;e+1<t.length&&m<u&&(p=(u+m)/2);const f=(p-s)/l;for(let e=0;e<c.length;e++){let t=0;t="number"==typeof d[e]?d[e]:e/c.length;let n=Math.min(1,Math.max(0,s/l+t*f));n=Number(n.toFixed(5)),r.addColorStop(n,c[e])}}}else{r=this.context.createLinearGradient(i,l/2,s+i,l/2);const e=c.length+1;let t=1;for(let n=0;n<c.length;n++){let a;a="number"==typeof d[n]?d[n]:t/e,r.addColorStop(a,c[n]),t++}}return r}destroy(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},yQ,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=gH(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=gH(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},this._style=e instanceof hQ?e:new hQ(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};xQ.defaultAutoResolution=!0;let kQ=xQ;class wQ{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function EQ(e,t){let n=!1;if(e?._textures?.length)for(let a=0;a<e._textures.length;a++)if(e._textures[a]instanceof oW){const r=e._textures[a].baseTexture;t.includes(r)||(t.push(r),n=!0)}return n}function NQ(e,t){if(e.baseTexture instanceof jH){const n=e.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function SQ(e,t){if(e._texture&&e._texture instanceof oW){const n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function VQ(e,t){return t instanceof kQ&&(t.updateText(!0),!0)}function _Q(e,t){if(t instanceof hQ){const e=t.toFontString();return pQ.measureFont(e),!0}return!1}function CQ(e,t){if(e instanceof kQ){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function AQ(e,t){return e instanceof hQ&&(t.includes(e)||t.push(e),!0)}const DQ=class e{constructor(t){this.limiter=new wQ(e.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(CQ),this.registerFindHook(AQ),this.registerFindHook(EQ),this.registerFindHook(NQ),this.registerFindHook(SQ),this.registerUploadHook(VQ),this.registerUploadHook(_Q)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,cX.system.addOnce(this.tick,this,iX.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed)for(let n=0,a=this.uploadHooks.length;n<a;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)cX.system.addOnce(this.tick,this,iX.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof IX)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&cX.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};DQ.uploadsPerFrame=4;let TQ=DQ;function BQ(e,t){return t instanceof jH&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function IQ(e,t){if(!(t instanceof eQ))return!1;const{geometry:n}=t;t.finishPoly(),n.updateBatches();const{batches:a}=n;for(let t=0;t<a.length;t++){const{texture:n}=a[t].style;n&&BQ(e,n.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function zQ(e,t){return e instanceof eQ&&(t.push(e),!0)}Object.defineProperties(rG,{UPLOADS_PER_FRAME:{get:()=>TQ.uploadsPerFrame,set(e){VG("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),TQ.uploadsPerFrame=e}}});class MQ extends TQ{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(zQ),this.registerUploadHook(BQ),this.registerUploadHook(IQ)}}MQ.extension={name:"prepare",type:_H.RendererSystem},DH.add(MQ),new aY;var PQ="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const RQ=new dY;class $Q extends UY{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new cW,this.state=zH.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=LY.from(PQ,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?LY.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):LY.from(PQ,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}render(e){const t=this.renderer,n=this.quad;let a=n.vertices;a[0]=a[6]=e._width*-e.anchor.x,a[1]=a[3]=e._height*-e.anchor.y,a[2]=a[4]=e._width*(1-e.anchor.x),a[5]=a[7]=e._height*(1-e.anchor.y);const r=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;a=n.uvs,a[0]=a[6]=-r,a[1]=a[3]=-o,a[2]=a[4]=1-r,a[5]=a[7]=1-o,n.invalidate();const i=e._texture,s=i.baseTexture,l=s.alphaMode>0,c=e.tileTransform.localTransform,d=e.uvMatrix;let u=s.isPowerOfTwo&&i.frame.width===s.width&&i.frame.height===s.height;u&&(s._glTextures[t.CONTEXT_UID]?u=s.wrapMode!==Wq.CLAMP:s.wrapMode===Wq.CLAMP&&(s.wrapMode=Wq.REPEAT));const m=u?this.simpleShader:this.shader,p=i.width,f=i.height,g=e._width,h=e._height;RQ.set(c.a*p/g,c.b*p/h,c.c*f/g,c.d*f/h,c.tx/g,c.ty/h),RQ.invert(),u?RQ.prepend(d.mapCoord):(m.uniforms.uMapCoord=d.mapCoord.toArray(!0),m.uniforms.uClampFrame=d.uClampFrame,m.uniforms.uClampOffset=d.uClampOffset),m.uniforms.uTransform=RQ.toArray(!0),m.uniforms.uColor=sH.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(m.uniforms.uColor),m.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),m.uniforms.uSampler=i,t.shader.bind(m),t.geometry.bind(n),this.state.blendMode=cH(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}$Q.extension={name:"tilingSprite",type:_H.RendererPlugin},DH.add($Q);const OQ=class e{constructor(e,t,n){this.linkedSheets=[],(e instanceof jH||e instanceof oW)&&(e={texture:e,data:t,resolutionFilename:n});const{texture:a,data:r,resolutionFilename:o=null,cachePrefix:i=""}=e;this.cachePrefix=i,this._texture=a instanceof oW?a:null,this.baseTexture=a instanceof jH?a:this._texture.baseTexture,this.textures={},this.animations={},this.data=r;const s=this.baseTexture.resource;this.resolution=this._updateResolution(o||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let n=VH(e,null);return null===n&&(n="number"==typeof t?t:parseFloat(t??"1")),1!==n&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let n=t;const a=e.BATCH_SIZE;for(;n-t<a&&n<this._frameKeys.length;){const e=this._frameKeys[n],t=this._frames[e],a=t.frame;if(a){let n=null,r=null;const o=!1!==t.trimmed&&t.sourceSize?t.sourceSize:t.frame,i=new oY(0,0,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution);n=t.rotated?new oY(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new oY(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==t.trimmed&&t.spriteSourceSize&&(r=new oY(Math.floor(t.spriteSourceSize.x)/this.resolution,Math.floor(t.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[e]=new oW(this.baseTexture,n,i,r,t.rotated?2:0,t.anchor,t.borders),oW.addToCache(this.textures[e],this.cachePrefix+e.toString())}n++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){const a=e[t][n];this.animations[t].push(this.textures[a])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*e.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};OQ.BATCH_SIZE=1e3;let LQ=OQ;const FQ=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function jQ(e,t,n){const a={};if(e.forEach(e=>{a[e]=t}),Object.keys(t.textures).forEach(e=>{a[`${t.cachePrefix}${e}`]=t.textures[e]}),!n){const n=AG.dirname(e[0]);t.linkedSheets.forEach((e,r)=>{Object.assign(a,jQ([`${n}/${t.data.meta.related_multi_packs[r]}`],e,!0))})}return a}const UQ={extension:_H.Asset,cache:{test:e=>e instanceof LQ,getCacheableAssets:(e,t)=>jQ(e,t,!1)},resolver:{test:e=>{const t=e.split("?")[0].split("."),n=t.pop(),a=t.pop();return"json"===n&&FQ.includes(a)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(rG.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:_H.LoadParser,priority:fJ.Normal},testParse:async(e,t)=>".json"===AG.extname(t.src).toLowerCase()&&!!e.frames,async parse(e,t,n){const{texture:a,imageFilename:r,cachePrefix:o}=t?.data??{};let i,s=AG.dirname(t.src);if(s&&s.lastIndexOf("/")!==s.length-1&&(s+="/"),a&&a.baseTexture)i=a;else{const a=nK(s+(r??e.meta.image),t.src);i=(await n.load([a]))[a]}const l=new LQ({texture:i.baseTexture,data:e,resolutionFilename:t.src,cachePrefix:o});await l.parse();const c=e?.meta?.related_multi_packs;if(Array.isArray(c)){const e=[];for(const a of c){if("string"!=typeof a)continue;let r=s+a;t.data?.ignoreMultiPack||(r=nK(r,t.src),e.push(n.load({src:r,data:{ignoreMultiPack:!0}})))}const a=await Promise.all(e);l.linkedSheets=a,a.forEach(e=>{e.linkedSheets=[l].concat(l.linkedSheets.filter(t=>t!==e))})}return l},unload(e){e.destroy(!0)}}};DH.add(UQ);class qQ{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class GQ{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const e in t){const a=t[e].match(/^[a-z]+/gm)[0],r=t[e].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(const e in r){const t=r[e].split("="),n=t[0],a=t[1].replace(/"/gm,""),i=parseFloat(a),s=isNaN(i)?a:i;o[n]=s}n[a].push(o)}const a=new qQ;return n.info.forEach(e=>a.info.push({face:e.face,size:parseInt(e.size,10)})),n.common.forEach(e=>a.common.push({lineHeight:parseInt(e.lineHeight,10)})),n.page.forEach(e=>a.page.push({id:parseInt(e.id,10),file:e.file})),n.char.forEach(e=>a.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})),n.kerning.forEach(e=>a.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})),n.distanceField.forEach(e=>a.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})),a}}class HQ{static test(e){const t=e;return"string"!=typeof e&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const t=new qQ,n=e.getElementsByTagName("info"),a=e.getElementsByTagName("common"),r=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),i=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField");for(let e=0;e<n.length;e++)t.info.push({face:n[e].getAttribute("face"),size:parseInt(n[e].getAttribute("size"),10)});for(let e=0;e<a.length;e++)t.common.push({lineHeight:parseInt(a[e].getAttribute("lineHeight"),10)});for(let e=0;e<r.length;e++)t.page.push({id:parseInt(r[e].getAttribute("id"),10)||0,file:r[e].getAttribute("file")});for(let e=0;e<o.length;e++){const n=o[e];t.char.push({id:parseInt(n.getAttribute("id"),10),page:parseInt(n.getAttribute("page"),10)||0,x:parseInt(n.getAttribute("x"),10),y:parseInt(n.getAttribute("y"),10),width:parseInt(n.getAttribute("width"),10),height:parseInt(n.getAttribute("height"),10),xoffset:parseInt(n.getAttribute("xoffset"),10),yoffset:parseInt(n.getAttribute("yoffset"),10),xadvance:parseInt(n.getAttribute("xadvance"),10)})}for(let e=0;e<i.length;e++)t.kerning.push({first:parseInt(i[e].getAttribute("first"),10),second:parseInt(i[e].getAttribute("second"),10),amount:parseInt(i[e].getAttribute("amount"),10)});for(let e=0;e<s.length;e++)t.distanceField.push({fieldType:s[e].getAttribute("fieldType"),distanceRange:parseInt(s[e].getAttribute("distanceRange"),10)});return t}}class YQ{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&HQ.test(rG.ADAPTER.parseXML(e))}static parse(e){return HQ.parse(rG.ADAPTER.parseXML(e))}}const WQ=[GQ,HQ,YQ];function XQ(e,t,n,a,r,o,i){const s=n.text,l=n.fontProperties;t.translate(a,r),t.scale(o,o);const c=i.strokeThickness/2,d=-i.strokeThickness/2;if(t.font=i.toFontString(),t.lineWidth=i.strokeThickness,t.textBaseline=i.textBaseline,t.lineJoin=i.lineJoin,t.miterLimit=i.miterLimit,t.fillStyle=function(e,t,n,a,r,o){const i=n.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];let s;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,d=e.width/a-l-2*c,u=e.height/a-l-2*c,m=i.slice(),p=n.fillGradientStops.slice();if(!p.length){const e=m.length+1;for(let t=1;t<e;++t)p.push(t/e)}if(m.unshift(i[0]),p.unshift(0),m.push(i[i.length-1]),p.push(1),n.fillGradientType===dQ.LINEAR_VERTICAL){s=t.createLinearGradient(d/2,c,d/2,u+c);let e=0;const a=(o.fontProperties.fontSize+n.strokeThickness)/u;for(let t=0;t<r.length;t++){const n=o.lineHeight*t;for(let t=0;t<m.length;t++){let r=0;r="number"==typeof p[t]?p[t]:t/m.length;const o=n/u+r*a;let i=Math.max(e,o);i=Math.min(i,1),s.addColorStop(i,m[t]),e=i}}}else{s=t.createLinearGradient(c,u/2,d+c,u/2);const e=m.length+1;let n=1;for(let t=0;t<m.length;t++){let a;a="number"==typeof p[t]?p[t]:n/e,s.addColorStop(a,m[t]),n++}}return s}(e,t,i,o,[s],n),t.strokeStyle=i.stroke,i.dropShadow){const e=i.dropShadowColor,n=i.dropShadowBlur*o,a=i.dropShadowDistance*o;t.shadowColor=sH.shared.setValue(e).setAlpha(i.dropShadowAlpha).toRgbaString(),t.shadowBlur=n,t.shadowOffsetX=Math.cos(i.dropShadowAngle)*a,t.shadowOffsetY=Math.sin(i.dropShadowAngle)*a}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;i.stroke&&i.strokeThickness&&t.strokeText(s,c,d+n.lineHeight-l.descent),i.fill&&t.fillText(s,c,d+n.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function JQ(e){return Array.from?Array.from(e):e.split("")}function KQ(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}const QQ=class e{constructor(e,t,n){const[a]=e.info,[r]=e.common,[o]=e.page,[i]=e.distanceField,s=VH(o.file),l={};this._ownsTextures=n,this.font=a.face,this.size=a.size,this.lineHeight=r.lineHeight/s,this.chars={},this.pageTextures=l;for(let n=0;n<e.page.length;n++){const{id:a,file:r}=e.page[n];l[a]=t instanceof Array?t[n]:t[r],i?.fieldType&&"none"!==i.fieldType&&(l[a].baseTexture.alphaMode=Jq.NO_PREMULTIPLIED_ALPHA,l[a].baseTexture.mipmap=Xq.OFF)}for(let t=0;t<e.char.length;t++){const{id:n,page:a}=e.char[t];let{x:r,y:o,width:i,height:c,xoffset:d,yoffset:u,xadvance:m}=e.char[t];r/=s,o/=s,i/=s,c/=s,d/=s,u/=s,m/=s;const p=new oY(r+l[a].frame.x/s,o+l[a].frame.y/s,i,c);this.chars[n]={xOffset:d,yOffset:u,xAdvance:m,kerning:{},texture:new oW(l[a].baseTexture,p),page:a}}for(let t=0;t<e.kerning.length;t++){let{first:n,second:a,amount:r}=e.kerning[t];n/=s,a/=s,r/=s,this.chars[a]&&(this.chars[a].kerning[n]=r)}this.distanceFieldRange=i?.distanceRange,this.distanceFieldType=i?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(t,n,a){let r;if(t instanceof qQ)r=t;else{const e=function(e){for(let t=0;t<WQ.length;t++)if(WQ[t].test(e))return WQ[t];return null}(t);if(!e)throw new Error("Unrecognized data format for font.");r=e.parse(t)}n instanceof oW&&(n=[n]);const o=new e(r,n,a);return e.available[o.font]=o,o}static uninstall(t){const n=e.available[t];if(!n)throw new Error(`No font found named '${t}'`);n.destroy(),delete e.available[t]}static from(t,n,a){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:r,padding:o,resolution:i,textureWidth:s,textureHeight:l,...c}=Object.assign({},e.defaultOptions,a),d=function(e){"string"==typeof e&&(e=[e]);const t=[];for(let n=0,a=e.length;n<a;n++){const a=e[n];if(Array.isArray(a)){if(2!==a.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${a.length}.`);const e=a[0].charCodeAt(0),n=a[1].charCodeAt(0);if(n<e)throw new Error("[BitmapFont]: Invalid character range.");for(let a=e,r=n;a<=r;a++)t.push(String.fromCharCode(a))}else t.push(...JQ(a))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(r),u=n instanceof hQ?n:new hQ(n),m=s,p=new qQ;p.info[0]={face:u.fontFamily,size:u.fontSize},p.common[0]={lineHeight:u.fontSize};let f,g,h,v=0,b=0,y=0;const x=[],k=[];for(let e=0;e<d.length;e++){f||(f=rG.ADAPTER.createCanvas(),f.width=s,f.height=l,g=f.getContext("2d"),h=new jH(f,{resolution:i,...c}),x.push(h),k.push(new oW(h)),p.page.push({id:k.length-1,file:""}));const t=d[e],n=pQ.measureText(t,u,!1,f),a=n.width,r=Math.ceil(n.height),w=Math.ceil(("italic"===u.fontStyle?2:1)*a);if(b>=l-r*i){if(0===b)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--e,f=null,g=null,h=null,b=0,v=0,y=0;continue}if(y=Math.max(r+n.fontProperties.descent,y),w*i+v>=m){if(0===v)throw new Error(`[BitmapFont] textureWidth ${s}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${t}')`);--e,b+=y*i,b=Math.ceil(b),v=0,y=0;continue}XQ(f,g,n,v,b,i,u);const E=KQ(n.text);p.char.push({id:E,page:k.length-1,x:v/i,y:b/i,width:w,height:r,xoffset:0,yoffset:0,xadvance:a-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),v+=(w+2*o)*i,v=Math.ceil(v)}if(!a?.skipKerning)for(let e=0,t=d.length;e<t;e++){const n=d[e];for(let e=0;e<t;e++){const t=d[e],a=g.measureText(n).width,r=g.measureText(t).width,o=g.measureText(n+t).width-(a+r);o&&p.kerning.push({first:KQ(n),second:KQ(t),amount:o})}}const w=new e(p,k,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=w,w}};QQ.ALPHA=[["a","z"],["A","Z"]," "],QQ.NUMERIC=[["0","9"]],QQ.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],QQ.ASCII=[[" ","~"]],QQ.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:QQ.ALPHANUMERIC},QQ.available={};let ZQ=QQ;const eZ=[],tZ=[],nZ=[];(class e extends IX{constructor(t,n={}){super();const{align:a,tint:r,maxWidth:o,letterSpacing:i,fontName:s,fontSize:l}=Object.assign({},e.styleDefaults,n);if(!ZQ.available[s])throw new Error(`Missing BitmapFont "${s}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=a,this._tintColor=new sH(r),this._font=void 0,this._fontName=s,this._fontSize=l,this.text=t,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=i,this._anchor=new yY(()=>{this.dirty=!0},this,0,0),this._roundPixels=rG.ROUND_PIXELS,this.dirty=!0,this._resolution=rG.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=ZQ.available[this._fontName],t=this.fontSize,n=t/e.size,a=new aY,r=[],o=[],i=[],s=JQ(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/t,c="none"===e.distanceFieldType?eZ:tZ;let d=null,u=0,m=0,p=0,f=-1,g=0,h=0,v=0,b=0;for(let t=0;t<s.length;t++){const n=s[t],c=KQ(n);if(/(?:\s)/.test(n)&&(f=t,g=u,b++),"\r"===n||"\n"===n){o.push(u),i.push(-1),m=Math.max(m,u),++p,++h,a.x=0,a.y+=e.lineHeight,d=null,b=0;continue}const y=e.chars[c];if(!y)continue;d&&y.kerning[d]&&(a.x+=y.kerning[d]);const x=nZ.pop()||{texture:oW.EMPTY,line:0,charCode:0,prevSpaces:0,position:new aY};x.texture=y.texture,x.line=p,x.charCode=c,x.position.x=Math.round(a.x+y.xOffset+this._letterSpacing/2),x.position.y=Math.round(a.y+y.yOffset),x.prevSpaces=b,r.push(x),u=x.position.x+Math.max(y.xAdvance-y.xOffset,y.texture.orig.width),a.x+=y.xAdvance+this._letterSpacing,v=Math.max(v,y.yOffset+y.texture.height),d=c,-1!==f&&l>0&&a.x>l&&(++h,fH(r,1+f-h,1+t-f),t=f,f=-1,o.push(g),i.push(r.length>0?r[r.length-1].prevSpaces:0),m=Math.max(m,g),p++,a.x=0,a.y+=e.lineHeight,d=null,b=0)}const y=s[s.length-1];"\r"!==y&&"\n"!==y&&(/(?:\s)/.test(y)&&(u=g),o.push(u),m=Math.max(m,u),i.push(-1));const x=[];for(let e=0;e<=p;e++){let t=0;"right"===this._align?t=m-o[e]:"center"===this._align?t=(m-o[e])/2:"justify"===this._align&&(t=i[e]<0?0:(m-o[e])/i[e]),x.push(t)}const k=r.length,w={},E=[],N=this._activePagesMeshData;c.push(...N);for(let t=0;t<k;t++){const n=r[t].texture,a=n.baseTexture.uid;if(!w[a]){let t=c.pop();if(!t){const n=new iQ;let a,r;"none"===e.distanceFieldType?(a=new sQ(oW.EMPTY),r=Fq.NORMAL):(a=new sQ(oW.EMPTY,{program:RY.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),r=Fq.NORMAL_NPM);const o=new oQ(n,a);o.blendMode=r,t={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:o,vertices:null,uvs:null,indices:null}}t.index=0,t.indexCount=0,t.vertexCount=0,t.uvsCount=0,t.total=0;const{_textureCache:r}=this;r[a]=r[a]||new oW(n.baseTexture),t.mesh.texture=r[a],t.mesh.tint=this._tintColor.value,E.push(t),w[a]=t}w[a].total++}for(let e=0;e<N.length;e++)E.includes(N[e])||this.removeChild(N[e].mesh);for(let e=0;e<E.length;e++)E[e].mesh.parent!==this&&this.addChild(E[e].mesh);this._activePagesMeshData=E;for(const e in w){const t=w[e],n=t.total;if(!(t.indices?.length>6*n)||t.vertices.length<2*oQ.BATCHABLE_SIZE)t.vertices=new Float32Array(8*n),t.uvs=new Float32Array(8*n),t.indices=new Uint16Array(6*n);else{const e=t.total,n=t.vertices;for(let t=4*e*2;t<n.length;t++)n[t]=0}t.mesh.size=6*n}for(let e=0;e<k;e++){const t=r[e];let a=t.position.x+x[t.line]*("justify"===this._align?t.prevSpaces:1);this._roundPixels&&(a=Math.round(a));const o=a*n,i=t.position.y*n,s=t.texture,l=w[s.baseTexture.uid],c=s.frame,d=s._uvs,u=l.index++;l.indices[6*u+0]=0+4*u,l.indices[6*u+1]=1+4*u,l.indices[6*u+2]=2+4*u,l.indices[6*u+3]=0+4*u,l.indices[6*u+4]=2+4*u,l.indices[6*u+5]=3+4*u,l.vertices[8*u+0]=o,l.vertices[8*u+1]=i,l.vertices[8*u+2]=o+c.width*n,l.vertices[8*u+3]=i,l.vertices[8*u+4]=o+c.width*n,l.vertices[8*u+5]=i+c.height*n,l.vertices[8*u+6]=o,l.vertices[8*u+7]=i+c.height*n,l.uvs[8*u+0]=d.x0,l.uvs[8*u+1]=d.y0,l.uvs[8*u+2]=d.x1,l.uvs[8*u+3]=d.y1,l.uvs[8*u+4]=d.x2,l.uvs[8*u+5]=d.y2,l.uvs[8*u+6]=d.x3,l.uvs[8*u+7]=d.y3}this._textWidth=m*n,this._textHeight=(a.y+e.lineHeight)*n;for(const e in w){const t=w[e];if(0!==this.anchor.x||0!==this.anchor.y){let e=0;const n=this._textWidth*this.anchor.x,a=this._textHeight*this.anchor.y;for(let r=0;r<t.total;r++)t.vertices[e++]-=n,t.vertices[e++]-=a,t.vertices[e++]-=n,t.vertices[e++]-=a,t.vertices[e++]-=n,t.vertices[e++]-=a,t.vertices[e++]-=n,t.vertices[e++]-=a}this._maxLineHeight=v*n;const a=t.mesh.geometry.getBuffer("aVertexPosition"),r=t.mesh.geometry.getBuffer("aTextureCoord"),o=t.mesh.geometry.getIndex();a.data=t.vertices,r.data=t.uvs,o.data=t.indices,a.update(),r.update(),o.update()}for(let e=0;e<r.length;e++)nZ.push(r[e]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:n,size:a}=ZQ.available[this._fontName];if("none"!==n){const{a:n,b:r,c:o,d:i}=this.worldTransform,s=Math.sqrt(n*n+r*r),l=Math.sqrt(o*o+i*i),c=(Math.abs(s)+Math.abs(l))/2,d=this.fontSize/a,u=e._view.resolution;for(const e of this._activePagesMeshData)e.mesh.shader.uniforms.uFWidth=c*t*d*u}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=ZQ.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!ZQ.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??ZQ.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){"number"==typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n="none"===ZQ.available[this._fontName].distanceFieldType?eZ:tZ;n.push(...this._activePagesMeshData);for(const e of this._activePagesMeshData)this.removeChild(e.mesh);this._activePagesMeshData=[],n.filter(e=>t[e.mesh.texture.baseTexture.uid]).forEach(e=>{e.mesh.texture=oW.EMPTY});for(const e in t)t[e].destroy(),delete t[e];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}}).styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const aZ=[".xml",".fnt"],rZ={extension:{type:_H.LoadParser,priority:fJ.Normal},name:"loadBitmapFont",test:e=>aZ.includes(AG.extname(e).toLowerCase()),testParse:async e=>GQ.test(e)||YQ.test(e),async parse(e,t,n){const a=GQ.test(e)?GQ.parse(e):YQ.parse(e),{src:r}=t,{page:o}=a,i=[];for(let e=0;e<o.length;++e){const t=o[e].file;let n=AG.join(AG.dirname(r),t);n=nK(n,r),i.push(n)}const s=await n.load(i),l=i.map(e=>s[e]);return ZQ.install(a,l,!0)},load:async(e,t)=>(await rG.ADAPTER.fetch(e)).text(),unload(e){e.destroy()}};DH.add(rZ);const oZ=class e extends hQ{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new e(Object.keys(e.defaultOptions).reduce((e,n)=>({...e,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,0===t.refs&&(t.fontFace&&document.fonts.delete(t.fontFace),delete e.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,n={}){const{availableFonts:a}=e;if(a[t]){const e=a[t];return this._fonts.push(e),e.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return rG.ADAPTER.fetch(t).then(e=>e.blob()).then(async e=>new Promise((t,n)=>{const a=URL.createObjectURL(e),r=new FileReader;r.onload=()=>t([a,r.result]),r.onerror=n,r.readAsDataURL(e)})).then(async([e,r])=>{const o=Object.assign({family:AG.basename(t,AG.extname(t)),weight:"normal",style:"normal",display:"auto",src:e,dataSrc:r,refs:1,originalUrl:t,fontFace:null},n);a[t]=o,this._fonts.push(o),this.styleID++;const i=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=i,await i.load(),document.fonts.add(i),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(e=>!this._overrides.includes(e));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(e=>this._overrides.includes(e));t.length>0&&(this._overrides=this._overrides.filter(e=>!t.includes(e)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?["word-wrap: "+(this.breakWords?"break-all":"break-word"),`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}\n            @font-face {\n                font-family: "${t.family}";\n                src: url('${t.dataSrc}');\n                font-weight: ${t.weight};\n                font-style: ${t.style};\n                font-display: ${t.display};\n            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(n=e,VG("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),e=sH.shared.setValue(n).toNumber()),"number"==typeof e?(t=e,VG("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),sH.shared.setValue(t).toHex()):e;var t,n}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),a=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(255*t|0).toString(16).padStart(2,"0"));const r=`${n}px ${a}px`;return this.dropShadowBlur>0?`text-shadow: ${r} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${r} ${e}`}reset(){Object.assign(this,e.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=rG.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};oZ.availableFonts={},oZ.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let iZ=oZ;const sZ=class e extends PX{constructor(t="",n={}){super(oW.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const a=new Image,r=oW.from(a,{scaleMode:rG.SCALE_MODE,resourceOptions:{autoLoad:!1}});r.orig=new oY,r.trim=new oY,this.texture=r;const o="http://www.w3.org/2000/svg",i="http://www.w3.org/1999/xhtml",s=document.createElementNS(o,"svg"),l=document.createElementNS(o,"foreignObject"),c=document.createElementNS(i,"div"),d=document.createElementNS(i,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",s.appendChild(l),this.maxWidth=e.defaultMaxWidth,this.maxHeight=e.defaultMaxHeight,this._domElement=c,this._styleElement=d,this._svgRoot=s,this._foreignObject=l,this._foreignObject.appendChild(d),this._foreignObject.appendChild(c),this._image=a,this._loadImage=new Image,this._autoResolution=e.defaultAutoResolution,this._resolution=e.defaultResolution??rG.RESOLUTION,this.text=t,this.style=n}measureText(e){const{text:t,style:n,resolution:a}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(a)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const r=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:i}=r;(o>this.maxWidth||i>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const s=Math.min(this.maxWidth,Math.ceil(o)),l=Math.min(this.maxHeight,Math.ceil(i));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",l.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(a)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:s+2*n.padding,height:l+2*n.padding}}async updateText(e=!0){const{style:t,_image:n,_loadImage:a}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:r,height:o}=this.measureText();n.width=a.width=Math.ceil(Math.max(1,r)),n.height=a.height=Math.ceil(Math.max(1,o)),this._updateID++;const i=this._updateID;await new Promise(e=>{a.onload=async()=>{i<this._updateID||(await t.onBeforeDraw(),n.src=a.src,a.onload=null,a.src="",this.updateTexture()),e()};const r=(new XMLSerializer).serializeToString(this._svgRoot);a.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(r)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:n,resolution:a}=this,{padding:r}=e,{baseTexture:o}=t;t.trim.width=t._frame.width=n.width/a,t.trim.height=t._frame.height=n.height/a,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-2*r,t.orig.height=t._frame.height-2*r,this._onTextureUpdate(),o.setRealSize(n.width,n.height,a),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},e.defaultDestroyOptions,t),super.destroy(t);const n=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=n,this._svgRoot?.remove(),this._svgRoot=n,this._domElement?.remove(),this._domElement=n,this._foreignObject?.remove(),this._foreignObject=n,this._styleElement?.remove(),this._styleElement=n,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=n,this._image.src="",this._image=n}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=gH(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=gH(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&((e=e||{})instanceof iZ?(this.ownsStyle=!1,this._style=e):e instanceof hQ?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=iZ.from(e)):(this.ownsStyle=!0,this._style=new iZ(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(""===e||null==e?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};sZ.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},sZ.defaultMaxWidth=2024,sZ.defaultMaxHeight=2024,sZ.defaultAutoResolution=!0;class lZ{app;worldContainer;layers;config;locationSprites=new Map;eventCallbacks=new Map;continentBounds=new Map;isDragging=!1;dragStart={x:0,y:0};lastPosition={x:0,y:0};dragDistance=0;isPinching=!1;initialPinchDistance=0;initialPinchScale=1;pinchCenter={x:0,y:0};boundOnDragStart;boundOnDragMove;boundOnDragEnd;boundOnTouchStart;boundOnTouchMove;boundOnTouchEnd;boundOnWheel;constructor(e,t){this.config=t,this.boundOnDragStart=this.onDragStart.bind(this),this.boundOnDragMove=this.onDragMove.bind(this),this.boundOnDragEnd=this.onDragEnd.bind(this),this.boundOnTouchStart=this.onTouchStart.bind(this),this.boundOnTouchMove=this.onTouchMove.bind(this),this.boundOnTouchEnd=this.onTouchEnd.bind(this),this.boundOnWheel=this.onWheel.bind(this);const n=e.getBoundingClientRect(),a=n.width||e.clientWidth||800,r=n.height||e.clientHeight||600;this.app=new oJ({view:e,width:a,height:r,backgroundColor:16317180,antialias:!0,resolution:window.devicePixelRatio||1,autoDensity:!0,eventMode:"none"}),this.app.renderer.events&&this.app.renderer.events.destroy(),console.log("[åœ°å›¾ç®¡ç†å™¨] Pixiåº”ç”¨åˆå§‹åŒ–å®Œæˆ"),this.worldContainer=new IX,this.worldContainer.sortableChildren=!0,this.worldContainer.eventMode="none",this.worldContainer.interactiveChildren=!1,this.app.stage.addChild(this.worldContainer),this.layers=new Map,this.initLayers(),this.drawBackground(),this.setupDragInteraction(),this.setZoom(.5,!1),this.centerTo(t.width/2,t.height/2,!1),console.log("[åœ°å›¾ç®¡ç†å™¨] åˆå§‹åŒ–å®Œæˆ",{worldSize:`${t.width}x${t.height}`,screenSize:`${a}x${r}`,initialZoom:.5,initialCenter:{x:t.width/2,y:t.height/2}})}setupDragInteraction(){const e=this.app.view;e.addEventListener("mousedown",this.boundOnDragStart),e.addEventListener("mousemove",this.boundOnDragMove),e.addEventListener("mouseup",this.boundOnDragEnd),e.addEventListener("mouseleave",this.boundOnDragEnd),e.addEventListener("touchstart",this.boundOnTouchStart,{passive:!1}),e.addEventListener("touchmove",this.boundOnTouchMove,{passive:!1}),e.addEventListener("touchend",this.boundOnTouchEnd),e.addEventListener("wheel",this.boundOnWheel,{passive:!1})}onDragStart(e){this.isDragging=!0,this.dragStart={x:e.clientX,y:e.clientY},this.lastPosition={x:this.worldContainer.x,y:this.worldContainer.y},this.dragDistance=0,this.app.view.style.cursor="grabbing",this.clickStartPos={x:e.clientX,y:e.clientY},this.clickStartTime=Date.now()}clickStartPos={x:0,y:0};clickStartTime=0;onDragMove(e){if(!this.isDragging)return;const t=e.clientX-this.dragStart.x,n=e.clientY-this.dragStart.y;this.dragDistance+=Math.abs(t-(this.worldContainer.x-this.lastPosition.x))+Math.abs(n-(this.worldContainer.y-this.lastPosition.y)),this.worldContainer.x=this.lastPosition.x+t,this.worldContainer.y=this.lastPosition.y+n}onDragEnd(e){if(e&&this.isDragging){const t=Date.now()-this.clickStartTime;console.log("[åœ°å›¾ç®¡ç†å™¨] æ‹–æ‹½ç»“æŸ:",{dragDistance:this.dragDistance,time:t}),this.dragDistance<10&&t<500?(console.log("[åœ°å›¾ç®¡ç†å™¨] åˆ¤å®šä¸ºç‚¹å‡»äº‹ä»¶"),this.handleClick(e)):console.log("[åœ°å›¾ç®¡ç†å™¨] åˆ¤å®šä¸ºæ‹–æ‹½äº‹ä»¶ï¼Œä¸è§¦å‘ç‚¹å‡»")}this.isDragging=!1,this.dragDistance=0,this.app.view.style.cursor="grab"}handleClick(e){const t=this.app.view.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top,r=this.worldContainer.scale.x,o=(n-this.worldContainer.x)/r,i=(a-this.worldContainer.y)/r,s=this.layers.get(4);if(s){let e=null,t=1/0;if(s.children.forEach(n=>{if(!(n instanceof IX))return;const a=n.userData;if(!a)return;const r=Math.sqrt(Math.pow(o-n.x,2)+Math.pow(i-n.y,2));r<t&&(t=r,e=a)}),e&&t<50)return console.log(`[åœ°å›¾] ç‚¹å‡»åœ°ç‚¹: ${e.data.name}ï¼Œè·ç¦»: ${t.toFixed(0)}`),void this.emit("locationClick",{...e.data,clickPosition:{x:n,y:a}})}const l=this.layers.get(3);if(l)for(const e of l.children)if(e instanceof eQ){const t=e.userData;if(t&&"location"===t.type){const r=e.territoryBounds;if(r&&this.isPointInPolygon(o,i,r))return console.log(`[åœ°å›¾] ç‚¹å‡»åŠ¿åŠ›èŒƒå›´: ${t.data.name}`),void this.emit("locationClick",{...t.data,clickPosition:{x:n,y:a}})}}console.log(`[åœ°å›¾] æ£€æµ‹å¤§é™†ç‚¹å‡»ï¼Œä¸–ç•Œåæ ‡: (${o.toFixed(0)}, ${i.toFixed(0)})ï¼Œå…±æœ‰${this.continentBounds.size}ä¸ªå¤§é™†`);const c=[];if(this.continentBounds.forEach((e,t)=>{const n=this.isPointInPolygon(o,i,e.bounds);if(console.log(`[åœ°å›¾] æ£€æµ‹å¤§é™† "${e.data.name}":`,{isInside:n,bounds:e.bounds,boundsCount:e.bounds.length}),n){const n=this.calculatePolygonArea(e.bounds);c.push({id:t,data:e.data,area:n})}}),c.length>0){c.sort((e,t)=>e.area-t.area);const e=c[0];return console.log(`[åœ°å›¾] ç‚¹å‡»å¤§é™†: ${e.data.name}ï¼ˆå…±åŒ¹é…${c.length}ä¸ªå¤§é™†ï¼Œé€‰æ‹©æœ€å°çš„ï¼‰`),void this.emit("continentClick",{...e.data,clickPosition:{x:n,y:a}})}console.log("[åœ°å›¾] ç‚¹å‡»ç©ºç™½åŒºåŸŸ")}emitClickEvent(e){"location"===e.type?this.emit("locationClick",e.data):"continent"===e.type&&this.emit("continentClick",e.data)}getTouchDistance(e){const t=e[0].clientX-e[1].clientX,n=e[0].clientY-e[1].clientY;return Math.sqrt(t*t+n*n)}getTouchCenter(e){return{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}}onTouchStart(e){if(e.preventDefault(),2===e.touches.length)this.isDragging=!1,this.isPinching=!0,this.initialPinchDistance=this.getTouchDistance(e.touches),this.initialPinchScale=this.worldContainer.scale.x,this.pinchCenter=this.getTouchCenter(e.touches),this.lastPosition={x:this.worldContainer.x,y:this.worldContainer.y};else if(1===e.touches.length){this.isPinching=!1;const t=e.touches[0];this.isDragging=!0,this.dragStart={x:t.clientX,y:t.clientY},this.lastPosition={x:this.worldContainer.x,y:this.worldContainer.y},this.dragDistance=0}}onTouchMove(e){if(e.preventDefault(),2===e.touches.length&&this.isPinching){const t=this.getTouchDistance(e.touches),n=this.getTouchCenter(e.touches),a=t/this.initialPinchDistance*this.initialPinchScale,r=this.config.minZoom||.1,o=this.config.maxZoom||4,i=Math.max(r,Math.min(o,a)),s=(this.pinchCenter.x-this.lastPosition.x)/this.initialPinchScale,l=(this.pinchCenter.y-this.lastPosition.y)/this.initialPinchScale;this.worldContainer.scale.set(i);const c=n.x-this.pinchCenter.x,d=n.y-this.pinchCenter.y;this.worldContainer.x=this.pinchCenter.x-s*i+c,this.worldContainer.y=this.pinchCenter.y-l*i+d}else if(1===e.touches.length&&this.isDragging&&!this.isPinching){const t=e.touches[0],n=t.clientX-this.dragStart.x,a=t.clientY-this.dragStart.y;this.dragDistance+=Math.abs(n-(this.worldContainer.x-this.lastPosition.x))+Math.abs(a-(this.worldContainer.y-this.lastPosition.y)),this.worldContainer.x=this.lastPosition.x+n,this.worldContainer.y=this.lastPosition.y+a}}onTouchEnd(e){if(1===e.touches.length&&this.isPinching){this.isPinching=!1,this.isDragging=!0;const t=e.touches[0];this.dragStart={x:t.clientX,y:t.clientY},this.lastPosition={x:this.worldContainer.x,y:this.worldContainer.y},this.dragDistance=0}else 0===e.touches.length&&(this.isDragging=!1,this.isPinching=!1)}onWheel(e){e.preventDefault();const t=e.deltaY>0?.9:1.1,n=this.worldContainer.scale.x*t,a=this.config.minZoom||.1,r=this.config.maxZoom||4,o=Math.max(a,Math.min(r,n)),i=e.clientX,s=e.clientY,l=(i-this.worldContainer.x)/this.worldContainer.scale.x,c=(s-this.worldContainer.y)/this.worldContainer.scale.y;this.worldContainer.scale.set(o),this.worldContainer.x=i-l*o,this.worldContainer.y=s-c*o}initLayers(){[0,1,2,3,4,5,6].forEach(e=>{const t=new IX;t.sortableChildren=!0,this.layers.set(e,t),this.worldContainer.addChild(t)}),console.log("[åœ°å›¾ç®¡ç†å™¨] å›¾å±‚åˆå§‹åŒ–å®Œæˆï¼Œå…±",this.layers.size,"ä¸ªå›¾å±‚")}drawBackground(){const e=this.layers.get(0);if(!e)return;const t=new eQ;t.beginFill(16317180),t.drawRect(0,0,this.config.width,this.config.height),t.endFill(),e.addChild(t);const n=new eQ,a=this.config.tileSize;n.lineStyle(.5,13358561,.3);for(let e=0;e<=this.config.width;e+=a)n.moveTo(e,0),n.lineTo(e,this.config.height);for(let e=0;e<=this.config.height;e+=a)n.moveTo(0,e),n.lineTo(this.config.width,e);e.addChild(n)}addContinent(e){const t=this.layers.get(2);if(!t)return;const n=e.continent_bounds||e.å¤§æ´²è¾¹ç•Œ;if(!n||n.length<3)return;const a=new eQ;a.beginFill(3900150,.12),a.moveTo(n[0].x,n[0].y);for(let e=1;e<n.length;e++)a.lineTo(n[e].x,n[e].y);a.closePath(),a.endFill(),a.lineStyle(2.5,2450411,.75),a.moveTo(n[0].x,n[0].y);for(let e=1;e<n.length;e++)a.lineTo(n[e].x,n[e].y);a.closePath(),a.eventMode="none";const r={id:e.id,name:e.name||e.åç§°,description:e.description||e.æè¿°,ç‰¹ç‚¹:e.ç‰¹ç‚¹,ä¸»è¦åŠ¿åŠ›:e.ä¸»è¦åŠ¿åŠ›};a.userData={type:"continent",data:r};const o=e.id||`continent_${Date.now()}_${Math.random()}`;this.continentBounds.set(o,{bounds:n,data:r}),t.addChild(a);const i=this.calculatePolygonCenter(n),s=new kQ(e.name||e.åç§°||"æœªçŸ¥å¤§é™†",{fontFamily:"Microsoft YaHei, SimHei, sans-serif",fontSize:280,fill:1982639,fontWeight:"bold",align:"center",stroke:"#ffffff",strokeThickness:8});s.anchor.set(.5),s.x=i.x,s.y=i.y,s.alpha=.2,s.eventMode="none",t.addChild(s),console.log("[åœ°å›¾ç®¡ç†å™¨] æ·»åŠ å¤§é™†:",e.name||e.åç§°,"| ID:",o,"| è¾¹ç•Œç‚¹æ•°:",n.length,"| å½“å‰å­˜å‚¨çš„å¤§é™†æ•°:",this.continentBounds.size)}addLocation(e){const t=this.layers.get(4);if(!t)return;const n=new IX;n.x=e.coordinates?.x||0,n.y=e.coordinates?.y||0,n.eventMode="none";const a=this.createLocationIcon(e.type,e.iconColor||"#6B7280");n.addChild(a);const r=new kQ(e.name,{fontFamily:"Microsoft YaHei, SimHei, sans-serif",fontSize:36,fill:e.iconColor||"#6B7280",fontWeight:"700",align:"center",stroke:"#ffffff",strokeThickness:4});r.anchor.set(.5,0),r.y=28,r.eventMode="none",n.addChild(r),n.userData={type:"location",data:{id:e.id,name:e.name,coordinates:e.coordinates||{x:0,y:0},location:e}},t.addChild(n),this.locationSprites.set(e.id,n),console.log("[åœ°å›¾ç®¡ç†å™¨] æ·»åŠ åœ°ç‚¹:",e.name,`(${e.coordinates?.x}, ${e.coordinates?.y})`)}createLocationIcon(e,t){const n=new eQ,a=parseInt(t.replace("#",""),16);switch(n.alpha=.9,e){case"natural_landmark":n.beginFill(a,.8),n.moveTo(0,-12),n.lineTo(-8,8),n.lineTo(8,8),n.closePath(),n.endFill();break;case"sect_power":n.beginFill(a,.8),n.drawRect(-8,-8,16,16),n.endFill(),n.beginFill(16777215,.9),n.drawRect(-3,0,6,8),n.endFill();break;case"city_town":n.beginFill(a,.8),n.drawCircle(0,0,10),n.endFill(),n.beginFill(16777215,.9),n.drawCircle(0,0,4),n.endFill();break;case"blessed_land":n.beginFill(a,.7),n.drawCircle(0,0,10),n.endFill(),n.beginFill(16777215,.9);const e=5,t=6,r=3;for(let a=0;a<2*e;a++){const o=a%2==0?t:r,i=Math.PI/e*a-Math.PI/2,s=Math.cos(i)*o,l=Math.sin(i)*o;0===a?n.moveTo(s,l):n.lineTo(s,l)}n.closePath(),n.endFill();break;case"treasure_land":n.beginFill(a,.8),n.moveTo(0,-10),n.lineTo(8,0),n.lineTo(0,10),n.lineTo(-8,0),n.closePath(),n.endFill();break;case"dangerous_area":n.beginFill(a,.8),n.drawCircle(0,0,10),n.endFill(),n.lineStyle(2,16777215),n.moveTo(0,-6),n.lineTo(0,2),n.beginFill(16777215),n.drawCircle(0,5,1.5),n.endFill();break;case"special_other":n.beginFill(a,.8),n.moveTo(2,-10),n.lineTo(-6,2),n.lineTo(0,2),n.lineTo(-2,10),n.lineTo(6,-2),n.lineTo(0,-2),n.closePath(),n.endFill();break;default:n.beginFill(a,.8),n.drawCircle(0,0,8),n.endFill()}return n}addTerritory(e){if(!e.territoryBounds||e.territoryBounds.length<3)return;const t=this.layers.get(3);if(!t)return;const n=e.territoryBounds,a=new eQ,r=parseInt((e.color||"#6B7280").replace("#",""),16);a.beginFill(r,.15),a.moveTo(n[0].x,n[0].y);for(let e=1;e<n.length;e++)a.lineTo(n[e].x,n[e].y);a.closePath(),a.endFill(),a.lineStyle(2,r,.6),a.moveTo(n[0].x,n[0].y);for(let e=1;e<n.length;e++)a.lineTo(n[e].x,n[e].y);a.closePath(),a.eventMode="none",a.userData={type:"location",data:{id:e.id,name:e.name,coordinates:e.coordinates||{x:0,y:0},location:e}},a.territoryBounds=n,t.addChild(a);const o=this.calculatePolygonCenter(n),i=new kQ(e.name,{fontFamily:"Microsoft YaHei, SimHei, sans-serif",fontSize:100,fill:e.iconColor||"#6B7280",fontWeight:"bold",align:"center",stroke:"#ffffff",strokeThickness:6});i.anchor.set(.5),i.x=o.x,i.y=o.y,i.alpha=.18,i.eventMode="none",t.addChild(i),console.log("[åœ°å›¾ç®¡ç†å™¨] æ·»åŠ åŠ¿åŠ›èŒƒå›´:",e.name)}updatePlayerPosition(e,t="ç©å®¶"){const n=this.layers.get(5);if(!n)return;n.removeChildren();const a=new IX;a.x=e.x,a.y=e.y;const r=new eQ;r.beginFill(15680580,.25),r.drawCircle(0,0,20),r.endFill(),a.addChild(r);const o=new eQ;o.beginFill(16498468,.4),o.drawCircle(0,0,12),o.endFill(),a.addChild(o);const i=new eQ;i.beginFill(14427686),i.moveTo(0,-12),i.lineTo(-8,8),i.lineTo(8,8),i.closePath(),i.endFill(),i.lineStyle(2,16708338),i.moveTo(0,-12),i.lineTo(-8,8),i.lineTo(8,8),i.closePath(),i.beginFill(16708338),i.drawCircle(0,0,3),i.endFill(),i.beginFill(14427686),i.drawCircle(0,0,1.5),i.endFill(),a.addChild(i);const s=new kQ(t,{fontFamily:"Microsoft YaHei, sans-serif",fontSize:40,fill:14427686,fontWeight:"700",align:"center",stroke:"#ffffff",strokeThickness:5});s.anchor.set(.5,0),s.y=32,a.addChild(s),n.addChild(a),console.log("[åœ°å›¾ç®¡ç†å™¨] æ›´æ–°ç©å®¶ä½ç½®:",e)}centerTo(e,t,n=!0){const a=this.app.screen.width/2-e*this.worldContainer.scale.x,r=this.app.screen.height/2-t*this.worldContainer.scale.y;if(n){const e=this.worldContainer.x,t=this.worldContainer.y,n=500,o=Date.now(),i=()=>{const s=Date.now()-o,l=Math.min(s/n,1),c=l<.5?2*l*l:1-Math.pow(-2*l+2,2)/2;this.worldContainer.x=e+(a-e)*c,this.worldContainer.y=t+(r-t)*c,l<1&&requestAnimationFrame(i)};requestAnimationFrame(i)}else this.worldContainer.x=a,this.worldContainer.y=r}getViewportState(){return{x:(this.app.screen.width/2-this.worldContainer.x)/this.worldContainer.scale.x,y:(this.app.screen.height/2-this.worldContainer.y)/this.worldContainer.scale.y,scale:this.worldContainer.scale.x,screenWidth:this.app.screen.width,screenHeight:this.app.screen.height}}setZoom(e,t=!0){const n=this.config.minZoom||.1,a=this.config.maxZoom||4,r=Math.max(n,Math.min(a,e)),o=(this.app.screen.width/2-this.worldContainer.x)/this.worldContainer.scale.x,i=(this.app.screen.height/2-this.worldContainer.y)/this.worldContainer.scale.y;if(t){const e=this.worldContainer.scale.x,t=300,n=Date.now(),a=()=>{const s=Date.now()-n,l=Math.min(s/t,1),c=l<.5?2*l*l:1-Math.pow(-2*l+2,2)/2,d=e+(r-e)*c;this.worldContainer.scale.set(d),this.worldContainer.x=this.app.screen.width/2-o*d,this.worldContainer.y=this.app.screen.height/2-i*d,l<1&&requestAnimationFrame(a)};requestAnimationFrame(a)}else this.worldContainer.scale.set(r),this.worldContainer.x=this.app.screen.width/2-o*r,this.worldContainer.y=this.app.screen.height/2-i*r}calculatePolygonCenter(e){if(0===e.length)return{x:0,y:0};const t=e.reduce((e,t)=>e+t.x,0),n=e.reduce((e,t)=>e+t.y,0);return{x:t/e.length,y:n/e.length}}isPointInPolygon(e,t,n){let a=!1;for(let r=0,o=n.length-1;r<n.length;o=r++){const i=n[r].x,s=n[r].y,l=n[o].x,c=n[o].y;s>t!=c>t&&e<(l-i)*(t-s)/(c-s)+i&&(a=!a)}return a}calculatePolygonArea(e){let t=0;for(let n=0;n<e.length;n++){const a=(n+1)%e.length;t+=e[n].x*e[a].y,t-=e[a].x*e[n].y}return Math.abs(t/2)}on(e,t){this.eventCallbacks.has(e)||this.eventCallbacks.set(e,[]),this.eventCallbacks.get(e).push(t)}emit(e,t){const n=this.eventCallbacks.get(e);n&&n.forEach(e=>e(t))}clear(){this.layers.forEach(e=>{const t=[...e.children];e.removeChildren(),t.forEach(e=>{try{e.destroy({children:!0,texture:!1,baseTexture:!1})}catch{}})}),this.locationSprites.clear(),this.continentBounds.clear(),this.drawBackground(),console.log("[åœ°å›¾ç®¡ç†å™¨] åœ°å›¾å·²æ¸…ç©º")}resize(e,t){this.app.renderer.resize(e,t),console.log("[åœ°å›¾ç®¡ç†å™¨] è°ƒæ•´å¤§å°:",`${e}x${t}`)}destroy(){const e=this.app.view;e.removeEventListener("mousedown",this.boundOnDragStart),e.removeEventListener("mousemove",this.boundOnDragMove),e.removeEventListener("mouseup",this.boundOnDragEnd),e.removeEventListener("mouseleave",this.boundOnDragEnd),e.removeEventListener("touchstart",this.boundOnTouchStart),e.removeEventListener("touchmove",this.boundOnTouchMove),e.removeEventListener("touchend",this.boundOnTouchEnd),e.removeEventListener("wheel",this.boundOnWheel),this.app.ticker.stop();try{this.worldContainer.destroy({children:!0})}catch{}try{this.app.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}catch{}this.layers.clear(),this.locationSprites.clear(),this.eventCallbacks.clear(),this.continentBounds.clear(),console.log("[åœ°å›¾ç®¡ç†å™¨] å·²é”€æ¯")}}function cZ(e){return e.map((e,t)=>{let n,a;void 0!==e.coordinates?.x&&void 0!==e.coordinates?.y?n={x:Math.max(0,Math.min(1e4,Number(e.coordinates.x))),y:Math.max(0,Math.min(1e4,Number(e.coordinates.y)))}:void 0!==e.ä½ç½®?.x&&void 0!==e.ä½ç½®?.y?n={x:Math.max(0,Math.min(1e4,Number(e.ä½ç½®.x))),y:Math.max(0,Math.min(1e4,Number(e.ä½ç½®.y)))}:(n=function(e=5e3,t=5e3,n=3e3){const a=Math.random()*Math.PI*2,r=Math.random()*n;return{x:Math.max(0,Math.min(1e4,e+Math.cos(a)*r)),y:Math.max(0,Math.min(1e4,t+Math.sin(a)*r))}}(5e3,5e3,4e3),console.warn(`[åæ ‡] åœ°ç‚¹ "${e.åç§°||e.name||`åœ°ç‚¹${t}`}" ç¼ºå°‘åæ ‡ï¼Œå·²éšæœºç”Ÿæˆ: (${n.x.toFixed(0)}, ${n.y.toFixed(0)})`));const r=e.territoryBounds||e.åŠ¿åŠ›èŒƒå›´;return r&&Array.isArray(r)&&r.length>=3&&(a=r.map(e=>({x:Math.max(0,Math.min(1e4,Number(e.x))),y:Math.max(0,Math.min(1e4,Number(e.y)))})),console.log(`[åæ ‡] åŠ¿åŠ› "${e.åç§°||e.name}" æœ‰åŠ¿åŠ›èŒƒå›´ï¼Œå…± ${a.length} ä¸ªè¾¹ç•Œç‚¹`)),{...e,id:e.id||`loc_${t}_${Date.now()}`,name:e.name||e.åç§°||`æœªå‘½ååœ°ç‚¹${t}`,type:e.type||e.ç±»å‹||"special_other",description:e.description||e.æè¿°||"",coordinates:n,territoryBounds:a,headquarters:n}})}var dZ=n(2347);const uZ={class:"game-map-panel"},mZ={key:0,class:"world-info-header"},pZ={class:"world-name"},fZ={class:"world-background"},gZ={key:0,class:"initialize-map-overlay"},hZ={key:1,class:"initialize-map-overlay"},vZ={class:"initialize-prompt"},bZ={class:"status-text"},yZ={class:"popup-header"},xZ={class:"popup-content"},kZ={class:"location-type"},wZ={class:"location-desc"},EZ={key:0,class:"location-detail"},NZ={key:1,class:"location-detail"},SZ={key:2,class:"location-detail"},VZ={class:"popup-header"},_Z={class:"popup-content"},CZ={class:"location-type"},AZ={class:"location-desc"},DZ={key:0,class:"location-detail"},TZ={key:1,class:"location-detail"},BZ={key:0},IZ={key:2,class:"location-detail"},zZ={key:3,class:"location-detail"},MZ={key:4,class:"location-detail"},PZ={class:"popup-header"},RZ={class:"popup-content"},$Z={class:"location-desc"},OZ={key:0,class:"location-detail"},LZ={key:1,class:"location-detail"},FZ={key:2,class:"location-detail"},jZ={key:3,class:"location-detail"},UZ={key:4,class:"location-detail"},qZ={class:"map-legend"},GZ={class:"legend-title"},HZ=(0,r.defineComponent)({__name:"GameMapPanel",setup(e){const t=(0,Iu.useGameStateStore)(),n=(0,r.ref)(null),a=(0,r.ref)(null),o=(0,r.ref)(null),i=(0,r.ref)(null),s=(0,r.ref)(null),l=(0,r.ref)("åˆå§‹åŒ–ä¸­..."),c=(0,r.ref)({x:0,y:0}),d=(0,r.ref)(!1),u=(0,r.computed)(()=>t.worldInfo?.ä¸–ç•Œåç§°||"ä¿®ä»™ç•Œ"),m=(0,r.computed)(()=>t.worldInfo?.ä¸–ç•ŒèƒŒæ™¯||""),p=(0,r.computed)(()=>{const e=t.worldInfo;if(!e)return!1;const n=e.åœ°ç‚¹ä¿¡æ¯?.length>0,a=e.åŠ¿åŠ›ä¿¡æ¯?.length>0;return n||a}),f={natural_landmark:"åå±±å¤§å·",sect_power:"å®—é—¨åŠ¿åŠ›",city_town:"åŸé•‡åŠå¸‚",blessed_land:"æ´å¤©ç¦åœ°",treasure_land:"å¥‡çå¼‚åœ°",dangerous_area:"å‡¶é™©ä¹‹åœ°",special_other:"å…¶ä»–ç‰¹æ®Š"},g=e=>!!("ä¿®ä»™å®—é—¨"===e.ç±»å‹||"é­”é“å®—é—¨"===e.ç±»å‹||"ä¿®ä»™ä¸–å®¶"===e.ç±»å‹||"æ•£ä¿®è”ç›Ÿ"===e.ç±»å‹||"å•†ä¼š"===e.ç±»å‹||"å¦–æ—åŠ¿åŠ›"===e.ç±»å‹||"sect_power"===e.type||e.leadership||e.é¢†å¯¼å±‚||e.memberCount||e.æˆå‘˜æ•°é‡),h=(0,r.computed)(()=>{if(!i.value&&!s.value)return{};const e=a.value?.getBoundingClientRect();if(!e)return{};let t=c.value.x,n=c.value.y;return t+160>e.width-20&&(t=e.width-160-20),t-160<20&&(t=180),n-200<20?n+=60:n-=20,{position:"absolute",left:`${t}px`,top:`${n}px`,transform:"translate(-50%, -100%)",zIndex:"2000"}});(0,r.onMounted)(async()=>{if(n.value&&a.value)try{l.value="æ­£åœ¨åˆå§‹åŒ–åœ°å›¾...",await new Promise(e=>requestAnimationFrame(e));const e=a.value.getBoundingClientRect(),t=n.value;t.width=e.width,t.height=e.height,console.log("[åœ°å›¾] Canvas å°ºå¯¸:",{width:e.width,height:e.height}),o.value=new lZ(t,{width:1e4,height:1e4,tileSize:100,minZoom:.1,maxZoom:4}),o.value.on("locationClick",e=>{y(e)}),o.value.on("continentClick",e=>{x(e)}),await b(),window.addEventListener("resize",w),document.addEventListener("fullscreenchange",E),l.value="åœ°å›¾åŠ è½½å®Œæˆ"}catch(e){console.error("[åœ°å›¾] åˆå§‹åŒ–å¤±è´¥:",e),l.value="åœ°å›¾åŠ è½½å¤±è´¥",ne.o.error("åœ°å›¾åˆå§‹åŒ–å¤±è´¥: "+e.message)}}),(0,r.onUnmounted)(()=>{window.removeEventListener("resize",w),document.removeEventListener("fullscreenchange",E),o.value?.destroy()}),(0,r.watch)(()=>t.location,e=>{if(e&&o.value){const n=t.character?.åå­—||"é“å‹";o.value.updatePlayerPosition(e,n)}},{deep:!0});const v=async()=>{const e=t.worldInfo;if(e){d.value=!0,l.value="å¼€å§‹ç”Ÿæˆåœ°å›¾å†…å®¹...";try{const n=new dZ.U({worldName:e.ä¸–ç•Œåç§°,worldBackground:e.ä¸–ç•ŒèƒŒæ™¯,worldEra:e.ä¸–ç•Œæ—¶ä»£||"ä¿®çœŸç››ä¸–",factionCount:5,locationCount:12,secretRealmsCount:3,continentCount:e.å¤§é™†ä¿¡æ¯?.length||3,maxRetries:3,retryDelay:1e3,onStreamChunk:e=>{l.value=e}});console.log("[åœ°å›¾] å¼€å§‹ç”Ÿæˆåœ°å›¾å†…å®¹...");const a=await n.generateValidatedWorld();if(a.success&&a.worldInfo){console.log("[åœ°å›¾] åœ°å›¾ç”ŸæˆæˆåŠŸï¼Œæ­£åœ¨æ›´æ–°æ¸¸æˆçŠ¶æ€...");const n={...e,åŠ¿åŠ›ä¿¡æ¯:a.worldInfo.åŠ¿åŠ›ä¿¡æ¯||[],åœ°ç‚¹ä¿¡æ¯:a.worldInfo.åœ°ç‚¹ä¿¡æ¯||[]};t.updateState("worldInfo",n),await b(),ne.o.success("åœ°å›¾åˆå§‹åŒ–å®Œæˆï¼"),console.log("[åœ°å›¾] åœ°å›¾åˆå§‹åŒ–å®Œæˆ")}else{const e=a.errors?.join(", ")||"ç”Ÿæˆå¤±è´¥";ne.o.error(`åœ°å›¾ç”Ÿæˆå¤±è´¥: ${e}`),console.error("[åœ°å›¾] ç”Ÿæˆå¤±è´¥:",a.errors)}}catch(e){console.error("[åœ°å›¾] åˆå§‹åŒ–å¤±è´¥:",e),ne.o.error("åœ°å›¾åˆå§‹åŒ–å¤±è´¥: "+e.message)}finally{d.value=!1,l.value="åˆå§‹åŒ–å®Œæˆ"}}else ne.o.error("æœªæ‰¾åˆ°ä¸–ç•Œä¿¡æ¯")},b=async()=>{try{l.value="æ­£åœ¨åŠ è½½ä¸–ç•Œæ•°æ®...";const e=t.worldInfo;if(!e)return ne.o.warning("æœªæ‰¾åˆ°ä¸–ç•Œæ•°æ®"),void(l.value="æœªæ‰¾åˆ°ä¸–ç•Œæ•°æ®");let n=0;if(e.å¤§é™†ä¿¡æ¯&&Array.isArray(e.å¤§é™†ä¿¡æ¯)&&(e.å¤§é™†ä¿¡æ¯.forEach(e=>{try{if(e.å¤§æ´²è¾¹ç•Œ||e.continent_bounds){const t=e.å¤§æ´²è¾¹ç•Œ||e.continent_bounds;e.continent_bounds=function(e){return e.map(e=>({x:Math.max(0,Math.min(1e4,e.x)),y:Math.max(0,Math.min(1e4,e.y))}))}(t),e.å¤§æ´²è¾¹ç•Œ=e.continent_bounds}o.value?.addContinent(e)}catch(t){console.error("[åœ°å›¾] åŠ è½½å¤§é™†å¤±è´¥:",e,t)}}),console.log(`[åœ°å›¾] å·²åŠ è½½ ${e.å¤§é™†ä¿¡æ¯.length} ä¸ªå¤§é™†`)),e.åŠ¿åŠ›ä¿¡æ¯&&Array.isArray(e.åŠ¿åŠ›ä¿¡æ¯)){const t=cZ(e.åŠ¿åŠ›ä¿¡æ¯);t.forEach(e=>{try{e.territoryBounds&&e.territoryBounds.length>=3&&o.value?.addTerritory(e)}catch(t){console.error("[åœ°å›¾] åŠ è½½åŠ¿åŠ›å¤±è´¥:",e,t)}}),console.log(`[åœ°å›¾] å·²åŠ è½½ ${t.length} ä¸ªåŠ¿åŠ›èŒƒå›´`)}if(e.åœ°ç‚¹ä¿¡æ¯&&Array.isArray(e.åœ°ç‚¹ä¿¡æ¯)){const t=cZ(e.åœ°ç‚¹ä¿¡æ¯);t.forEach(e=>{try{o.value?.addLocation(e),n++}catch(t){console.error("[åœ°å›¾] åŠ è½½åœ°ç‚¹å¤±è´¥:",e,t)}}),console.log(`[åœ°å›¾] å·²åŠ è½½ ${t.length} ä¸ªåœ°ç‚¹`)}const a=t.location;if(a){const e=t.character?.åå­—||"é“å‹";o.value?.updatePlayerPosition(a,e),console.log("[åœ°å›¾] å·²æ›´æ–°ç©å®¶ä½ç½®")}l.value=`å·²åŠ è½½ ${n} ä¸ªåœ°ç‚¹`,ne.o.success("åœ°å›¾åŠ è½½å®Œæˆ")}catch(e){console.error("[åœ°å›¾] åŠ è½½æ•°æ®å¤±è´¥:",e),l.value="æ•°æ®åŠ è½½å¤±è´¥",ne.o.error("åŠ è½½åœ°å›¾æ•°æ®å¤±è´¥: "+e.message)}},y=e=>{if(console.log("[åœ°å›¾] handleLocationClick è¢«è°ƒç”¨ï¼Œdata:",e),!e)return void console.warn("[åœ°å›¾] ç‚¹å‡»æ•°æ®ä¸ºç©º");const t=e;s.value=null,i.value=t.location||t,console.log("[åœ°å›¾] selectedLocation å·²è®¾ç½®:",i.value),t.clickPosition&&(c.value={x:t.clickPosition.x,y:t.clickPosition.y},console.log("[åœ°å›¾] å¼¹çª—ä½ç½®ï¼ˆç‚¹å‡»ä½ç½®ï¼‰:",c.value))},x=e=>{if(console.log("[åœ°å›¾] handleContinentClick è¢«è°ƒç”¨ï¼Œdata:",e),!e)return void console.warn("[åœ°å›¾] ç‚¹å‡»æ•°æ®ä¸ºç©º");const t=e;i.value=null,s.value=t,console.log("[åœ°å›¾] selectedContinent å·²è®¾ç½®:",s.value),t.clickPosition&&(c.value={x:t.clickPosition.x,y:t.clickPosition.y},console.log("[åœ°å›¾] å¼¹çª—ä½ç½®ï¼ˆç‚¹å‡»ä½ç½®ï¼‰:",c.value))},k=()=>{i.value=null,s.value=null},w=()=>{if(a.value&&o.value)try{const e=a.value.getBoundingClientRect();o.value.resize(e.width,e.height)}catch(e){console.warn("[åœ°å›¾] Resize é”™è¯¯ï¼ˆå·²å¿½ç•¥ï¼‰:",e)}},E=()=>{setTimeout(()=>{w()},100)};return(e,t)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",uZ,[(0,r.createCommentVNode)(" ä¸–ç•Œä¿¡æ¯å¤´éƒ¨ "),m.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",mZ,[(0,r.createElementVNode)("div",pZ,(0,r.toDisplayString)(u.value),1),(0,r.createElementVNode)("div",fZ,(0,r.toDisplayString)(m.value),1)])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" Pixi.js Canvaså®¹å™¨ "),(0,r.createElementVNode)("div",{class:"map-container",ref_key:"mapContainerRef",ref:a},[(0,r.createElementVNode)("canvas",{ref_key:"canvasRef",ref:n},null,512),(0,r.createCommentVNode)(" åˆå§‹åŒ–åœ°å›¾æŒ‰é’® (ä»…åœ¨åœ°å›¾ä¸ºç©ºæ—¶æ˜¾ç¤º) "),p.value||d.value?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("div",gZ,[(0,r.createElementVNode)("div",{class:"initialize-prompt"},[t[1]||(t[1]=(0,r.createElementVNode)("div",{class:"prompt-icon"},[(0,r.createElementVNode)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"map-icon"},[(0,r.createElementVNode)("path",{d:"M3 6l6-3 6 3 6-3v15l-6 3-6-3-6 3V6z"}),(0,r.createElementVNode)("path",{d:"M9 3v15M15 6v15"})])],-1)),t[2]||(t[2]=(0,r.createElementVNode)("h3",null,"åœ°å›¾å°šæœªåˆå§‹åŒ–",-1)),t[3]||(t[3]=(0,r.createElementVNode)("p",null,"å½“å‰ä¸–ç•Œè¿˜æ²¡æœ‰ç”ŸæˆåŠ¿åŠ›å’Œåœ°ç‚¹ï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹ç”Ÿæˆåœ°å›¾å†…å®¹",-1)),(0,r.createElementVNode)("button",{onClick:v,class:"initialize-btn"},t[0]||(t[0]=[(0,r.createElementVNode)("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2",class:"btn-icon"},[(0,r.createElementVNode)("circle",{cx:"12",cy:"12",r:"10"}),(0,r.createElementVNode)("path",{d:"M8 12h8M12 8v8"})],-1),(0,r.createTextVNode)(" åˆå§‹åŒ–åœ°å›¾ ",-1)]))])])),(0,r.createCommentVNode)(" åˆå§‹åŒ–è¿›è¡Œä¸­ "),d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",hZ,[(0,r.createElementVNode)("div",vZ,[t[4]||(t[4]=(0,r.createElementVNode)("div",{class:"loading-spinner"},null,-1)),t[5]||(t[5]=(0,r.createElementVNode)("h3",null,"æ­£åœ¨ç”Ÿæˆåœ°å›¾å†…å®¹...",-1)),(0,r.createElementVNode)("p",bZ,(0,r.toDisplayString)(l.value),1)])])):(0,r.createCommentVNode)("v-if",!0)],512),(0,r.createCommentVNode)(" åœ°ç‚¹ä¿¡æ¯å¼¹çª— "),i.value&&!g(i.value)?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:1,class:"location-popup",style:(0,r.normalizeStyle)(h.value)},[(0,r.createElementVNode)("div",yZ,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)(i.value.name),1),(0,r.createElementVNode)("button",{onClick:k,class:"close-btn"},"Ã—")]),(0,r.createElementVNode)("div",xZ,[(0,r.createElementVNode)("p",kZ,(0,r.toDisplayString)((c=i.value.type,f[c]||"æœªçŸ¥ç±»å‹")),1),(0,r.createElementVNode)("p",wZ,(0,r.toDisplayString)(i.value.description||i.value.æè¿°),1),i.value.danger_level?((0,r.openBlock)(),(0,r.createElementBlock)("div",EZ,[t[6]||(t[6]=(0,r.createElementVNode)("strong",null,"å®‰å…¨ç­‰çº§ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(i.value.danger_level),1)])):(0,r.createCommentVNode)("v-if",!0),i.value.suitable_for?((0,r.openBlock)(),(0,r.createElementBlock)("div",NZ,[t[7]||(t[7]=(0,r.createElementVNode)("strong",null,"é€‚åˆå¢ƒç•Œï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(i.value.suitable_for),1)])):(0,r.createCommentVNode)("v-if",!0),i.value.controlled_by?((0,r.openBlock)(),(0,r.createElementBlock)("div",SZ,[t[8]||(t[8]=(0,r.createElementVNode)("strong",null,"æ§åˆ¶åŠ¿åŠ›ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(i.value.controlled_by),1)])):(0,r.createCommentVNode)("v-if",!0)])],4)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" åŠ¿åŠ›ä¿¡æ¯å¼¹çª— "),i.value&&g(i.value)?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:2,class:"location-popup faction-popup",style:(0,r.normalizeStyle)(h.value)},[(0,r.createElementVNode)("div",VZ,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)(i.value.name||i.value.åç§°),1),(0,r.createElementVNode)("button",{onClick:k,class:"close-btn"},"Ã—")]),(0,r.createElementVNode)("div",_Z,[(0,r.createElementVNode)("p",CZ,(0,r.toDisplayString)(i.value.ç±»å‹||i.value.type||"åŠ¿åŠ›"),1),(0,r.createElementVNode)("p",AZ,(0,r.toDisplayString)(i.value.description||i.value.æè¿°),1),i.value.ç­‰çº§?((0,r.openBlock)(),(0,r.createElementBlock)("div",DZ,[t[9]||(t[9]=(0,r.createElementVNode)("strong",null,"åŠ¿åŠ›ç­‰çº§ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(i.value.ç­‰çº§),1)])):(0,r.createCommentVNode)("v-if",!0),i.value.leadership||i.value.é¢†å¯¼å±‚?((0,r.openBlock)(),(0,r.createElementBlock)("div",TZ,[t[10]||(t[10]=(0,r.createElementVNode)("strong",null,"æŒé—¨ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(i.value.leadership?.å®—ä¸»||i.value.é¢†å¯¼å±‚?.å®—ä¸»)+" ",1),i.value.leadership?.å®—ä¸»ä¿®ä¸º||i.value.é¢†å¯¼å±‚?.å®—ä¸»ä¿®ä¸º?((0,r.openBlock)(),(0,r.createElementBlock)("span",BZ," ï¼ˆ"+(0,r.toDisplayString)(i.value.leadership?.å®—ä¸»ä¿®ä¸º||i.value.é¢†å¯¼å±‚?.å®—ä¸»ä¿®ä¸º)+"ï¼‰ ",1)):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0),i.value.memberCount||i.value.æˆå‘˜æ•°é‡?((0,r.openBlock)(),(0,r.createElementBlock)("div",IZ,[t[11]||(t[11]=(0,r.createElementVNode)("strong",null,"æˆå‘˜æ•°é‡ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(i.value.memberCount?.total||i.value.æˆå‘˜æ•°é‡?.æ€»æ•°||i.value.æˆå‘˜æ•°é‡?.total)+"äºº ",1)])):(0,r.createCommentVNode)("v-if",!0),i.value.ç‰¹è‰²&&i.value.ç‰¹è‰².length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",zZ,[t[12]||(t[12]=(0,r.createElementVNode)("strong",null,"åŠ¿åŠ›ç‰¹è‰²ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(Array.isArray(i.value.ç‰¹è‰²)?i.value.ç‰¹è‰².join("ã€"):i.value.ç‰¹è‰²),1)])):(0,r.createCommentVNode)("v-if",!0),i.value.ä¸ç©å®¶å…³ç³»?((0,r.openBlock)(),(0,r.createElementBlock)("div",MZ,[t[13]||(t[13]=(0,r.createElementVNode)("strong",null,"å…³ç³»ï¼š",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)((o=i.value.ä¸ç©å®¶å…³ç³»,"å‹å¥½"===o||"ç›Ÿå‹"===o?"relation-friendly":"æ•Œå¯¹"===o||"ä»‡æ•Œ"===o?"relation-hostile":"relation-neutral"))},(0,r.toDisplayString)(i.value.ä¸ç©å®¶å…³ç³»),3)])):(0,r.createCommentVNode)("v-if",!0)])],4)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å¤§é™†ä¿¡æ¯å¼¹çª— "),s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:3,class:"location-popup continent-popup",style:(0,r.normalizeStyle)(h.value)},[(0,r.createElementVNode)("div",PZ,[(0,r.createElementVNode)("h4",null,(0,r.toDisplayString)(s.value.name),1),(0,r.createElementVNode)("button",{onClick:k,class:"close-btn"},"Ã—")]),(0,r.createElementVNode)("div",RZ,[t[19]||(t[19]=(0,r.createElementVNode)("p",{class:"location-type"},"å¤§é™†",-1)),(0,r.createElementVNode)("p",$Z,(0,r.toDisplayString)(s.value.description||"å¹¿è¢¤çš„ä¿®ä»™å¤§é™†ï¼Œè•´å«æ— å°½æœºç¼˜ä¸å±é™©ã€‚"),1),s.value.æ°”å€™?((0,r.openBlock)(),(0,r.createElementBlock)("div",OZ,[t[14]||(t[14]=(0,r.createElementVNode)("strong",null,"æ°”å€™ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(s.value.æ°”å€™),1)])):(0,r.createCommentVNode)("v-if",!0),s.value.åœ°ç†ç‰¹å¾&&s.value.åœ°ç†ç‰¹å¾.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",LZ,[t[15]||(t[15]=(0,r.createElementVNode)("strong",null,"åœ°ç†ç‰¹å¾ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(s.value.åœ°ç†ç‰¹å¾.join("ã€")),1)])):(0,r.createCommentVNode)("v-if",!0),s.value.å¤©ç„¶å±éšœ&&s.value.å¤©ç„¶å±éšœ.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",FZ,[t[16]||(t[16]=(0,r.createElementVNode)("strong",null,"å¤©ç„¶å±éšœï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(s.value.å¤©ç„¶å±éšœ.join("ã€")),1)])):(0,r.createCommentVNode)("v-if",!0),s.value.ç‰¹ç‚¹?((0,r.openBlock)(),(0,r.createElementBlock)("div",jZ,[t[17]||(t[17]=(0,r.createElementVNode)("strong",null,"å¤§é™†ç‰¹ç‚¹ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(s.value.ç‰¹ç‚¹),1)])):(0,r.createCommentVNode)("v-if",!0),s.value.ä¸»è¦åŠ¿åŠ›&&s.value.ä¸»è¦åŠ¿åŠ›.length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",UZ,[t[18]||(t[18]=(0,r.createElementVNode)("strong",null,"ä¸»è¦åŠ¿åŠ›ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(Array.isArray(s.value.ä¸»è¦åŠ¿åŠ›)?s.value.ä¸»è¦åŠ¿åŠ›.join("ã€"):s.value.ä¸»è¦åŠ¿åŠ›),1)])):(0,r.createCommentVNode)("v-if",!0)])],4)):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" åœ°å›¾å›¾ä¾‹ "),(0,r.createElementVNode)("div",qZ,[(0,r.createElementVNode)("div",GZ,(0,r.toDisplayString)(u.value)+"å›¾ä¾‹",1),t[20]||(t[20]=(0,r.createStaticVNode)('<div class="legend-items" data-v-a3f5bdc2>\x3c!-- åå±±å¤§å· - å±±å½¢å›¾æ ‡ --\x3e<div class="legend-item" data-v-a3f5bdc2><svg class="legend-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-a3f5bdc2><polygon points="12,6 4,20 20,20" fill="#2D7D32" opacity="0.8" data-v-a3f5bdc2></polygon></svg><span data-v-a3f5bdc2>åå±±å¤§å·</span></div>\x3c!-- å®—é—¨åŠ¿åŠ› - å»ºç­‘å›¾æ ‡ --\x3e<div class="legend-item" data-v-a3f5bdc2><svg class="legend-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-a3f5bdc2><rect x="6" y="6" width="12" height="12" fill="#1565C0" opacity="0.8" data-v-a3f5bdc2></rect><rect x="10" y="12" width="4" height="6" fill="white" opacity="0.9" data-v-a3f5bdc2></rect></svg><span data-v-a3f5bdc2>å®—é—¨åŠ¿åŠ›</span></div>\x3c!-- åŸé•‡åŠå¸‚ - åœ†å½¢å›¾æ ‡ --\x3e<div class="legend-item" data-v-a3f5bdc2><svg class="legend-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-a3f5bdc2><circle cx="12" cy="12" r="8" fill="#F57C00" opacity="0.8" data-v-a3f5bdc2></circle><circle cx="12" cy="12" r="3" fill="white" opacity="0.9" data-v-a3f5bdc2></circle></svg><span data-v-a3f5bdc2>åŸé•‡åŠå¸‚</span></div>\x3c!-- æ´å¤©ç¦åœ° - æ˜Ÿå½¢å›¾æ ‡ --\x3e<div class="legend-item" data-v-a3f5bdc2><svg class="legend-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-a3f5bdc2><circle cx="12" cy="12" r="8" fill="#7B1FA2" opacity="0.7" data-v-a3f5bdc2></circle><polygon points="12,5 13.5,9.5 18,10 14.5,13 15.5,17.5 12,15 8.5,17.5 9.5,13 6,10 10.5,9.5" fill="white" opacity="0.9" data-v-a3f5bdc2></polygon></svg><span data-v-a3f5bdc2>æ´å¤©ç¦åœ°</span></div>\x3c!-- å¥‡çå¼‚åœ° - è±å½¢å›¾æ ‡ --\x3e<div class="legend-item" data-v-a3f5bdc2><svg class="legend-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-a3f5bdc2><polygon points="12,4 20,12 12,20 4,12" fill="#388E3C" opacity="0.8" data-v-a3f5bdc2></polygon></svg><span data-v-a3f5bdc2>å¥‡çå¼‚åœ°</span></div>\x3c!-- å‡¶é™©ä¹‹åœ° - è­¦å‘Šå›¾æ ‡ --\x3e<div class="legend-item" data-v-a3f5bdc2><svg class="legend-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-a3f5bdc2><circle cx="12" cy="12" r="8" fill="#D32F2F" opacity="0.8" data-v-a3f5bdc2></circle><line x1="12" y1="8" x2="12" y2="14" stroke="white" stroke-width="2" stroke-linecap="round" data-v-a3f5bdc2></line><circle cx="12" cy="17" r="1.5" fill="white" data-v-a3f5bdc2></circle></svg><span data-v-a3f5bdc2>å‡¶é™©ä¹‹åœ°</span></div>\x3c!-- å…¶ä»–ç‰¹æ®Š - é—ªç”µå›¾æ ‡ --\x3e<div class="legend-item" data-v-a3f5bdc2><svg class="legend-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-v-a3f5bdc2><polygon points="13,4 8,14 12,14 11,20 16,10 12,10" fill="#6B7280" opacity="0.8" data-v-a3f5bdc2></polygon></svg><span data-v-a3f5bdc2>å…¶ä»–ç‰¹æ®Š</span></div></div>',1))])]);var o,c}}});var YZ=n(2039),WZ={};WZ.styleTagTransform=k(),WZ.setAttributes=v(),WZ.insert=g().bind(null,"head"),WZ.domAPI=p(),WZ.insertStyleElement=y(),u()(YZ.A,WZ),YZ.A&&YZ.A.locals&&YZ.A.locals;const XZ=(0,N.A)(HZ,[["__scopeId","data-v-a3f5bdc2"]]);var JZ=n(810);const KZ=(0,JZ.nY)("quest",()=>{const e=(0,Iu.useGameStateStore)(),t=(0,r.ref)(!1);if(e.questSystem?.å½“å‰ä»»åŠ¡åˆ—è¡¨){const t=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.length;e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.filter(e=>e&&e.ä»»åŠ¡ID&&e.ä»»åŠ¡åç§°);const n=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.length;t!==n&&(console.log(`[ä»»åŠ¡ç³»ç»Ÿ] å·²æ¸…ç† ${t-n} ä¸ªæ— æ•ˆä»»åŠ¡`),e.saveGame())}const n=(0,r.computed)(()=>{const t=e.questSystem?.é…ç½®;return{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:t?.å¯ç”¨ç³»ç»Ÿä»»åŠ¡??!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:t?.ç³»ç»Ÿä»»åŠ¡ç±»å‹??"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",é»˜è®¤ä»»åŠ¡æ•°é‡:t?.é»˜è®¤ä»»åŠ¡æ•°é‡??3,è‡ªåŠ¨åˆ·æ–°:t?.è‡ªåŠ¨åˆ·æ–°??!0,ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:t?.ç³»ç»Ÿä»»åŠ¡æç¤ºè¯??""}}),a=(0,r.computed)(()=>(e.questSystem?.å½“å‰ä»»åŠ¡åˆ—è¡¨||[]).filter(e=>e&&e.ä»»åŠ¡ID&&e.ä»»åŠ¡åç§°)),o=(0,r.computed)(()=>a.value.filter(e=>e&&"å·²å®Œæˆ"===e.ä»»åŠ¡çŠ¶æ€)),i=(0,r.computed)(()=>a.value.filter(e=>e&&("è¿›è¡Œä¸­"===e.ä»»åŠ¡çŠ¶æ€||!e.ä»»åŠ¡çŠ¶æ€)));async function s(t){if(!e.questSystem)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–"),void ne.o.error("ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–");const n=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.find(e=>e.ä»»åŠ¡ID===t);if(!n)return void console.error("[ä»»åŠ¡ç³»ç»Ÿ] æœªæ‰¾åˆ°ä»»åŠ¡:",t);n.ç›®æ ‡åˆ—è¡¨.forEach(e=>{e.å½“å‰è¿›åº¦>=e.éœ€æ±‚æ•°é‡&&(e.å·²å®Œæˆ=!0)});const a=ne.o.loading("æ­£åœ¨ç»“ç®—ä»»åŠ¡å¥–åŠ±...");try{const t=await async function(e){try{const t="\n# ä»»åŠ¡å®Œæˆç³»ç»Ÿ\n\n## å®Œæˆçš„ä»»åŠ¡\n{{ä»»åŠ¡JSON}}\n\n## å‘æ”¾å¥–åŠ±\næ ¹æ®ä»»åŠ¡å¥–åŠ±é…ç½®å‘æ”¾å¥–åŠ±\n\n## è¾“å‡ºæ ¼å¼\n\n<narrative>\nä»»åŠ¡å®Œæˆçš„åº†ç¥æè¿°å’Œå¥–åŠ±å‘æ”¾åœºæ™¯ï¼ˆ200-300å­—ï¼‰\n</narrative>\n\n<memory>\nä»»åŠ¡å®Œæˆæ‘˜è¦å’Œè·å¾—çš„å¥–åŠ±\n</memory>\n\n<commands>\nset|ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨.0.ä»»åŠ¡çŠ¶æ€|å·²å®Œæˆ\nset|ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨.0.å®Œæˆæ—¶é—´|{{å½“å‰æ¸¸æˆæ—¶é—´}}\nadd|è§’è‰².å±æ€§.å¢ƒç•Œ.å½“å‰è¿›åº¦|{{å¥–åŠ±ä¿®ä¸º}}\nadd|è§’è‰².èƒŒåŒ….çµçŸ³.ä¸‹å“|{{å¥–åŠ±çµçŸ³}}\nadd|ç¤¾äº¤.ä»»åŠ¡.ä»»åŠ¡ç»Ÿè®¡.å®Œæˆæ€»æ•°|1\n</commands>\n\n<options>\næŸ¥çœ‹æ–°çš„å¯æ¥ä»»åŠ¡\nç»§ç»­æ¢ç´¢å½“å‰åŒºåŸŸ\nè¿”å›ä¼‘æ¯è°ƒæ•´çŠ¶æ€\nä¸ä»»åŠ¡å‘å¸ƒè€…äº¤è°ˆ\næ•´ç†è·å¾—çš„å¥–åŠ±\n</options>\n\n## å¥–åŠ±ç±»å‹è¯´æ˜\n- **ä¿®ä¸º**: add|è§’è‰².å±æ€§.å¢ƒç•Œ.å½“å‰è¿›åº¦|æ•°å€¼\n- **çµçŸ³**: add|è§’è‰².èƒŒåŒ….çµçŸ³.å“çº§|æ•°å€¼\n- **ç‰©å“**: set|è§’è‰².èƒŒåŒ….ç‰©å“.ç‰©å“ID|{ç‰©å“å¯¹è±¡}\n- **å£°æœ›**: add|è§’è‰².å±æ€§.å£°æœ›|æ•°å€¼\n- **å¥½æ„Ÿåº¦**: add|ç¤¾äº¤.å…³ç³».NPCåç§°.å¥½æ„Ÿåº¦|æ•°å€¼\n".replace("{{ä»»åŠ¡JSON}}",JSON.stringify(e,null,2)).replace("{{å¥–åŠ±ä¿®ä¸º}}",String(e.å¥–åŠ±.ä¿®ä¸º||0)).replace("{{å¥–åŠ±çµçŸ³}}",String(e.å¥–åŠ±.çµçŸ³?.ä¸‹å“||0)),n=await La("å®Œæˆä»»åŠ¡",t,!1),a=n.match(/<commands>([\s\S]*?)<\/commands>/i);if(a){const e=[],t=a[1].trim().split("\n");for(const n of t){const t=n.trim().split("|");if(t.length>=2){let n=t.slice(2).join("|").trim();if(n.startsWith("{")||n.startsWith("["))try{n=JSON.parse(n)}catch{}else isNaN(Number(n))?"true"===n?n=!0:"false"===n&&(n=!1):n=Number(n);e.push({action:t[0].trim(),key:t[1].trim(),value:n})}}const r=n.match(/<narrative>([\s\S]*?)<\/narrative>/i);return{text:r?.[1]?.trim()||"",tavern_commands:e}}try{return Wa(n)}catch{}return null}catch(e){return console.error("å®Œæˆä»»åŠ¡å¤±è´¥:",e),null}}(n);if(t?.tavern_commands)for(const n of t.tavern_commands)if("set"===n.action)e.updateState(n.key,n.value);else if("add"===n.action){const t=(0,Zu.get)(e,n.key,0);e.updateState(n.key,t+Number(n.value))}n.ä»»åŠ¡çŠ¶æ€="å·²å®Œæˆ",n.å®Œæˆæ—¶é—´=(new Date).toISOString(),e.questSystem.ä»»åŠ¡ç»Ÿè®¡.å®Œæˆæ€»æ•°+=1,e.questSystem.ä»»åŠ¡ç»Ÿè®¡.å„ç±»å‹å®Œæˆ||(e.questSystem.ä»»åŠ¡ç»Ÿè®¡.å„ç±»å‹å®Œæˆ={});const r=e.questSystem.ä»»åŠ¡ç»Ÿè®¡.å„ç±»å‹å®Œæˆ[n.ä»»åŠ¡ç±»å‹]||0;e.questSystem.ä»»åŠ¡ç»Ÿè®¡.å„ç±»å‹å®Œæˆ[n.ä»»åŠ¡ç±»å‹]=r+1,await e.saveGame(),console.log("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡å®ŒæˆçŠ¶æ€å·²ä¿å­˜åˆ°å­˜æ¡£"),ne.o.success(`ä»»åŠ¡å®Œæˆï¼š${n.ä»»åŠ¡åç§°}`,{id:a})}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";ne.o.error(`å®Œæˆä»»åŠ¡å¤±è´¥ï¼š${t}`,{id:a})}}const l=(0,r.ref)(null),c=(0,r.computed)(()=>l.value&&a.value.find(e=>e.ä»»åŠ¡ID===l.value)||null);return{currentQuests:a,activeQuests:i,completedQuests:o,questConfig:n,isGenerating:t,trackedQuestId:l,trackedQuest:c,generateNewQuest:async function(){if(t.value)return;const n=e.toSaveData();if(!n)return void ne.o.error("è¯·å…ˆåŠ è½½å­˜æ¡£");t.value=!0;const a=ne.o.loading("å¤©æœºè¿è½¬ä¸­ï¼Œæ­£åœ¨æ¨æ¼”æœºç¼˜...");try{const t=await async function(e){try{const t={ç©å®¶å§“å:e.è§’è‰²?.èº«ä»½?.åå­—||e.è§’è‰²?.åå­—||"æ— åä¿®å£«",å½“å‰å¢ƒç•Œ:`${e.è§’è‰²?.å±æ€§?.å¢ƒç•Œ?.åç§°||"å‡¡äºº"}${e.è§’è‰²?.å±æ€§?.å¢ƒç•Œ?.é˜¶æ®µ||""}`,å½“å‰ä½ç½®:e.è§’è‰²?.ä½ç½®?.æè¿°||"æœªçŸ¥"},n=e.ç¤¾äº¤?.ä»»åŠ¡?.é…ç½®;let a='\n# ä»»åŠ¡ç”Ÿæˆç³»ç»Ÿ\n\n## å½“å‰çŠ¶æ€\n- ç©å®¶å§“åï¼š{{ç©å®¶å§“å}}\n- å¢ƒç•Œï¼š{{å½“å‰å¢ƒç•Œ}}\n- ä½ç½®ï¼š{{å½“å‰ä½ç½®}}\n\n## æ ¸å¿ƒåŸåˆ™\nğŸ² **ä»»åŠ¡å®Œå…¨éšæœºç”Ÿæˆï¼Œä¸ä¾èµ–å½“å‰å‰§æƒ…**\n- ä»»åŠ¡å†…å®¹ä¸æœ€è¿‘å‘ç”Ÿçš„äº‹ä»¶æ— å…³\n- æ¯æ¬¡ç”Ÿæˆéƒ½æ˜¯ç‹¬ç«‹çš„éšæœºäº‹ä»¶\n- ä¸è¦å»¶ç»­ä¹‹å‰çš„æ•…äº‹çº¿\n- å¯ä»¥æ˜¯çªå‘äº‹ä»¶ã€å¶é‡ã€ç³»ç»Ÿè§¦å‘ç­‰\n\n## ç”Ÿæˆè§„åˆ™\n1. **éšæœºæ€§ä¼˜å…ˆ**ï¼šä»»åŠ¡å†…å®¹éšæœºç”Ÿæˆï¼Œä¸å—å‰§æƒ…é™åˆ¶\n2. **å¢ƒç•Œé€‚é…**ï¼šä»»åŠ¡éš¾åº¦å’Œç›®æ ‡æ•°é‡è¦ç¬¦åˆå½“å‰å¢ƒç•Œ\n3. **å¥–åŠ±è¯±æƒ‘åŠ›**ï¼šå¥–åŠ±å¿…é¡»å¯¹å½“å‰å¢ƒç•Œæœ‰å¸å¼•åŠ›ï¼Œä¸èƒ½å¤ªå°‘\n4. **ç›®æ ‡æ˜ç¡®**ï¼šä»»åŠ¡ç›®æ ‡å…·ä½“å¯é‡åŒ–\n5. **ä¸–ç•Œè§‚èåˆ**ï¼šç¬¦åˆä¿®ä»™ä¸–ç•Œè§‚\n\n## ä»»åŠ¡ç±»å‹è¯´æ˜\n**å¯ç”¨ä»»åŠ¡ç±»å‹**ï¼ˆæ— ä¸»æ¬¡ä¹‹åˆ†ï¼Œå®Œå…¨éšæœºï¼‰:\n- **å®—é—¨**: å®—é—¨å†…çš„ä»»åŠ¡\n- **å¥‡é‡**: å¶ç„¶è§¦å‘çš„æœºç¼˜\n- **æ—¥å¸¸**: å¯é‡å¤çš„æ—¥å¸¸ä»»åŠ¡\n- **ç³»ç»Ÿä»»åŠ¡**: é€šç”¨ç³»ç»Ÿä»»åŠ¡\n- **é“ä¾£åŸ¹å…»**: ä¸ç‰¹å®šNPCçš„å…³ç³»å‘å±•ä»»åŠ¡\n- **ä¿®ä¸ºæå‡**: ä¿®ç‚¼çªç ´ç±»ä»»åŠ¡\n- **æ”¶é›†èµ„æº**: é‡‡é›†ç‰©å“ç±»ä»»åŠ¡\n- **æˆ˜æ–—æŒ‘æˆ˜**: æˆ˜æ–—å‡»æ€ç±»ä»»åŠ¡\n\nâš ï¸ **æ³¨æ„**ï¼šæœ¬æ¸¸æˆæ²¡æœ‰ä¸»çº¿æ”¯çº¿ä¹‹åˆ†ï¼Œæ‰€æœ‰ä»»åŠ¡ç±»å‹å¹³ç­‰ï¼Œä¸€åˆ‡ç”±ç©å®¶è‡ªç”±æ¢ç´¢\n\n## å¥–åŠ±æ ‡å‡†ï¼ˆæ ¹æ®å¢ƒç•Œï¼‰\n**ğŸ”¥ é‡è¦ï¼šå¥–åŠ±å¿…é¡»æœ‰è¯±æƒ‘åŠ›ï¼Œä¸èƒ½å¤ªå°‘ï¼**\n\n### ä¿®ä¸ºå¥–åŠ±å‚è€ƒï¼ˆå•ä¸ªä»»åŠ¡ï¼‰\n- **ç»ƒæ°”åˆæœŸ**ï¼š200-500 ä¿®ä¸º\n- **ç»ƒæ°”ä¸­æœŸ**ï¼š500-1200 ä¿®ä¸º\n- **ç»ƒæ°”åæœŸ**ï¼š1200-2500 ä¿®ä¸º\n- **ç»ƒæ°”åœ†æ»¡**ï¼š2500-5000 ä¿®ä¸º\n- **ç­‘åŸºåˆæœŸ**ï¼š5000-10000 ä¿®ä¸º\n- **ç­‘åŸºä¸­æœŸ**ï¼š10000-20000 ä¿®ä¸º\n- **ç­‘åŸºåæœŸ**ï¼š20000-40000 ä¿®ä¸º\n- **æ›´é«˜å¢ƒç•Œ**ï¼šæŒ‰å€æ•°é€’å¢\n\n### çµçŸ³å¥–åŠ±å‚è€ƒ\n- **ç»ƒæ°”æœŸ**ï¼šä¸‹å“çµçŸ³ 50-200\n- **ç­‘åŸºæœŸ**ï¼šä¸‹å“çµçŸ³ 200-500ï¼Œæˆ–ä¸­å“çµçŸ³ 10-50\n- **é‡‘ä¸¹æœŸ**ï¼šä¸­å“çµçŸ³ 50-200ï¼Œæˆ–ä¸Šå“çµçŸ³ 5-20\n\n### ç‰©å“å¥–åŠ±\n- æ ¹æ®å¢ƒç•Œç»™äºˆç›¸åº”å“è´¨çš„ä¸¹è¯ã€æ³•å™¨ã€ææ–™\n- ç»ƒæ°”æœŸï¼šå‡¡å“ã€é»„å“ç‰©å“\n- ç­‘åŸºæœŸï¼šé»„å“ã€ç„å“ç‰©å“\n- é‡‘ä¸¹æœŸï¼šç„å“ã€åœ°å“ç‰©å“\n\nâš ï¸ **å¥–åŠ±åº•çº¿**ï¼šå¥–åŠ±ä¸èƒ½ä½äºå½“å‰å¢ƒç•Œçš„æœ€ä½æ ‡å‡†ï¼Œå¦åˆ™ç©å®¶æ²¡æœ‰åŠ¨åŠ›å®Œæˆä»»åŠ¡\n\n## è¾“å‡ºæ ¼å¼\nä½¿ç”¨æ ‡ç­¾æ ¼å¼åˆ›å»ºä»»åŠ¡ï¼š\n\n<narrative>\nä»»åŠ¡è§¦å‘çš„å‰§æƒ…æè¿°ï¼ˆ200-500å­—ï¼‰\n</narrative>\n\n<memory>\nç®€çŸ­çš„ä»»åŠ¡è§¦å‘æ‘˜è¦\n</memory>\n\n<commands>\npush|ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨|{"ä»»åŠ¡ID":"quest_æ”¯çº¿_1000_0315_001","ä»»åŠ¡åç§°":"ä»»åŠ¡æ ‡é¢˜","ä»»åŠ¡æè¿°":"è¯¦ç»†æè¿°","ä»»åŠ¡ç±»å‹":"å®—é—¨","ä»»åŠ¡çŠ¶æ€":"è¿›è¡Œä¸­","ç›®æ ‡åˆ—è¡¨":[{"æè¿°":"å‡»è´¥3åªé»‘é£ç‹¼","ç±»å‹":"å‡»æ€","ç›®æ ‡ID":"monster_é»‘é£ç‹¼","éœ€æ±‚æ•°é‡":3,"å½“å‰è¿›åº¦":0,"å·²å®Œæˆ":false}],"å¥–åŠ±":{"ä¿®ä¸º":100,"çµçŸ³":{"ä¸‹å“":50},"ç‰©å“":[{"ç‰©å“ID":"item_healing_pill","åç§°":"ç–—ä¼¤ä¸¹","æ•°é‡":2}]},"å‘å¸ƒè€…":"æ‘é•¿æå¤§å±±","AIç”Ÿæˆ":true,"åˆ›å»ºæ—¶é—´":"{{å½“å‰æ¸¸æˆæ—¶é—´}}"}\n</commands>\n\n<options>\nç«‹å³å‰å¾€æ‰§è¡Œä»»åŠ¡\nå…ˆåšå‡†å¤‡å†å‡ºå‘\nè¯¢é—®æ›´å¤šä»»åŠ¡ç»†èŠ‚\næš‚æ—¶æç½®æ­¤ä»»åŠ¡\næŸ¥çœ‹å…¶ä»–ä»»åŠ¡\n</options>\n\n## ç›®æ ‡ç±»å‹è¯´æ˜\n- **å‡»æ€**: ç›®æ ‡IDä¸ºæ€ªç‰©åç§°ï¼Œå¦‚ "monster_é»‘é£ç‹¼"\n- **é‡‡é›†**: ç›®æ ‡IDä¸ºç‰©å“IDï¼Œå¦‚ "item_çµè‰"\n- **å¯¹è¯**: ç›®æ ‡IDä¸ºNPCåç§°ï¼Œå¦‚ "npc_å¼ é•¿è€"\n- **åˆ°è¾¾**: ç›®æ ‡IDä¸ºåœ°ç‚¹æè¿°ï¼Œå¦‚ "location_é’äº‘å³°"\n- **ä½¿ç”¨ç‰©å“**: ç›®æ ‡IDä¸ºç‰©å“ID\n'.replace("{{ç©å®¶å§“å}}",t.ç©å®¶å§“å).replace("{{å½“å‰å¢ƒç•Œ}}",t.å½“å‰å¢ƒç•Œ).replace("{{å½“å‰ä½ç½®}}",t.å½“å‰ä½ç½®);n&&(a+=`\n\n## ç³»ç»Ÿä»»åŠ¡é£æ ¼\nå½“å‰ç³»ç»Ÿç±»å‹ï¼š${n.ç³»ç»Ÿä»»åŠ¡ç±»å‹}\nè¯·æ ¹æ®æ­¤é£æ ¼ç”Ÿæˆç›¸åº”çš„ä»»åŠ¡ã€‚`,n.ç³»ç»Ÿä»»åŠ¡æç¤ºè¯&&(a+=`\n\n## è‡ªå®šä¹‰è¦æ±‚\n${n.ç³»ç»Ÿä»»åŠ¡æç¤ºè¯}`));const r=await La("ç”Ÿæˆä¸€ä¸ªé€‚åˆå½“å‰æƒ…å†µçš„ä»»åŠ¡",a,!1),o=r.match(/<commands>([\s\S]*?)<\/commands>/i);if(o){const e=o[1].trim().split("\n");for(const t of e){const e=t.trim().split("|");if(e.length>=3&&"push"===e[0].toLowerCase()&&"ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨"===e[1])try{return JSON.parse(e.slice(2).join("|"))}catch{console.warn("è§£æä»»åŠ¡JSONå¤±è´¥:",e.slice(2).join("|"))}}}try{const e=Wa(r),t=e.tavern_commands?.find(e=>"push"===e.action&&"ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨"===e.key);return t?.value||null}catch{}return null}catch(e){return console.error("ç”Ÿæˆä»»åŠ¡å¤±è´¥:",e),null}}(n);if(!t)return void ne.o.error("å¤©æœºæ··æ²Œï¼Œæš‚æ— æœºç¼˜",{id:a});if(!e.questSystem)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–"),void ne.o.error("ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–",{id:a});e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.push(t),console.log("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡å·²æ·»åŠ åˆ°åˆ—è¡¨:",t.ä»»åŠ¡åç§°),await e.saveGame(),console.log("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡å·²ä¿å­˜åˆ°å­˜æ¡£"),ne.o.success(`æ–°ä»»åŠ¡ï¼š${t.ä»»åŠ¡åç§°}`,{id:a})}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";ne.o.error(`ç”Ÿæˆä»»åŠ¡å¤±è´¥ï¼š${t}`,{id:a})}finally{t.value=!1}},checkQuestObjective:function(t,n,r){if(!e.questSystem)return;const o=a.value.find(e=>e.ä»»åŠ¡ID===t);if(!o)return;const i=o.ç›®æ ‡åˆ—è¡¨.find(e=>e.ç±»å‹===n&&e.ç›®æ ‡ID===r);i&&!i.å·²å®Œæˆ&&(i.å½“å‰è¿›åº¦+=1,i.å½“å‰è¿›åº¦>=i.éœ€æ±‚æ•°é‡)&&(i.å·²å®Œæˆ=!0,ne.o.success(`ä»»åŠ¡ç›®æ ‡å®Œæˆï¼š${i.æè¿°}`),o.ç›®æ ‡åˆ—è¡¨.every(e=>e.å·²å®Œæˆ)&&s(t))},finishQuest:s,updateQuestConfig:async function(t){e.questSystem?e.questSystem.é…ç½®=t:e.questSystem={å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}},é…ç½®:t},await e.saveGame(),ne.o.success("ä»»åŠ¡é…ç½®å·²ä¿å­˜")},deleteQuest:async function(t){if(!e.questSystem)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–"),void ne.o.error("ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–");const n=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.findIndex(e=>e.ä»»åŠ¡ID===t);if(-1===n)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] æœªæ‰¾åˆ°ä»»åŠ¡:",t),void ne.o.error("æœªæ‰¾åˆ°è¯¥ä»»åŠ¡");const a=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨[n];try{e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.splice(n,1),await e.saveGame(),ne.o.success(`å·²åˆ é™¤ä»»åŠ¡ï¼š${a.ä»»åŠ¡åç§°}`),console.log("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡å·²åˆ é™¤:",a.ä»»åŠ¡åç§°)}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";console.error("[ä»»åŠ¡ç³»ç»Ÿ] åˆ é™¤ä»»åŠ¡å¤±è´¥:",e),ne.o.error(`åˆ é™¤ä»»åŠ¡å¤±è´¥ï¼š${t}`)}},acceptQuest:async function(t){if(!e.questSystem)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–"),void ne.o.error("ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–");const n=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.find(e=>e.ä»»åŠ¡ID===t);if(!n)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] æœªæ‰¾åˆ°ä»»åŠ¡:",t),void ne.o.error("æœªæ‰¾åˆ°è¯¥ä»»åŠ¡");n.ä»»åŠ¡çŠ¶æ€="è¿›è¡Œä¸­",await e.saveGame(),console.log("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡å·²æ¥å–:",n.ä»»åŠ¡åç§°)},abandonQuest:async function(t){if(!e.questSystem)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–"),void ne.o.error("ä»»åŠ¡ç³»ç»Ÿæœªåˆå§‹åŒ–");const n=e.questSystem.å½“å‰ä»»åŠ¡åˆ—è¡¨.find(e=>e.ä»»åŠ¡ID===t);if(!n)return console.error("[ä»»åŠ¡ç³»ç»Ÿ] æœªæ‰¾åˆ°ä»»åŠ¡:",t),void ne.o.error("æœªæ‰¾åˆ°è¯¥ä»»åŠ¡");n.ä»»åŠ¡çŠ¶æ€=void 0,n.ç›®æ ‡åˆ—è¡¨.forEach(e=>{e.å½“å‰è¿›åº¦=0,e.å·²å®Œæˆ=!1}),await e.saveGame(),console.log("[ä»»åŠ¡ç³»ç»Ÿ] ä»»åŠ¡å·²æ”¾å¼ƒ:",n.ä»»åŠ¡åç§°)},setTrackedQuest:function(e){l.value=e}}}),QZ=(0,V.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ZZ=(0,V.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),e0={class:"quest-panel"},t0={class:"quest-toolbar"},n0={class:"toolbar-left"},a0={class:"tab-btns"},r0={class:"toolbar-right"},o0=["disabled"],i0={class:"quest-list"},s0={key:0,class:"empty-state"},l0=["onClick"],c0={class:"quest-header"},d0={class:"quest-name"},u0={key:0,class:"status-done"},m0={class:"quest-progress"},p0={class:"progress-bar"},f0={class:"progress-text"},g0={class:"quest-actions"},h0=["onClick"],v0=["onClick"],b0={class:"act-text"},y0=["onClick"],x0=["onClick"],k0={key:0,class:"quest-detail"},w0={class:"quest-desc"},E0={class:"objectives"},N0={class:"obj-check"},S0={class:"obj-text"},V0={class:"obj-progress"},_0={key:0,class:"rewards"},C0={key:0,class:"reward"},A0={key:1,class:"reward"},D0={key:2,class:"reward"},T0={class:"config-header"},B0={class:"config-body"},I0={class:"config-row"},z0={class:"config-row"},M0={class:"config-row"},P0={class:"config-footer"},R0=(0,r.defineComponent)({__name:"QuestPanel",setup(e){const t=KZ(),n=(0,T.useUIStore)(),a=(0,r.ref)("active"),o=(0,r.ref)(!1),i=(0,r.ref)(null),s=(0,r.ref)({å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",é»˜è®¤ä»»åŠ¡æ•°é‡:3,è‡ªåŠ¨åˆ·æ–°:!0,ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:""});(0,r.watch)(()=>t.questConfig,e=>{e&&(s.value={...e})},{immediate:!0});const l=(0,r.computed)(()=>"active"===a.value?t.activeQuests:t.currentQuests),c=e=>{if(!e.ç›®æ ‡åˆ—è¡¨?.length)return 0;const t=e.ç›®æ ‡åˆ—è¡¨.reduce((e,t)=>e+t.éœ€æ±‚æ•°é‡,0),n=e.ç›®æ ‡åˆ—è¡¨.reduce((e,t)=>e+t.å½“å‰è¿›åº¦,0);return t>0?Math.round(n/t*100):0},d=async()=>{await t.updateQuestConfig(s.value),o.value=!1};return(e,u)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",e0,[(0,r.createCommentVNode)(" é¡¶éƒ¨å·¥å…·æ  "),(0,r.createElementVNode)("div",t0,[(0,r.createElementVNode)("div",n0,[(0,r.createElementVNode)("div",a0,[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)({active:"active"===a.value}),onClick:u[0]||(u[0]=e=>a.value="active")}," è¿›è¡Œä¸­ ("+(0,r.toDisplayString)((0,r.unref)(t).activeQuests.length)+") ",3),(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)({active:"all"===a.value}),onClick:u[1]||(u[1]=e=>a.value="all")}," å…¨éƒ¨ ("+(0,r.toDisplayString)((0,r.unref)(t).currentQuests.length)+") ",3)])]),(0,r.createElementVNode)("div",r0,[(0,r.createElementVNode)("button",{class:"tool-btn",onClick:u[2]||(u[2]=e=>o.value=!0),title:"é…ç½®"},[(0,r.createVNode)((0,r.unref)(ta.A),{size:16})]),(0,r.createElementVNode)("button",{class:"tool-btn primary",onClick:u[3]||(u[3]=e=>(0,r.unref)(t).generateNewQuest()),disabled:(0,r.unref)(t).isGenerating},[(0,r.createVNode)((0,r.unref)(Xj.A),{size:16}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(t).isGenerating?"æ¨æ¼”ä¸­...":"å¯»æ‰¾æœºç¼˜"),1)],8,o0)])]),(0,r.createCommentVNode)(" ä»»åŠ¡åˆ—è¡¨ "),(0,r.createElementVNode)("div",i0,[0===l.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",s0,[u[13]||(u[13]=(0,r.createElementVNode)("p",null,"æš‚æ— ä»»åŠ¡",-1)),(0,r.createElementVNode)("button",{class:"action-btn primary",onClick:u[4]||(u[4]=e=>(0,r.unref)(t).generateNewQuest())},[(0,r.createVNode)((0,r.unref)(A),{size:16}),u[12]||(u[12]=(0,r.createTextVNode)(" å¯»æ‰¾æœºç¼˜ ",-1))])])):(0,r.createCommentVNode)("v-if",!0),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.value,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.ä»»åŠ¡ID,class:(0,r.normalizeClass)(["quest-item",{completed:"å·²å®Œæˆ"===e.ä»»åŠ¡çŠ¶æ€,tracked:(0,r.unref)(t).trackedQuestId===e.ä»»åŠ¡ID}])},[(0,r.createElementVNode)("div",{class:"quest-main",onClick:t=>{return n=e.ä»»åŠ¡ID,void(i.value=i.value===n?null:n);var n}},[(0,r.createElementVNode)("div",c0,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["quest-type-tag",(a=e.ä»»åŠ¡ç±»å‹,{å®—é—¨:"type-sect",å¥‡é‡:"type-adventure",æ—¥å¸¸:"type-daily",ç³»ç»Ÿä»»åŠ¡:"type-system",é“ä¾£åŸ¹å…»:"type-companion",ä¿®ä¸ºæå‡:"type-cultivation",æ”¶é›†èµ„æº:"type-collect",æˆ˜æ–—æŒ‘æˆ˜:"type-combat"}[a]||"")])},(0,r.toDisplayString)(e.ä»»åŠ¡ç±»å‹),3),(0,r.createElementVNode)("span",d0,(0,r.toDisplayString)(e.ä»»åŠ¡åç§°),1),"å·²å®Œæˆ"===e.ä»»åŠ¡çŠ¶æ€?((0,r.openBlock)(),(0,r.createElementBlock)("span",u0,"âœ“")):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" ç›®æ ‡è¿›åº¦æ¡ "),(0,r.createElementVNode)("div",m0,[(0,r.createElementVNode)("div",p0,[(0,r.createElementVNode)("div",{class:"progress-fill",style:(0,r.normalizeStyle)({width:c(e)+"%"})},null,4)]),(0,r.createElementVNode)("span",f0,(0,r.toDisplayString)(c(e))+"%",1)])],8,l0),(0,r.createCommentVNode)(" å¿«æ·æ“ä½œ "),(0,r.createElementVNode)("div",g0,[e.ä»»åŠ¡çŠ¶æ€&&"æœªæ¥å–"!==e.ä»»åŠ¡çŠ¶æ€?(0,r.createCommentVNode)("v-if",!0):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"act-btn accept",onClick:(0,r.withModifiers)(a=>(async e=>{await t.acceptQuest(e.ä»»åŠ¡ID),n.showToast(`å·²æ¥å–: ${e.ä»»åŠ¡åç§°}`,{type:"success"})})(e),["stop"])},[(0,r.createVNode)((0,r.unref)(QZ),{size:14}),u[14]||(u[14]=(0,r.createElementVNode)("span",{class:"act-text"},"æ¥å–",-1))],8,h0)),"è¿›è¡Œä¸­"===e.ä»»åŠ¡çŠ¶æ€?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:(0,r.normalizeClass)(["act-btn track",{active:(0,r.unref)(t).trackedQuestId===e.ä»»åŠ¡ID}]),onClick:(0,r.withModifiers)(a=>(e=>{t.trackedQuestId===e.ä»»åŠ¡ID?(t.setTrackedQuest(null),n.showToast(`å·²å–æ¶ˆè¿½è¸ª: ${e.ä»»åŠ¡åç§°}`,{type:"info"})):(t.setTrackedQuest(e.ä»»åŠ¡ID),n.showToast(`è¿½è¸ª: ${e.ä»»åŠ¡åç§°}`,{type:"info"}))})(e),["stop"])},[(0,r.createVNode)((0,r.unref)(iO),{size:14}),(0,r.createElementVNode)("span",b0,(0,r.toDisplayString)((0,r.unref)(t).trackedQuestId===e.ä»»åŠ¡ID?"å–æ¶ˆè¿½è¸ª":"è¿½è¸ª"),1)],10,v0)):(0,r.createCommentVNode)("v-if",!0),"è¿›è¡Œä¸­"===e.ä»»åŠ¡çŠ¶æ€?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:2,class:"act-btn abandon",onClick:(0,r.withModifiers)(a=>{return r=e.ä»»åŠ¡ID,void n.showRetryDialog({title:"æ”¾å¼ƒä»»åŠ¡",message:"ç¡®å®šæ”¾å¼ƒæ­¤ä»»åŠ¡ï¼Ÿè¿›åº¦å°†é‡ç½®ã€‚",confirmText:"ç¡®å®š",cancelText:"å–æ¶ˆ",onConfirm:async()=>{await t.abandonQuest(r),n.showToast("å·²æ”¾å¼ƒä»»åŠ¡",{type:"warning"})},onCancel:()=>{}});var r},["stop"])},[(0,r.createVNode)((0,r.unref)(ZZ),{size:14}),u[15]||(u[15]=(0,r.createElementVNode)("span",{class:"act-text"},"æ”¾å¼ƒ",-1))],8,y0)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("button",{class:"act-btn delete",onClick:(0,r.withModifiers)(n=>(async e=>{await t.deleteQuest(e)})(e.ä»»åŠ¡ID),["stop"])},[(0,r.createVNode)((0,r.unref)(ea.A),{size:14}),u[16]||(u[16]=(0,r.createElementVNode)("span",{class:"act-text"},"åˆ é™¤",-1))],8,x0)]),(0,r.createCommentVNode)(" å±•å¼€è¯¦æƒ… "),i.value===e.ä»»åŠ¡ID?((0,r.openBlock)(),(0,r.createElementBlock)("div",k0,[(0,r.createElementVNode)("p",w0,(0,r.toDisplayString)(e.ä»»åŠ¡æè¿°),1),(0,r.createCommentVNode)(" ç›®æ ‡åˆ—è¡¨ "),(0,r.createElementVNode)("div",E0,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.ç›®æ ‡åˆ—è¡¨,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:(0,r.normalizeClass)(["objective",{done:e.å·²å®Œæˆ}])},[(0,r.createElementVNode)("span",N0,(0,r.toDisplayString)(e.å·²å®Œæˆ?"âœ“":"â—‹"),1),(0,r.createElementVNode)("span",S0,(0,r.toDisplayString)(e.æè¿°),1),(0,r.createElementVNode)("span",V0,(0,r.toDisplayString)(e.å½“å‰è¿›åº¦)+"/"+(0,r.toDisplayString)(e.éœ€æ±‚æ•°é‡),1)],2))),128))]),(0,r.createCommentVNode)(" å¥–åŠ± "),e.å¥–åŠ±?((0,r.openBlock)(),(0,r.createElementBlock)("div",_0,[u[17]||(u[17]=(0,r.createElementVNode)("span",{class:"reward-label"},"å¥–åŠ±:",-1)),e.å¥–åŠ±.ä¿®ä¸º?((0,r.openBlock)(),(0,r.createElementBlock)("span",C0,"ä¿®ä¸º+"+(0,r.toDisplayString)(e.å¥–åŠ±.ä¿®ä¸º),1)):(0,r.createCommentVNode)("v-if",!0),e.å¥–åŠ±.çµçŸ³?.ä¸‹å“?((0,r.openBlock)(),(0,r.createElementBlock)("span",A0,"çµçŸ³Ã—"+(0,r.toDisplayString)(e.å¥–åŠ±.çµçŸ³.ä¸‹å“),1)):(0,r.createCommentVNode)("v-if",!0),e.å¥–åŠ±.ç‰©å“?.length?((0,r.openBlock)(),(0,r.createElementBlock)("span",D0,(0,r.toDisplayString)(e.å¥–åŠ±.ç‰©å“.map(e=>e.åç§°).join("ã€")),1)):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)])):(0,r.createCommentVNode)("v-if",!0)],2);var a}),128))]),(0,r.createCommentVNode)(" é…ç½®å¯¹è¯æ¡† "),o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"config-overlay",onClick:u[11]||(u[11]=e=>o.value=!1)},[(0,r.createElementVNode)("div",{class:"config-dialog",onClick:u[10]||(u[10]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",T0,[u[18]||(u[18]=(0,r.createElementVNode)("h3",null,"ä»»åŠ¡é…ç½®",-1)),(0,r.createElementVNode)("button",{class:"close-btn",onClick:u[5]||(u[5]=e=>o.value=!1)},"Ã—")]),(0,r.createElementVNode)("div",B0,[(0,r.createElementVNode)("div",I0,[u[20]||(u[20]=(0,r.createElementVNode)("label",null,"ä»»åŠ¡é£æ ¼",-1)),(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":u[6]||(u[6]=e=>s.value.ç³»ç»Ÿä»»åŠ¡ç±»å‹=e)},u[19]||(u[19]=[(0,r.createStaticVNode)('<option value="ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ" data-v-93158eac>ä¿®ä»™è¾…åŠ©</option><option value="é“ä¾£å…»æˆç³»ç»Ÿ" data-v-93158eac>é“ä¾£å…»æˆ</option><option value="å®—é—¨å‘å±•ç³»ç»Ÿ" data-v-93158eac>å®—é—¨å‘å±•</option><option value="æ¢ç´¢å†’é™©ç³»ç»Ÿ" data-v-93158eac>æ¢ç´¢å†’é™©</option><option value="æˆ˜æ–—æŒ‘æˆ˜ç³»ç»Ÿ" data-v-93158eac>æˆ˜æ–—æŒ‘æˆ˜</option>',5)]),512),[[r.vModelSelect,s.value.ç³»ç»Ÿä»»åŠ¡ç±»å‹]])]),(0,r.createElementVNode)("div",z0,[u[21]||(u[21]=(0,r.createElementVNode)("label",null,"è‡ªåŠ¨åˆ·æ–°",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":u[7]||(u[7]=e=>s.value.è‡ªåŠ¨åˆ·æ–°=e)},null,512),[[r.vModelCheckbox,s.value.è‡ªåŠ¨åˆ·æ–°]])]),(0,r.createElementVNode)("div",M0,[u[22]||(u[22]=(0,r.createElementVNode)("label",null,"è‡ªå®šä¹‰æç¤º",-1)),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":u[8]||(u[8]=e=>s.value.ç³»ç»Ÿä»»åŠ¡æç¤ºè¯=e),placeholder:"å¯é€‰ï¼šè‡ªå®šä¹‰ä»»åŠ¡ç”ŸæˆæŒ‡ä»¤",rows:"2"},null,512),[[r.vModelText,s.value.ç³»ç»Ÿä»»åŠ¡æç¤ºè¯]])])]),(0,r.createElementVNode)("div",P0,[(0,r.createElementVNode)("button",{class:"btn",onClick:u[9]||(u[9]=e=>o.value=!1)},"å–æ¶ˆ"),(0,r.createElementVNode)("button",{class:"btn primary",onClick:d},"ä¿å­˜")])])])):(0,r.createCommentVNode)("v-if",!0)]))}});var $0=n(5926),O0={};O0.styleTagTransform=k(),O0.setAttributes=v(),O0.insert=g().bind(null,"head"),O0.domAPI=p(),O0.insertStyleElement=y(),u()($0.A,O0),$0.A&&$0.A.locals&&$0.A.locals;const L0=(0,N.A)(R0,[["__scopeId","data-v-93158eac"]]),F0=(0,V.A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),j0=(0,V.A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),U0=(0,V.A)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),q0=(0,V.A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),G0=(0,V.A)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),H0={class:"sect-panel"},Y0={class:"panel-content"},W0={class:"sect-container"},X0={class:"sect-list"},J0={class:"list-header"},K0={class:"search-bar"},Q0={class:"list-content"},Z0={key:0,class:"loading-state"},e1={key:1,class:"empty-state"},t1={class:"empty-text"},n1={class:"empty-hint"},a1={class:"empty-actions"},r1={key:2,class:"sect-list-content"},o1=["onClick"],i1={class:"sect-icon"},s1={class:"sect-emoji"},l1={class:"sect-info"},c1={class:"sect-name"},d1={class:"sect-meta"},u1={class:"sect-type"},m1={class:"sect-detail"},p1={key:0,class:"detail-content"},f1={class:"detail-header"},g1={class:"detail-icon"},h1={class:"sect-emoji-large"},v1={class:"detail-info"},b1={class:"detail-name"},y1={class:"detail-badges"},x1={class:"detail-body"},k1={key:0,class:"detail-section"},w1={class:"section-title"},E1={class:"member-stats"},N1={class:"total-members"},S1={class:"total-value"},V1={key:0,class:"realm-distribution"},_1={class:"realm-stats"},C1={class:"realm-name"},A1={class:"realm-count"},D1={key:1,class:"position-distribution"},T1={class:"position-stats"},B1={class:"position-name"},I1={class:"position-count"},z1={class:"detail-section"},M1={class:"section-title"},P1={class:"info-grid"},R1={class:"info-item"},$1={class:"info-value"},O1={class:"info-item"},L1={class:"info-value"},F1={class:"info-item"},j1={class:"info-value"},U1={class:"info-item"},q1={class:"info-value"},G1={key:0,class:"leadership-info"},H1={class:"leader-grid"},Y1={class:"leader-item primary-leader"},W1={class:"leader-name"},X1={key:0,class:"leader-realm"},J1={key:0,class:"leader-item"},K1={class:"leader-name"},Q1={class:"sect-strength"},Z1={class:"strength-item"},e2={class:"strength-value peak-power"},t2={key:0,class:"strength-item"},n2={class:"power-level"},a2={class:"sect-description"},r2={class:"desc-text"},o2={key:1,class:"sect-specialties"},i2={class:"specialties-tags"},s2={class:"detail-section"},l2={class:"section-title"},c2={class:"relationship-info"},d2={class:"relationship-item"},u2={class:"relationship-item"},m2={class:"reputation-level"},p2={key:1,class:"detail-section"},f2={class:"section-title"},g2={class:"territory-info"},h2={class:"influence-description"},v2={key:0,class:"controlled-areas"},b2={class:"areas-list"},y2={class:"strategic-value"},x2={class:"value-display"},k2={class:"value-bar"},w2={class:"value-text"},E2={key:2,class:"detail-section"},N2={class:"section-title"},S2={class:"join-requirements"},V2={key:0,class:"requirements-list"},_2={class:"requirement-text"},C2={key:1,class:"no-requirements"},A2={key:0,class:"join-benefits"},D2={class:"benefits-list"},T2={class:"benefit-text"},B2={class:"join-actions"},I2={key:3,class:"detail-section"},z2={class:"section-title"},M2={class:"current-member-info"},P2={class:"member-status"},R2={class:"status-item"},$2={class:"status-value position"},O2={class:"status-item"},L2={class:"status-value contribution"},F2={class:"status-item"},j2={class:"status-value reputation"},U2={class:"status-item"},q2={class:"status-value join-date"},G2={class:"sect-actions"},H2={class:"action-buttons"},Y2={key:1,class:"no-selection"},W2=(0,r.defineComponent)({__name:"SectPanel",setup(e){const t=(0,hd.useCharacterStore)(),n=(0,Iu.useGameStateStore)(),o=(0,a.useRouter)(),{t:i}=(0,re.s)(),s=(0,fe.isTavernEnv)(),l=(0,r.ref)(!1),c=(0,r.ref)(null),d=(0,r.ref)(""),u=()=>{rk('ä½ æ˜¯GMï¼Œè¯·æ ¹æ®å½“å‰å‰§æƒ…ä¸ä¸–ç•Œè®¾å®šï¼Œç”Ÿæˆ/è¡¥å…¨ã€Œä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯ã€ï¼ˆæ•°ç»„ï¼‰ã€‚\n\nè¦æ±‚ï¼š\n- æ¯æ¡åŠ¿åŠ›è‡³å°‘åŒ…å«ï¼šåç§°ã€ç±»å‹ã€ç­‰çº§ã€æè¿°ã€å®—é—¨é©»åœ°ã€ä¸»è¦èµ„æºã€å¯å¦åŠ å…¥ã€åŠ å…¥æ¡ä»¶ã€é¢†å¯¼å±‚ã€æˆå‘˜æ•°é‡ã€åŠ¿åŠ›èŒƒå›´è¯¦æƒ…ã€ä¸ç©å®¶å…³ç³»ã€å£°æœ›å€¼ã€‚\n- å†…å®¹è¦ä¸å½“å‰ä¸–ç•Œä¸€è‡´ï¼Œé¿å…ä¸å·²å­˜åœ¨ä¿¡æ¯å†²çªã€‚\n- ä¸¥æ ¼è¾“å‡ºä¸€ä¸ª JSON å¯¹è±¡ï¼ˆä¸è¦ä»£ç å—/è§£é‡Š/é¢å¤–æ–‡æœ¬ï¼Œä¸è¦ <thinking>ï¼‰ï¼š\n{\n  "text": "ã€ç³»ç»Ÿã€‘åŠ¿åŠ›ä¿¡æ¯å·²è¡¥å…¨ã€‚",\n  "mid_term_memory": "",\n  "tavern_commands": [\n    {"action":"set","key":"ä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯","value":[/*...åŠ¿åŠ›æ•°ç»„...*/]}\n  ],\n  "action_options": []\n}'),ne.o.success("å·²å‘é€åˆ°å¯¹è¯")},m=(0,r.computed)(()=>{const e=n.getCurrentSaveData();if(!e)return{availableSects:[]};let t=[];const a=n.sectSystem,r=e?.ä¸–ç•Œ?.ä¿¡æ¯;r?.åŠ¿åŠ›ä¿¡æ¯&&(t=r.åŠ¿åŠ›ä¿¡æ¯.filter(e=>{if(!e.ç±»å‹)return!1;const t=e.ç±»å‹.toLowerCase();return!["ç§˜å¢ƒ","é—è¿¹","ç¦åœ°","æ£®æ—","å±±è„‰","æ¹–æ³Š","åŸæ± "].some(e=>t.includes(e.toLowerCase()))})),0===t.length&&a?.å®—é—¨æ¡£æ¡ˆ&&Object.keys(a.å®—é—¨æ¡£æ¡ˆ).length>0&&(t=Object.values(a.å®—é—¨æ¡£æ¡ˆ));const o=t.filter((e,t,n)=>n.findIndex(t=>t.åç§°===e.åç§°)===t);return{availableSects:nm(o)}}),p=(0,r.computed)(()=>n.sectMemberInfo||void 0),f=(0,r.computed)(()=>m.value.availableSects),g=(0,r.computed)(()=>{let e=[...f.value];if(d.value.trim()){const t=d.value.toLowerCase();e=e.filter(e=>e.åç§°.toLowerCase().includes(t)||e.ç±»å‹.toLowerCase().includes(t)||e.æè¿°&&e.æè¿°.toLowerCase().includes(t))}const t=["è¶…çº§","ä¸€æµ","äºŒæµ","ä¸‰æµ","æœ«æµ"],n=e=>{if(!e)return 999;const n=t.findIndex(t=>e.includes(t));return-1===n?999:n};return e.sort((e,t)=>n(e.ç­‰çº§)-n(t.ç­‰çº§))}),h=e=>{if(e.æ‰€åœ¨å¤§æ´²)return e.æ‰€åœ¨å¤§æ´²;const t=n.worldInfo,a=t?.continents||t?.å¤§é™†ä¿¡æ¯;if(a)for(const t of a){if(e.id&&(t.ä¸»è¦åŠ¿åŠ›?.includes(e.id)||t.factions?.includes(e.id)))return t.åç§°||t.name||"æœªå‘½åå¤§æ´²";if(t.ä¸»è¦åŠ¿åŠ›?.includes(e.åç§°)||t.factions?.includes(e.åç§°))return t.åç§°||t.name||"æœªå‘½åå¤§æ´²"}if(t?.åŠ¿åŠ›ä¿¡æ¯)for(const n of t.åŠ¿åŠ›ä¿¡æ¯)if((n.id&&e.id&&n.id===e.id||n.åç§°===e.åç§°)&&n.æ‰€åœ¨å¤§æ´²)return n.æ‰€åœ¨å¤§æ´²;if(e.ä½ç½®&&"object"==typeof e.ä½ç½®&&"x"in e.ä½ç½®&&"y"in e.ä½ç½®){const t=e.ä½ç½®.x,n=e.ä½ç½®.y;return t<110&&n>40?"åŒ—å¢ƒé›ªåŸŸ":t<110&&n<30?"å—ç–†è’æ¼ ":t>120&&n>35?"ä¸œæµ·ç¾¤å²›":t>120&&n<35?"ä¸œå—ä¸›æ—":"ä¸­åœŸå¤§é™†"}return"æœªçŸ¥å¤§æ´²"},v=e=>{const t=e;if(t.ä¸»è¦èµ„æº&&Array.isArray(t.ä¸»è¦èµ„æº))return t.ä¸»è¦èµ„æº.slice(0,3).join("ã€");if(t.resources&&Array.isArray(t.resources))return t.resources.slice(0,3).join("ã€");const n=e.ç±»å‹||"";return n.includes("å‰‘")?"ç¥é“ã€å‰‘è°±ã€ç£¨å‰‘çŸ³":n.includes("ä¸¹")?"çµè¯ã€ä¸¹ç‚‰ã€è¯åœƒ":n.includes("ç¬¦")||n.includes("é˜µ")?"ç¬¦çº¸ã€é˜µæ³•ã€æ³•å™¨":n.includes("é­”")||n.includes("é‚ª")?"é­”çŸ³ã€ç…æ°”ã€ç§˜æ³•":n.includes("å•†")?"çµçŸ³ã€çå®ã€æƒ…æŠ¥":n.includes("ä¸–å®¶")?"ä¼ æ‰¿ã€äººè„‰ã€åº•è•´":"çµçŸ³ã€åŠŸæ³•ã€ä¿®ç‚¼èµ„æº"},b=e=>{const t=[];return e.ç‰¹è‰²åˆ—è¡¨&&Array.isArray(e.ç‰¹è‰²åˆ—è¡¨)&&t.push(...e.ç‰¹è‰²åˆ—è¡¨),e.ç‰¹è‰²&&(Array.isArray(e.ç‰¹è‰²)?t.push(...e.ç‰¹è‰²):"string"==typeof e.ç‰¹è‰²&&t.push(e.ç‰¹è‰²)),Array.from(new Set(t))},y=e=>String("object"==typeof e&&null!==e&&"name"in e?e.name:e||"ä¸­ç«‹"),x=e=>"object"==typeof e&&null!==e&&"value"in e?Number(e.value):Number(e)||0,k=e=>({æ­£é“å®—é—¨:"â›©ï¸",ä¿®ä»™å®—é—¨:"â›©ï¸",é­”é“å®—é—¨:"ğŸ´",é­”é“åŠ¿åŠ›:"ğŸ´",ä¸­ç«‹å®—é—¨:"ğŸ¯",ä¿®ä»™ä¸–å®¶:"ğŸ˜ï¸",ä¸–å®¶:"ğŸ˜ï¸",å•†ä¼š:"ğŸª",å•†ä¼šç»„ç»‡:"ğŸª",æ•£ä¿®è”ç›Ÿ:"ğŸ¤"}[e]||"ğŸ›ï¸"),w=e=>({æ­£é“å®—é—¨:"righteous",ä¿®ä»™å®—é—¨:"righteous",é­”é“å®—é—¨:"demonic",é­”é“åŠ¿åŠ›:"demonic",ä¸­ç«‹å®—é—¨:"neutral",ä¿®ä»™ä¸–å®¶:"family",ä¸–å®¶:"family",å•†ä¼š:"merchant",å•†ä¼šç»„ç»‡:"merchant",æ•£ä¿®è”ç›Ÿ:"alliance"}[e]||"neutral"),E=e=>e>=90?"å¤©ä¸‹æ— åŒ":e>=80?"ç§°éœ¸ä¸€æ–¹":e>=70?"å®åŠ›é›„åš":e>=60?"é¢‡æœ‰å®åŠ›":e>=50?"ä¸­ç­‰æ°´å¹³":e>=40?"ç•¥æœ‰å®åŠ›":"å®åŠ›ä¸€èˆ¬",N=e=>e>=25?"å£°åè¿œæ‰¬":e>=20?"äº«æœ‰ç››èª‰":e>=15?"åå£°åœ¨å¤–":e>=10?"å°æœ‰åæ°”":e>=5?"ç•¥æœ‰å£°æœ›":"é»˜é»˜æ— é—»",S=e=>{if(!e)return"æœªçŸ¥";try{return new Date(e).toLocaleDateString("zh-CN")}catch{return"æœªçŸ¥"}},V=e=>e?e.includes("æœŸ")||/(ç»ƒæ°”|ç­‘åŸº|é‡‘ä¸¹|å…ƒå©´|åŒ–ç¥|ç‚¼è™š|åˆä½“|æ¸¡åŠ«)(åˆæœŸ|ä¸­æœŸ|åæœŸ|åœ†æ»¡|æå¢ƒ)/.test(e)?e:/^(ç»ƒæ°”|ç­‘åŸº|é‡‘ä¸¹|å…ƒå©´|åŒ–ç¥|ç‚¼è™š|åˆä½“|æ¸¡åŠ«)$/.test(e)?e+"æœŸ":e:"æœªçŸ¥",_=()=>{o.push({name:"SectMissions"})},A=()=>{o.push({name:"SectContribution"})},D=()=>{o.push({name:"SectLibrary"})},T=()=>{o.push({name:"SectMembers"})},B=async()=>{try{ne.o.info("æ–°æ¶æ„ä¸‹æ•°æ®å·²ç»Ÿä¸€ç”± Pinia Store ç®¡ç†")}catch(e){ne.o.error("åŒæ­¥å¤±è´¥: "+(e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"))}},I=()=>{t.reloadFromStorage(),ne.o.info("å·²å¼ºåˆ¶åˆ·æ–°æ•°æ®")};return(e,t)=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",H0,[(0,r.createElementVNode)("div",Y0,[(0,r.createElementVNode)("div",W0,[(0,r.createCommentVNode)(" å·¦ä¾§ï¼šå®—é—¨åˆ—è¡¨ "),(0,r.createElementVNode)("div",X0,[(0,r.createElementVNode)("div",J0,[t[2]||(t[2]=(0,r.createElementVNode)("h3",{class:"panel-title"},"åŠ¿åŠ›å®—é—¨",-1)),(0,r.createElementVNode)("div",K0,[(0,r.createVNode)((0,r.unref)(HB),{size:16}),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),placeholder:"æœç´¢å®—é—¨...",class:"search-input"},null,512),[[r.vModelText,d.value]])])]),(0,r.createElementVNode)("div",Q0,[l.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Z0,[(0,r.createVNode)((0,r.unref)(ek),{size:32,class:"animate-spin"}),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(i)("æ­£åœ¨è¯»å–å®—é—¨ä¿¡æ¯...")),1)])):0===g.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",e1,[(0,r.createVNode)((0,r.unref)(F0),{size:48,class:"empty-icon"}),(0,r.createElementVNode)("p",t1,(0,r.toDisplayString)((0,r.unref)(i)("æš‚æ— å®—é—¨ä¿¡æ¯")),1),(0,r.createElementVNode)("p",n1,(0,r.toDisplayString)((0,r.unref)(i)("ä¸–ç•Œä¿¡æ¯å°†ç”±AIæ ¹æ®æ¸¸æˆè¿›ç¨‹ç”Ÿæˆ")),1),(0,r.createElementVNode)("div",a1,[(0,r.createElementVNode)("button",{class:"empty-action-btn primary",onClick:u},"ç”ŸæˆåŠ¿åŠ›ä¿¡æ¯"),(0,r.createElementVNode)("button",{class:"empty-action-btn",onClick:I},"åˆ·æ–°"),(0,r.unref)(s)?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"empty-action-btn",onClick:B},"ä»é…’é¦†åŒæ­¥")):(0,r.createCommentVNode)("v-if",!0)]),t[3]||(t[3]=(0,r.createElementVNode)("p",{class:"empty-prompt-hint"},[(0,r.createTextVNode)("æç¤ºï¼šç‚¹å‡»â€œç”ŸæˆåŠ¿åŠ›ä¿¡æ¯â€ä¼šè‡ªåŠ¨å‘é€åˆ°å¯¹è¯å¹¶å†™å…¥ "),(0,r.createElementVNode)("code",null,"ä¸–ç•Œ.ä¿¡æ¯.åŠ¿åŠ›ä¿¡æ¯"),(0,r.createTextVNode)("ã€‚")],-1))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",r1,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(g.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.åç§°,class:(0,r.normalizeClass)(["sect-card",{selected:c.value?.åç§°===e.åç§°,[`type-${w(e.ç±»å‹)}`]:!0,"can-join":e.å¯å¦åŠ å…¥}]),onClick:t=>(e=>{c.value=c.value?.åç§°===e.åç§°?null:e})(e)},[(0,r.createElementVNode)("div",i1,[(0,r.createElementVNode)("span",s1,(0,r.toDisplayString)(k(e.ç±»å‹)),1)]),(0,r.createElementVNode)("div",l1,[(0,r.createElementVNode)("div",c1,(0,r.toDisplayString)(e.åç§°),1),(0,r.createElementVNode)("div",d1,[(0,r.createElementVNode)("span",u1,(0,r.toDisplayString)(e.ç±»å‹),1)])]),(0,r.createVNode)((0,r.unref)(Nm),{size:16,class:"arrow-icon"})],10,o1))),128))]))])]),(0,r.createCommentVNode)(" å³ä¾§ï¼šå®—é—¨è¯¦æƒ… "),(0,r.createElementVNode)("div",m1,[c.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",p1,[(0,r.createCommentVNode)(" è¯¦æƒ…å¤´éƒ¨ "),(0,r.createElementVNode)("div",f1,[(0,r.createElementVNode)("div",g1,[(0,r.createElementVNode)("span",h1,(0,r.toDisplayString)(k(c.value.ç±»å‹)),1)]),(0,r.createElementVNode)("div",v1,[(0,r.createElementVNode)("h3",b1,(0,r.toDisplayString)(c.value.åç§°),1),(0,r.createElementVNode)("div",y1,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["type-badge",`type-${w(c.value.ç±»å‹)}`])},(0,r.toDisplayString)(c.value.ç±»å‹),3),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["level-badge",`level-${c.value.ç­‰çº§}`])},(0,r.toDisplayString)((f=c.value.ç­‰çº§,f?f.includes("å®—é—¨")?f:f+"å®—é—¨":"æœªçŸ¥")),3)])])]),(0,r.createCommentVNode)(" è¯¦æƒ…ä¸»ä½“ "),(0,r.createElementVNode)("div",x1,[(0,r.createCommentVNode)(" æˆå‘˜ç»Ÿè®¡ "),c.value.æˆå‘˜æ•°é‡?((0,r.openBlock)(),(0,r.createElementBlock)("div",k1,[(0,r.createElementVNode)("h5",w1,[(0,r.createVNode)((0,r.unref)(C),{size:16}),t[4]||(t[4]=(0,r.createElementVNode)("span",null,"æˆå‘˜ç»Ÿè®¡",-1))]),(0,r.createElementVNode)("div",E1,[(0,r.createCommentVNode)(" æ€»ä½“ç»Ÿè®¡ "),(0,r.createElementVNode)("div",N1,[t[5]||(t[5]=(0,r.createElementVNode)("span",{class:"total-label"},"æ€»äººæ•°",-1)),(0,r.createElementVNode)("span",S1,(0,r.toDisplayString)(c.value.æˆå‘˜æ•°é‡?.æ€»æ•°||c.value.æˆå‘˜æ•°é‡?.total||0)+"äºº",1)]),(0,r.createCommentVNode)(" å¢ƒç•Œåˆ†å¸ƒ "),c.value.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ||c.value.æˆå‘˜æ•°é‡?.byRealm?((0,r.openBlock)(),(0,r.createElementBlock)("div",V1,[t[6]||(t[6]=(0,r.createElementVNode)("h6",{class:"distribution-title"},"å¢ƒç•Œåˆ†å¸ƒ",-1)),(0,r.createElementVNode)("div",_1,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value.æˆå‘˜æ•°é‡?.æŒ‰å¢ƒç•Œ||c.value.æˆå‘˜æ•°é‡?.byRealm,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"realm-item"},[(0,r.createElementVNode)("span",C1,(0,r.toDisplayString)(V(String(t))),1),(0,r.createElementVNode)("span",A1,(0,r.toDisplayString)(e)+"äºº",1)]))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" èŒä½åˆ†å¸ƒ "),c.value.æˆå‘˜æ•°é‡?.æŒ‰èŒä½||c.value.æˆå‘˜æ•°é‡?.byPosition?((0,r.openBlock)(),(0,r.createElementBlock)("div",D1,[t[7]||(t[7]=(0,r.createElementVNode)("h6",{class:"distribution-title"},"èŒä½åˆ†å¸ƒ",-1)),(0,r.createElementVNode)("div",T1,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value.æˆå‘˜æ•°é‡?.æŒ‰èŒä½||c.value.æˆå‘˜æ•°é‡?.byPosition,(e,t)=>(0,r.withDirectives)(((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:"position-item"},[(0,r.createElementVNode)("span",B1,(0,r.toDisplayString)(t),1),(0,r.createElementVNode)("span",I1,(0,r.toDisplayString)(e)+"äºº",1)])),[[r.vShow,e>0]])),128))])])):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" åŸºç¡€ä¿¡æ¯ "),(0,r.createElementVNode)("div",z1,[(0,r.createElementVNode)("h5",M1,[(0,r.createVNode)((0,r.unref)(F0),{size:16}),t[8]||(t[8]=(0,r.createElementVNode)("span",null,"åŸºç¡€ä¿¡æ¯",-1))]),(0,r.createElementVNode)("div",P1,[(0,r.createElementVNode)("div",R1,[t[9]||(t[9]=(0,r.createElementVNode)("span",{class:"info-label"},"å®—é—¨ç±»å‹",-1)),(0,r.createElementVNode)("span",$1,(0,r.toDisplayString)(c.value.ç±»å‹),1)]),(0,r.createElementVNode)("div",O1,[t[10]||(t[10]=(0,r.createElementVNode)("span",{class:"info-label"},"å®—é—¨ç­‰çº§",-1)),(0,r.createElementVNode)("span",L1,(0,r.toDisplayString)(c.value.ç­‰çº§),1)]),(0,r.createElementVNode)("div",F1,[t[11]||(t[11]=(0,r.createElementVNode)("span",{class:"info-label"},"æ‰€åœ¨å¤§æ´²",-1)),(0,r.createElementVNode)("span",j1,(0,r.toDisplayString)(h(c.value)),1)]),(0,r.createElementVNode)("div",U1,[t[12]||(t[12]=(0,r.createElementVNode)("span",{class:"info-label"},"ä¸»è¦èµ„æº",-1)),(0,r.createElementVNode)("span",q1,(0,r.toDisplayString)(v(c.value)),1)])]),(0,r.createCommentVNode)(" å®—é—¨é¢†å¯¼å±‚ "),c.value.é¢†å¯¼å±‚?((0,r.openBlock)(),(0,r.createElementBlock)("div",G1,[t[17]||(t[17]=(0,r.createElementVNode)("h6",{class:"leadership-title"},"å®—é—¨é¢†å¯¼",-1)),(0,r.createElementVNode)("div",H1,[(0,r.createElementVNode)("div",Y1,[t[13]||(t[13]=(0,r.createElementVNode)("span",{class:"leader-role"},"å®—ä¸»",-1)),(0,r.createElementVNode)("span",W1,(0,r.toDisplayString)(c.value.é¢†å¯¼å±‚.å®—ä¸»),1),c.value.é¢†å¯¼å±‚.å®—ä¸»ä¿®ä¸º?((0,r.openBlock)(),(0,r.createElementBlock)("span",X1,(0,r.toDisplayString)(c.value.é¢†å¯¼å±‚.å®—ä¸»ä¿®ä¸º),1)):(0,r.createCommentVNode)("v-if",!0)]),c.value.é¢†å¯¼å±‚.å‰¯å®—ä¸»?((0,r.openBlock)(),(0,r.createElementBlock)("div",J1,[t[14]||(t[14]=(0,r.createElementVNode)("span",{class:"leader-role"},"å‰¯å®—ä¸»",-1)),(0,r.createElementVNode)("span",K1,(0,r.toDisplayString)(c.value.é¢†å¯¼å±‚.å‰¯å®—ä¸»),1)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",Q1,[(0,r.createElementVNode)("div",Z1,[t[15]||(t[15]=(0,r.createElementVNode)("span",{class:"strength-label"},"æœ€å¼ºä¿®ä¸º",-1)),(0,r.createElementVNode)("span",e2,(0,r.toDisplayString)(c.value.é¢†å¯¼å±‚.æœ€å¼ºä¿®ä¸º),1)]),c.value.é¢†å¯¼å±‚?.ç»¼åˆæˆ˜åŠ›?((0,r.openBlock)(),(0,r.createElementBlock)("div",t2,[t[16]||(t[16]=(0,r.createElementVNode)("span",{class:"strength-label"},"ç»¼åˆæˆ˜åŠ›",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["strength-value power-rating",(m=c.value.é¢†å¯¼å±‚.ç»¼åˆæˆ˜åŠ›||0,m>=90?"power-legendary":m>=80?"power-supreme":m>=70?"power-strong":m>=60?"power-good":m>=50?"power-average":m>=40?"power-weak":"power-poor")])},[(0,r.createTextVNode)((0,r.toDisplayString)(c.value.é¢†å¯¼å±‚.ç»¼åˆæˆ˜åŠ›||0)+"/100 ",1),(0,r.createElementVNode)("span",n2,"("+(0,r.toDisplayString)(E(c.value.é¢†å¯¼å±‚.ç»¼åˆæˆ˜åŠ›||0))+")",1)],2)])):(0,r.createCommentVNode)("v-if",!0)])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",a2,[t[18]||(t[18]=(0,r.createElementVNode)("h6",{class:"desc-title"},"å®—é—¨æè¿°",-1)),(0,r.createElementVNode)("p",r2,(0,r.toDisplayString)(c.value.æè¿°),1)]),(0,r.createCommentVNode)(" å®—é—¨ç‰¹è‰² "),b(c.value).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",o2,[t[19]||(t[19]=(0,r.createElementVNode)("h6",{class:"specialties-title"},"å®—é—¨ç‰¹è‰²",-1)),(0,r.createElementVNode)("div",i2,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(b(c.value),e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"specialty-tag"},(0,r.toDisplayString)(e),1))),128))])])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createCommentVNode)(" å…³ç³»çŠ¶æ€ "),(0,r.createElementVNode)("div",s2,[(0,r.createElementVNode)("h5",l2,[(0,r.createVNode)((0,r.unref)(cf.A),{size:16}),t[20]||(t[20]=(0,r.createElementVNode)("span",null,"å…³ç³»çŠ¶æ€",-1))]),(0,r.createElementVNode)("div",c2,[(0,r.createElementVNode)("div",d2,[t[21]||(t[21]=(0,r.createElementVNode)("span",{class:"relationship-label"},"ä¸ä½ çš„å…³ç³»",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["relationship-value",(o=y(c.value.ä¸ç©å®¶å…³ç³»),{ä»‡æ•Œ:"enemy",æ•Œå¯¹:"hostile",å†·æ·¡:"cold",ä¸­ç«‹:"neutral",å‹å¥½:"friendly",ç›Ÿå‹:"ally",é™„åº¸:"vassal"}[o]||"neutral")])},(0,r.toDisplayString)(y(c.value.ä¸ç©å®¶å…³ç³»)),3)]),(0,r.createElementVNode)("div",u2,[t[22]||(t[22]=(0,r.createElementVNode)("span",{class:"relationship-label"},"å£°æœ›å€¼",-1)),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["relationship-value reputation-value",(a=x(c.value.å£°æœ›å€¼),a>=25?"reputation-legendary":a>=20?"reputation-excellent":a>=15?"reputation-good":a>=10?"reputation-fair":a>=5?"reputation-low":"reputation-none")])},[(0,r.createTextVNode)((0,r.toDisplayString)(x(c.value.å£°æœ›å€¼))+" ",1),(0,r.createElementVNode)("span",m2,"("+(0,r.toDisplayString)(N(x(c.value.å£°æœ›å€¼)))+")",1)],2)])])]),(0,r.createCommentVNode)(" åŠ¿åŠ›èŒƒå›´ "),c.value.åŠ¿åŠ›èŒƒå›´è¯¦æƒ…?((0,r.openBlock)(),(0,r.createElementBlock)("div",p2,[(0,r.createElementVNode)("h5",f2,[(0,r.createVNode)((0,r.unref)(Lu),{size:16}),t[23]||(t[23]=(0,r.createElementVNode)("span",null,"åŠ¿åŠ›èŒƒå›´",-1))]),(0,r.createElementVNode)("div",g2,[(0,r.createElementVNode)("div",h2,[t[24]||(t[24]=(0,r.createElementVNode)("strong",null,"å½±å“èŒƒå›´ï¼š",-1)),(0,r.createTextVNode)((0,r.toDisplayString)(c.value.åŠ¿åŠ›èŒƒå›´è¯¦æƒ….å½±å“èŒƒå›´||"æœªçŸ¥"),1)]),c.value.åŠ¿åŠ›èŒƒå›´è¯¦æƒ….æ§åˆ¶åŒºåŸŸ?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",v2,[t[25]||(t[25]=(0,r.createElementVNode)("strong",null,"æ§åˆ¶åŒºåŸŸï¼š",-1)),(0,r.createElementVNode)("div",b2,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value.åŠ¿åŠ›èŒƒå›´è¯¦æƒ….æ§åˆ¶åŒºåŸŸ,e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"area-tag"},(0,r.toDisplayString)(e),1))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",y2,[t[26]||(t[26]=(0,r.createElementVNode)("strong",null,"æˆ˜ç•¥ä»·å€¼ï¼š",-1)),(0,r.createElementVNode)("div",x2,[(0,r.createElementVNode)("div",k2,[(0,r.createElementVNode)("div",{class:"value-fill",style:(0,r.normalizeStyle)({width:10*(c.value.åŠ¿åŠ›èŒƒå›´è¯¦æƒ….æˆ˜ç•¥ä»·å€¼||5)+"%"})},null,4)]),(0,r.createElementVNode)("span",w2,(0,r.toDisplayString)(c.value.åŠ¿åŠ›èŒƒå›´è¯¦æƒ….æˆ˜ç•¥ä»·å€¼||5)+"/10",1)])])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" åŠ å…¥æ¡ä»¶ "),c.value.å¯å¦åŠ å…¥?((0,r.openBlock)(),(0,r.createElementBlock)("div",E2,[(0,r.createElementVNode)("h5",N2,[(0,r.createVNode)((0,r.unref)(j0),{size:16}),t[27]||(t[27]=(0,r.createElementVNode)("span",null,"åŠ å…¥æ¡ä»¶",-1))]),(0,r.createElementVNode)("div",S2,[c.value.åŠ å…¥æ¡ä»¶?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",V2,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value.åŠ å…¥æ¡ä»¶,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"requirement-item"},[(0,r.createVNode)((0,r.unref)(QZ),{size:14,class:"requirement-icon"}),(0,r.createElementVNode)("span",_2,(0,r.toDisplayString)(e),1)]))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",C2,t[28]||(t[28]=[(0,r.createElementVNode)("p",null,"æš‚æ— ç‰¹æ®ŠåŠ å…¥æ¡ä»¶",-1)])))]),(0,r.createCommentVNode)(" åŠ å…¥å¥½å¤„ "),c.value.åŠ å…¥å¥½å¤„?.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",A2,[t[29]||(t[29]=(0,r.createElementVNode)("h6",{class:"benefits-title"},"åŠ å…¥å¥½å¤„",-1)),(0,r.createElementVNode)("div",D2,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value.åŠ å…¥å¥½å¤„,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e,class:"benefit-item"},[(0,r.createVNode)((0,r.unref)(U0),{size:14,class:"benefit-icon"}),(0,r.createElementVNode)("span",T2,(0,r.toDisplayString)(e),1)]))),128))])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" åŠ å…¥æŒ‰é’® "),(0,r.createElementVNode)("div",B2,[(0,r.createElementVNode)("button",{class:"join-btn",onClick:t[1]||(t[1]=e=>{return t=c.value,void ne.o.info(`ç”³è¯·åŠ å…¥ ${t.åç§°}ï¼ˆåŠŸèƒ½å¼€å‘ä¸­ï¼‰`);var t})},[(0,r.createVNode)((0,r.unref)(j0),{size:16}),t[30]||(t[30]=(0,r.createElementVNode)("span",null,"ç”³è¯·åŠ å…¥",-1))])])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" å·²åŠ å…¥å®—é—¨ä¿¡æ¯ "),(n=c.value,p.value?.å®—é—¨åç§°===n.åç§°?((0,r.openBlock)(),(0,r.createElementBlock)("div",I2,[(0,r.createElementVNode)("h5",z2,[(0,r.createVNode)((0,r.unref)(q0),{size:16}),t[31]||(t[31]=(0,r.createElementVNode)("span",null,"æˆ‘çš„å®—é—¨èº«ä»½",-1))]),(0,r.createElementVNode)("div",M2,[(0,r.createElementVNode)("div",P2,[(0,r.createElementVNode)("div",R2,[t[32]||(t[32]=(0,r.createElementVNode)("span",{class:"status-label"},"èŒä½",-1)),(0,r.createElementVNode)("span",$2,(0,r.toDisplayString)(p.value?.èŒä½||"æ•£ä¿®"),1)]),(0,r.createElementVNode)("div",O2,[t[33]||(t[33]=(0,r.createElementVNode)("span",{class:"status-label"},"è´¡çŒ®ç‚¹",-1)),(0,r.createElementVNode)("span",L2,(0,r.toDisplayString)(p.value?.è´¡çŒ®||0),1)]),(0,r.createElementVNode)("div",F2,[t[34]||(t[34]=(0,r.createElementVNode)("span",{class:"status-label"},"å£°æœ›",-1)),(0,r.createElementVNode)("span",j2,(0,r.toDisplayString)(p.value?.å£°æœ›||0),1)]),(0,r.createElementVNode)("div",U2,[t[35]||(t[35]=(0,r.createElementVNode)("span",{class:"status-label"},"åŠ å…¥æ—¶é—´",-1)),(0,r.createElementVNode)("span",q2,(0,r.toDisplayString)(S(p.value?.åŠ å…¥æ—¥æœŸ)),1)])])]),(0,r.createCommentVNode)(" å®—é—¨ä»»åŠ¡ "),(0,r.createElementVNode)("div",G2,[t[40]||(t[40]=(0,r.createElementVNode)("h6",{class:"actions-title"},"å®—é—¨åŠ¿åŠ›",-1)),(0,r.createElementVNode)("div",H2,[(0,r.createElementVNode)("button",{class:"sect-action-btn",onClick:_},[(0,r.createVNode)((0,r.unref)($u),{size:16}),t[36]||(t[36]=(0,r.createElementVNode)("span",null,"å®—é—¨ä»»åŠ¡",-1))]),(0,r.createElementVNode)("button",{class:"sect-action-btn",onClick:A},[(0,r.createVNode)((0,r.unref)(ju),{size:16}),t[37]||(t[37]=(0,r.createElementVNode)("span",null,"è´¡çŒ®å…‘æ¢",-1))]),(0,r.createElementVNode)("button",{class:"sect-action-btn",onClick:D},[(0,r.createVNode)((0,r.unref)(G0),{size:16}),t[38]||(t[38]=(0,r.createElementVNode)("span",null,"å®—é—¨è—ä¹¦",-1))]),(0,r.createElementVNode)("button",{class:"sect-action-btn",onClick:T},[(0,r.createVNode)((0,r.unref)(C),{size:16}),t[39]||(t[39]=(0,r.createElementVNode)("span",null,"åŒé—¨å¸ˆå…„å¼Ÿ",-1))])])])])):(0,r.createCommentVNode)("v-if",!0))])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",Y2,[(0,r.createVNode)((0,r.unref)(F0),{size:64,class:"placeholder-icon"}),t[41]||(t[41]=(0,r.createElementVNode)("p",{class:"placeholder-text"},"é€‰æ‹©ä¸€ä¸ªå®—é—¨æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯",-1)),t[42]||(t[42]=(0,r.createElementVNode)("p",{class:"placeholder-hint"},"å°˜ä¸–é—´çš„å®—é—¨åŠ¿åŠ›ç­‰ä½ æ¢ç´¢",-1))]))])])])]);var n,a,o,m,f}}});var X2=n(9490),J2={};J2.styleTagTransform=k(),J2.setAttributes=v(),J2.insert=g().bind(null,"head"),J2.domAPI=p(),J2.insertStyleElement=y(),u()(X2.A,J2),X2.A&&X2.A.locals&&X2.A.locals;const K2=(0,N.A)(W2,[["__scopeId","data-v-2bfc3b24"]]),Q2={class:"sect-system-panel"},Z2={class:"sect-tabs"},e5=["onClick"],t5={class:"sect-system-content"},n5=(0,r.defineComponent)({__name:"SectSystemPanel",setup(e){const t=(0,a.useRoute)(),n=(0,a.useRouter)(),o=(0,Iu.useGameStateStore)(),i=(0,r.computed)(()=>{const e=o.sectMemberInfo;return e&&e.å®—é—¨åç§°}),s=[{name:"SectOverview",label:"å®—é—¨æ¦‚è§ˆ",icon:Fu,requireJoin:!1},{name:"SectMembers",label:"å®—é—¨æˆå‘˜",icon:C,requireJoin:!0},{name:"SectMissions",label:"å®—é—¨ä»»åŠ¡",icon:$u,requireJoin:!0},{name:"SectLibrary",label:"å®—é—¨è—ç»",icon:Pu,requireJoin:!0},{name:"SectContribution",label:"è´¡çŒ®å…‘æ¢",icon:ju,requireJoin:!0}],l=(0,r.computed)(()=>s.filter(e=>!e.requireJoin||i.value));return(e,a)=>{const o=(0,r.resolveComponent)("router-view");return(0,r.openBlock)(),(0,r.createElementBlock)("div",Q2,[(0,r.createElementVNode)("div",Z2,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.value,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.name,class:(0,r.normalizeClass)(["sect-tab",{active:(a=e.name,String(t.name)===a)}]),onClick:t=>(e=>{n.push({name:e})})(e.name)},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:14})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.label),1)],10,e5);var a}),128))]),(0,r.createElementVNode)("div",t5,[(0,r.createVNode)(o)])])}}});var a5=n(4901),r5={};r5.styleTagTransform=k(),r5.setAttributes=v(),r5.insert=g().bind(null,"head"),r5.domAPI=p(),r5.insertStyleElement=y(),u()(a5.A,r5),a5.A&&a5.A.locals&&a5.A.locals;const o5=(0,N.A)(n5,[["__scopeId","data-v-5e39adc6"]]);var i5=n(7754);const s5=(0,V.A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),l5=(0,V.A)("swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),c5=(0,V.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var d5=n(5976);const u5={class:"sect-members"},m5={class:"player-info-bar"},p5={class:"info-item"},f5={class:"info-value sect-name"},g5={class:"info-item"},h5={class:"info-value position"},v5={class:"member-tabs"},b5=["onClick"],y5={key:0,class:"count-badge"},x5={class:"member-list"},k5={key:0,class:"empty-state"},w5={key:1,class:"members"},E5=["onClick"],N5={class:"member-avatar"},S5={class:"avatar-text"},V5={class:"member-info"},_5={class:"member-header"},C5={class:"member-name"},A5={class:"member-details"},D5={class:"detail-item realm"},T5={class:"quick-actions"},B5={class:"actions-title"},I5={class:"action-buttons"},z5={class:"members-notice"},M5=(0,r.defineComponent)({__name:"SectMembersContent",setup(e){const t=(0,Iu.useGameStateStore)(),n=(0,r.ref)("all"),a=[{key:"all",label:"å…¨éƒ¨",icon:C},{key:"é•¿è€",label:"é•¿è€",icon:q0},{key:"çœŸä¼ ",label:"çœŸä¼ ",icon:i5.A},{key:"åŒè¾ˆ",label:"åŒè¾ˆ",icon:_}],o=(0,r.computed)(()=>t.sectMemberInfo),i=(0,r.computed)(()=>o.value?.å®—é—¨åç§°||"æœªåŠ å…¥å®—é—¨"),s=(0,r.computed)(()=>o.value?.èŒä½||"æ•£ä¿®"),l=(0,r.computed)(()=>{const e=t.relationships||{};return Object.entries(e).filter(([e,t])=>(t.åŠ¿åŠ›å½’å±||t.å®—é—¨)===i.value).map(([e,t])=>{return{id:e,name:t.åå­—||e,gender:t.æ€§åˆ«||"ç”·",position:t.èŒä½||"å¼Ÿå­",realm:(a=t.å¢ƒç•Œ,a?"string"==typeof a?a:"object"==typeof a?`${a.åç§°||""}${a.é˜¶æ®µ||""}`:"æœªçŸ¥":"æœªçŸ¥"),relation:u(t.å¥½æ„Ÿåº¦),favorability:t.å¥½æ„Ÿåº¦||50,isSelf:!1,category:(n=t.èŒä½,n?n.includes("é•¿è€")||n.includes("å¤ªä¸Š")?"é•¿è€":n.includes("çœŸä¼ ")||n.includes("æ ¸å¿ƒ")?"çœŸä¼ ":"åŒè¾ˆ":"åŒè¾ˆ")};var n,a})}),c=(0,r.computed)(()=>"all"===n.value?l.value:l.value.filter(e=>e.category===n.value));function d(e){return"all"===e?l.value.length:l.value.filter(t=>t.category===e).length}function u(e){const t=e||50;return t>=90?"æŒšå‹":t>=75?"å¥½å‹":t>=60?"å‹å¥½":t>=40?"æ™®é€š":t>=20?"å†·æ·¡":"æ•Œè§†"}function m(e){rk(e),ne.o.success("å·²å‘é€åˆ°å¯¹è¯")}return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",u5,[(0,r.createCommentVNode)(" ç©å®¶ä¿¡æ¯æ  "),(0,r.createElementVNode)("div",m5,[(0,r.createElementVNode)("div",p5,[t[5]||(t[5]=(0,r.createElementVNode)("span",{class:"info-label"},"æ‰€å±å®—é—¨",-1)),(0,r.createElementVNode)("span",f5,(0,r.toDisplayString)(i.value),1)]),(0,r.createElementVNode)("div",g5,[t[6]||(t[6]=(0,r.createElementVNode)("span",{class:"info-label"},"æˆ‘çš„èŒä½",-1)),(0,r.createElementVNode)("span",h5,(0,r.toDisplayString)(s.value),1)])]),(0,r.createCommentVNode)(" æˆå‘˜åˆ†ç±» "),(0,r.createElementVNode)("div",v5,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a,e=>(0,r.createElementVNode)("button",{key:e.key,class:(0,r.normalizeClass)(["tab-btn",{active:n.value===e.key}]),onClick:t=>n.value=e.key},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:14})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.label),1),d(e.key)>0?((0,r.openBlock)(),(0,r.createElementBlock)("span",y5,(0,r.toDisplayString)(d(e.key)),1)):(0,r.createCommentVNode)("v-if",!0)],10,b5)),64))]),(0,r.createCommentVNode)(" æˆå‘˜åˆ—è¡¨ "),(0,r.createElementVNode)("div",x5,[0===c.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",k5,[(0,r.createVNode)((0,r.unref)(C),{size:48,class:"empty-icon"}),t[8]||(t[8]=(0,r.createElementVNode)("p",{class:"empty-text"},"æš‚æ— åŒé—¨ä¿¡æ¯",-1)),t[9]||(t[9]=(0,r.createElementVNode)("p",{class:"empty-hint"},"åŒé—¨ä¿¡æ¯ç”±AIæ ¹æ®å‰§æƒ…ç”Ÿæˆ",-1)),(0,r.createElementVNode)("button",{class:"ask-btn",onClick:t[0]||(t[0]=e=>m("è¯·å‘Šè¯‰æˆ‘å®—é—¨æœ‰å“ªäº›å¸ˆå…„å¼Ÿå§å¦¹"))},[(0,r.createVNode)((0,r.unref)(s5),{size:14}),t[7]||(t[7]=(0,r.createElementVNode)("span",null,"è¯¢é—®åŒé—¨ä¿¡æ¯",-1))])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",w5,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:(0,r.normalizeClass)(["member-card",{"is-self":e.isSelf}]),onClick:t=>function(e){m(`æˆ‘æƒ³å’Œ${e.name}äº¤è°ˆ`)}(e)},[(0,r.createElementVNode)("div",N5,[(0,r.createElementVNode)("span",S5,(0,r.toDisplayString)(e.name.charAt(0)),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["gender-badge","å¥³"===e.gender?"female":"male"])},(0,r.toDisplayString)("å¥³"===e.gender?"â™€":"â™‚"),3)]),(0,r.createElementVNode)("div",V5,[(0,r.createElementVNode)("div",_5,[(0,r.createElementVNode)("span",C5,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["member-position",(n=e.position,n.includes("é•¿è€")?"position-elder":n.includes("çœŸä¼ ")?"position-true":n.includes("å†…é—¨")?"position-inner":"position-outer")])},(0,r.toDisplayString)(e.position),3)]),(0,r.createElementVNode)("div",A5,[(0,r.createElementVNode)("span",D5,[(0,r.createVNode)((0,r.unref)(Ru),{size:12}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.realm),1)]),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["detail-item relation",(t=e.relation,{æŒšå‹:"relation-best",å¥½å‹:"relation-good",å‹å¥½:"relation-friendly",æ™®é€š:"relation-normal",å†·æ·¡:"relation-cold",æ•Œè§†:"relation-hostile"}[t]||"relation-normal")])},[(0,r.createVNode)((0,r.unref)(cf.A),{size:12}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.relation),1)],2)])]),(0,r.createVNode)((0,r.unref)(Nm),{size:16,class:"arrow-icon"})],10,E5);var t,n}),128))]))]),(0,r.createCommentVNode)(" å¿«æ·æ“ä½œ "),(0,r.createElementVNode)("div",T5,[(0,r.createElementVNode)("h4",B5,[(0,r.createVNode)((0,r.unref)(s5),{size:14}),t[10]||(t[10]=(0,r.createElementVNode)("span",null,"å¿«æ·å¯¹è¯",-1))]),(0,r.createElementVNode)("div",I5,[(0,r.createElementVNode)("button",{class:"action-btn",onClick:t[1]||(t[1]=e=>m("æˆ‘æƒ³æ‰¾åŒé—¨åˆ‡ç£‹ä¿®ç‚¼"))},[(0,r.createVNode)((0,r.unref)(l5),{size:14}),t[11]||(t[11]=(0,r.createElementVNode)("span",null,"é‚€è¯·åˆ‡ç£‹",-1))]),(0,r.createElementVNode)("button",{class:"action-btn",onClick:t[2]||(t[2]=e=>m("æˆ‘æƒ³è¯·æ•™å¸ˆå…„ä¿®ç‚¼å¿ƒå¾—"))},[(0,r.createVNode)((0,r.unref)(Pu),{size:14}),t[12]||(t[12]=(0,r.createElementVNode)("span",null,"è¯·æ•™ä¿®ç‚¼",-1))]),(0,r.createElementVNode)("button",{class:"action-btn",onClick:t[3]||(t[3]=e=>m("æˆ‘æƒ³å’ŒåŒé—¨ä¸€èµ·æ¢é™©"))},[(0,r.createVNode)((0,r.unref)(wm),{size:14}),t[13]||(t[13]=(0,r.createElementVNode)("span",null,"ç»„é˜Ÿæ¢é™©",-1))]),(0,r.createElementVNode)("button",{class:"action-btn",onClick:t[4]||(t[4]=e=>m("æˆ‘æƒ³äº†è§£å®—é—¨æœ€è¿‘æœ‰ä»€ä¹ˆæ¶ˆæ¯"))},[(0,r.createVNode)((0,r.unref)(c5),{size:14}),t[14]||(t[14]=(0,r.createElementVNode)("span",null,"å®—é—¨æ¶ˆæ¯",-1))])])]),(0,r.createCommentVNode)(" æç¤ºä¿¡æ¯ "),(0,r.createElementVNode)("div",z5,[(0,r.createVNode)((0,r.unref)(d5.A),{size:14}),t[15]||(t[15]=(0,r.createElementVNode)("span",null,"åŒé—¨å…³ç³»ä¼šå½±å“æ¸¸æˆå‘å±•ï¼Œå¯åœ¨å¯¹è¯ä¸­ä¸åŒé—¨äº’åŠ¨",-1))])]))}});var P5=n(6477),R5={};R5.styleTagTransform=k(),R5.setAttributes=v(),R5.insert=g().bind(null,"head"),R5.domAPI=p(),R5.insertStyleElement=y(),u()(P5.A,R5),P5.A&&P5.A.locals&&P5.A.locals;const $5=(0,N.A)(M5,[["__scopeId","data-v-659283e6"]]),O5=(0,V.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),L5=(0,V.A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),F5={class:"sect-missions"},j5={class:"player-info-bar"},U5={class:"info-item"},q5={class:"info-value position"},G5={class:"info-item"},H5={class:"info-value contribution"},Y5={class:"mission-tabs"},W5=["onClick"],X5={key:0,class:"count-badge"},J5={class:"mission-list"},K5={key:0,class:"empty-state"},Q5={class:"empty-text"},Z5={key:1,class:"missions"},e3={class:"mission-header"},t3={class:"mission-title"},n3={class:"mission-name"},a3={class:"mission-desc"},r3={class:"mission-objectives"},o3={class:"obj-text"},i3={class:"obj-progress"},s3={class:"mission-rewards"},l3={class:"reward-tags"},c3={key:0,class:"reward-tag contribution"},d3={key:1,class:"reward-tag experience"},u3={key:2,class:"reward-tag reputation"},m3={class:"mission-actions"},p3=["onClick"],f3=["onClick"],g3={key:2,class:"status-badge completed"},h3={class:"missions-tips"},v3=(0,r.defineComponent)({__name:"SectMissionsContent",setup(e){const t=(0,Iu.useGameStateStore)(),n=(0,r.ref)("all"),a=[{key:"all",label:"å…¨éƒ¨",icon:$u},{key:"æ—¥å¸¸",label:"æ—¥å¸¸",icon:O5},{key:"å®—é—¨",label:"å®—é—¨",icon:q0},{key:"æˆ˜æ–—",label:"æˆ˜æ–—",icon:l5}],o=(0,r.computed)(()=>t.sectMemberInfo),i=(0,r.computed)(()=>o.value?.èŒä½||"æ•£ä¿®"),s=(0,r.computed)(()=>o.value?.è´¡çŒ®||0),l=(0,r.computed)(()=>{const e=a.find(e=>e.key===n.value);return e?.label||""}),c=(0,r.computed)(()=>{const e=t.questSystem;return e?[...e.å½“å‰ä»»åŠ¡åˆ—è¡¨?Object.values(e.å½“å‰ä»»åŠ¡åˆ—è¡¨):[]].filter(e=>"å®—é—¨"===e.ä»»åŠ¡ç±»å‹||"å®—é—¨"===e.æ¥æº).map(e=>{return{id:e.ä»»åŠ¡ID,name:e.ä»»åŠ¡åç§°,description:e.ä»»åŠ¡æè¿°,type:e.ä»»åŠ¡ç±»å‹||"å®—é—¨",difficulty:(t=e.éš¾åº¦,{ç®€å•:"easy",æ™®é€š:"normal",å›°éš¾:"hard",æéš¾:"extreme"}[t||"æ™®é€š"]||"normal"),status:e.ä»»åŠ¡çŠ¶æ€,objectives:(e.ç›®æ ‡åˆ—è¡¨||[]).map(e=>({text:e.ç›®æ ‡æè¿°,current:e.å½“å‰è¿›åº¦||0,target:e.ç›®æ ‡è¿›åº¦||1})),rewards:{contribution:e.å¥–åŠ±?.è´¡çŒ®||e.å¥–åŠ±?.å£°æœ›||0,experience:e.å¥–åŠ±?.ä¿®ä¸º||0,reputation:e.å¥–åŠ±?.å®—é—¨å£°æœ›||0,items:e.å¥–åŠ±?.ç‰©å“||[]}};var t}):[]}),d=(0,r.computed)(()=>"all"===n.value?c.value:c.value.filter(e=>e.type===n.value));function u(e){return"all"===e?c.value.length:c.value.filter(t=>t.type===e).length}function m(e){rk(e),ne.o.success("å·²å‘é€åˆ°å¯¹è¯")}return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",F5,[(0,r.createCommentVNode)(" ç©å®¶ä¿¡æ¯æ  "),(0,r.createElementVNode)("div",j5,[(0,r.createElementVNode)("div",U5,[t[1]||(t[1]=(0,r.createElementVNode)("span",{class:"info-label"},"èŒä½",-1)),(0,r.createElementVNode)("span",q5,(0,r.toDisplayString)(i.value),1)]),(0,r.createElementVNode)("div",G5,[t[2]||(t[2]=(0,r.createElementVNode)("span",{class:"info-label"},"è´¡çŒ®ç‚¹",-1)),(0,r.createElementVNode)("span",H5,(0,r.toDisplayString)(s.value),1)])]),(0,r.createCommentVNode)(" ä»»åŠ¡åˆ†ç±»æ ‡ç­¾ "),(0,r.createElementVNode)("div",Y5,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a,e=>(0,r.createElementVNode)("button",{key:e.key,class:(0,r.normalizeClass)(["tab-btn",{active:n.value===e.key}]),onClick:t=>n.value=e.key},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:14})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.label),1),u(e.key)>0?((0,r.openBlock)(),(0,r.createElementBlock)("span",X5,(0,r.toDisplayString)(u(e.key)),1)):(0,r.createCommentVNode)("v-if",!0)],10,W5)),64))]),(0,r.createCommentVNode)(" ä»»åŠ¡åˆ—è¡¨ "),(0,r.createElementVNode)("div",J5,[0===d.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",K5,[(0,r.createVNode)((0,r.unref)($u),{size:48,class:"empty-icon"}),(0,r.createElementVNode)("p",Q5,"æš‚æ— "+(0,r.toDisplayString)(l.value)+"ä»»åŠ¡",1),t[4]||(t[4]=(0,r.createElementVNode)("p",{class:"empty-hint"},"å®—é—¨ä»»åŠ¡ç”±AIæ ¹æ®å‰§æƒ…ç”Ÿæˆï¼Œè¯·åœ¨å¯¹è¯ä¸­è¯¢é—®å®—é—¨ä»»åŠ¡",-1)),(0,r.createElementVNode)("button",{class:"ask-btn",onClick:t[0]||(t[0]=e=>m("æˆ‘æƒ³é¢†å–å®—é—¨ä»»åŠ¡"))},[(0,r.createVNode)((0,r.unref)(s5),{size:14}),t[3]||(t[3]=(0,r.createElementVNode)("span",null,"è¯¢é—®AIé¢†å–ä»»åŠ¡",-1))])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",Z5,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(d.value,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:(0,r.normalizeClass)(["mission-card",[`difficulty-${e.difficulty}`,{completed:"å·²å®Œæˆ"===e.status}]])},[(0,r.createElementVNode)("div",e3,[(0,r.createElementVNode)("div",t3,[(0,r.createElementVNode)("span",n3,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["mission-type",`type-${e.type}`])},(0,r.toDisplayString)(e.type),3)]),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["mission-difficulty",`diff-${e.difficulty}`])},(0,r.toDisplayString)((n=e.difficulty,{easy:"ç®€å•",normal:"æ™®é€š",hard:"å›°éš¾",extreme:"æéš¾"}[n]||"æ™®é€š")),3)]),(0,r.createElementVNode)("p",a3,(0,r.toDisplayString)(e.description),1),(0,r.createCommentVNode)(" ä»»åŠ¡ç›®æ ‡ "),(0,r.createElementVNode)("div",r3,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.objectives,(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:t,class:(0,r.normalizeClass)(["objective-item",{done:e.current>=e.target}])},[e.current>=e.target?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(QZ),{key:0,size:14,class:"obj-icon done"})):((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(L5),{key:1,size:14,class:"obj-icon"})),(0,r.createElementVNode)("span",o3,(0,r.toDisplayString)(e.text),1),(0,r.createElementVNode)("span",i3,(0,r.toDisplayString)(e.current)+"/"+(0,r.toDisplayString)(e.target),1)],2))),128))]),(0,r.createCommentVNode)(" ä»»åŠ¡å¥–åŠ± "),(0,r.createElementVNode)("div",s3,[t[5]||(t[5]=(0,r.createElementVNode)("span",{class:"rewards-label"},"å¥–åŠ±ï¼š",-1)),(0,r.createElementVNode)("div",l3,[e.rewards.contribution?((0,r.openBlock)(),(0,r.createElementBlock)("span",c3,[(0,r.createVNode)((0,r.unref)(ju),{size:12}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.rewards.contribution)+" è´¡çŒ® ",1)])):(0,r.createCommentVNode)("v-if",!0),e.rewards.experience?((0,r.openBlock)(),(0,r.createElementBlock)("span",d3,[(0,r.createVNode)((0,r.unref)(Ru),{size:12}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.rewards.experience)+" ä¿®ä¸º ",1)])):(0,r.createCommentVNode)("v-if",!0),e.rewards.reputation?((0,r.openBlock)(),(0,r.createElementBlock)("span",u3,[(0,r.createVNode)((0,r.unref)(uf),{size:12}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.rewards.reputation)+" å£°æœ› ",1)])):(0,r.createCommentVNode)("v-if",!0),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.rewards.items||[],e=>((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:e,class:"reward-tag item"},[(0,r.createVNode)((0,r.unref)(zu),{size:12}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e),1)]))),128))])]),(0,r.createCommentVNode)(" æ“ä½œæŒ‰é’® "),(0,r.createElementVNode)("div",m3,["è¿›è¡Œä¸­"===e.status?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"action-btn complete",onClick:t=>m(`æˆ‘è¦æäº¤å®—é—¨ä»»åŠ¡ã€Œ${e.name}ã€`)},[(0,r.createVNode)((0,r.unref)(QZ),{size:14}),t[6]||(t[6]=(0,r.createElementVNode)("span",null,"æäº¤ä»»åŠ¡",-1))],8,p3)):"å¯æ¥å–"===e.status?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:1,class:"action-btn accept",onClick:t=>m(`æˆ‘æƒ³æ¥å–å®—é—¨ä»»åŠ¡ã€Œ${e.name}ã€`)},[(0,r.createVNode)((0,r.unref)(Xj.A),{size:14}),t[7]||(t[7]=(0,r.createElementVNode)("span",null,"æ¥å–ä»»åŠ¡",-1))],8,f3)):((0,r.openBlock)(),(0,r.createElementBlock)("span",g3,[(0,r.createVNode)((0,r.unref)(QZ),{size:14}),t[8]||(t[8]=(0,r.createTextVNode)(" å·²å®Œæˆ ",-1))]))])],2);var n}),128))]))]),(0,r.createCommentVNode)(" æç¤ºä¿¡æ¯ "),(0,r.createElementVNode)("div",h3,[(0,r.createVNode)((0,r.unref)(d5.A),{size:14}),t[9]||(t[9]=(0,r.createElementVNode)("span",null,"å®—é—¨ä»»åŠ¡ç”±AIåŠ¨æ€ç”Ÿæˆï¼Œç‚¹å‡»æŒ‰é’®å°†ç›´æ¥å‘é€åˆ°å¯¹è¯",-1))])]))}});var b3=n(814),y3={};y3.styleTagTransform=k(),y3.setAttributes=v(),y3.insert=g().bind(null,"head"),y3.domAPI=p(),y3.insertStyleElement=y(),u()(b3.A,y3),b3.A&&b3.A.locals&&b3.A.locals;const x3=(0,N.A)(v3,[["__scopeId","data-v-1c6fff6c"]]),k3={class:"sect-library"},w3={class:"player-info-bar"},E3={class:"info-item"},N3={class:"info-value position"},S3={class:"info-item"},V3={class:"info-value contribution"},_3={class:"library-floors"},C3=["onClick"],A3={class:"floor-info"},D3={class:"floor-icon"},T3={class:"floor-name"},B3={class:"floor-requirement"},I3={class:"floor-status"},z3={key:0,class:"floor-content"},M3={key:0,class:"empty-floor"},P3={key:1,class:"technique-list"},R3={class:"tech-header"},$3={class:"tech-name"},O3={class:"tech-desc"},L3={class:"tech-footer"},F3={class:"tech-cost"},j3=["disabled","onClick"],U3={key:1,class:"owned-badge"},q3={class:"library-tips"},G3=(0,r.defineComponent)({__name:"SectLibraryContent",setup(e){const t=(0,Iu.useGameStateStore)(),n=(0,r.ref)(1),a={è®°åå¼Ÿå­:0,å¤–é—¨å¼Ÿå­:1,å†…é—¨å¼Ÿå­:2,çœŸä¼ å¼Ÿå­:3,æ ¸å¿ƒå¼Ÿå­:4,é•¿è€:5,å¤ªä¸Šé•¿è€:6},o=(0,r.computed)(()=>t.sectMemberInfo),i=(0,r.computed)(()=>o.value?.èŒä½||"æ•£ä¿®"),s=(0,r.computed)(()=>o.value?.è´¡çŒ®||0),l=(0,r.computed)(()=>a[i.value]??-1),c=(0,r.computed)(()=>{const e=t.inventory?.ç‰©å“||{};return Object.values(e).filter(e=>"åŠŸæ³•"===e.ç±»å‹).map(e=>e.ç‰©å“ID)}),d=(0,r.computed)(()=>{const e=function(){const e=o.value?.å®—é—¨åç§°;return e?[{id:"tech_basic_001",name:"åŸºç¡€åçº³æœ¯",quality:"å‡¡å“",qualityTier:"å‡¡",cost:100,description:"å…¥é—¨çº§å‘¼å¸åçº³ä¹‹æ³•ï¼Œå¯å¼•çµæ°”å…¥ä½“"},{id:"tech_basic_002",name:"å¼•æ°”è¯€",quality:"é»„å“ä¸‹",qualityTier:"é»„",cost:300,description:"å¤–é—¨å¼Ÿå­å¿…ä¿®åŠŸæ³•ï¼Œå¼•å¯¼çµæ°”è¿è½¬ç»è„‰"},{id:"tech_sword_001",name:"é’é”‹å‰‘è¯€",quality:"é»„å“ä¸­",qualityTier:"é»„",cost:500,description:"åŸºç¡€å‰‘æ³•ï¼Œå‰‘æ°”å‡Œå‰"}].map(e=>({...e,owned:c.value.includes(e.id),canAfford:s.value>=e.cost})):[]}();return[{level:1,name:"ç¬¬ä¸€å±‚",icon:"ğŸ“–",requirement:"å¤–é—¨å¼Ÿå­å¯å…¥",minPosition:1,accessible:l.value>=1,techniques:e.filter(e=>["å‡¡","é»„"].includes(e.qualityTier))},{level:2,name:"ç¬¬äºŒå±‚",icon:"ğŸ“š",requirement:"å†…é—¨å¼Ÿå­å¯å…¥",minPosition:2,accessible:l.value>=2,techniques:e.filter(e=>"ç„"===e.qualityTier)},{level:3,name:"ç¬¬ä¸‰å±‚",icon:"ğŸ“œ",requirement:"çœŸä¼ å¼Ÿå­å¯å…¥",minPosition:3,accessible:l.value>=3,techniques:e.filter(e=>"åœ°"===e.qualityTier)},{level:4,name:"ç¦åŒºå¯†åº“",icon:"ğŸ”®",requirement:"æ ¸å¿ƒå¼Ÿå­+é•¿è€ä»¤ç‰Œ",minPosition:4,accessible:l.value>=4,techniques:e.filter(e=>["å¤©","ä»™","ç¥"].includes(e.qualityTier))}]});return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",k3,[(0,r.createCommentVNode)(" ç©å®¶ä¿¡æ¯æ  "),(0,r.createElementVNode)("div",w3,[(0,r.createElementVNode)("div",E3,[t[0]||(t[0]=(0,r.createElementVNode)("span",{class:"info-label"},"èŒä½",-1)),(0,r.createElementVNode)("span",N3,(0,r.toDisplayString)(i.value),1)]),(0,r.createElementVNode)("div",S3,[t[1]||(t[1]=(0,r.createElementVNode)("span",{class:"info-label"},"è´¡çŒ®ç‚¹",-1)),(0,r.createElementVNode)("span",V3,(0,r.toDisplayString)(s.value),1)])]),(0,r.createCommentVNode)(" è—ç»é˜åˆ†å±‚ "),(0,r.createElementVNode)("div",_3,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(d.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.level,class:(0,r.normalizeClass)(["floor-section",{locked:!e.accessible,expanded:n.value===e.level}])},[(0,r.createElementVNode)("div",{class:"floor-header",onClick:t=>function(e){e.accessible?n.value=n.value===e.level?null:e.level:ne.o.warning("èŒä½ä¸è¶³ï¼Œæ— æ³•è¿›å…¥æ­¤å±‚")}(e)},[(0,r.createElementVNode)("div",A3,[(0,r.createElementVNode)("span",D3,(0,r.toDisplayString)(e.icon),1),(0,r.createElementVNode)("span",T3,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("span",B3,(0,r.toDisplayString)(e.requirement),1)]),(0,r.createElementVNode)("div",I3,[e.accessible?((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(Kx),{key:1,size:16,class:(0,r.normalizeClass)({rotated:n.value===e.level})},null,8,["class"])):((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(lO),{key:0,size:16}))])],8,C3),(0,r.createVNode)(r.Transition,{name:"slide"},{default:(0,r.withCtx)(()=>[n.value===e.level&&e.accessible?((0,r.openBlock)(),(0,r.createElementBlock)("div",z3,[0===e.techniques.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",M3,[(0,r.createVNode)((0,r.unref)(Pu),{size:32,class:"empty-icon"}),t[2]||(t[2]=(0,r.createElementVNode)("p",null,"æ­¤å±‚æš‚æ— å¯å­¦åŠŸæ³•",-1)),t[3]||(t[3]=(0,r.createElementVNode)("p",{class:"hint"},"åŠŸæ³•å°†ç”±AIæ ¹æ®å‰§æƒ…ç”Ÿæˆ",-1))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",P3,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.techniques,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:(0,r.normalizeClass)(["technique-card",{owned:e.owned,"can-afford":e.canAfford&&!e.owned}])},[(0,r.createElementVNode)("div",R3,[(0,r.createElementVNode)("span",$3,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["tech-quality",(t=e.quality,t.includes("å‡¡")?"quality-common":t.includes("é»„")?"quality-yellow":t.includes("ç„")?"quality-xuan":t.includes("åœ°")?"quality-earth":t.includes("å¤©")?"quality-heaven":"quality-common")])},(0,r.toDisplayString)(e.quality),3)]),(0,r.createElementVNode)("p",O3,(0,r.toDisplayString)(e.description),1),(0,r.createElementVNode)("div",L3,[(0,r.createElementVNode)("span",F3,[(0,r.createVNode)((0,r.unref)(ju),{size:14}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(e.cost)+" è´¡çŒ® ",1)]),e.owned?((0,r.openBlock)(),(0,r.createElementBlock)("span",U3,"å·²å­¦ä¹ ")):((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"learn-btn",disabled:!e.canAfford,onClick:t=>function(e){rk(`æˆ‘æƒ³ç”¨${e.cost}è´¡çŒ®ç‚¹åœ¨è—ç»é˜å­¦ä¹ ã€Œ${e.name}ã€`),ne.o.success("å·²å‘é€åˆ°å¯¹è¯")}(e)},(0,r.toDisplayString)(e.canAfford?"å­¦ä¹ ":"è´¡çŒ®ä¸è¶³"),9,j3))])],2);var t}),128))]))])):(0,r.createCommentVNode)("v-if",!0)]),_:2},1024)],2))),128))]),(0,r.createCommentVNode)(" æç¤ºä¿¡æ¯ "),(0,r.createElementVNode)("div",q3,[(0,r.createVNode)((0,r.unref)(d5.A),{size:14}),t[4]||(t[4]=(0,r.createElementVNode)("span",null,"åŠŸæ³•éœ€è¦é€šè¿‡æ¸¸æˆå‰§æƒ…è·å–æˆ–è®©AIç”Ÿæˆï¼Œæ­¤å¤„å±•ç¤ºå·²æœ‰åŠŸæ³•ä¾›å…‘æ¢å­¦ä¹ ",-1))])]))}});var H3=n(7733),Y3={};Y3.styleTagTransform=k(),Y3.setAttributes=v(),Y3.insert=g().bind(null,"head"),Y3.domAPI=p(),Y3.insertStyleElement=y(),u()(H3.A,Y3),H3.A&&H3.A.locals&&H3.A.locals;const W3=(0,N.A)(G3,[["__scopeId","data-v-36b56778"]]),X3=(0,V.A)("pill",[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]]),J3=(0,V.A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),K3=(0,V.A)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),Q3={class:"sect-contribution"},Z3={class:"player-info-bar"},e4={class:"info-item"},t4={class:"info-value position"},n4={class:"info-item highlight"},a4={class:"info-value contribution"},r4={class:"exchange-tabs"},o4=["onClick"],i4={class:"exchange-list"},s4={key:0,class:"empty-state"},l4={key:1,class:"items-grid"},c4={class:"item-header"},d4={class:"item-icon"},u4={class:"item-info"},m4={class:"item-name"},p4={class:"item-desc"},f4={class:"item-footer"},g4={class:"item-cost"},h4={key:0,class:"item-stock"},v4=["disabled","onClick"],b4={class:"contribution-tips"},y4={class:"tips-title"},x4={class:"tips-list"},k4={class:"tip-item"},w4={class:"tip-item"},E4={class:"tip-item"},N4={class:"tip-item"},S4={class:"exchange-notice"},V4=(0,r.defineComponent)({__name:"SectContributionContent",setup(e){const t=(0,Iu.useGameStateStore)(),n=(0,r.ref)("all"),a=[{key:"all",label:"å…¨éƒ¨",icon:zu},{key:"ä¸¹è¯",label:"ä¸¹è¯",icon:X3},{key:"åŠŸæ³•",label:"åŠŸæ³•",icon:Pu},{key:"è£…å¤‡",label:"è£…å¤‡",icon:qB},{key:"ææ–™",label:"ææ–™",icon:GB}],o=(0,r.computed)(()=>t.sectMemberInfo),i=(0,r.computed)(()=>o.value?.èŒä½||"æ•£ä¿®"),s=(0,r.computed)(()=>o.value?.è´¡çŒ®||0),l=(0,r.computed)(()=>[{id:"pill_001",name:"èšæ°”ä¸¹",icon:"ğŸ’Š",type:"ä¸¹è¯",quality:"é»„å“ä¸‹",description:"æœç”¨åå¯å¢åŠ 50ç‚¹ä¿®ä¸ºè¿›åº¦",cost:100,stock:10},{id:"pill_002",name:"ç–—ä¼¤ä¸¹",icon:"ğŸ’Š",type:"ä¸¹è¯",quality:"é»„å“ä¸­",description:"æœç”¨åå¯æ¢å¤30%æ°”è¡€",cost:150,stock:5},{id:"tech_001",name:"åŸºç¡€å‰‘è¯€",icon:"ğŸ“œ",type:"åŠŸæ³•",quality:"é»„å“ä¸‹",description:"å¤–é—¨å…¥é—¨å‰‘æ³•ï¼Œå¯è§£é”åŸºç¡€å‰‘æœ¯",cost:300,stock:void 0},{id:"equip_001",name:"å¼Ÿå­å‰‘",icon:"âš”ï¸",type:"è£…å¤‡",quality:"å‡¡å“",description:"å®—é—¨åˆ¶å¼ä½©å‰‘ï¼Œæ”»å‡»+5",cost:200,stock:3},{id:"mat_001",name:"çµè‰",icon:"ğŸŒ¿",type:"ææ–™",quality:"å‡¡å“",description:"å¸¸è§ç‚¼ä¸¹ææ–™",cost:50,stock:20}]),c=(0,r.computed)(()=>"all"===n.value?l.value:l.value.filter(e=>e.type===n.value));function d(e){return 0===e.stock?"å·²å”®ç½„":s.value<e.cost?"è´¡çŒ®ä¸è¶³":"å…‘æ¢"}function u(e){rk(e),ne.o.success("å·²å‘é€åˆ°å¯¹è¯")}return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Q3,[(0,r.createCommentVNode)(" ç©å®¶ä¿¡æ¯æ  "),(0,r.createElementVNode)("div",Z3,[(0,r.createElementVNode)("div",e4,[t[1]||(t[1]=(0,r.createElementVNode)("span",{class:"info-label"},"èŒä½",-1)),(0,r.createElementVNode)("span",t4,(0,r.toDisplayString)(i.value),1)]),(0,r.createElementVNode)("div",n4,[t[2]||(t[2]=(0,r.createElementVNode)("span",{class:"info-label"},"å¯ç”¨è´¡çŒ®ç‚¹",-1)),(0,r.createElementVNode)("span",a4,(0,r.toDisplayString)(s.value),1)])]),(0,r.createCommentVNode)(" å…‘æ¢åˆ†ç±» "),(0,r.createElementVNode)("div",r4,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a,e=>(0,r.createElementVNode)("button",{key:e.key,class:(0,r.normalizeClass)(["tab-btn",{active:n.value===e.key}]),onClick:t=>n.value=e.key},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:14})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.label),1)],10,o4)),64))]),(0,r.createCommentVNode)(" å…‘æ¢ç‰©å“åˆ—è¡¨ "),(0,r.createElementVNode)("div",i4,[0===c.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",s4,[(0,r.createVNode)((0,r.unref)(zu),{size:48,class:"empty-icon"}),t[4]||(t[4]=(0,r.createElementVNode)("p",{class:"empty-text"},"æš‚æ— å¯å…‘æ¢ç‰©å“",-1)),t[5]||(t[5]=(0,r.createElementVNode)("p",{class:"empty-hint"},"å¯å…‘æ¢ç‰©å“ç”±AIæ ¹æ®å®—é—¨è®¾å®šç”Ÿæˆ",-1)),(0,r.createElementVNode)("button",{class:"ask-btn",onClick:t[0]||(t[0]=e=>u("è¯·å‘Šè¯‰æˆ‘å®—é—¨è´¡çŒ®å¯ä»¥å…‘æ¢ä»€ä¹ˆç‰©å“"))},[(0,r.createVNode)((0,r.unref)(s5),{size:14}),t[3]||(t[3]=(0,r.createElementVNode)("span",null,"è¯¢é—®å¯å…‘æ¢ç‰©å“",-1))])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",l4,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(c.value,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:(0,r.normalizeClass)(["item-card",{"can-afford":s.value>=e.cost,"out-of-stock":0===e.stock}])},[(0,r.createElementVNode)("div",c4,[(0,r.createElementVNode)("span",d4,(0,r.toDisplayString)(e.icon),1),(0,r.createElementVNode)("div",u4,[(0,r.createElementVNode)("span",m4,(0,r.toDisplayString)(e.name),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["item-quality",(t=e.quality,t.includes("å‡¡")?"quality-common":t.includes("é»„")?"quality-yellow":t.includes("ç„")?"quality-xuan":t.includes("åœ°")?"quality-earth":t.includes("å¤©")?"quality-heaven":"quality-common")])},(0,r.toDisplayString)(e.quality),3)])]),(0,r.createElementVNode)("p",p4,(0,r.toDisplayString)(e.description),1),(0,r.createElementVNode)("div",f4,[(0,r.createElementVNode)("div",g4,[(0,r.createVNode)((0,r.unref)(ju),{size:14}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.cost)+" è´¡çŒ®",1)]),void 0!==e.stock?((0,r.openBlock)(),(0,r.createElementBlock)("div",h4,[(0,r.createVNode)((0,r.unref)(zu),{size:12}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(e.stock>0?`å‰©ä½™ ${e.stock}`:"å·²å”®ç½„"),1)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("button",{class:"exchange-btn",disabled:s.value<e.cost||0===e.stock,onClick:t=>function(e){u(`æˆ‘æƒ³ç”¨${e.cost}è´¡çŒ®ç‚¹å…‘æ¢ã€Œ${e.name}ã€`)}(e)},[(0,r.createVNode)((0,r.unref)(J3),{size:14}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(d(e)),1)],8,v4)],2);var t}),128))]))]),(0,r.createCommentVNode)(" è´¡çŒ®è·å–é€”å¾„ "),(0,r.createElementVNode)("div",b4,[(0,r.createElementVNode)("h4",y4,[(0,r.createVNode)((0,r.unref)(K3),{size:14}),t[6]||(t[6]=(0,r.createElementVNode)("span",null,"è´¡çŒ®ç‚¹è·å–é€”å¾„",-1))]),(0,r.createElementVNode)("div",x4,[(0,r.createElementVNode)("div",k4,[(0,r.createVNode)((0,r.unref)($u),{size:12}),t[7]||(t[7]=(0,r.createElementVNode)("span",null,"å®Œæˆå®—é—¨ä»»åŠ¡",-1))]),(0,r.createElementVNode)("div",w4,[(0,r.createVNode)((0,r.unref)(zu),{size:12}),t[8]||(t[8]=(0,r.createElementVNode)("span",null,"ä¸Šäº¤çç¨€èµ„æº",-1))]),(0,r.createElementVNode)("div",E4,[(0,r.createVNode)((0,r.unref)(l5),{size:12}),t[9]||(t[9]=(0,r.createElementVNode)("span",null,"å‚ä¸å®—é—¨æˆ˜æ–—",-1))]),(0,r.createElementVNode)("div",N4,[(0,r.createVNode)((0,r.unref)(C),{size:12}),t[10]||(t[10]=(0,r.createElementVNode)("span",null,"æŒ‡å¯¼ä½é˜¶å¼Ÿå­",-1))])])]),(0,r.createCommentVNode)(" æç¤ºä¿¡æ¯ "),(0,r.createElementVNode)("div",S4,[(0,r.createVNode)((0,r.unref)(d5.A),{size:14}),t[11]||(t[11]=(0,r.createElementVNode)("span",null,"ç‚¹å‡»å…‘æ¢å°†ç›´æ¥å‘é€åˆ°å¯¹è¯ï¼ˆç”±AIåˆ¤å®šå¹¶æ‰§è¡Œå…‘æ¢ï¼‰",-1))])]))}});var _4=n(2293),C4={};C4.styleTagTransform=k(),C4.setAttributes=v(),C4.insert=g().bind(null,"head"),C4.domAPI=p(),C4.insertStyleElement=y(),u()(_4.A,C4),_4.A&&_4.A.locals&&_4.A.locals;const A4=(0,N.A)(V4,[["__scopeId","data-v-21cfc8bd"]]),D4={class:"game-variable-data-header"},T4={class:"panel-header"},B4={class:"panel-title"},I4={class:"header-actions"},z4={class:"search-bar"},M4=["value"],P4=(0,r.defineComponent)({__name:"GameVariableDataHeader",props:{searchQuery:{},isRefreshing:{type:Boolean}},emits:["update:search-query","show-format-guide","refresh","export","show-stats"],setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",D4,[(0,r.createElementVNode)("div",T4,[(0,r.createElementVNode)("h2",B4,[(0,r.createVNode)((0,r.unref)(Uu),{size:20}),t[2]||(t[2]=(0,r.createElementVNode)("span",null,"æ¸¸æˆå˜é‡æŸ¥çœ‹",-1))]),(0,r.createElementVNode)("div",I4,[(0,r.createElementVNode)("div",z4,[(0,r.createVNode)((0,r.unref)(HB),{size:16}),(0,r.createElementVNode)("input",{value:e.searchQuery,onInput:t[0]||(t[0]=t=>e.$emit("update:search-query",t.target.value)),placeholder:"æœç´¢æ•°æ®...",class:"search-input"},null,40,M4)]),(0,r.createElementVNode)("button",{class:"format-guide-btn",onClick:t[1]||(t[1]=t=>e.$emit("show-format-guide")),title:"æŸ¥çœ‹æ•°æ®æ ¼å¼è¯´æ˜"},[(0,r.createVNode)((0,r.unref)(Pu),{size:16}),t[3]||(t[3]=(0,r.createElementVNode)("span",null,"æ ¼å¼è¯´æ˜",-1))])])])]))});var R4=n(6119),$4={};$4.styleTagTransform=k(),$4.setAttributes=v(),$4.insert=g().bind(null,"head"),$4.domAPI=p(),$4.insertStyleElement=y(),u()(R4.A,$4),R4.A&&R4.A.locals&&R4.A.locals;const O4=(0,N.A)(P4,[["__scopeId","data-v-759e00bb"]]),L4=(0,V.A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),F4=(0,V.A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),j4=(0,V.A)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),U4={class:"data-type-selector"},q4=["onClick"],G4={key:0,class:"count-badge"},H4=(0,r.defineComponent)({__name:"GameVariableDataSelector",props:{dataTypes:{},selectedType:{},getDataCount:{type:Function}},emits:["update:selected-type"],setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",U4,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.dataTypes,t=>{return(0,r.openBlock)(),(0,r.createElementBlock)("button",{key:t.key,onClick:n=>e.$emit("update:selected-type",t.key),class:(0,r.normalizeClass)(["type-btn",{active:e.selectedType===t.key}])},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)((n=t.icon,{MessageSquare:L4,Globe:Sm.A,Users:C,Archive:F4,Book:G0,Brain:Mu,Code:j4}[n]||j4)),{size:16})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(t.label),1),e.getDataCount(t.key)>0?((0,r.openBlock)(),(0,r.createElementBlock)("span",G4,(0,r.toDisplayString)(e.getDataCount(t.key)),1)):(0,r.createCommentVNode)("v-if",!0)],10,q4);var n}),128))]))});var Y4=n(1703),W4={};W4.styleTagTransform=k(),W4.setAttributes=v(),W4.insert=g().bind(null,"head"),W4.domAPI=p(),W4.insertStyleElement=y(),u()(Y4.A,W4),Y4.A&&Y4.A.locals&&Y4.A.locals;const X4=(0,N.A)(H4,[["__scopeId","data-v-2d9375b2"]]),J4=(0,V.A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),K4=(0,V.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Q4={class:"variable-section"},Z4={class:"section-header"},e8={class:"section-title"},t8=["disabled"],n8={class:"variable-content"},a8={key:0,class:"variable-list"},r8={class:"variable-header"},o8={class:"variable-key"},i8={class:"variable-type"},s8={class:"variable-actions"},l8=["onClick","disabled"],c8=["onClick"],d8=["onClick","disabled"],u8={class:"variable-value"},m8={key:0,class:"code-pre"},p8={key:1},f8={key:1,class:"empty-state"},g8={key:0},h8={key:1},v8={class:"debug-info"},b8={class:"debug-content"},y8={class:"debug-actions"},x8=(0,r.defineComponent)({__name:"CustomOptionsSection",props:{type:{},variables:{},searchQuery:{},readOnly:{type:Boolean,default:!1},chatVariables:{},customOptions:{},coreDataViews:{}},emits:["edit-variable","copy-variable","delete-variable","add-new-variable","debug-log"],setup(e){const t=e=>null===e?"null":void 0===e?"undefined":Array.isArray(e)?`array[${e.length}]`:"object"==typeof e?`object{${Object.keys(e).length}}`:typeof e;return(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",Q4,[(0,r.createElementVNode)("div",Z4,[(0,r.createElementVNode)("h3",e8,(0,r.toDisplayString)("chat"===e.type?"Chat Variables (èŠå¤©å˜é‡)":"core"===e.type?"Core Data (æ ¸å¿ƒæ•°æ®)":"Custom Options (è‡ªå®šä¹‰é€‰é¡¹)"),1),(0,r.createElementVNode)("button",{onClick:n[0]||(n[0]=t=>e.$emit("add-new-variable",e.type)),class:"add-btn",disabled:e.readOnly},[(0,r.createVNode)((0,r.unref)(Xj.A),{size:14}),n[2]||(n[2]=(0,r.createElementVNode)("span",null,"æ–°å¢å˜é‡",-1))],8,t8)]),(0,r.createElementVNode)("div",n8,[Object.keys(e.variables).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",a8,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.variables,(n,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:a,class:"variable-item"},[(0,r.createElementVNode)("div",r8,[(0,r.createElementVNode)("span",o8,(0,r.toDisplayString)(a),1),(0,r.createElementVNode)("span",i8,(0,r.toDisplayString)(t(n)),1),(0,r.createElementVNode)("div",s8,[(0,r.createElementVNode)("button",{onClick:t=>e.$emit("edit-variable",{type:e.type,key:a,value:n}),class:"action-btn edit",title:"ç¼–è¾‘",disabled:e.readOnly},[(0,r.createVNode)((0,r.unref)(J4),{size:12})],8,l8),(0,r.createElementVNode)("button",{onClick:t=>e.$emit("copy-variable",{key:a,value:n}),class:"action-btn copy",title:"å¤åˆ¶"},[(0,r.createVNode)((0,r.unref)(K4),{size:12})],8,c8),(0,r.createElementVNode)("button",{onClick:t=>e.$emit("delete-variable",{type:e.type,key:a}),class:"action-btn delete",title:"åˆ é™¤",disabled:e.readOnly},[(0,r.createVNode)((0,r.unref)(ea.A),{size:12})],8,d8)])]),(0,r.createElementVNode)("div",u8,["object"==typeof n?((0,r.openBlock)(),(0,r.createElementBlock)("pre",m8,(0,r.toDisplayString)(JSON.stringify(n,null,2)),1)):((0,r.openBlock)(),(0,r.createElementBlock)("span",p8,(0,r.toDisplayString)(n),1))])]))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",f8,[(0,r.createVNode)((0,r.unref)(zu),{size:32}),e.searchQuery?((0,r.openBlock)(),(0,r.createElementBlock)("p",g8,"æ— åŒ¹é…çš„å˜é‡")):((0,r.openBlock)(),(0,r.createElementBlock)("p",h8,(0,r.toDisplayString)("chat"===e.type?"æš‚æ— èŠå¤©å˜é‡":"core"===e.type?"æš‚æ— æ ¸å¿ƒæ•°æ®":"æš‚æ— è‡ªå®šä¹‰é€‰é¡¹"),1)),(0,r.createElementVNode)("div",v8,[(0,r.createElementVNode)("details",null,[n[5]||(n[5]=(0,r.createElementVNode)("summary",null,"ğŸ” è°ƒè¯•ä¿¡æ¯ (ç‚¹å‡»å±•å¼€)",-1)),(0,r.createElementVNode)("div",b8,[n[4]||(n[4]=(0,r.createElementVNode)("p",null,[(0,r.createElementVNode)("strong",null,"è¿æ¥çŠ¶æ€:"),(0,r.createTextVNode)(" âœ…å·²è¿æ¥")],-1)),(0,r.createElementVNode)("p",null,[n[3]||(n[3]=(0,r.createElementVNode)("strong",null,"å˜é‡æ•°é‡:",-1)),(0,r.createTextVNode)(" "+(0,r.toDisplayString)(Object.keys(e.variables).length),1)]),(0,r.createElementVNode)("div",y8,[(0,r.createElementVNode)("button",{onClick:n[1]||(n[1]=t=>e.$emit("debug-log")),class:"debug-btn"}," ğŸ–¼ï¸ æ§åˆ¶å°è¾“å‡º ")])])])])]))])]))}});var k8=n(6896),w8={};w8.styleTagTransform=k(),w8.setAttributes=v(),w8.insert=g().bind(null,"head"),w8.domAPI=p(),w8.insertStyleElement=y(),u()(k8.A,w8),k8.A&&k8.A.locals&&k8.A.locals;const E8=(0,N.A)(x8,[["__scopeId","data-v-510a4b50"]]),N8={class:"character-section"},S8={key:0,class:"character-info"},V8={class:"info-grid"},_8={class:"info-item"},C8={class:"info-value"},A8={class:"info-item"},D8={class:"info-value"},T8={class:"data-detail"},B8={class:"code-pre"},I8={key:1,class:"empty-state"},z8=(0,r.defineComponent)({__name:"GameVariableCharacterSection",props:{characterData:{}},setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",N8,[t[4]||(t[4]=(0,r.createElementVNode)("div",{class:"section-header"},[(0,r.createElementVNode)("h3",{class:"section-title"},"Character Data (è§’è‰²æ•°æ®)")],-1)),e.characterData?((0,r.openBlock)(),(0,r.createElementBlock)("div",S8,[(0,r.createElementVNode)("div",V8,[(0,r.createElementVNode)("div",_8,[t[0]||(t[0]=(0,r.createElementVNode)("span",{class:"info-label"},"è§’è‰²åç§°:",-1)),(0,r.createElementVNode)("span",C8,(0,r.toDisplayString)(e.characterData?.name||e.characterData?.åå­—||"æœªçŸ¥"),1)]),(0,r.createElementVNode)("div",A8,[t[1]||(t[1]=(0,r.createElementVNode)("span",{class:"info-label"},"è§’è‰²ID:",-1)),(0,r.createElementVNode)("span",D8,(0,r.toDisplayString)(e.characterData?.id||"æœªçŸ¥"),1)])]),(0,r.createElementVNode)("div",T8,[t[2]||(t[2]=(0,r.createElementVNode)("h4",{class:"detail-title"},"å®Œæ•´è§’è‰²æ•°æ®:",-1)),(0,r.createElementVNode)("pre",B8,(0,r.toDisplayString)(JSON.stringify(e.characterData,null,2)),1)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",I8,[(0,r.createVNode)((0,r.unref)(C),{size:32}),t[3]||(t[3]=(0,r.createElementVNode)("p",null,"æš‚æ— è§’è‰²æ•°æ®",-1))]))]))});var M8=n(3509),P8={};P8.styleTagTransform=k(),P8.setAttributes=v(),P8.insert=g().bind(null,"head"),P8.domAPI=p(),P8.insertStyleElement=y(),u()(M8.A,P8),M8.A&&M8.A.locals&&M8.A.locals;const R8=(0,N.A)(z8,[["__scopeId","data-v-6cf48088"]]),$8={class:"save-data-section"},O8={class:"save-data-content"},L8={key:0,class:"data-tree"},F8={key:1,class:"empty-state"},j8=(0,r.defineComponent)({__name:"GameVariableSaveDataSection",props:{saveData:{},readOnly:{type:Boolean,default:!1}},emits:["edit-variable"],setup(e,{emit:t}){const a=(0,r.defineAsyncComponent)(()=>Promise.resolve().then(n.bind(n,1419))),o=e,i=t,s=(0,Iu.useGameStateStore)(),l=(0,r.computed)(()=>{const e=o.saveData??{},t=(0,bd.ru)(e)?e:(0,bd.jj)(e).migrated;return{å…ƒæ•°æ®:t.å…ƒæ•°æ®,è§’è‰²:t.è§’è‰²,ç¤¾äº¤:t.ç¤¾äº¤,ä¸–ç•Œ:t.ä¸–ç•Œ,ç³»ç»Ÿ:t.ç³»ç»Ÿ}}),c=(e,t)=>{o.readOnly?ne.o.warning("è”æœºæ¨¡å¼ä¸‹ä¸å…è®¸ç›´æ¥ä¿®æ”¹å­˜æ¡£æ•°æ®ï¼ˆæœåŠ¡å™¨æƒå¨æ§åˆ¶ï¼‰"):i("edit-variable",{type:"saveData",key:e,value:t})},d=async e=>{if(o.readOnly)ne.o.warning("è”æœºæ¨¡å¼ä¸‹ä¸å…è®¸ç›´æ¥åˆ é™¤å­˜æ¡£æ•°æ®ï¼ˆæœåŠ¡å™¨æƒå¨æ§åˆ¶ï¼‰");else if(oN.Yz.log("[TavernSaveData]",`è¯·æ±‚åˆ é™¤: ${e}`),confirm(`ç¡®å®šè¦åˆ é™¤æ­¤é¡¹ç›®å—ï¼Ÿ\nè·¯å¾„: ${e}\n\næ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`))try{const t=e.split("."),n=e.startsWith("è§’è‰².èƒŒåŒ….ç‰©å“.")&&4===t.length,a=e.startsWith("ç¤¾äº¤.å…³ç³».")&&3===t.length;if(!n&&!a)return void ne.o.warning("è¯¥è·¯å¾„æš‚ä¸æ”¯æŒåˆ é™¤ï¼Œè¯·é€šè¿‡æ¸¸æˆå†…æ“ä½œå¤„ç†");if(n){const e=t[3],n=s.inventory;if(!n?.ç‰©å“?.[e])throw new Error(`ç‰©å“ä¸å­˜åœ¨: ${e}`);const a=JSON.parse(JSON.stringify(n));delete a.ç‰©å“[e],s.updateState("inventory",a)}else{const e=t[2],n=s.relationships;if(!n?.[e])throw new Error(`NPCä¸å­˜åœ¨: ${e}`);const a=JSON.parse(JSON.stringify(n));delete a[e],s.updateState("relationships",a)}await s.saveGame(),ne.o.success(`é¡¹ç›® ${e} å·²åˆ é™¤`),oN.Yz.log("[TavernSaveData]",`æˆåŠŸåˆ é™¤å¹¶åŒæ­¥: ${e}`)}catch(e){oN.Yz.error("[TavernSaveData]","åˆ é™¤å¤±è´¥",e),ne.o.error(`åˆ é™¤å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",$8,[t[1]||(t[1]=(0,r.createElementVNode)("div",{class:"section-header"},[(0,r.createElementVNode)("h3",{class:"section-title"},"Save Data (å­˜æ¡£æ•°æ®)")],-1)),(0,r.createElementVNode)("div",O8,[l.value&&Object.keys(l.value).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",L8,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l.value,(t,n)=>((0,r.openBlock)(),(0,r.createBlock)((0,r.unref)(a),{key:n,"node-key":n,value:t,path:String(n),"read-only":e.readOnly,onDeleteItem:d,onEditItem:c},null,8,["node-key","value","path","read-only"]))),128))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",F8,[(0,r.createVNode)((0,r.unref)(F4),{size:32}),t[0]||(t[0]=(0,r.createElementVNode)("p",null,"æš‚æ— å­˜æ¡£æ•°æ®",-1))]))])]))}});var U8=n(7986),q8={};q8.styleTagTransform=k(),q8.setAttributes=v(),q8.insert=g().bind(null,"head"),q8.domAPI=p(),q8.insertStyleElement=y(),u()(U8.A,q8),U8.A&&U8.A.locals&&U8.A.locals;const G8=(0,N.A)(j8,[["__scopeId","data-v-68cac9c5"]]),H8={class:"world-info-section"},Y8={class:"world-info-content"},W8={key:0,class:"data-display"},X8={class:"code-pre"},J8={key:1,class:"empty-state"},K8=(0,r.defineComponent)({__name:"GameVariableWorldInfoSection",props:{worldInfo:{}},setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",H8,[t[1]||(t[1]=(0,r.createElementVNode)("div",{class:"section-header"},[(0,r.createElementVNode)("h3",{class:"section-title"},"World Info (ä¸–ç•Œä¿¡æ¯)")],-1)),(0,r.createElementVNode)("div",Y8,[e.worldInfo&&Object.keys(e.worldInfo).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",W8,[(0,r.createElementVNode)("pre",X8,(0,r.toDisplayString)(JSON.stringify(e.worldInfo,null,2)),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",J8,[(0,r.createVNode)((0,r.unref)(G0),{size:32}),t[0]||(t[0]=(0,r.createElementVNode)("p",null,"æš‚æ— ä¸–ç•Œä¿¡æ¯",-1))]))])]))});var Q8=n(2748),Z8={};Z8.styleTagTransform=k(),Z8.setAttributes=v(),Z8.insert=g().bind(null,"head"),Z8.domAPI=p(),Z8.insertStyleElement=y(),u()(Q8.A,Z8),Q8.A&&Q8.A.locals&&Q8.A.locals;const e6=(0,N.A)(K8,[["__scopeId","data-v-dbebcd90"]]),t6={class:"memory-section"},n6={class:"memory-content"},a6={key:0,class:"data-display"},r6={class:"code-pre"},o6={key:1,class:"empty-state"},i6=(0,r.defineComponent)({__name:"GameVariableMemorySection",props:{memoryData:{}},setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",t6,[t[1]||(t[1]=(0,r.createElementVNode)("div",{class:"section-header"},[(0,r.createElementVNode)("h3",{class:"section-title"},"Memory Data (è®°å¿†æ•°æ®)")],-1)),(0,r.createElementVNode)("div",n6,[e.memoryData&&Object.keys(e.memoryData).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",a6,[(0,r.createElementVNode)("pre",r6,(0,r.toDisplayString)(JSON.stringify(e.memoryData,null,2)),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",o6,[(0,r.createVNode)((0,r.unref)(Mu),{size:32}),t[0]||(t[0]=(0,r.createElementVNode)("p",null,"æš‚æ— è®°å¿†æ•°æ®",-1))]))])]))});var s6=n(8092),l6={};l6.styleTagTransform=k(),l6.setAttributes=v(),l6.insert=g().bind(null,"head"),l6.domAPI=p(),l6.insertStyleElement=y(),u()(s6.A,l6),s6.A&&s6.A.locals&&s6.A.locals;const c6=(0,N.A)(i6,[["__scopeId","data-v-04e0cd04"]]),d6={class:"raw-data-section"},u6={class:"raw-data-content"},m6={key:0,class:"data-display"},p6={class:"code-pre"},f6={key:1,class:"empty-state"},g6=(0,r.defineComponent)({__name:"GameVariableRawDataSection",props:{allTavernData:{}},setup:e=>(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",d6,[t[1]||(t[1]=(0,r.createElementVNode)("div",{class:"section-header"},[(0,r.createElementVNode)("h3",{class:"section-title"},"Raw Data (åŸå§‹æ•°æ®)")],-1)),(0,r.createElementVNode)("div",u6,[e.allTavernData&&Object.keys(e.allTavernData).length>0?((0,r.openBlock)(),(0,r.createElementBlock)("div",m6,[(0,r.createElementVNode)("pre",p6,(0,r.toDisplayString)(JSON.stringify(e.allTavernData,null,2)),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",f6,[(0,r.createVNode)((0,r.unref)(j4),{size:32}),t[0]||(t[0]=(0,r.createElementVNode)("p",null,"æš‚æ— åŸå§‹æ•°æ®",-1))]))])]))});var h6=n(1021),v6={};v6.styleTagTransform=k(),v6.setAttributes=v(),v6.insert=g().bind(null,"head"),v6.domAPI=p(),v6.insertStyleElement=y(),u()(h6.A,v6),h6.A&&h6.A.locals&&h6.A.locals;const b6=(0,N.A)(g6,[["__scopeId","data-v-2cab0dce"]]),y6={class:"data-display"},x6={key:0,class:"loading-state"},k6={key:1,class:"data-content"},w6={key:0,class:"error-state"},E6=(0,r.defineComponent)({__name:"GameVariableDataDisplay",props:{isLoading:{type:Boolean},selectedDataType:{},searchQuery:{},readOnly:{type:Boolean,default:!1},coreDataViews:{},customOptions:{},characterData:{},saveData:{},worldInfo:{},memoryData:{},allGameData:{},filteredCoreDataViews:{},filteredCustomOptions:{},filteredChatVariables:{}},emits:["edit-variable","copy-variable","delete-variable","add-new-variable","debug-log"],setup(e){const t=e,n=(0,r.ref)(!1),a=()=>{n.value=!1},o=()=>{switch(t.selectedDataType){case"core":case"custom":default:return E8;case"character":return R8;case"saveData":return G8;case"worldInfo":return e6;case"memory":return c6;case"raw":return b6}},i=()=>{const e={searchQuery:t.searchQuery,coreDataViews:t.coreDataViews||{},customOptions:t.customOptions||{},readOnly:t.readOnly};switch(t.selectedDataType){case"core":return{...e,type:"core",variables:t.filteredCoreDataViews||{}};case"custom":return{...e,type:"custom",variables:t.filteredCustomOptions||{}};case"character":return{characterData:t.characterData};case"saveData":return{saveData:t.saveData,readOnly:t.readOnly};case"worldInfo":return{worldInfo:t.worldInfo};case"memory":return{memoryData:t.memoryData};case"raw":return{allGameData:t.allGameData};default:return{...e,type:"chat",variables:t.filteredChatVariables||{}}}};return(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",y6,[e.isLoading?((0,r.openBlock)(),(0,r.createElementBlock)("div",x6,[(0,r.createVNode)((0,r.unref)(ek),{size:32,class:"animate-spin"}),t[5]||(t[5]=(0,r.createElementVNode)("p",null,"æ­£åœ¨åŠ è½½æ•°æ®...",-1))])):((0,r.openBlock)(),(0,r.createElementBlock)("div",k6,[n.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",w6,[(0,r.createVNode)((0,r.unref)(kV),{size:48}),t[6]||(t[6]=(0,r.createElementVNode)("p",null,"æ•°æ®æ˜¾ç¤ºå‡ºé”™",-1)),t[7]||(t[7]=(0,r.createElementVNode)("p",{class:"hint"},"è¯·å°è¯•åˆ·æ–°æ•°æ®",-1)),(0,r.createElementVNode)("button",{onClick:a,class:"retry-btn"},"é‡è¯•")])):((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(o()),(0,r.mergeProps)({key:1},i(),{onEditVariable:t[0]||(t[0]=t=>e.$emit("edit-variable",t)),onCopyVariable:t[1]||(t[1]=t=>e.$emit("copy-variable",t)),onDeleteVariable:t[2]||(t[2]=t=>e.$emit("delete-variable",t)),onAddNewVariable:t[3]||(t[3]=t=>e.$emit("add-new-variable",t)),onDebugLog:t[4]||(t[4]=t=>e.$emit("debug-log"))}),null,16))]))]))}});var N6=n(7816),S6={};S6.styleTagTransform=k(),S6.setAttributes=v(),S6.insert=g().bind(null,"head"),S6.domAPI=p(),S6.insertStyleElement=y(),u()(N6.A,S6),N6.A&&N6.A.locals&&N6.A.locals;const V6=(0,N.A)(E6,[["__scopeId","data-v-3e8f894e"]]),_6={class:"modal-header"},C6={class:"modal-body"},A6={class:"form-group"},D6=["disabled"],T6={key:0,class:"form-hint-text"},B6={class:"form-group"},I6={class:"value-type-selector"},z6=["onClick"],M6=["placeholder"],P6={key:0,class:"error-message"},R6={key:1,class:"form-hint"},$6={key:0,class:"preview-section"},O6={class:"preview-content"},L6={class:"modal-footer"},F6=["disabled"],j6=(0,r.defineComponent)({__name:"GameVariableEditModal",props:{editingItem:{}},emits:["close","save"],setup(e,{emit:t}){const n=e,a=t,o=(0,r.ref)({type:"",key:"",value:""}),i=(0,r.ref)("string"),s=(0,r.ref)(""),l=[{value:"string",label:"å­—ç¬¦ä¸²"},{value:"number",label:"æ•°å­—"},{value:"boolean",label:"å¸ƒå°”å€¼"},{value:"object",label:"å¯¹è±¡"},{value:"array",label:"æ•°ç»„"}],c=(0,r.computed)({get:()=>{if(!o.value)return"";const e=o.value.value;return"object"==typeof e&&null!==e?JSON.stringify(e,null,2):String(e??"")},set:e=>{o.value&&(o.value.value=e,m())}}),d=(0,r.computed)(()=>{if(s.value||!c.value)return null;try{if("object"===i.value||"array"===i.value){const e=JSON.parse(c.value);return JSON.stringify(e,null,2)}return null}catch{return null}}),u=(0,r.computed)(()=>""!==o.value.key.trim()&&""!==c.value.trim()&&!s.value),m=()=>{if(s.value="",c.value.trim()&&("object"===i.value||"array"===i.value))try{const e=JSON.parse(c.value);"array"!==i.value||Array.isArray(e)?"object"!==i.value||!Array.isArray(e)&&"object"==typeof e||(s.value="æœŸæœ›æ˜¯å¯¹è±¡ç±»å‹ï¼Œä½†è§£æç»“æœä¸æ˜¯å¯¹è±¡"):s.value="æœŸæœ›æ˜¯æ•°ç»„ç±»å‹ï¼Œä½†è§£æç»“æœä¸æ˜¯æ•°ç»„"}catch(e){s.value="JSON æ ¼å¼é”™è¯¯: "+(e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯")}},p=()=>{switch(i.value){case"string":return"è¯·è¾“å…¥å­—ç¬¦ä¸²å€¼ï¼Œä¾‹å¦‚: Hello World";case"number":return"è¯·è¾“å…¥æ•°å­—å€¼ï¼Œä¾‹å¦‚: 123 æˆ– 3.14";case"boolean":return"è¯·è¾“å…¥ true æˆ– false";case"object":return'è¯·è¾“å…¥ JSON å¯¹è±¡ï¼Œä¾‹å¦‚: {"name": "å¼ ä¸‰", "age": 25}';case"array":return'è¯·è¾“å…¥ JSON æ•°ç»„ï¼Œä¾‹å¦‚: [1, 2, 3] æˆ– ["a", "b", "c"]';default:return"è¯·è¾“å…¥å€¼"}},f=()=>{switch(i.value){case"string":return"âœ… ç›´æ¥è¾“å…¥æ–‡æœ¬å†…å®¹å³å¯";case"number":return"âœ… è¾“å…¥æ•°å­—ï¼Œæ”¯æŒæ•´æ•°å’Œå°æ•°";case"boolean":return"âœ… è¾“å…¥ true æˆ– false";case"object":return'âœ… ä½¿ç”¨ JSON æ ¼å¼ï¼Œä¾‹å¦‚: {"key": "value"}';case"array":return"âœ… ä½¿ç”¨ JSON æ•°ç»„æ ¼å¼ï¼Œä¾‹å¦‚: [1, 2, 3]";default:return"æ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ã€å¯¹è±¡å’Œæ•°ç»„"}},g=()=>{if(u.value)try{console.log("=== [Modalè¯Šæ–­] å¼€å§‹ä¿å­˜ ==="),console.log("[Modal-1] editingValue.value (åŸå§‹å­—ç¬¦ä¸²):",c.value),console.log("[Modal-2] selectedType:",i.value);let e=c.value;switch(i.value){case"number":if(e=Number(c.value),isNaN(e))return void(s.value="æ— æ•ˆçš„æ•°å­—æ ¼å¼");break;case"boolean":e="true"===c.value.toLowerCase();break;case"object":case"array":console.log("[Modal-3] è§£æå‰çš„JSONå­—ç¬¦ä¸²:",c.value),e=JSON.parse(c.value),console.log("[Modal-4] è§£æåçš„å¯¹è±¡:",e),console.log("[Modal-5] è§£æåçš„JSON:",JSON.stringify(e));break;default:e=c.value}o.value.value=e,console.log("[Modal-6] å³å°†emitçš„localEditingItem:",o.value),console.log("[Modal-7] å³å°†emitçš„finalValue:",e,"JSON:",JSON.stringify(e)),a("save",o.value)}catch(e){s.value="ä¿å­˜å¤±è´¥: "+(e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯")}};return(0,r.watch)(()=>n.editingItem,e=>{var t;e&&(o.value={...e},i.value=null==(t=e.value)?"string":Array.isArray(t)?"array":"object"==typeof t?"object":"boolean"==typeof t?"boolean":"number"==typeof t?"number":"string",s.value="",m())},{immediate:!0}),(e,t)=>e.editingItem?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:t[5]||(t[5]=t=>e.$emit("close"))},[(0,r.createElementVNode)("div",{class:"modal-content",onClick:t[4]||(t[4]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",_6,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(o.value.key?"ç¼–è¾‘å˜é‡":"æ–°å¢å˜é‡"),1),(0,r.createElementVNode)("button",{onClick:t[0]||(t[0]=t=>e.$emit("close")),class:"close-btn"},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:16})])]),(0,r.createElementVNode)("div",C6,[(0,r.createElementVNode)("div",A6,[t[6]||(t[6]=(0,r.createElementVNode)("label",null,"å˜é‡å (Key)",-1)),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.value.key=e),class:"form-input",disabled:!!e.editingItem.key,placeholder:"è¯·è¾“å…¥å˜é‡å"},null,8,D6),[[r.vModelText,o.value.key]]),e.editingItem.key?((0,r.openBlock)(),(0,r.createElementBlock)("p",T6," â„¹ï¸ ç¼–è¾‘æ¨¡å¼ä¸‹æ— æ³•ä¿®æ”¹å˜é‡å ")):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",B6,[t[7]||(t[7]=(0,r.createElementVNode)("label",null,"å˜é‡å€¼ (Value)",-1)),(0,r.createElementVNode)("div",I6,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(l,e=>(0,r.createElementVNode)("button",{key:e.value,onClick:t=>(e=>{if(i.value=e,!c.value)switch(e){case"string":c.value="";break;case"number":c.value="0";break;case"boolean":c.value="true";break;case"object":c.value="{}";break;case"array":c.value="[]"}m()})(e.value),class:(0,r.normalizeClass)(["type-btn",{active:i.value===e.value}])},(0,r.toDisplayString)(e.label),11,z6)),64))]),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>c.value=e),class:(0,r.normalizeClass)(["form-textarea",{"has-error":s.value}]),rows:"10",placeholder:p()},null,10,M6),[[r.vModelText,c.value]]),s.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",P6," âš ï¸ "+(0,r.toDisplayString)(s.value),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",R6,[(0,r.createElementVNode)("p",null,(0,r.toDisplayString)(f()),1)]))]),d.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",$6,[t[8]||(t[8]=(0,r.createElementVNode)("label",null,"é¢„è§ˆ",-1)),(0,r.createElementVNode)("pre",O6,(0,r.toDisplayString)(d.value),1)])):(0,r.createCommentVNode)("v-if",!0)]),(0,r.createElementVNode)("div",L6,[(0,r.createElementVNode)("button",{onClick:t[3]||(t[3]=t=>e.$emit("close")),class:"cancel-btn"},"å–æ¶ˆ"),(0,r.createElementVNode)("button",{onClick:g,class:"save-btn",disabled:!u.value},[(0,r.createVNode)((0,r.unref)(Ou.A),{size:14}),t[9]||(t[9]=(0,r.createElementVNode)("span",null,"ä¿å­˜",-1))],8,F6)])])])):(0,r.createCommentVNode)("v-if",!0)}});var U6=n(8470),q6={};q6.styleTagTransform=k(),q6.setAttributes=v(),q6.insert=g().bind(null,"head"),q6.domAPI=p(),q6.insertStyleElement=y(),u()(U6.A,q6),U6.A&&U6.A.locals&&U6.A.locals;const G6=(0,N.A)(j6,[["__scopeId","data-v-01a0fb92"]]),H6={class:"modal-header"},Y6={class:"modal-body"},W6={class:"stats-grid"},X6={class:"stat-card"},J6={class:"stat-icon core"},K6={class:"stat-info"},Q6={class:"stat-value"},Z6={class:"stat-card"},e9={class:"stat-icon global"},t9={class:"stat-info"},n9={class:"stat-value"},a9={class:"stat-card"},r9={class:"stat-icon memory"},o9={class:"stat-info"},i9={class:"stat-value"},s9={class:"stat-card"},l9={class:"stat-icon world"},c9={class:"stat-info"},d9={class:"stat-value"},u9={class:"data-size-info"},m9={class:"size-list"},p9={class:"size-item"},f9={class:"size-item"},g9={class:"size-item"},h9={class:"data-size-info",style:{"margin-top":"1rem"}},v9={class:"size-list"},b9={style:{"font-family":"monospace","font-size":"0.8rem"}},y9=(0,r.defineComponent)({__name:"GameVariableStatsModal",props:{coreDataViews:{},customOptions:{},allGameData:{},getMemoryCount:{type:Function},getWorldItemCount:{type:Function}},emits:["close"],setup(e){const t=e,n=e=>new Blob([JSON.stringify(e)]).size,a=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return(e,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"modal-overlay",onClick:o[2]||(o[2]=t=>e.$emit("close"))},[(0,r.createElementVNode)("div",{class:"modal-content stats-modal",onClick:o[1]||(o[1]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("div",H6,[o[3]||(o[3]=(0,r.createElementVNode)("h3",null,"æ•°æ®ç»Ÿè®¡",-1)),(0,r.createElementVNode)("button",{onClick:o[0]||(o[0]=t=>e.$emit("close")),class:"close-btn"},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:16})])]),(0,r.createElementVNode)("div",Y6,[(0,r.createElementVNode)("div",W6,[(0,r.createElementVNode)("div",X6,[(0,r.createElementVNode)("div",J6,[(0,r.createVNode)((0,r.unref)(Uu),{size:24})]),(0,r.createElementVNode)("div",K6,[(0,r.createElementVNode)("div",Q6,(0,r.toDisplayString)(Object.keys(e.coreDataViews).length),1),o[4]||(o[4]=(0,r.createElementVNode)("div",{class:"stat-label"},"æ ¸å¿ƒæ•°æ®",-1))])]),(0,r.createElementVNode)("div",Z6,[(0,r.createElementVNode)("div",e9,[(0,r.createVNode)((0,r.unref)(ta.A),{size:24})]),(0,r.createElementVNode)("div",t9,[(0,r.createElementVNode)("div",n9,(0,r.toDisplayString)(Object.keys(e.customOptions).length),1),o[5]||(o[5]=(0,r.createElementVNode)("div",{class:"stat-label"},"è‡ªå®šä¹‰é€‰é¡¹",-1))])]),(0,r.createElementVNode)("div",a9,[(0,r.createElementVNode)("div",r9,[(0,r.createVNode)((0,r.unref)(Mu),{size:24})]),(0,r.createElementVNode)("div",o9,[(0,r.createElementVNode)("div",i9,(0,r.toDisplayString)(e.getMemoryCount()),1),o[6]||(o[6]=(0,r.createElementVNode)("div",{class:"stat-label"},"è®°å¿†æ¡ç›®",-1))])]),(0,r.createElementVNode)("div",s9,[(0,r.createElementVNode)("div",l9,[(0,r.createVNode)((0,r.unref)(G0),{size:24})]),(0,r.createElementVNode)("div",c9,[(0,r.createElementVNode)("div",d9,(0,r.toDisplayString)(e.getWorldItemCount()),1),o[7]||(o[7]=(0,r.createElementVNode)("div",{class:"stat-label"},"ä¸–ç•Œå…ƒç´ ",-1))])])]),(0,r.createElementVNode)("div",u9,[o[11]||(o[11]=(0,r.createElementVNode)("h4",null,"æ•°æ®å¤§å°ç»Ÿè®¡",-1)),(0,r.createElementVNode)("div",m9,[(0,r.createElementVNode)("div",p9,[o[8]||(o[8]=(0,r.createElementVNode)("span",null,"æ ¸å¿ƒæ•°æ®å¤§å°:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(a(n(e.coreDataViews))),1)]),(0,r.createElementVNode)("div",f9,[o[9]||(o[9]=(0,r.createElementVNode)("span",null,"è‡ªå®šä¹‰é€‰é¡¹å¤§å°:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(a(n(e.customOptions))),1)]),(0,r.createElementVNode)("div",g9,[o[10]||(o[10]=(0,r.createElementVNode)("span",null,"æ€»æ•°æ®å¤§å°:",-1)),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)(a(n(e.allGameData))),1)])])]),(0,r.createElementVNode)("div",h9,[o[12]||(o[12]=(0,r.createElementVNode)("h4",null,"æ ¸å¿ƒæ•°æ®è¯¦ç»†å¤§å°ï¼ˆå‰10ä¸ªæœ€å¤§çš„ï¼‰",-1)),(0,r.createElementVNode)("div",v9,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Object.entries(t.coreDataViews).map(([e,t])=>({key:e,size:n(t)})).sort((e,t)=>t.size-e.size).slice(0,10),e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.key,class:"size-item"},[(0,r.createElementVNode)("span",b9,(0,r.toDisplayString)(e.key),1),(0,r.createElementVNode)("span",{style:(0,r.normalizeStyle)({color:e.size>5e4?"#ef4444":e.size>1e4?"#f59e0b":"inherit"})},(0,r.toDisplayString)(a(e.size)),5)]))),128))])])])])]))}});var x9=n(8537),k9={};k9.styleTagTransform=k(),k9.setAttributes=v(),k9.insert=g().bind(null,"head"),k9.domAPI=p(),k9.insertStyleElement=y(),u()(x9.A,k9),x9.A&&x9.A.locals&&x9.A.locals;const w9=(0,N.A)(y9,[["__scopeId","data-v-594e2d00"]]);var E9=n(406);const N9={class:"format-guide-modal"},S9={class:"modal-header"},V9={class:"modal-title"},_9={class:"modal-body"},C9={class:"format-guide-content"},A9={class:"quick-nav"},D9=["onClick"],T9={class:"modal-footer"},B9=(0,r.defineComponent)({__name:"GameVariableFormatGuideModal",emits:["close"],setup(e){const t=(0,r.ref)("character"),n=(0,E9.lS)((0,fe.isTavernEnv)()),a=[{id:"character",title:"è§’è‰²/çŠ¶æ€"},{id:"dao",title:"å¤§é“"},{id:"inventory",title:"èƒŒåŒ…ç‰©å“"},{id:"relationships",title:"å…³ç³»"},{id:"world",title:"ä¸–ç•Œ"},{id:"quest",title:"ä»»åŠ¡"}],o=async()=>{try{await navigator.clipboard.writeText(n),ne.o.success("å·²å¤åˆ¶å®Œæ•´æ•°æ®æ ¼å¼è¯´æ˜")}catch(e){console.error("å¤åˆ¶å¤±è´¥:",e),ne.o.error("å¤åˆ¶å¤±è´¥")}};return(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{class:"format-guide-modal-overlay",onClick:n[2]||(n[2]=(0,r.withModifiers)(t=>e.$emit("close"),["self"]))},[(0,r.createElementVNode)("div",N9,[(0,r.createElementVNode)("div",S9,[(0,r.createElementVNode)("h3",V9,[(0,r.createVNode)((0,r.unref)(Pu),{size:20}),n[3]||(n[3]=(0,r.createTextVNode)(" æ•°æ®æ ¼å¼è¯´æ˜ ",-1))]),(0,r.createElementVNode)("button",{class:"close-btn",onClick:n[0]||(n[0]=t=>e.$emit("close")),title:"å…³é—­"},[(0,r.createVNode)((0,r.unref)(Ku.A),{size:20})])]),(0,r.createElementVNode)("div",_9,[(0,r.createElementVNode)("div",C9,[(0,r.createCommentVNode)(" å¿«é€Ÿå¯¼èˆª "),(0,r.createElementVNode)("div",A9,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(a,e=>(0,r.createElementVNode)("button",{key:e.id,class:(0,r.normalizeClass)(["nav-btn",{active:t.value===e.id}]),onClick:n=>(e=>{t.value=e;const n=document.getElementById(e);n&&n.scrollIntoView({behavior:"smooth",block:"start"})})(e.id)},(0,r.toDisplayString)(e.title),11,D9)),64))]),(0,r.createCommentVNode)(" æ ¼å¼è¯´æ˜å†…å®¹ "),n[4]||(n[4]=(0,r.createStaticVNode)('<div class="format-sections" data-v-e5556466>\x3c!-- è§’è‰²ä¿¡æ¯ --\x3e<section id="character" class="format-section" data-v-e5556466><h4 class="section-title" data-v-e5556466>1. è§’è‰²ä¸çŠ¶æ€</h4><div class="section-content" data-v-e5556466><h5 data-v-e5556466>1.1 è§’è‰²ï¼ˆåŸºç¡€æ¡£æ¡ˆï¼‰</h5><pre class="code-block" data-v-e5556466>åå­—: string (åªè¯»)\næ€§åˆ«: &quot;ç”·&quot;|&quot;å¥³&quot;|&quot;å…¶ä»–&quot; (åªè¯»)\nå¹´é¾„: number (è‡ªåŠ¨è®¡ç®—)\nå‡ºç”Ÿæ—¥æœŸ: {å¹´, æœˆ, æ—¥, å°æ—¶?, åˆ†é’Ÿ?} (åªè¯»)\nå…ˆå¤©å…­å¸: {æ ¹éª¨, çµæ€§, æ‚Ÿæ€§, æ°”è¿, é­…åŠ›, å¿ƒæ€§} (åªè¯»ï¼Œ1-10)\nåå¤©å…­å¸: {æ ¹éª¨, çµæ€§, æ‚Ÿæ€§, æ°”è¿, é­…åŠ›, å¿ƒæ€§} (å¯ä¿®æ”¹ï¼Œç”¨add)</pre><h5 data-v-e5556466>1.2 å±æ€§ï¼ˆå¯ä¿®æ”¹ï¼‰</h5><pre class="code-block" data-v-e5556466>å¢ƒç•Œ: {åç§°, é˜¶æ®µ, å½“å‰è¿›åº¦, ä¸‹ä¸€çº§æ‰€éœ€, çªç ´æè¿°}\n  â†’ ç”¨setæ›´æ–°æ•´ä¸ªå¯¹è±¡\n  â†’ çªç ´æ—¶å¿…é¡»æ›´æ–°çªç ´æè¿°\n\næ°”è¡€/çµæ°”/ç¥è¯†: {å½“å‰, ä¸Šé™}\n  â†’ å½“å‰ç”¨addï¼Œä¸Šé™çªç ´æ—¶ç”¨add\n\nå¯¿å‘½: {å½“å‰, ä¸Šé™}\n  â†’ å½“å‰ç”¨add/æˆ–åœ¨æ—¶é—´æ¨è¿›æ—¶ç”±ç³»ç»Ÿæ›´æ–°ï¼Œä¸Šé™çªç ´æ—¶ç”¨add\n\nå£°æœ›: number\n  â†’ ç”¨addå¢å‡æˆ–setè¦†ç›–\n\nä½ç½®: {æè¿°:&quot;å¤§é™†Â·åœ°ç‚¹&quot;, x, y}\n  â†’ é¡¶çº§å­—æ®µ key=&quot;ä½ç½®&quot;ï¼Œç”¨setæ›´æ–°æ•´ä¸ªå¯¹è±¡ï¼Œä¸‰ä¸ªå­—æ®µå¿…é¡»åŒæ—¶è®¾ç½®\n\næ•ˆæœ: [{çŠ¶æ€åç§°, ç±»å‹, ç”Ÿæˆæ—¶é—´, æŒç»­æ—¶é—´åˆ†é’Ÿ, çŠ¶æ€æè¿°}]\n  â†’ åªèƒ½ç”¨pushæ·»åŠ \n  â†’ ç±»å‹å¿…é¡»æ˜¯&quot;buff&quot;æˆ–&quot;debuff&quot;ï¼ˆå…¨å°å†™ï¼‰\n  â†’ ç”Ÿæˆæ—¶é—´ä½¿ç”¨å½“å‰æ¸¸æˆæ—¶é—´\n  â†’ æŒç»­æ—¶é—´åˆ†é’Ÿï¼šæ•°å€¼ç±»å‹ï¼ˆ99999è¡¨ç¤ºæ°¸ä¹…ï¼‰</pre><div class="example-box" data-v-e5556466><strong data-v-e5556466>ç¤ºä¾‹ï¼š</strong><pre class="code-block" data-v-e5556466>// æ·»åŠ å¢ç›ŠçŠ¶æ€\n{\n  &quot;action&quot;: &quot;push&quot;,\n  &quot;key&quot;: &quot;æ•ˆæœ&quot;,\n  &quot;value&quot;: {\n    &quot;çŠ¶æ€åç§°&quot;: &quot;çµæ°”å……ç›ˆ&quot;,\n    &quot;ç±»å‹&quot;: &quot;buff&quot;,\n    &quot;ç”Ÿæˆæ—¶é—´&quot;: {&quot;å¹´&quot;: 1000, &quot;æœˆ&quot;: 3, &quot;æ—¥&quot;: 15, &quot;å°æ—¶&quot;: 10, &quot;åˆ†é’Ÿ&quot;: 30},\n    &quot;æŒç»­æ—¶é—´åˆ†é’Ÿ&quot;: 120,\n    &quot;çŠ¶æ€æè¿°&quot;: &quot;çµæ°”æ¢å¤é€Ÿåº¦æå‡50%&quot;\n  }\n}</pre></div></div></section>\x3c!-- ä¸‰åƒå¤§é“ --\x3e<section id="dao" class="format-section" data-v-e5556466><h4 class="section-title" data-v-e5556466>2. å¤§é“</h4><div class="section-content" data-v-e5556466><pre class="code-block" data-v-e5556466>å¤§é“åˆ—è¡¨: {é“å: DaoDataå¯¹è±¡}\n  - é“å: string\n  - æè¿°: string\n  - é˜¶æ®µåˆ—è¡¨: [{åç§°, æè¿°, çªç ´ç»éªŒ}]\n  - æ˜¯å¦è§£é”: boolean\n  - å½“å‰é˜¶æ®µ: number\n  - å½“å‰ç»éªŒ: number\n  - æ€»ç»éªŒ: number</pre><div class="example-box" data-v-e5556466><strong data-v-e5556466>ç¤ºä¾‹ï¼š</strong><pre class="code-block" data-v-e5556466>// è§£é”å¹¶åˆå§‹åŒ–å¤§é“\n{\n  &quot;action&quot;: &quot;set&quot;,\n  &quot;key&quot;: &quot;å¤§é“.å¤§é“åˆ—è¡¨.å‰‘é“&quot;,\n  &quot;value&quot;: {\n    &quot;é“å&quot;: &quot;å‰‘é“&quot;,\n    &quot;æè¿°&quot;: &quot;ä»¥å‰‘å…¥é“ï¼Œå‰‘æ°”çºµæ¨ª&quot;,\n    &quot;æ˜¯å¦è§£é”&quot;: true,\n    &quot;å½“å‰é˜¶æ®µ&quot;: 0,\n    &quot;å½“å‰ç»éªŒ&quot;: 0,\n    &quot;æ€»ç»éªŒ&quot;: 0,\n    &quot;é˜¶æ®µåˆ—è¡¨&quot;: [\n      {&quot;åç§°&quot;: &quot;åˆçª¥é—¨å¾„&quot;, &quot;æè¿°&quot;: &quot;...&quot;, &quot;çªç ´ç»éªŒ&quot;: 100},\n      {&quot;åç§°&quot;: &quot;å°æœ‰æ‰€æˆ&quot;, &quot;æè¿°&quot;: &quot;...&quot;, &quot;çªç ´ç»éªŒ&quot;: 500}\n    ]\n  }\n}\n\n// å¢åŠ ç»éªŒ\n{\n  &quot;action&quot;: &quot;add&quot;,\n  &quot;key&quot;: &quot;å¤§é“.å¤§é“åˆ—è¡¨.å‰‘é“.å½“å‰ç»éªŒ&quot;,\n  &quot;value&quot;: 50\n}</pre></div></div></section>\x3c!-- èƒŒåŒ…ä¸ç‰©å“ --\x3e<section id="inventory" class="format-section" data-v-e5556466><h4 class="section-title" data-v-e5556466>3. èƒŒåŒ…ä¸ç‰©å“</h4><div class="section-content" data-v-e5556466><pre class="code-block" data-v-e5556466>èƒŒåŒ…:\n  - çµçŸ³: {ä¸‹å“, ä¸­å“, ä¸Šå“, æå“} (ç”¨addå¢å‡)\n  - ç‰©å“: {ç‰©å“ID: Itemå¯¹è±¡}\n\nç‰©å“ç±»å‹:\n  - è£…å¤‡: {ç‰©å“ID, åç§°, ç±»å‹:&quot;è£…å¤‡&quot;, å“è´¨, æ•°é‡, æè¿°, è£…å¤‡å¢å¹…, ç‰¹æ®Šæ•ˆæœ}\n  - åŠŸæ³•: {ç‰©å“ID, åç§°, ç±»å‹:&quot;åŠŸæ³•&quot;, å“è´¨, æ•°é‡, æè¿°, åŠŸæ³•æ•ˆæœ, åŠŸæ³•æŠ€èƒ½[], ä¿®ç‚¼è¿›åº¦, å·²è§£é”æŠ€èƒ½[]}\n  - æ¶ˆè€—å“/ææ–™: {ç‰©å“ID, åç§°, ç±»å‹:&quot;ä¸¹è¯&quot;|&quot;ææ–™&quot;|&quot;å…¶ä»–&quot;, å“è´¨, æ•°é‡, æè¿°, ä½¿ç”¨æ•ˆæœ?}\n\nå“è´¨æ ¼å¼: {quality:&quot;å‡¡&quot;|&quot;é»„&quot;|&quot;ç„&quot;|&quot;åœ°&quot;|&quot;å¤©&quot;|&quot;ä»™&quot;|&quot;ç¥&quot;, grade:0-10}</pre><div class="warning-box" data-v-e5556466><strong data-v-e5556466>âš ï¸ é‡è¦ï¼š</strong><ul data-v-e5556466><li data-v-e5556466>ä¿®ç‚¼è¿›åº¦å’Œå·²è§£é”æŠ€èƒ½å­˜å‚¨åœ¨<strong data-v-e5556466>è§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}</strong>ä¸­</li><li data-v-e5556466>âŒ é”™è¯¯ï¼šä¿®æ”¹&quot;è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•&quot;å­—æ®µï¼ˆè¿™æ˜¯å¼•ç”¨æ§½ä½ï¼Œä¸æ˜¯è¿›åº¦æ¥æºï¼‰</li><li data-v-e5556466>âœ… æ­£ç¡®ï¼šä¿®æ”¹&quot;è§’è‰².èƒŒåŒ….ç‰©å“.{åŠŸæ³•ID}.ä¿®ç‚¼è¿›åº¦&quot;</li></ul></div><div class="example-box" data-v-e5556466><strong data-v-e5556466>ç¤ºä¾‹ï¼š</strong><pre class="code-block" data-v-e5556466>// å¢åŠ åŠŸæ³•ä¿®ç‚¼è¿›åº¦\n{\n  &quot;action&quot;: &quot;add&quot;,\n  &quot;key&quot;: &quot;è§’è‰².èƒŒåŒ….ç‰©å“.gongfa_001.ä¿®ç‚¼è¿›åº¦&quot;,\n  &quot;value&quot;: 10\n}\n\n// è§£é”æ–°æŠ€èƒ½\n{\n  &quot;action&quot;: &quot;push&quot;,\n  &quot;key&quot;: &quot;è§’è‰².èƒŒåŒ….ç‰©å“.gongfa_001.å·²è§£é”æŠ€èƒ½&quot;,\n  &quot;value&quot;: &quot;å¾¡å‰‘æœ¯&quot;\n}</pre></div></div></section>\x3c!-- äººç‰©å…³ç³» --\x3e<section id="relationships" class="format-section" data-v-e5556466><h4 class="section-title" data-v-e5556466>4. å…³ç³»</h4><div class="section-content" data-v-e5556466><pre class="code-block" data-v-e5556466>å…³ç³»: {NPCåå­—: NPCæ¡£æ¡ˆå¯¹è±¡}\n  - åå­—: string\n  - æ€§åˆ«: &quot;ç”·&quot;|&quot;å¥³&quot;|&quot;å…¶ä»–&quot;\n  - å¢ƒç•Œ: {åç§°, é˜¶æ®µ} (âš ï¸ NPCå¢ƒç•Œæ˜¯ç®€åŒ–ç»“æ„ï¼Œä¸¥ç¦æ·»åŠ &quot;å½“å‰è¿›åº¦&quot;ç­‰ç©å®¶ä¸“å±å­—æ®µ)\n  - ä¸ç©å®¶å…³ç³»: string\n  - å¥½æ„Ÿåº¦: number (-100~100ï¼Œç”¨add)\n  - è®°å¿†: [string] (ç”¨pushæ·»åŠ )\n  - å½“å‰å¤–è²ŒçŠ¶æ€: string (ç”¨setå®æ—¶æ›´æ–°)\n  - å½“å‰å†…å¿ƒæƒ³æ³•: string (ç”¨setå®æ—¶æ›´æ–°)</pre><div class="warning-box" data-v-e5556466><strong data-v-e5556466>âš ï¸ NPCå¢ƒç•Œæ ¼å¼ï¼š</strong><ul data-v-e5556466><li data-v-e5556466>âœ… æ­£ç¡®ï¼š{&quot;åç§°&quot;: &quot;ç­‘åŸº&quot;, &quot;é˜¶æ®µ&quot;: &quot;ä¸­æœŸ&quot;}</li><li data-v-e5556466>âŒ é”™è¯¯ï¼š{&quot;åç§°&quot;: &quot;ç­‘åŸº&quot;, &quot;é˜¶æ®µ&quot;: &quot;ä¸­æœŸ&quot;, &quot;å½“å‰è¿›åº¦&quot;: 0}</li></ul></div><div class="example-box" data-v-e5556466><strong data-v-e5556466>ç¤ºä¾‹ï¼š</strong><pre class="code-block" data-v-e5556466>// å¢åŠ å¥½æ„Ÿåº¦\n{\n  &quot;action&quot;: &quot;add&quot;,\n  &quot;key&quot;: &quot;å…³ç³».å¼ ä¸‰.å¥½æ„Ÿåº¦&quot;,\n  &quot;value&quot;: 10\n}\n\n// æ·»åŠ è®°å¿†\n{\n  &quot;action&quot;: &quot;push&quot;,\n  &quot;key&quot;: &quot;å…³ç³».å¼ ä¸‰.è®°å¿†&quot;,\n  &quot;value&quot;: &quot;ã€1000å¹´3æœˆ15æ—¥ã€‘ä¸ç©å®¶ä¸€èµ·ä¿®ç‚¼ï¼Œæ„Ÿè§‰å¾ˆæ„‰å¿«&quot;\n}\n\n// æ›´æ–°å…³ç³»\n{\n  &quot;action&quot;: &quot;set&quot;,\n  &quot;key&quot;: &quot;å…³ç³».å¼ ä¸‰.ä¸ç©å®¶å…³ç³»&quot;,\n  &quot;value&quot;: &quot;æœ‹å‹&quot;\n}</pre></div></div></section>\x3c!-- ä¸–ç•Œä¿¡æ¯ --\x3e<section id="world" class="format-section" data-v-e5556466><h4 class="section-title" data-v-e5556466>5. ä¸–ç•Œ</h4><div class="section-content" data-v-e5556466><pre class="code-block" data-v-e5556466>ä¸–ç•Œ:\n  - åŠ¿åŠ›ä¿¡æ¯: [{åç§°, ç±»å‹, ç­‰çº§, ä½ç½®, ä¸ç©å®¶å…³ç³», å£°æœ›å€¼, ...}]\n  - åœ°ç‚¹ä¿¡æ¯: [{åç§°, ç±»å‹, ä½ç½®, coordinates, ...}]\n\nåŠ¿åŠ›ä¿¡æ¯å­—æ®µ:\n  - åç§°: string\n  - ç±»å‹: &quot;ä¿®ä»™å®—é—¨&quot;|&quot;é­”é“å®—é—¨&quot;|&quot;ä¿®ä»™ä¸–å®¶&quot;\n  - ç­‰çº§: &quot;è¶…çº§&quot;|&quot;ä¸€æµ&quot;|&quot;äºŒæµ&quot;|&quot;ä¸‰æµ&quot;\n  - ä¸ç©å®¶å…³ç³»: &quot;æ•Œå¯¹&quot;|&quot;ä¸­ç«‹&quot;|&quot;å‹å¥½&quot;\n  - å£°æœ›å€¼: number\n  - é¢†å¯¼å±‚: {å®—ä¸», å®—ä¸»ä¿®ä¸º, ç»¼åˆæˆ˜åŠ›}\n  - æˆå‘˜æ•°é‡: {æ€»æ•°, æŒ‰å¢ƒç•Œ, æŒ‰èŒä½}</pre><div class="example-box" data-v-e5556466><strong data-v-e5556466>ç¤ºä¾‹ï¼š</strong><pre class="code-block" data-v-e5556466>// ä¿®æ”¹å®—ä¸»\n{\n  &quot;action&quot;: &quot;set&quot;,\n  &quot;key&quot;: &quot;ä¸–ç•Œ.åŠ¿åŠ›ä¿¡æ¯[0].é¢†å¯¼å±‚.å®—ä¸»&quot;,\n  &quot;value&quot;: &quot;æ–°å®—ä¸»åå­—&quot;\n}\n\n// å¢åŠ å£°æœ›\n{\n  &quot;action&quot;: &quot;add&quot;,\n  &quot;key&quot;: &quot;ä¸–ç•Œ.åŠ¿åŠ›ä¿¡æ¯[2].å£°æœ›å€¼&quot;,\n  &quot;value&quot;: 50\n}\n\n// æ·»åŠ æ–°åœ°ç‚¹\n{\n  &quot;action&quot;: &quot;push&quot;,\n  &quot;key&quot;: &quot;ä¸–ç•Œ.åœ°ç‚¹ä¿¡æ¯&quot;,\n  &quot;value&quot;: {\n    &quot;åç§°&quot;: &quot;xxç§˜å¢ƒ&quot;,\n    &quot;ç±»å‹&quot;: &quot;ç§˜å¢ƒ&quot;,\n    &quot;ä½ç½®&quot;: &quot;ä¸œç„å¤§é™†Â·åŒ—éƒ¨&quot;,\n    &quot;coordinates&quot;: {&quot;x&quot;: 108.5, &quot;y&quot;: 28.3},\n    &quot;æè¿°&quot;: &quot;...&quot;,\n    &quot;å®‰å…¨ç­‰çº§&quot;: &quot;å±é™©&quot;\n  }\n}</pre></div></div></section>\x3c!-- ä»»åŠ¡ç³»ç»Ÿ --\x3e<section id="quest" class="format-section" data-v-e5556466><h4 class="section-title" data-v-e5556466>6. ä»»åŠ¡</h4><div class="section-content" data-v-e5556466><pre class="code-block" data-v-e5556466>ä»»åŠ¡:\n  - å½“å‰ä»»åŠ¡åˆ—è¡¨: [ä»»åŠ¡å¯¹è±¡]\n  - ä»»åŠ¡ç»Ÿè®¡: {å®Œæˆæ€»æ•°, å„ç±»å‹å®Œæˆ}\n\nä»»åŠ¡å¯¹è±¡ç»“æ„:\n  - ä»»åŠ¡ID: string (æ ¼å¼: quest_ç±»å‹_æ—¶é—´æˆ³)\n  - ä»»åŠ¡åç§°: string\n  - ä»»åŠ¡æè¿°: string\n  - ä»»åŠ¡ç±»å‹: &quot;å®—é—¨&quot;|&quot;å¥‡é‡&quot;|&quot;æ—¥å¸¸&quot;|&quot;ç³»ç»Ÿä»»åŠ¡&quot;\n  - ä»»åŠ¡çŠ¶æ€: &quot;è¿›è¡Œä¸­&quot;|&quot;å·²å®Œæˆ&quot;|&quot;å·²å¤±è´¥&quot;\n  - ç›®æ ‡åˆ—è¡¨: [{æè¿°, ç±»å‹, ç›®æ ‡ID, éœ€æ±‚æ•°é‡, å½“å‰è¿›åº¦, å·²å®Œæˆ}]\n  - å¥–åŠ±: {ä¿®ä¸º?, çµçŸ³?, ç‰©å“?, å£°æœ›?, å±æ€§åŠ æˆ?, å¥½æ„Ÿåº¦?}</pre><div class="example-box" data-v-e5556466><strong data-v-e5556466>ç¤ºä¾‹ï¼š</strong><pre class="code-block" data-v-e5556466>// æ›´æ–°ä»»åŠ¡è¿›åº¦\n{\n  &quot;action&quot;: &quot;add&quot;,\n  &quot;key&quot;: &quot;ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨[0].ç›®æ ‡åˆ—è¡¨[0].å½“å‰è¿›åº¦&quot;,\n  &quot;value&quot;: 1\n}</pre></div></div></section></div>',1))])]),(0,r.createElementVNode)("div",T9,[(0,r.createElementVNode)("button",{class:"copy-btn",onClick:o},[(0,r.createVNode)((0,r.unref)(K4),{size:16}),n[5]||(n[5]=(0,r.createTextVNode)(" å¤åˆ¶å…¨éƒ¨æ ¼å¼ ",-1))]),(0,r.createElementVNode)("button",{class:"close-footer-btn",onClick:n[1]||(n[1]=t=>e.$emit("close"))}," å…³é—­ ")])])]))}});var I9=n(714),z9={};z9.styleTagTransform=k(),z9.setAttributes=v(),z9.insert=g().bind(null,"head"),z9.domAPI=p(),z9.insertStyleElement=y(),u()(I9.A,z9),I9.A&&I9.A.locals&&I9.A.locals;const M9=(0,N.A)(B9,[["__scopeId","data-v-e5556466"]]),P9={class:"game-variable-panel"},R9=(0,r.defineComponent)({__name:"GameVariablePanel",setup(e){const{t}=(0,re.s)(),n=(0,Iu.useGameStateStore)(),a=(0,hd.useCharacterStore)(),o=(0,r.computed)(()=>"è”æœº"===a.activeCharacterProfile?.æ¨¡å¼),i=(0,r.ref)(!1),s=(0,r.ref)(!1),l=(0,r.ref)(""),c=(0,r.ref)("saveData"),d=(0,r.ref)(""),u=(0,r.ref)(!1),m=(0,r.ref)(!1),p=(0,r.ref)(null),f=(0,r.ref)(!1),g=(0,r.computed)(()=>{if(!n.isGameLoaded)return{};const e=a.activeSaveSlot,t=a.activeCharacterProfile,r="è”æœº"===t?.æ¨¡å¼?t.å­˜æ¡£?.äº‘ç«¯åŒæ­¥ä¿¡æ¯:void 0,o=n.toSaveData()||{},i=(0,bd.ru)(o)?o:(0,bd.jj)(o).migrated,s={å…ƒæ•°æ®:i.å…ƒæ•°æ®,è§’è‰²:i.è§’è‰²,ç¤¾äº¤:i.ç¤¾äº¤,ä¸–ç•Œ:i.ä¸–ç•Œ,ç³»ç»Ÿ:i.ç³»ç»Ÿ};return s.å…ƒæ•°æ®={...s.å…ƒæ•°æ®&&"object"==typeof s.å…ƒæ•°æ®?s.å…ƒæ•°æ®:{},å­˜æ¡£ID:e?.id??e?.å­˜æ¡£å??void 0,è§’è‰²ID:a.rootState.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID,æ¨¡å¼:t?.æ¨¡å¼,æ¸¸ç©æ—¶é•¿:e?.æ¸¸æˆæ—¶é•¿,åˆ›å»ºæ—¶é—´:e?.ä¿å­˜æ—¶é—´??void 0,æ›´æ–°æ—¶é—´:e?.æœ€åä¿å­˜æ—¶é—´??e?.ä¿å­˜æ—¶é—´??void 0},r&&(s.ç³»ç»Ÿ&&"object"==typeof s.ç³»ç»Ÿ||(s.ç³»ç»Ÿ={}),s.ç³»ç»Ÿ.è”æœº&&"object"==typeof s.ç³»ç»Ÿ.è”æœº||(s.ç³»ç»Ÿ.è”æœº={}),s.ç³»ç»Ÿ.è”æœº.åŒæ­¥çŠ¶æ€=r),s}),h=(0,r.computed)(()=>n.isGameLoaded?(n.$state,{[t("å­˜æ¡£æ•°æ® (çŸ­è·¯å¾„)")]:g.value,[t("è§’è‰²")]:n.character,[t("è®°å¿†")]:n.memory,[t("ä¸–ç•Œ")]:n.worldInfo}):{}),v=(0,r.computed)(()=>({[t("æ¸¸æˆç‰ˆæœ¬")]:"2.0.0",[t("æ¶æ„æ¨¡å¼")]:"Piniaå†…å­˜ + DBæŒä¹…åŒ–"})),b=(0,r.computed)(()=>n.character||{}),y=(0,r.computed)(()=>n.isGameLoaded?g.value:{}),x=(0,r.computed)(()=>n.worldInfo||{}),k=(0,r.computed)(()=>n.memory||{}),w=(0,r.computed)(()=>({...h.value,...v.value})),E=(0,r.computed)(()=>{if(!d.value)return h.value;const e=d.value.toLowerCase();return Object.fromEntries(Object.entries(h.value).filter(([t])=>t.toLowerCase().includes(e)))}),N=(0,r.computed)(()=>{if(!d.value)return v.value;const e=d.value.toLowerCase();return Object.fromEntries(Object.entries(v.value).filter(([t])=>t.toLowerCase().includes(e)))}),S=e=>{switch(e){case"core":return Object.keys(h.value).length;case"custom":return Object.keys(v.value).length;case"character":return Object.keys(b.value).length;case"saveData":return Object.keys(y.value).length;case"worldInfo":return _();case"memory":return V();case"raw":return Object.keys(w.value).length;default:return 0}},V=()=>"object"==typeof k.value&&null!==k.value?Object.keys(k.value).length:0,_=()=>"object"==typeof x.value&&null!==x.value?Object.keys(x.value).length:0,C=[{key:"saveData",label:t("å­˜æ¡£æ•°æ®(çŸ­è·¯å¾„)"),icon:"Archive"},{key:"core",label:t("æ ¸å¿ƒæ•°æ®"),icon:"Database"},{key:"character",label:t("è§’è‰²æ•°æ®"),icon:"Users"},{key:"worldInfo",label:t("ä¸–ç•Œä¿¡æ¯"),icon:"Book"},{key:"memory",label:t("è®°å¿†æ•°æ®"),icon:"Brain"},{key:"custom",label:t("è‡ªå®šä¹‰é€‰é¡¹"),icon:"Settings"},{key:"raw",label:t("åŸå§‹æ•°æ®"),icon:"Code"}],A=async()=>{s.value=!0,i.value=!0;try{if(!n.isGameLoaded)return void ne.o.warning(t("è¯·å…ˆåŠ è½½æ¸¸æˆå­˜æ¡£"));l.value=(new Date).toLocaleString("zh-CN"),ne.o.success(t("æ•°æ®å·²ä»Pinia Storeåˆ·æ–°"))}catch(e){console.error("[æ¸¸æˆå˜é‡] åˆ·æ–°å¤±è´¥:",e),ne.o.error(t("æ•°æ®åˆ·æ–°å¤±è´¥: ")+(e instanceof Error?e.message:t("æœªçŸ¥é”™è¯¯")))}finally{i.value=!1,s.value=!1}},D=()=>{try{const e=JSON.stringify(w.value,null,2),n=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=`game-variables-${Date.now()}.json`,r.click(),URL.revokeObjectURL(a),ne.o.success(t("æ•°æ®å¯¼å‡ºæˆåŠŸ"))}catch(e){console.error("[æ¸¸æˆå˜é‡] å¯¼å‡ºå¤±è´¥:",e),ne.o.error(t("æ•°æ®å¯¼å‡ºå¤±è´¥"))}},T=()=>{u.value=!0},B=()=>{ne.o.warning(t("æ–°æ¶æ„ä¸‹ä¸æ”¯æŒç›´æ¥æ·»åŠ å˜é‡ï¼Œè¯·é€šè¿‡æ¸¸æˆæ“ä½œä¿®æ”¹æ•°æ®"))},I=e=>{o.value?ne.o.warning(t("è”æœºæ¨¡å¼ä¸‹ä¸å…è®¸ç›´æ¥ä¿®æ”¹å˜é‡ï¼ˆæœåŠ¡å™¨æƒå¨æ§åˆ¶ï¼‰")):(p.value={...e},f.value=!0)},z=async e=>{try{const n="object"==typeof e.value?JSON.stringify(e.value,null,2):String(e.value);await navigator.clipboard.writeText(`${e.key}: ${n}`),ne.o.success(t("å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"))}catch(e){console.error("[æ¸¸æˆå˜é‡] å¤åˆ¶å¤±è´¥:",e),ne.o.error(t("å¤åˆ¶å¤±è´¥"))}},M=async()=>{o.value?ne.o.warning(t("è”æœºæ¨¡å¼ä¸‹ä¸å…è®¸ç›´æ¥åˆ é™¤å˜é‡ï¼ˆæœåŠ¡å™¨æƒå¨æ§åˆ¶ï¼‰")):ne.o.warning(t("æ–°æ¶æ„ä¸‹ä¸æ”¯æŒç›´æ¥åˆ é™¤å˜é‡ï¼Œè¯·é€šè¿‡æ¸¸æˆæ“ä½œä¿®æ”¹æ•°æ®"))},P=async e=>{if(e)if(o.value)ne.o.warning(t("è”æœºæ¨¡å¼ä¸‹ä¸å…è®¸ç›´æ¥ä¿®æ”¹å˜é‡ï¼ˆæœåŠ¡å™¨æƒå¨æ§åˆ¶ï¼‰"));else try{const{key:a,value:r}=e;let o=r;if("string"==typeof r&&(r.trim().startsWith("{")||r.trim().startsWith("[")))try{o=JSON.parse(r)}catch{}console.log("=== [è¯Šæ–­æ—¥å¿—] å¼€å§‹ä¿å­˜å˜é‡ ==="),console.log("[1] åŸå§‹Key:",a),console.log("[2-A] editingItem.valueå®Œæ•´å¯¹è±¡:",p.value),console.log("[2-B] è§£æ„åçš„value:",r,"typeof:",typeof r),console.log("[2-C] parsedValue:",o,"typeof:",typeof o);const i=(e=>{const n=(t,n)=>e===t?n:e.startsWith(`${t}.`)?`${n}${e.slice(t.length)}`:null,a=[{from:"å…ƒæ•°æ®.æ—¶é—´",to:"gameTime"},{from:"å…ƒæ•°æ®",to:"saveMeta"},{from:"è§’è‰².èº«ä»½",to:"character"},{from:"è§’è‰².å±æ€§",to:"attributes"},{from:"è§’è‰².ä½ç½®",to:"location"},{from:"è§’è‰².æ•ˆæœ",to:"effects"},{from:"è§’è‰².èº«ä½“.éƒ¨ä½å¼€å‘",to:"bodyPartDevelopment"},{from:"è§’è‰².èƒŒåŒ…",to:"inventory"},{from:"è§’è‰².è£…å¤‡",to:"equipment"},{from:"è§’è‰².åŠŸæ³•",to:"techniqueSystem"},{from:"è§’è‰².ä¿®ç‚¼",to:"cultivation"},{from:"è§’è‰².å¤§é“",to:"thousandDao"},{from:"è§’è‰².æŠ€èƒ½",to:"skillState"},{from:"ç¤¾äº¤.å…³ç³»",to:"relationships"},{from:"ç¤¾äº¤.å®—é—¨",to:"sectSystem"},{from:"ç¤¾äº¤.ä»»åŠ¡",to:"questSystem"},{from:"ç¤¾äº¤.è®°å¿†",to:"memory"},{from:"ä¸–ç•Œ.ä¿¡æ¯",to:"worldInfo"},{from:"ç³»ç»Ÿ.é…ç½®",to:"systemConfig"},{from:"ç³»ç»Ÿ.è®¾ç½®",to:"userSettings"},{from:"ç³»ç»Ÿ.ç¼“å­˜.æŒæ¡æŠ€èƒ½",to:"masteredSkills"},{from:"ç³»ç»Ÿ.å†å².å™äº‹",to:"narrativeHistory"},{from:"ç³»ç»Ÿ.è”æœº",to:"onlineState"}];for(const{from:e,to:t}of a){const a=n(e,t);if(a)return a}return ne.o.warning(t("ä¸æ”¯æŒçš„å­—æ®µè·¯å¾„ï¼ˆä»…æ”¯æŒV3äº”åŸŸè·¯å¾„ï¼‰")),null})(a);if(!i)return void ne.o.warning(t("å­—æ®µè·¯å¾„æ— æ³•æ˜ å°„åˆ° Storeï¼Œè¯·æ£€æŸ¥è·¯å¾„æ˜¯å¦æ­£ç¡®"));console.log("[3] æ˜ å°„åStoreè·¯å¾„:",i),console.log("[3.5] ğŸ” å³å°†ä¼ ç»™updateStateçš„å€¼:",o,"ç±»å‹:",typeof o);const s=i.split(".");let l=n;for(const e of s)l=l?.[e];console.log("[4] updateStateå‰çš„Storeå€¼:",l),console.log("[4-CRITICAL] å³å°†ä¼ é€’ç»™updateStateçš„parsedValue:",o,"typeof:",typeof o,"JSON:",JSON.stringify(o)),n.updateState(i,o);let c=n;for(const e of s)c=c?.[e];console.log("[5] updateStateåçš„Storeå€¼:",c),console.log("[6] å¼€å§‹è°ƒç”¨ gameStateStore.saveGame()"),await n.saveGame(),console.log("[7] gameStateStore.saveGame() å®Œæˆ"),console.log("=== [è¯Šæ–­æ—¥å¿—] ä¿å­˜å˜é‡ç»“æŸ ==="),ne.o.success(t("âœ… å·²æˆåŠŸæ›´æ–° ")+`${a}`),R(),await A()}catch(e){const n=e instanceof Error?e.message:t("æœªçŸ¥é”™è¯¯");ne.o.error(t("ä¿å­˜å¤±è´¥: ")+`${n}`),console.error("[æ¸¸æˆå˜é‡] ä¿å­˜å¤±è´¥:",e)}else ne.o.error(t("æ²¡æœ‰è¦ä¿å­˜çš„æ•°æ®"))},R=()=>{f.value=!1,p.value=null},$=()=>{console.group("[æ¸¸æˆå˜é‡] è¯¦ç»†è°ƒè¯•ä¿¡æ¯ (Piniaæ¨¡å¼)"),console.log(t("åŸºæœ¬ç»Ÿè®¡:"),{[t("æ¸¸æˆå·²åŠ è½½")]:n.isGameLoaded,[t("è§’è‰²å")]:n.character?.åå­—,coreDataViewsCount:Object.keys(h.value).length,customOptionsCount:Object.keys(v.value).length,lastUpdateTime:l.value}),console.log(t("æ ¸å¿ƒæ•°æ®é”®å:"),Object.keys(h.value)),console.log(t("è‡ªå®šä¹‰é€‰é¡¹é”®å:"),Object.keys(v.value)),console.log(t("å®Œæ•´SaveData:"),n.toSaveData()),console.groupEnd(),ne.o.success(t("è°ƒè¯•ä¿¡æ¯å·²è¾“å‡ºåˆ°æ§åˆ¶å°"))};return(0,r.onMounted)(()=>{A(),Qu.on("refresh",()=>A()),Qu.on("export",()=>D()),Qu.on("stats",()=>T())}),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",P9,[(0,r.createVNode)(O4,{isRefreshing:s.value,searchQuery:d.value,"onUpdate:searchQuery":t[0]||(t[0]=e=>d.value=e),onRefresh:A,onExport:D,onShowStats:T,onShowFormatGuide:t[1]||(t[1]=e=>m.value=!0)},null,8,["isRefreshing","searchQuery"]),(0,r.createVNode)(X4,{dataTypes:C,selectedType:c.value,getDataCount:S,"onUpdate:selectedType":t[2]||(t[2]=e=>c.value=e)},null,8,["selectedType"]),(0,r.createVNode)(V6,{isLoading:i.value,selectedDataType:c.value,searchQuery:d.value,readOnly:o.value,coreDataViews:h.value,customOptions:v.value,characterData:b.value,saveData:y.value,worldInfo:x.value,memoryData:k.value,allGameData:w.value,filteredCoreDataViews:E.value,filteredCustomOptions:N.value,onEditVariable:I,onCopyVariable:z,onDeleteVariable:M,onAddNewVariable:B,onDebugLog:$},null,8,["isLoading","selectedDataType","searchQuery","readOnly","coreDataViews","customOptions","characterData","saveData","worldInfo","memoryData","allGameData","filteredCoreDataViews","filteredCustomOptions"]),f.value?((0,r.openBlock)(),(0,r.createBlock)(G6,{key:0,editingItem:p.value,onClose:R,onSave:P},null,8,["editingItem"])):(0,r.createCommentVNode)("v-if",!0),u.value?((0,r.openBlock)(),(0,r.createBlock)(w9,{key:1,coreDataViews:h.value,customOptions:v.value,allGameData:w.value,getMemoryCount:V,getWorldItemCount:_,onClose:t[3]||(t[3]=e=>u.value=!1)},null,8,["coreDataViews","customOptions","allGameData"])):(0,r.createCommentVNode)("v-if",!0),m.value?((0,r.openBlock)(),(0,r.createBlock)(M9,{key:2,onClose:t[4]||(t[4]=e=>m.value=!1)})):(0,r.createCommentVNode)("v-if",!0)]))}});var $9=n(1475),O9={};O9.styleTagTransform=k(),O9.setAttributes=v(),O9.insert=g().bind(null,"head"),O9.domAPI=p(),O9.insertStyleElement=y(),u()($9.A,O9),$9.A&&$9.A.locals&&$9.A.locals;const L9=(0,N.A)(R9,[["__scopeId","data-v-71ae95f6"]]),F9={class:"prompt-panel"},j9={class:"panel-header compact"},U9={class:"panel-actions"},q9=["disabled"],G9=["disabled"],H9={key:0,class:"online-mode-warning"},Y9={class:"prompt-list"},W9=["onClick"],X9={class:"category-title"},J9={class:"category-icon"},K9={class:"category-name"},Q9={class:"category-count"},Z9={class:"category-actions"},e7={class:"category-desc"},t7={key:0,class:"category-content"},n7=["onClick"],a7={class:"prompt-title-area"},r7=["checked","onChange"],o7={key:0,class:"prompt-order"},i7={class:"prompt-meta"},s7=["value","disabled","onChange"],l7=["title"],c7={key:0,class:"prompt-content"},d7={key:0,class:"prompt-description-full"},u7=["onUpdate:modelValue","onInput","disabled"],m7={class:"prompt-actions"},p7=["onClick","disabled"],f7=["onClick"],g7=["onClick","disabled"],h7=(0,r.defineComponent)({__name:"PromptManagementPanel",setup(e){const t=(0,a.useRouter)(),n=(0,hd.useCharacterStore)(),o=(0,r.computed)(()=>"è”æœº"===n.activeCharacterProfile?.æ¨¡å¼),i=(0,r.ref)({}),s=(0,r.ref)({}),l=(0,r.ref)({});async function c(){i.value=await gd.promptStorage.loadByCategory();const e=Object.keys(i.value)[0];e&&(l.value[e]=!0)}function d(){"/prompts"===t.currentRoute.value.path?t.push("/"):t.push("/game/settings")}function u(){for(const e in i.value)l.value[e]=!0}function m(){for(const e in i.value)l.value[e]=!1;s.value={}}async function p(){let e=0;for(const t in i.value)for(const n of i.value[t].prompts)n.modified&&(await gd.promptStorage.save(n.key,n.content,n.enabled,n.weight),e++);e>0?ne.o.success(`å·²ä¿å­˜ ${e} é¡¹ä¿®æ”¹`):ne.o.info("æ²¡æœ‰éœ€è¦ä¿å­˜çš„ä¿®æ”¹")}async function f(){const e=await gd.promptStorage.exportAll();h((0,vd.q3)("prompts",e),"prompts_all.json"),ne.o.success("å·²å¯¼å‡ºå…¨éƒ¨æç¤ºè¯")}function g(){const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{const t=e.target.files?.[0];if(t)try{const e=await t.text(),n=JSON.parse(e),a=(0,vd.ZT)(n),r="prompts"===a.type?a.payload:n,o=await gd.promptStorage.importPrompts(r);await c(),ne.o.success(`æˆåŠŸå¯¼å…¥ ${o} ä¸ªæç¤ºè¯`)}catch(e){ne.o.error("å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼")}},e.click()}function h(e,t){const n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=t,r.click(),URL.revokeObjectURL(a)}return(0,r.onMounted)(async()=>{await c()}),(e,t)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",F9,[(0,r.createElementVNode)("div",j9,[(0,r.createElementVNode)("button",{class:"back-btn",onClick:d,title:"è¿”å›"},t[3]||(t[3]=[(0,r.createElementVNode)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("polyline",{points:"15 18 9 12 15 6"})],-1)])),t[9]||(t[9]=(0,r.createElementVNode)("div",{class:"panel-title-compact"},[(0,r.createElementVNode)("span",{class:"title-text"},"ğŸ“ æç¤ºè¯ç®¡ç†")],-1)),(0,r.createElementVNode)("div",U9,[(0,r.createElementVNode)("button",{class:"action-btn-compact",onClick:u,title:"å…¨éƒ¨å±•å¼€"},t[4]||(t[4]=[(0,r.createElementVNode)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("polyline",{points:"6 9 12 15 18 9"})],-1)])),(0,r.createElementVNode)("button",{class:"action-btn-compact",onClick:m,title:"å…¨éƒ¨æŠ˜å "},t[5]||(t[5]=[(0,r.createElementVNode)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("polyline",{points:"18 15 12 9 6 15"})],-1)])),(0,r.createElementVNode)("button",{class:"action-btn-compact",onClick:f,title:"å¯¼å‡ºå…¨éƒ¨"},t[6]||(t[6]=[(0,r.createElementVNode)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,r.createElementVNode)("polyline",{points:"7 10 12 15 17 10"}),(0,r.createElementVNode)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1)])),(0,r.createElementVNode)("button",{class:"action-btn-compact",onClick:g,title:"å¯¼å…¥",disabled:o.value},t[7]||(t[7]=[(0,r.createElementVNode)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,r.createElementVNode)("polyline",{points:"17 8 12 3 7 8"}),(0,r.createElementVNode)("line",{x1:"12",y1:"3",x2:"12",y2:"15"})],-1)]),8,q9),(0,r.createElementVNode)("button",{class:"action-btn-compact primary",onClick:p,title:"ä¿å­˜å…¨éƒ¨",disabled:o.value},t[8]||(t[8]=[(0,r.createElementVNode)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[(0,r.createElementVNode)("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),(0,r.createElementVNode)("polyline",{points:"17 21 17 13 7 13 7 21"}),(0,r.createElementVNode)("polyline",{points:"7 3 7 8 15 8"})],-1)]),8,G9)])]),(0,r.createCommentVNode)(" è”æœºæ¨¡å¼è­¦å‘Š "),o.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",H9,t[10]||(t[10]=[(0,r.createElementVNode)("span",{class:"warning-icon"},"ğŸ”’",-1),(0,r.createElementVNode)("span",{class:"warning-text"},"è”æœºæ¨¡å¼ä¸‹æç¤ºè¯ä»…ä¾›æŸ¥çœ‹ï¼Œæ— æ³•ç¼–è¾‘",-1)]))):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("div",Y9,[(0,r.createCommentVNode)(" åˆ†ç±»æ˜¾ç¤º "),((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(i.value,(e,n)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:n,class:"category-section"},[(0,r.createCommentVNode)(" åˆ†ç±»å¤´éƒ¨ "),(0,r.createElementVNode)("div",{class:"category-header",onClick:e=>function(e){l.value[e]=!l.value[e]}(String(n))},[(0,r.createElementVNode)("div",X9,[(0,r.createElementVNode)("span",J9,(0,r.toDisplayString)(e.info.icon),1),(0,r.createElementVNode)("span",K9,(0,r.toDisplayString)(e.info.name),1),(0,r.createElementVNode)("span",Q9,(0,r.toDisplayString)(e.prompts.length)+" ä¸ªæç¤ºè¯",1)]),(0,r.createElementVNode)("div",Z9,[(0,r.createElementVNode)("span",e7,(0,r.toDisplayString)(e.info.description),1),((0,r.openBlock)(),(0,r.createElementBlock)("svg",{class:(0,r.normalizeClass)(["expand-icon",{expanded:l.value[n]}]),width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},t[11]||(t[11]=[(0,r.createElementVNode)("polyline",{points:"6 9 12 15 18 9"},null,-1)]),2))])],8,W9),(0,r.createCommentVNode)(" åˆ†ç±»å†…å®¹ "),l.value[n]?((0,r.openBlock)(),(0,r.createElementBlock)("div",t7,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.prompts,e=>{return(0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.key,class:"prompt-item"},[(0,r.createElementVNode)("div",{class:"prompt-header",onClick:t=>{return n=e.key,void(s.value[n]=!s.value[n]);var n}},[(0,r.createElementVNode)("div",a7,[(0,r.createCommentVNode)(" å¯ç”¨/ç¦ç”¨å¼€å…³ "),(0,r.createElementVNode)("label",{class:"toggle-switch",onClick:t[0]||(t[0]=(0,r.withModifiers)(()=>{},["stop"]))},[(0,r.createElementVNode)("input",{type:"checkbox",checked:e.enabled,onChange:t=>async function(e,t){for(const n in i.value){const a=i.value[n].prompts.find(t=>t.key===e);if(a){a.enabled=t;break}}await gd.promptStorage.setEnabled(e,t),ne.o.info(t?"å·²å¯ç”¨":"å·²ç¦ç”¨")}(e.key,t.target.checked)},null,40,r7),t[12]||(t[12]=(0,r.createElementVNode)("span",{class:"toggle-slider"},null,-1))]),(0,r.createCommentVNode)(" æ˜¾ç¤ºé¡ºåºå·ï¼ˆä»…æ ¸å¿ƒè¯·æ±‚æç¤ºè¯ï¼‰ "),"coreRequest"===n&&e.order?((0,r.openBlock)(),(0,r.createElementBlock)("span",o7,(0,r.toDisplayString)(e.order),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["prompt-title",{disabled:!e.enabled}])},(0,r.toDisplayString)(e.name),3)]),(0,r.createElementVNode)("div",i7,[void 0!==e.weight?((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:0,class:"weight-editor",onClick:t[2]||(t[2]=(0,r.withModifiers)(()=>{},["stop"]))},[t[13]||(t[13]=(0,r.createElementVNode)("label",{class:"weight-label"},"W",-1)),(0,r.createElementVNode)("input",{type:"number",class:(0,r.normalizeClass)(["weight-input",(l=e.weight,l>=9?"weight-high":l>=6?"weight-medium":"weight-low")]),value:e.weight,min:"1",max:"10",disabled:o.value,onChange:t=>async function(e,t){const n=Math.min(10,Math.max(1,Math.round(t)));for(const t in i.value){const a=i.value[t].prompts.find(t=>t.key===e);if(a){a.weight=n,await gd.promptStorage.save(e,a.content,a.enabled,n),ne.o.success(`æƒé‡å·²æ›´æ–°ä¸º ${n}`);break}}}(e.key,Number(t.target.value)),onClick:t[1]||(t[1]=(0,r.withModifiers)(()=>{},["stop"]))},null,42,s7)])):(0,r.createCommentVNode)("v-if",!0),e.description?((0,r.openBlock)(),(0,r.createElementBlock)("span",{key:1,class:"prompt-desc",title:e.description},(0,r.toDisplayString)((a=e.description,a.length<=30?a:a.substring(0,30)+"...")),9,l7)):(0,r.createCommentVNode)("v-if",!0),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["prompt-status",{modified:e.modified}])},(0,r.toDisplayString)(e.modified?"å·²ä¿®æ”¹":"é»˜è®¤"),3)])],8,n7),s.value[e.key]?((0,r.openBlock)(),(0,r.createElementBlock)("div",c7,[e.description?((0,r.openBlock)(),(0,r.createElementBlock)("div",d7,(0,r.toDisplayString)(e.description),1)):(0,r.createCommentVNode)("v-if",!0),(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t=>e.content=t,onInput:t=>function(e){for(const t in i.value){const n=i.value[t].prompts.find(t=>t.key===e);if(n){n.modified=n.content!==n.default;break}}}(e.key),rows:"20",class:(0,r.normalizeClass)(["prompt-textarea",{"readonly-mode":o.value}]),disabled:o.value},null,42,u7),[[r.vModelText,e.content]]),(0,r.createElementVNode)("div",m7,[(0,r.createElementVNode)("button",{class:"btn-small",onClick:t=>async function(e){for(const t in i.value){const n=i.value[t].prompts.find(t=>t.key===e);if(n){n.content=n.default,n.modified=!1,await gd.promptStorage.reset(e),ne.o.info(`å·²é‡ç½®: ${n.name}`);break}}}(e.key),disabled:o.value},"é‡ç½®ä¸ºé»˜è®¤",8,p7),(0,r.createElementVNode)("button",{class:"btn-small",onClick:t=>function(e){for(const t in i.value){const n=i.value[t].prompts.find(t=>t.key===e);if(n){h((0,vd.q3)("prompts",{[e]:n.content}),`prompt_${e}.json`);break}}}(e.key)},"å¯¼å‡ºæ­¤é¡¹",8,f7),(0,r.createElementVNode)("button",{class:"btn-small btn-primary",onClick:t=>async function(e){for(const t in i.value){const n=i.value[t].prompts.find(t=>t.key===e);if(n){await gd.promptStorage.save(e,n.content,n.enabled,n.weight),ne.o.success(`å·²ä¿å­˜: ${n.name}`);break}}}(e.key),disabled:o.value},"ä¿å­˜ä¿®æ”¹",8,g7)])])):(0,r.createCommentVNode)("v-if",!0)]);var a,l}),128))])):(0,r.createCommentVNode)("v-if",!0)]))),128))])]))}});var v7=n(2773),b7={};b7.styleTagTransform=k(),b7.setAttributes=v(),b7.insert=g().bind(null,"head"),b7.domAPI=p(),b7.insertStyleElement=y(),u()(v7.A,b7),v7.A&&v7.A.locals&&v7.A.locals;const y7=(0,N.A)(h7,[["__scopeId","data-v-41853e98"]]),x7=(0,V.A)("calendar-check",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]),k7=(0,V.A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),w7=(0,V.A)("corner-up-left",[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]]);const E7={class:"online-travel-panel"},N7={key:0,class:"notice error-indicator"},S7={key:1,class:"notice warning-indicator"},V7={class:"tabs-header"},_7={class:"tabs-nav"},C7=["onClick"],A7={class:"header-actions"},D7=["disabled"],T7=["disabled"],B7={class:"tab-content"},I7={key:0,class:"travel-tab"},z7={class:"travel-layout"},M7={class:"worlds-list-panel"},P7={class:"filter-bar"},R7={class:"search-box"},$7=["placeholder","disabled"],O7=["disabled"],L7={value:""},F7={value:"public"},j7={value:"hidden"},U7={class:"travel-points-bar"},q7={class:"points-label"},G7={class:"points-value"},H7={class:"worlds-list"},Y7={key:0,class:"loading-state"},W7={key:1,class:"empty-state"},X7={key:2},J7=["onClick"],K7={class:"world-info"},Q7={class:"owner-name"},Z7={class:"world-meta"},eee={class:"world-id"},tee=["disabled"],nee={class:"travel-action-panel"},aee={key:0,class:"selected-world-detail"},ree={class:"detail-info"},oee={class:"info-row"},iee={class:"info-label"},see={class:"info-value"},lee={class:"info-row"},cee={class:"info-label"},dee={key:0,class:"invite-code-section"},uee=["placeholder","disabled"],mee={class:"action-buttons"},pee=["disabled"],fee={key:0,class:"session-info-box"},gee={class:"session-label"},hee=["disabled"],vee={key:1,class:"empty-selection"},bee={key:0,class:"my-world-info"},yee={class:"info-title"},xee={class:"info-row"},kee={class:"info-row"},wee={class:"muted"},Eee=["disabled"],Nee={class:"map-tab"},See={key:0,class:"empty-state"},Vee={key:1,class:"map-layout"},_ee={class:"map-canvas"},Cee=["viewBox"],Aee={class:"edges"},Dee=["x1","y1","x2","y2"],Tee={class:"nodes"},Bee=["transform","onClick"],Iee={x:"14",y:"5"},zee={class:"poi-sidebar"},Mee={class:"current-loc"},Pee={class:"poi-list"},Ree=["onClick","disabled"],$ee={class:"poi-name"},Oee={class:"poi-meta"},Lee={class:"reports-tab"},Fee={class:"reports-header"},jee={class:"muted"},Uee=["disabled"],qee={key:0,class:"empty-state"},Gee={key:1,class:"report-list"},Hee={class:"muted"},Yee=(0,r.defineComponent)({__name:"OnlineTravelPanel",setup(e){const t=[{id:"travel",label:"ç©¿è¶Š",icon:Sm.A},{id:"map",label:"åœ°å›¾",icon:Lu},{id:"reports",label:"æŠ¥å‘Š",icon:Zx.A}],n=(0,r.ref)("travel"),{t:a}=(0,re.s)(),o=(0,T.useUIStore)(),i=(0,hd.useCharacterStore)(),s=(0,r.ref)(!1),l=(0,r.ref)(0),c=(0,r.ref)(""),d=(0,r.ref)(""),u=(0,r.ref)(""),m=(0,r.ref)(null),p=(0,r.ref)(null),f=(0,r.ref)(null),g=(0,r.ref)([]),h=(0,r.ref)([]),v=(0,r.ref)(null),b=(0,r.ref)(""),y=(0,r.ref)(""),x=(0,r.ref)(!1),k=(0,r.ref)(0),w=(0,r.ref)(!0),E=(0,r.ref)(null),N=(0,r.computed)(()=>o.isBackendConfiguredComputed),S=(0,r.computed)(()=>"è”æœº"===i.activeCharacterProfile?.æ¨¡å¼),V=((0,r.computed)(()=>l.value>0&&c.value.trim().length>0&&N.value&&S.value),(0,r.computed)(()=>null!==v.value&&!p.value&&l.value>0&&N.value&&S.value&&("public"===v.value.visibility_mode||d.value.trim().length>0))),_=(0,r.computed)(()=>{const e=f.value?.pois??[];return new Map(e.map(e=>[e.id,e]))}),C=(0,r.computed)(()=>{if(!f.value?.viewer_poi_id)return a("æœªçŸ¥");const e=_.value.get(f.value.viewer_poi_id);return e?`${e.poi_key} (#${e.id})`:`#${f.value.viewer_poi_id}`}),A=(0,r.computed)(()=>{const e=f.value?.pois??[];if(0===e.length)return"0 0 600 400";let t=e[0].x,n=e[0].x,a=e[0].y,r=e[0].y;for(const o of e)t=Math.min(t,o.x),n=Math.max(n,o.x),a=Math.min(a,o.y),r=Math.max(r,o.y);return`${t-60} ${a-60} ${Math.max(200,n-t+120)} ${Math.max(160,r-a+120)}`}),D=async()=>{try{const e=await async function(){return I.Em.get("/api/v1/travel/profile")}();l.value=e.travel_points,u.value=""}catch(e){u.value=e?.message||"ç©¿è¶ŠæœåŠ¡æš‚ä¸å¯ç”¨"}},B=async()=>{try{g.value=await async function(){return I.Em.get("/api/v1/invasion/reports/me")}()}catch{g.value=[]}},z=async()=>{try{m.value=await async function(){return I.Em.get("/api/v1/worlds/instance/me")}()}catch{m.value=null}},M=async()=>{p.value?f.value=await async function(e,t,n){const a=n?`?session_id=${encodeURIComponent(String(n))}`:"";return I.Em.get(`/api/v1/worlds/instance/${e}/map/${t}/graph${a}`)}(p.value.target_world_instance_id,p.value.entry_map_id,p.value.session_id):f.value=null},P=async()=>{try{const e=await async function(){return I.Em.get("/api/v1/travel/active")}();e?(p.value=e,await M()):(p.value=null,f.value=null)}catch{}},R=async()=>{if(N.value){s.value=!0;try{await D(),await z(),await B(),await P()}finally{s.value=!1}}},$=async()=>{if(!s.value){s.value=!0;try{const e=await async function(){return I.Em.post("/api/v1/travel/signin",{})}();l.value=e.travel_points,ne.o.success(e.message)}catch(e){ne.o.error(e?.message||"ç­¾åˆ°å¤±è´¥")}finally{s.value=!1}}},O=async()=>{if(m.value&&!s.value){s.value=!0;try{const e="public"===m.value.visibility_mode?"hidden":"hidden"===m.value.visibility_mode?"locked":"public";m.value=await async function(e){return I.Em.post("/api/v1/worlds/instance/me/visibility",{visibility_mode:e})}(e),ne.o.success(`ä¸–ç•Œéšç§å·²åˆ‡æ¢ä¸º ${m.value.visibility_mode}`)}catch(e){ne.o.error(e?.message||"åˆ‡æ¢å¤±è´¥")}finally{s.value=!1}}},L=async()=>{if(p.value&&!s.value){s.value=!0;try{const e=await async function(e){return I.Em.post("/api/v1/travel/end",{session_id:e})}(p.value.session_id);ne.o.success(e.message),p.value=null,f.value=null,await B()}catch(e){ne.o.error(e?.message||a("è¿”å›å¤±è´¥"))}finally{s.value=!1}}},F=e=>{if(!f.value)return!1;const t=f.value.viewer_poi_id;return!!t&&f.value.edges.some(n=>n.from_poi_id===t&&n.to_poi_id===e)},j=async e=>{if(p.value&&f.value&&F(e)&&!s.value){s.value=!0;try{await async function(e,t,n){return I.Em.post(`/api/v1/worlds/instance/${e}/action`,{session_id:n,action_type:"move",intent:{to_poi_id:t}})}(p.value.target_world_instance_id,e,p.value.session_id),await M()}catch(e){ne.o.error(e?.message||"ç§»åŠ¨å¤±è´¥")}finally{s.value=!1}}},U=async(e=!1)=>{if(N.value){e&&(k.value=0,h.value=[],w.value=!0),x.value=!0;try{const t=await async function(e=0,t=20,n,a){const r=new URLSearchParams;return r.append("skip",e.toString()),r.append("limit",t.toString()),n&&r.append("visibility",n),a&&r.append("search",a),I.Em.get(`/api/v1/worlds/instance/list?${r.toString()}`)}(20*k.value,20,y.value||void 0,b.value.trim()||void 0);t.length<20&&(w.value=!1),h.value=e?t:[...h.value,...t]}catch(e){ne.o.error(e?.message||a("åŠ è½½ä¸–ç•Œåˆ—è¡¨å¤±è´¥"))}finally{x.value=!1}}},q=()=>{!x.value&&w.value&&(k.value++,U(!1))},G=async()=>{if(v.value)if(p.value)ne.o.info(a("å·²æœ‰è¿›è¡Œä¸­çš„ç©¿è¶Šï¼Œä¼šè¯ç»“æŸåæ‰èƒ½ç»§ç»­"));else if(!s.value){s.value=!0;try{p.value=await async function(e,t){return I.Em.post("/api/v1/travel/start",{target_username:e,invite_code:t})}(v.value.owner_username,d.value.trim()||void 0),l.value=p.value.travel_points_left,await M(),ne.o.success(a("ç©¿è¶ŠæˆåŠŸ"))}catch(e){ne.o.error(e?.message||a("ç©¿è¶Šå¤±è´¥"))}finally{s.value=!1}}};return(0,r.watch)([b,y],()=>{E.value&&clearTimeout(E.value),E.value=window.setTimeout(()=>{U(!0)},500)}),(0,r.onMounted)(async()=>{try{if(!N.value)return;await D(),await z(),await B(),await P(),await U(!0)}catch(e){console.warn("[OnlineTravelPanel] init failed",e)}}),(e,o)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",E7,[(0,r.createCommentVNode)(" çŠ¶æ€æç¤º "),N.value?S.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:2},[(0,r.createCommentVNode)(" æ ‡ç­¾é¡µå¯¼èˆª "),(0,r.createElementVNode)("div",V7,[(0,r.createElementVNode)("div",_7,[((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(t,e=>(0,r.createElementVNode)("button",{key:e.id,class:(0,r.normalizeClass)(["tab-btn",{active:n.value===e.id}]),onClick:t=>n.value=e.id},[((0,r.openBlock)(),(0,r.createBlock)((0,r.resolveDynamicComponent)(e.icon),{size:16})),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(a)(e.label)),1)],10,C7)),64))]),(0,r.createElementVNode)("div",A7,[(0,r.createElementVNode)("button",{class:"action-btn",onClick:R,disabled:s.value},[(0,r.createVNode)((0,r.unref)(Yu.A),{size:16})],8,D7),(0,r.createElementVNode)("button",{class:"action-btn primary",onClick:$,disabled:s.value},[(0,r.createVNode)((0,r.unref)(x7),{size:16}),(0,r.createElementVNode)("span",null,(0,r.toDisplayString)((0,r.unref)(a)("ç­¾åˆ°")),1)],8,T7)])]),(0,r.createCommentVNode)(" æ ‡ç­¾å†…å®¹ "),(0,r.createElementVNode)("div",B7,[(0,r.createCommentVNode)(" ç©¿è¶Šæ ‡ç­¾ "),"travel"===n.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",I7,[(0,r.createElementVNode)("div",z7,[(0,r.createCommentVNode)(" å·¦ä¾§: ä¸–ç•Œåˆ—è¡¨ "),(0,r.createElementVNode)("div",M7,[(0,r.createCommentVNode)(" æœç´¢å’Œç­›é€‰ "),(0,r.createElementVNode)("div",P7,[(0,r.createElementVNode)("div",R7,[(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>b.value=e),placeholder:(0,r.unref)(a)("æœç´¢ç”¨æˆ·å..."),class:"search-input",disabled:x.value},null,8,$7),[[r.vModelText,b.value]])]),(0,r.withDirectives)((0,r.createElementVNode)("select",{"onUpdate:modelValue":o[1]||(o[1]=e=>y.value=e),class:"filter-select",disabled:x.value},[(0,r.createElementVNode)("option",L7,(0,r.toDisplayString)((0,r.unref)(a)("å…¨éƒ¨")),1),(0,r.createElementVNode)("option",F7,(0,r.toDisplayString)((0,r.unref)(a)("å…¬å¼€")),1),(0,r.createElementVNode)("option",j7,(0,r.toDisplayString)((0,r.unref)(a)("éšè—")),1)],8,O7),[[r.vModelSelect,y.value]])]),(0,r.createCommentVNode)(" ç©¿è¶Šç‚¹æ˜¾ç¤º "),(0,r.createElementVNode)("div",U7,[(0,r.createVNode)((0,r.unref)(ju),{size:16,class:"points-icon"}),(0,r.createElementVNode)("span",q7,(0,r.toDisplayString)((0,r.unref)(a)("ç©¿è¶Šç‚¹"))+":",1),(0,r.createElementVNode)("span",G7,(0,r.toDisplayString)(l.value),1)]),(0,r.createCommentVNode)(" ä¸–ç•Œåˆ—è¡¨ "),(0,r.createElementVNode)("div",H7,[x.value&&0===h.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",Y7,(0,r.toDisplayString)((0,r.unref)(a)("åŠ è½½ä¸­...")),1)):0===h.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",W7,[(0,r.createVNode)((0,r.unref)(Sm.A),{size:48,class:"empty-icon"}),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(a)("æš‚æ— å¯ç©¿è¶Šçš„ä¸–ç•Œ")),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",X7,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(h.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.world_instance_id,class:(0,r.normalizeClass)(["world-card",{selected:v.value?.world_instance_id===e.world_instance_id}]),onClick:t=>(e=>{v.value=e,d.value=""})(e)},[(0,r.createElementVNode)("div",K7,[(0,r.createElementVNode)("div",Q7,(0,r.toDisplayString)(e.owner_username),1),(0,r.createElementVNode)("div",Z7,[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["badge",`badge-${e.visibility_mode}`])},(0,r.toDisplayString)(e.visibility_mode),3),(0,r.createElementVNode)("span",eee,"#"+(0,r.toDisplayString)(e.world_instance_id),1)])])],10,J7))),128)),(0,r.createCommentVNode)(" åŠ è½½æ›´å¤š "),w.value?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,class:"load-more-btn",onClick:q,disabled:x.value},(0,r.toDisplayString)(x.value?(0,r.unref)(a)("åŠ è½½ä¸­..."):(0,r.unref)(a)("åŠ è½½æ›´å¤š")),9,tee)):(0,r.createCommentVNode)("v-if",!0)]))])]),(0,r.createCommentVNode)(" å³ä¾§: ç©¿è¶Šæ“ä½œ "),(0,r.createElementVNode)("div",nee,[v.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",aee,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(v.value.owner_username)+" "+(0,r.toDisplayString)((0,r.unref)(a)("çš„ä¸–ç•Œ")),1),(0,r.createElementVNode)("div",ree,[(0,r.createElementVNode)("div",oee,[(0,r.createElementVNode)("span",iee,(0,r.toDisplayString)((0,r.unref)(a)("ä¸–ç•ŒID")),1),(0,r.createElementVNode)("span",see,"#"+(0,r.toDisplayString)(v.value.world_instance_id),1)]),(0,r.createElementVNode)("div",lee,[(0,r.createElementVNode)("span",cee,(0,r.toDisplayString)((0,r.unref)(a)("å¯è§æ€§")),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["badge",`badge-${v.value.visibility_mode}`])},(0,r.toDisplayString)(v.value.visibility_mode),3)])]),(0,r.createCommentVNode)(" é‚€è¯·ç è¾“å…¥(ä»…hidden/locked) "),"public"!==v.value.visibility_mode?((0,r.openBlock)(),(0,r.createElementBlock)("div",dee,[(0,r.createElementVNode)("label",null,(0,r.toDisplayString)((0,r.unref)(a)("é‚€è¯·ç ")),1),(0,r.withDirectives)((0,r.createElementVNode)("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>d.value=e),placeholder:(0,r.unref)(a)("è¾“å…¥é‚€è¯·ç ..."),class:"invite-code-input",disabled:s.value},null,8,uee),[[r.vModelText,d.value]])])):(0,r.createCommentVNode)("v-if",!0),(0,r.createCommentVNode)(" ç©¿è¶ŠæŒ‰é’® "),(0,r.createElementVNode)("div",mee,[(0,r.createElementVNode)("button",{class:"action-btn primary",onClick:G,disabled:!V.value||s.value},[(0,r.createVNode)((0,r.unref)(k7),{size:16}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(a)("ç©¿è¶Šåˆ°æ­¤ä¸–ç•Œ")),1)],8,pee),(0,r.createCommentVNode)(" å½“å‰ä¼šè¯ä¿¡æ¯ "),p.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",fee,[(0,r.createElementVNode)("div",gee,(0,r.toDisplayString)((0,r.unref)(a)("å½“å‰ä¼šè¯"))+" #"+(0,r.toDisplayString)(p.value.session_id),1),(0,r.createElementVNode)("button",{class:"action-btn",onClick:L,disabled:s.value},[(0,r.createVNode)((0,r.unref)(w7),{size:16}),(0,r.createTextVNode)(" "+(0,r.toDisplayString)((0,r.unref)(a)("è¿”å›")),1)],8,hee)])):(0,r.createCommentVNode)("v-if",!0)])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",vee,[(0,r.createVNode)((0,r.unref)(Sm.A),{size:64,class:"empty-icon"}),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(a)("è¯·ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªä¸–ç•Œ")),1),(0,r.createCommentVNode)(" æˆ‘çš„ä¸–ç•Œä¿¡æ¯ "),m.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",bee,[(0,r.createElementVNode)("div",yee,[(0,r.createVNode)((0,r.unref)(Xx),{size:16}),(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(a)("æˆ‘çš„ä¸–ç•Œ")),1)]),(0,r.createElementVNode)("div",xee,[o[3]||(o[3]=(0,r.createElementVNode)("span",{class:"muted"},"ID",-1)),(0,r.createElementVNode)("span",null,"#"+(0,r.toDisplayString)(m.value.world_instance_id),1)]),(0,r.createElementVNode)("div",kee,[(0,r.createElementVNode)("span",wee,(0,r.toDisplayString)((0,r.unref)(a)("éšç§")),1),(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["badge",`badge-${m.value.visibility_mode}`])},(0,r.toDisplayString)(m.value.visibility_mode),3)]),(0,r.createElementVNode)("button",{class:"action-btn sm",onClick:O,disabled:s.value},[(0,r.createVNode)((0,r.unref)(lO),{size:14}),(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(a)("åˆ‡æ¢éšç§")),1)],8,Eee)])):(0,r.createCommentVNode)("v-if",!0)]))])])])):"map"===n.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:1},[(0,r.createCommentVNode)(" åœ°å›¾æ ‡ç­¾ "),(0,r.createElementVNode)("div",Nee,[p.value&&f.value?((0,r.openBlock)(),(0,r.createElementBlock)("div",Vee,[(0,r.createElementVNode)("div",_ee,[((0,r.openBlock)(),(0,r.createElementBlock)("svg",{viewBox:A.value,class:"poi-map"},[(0,r.createElementVNode)("g",Aee,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.edges,e=>((0,r.openBlock)(),(0,r.createElementBlock)("line",{key:e.id,x1:_.value.get(e.from_poi_id)?.x??0,y1:_.value.get(e.from_poi_id)?.y??0,x2:_.value.get(e.to_poi_id)?.x??0,y2:_.value.get(e.to_poi_id)?.y??0,class:"edge-line"},null,8,Dee))),128))]),(0,r.createElementVNode)("g",Tee,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.pois,e=>((0,r.openBlock)(),(0,r.createElementBlock)("g",{key:e.id,class:(0,r.normalizeClass)(["node",{active:e.id===f.value.viewer_poi_id,reachable:F(e.id)}]),transform:`translate(${e.x}, ${e.y})`,onClick:t=>j(e.id)},[o[4]||(o[4]=(0,r.createElementVNode)("circle",{r:"10"},null,-1)),(0,r.createElementVNode)("text",Iee,(0,r.toDisplayString)(e.poi_key),1)],10,Bee))),128))])],8,Cee))]),(0,r.createElementVNode)("div",zee,[(0,r.createElementVNode)("div",Mee,(0,r.toDisplayString)((0,r.unref)(a)("å½“å‰ä½ç½®"))+": "+(0,r.toDisplayString)(C.value),1),(0,r.createElementVNode)("div",Pee,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(f.value.pois,e=>((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:e.id,class:(0,r.normalizeClass)(["poi-item",{active:e.id===f.value.viewer_poi_id,reachable:F(e.id)}]),onClick:t=>j(e.id),disabled:s.value||e.id===f.value.viewer_poi_id||!F(e.id)},[(0,r.createElementVNode)("span",$ee,(0,r.toDisplayString)(e.poi_key),1),(0,r.createElementVNode)("span",Oee,"#"+(0,r.toDisplayString)(e.id),1)],10,Ree))),128))])])])):((0,r.openBlock)(),(0,r.createElementBlock)("div",See,[(0,r.createVNode)((0,r.unref)(Lu),{size:48,class:"empty-icon"}),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(a)("è¯·å…ˆå‘èµ·ç©¿è¶Š")),1)]))])],2112)):"reports"===n.value?((0,r.openBlock)(),(0,r.createElementBlock)(r.Fragment,{key:2},[(0,r.createCommentVNode)(" æŠ¥å‘Šæ ‡ç­¾ "),(0,r.createElementVNode)("div",Lee,[(0,r.createElementVNode)("div",Fee,[(0,r.createElementVNode)("span",jee,(0,r.toDisplayString)((0,r.unref)(a)("æœ€è¿‘ 50 æ¡å…¥ä¾µæŠ¥å‘Š")),1),(0,r.createElementVNode)("button",{class:"action-btn sm",onClick:B,disabled:s.value},[(0,r.createVNode)((0,r.unref)(Yu.A),{size:14}),(0,r.createTextVNode)((0,r.toDisplayString)((0,r.unref)(a)("åˆ·æ–°")),1)],8,Uee)]),0===g.value.length?((0,r.openBlock)(),(0,r.createElementBlock)("div",qee,[(0,r.createVNode)((0,r.unref)(Zx.A),{size:48,class:"empty-icon"}),(0,r.createElementVNode)("p",null,(0,r.toDisplayString)((0,r.unref)(a)("æš‚æ— æŠ¥å‘Š")),1)])):((0,r.openBlock)(),(0,r.createElementBlock)("div",Gee,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(g.value,e=>((0,r.openBlock)(),(0,r.createElementBlock)("div",{key:e.id,class:"report-item"},[(0,r.createElementVNode)("span",{class:(0,r.normalizeClass)(["badge",e.unread?"unread":"read"])},(0,r.toDisplayString)(e.unread?(0,r.unref)(a)("æœªè¯»"):(0,r.unref)(a)("å·²è¯»")),3),(0,r.createElementVNode)("span",null,"world: "+(0,r.toDisplayString)(e.world_instance_id),1),(0,r.createElementVNode)("span",Hee,(0,r.toDisplayString)(e.created_at),1)]))),128))]))])],2112)):(0,r.createCommentVNode)("v-if",!0)])],64)):((0,r.openBlock)(),(0,r.createElementBlock)("div",S7,(0,r.toDisplayString)((0,r.unref)(a)("å½“å‰ä¸æ˜¯è”æœºå­˜æ¡£ï¼Œæ— æ³•ä½¿ç”¨ç©¿è¶ŠåŠŸèƒ½")),1)):((0,r.openBlock)(),(0,r.createElementBlock)("div",N7,(0,r.toDisplayString)((0,r.unref)(a)("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œè”æœº/ç©¿è¶Šä¸å¯ç”¨")),1))]))}});var Wee=n(329),Xee={};Xee.styleTagTransform=k(),Xee.setAttributes=v(),Xee.insert=g().bind(null,"head"),Xee.domAPI=p(),Xee.insertStyleElement=y(),u()(Wee.A,Xee),Wee.A&&Wee.A.locals&&Wee.A.locals;const Jee=(0,N.A)(Yee,[["__scopeId","data-v-28e21ad0"]]);var Kee=n(5342);const Qee={setup(){const e=(0,a.useRouter)(),t=()=>{e.push("/")},n=t=>{e.push("/game")};return()=>(0,r.h)(xy,{fullscreen:!0,onClose:t,onCharacterSelected:n})}},Zee=[{path:"/",name:"ModeSelection",component:te},{path:"/creation",name:"CharacterCreation",component:Bc},{path:"/login",name:"Login",component:fd},{path:"/workshop",name:"Workshop",component:Bu},{path:"/account",name:"AccountCenter",component:Wx},{path:"/prompts",name:"PromptsStandalone",component:y7},{path:"/game",name:"Game",component:Dx,children:[{path:"",name:"GameMain",component:rN},{path:"memory",name:"Memory",component:yV},{path:"character-details",name:"CharacterDetails",component:UB},{path:"inventory",name:"Inventory",component:vM},{path:"relationships",name:"Relationships",component:nO},{path:"techniques",name:"Techniques",component:bF},{path:"thousand-dao",name:"ThousandDao",component:Yj},{path:"settings",name:"Settings",component:Wj.A},{path:"save",name:"Save",component:Rq},{path:"world-map",name:"WorldMap",component:XZ},{path:"quests",name:"Quests",component:L0},{path:"sect",name:"Sect",component:o5,children:[{path:"",redirect:{name:"SectOverview"}},{path:"overview",name:"SectOverview",component:K2},{path:"members",name:"SectMembers",component:$5},{path:"missions",name:"SectMissions",component:x3},{path:"library",name:"SectLibrary",component:W3},{path:"contribution",name:"SectContribution",component:A4}]},{path:"game-variables",name:"GameVariables",component:L9},{path:"prompts",name:"Prompts",component:y7},{path:"travel",name:"Travel",component:Jee},{path:"api-management",name:"APIManagement",component:Kee.A}]},{path:"/management",name:"CharacterManagement",component:Qee}],ete=(0,a.createRouter)({history:(0,a.createMemoryHistory)(),routes:Zee})},3767:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.formatted-text[data-v-0adfeb24] {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  text-align: justify;\n  text-indent: 2em;\n  margin: 0;\n  line-height: 1.8;\n  padding-bottom: 1.5rem;\n}\n\n/* ç¯å¢ƒæå†™ - é’è‰² */\n.text-environment[data-v-0adfeb24] {\n  color: #0891b2;\n  font-weight: 500;\n}\n\n/* å¿ƒç†æå†™ - ç´«è‰² */\n.text-psychology[data-v-0adfeb24] {\n  color: #7c3aed;\n  font-style: italic;\n  font-weight: 500;\n}\n\n/* å¯¹è¯ - æ©™è‰² */\n.text-dialogue[data-v-0adfeb24] {\n  color: #d97706;\n  font-weight: 500;\n}\n\n/* å¼•ç”¨/ç‹¬ç™½ - æ©™è‰²æ–œä½“ */\n.text-quote[data-v-0adfeb24] {\n  color: rgb(254 125 0);\n  font-style: italic;\n}\n\n/* æ™®é€šæ–‡æœ¬ */\n.text-normal[data-v-0adfeb24] {\n  color: var(--color-text, #1a1a1a);\n}\n\n/* åˆ¤å®šå¡ç‰‡æ ·å¼ - é‡æ–°è®¾è®¡ */\n.judgement-card[data-v-0adfeb24] {\n  display: flex;\n  gap: 1rem;\n  margin: 1.25rem 0;\n  padding: 1.25rem;\n  background: linear-gradient(135deg, #fefefe 0%, #f8f9fa 100%);\n  border-radius: 16px;\n  border: 2px solid #e2e8f0;\n  box-shadow:\n    0 2px 8px rgba(0, 0, 0, 0.04),\n    0 4px 16px rgba(0, 0, 0, 0.02);\n  text-indent: 0;\n  position: relative;\n  overflow: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.judgement-card[data-v-0adfeb24]::before {\n  content: \'\';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: linear-gradient(90deg,\n    transparent 0%,\n    var(--card-color, #6366f1) 50%,\n    transparent 100%);\n}\n.judgement-card[data-v-0adfeb24]:hover {\n  transform: translateY(-2px);\n  box-shadow:\n    0 4px 12px rgba(0, 0, 0, 0.06),\n    0 8px 24px rgba(0, 0, 0, 0.04);\n}\n\n/* æˆåŠŸçŠ¶æ€ */\n.judgement-card.is-success[data-v-0adfeb24] {\n  border-color: #86efac;\n  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n  --card-color: #10b981;\n}\n.judgement-card.is-great-success[data-v-0adfeb24] {\n  border-color: #fbbf24;\n  background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);\n  --card-color: #f59e0b;\n  animation: pulse-success-0adfeb24 2s ease-in-out infinite;\n}\n\n/* å¤±è´¥çŠ¶æ€ */\n.judgement-card.is-failure[data-v-0adfeb24] {\n  border-color: #fca5a5;\n  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n  --card-color: #ef4444;\n}\n.judgement-card.is-great-failure[data-v-0adfeb24] {\n  border-color: #c084fc;\n  background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);\n  --card-color: #a855f7;\n  animation: pulse-failure-0adfeb24 2s ease-in-out infinite;\n}\n@keyframes pulse-success-0adfeb24 {\n0%, 100% { box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.4);\n}\n50% { box-shadow: 0 0 0 8px rgba(251, 191, 36, 0);\n}\n}\n@keyframes pulse-failure-0adfeb24 {\n0%, 100% { box-shadow: 0 0 0 0 rgba(168, 85, 247, 0.4);\n}\n50% { box-shadow: 0 0 0 8px rgba(168, 85, 247, 0);\n}\n}\n\n/* å›¾æ ‡åŒºåŸŸ */\n.card-icon[data-v-0adfeb24] {\n  flex-shrink: 0;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: white;\n  border-radius: 12px;\n  border: 2px solid var(--card-color, #6366f1);\n  color: var(--card-color, #6366f1);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n}\n\n/* å†…å®¹åŒºåŸŸ */\n.card-content[data-v-0adfeb24] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n\n/* æ ‡é¢˜è¡Œ */\n.card-header[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.75rem;\n}\n.judgement-title[data-v-0adfeb24] {\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: #0f172a;\n  letter-spacing: -0.01em;\n  text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);\n  opacity: 1;\n}\n.judgement-badge[data-v-0adfeb24] {\n  display: inline-flex;\n  align-items: center;\n  padding: 0.375rem 0.875rem;\n  background: var(--card-color, #6366f1);\n  color: white;\n  border-radius: 20px;\n  font-size: 0.875rem;\n  font-weight: 600;\n  letter-spacing: 0.02em;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  opacity: 1;\n}\n\n/* ç»Ÿè®¡ä¿¡æ¯è¡Œ */\n.card-body[data-v-0adfeb24] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n}\n.stat-item[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.875rem;\n  background: white;\n  border-radius: 10px;\n  border: 1px solid #e2e8f0;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);\n  min-width: fit-content;\n}\n.difficulty-item[data-v-0adfeb24] {\n  min-width: 120px;\n}\n.details-list[data-v-0adfeb24] {\n  width: 100%;\n  margin-top: 0.5rem;\n  padding-top: 0.5rem;\n  border-top: 1px solid #e2e8f0;\n}\n.detail-item[data-v-0adfeb24] {\n  font-size: 0.875rem;\n  color: #64748b;\n  padding: 0.25rem 0;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.detail-item[data-v-0adfeb24]::before {\n  content: \'â€¢\';\n  color: #94a3b8;\n}\n.detail-label[data-v-0adfeb24] {\n  font-weight: 600;\n  color: #475569;\n}\n.detail-value[data-v-0adfeb24] {\n  font-weight: 700;\n  color: #1e293b;\n  min-width: 2rem;\n}\n.detail-source[data-v-0adfeb24] {\n  font-size: 0.75rem;\n  color: #94a3b8;\n  font-style: italic;\n}\n.stat-icon[data-v-0adfeb24] {\n  font-size: 1.375rem;\n  line-height: 1;\n}\n.stat-info[data-v-0adfeb24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.125rem;\n}\n.stat-label[data-v-0adfeb24] {\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: #64748b;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n.stat-value[data-v-0adfeb24] {\n  font-size: 1.125rem;\n  font-weight: 700;\n  color: #1e293b;\n}\n.dice-roll[data-v-0adfeb24], .attribute-check[data-v-0adfeb24] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0.75rem;\n  background: var(--color-surface-light, #ebe9e6);\n  border-radius: 8px;\n  border: 1px solid var(--color-border, rgba(0, 0, 0, 0.1));\n  transition: all 0.2s ease;\n  text-align: center;\n}\n.dice-roll[data-v-0adfeb24]:hover, .attribute-check[data-v-0adfeb24]:hover {\n  background: var(--color-surface, #f2f1ee);\n  transform: translateY(-1px);\n}\n.dice-roll .label[data-v-0adfeb24], .attribute-check .label[data-v-0adfeb24] {\n  font-size: 0.8em;\n  color: var(--color-text-secondary, #666666);\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n  margin-bottom: 0.25rem;\n  font-weight: 500;\n}\n.dice-roll .value[data-v-0adfeb24], .attribute-check .value[data-v-0adfeb24] {\n  font-size: 1.4em;\n  font-weight: 700;\n  color: var(--color-text, #1a1a1a);\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.dice-roll .value[data-v-0adfeb24] {\n  color: #6366f1;\n  background: linear-gradient(135deg, #6366f1, #8b5cf6);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é… */\n[data-theme="dark"] .text-normal[data-v-0adfeb24] {\n  color: var(--color-text, #f7f7f5);\n}\n[data-theme="dark"] .text-environment[data-v-0adfeb24] {\n  color: #22d3ee;\n}\n[data-theme="dark"] .text-psychology[data-v-0adfeb24] {\n  color: #a78bfa;\n}\n[data-theme="dark"] .text-dialogue[data-v-0adfeb24] {\n  color: #fb923c;\n}\n[data-theme="dark"] .text-quote[data-v-0adfeb24] {\n  color: rgb(254 125 0);\n}\n[data-theme="dark"] .judgement-card[data-v-0adfeb24] {\n  background: linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, var(--color-background, rgb(30, 41, 59)) 100%);\n  border-color: var(--color-border, rgba(173, 216, 230, 0.5));\n}\n[data-theme="dark"] .card-header[data-v-0adfeb24] {\n  color: var(--color-text, #f7f7f5);\n}\n[data-theme="dark"] .result-text[data-v-0adfeb24],\n[data-theme="dark"] .dice-roll[data-v-0adfeb24],\n[data-theme="dark"] .attribute-check[data-v-0adfeb24] {\n  background: var(--color-surface-light, #414868);\n  border-color: var(--color-border, rgba(173, 216, 230, 0.5));\n}\n[data-theme="dark"] .dice-roll .label[data-v-0adfeb24],\n[data-theme="dark"] .attribute-check .label[data-v-0adfeb24] {\n  color: var(--color-text-secondary, #d0d0d0);\n}\n[data-theme="dark"] .dice-roll .value[data-v-0adfeb24],\n[data-theme="dark"] .attribute-check .value[data-v-0adfeb24] {\n  color: var(--color-text, #f7f7f5);\n}\n.header-right[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.help-btn[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  padding: 0;\n  background: rgba(255, 255, 255, 0.8);\n  border: 1px solid #e2e8f0;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: #64748b;\n}\n.help-btn[data-v-0adfeb24]:hover {\n  background: white;\n  border-color: var(--card-color, #6366f1);\n  color: var(--card-color, #6366f1);\n  transform: scale(1.1);\n}\n.help-btn[data-v-0adfeb24]:active {\n  transform: scale(0.95);\n}\n\n/* å¸®åŠ©å¼¹çª— */\n.help-modal-overlay[data-v-0adfeb24] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  animation: fadeIn-0adfeb24 0.2s ease;\n}\n@keyframes fadeIn-0adfeb24 {\nfrom { opacity: 0;\n}\nto { opacity: 1;\n}\n}\n.help-modal[data-v-0adfeb24] {\n  background: var(--color-surface);\n  color: var(--color-text);\n  border-radius: 16px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  max-width: 600px;\n  width: 90%;\n  max-height: 80vh;\n  overflow: hidden;\n  animation: slideUp-0adfeb24 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n}\n@keyframes slideUp-0adfeb24 {\nfrom {\n    opacity: 0;\n    transform: translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.help-modal-header[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1.5rem;\n  border-bottom: 1px solid #e2e8f0;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n}\n.help-modal-header h3[data-v-0adfeb24] {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-text);\n}\n.close-btn[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  padding: 0;\n  background: white;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: #64748b;\n}\n.close-btn[data-v-0adfeb24]:hover {\n  background: #fee2e2;\n  border-color: #ef4444;\n  color: #ef4444;\n}\n.help-modal-content[data-v-0adfeb24] {\n  padding: 1.5rem;\n  overflow-y: auto;\n  max-height: calc(80vh - 80px);\n}\n.help-section[data-v-0adfeb24] {\n  margin-bottom: 1.5rem;\n}\n.help-section[data-v-0adfeb24]:last-child {\n  margin-bottom: 0;\n}\n.help-section h4[data-v-0adfeb24] {\n  margin: 0 0 0.75rem 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.help-section ol[data-v-0adfeb24] {\n  margin: 0;\n  padding-left: 1.5rem;\n  color: var(--color-text-secondary);\n  line-height: 1.8;\n}\n.help-section ol li[data-v-0adfeb24] {\n  margin-bottom: 0.5rem;\n}\n.help-section ol li strong[data-v-0adfeb24] {\n  color: var(--color-text);\n  font-weight: 600;\n}\n.formula-box[data-v-0adfeb24] {\n  padding: 1rem;\n  background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\n  border-left: 4px solid #f59e0b;\n  border-radius: 8px;\n  margin-bottom: 0.75rem;\n  font-size: 0.875rem;\n  line-height: 1.6;\n  color: #78350f;\n}\n.formula-box strong[data-v-0adfeb24] {\n  color: #92400e;\n  font-weight: 700;\n}\n.result-list[data-v-0adfeb24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.result-item[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem 1rem;\n  border-radius: 10px;\n  border: 1px solid;\n  gap: 1rem;\n}\n.result-item.perfect[data-v-0adfeb24] {\n  background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);\n  border-color: #fbbf24;\n}\n.result-item.great-success[data-v-0adfeb24] {\n  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);\n  border-color: #86efac;\n}\n.result-item.success[data-v-0adfeb24] {\n  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n  border-color: #93c5fd;\n}\n.result-item.failure[data-v-0adfeb24] {\n  background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);\n  border-color: #fca5a5;\n}\n.result-item.critical-failure[data-v-0adfeb24] {\n  background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);\n  border-color: #c084fc;\n}\n.result-label[data-v-0adfeb24] {\n  font-weight: 700;\n  font-size: 0.875rem;\n  min-width: 60px;\n  opacity: 1;\n}\n.result-desc[data-v-0adfeb24] {\n  font-size: 0.875rem;\n  flex: 1;\n  opacity: 1;\n}\n\n/* -- ä¸ºä¸åŒç»“æœç±»å‹è®¾ç½®æ–‡å­—é¢œè‰² -- */\n\n/* å®Œç¾ */\n.result-item.perfect .result-label[data-v-0adfeb24],\n.result-item.perfect .result-desc[data-v-0adfeb24] {\n  color: #92400e;\n}\n\n/* å¤§æˆåŠŸ */\n.result-item.great-success .result-label[data-v-0adfeb24],\n.result-item.great-success .result-desc[data-v-0adfeb24] {\n  color: #14532d;\n}\n\n/* æˆåŠŸ */\n.result-item.success .result-label[data-v-0adfeb24],\n.result-item.success .result-desc[data-v-0adfeb24] {\n  color: #1e40af;\n}\n\n/* å¤±è´¥ */\n.result-item.failure .result-label[data-v-0adfeb24],\n.result-item.failure .result-desc[data-v-0adfeb24] {\n  color: #991b1b;\n}\n\n/* å¤§å¤±è´¥ */\n.result-item.critical-failure .result-label[data-v-0adfeb24],\n.result-item.critical-failure .result-desc[data-v-0adfeb24] {\n  color: #581c87;\n}\n.formula-note[data-v-0adfeb24] {\n  padding: 0.75rem 1rem;\n  background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);\n  border-left: 4px solid #3b82f6;\n  border-radius: 8px;\n  margin-bottom: 0.75rem;\n  font-size: 0.875rem;\n  line-height: 1.6;\n  color: #1e40af;\n}\n.formula-note strong[data-v-0adfeb24] {\n  color: #1e3a8a;\n  font-weight: 700;\n}\n.tips-list[data-v-0adfeb24] {\n  margin: 0;\n  padding-left: 1.25rem;\n  color: #475569;\n  line-height: 1.8;\n}\n.tips-list li[data-v-0adfeb24] {\n  margin-bottom: 0.5rem;\n}\n.judgement-types[data-v-0adfeb24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.type-item[data-v-0adfeb24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  padding: 0.75rem;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border-radius: 8px;\n  border: 1px solid #e2e8f0;\n}\n.type-name[data-v-0adfeb24] {\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: #1e293b;\n}\n.type-attrs[data-v-0adfeb24] {\n  font-size: 0.8125rem;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n}\n.attributes-desc[data-v-0adfeb24] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n  gap: 0.75rem;\n}\n.attr-card[data-v-0adfeb24] {\n  padding: 0.75rem;\n  background: linear-gradient(135deg, #fefefe 0%, #f8fafc 100%);\n  border-radius: 10px;\n  border: 1px solid #e2e8f0;\n}\n.attr-header[data-v-0adfeb24] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.attr-icon[data-v-0adfeb24] {\n  font-size: 1.25rem;\n}\n.attr-name[data-v-0adfeb24] {\n  font-weight: 600;\n  font-size: 0.875rem;\n  color: #1e293b;\n}\n.attr-card p[data-v-0adfeb24] {\n  margin: 0;\n  font-size: 0.8125rem;\n  color: var(--color-text-secondary);\n  line-height: 1.6;\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é… */\n[data-theme="dark"] .help-modal[data-v-0adfeb24] {\n  background: var(--color-surface, #1e293b);\n  color: var(--color-text, #f7f7f5);\n}\n[data-theme="dark"] .help-modal-header[data-v-0adfeb24] {\n  background: rgba(255, 255, 255, 0.05);\n  border-bottom-color: var(--color-border, rgba(255, 255, 255, 0.1));\n}\n[data-theme="dark"] .help-modal-header h3[data-v-0adfeb24],\n[data-theme="dark"] .help-section h4[data-v-0adfeb24] {\n  color: var(--color-text, #f7f7f5);\n}\n[data-theme="dark"] .help-section ol[data-v-0adfeb24],\n[data-theme="dark"] .tips-list[data-v-0adfeb24] {\n  color: var(--color-text-secondary, #94a3b8);\n}\n\n/* -- æ·±è‰²ä¸»é¢˜ä¸‹çš„ç»“æœæ–‡å­—é¢œè‰² -- */\n[data-theme="dark"] .result-item.perfect .result-label[data-v-0adfeb24],\n[data-theme="dark"] .result-item.perfect .result-desc[data-v-0adfeb24] {\n  color: #fcd34d;\n}\n[data-theme="dark"] .result-item.great-success .result-label[data-v-0adfeb24],\n[data-theme="dark"] .result-item.great-success .result-desc[data-v-0adfeb24] {\n  color: #86efac;\n}\n[data-theme="dark"] .result-item.success .result-label[data-v-0adfeb24],\n[data-theme="dark"] .result-item.success .result-desc[data-v-0adfeb24] {\n  color: #93c5fd;\n}\n[data-theme="dark"] .result-item.failure .result-label[data-v-0adfeb24],\n[data-theme="dark"] .result-item.failure .result-desc[data-v-0adfeb24] {\n  color: #fca5a5;\n}\n[data-theme="dark"] .result-item.critical-failure .result-label[data-v-0adfeb24],\n[data-theme="dark"] .result-item.critical-failure .result-desc[data-v-0adfeb24] {\n  color: #d8b4fe;\n}\n[data-theme="dark"] .close-btn[data-v-0adfeb24] {\n  background: rgba(255, 255, 255, 0.05);\n  border-color: var(--color-border, rgba(255, 255, 255, 0.1));\n  color: var(--color-text-secondary, #94a3b8);\n}\n[data-theme="dark"] .close-btn[data-v-0adfeb24]:hover {\n  background: rgba(239, 68, 68, 0.2);\n  border-color: #ef4444;\n}\n[data-theme="dark"] .help-btn[data-v-0adfeb24] {\n  background: rgba(255, 255, 255, 0.05);\n  border-color: var(--color-border, rgba(255, 255, 255, 0.1));\n  color: var(--color-text-secondary, #94a3b8);\n}\n[data-theme="dark"] .help-btn[data-v-0adfeb24]:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: var(--card-color, #6366f1);\n  color: var(--card-color, #6366f1);\n}\n[data-theme="dark"] .type-item[data-v-0adfeb24] {\n  background: rgba(255, 255, 255, 0.03);\n  border-color: var(--color-border, rgba(255, 255, 255, 0.1));\n}\n[data-theme="dark"] .type-name[data-v-0adfeb24] {\n  color: var(--color-text, #f7f7f5);\n}\n[data-theme="dark"] .type-attrs[data-v-0adfeb24] {\n  color: var(--color-text-secondary, #94a3b8);\n}\n[data-theme="dark"] .attr-card[data-v-0adfeb24] {\n  background: rgba(255, 255, 255, 0.03);\n  border-color: var(--color-border, rgba(255, 255, 255, 0.1));\n}\n[data-theme="dark"] .attr-name[data-v-0adfeb24] {\n  color: var(--color-text, #f7f7f5);\n}\n[data-theme="dark"] .attr-card p[data-v-0adfeb24] {\n  color: var(--color-text-secondary, #94a3b8);\n}\n[data-theme="dark"] .formula-box[data-v-0adfeb24] {\n  background: linear-gradient(135deg, rgba(251, 191, 36, 0.15) 0%, rgba(245, 158, 11, 0.1) 100%);\n  border-left-color: #f59e0b;\n  color: #fbbf24;\n}\n[data-theme="dark"] .formula-box strong[data-v-0adfeb24] {\n  color: #fcd34d;\n}\n[data-theme="dark"] .detail-label[data-v-0adfeb24] {\n  color: #94a3b8;\n}\n[data-theme="dark"] .detail-value[data-v-0adfeb24] {\n  color: #f1f5f9;\n}\n[data-theme="dark"] .detail-source[data-v-0adfeb24] {\n  color: #64748b;\n}\n',""]);const s=i},3803:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.talent-selection-container[data-v-4582482f] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n.loading-state[data-v-4582482f], .error-state[data-v-4582482f], .placeholder[data-v-4582482f] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  font-size: 1.1rem;\n  color: #94a3b8;\n  font-style: italic;\n}\n.talent-layout[data-v-4582482f] {\n  display: grid;\n  grid-template-columns: 1fr 2fr;\n  gap: 1.5rem;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* ========== å·¦ä¾§é¢æ¿ ========== */\n.talent-left-panel[data-v-4582482f] {\n  display: flex;\n  flex-direction: column;\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n/* é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® - æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ */\n.top-actions-container[data-v-4582482f] {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  border-bottom: 1px solid rgba(147, 197, 253, 0.15);\n  background: rgba(30, 41, 59, 0.3);\n  justify-content: flex-end;\n}\n.top-actions-container .action-item[data-v-4582482f] {\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  border-radius: 6px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #93c5fd;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  font-size: 0.9rem;\n  white-space: nowrap;\n}\n.top-actions-container .action-item[data-v-4582482f]:hover {\n  background: rgba(59, 130, 246, 0.2);\n  border-color: #93c5fd;\n  color: #bfdbfe;\n}\n\n/* äº®è‰²ä¸»é¢˜é¡¶éƒ¨æŒ‰é’® */\n[data-theme="light"] .top-actions-container[data-v-4582482f] {\n  background: rgba(241, 245, 249, 0.6);\n  border-bottom-color: rgba(59, 130, 246, 0.15);\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-4582482f] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #2563eb;\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-4582482f]:hover {\n  background: rgba(59, 130, 246, 0.1);\n  border-color: #3b82f6;\n  color: #1e40af;\n}\n.talent-list-container[data-v-4582482f] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.talent-list-container[data-v-4582482f]::-webkit-scrollbar { width: 6px;\n}\n.talent-list-container[data-v-4582482f]::-webkit-scrollbar-track { background: transparent;\n}\n.talent-list-container[data-v-4582482f]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.talent-list-container[data-v-4582482f]::-webkit-scrollbar-thumb:hover { background: rgba(147, 197, 253, 0.5);\n}\n\n/* ========== é€‰é¡¹å¡æ ·å¼ ========== */\n.talent-item[data-v-4582482f] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.9rem 1rem;\n  margin-bottom: 0.5rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  border: 1px solid transparent;\n  background: rgba(30, 41, 59, 0.4);\n}\n.item-content[data-v-4582482f] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  gap: 0.5rem;\n}\n.talent-cost[data-v-4582482f] {\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  white-space: nowrap;\n  flex-shrink: 0;\n}\n\n/* æŒ‰é’®ç»„å®¹å™¨ */\n.action-buttons[data-v-4582482f] {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  opacity: 0;\n  transition: opacity 0.2s;\n  margin-left: 0.5rem;\n}\n.talent-item:hover .action-buttons[data-v-4582482f] {\n  opacity: 1;\n}\n.edit-btn[data-v-4582482f], .delete-btn[data-v-4582482f] {\n  background: none;\n  border: none;\n  color: #64748b;\n  cursor: pointer;\n  padding: 0.35rem;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.edit-btn[data-v-4582482f]:hover {\n  color: #93c5fd;\n  background: rgba(147, 197, 253, 0.1);\n}\n.delete-btn[data-v-4582482f]:hover {\n  color: #f87171;\n  background: rgba(248, 113, 113, 0.1);\n}\n.talent-item[data-v-4582482f]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(147, 197, 253, 0.2);\n}\n.talent-item.selected[data-v-4582482f] {\n  background: rgba(30, 58, 138, 0.4);\n  border-color: rgba(147, 197, 253, 0.4);\n  box-shadow: 0 0 0 1px rgba(147, 197, 253, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.talent-name[data-v-4582482f] {\n  font-weight: 500;\n  color: #f1f5f9;\n}\n.talent-item.selected .talent-name[data-v-4582482f] {\n  color: #bfdbfe;\n}\n.single-actions-container[data-v-4582482f] {\n  border-top: 1px solid var(--color-border);\n  background: rgba(0, 0, 0, 0.3);\n  padding: 0.5rem;\n  display: flex;\n  gap: 0.5rem;\n}\n.action-item[data-v-4582482f] {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.8rem 1rem;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  font-size: 1rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n.action-item[data-v-4582482f]:hover {\n  background: var(--color-surface-lighter);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.action-name[data-v-4582482f] {\n  font-weight: 500;\n}\n\n/* ========== å³ä¾§è¯¦æƒ…é¢æ¿ ========== */\n.talent-details-container[data-v-4582482f] {\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.talent-details[data-v-4582482f] {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n.talent-details h2[data-v-4582482f] {\n  margin: 0 0 1rem 0;\n  color: #93c5fd;\n  flex-shrink: 0;\n  font-size: 1.5rem;\n  text-shadow: 0 0 20px rgba(147, 197, 253, 0.3);\n}\n.description-scroll[data-v-4582482f] {\n  flex: 1;\n  overflow-y: auto;\n  line-height: 1.7;\n  margin-bottom: 1rem;\n  padding-right: 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.description-scroll p[data-v-4582482f] {\n  margin: 0;\n  white-space: pre-wrap;\n  color: #94a3b8;\n}\n.description-scroll[data-v-4582482f]::-webkit-scrollbar { width: 6px;\n}\n.description-scroll[data-v-4582482f]::-webkit-scrollbar-track { background: transparent;\n}\n.description-scroll[data-v-4582482f]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n\n/* å“åº”å¼é€‚é… - æ‰‹æœºç«¯ä¼˜åŒ– */\n@media (max-width: 1200px) {\n.talent-layout[data-v-4582482f] {\n    grid-template-columns: 1fr 1.8fr;\n    gap: 1.5rem;\n}\n}\n@media (max-width: 1024px) {\n.talent-layout[data-v-4582482f] {\n    grid-template-columns: 1fr 1.5fr;\n    gap: 1.2rem;\n}\n.talent-details h2[data-v-4582482f] {\n    font-size: 1.6rem;\n}\n}\n@media (max-width: 640px) {\n.top-actions-container[data-v-4582482f] {\n    flex-wrap: wrap;\n    justify-content: stretch;\n}\n.top-actions-container .action-item[data-v-4582482f] {\n    flex-grow: 1;\n    text-align: center;\n}\n.talent-layout[data-v-4582482f] {\n    /* æ”¹ä¸ºå‚ç›´å †å å¸ƒå±€ */\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr;\n    gap: 1rem;\n    height: auto;\n    overflow: visible;\n    padding: 0.8rem;\n}\n.talent-left-panel[data-v-4582482f] {\n    order: 1;\n    max-height: 40vh;\n}\n.talent-details-container[data-v-4582482f] {\n    order: 2;\n    min-height: 300px;\n}\n.talent-list-container[data-v-4582482f] {\n    max-height: 35vh;\n    /* æ·»åŠ è§¦æ‘¸æ»šåŠ¨ä¼˜åŒ– */\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: thin;\n}\n  \n  /* ä¼˜åŒ–è§¦æ‘¸ä½“éªŒ */\n.talent-item[data-v-4582482f],\n  .action-item[data-v-4582482f] {\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n}\n}\n@media (max-width: 640px) {\n.talent-layout[data-v-4582482f] {\n    gap: 0.8rem;\n    padding: 0.6rem;\n}\n.talent-left-panel[data-v-4582482f] {\n    max-height: 35vh;\n}\n.talent-list-container[data-v-4582482f] {\n    max-height: 30vh;\n    padding: 0.5rem;\n}\n.talent-item[data-v-4582482f] {\n    padding: 0.7rem;\n    font-size: 0.95rem;\n    margin-bottom: 0.4rem;\n}\n.single-actions-container[data-v-4582482f] {\n    padding: 0.5rem;\n    gap: 0.4rem;\n}\n.action-item[data-v-4582482f] {\n    padding: 0.7rem 1rem;\n    font-size: 0.9rem;\n}\n.talent-details-container[data-v-4582482f] {\n    padding: 1.2rem;\n    min-height: 250px;\n}\n.talent-details h2[data-v-4582482f] {\n    font-size: 1.4rem;\n    margin-bottom: 0.8rem;\n}\n}\n@media (max-width: 480px) {\n.top-actions-container[data-v-4582482f] {\n    flex-direction: column;\n    align-items: stretch;\n}\n.talent-selection-container[data-v-4582482f] {\n    padding: 0.4rem;\n    height: auto;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n}\n.talent-layout[data-v-4582482f] {\n    gap: 0.6rem;\n    padding: 0;\n    height: auto;\n    min-height: 0;\n}\n.talent-left-panel[data-v-4582482f] {\n    max-height: none;\n    border-radius: 6px;\n}\n.talent-list-container[data-v-4582482f] {\n    max-height: 26vh;\n    padding: 0.4rem;\n}\n.talent-item[data-v-4582482f] {\n    padding: 0.6rem 0.8rem;\n    font-size: 0.9rem;\n    margin-bottom: 0.3rem;\n    border-radius: 4px;\n}\n.talent-name[data-v-4582482f] {\n    font-size: 0.9rem;\n}\n.single-actions-container[data-v-4582482f] {\n    flex-direction: column;\n    gap: 0.4rem;\n    padding: 0.4rem;\n}\n.action-item[data-v-4582482f] {\n    padding: 0.6rem;\n    font-size: 0.85rem;\n    border-radius: 4px;\n}\n.talent-details-container[data-v-4582482f] {\n    padding: 1rem;\n    min-height: 200px;\n    border-radius: 6px;\n}\n.talent-details h2[data-v-4582482f] {\n    font-size: 1.3rem;\n    margin-bottom: 0.6rem;\n}\n.description-scroll[data-v-4582482f] {\n    font-size: 0.9rem;\n    line-height: 1.5;\n    padding-right: 0.3rem;\n}\n.placeholder[data-v-4582482f] {\n    font-size: 1rem;\n    padding: 1rem;\n    text-align: center;\n    min-height: 150px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.top-actions-container[data-v-4582482f] {\n    flex-direction: column;\n    align-items: stretch;\n    padding: 0.5rem;\n}\n.top-actions-container .action-item[data-v-4582482f] {\n    text-align: center;\n}\n}\n@media (max-width: 360px) {\n.talent-selection-container[data-v-4582482f] {\n    padding: 0.3rem;\n}\n.talent-layout[data-v-4582482f] {\n    gap: 0.4rem;\n}\n.talent-left-panel[data-v-4582482f] {\n    max-height: 28vh;\n}\n.talent-list-container[data-v-4582482f] {\n    max-height: 24vh;\n    padding: 0.3rem;\n}\n.talent-item[data-v-4582482f] {\n    padding: 0.5rem 0.6rem;\n    font-size: 0.85rem;\n    margin-bottom: 0.2rem;\n}\n.talent-name[data-v-4582482f] {\n    font-size: 0.8rem;\n}\n.talent-details-container[data-v-4582482f] {\n    padding: 0.8rem;\n    min-height: 180px;\n}\n.talent-details h2[data-v-4582482f] {\n    font-size: 1.1rem;\n    margin-bottom: 0.5rem;\n}\n.description-scroll[data-v-4582482f] {\n    font-size: 0.85rem;\n    line-height: 1.4;\n}\n.action-item[data-v-4582482f] {\n    padding: 0.5rem;\n    font-size: 0.8rem;\n}\n.placeholder[data-v-4582482f] {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n    min-height: 120px;\n}\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .talent-left-panel[data-v-4582482f],\n[data-theme="light"] .talent-details-container[data-v-4582482f] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .talent-item[data-v-4582482f] {\n  background: rgba(255, 255, 255, 0.6);\n}\n[data-theme="light"] .talent-item[data-v-4582482f]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .talent-item.selected[data-v-4582482f] {\n  background: rgba(219, 234, 254, 0.8);\n  border-color: rgba(59, 130, 246, 0.4);\n}\n[data-theme="light"] .talent-name[data-v-4582482f] {\n  color: #1e293b;\n}\n[data-theme="light"] .talent-item.selected .talent-name[data-v-4582482f] {\n  color: #1e40af;\n}\n[data-theme="light"] .talent-details h2[data-v-4582482f] {\n  color: #2563eb;\n}\n[data-theme="light"] .description-scroll p[data-v-4582482f] {\n  color: #475569;\n}\n',""]);const s=i},3943:(e,t,n)=>{"use strict";n.d(t,{E0:()=>l,QS:()=>o,UZ:()=>d,wG:()=>u});var a=n(2224);function r(e){const t=e.åˆ†é’Ÿ??0;return 365*e.å¹´*24*60+30*e.æœˆ*24*60+24*e.æ—¥*60+60*e.å°æ—¶+t}function o(e){if(e<=0)return"å·²è¿‡æœŸ";if(e>=99999)return"æ°¸ä¹…";const t=Math.floor(e/525600),n=Math.floor(e%525600/43200),a=Math.floor(e%43200/1440),r=Math.floor(e%1440/60),o=e%60,i=[];return t>0&&i.push(`${t}å¹´`),n>0&&i.push(`${n}æœˆ`),a>0&&i.push(`${a}å¤©`),r>0&&i.push(`${r}å°æ—¶`),o>0&&i.push(`${o}åˆ†é’Ÿ`),i.length>0?i.join(""):"ä¸è¶³1åˆ†é’Ÿ"}function i(e){if(!e||"string"!=typeof e)return 0;let t=0;const n=e.match(/(\d+)å¹´/);n&&(t+=365*parseInt(n[1])*24*60);const a=e.match(/(\d+)æœˆ/);a&&(t+=30*parseInt(a[1])*24*60);const r=e.match(/(\d+)å¤©/);r&&(t+=24*parseInt(r[1])*60);const o=e.match(/(\d+)å°æ—¶/);o&&(t+=60*parseInt(o[1]));const i=e.match(/(\d+)åˆ†é’Ÿ/);return i&&(t+=parseInt(i[1])),t}function s(e,t){if(e.ç”Ÿæˆæ—¶é—´&&"number"==typeof e.æŒç»­æ—¶é—´åˆ†é’Ÿ){if(e.æŒç»­æ—¶é—´åˆ†é’Ÿ<0||e.æŒç»­æ—¶é—´åˆ†é’Ÿ>=99999)return!1;const n=r(e.ç”Ÿæˆæ—¶é—´);return r(t)-n>=e.æŒç»­æ—¶é—´åˆ†é’Ÿ}return!(!e.æ—¶é—´||!e.å‰©ä½™æ—¶é—´)&&i(e.å‰©ä½™æ—¶é—´)<=0}function l(e,t){if(e.ç”Ÿæˆæ—¶é—´&&"number"==typeof e.æŒç»­æ—¶é—´åˆ†é’Ÿ){if(e.æŒç»­æ—¶é—´åˆ†é’Ÿ<0||e.æŒç»­æ—¶é—´åˆ†é’Ÿ>=99999)return 99999;const n=r(e.ç”Ÿæˆæ—¶é—´),a=r(t)-n,o=e.æŒç»­æ—¶é—´åˆ†é’Ÿ-a;return Math.max(0,o)}return 60}function c(e,t){try{if(!e||"object"!=typeof e)return console.warn("[çŠ¶æ€æ•ˆæœ] æ— æ•ˆçš„çŠ¶æ€æ•ˆæœæ•°æ®:",e),null;if(e.ç”Ÿæˆæ—¶é—´&&"number"==typeof e.æŒç»­æ—¶é—´åˆ†é’Ÿ)return e;const n={çŠ¶æ€åç§°:e.çŠ¶æ€åç§°||e.name||"æœªçŸ¥çŠ¶æ€",ç±»å‹:e.ç±»å‹||e.type||"buff",ç”Ÿæˆæ—¶é—´:{å¹´:t.å¹´,æœˆ:t.æœˆ,æ—¥:t.æ—¥,å°æ—¶:t.å°æ—¶||0,åˆ†é’Ÿ:t.åˆ†é’Ÿ??0},æŒç»­æ—¶é—´åˆ†é’Ÿ:0,çŠ¶æ€æè¿°:e.çŠ¶æ€æè¿°||e.description||"æ— æè¿°",å¼ºåº¦:e.å¼ºåº¦||e.intensity,æ¥æº:e.æ¥æº||e.source};return e.å‰©ä½™æ—¶é—´?n.æŒç»­æ—¶é—´åˆ†é’Ÿ=i(e.å‰©ä½™æ—¶é—´):e.duration?n.æŒç»­æ—¶é—´åˆ†é’Ÿ=i(e.duration):n.æŒç»­æ—¶é—´åˆ†é’Ÿ=60,n}catch(e){return console.error("[çŠ¶æ€æ•ˆæœ] è§„èŒƒåŒ–çŠ¶æ€æ•ˆæœå¤±è´¥:",e),null}}function d(e){const t=[];try{const n=(0,a.get)(e,"è§’è‰².æ•ˆæœ",(0,a.get)(e,"æ•ˆæœ",[]));if(!Array.isArray(n)||0===n.length)return{removedEffects:t};const r=e.å…ƒæ•°æ®?.æ—¶é—´??e.æ—¶é—´;if(!r)return console.warn("[çŠ¶æ€æ•ˆæœ] æ—¶é—´ä¸å­˜åœ¨ï¼Œæ— æ³•æ›´æ–°çŠ¶æ€æ•ˆæœ"),{removedEffects:t};const o=[];for(const e of n){if(!e||"object"!=typeof e){console.warn("[çŠ¶æ€æ•ˆæœ] è·³è¿‡æ— æ•ˆçš„çŠ¶æ€æ•ˆæœ:",e);continue}const n=c(e,r);n?s(n,r)?(console.log(`[çŠ¶æ€æ•ˆæœ] çŠ¶æ€æ•ˆæœ"${n.çŠ¶æ€åç§°}"å·²è¿‡æœŸï¼Œå°†è¢«ç§»é™¤`),t.push(n.çŠ¶æ€åç§°)):o.push(n):console.warn("[çŠ¶æ€æ•ˆæœ] è·³è¿‡æ— æ³•è§„èŒƒåŒ–çš„çŠ¶æ€æ•ˆæœ:",e)}return t.length>0&&(e.è§’è‰²||(e.è§’è‰²={}),(0,a.set)(e,"è§’è‰².æ•ˆæœ",o)),{removedEffects:t}}catch(e){return console.error("[çŠ¶æ€æ•ˆæœ] æ›´æ–°çŠ¶æ€æ•ˆæœå¤±è´¥:",e),{removedEffects:t}}}function u(e,t){try{const n=(0,a.get)(e,"è§’è‰².æ•ˆæœ",(0,a.get)(e,"æ•ˆæœ",[])),r=n.length;console.log("[çŠ¶æ€æ•ˆæœ-è°ƒè¯•] å°è¯•ç§»é™¤:",t),console.log("[çŠ¶æ€æ•ˆæœ-è°ƒè¯•] å½“å‰çŠ¶æ€æ•ˆæœåˆ—è¡¨:",n.map(e=>e.çŠ¶æ€åç§°||e.name||"æœªçŸ¥"));const o=n.filter(e=>(e.çŠ¶æ€åç§°||e.name)!==t);e.è§’è‰²||(e.è§’è‰²={}),(0,a.set)(e,"è§’è‰².æ•ˆæœ",o);const i=r>o.length;return console.log("[çŠ¶æ€æ•ˆæœ-è°ƒè¯•] ç§»é™¤ç»“æœ:",i?"æˆåŠŸ":"å¤±è´¥",`(${r} -> ${o.length})`),i}catch(e){return console.error("[çŠ¶æ€æ•ˆæœ] ç§»é™¤çŠ¶æ€æ•ˆæœå¤±è´¥:",e),!1}}},3992:e=>{"use strict";e.exports=VueRouter},4039:(e,t,n)=>{"use strict";var a="undefined"!=typeof Symbol&&Symbol,r=n(1333);e.exports=function(){return"function"==typeof a&&"function"==typeof Symbol&&"symbol"==typeof a("foo")&&"symbol"==typeof Symbol("bar")&&r()}},4061:e=>{"use strict";e.exports=Vue},4091:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},4127:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.spirit-root-selection-container[data-v-6c1f24fe] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n.loading-state[data-v-6c1f24fe], .error-state[data-v-6c1f24fe], .placeholder[data-v-6c1f24fe] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  font-size: 1.1rem;\n  color: #94a3b8;\n  font-style: italic;\n}\n.spirit-root-layout[data-v-6c1f24fe] {\n  display: grid;\n  grid-template-columns: 1fr 2fr;\n  gap: 1.5rem;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* ========== å·¦ä¾§é¢æ¿ ========== */\n.spirit-root-left-panel[data-v-6c1f24fe] {\n  display: flex;\n  flex-direction: column;\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n/* é¢„è®¾æ¨¡å¼æ ·å¼ */\n.preset-mode[data-v-6c1f24fe] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n}\n.spirit-root-list-container[data-v-6c1f24fe] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n  min-height: 0;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.spirit-root-list-container[data-v-6c1f24fe]::-webkit-scrollbar { width: 6px;\n}\n.spirit-root-list-container[data-v-6c1f24fe]::-webkit-scrollbar-track { background: transparent;\n}\n.spirit-root-list-container[data-v-6c1f24fe]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.spirit-root-list-container[data-v-6c1f24fe]::-webkit-scrollbar-thumb:hover { background: rgba(147, 197, 253, 0.5);\n}\n\n/* ========== é€‰é¡¹å¡æ ·å¼ ========== */\n.spirit-root-item[data-v-6c1f24fe] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.9rem 1rem;\n  margin-bottom: 0.5rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  border: 1px solid transparent;\n  background: rgba(30, 41, 59, 0.4);\n}\n.item-content[data-v-6c1f24fe] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n}\n\n/* æŒ‰é’®ç»„å®¹å™¨ */\n.action-buttons[data-v-6c1f24fe] {\n  display: flex;\n  align-items: center;\n  gap: 0.3rem;\n  opacity: 0;\n  transition: opacity 0.2s;\n  margin-left: 0.5rem;\n}\n.spirit-root-item:hover .action-buttons[data-v-6c1f24fe] {\n  opacity: 1;\n}\n.edit-btn[data-v-6c1f24fe], .delete-btn[data-v-6c1f24fe] {\n  background: none;\n  border: none;\n  color: #64748b;\n  cursor: pointer;\n  padding: 0.35rem;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.edit-btn[data-v-6c1f24fe]:hover {\n  color: #93c5fd;\n  background: rgba(147, 197, 253, 0.1);\n}\n.delete-btn[data-v-6c1f24fe]:hover {\n  color: #f87171;\n  background: rgba(248, 113, 113, 0.1);\n}\n.spirit-root-name-container[data-v-6c1f24fe] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex: 1;\n}\n.spirit-root-tier[data-v-6c1f24fe] {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 600;\n  text-align: center;\n  min-width: 28px;\n  flex-shrink: 0;\n}\n.spirit-root-tier.tier-ä¸‹å“[data-v-6c1f24fe] {\n  background: linear-gradient(135deg, #8B5CF6, #A78BFA);\n  color: white;\n}\n.spirit-root-tier.tier-ä¸­å“[data-v-6c1f24fe] {\n  background: linear-gradient(135deg, #3B82F6, #60A5FA);\n  color: white;\n}\n.spirit-root-tier.tier-ä¸Šå“[data-v-6c1f24fe] {\n  background: linear-gradient(135deg, #10B981, #34D399);\n  color: white;\n}\n.spirit-root-tier.tier-æå“[data-v-6c1f24fe] {\n  background: linear-gradient(135deg, #F59E0B, #FBBF24);\n  color: white;\n}\n.spirit-root-tier.tier-å¤©å“[data-v-6c1f24fe] {\n  background: linear-gradient(135deg, #EF4444, #F87171);\n  color: white;\n}\n.spirit-root-tier.tier-ç¥å“[data-v-6c1f24fe] {\n  background: linear-gradient(135deg, #DC2626, #F87171);\n  color: white;\n}\n.spirit-root-tier.tier-ç‰¹æ®Š[data-v-6c1f24fe] {\n  background: linear-gradient(135deg, #7C3AED, #A78BFA);\n  color: white;\n  border: 1px solid #A78BFA;\n}\n.spirit-root-tier.tier-å‡¡å“[data-v-6c1f24fe] {\n  background: rgba(156, 163, 175, 0.2);\n  color: #6B7280;\n  border: 1px solid #9CA3AF;\n}\n.spirit-root-item[data-v-6c1f24fe]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(147, 197, 253, 0.2);\n}\n.spirit-root-item.selected[data-v-6c1f24fe] {\n  background: rgba(30, 58, 138, 0.4);\n  border-color: rgba(147, 197, 253, 0.4);\n  box-shadow: 0 0 0 1px rgba(147, 197, 253, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.spirit-root-item.disabled[data-v-6c1f24fe] {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n.spirit-root-item.disabled[data-v-6c1f24fe]:hover {\n  background: rgba(30, 41, 59, 0.4);\n  border-color: transparent;\n}\n.spirit-root-name[data-v-6c1f24fe] {\n  font-weight: 500;\n  color: #f1f5f9;\n}\n.spirit-root-item.selected .spirit-root-name[data-v-6c1f24fe] {\n  color: #bfdbfe;\n}\n.spirit-root-cost[data-v-6c1f24fe] {\n  color: #fbbf24;\n  font-size: 0.85rem;\n  font-weight: 500;\n}\n.divider[data-v-6c1f24fe] {\n  height: 1px;\n  background: linear-gradient(to right, transparent, rgba(147, 197, 253, 0.2), transparent);\n  margin: 0.5rem 0;\n}\n.single-actions-container[data-v-6c1f24fe] {\n  border-top: 1px solid var(--color-border);\n  background: rgba(0, 0, 0, 0.3);\n  padding: 0.5rem;\n  display: flex;\n  gap: 0.5rem;\n}\n.action-item[data-v-6c1f24fe] {\n  flex: 1;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 0.8rem 1rem;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  font-size: 1rem;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  min-width: 0;\n}\n.action-item[data-v-6c1f24fe]:hover {\n  background: var(--color-surface-lighter);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.action-name[data-v-6c1f24fe] {\n  font-weight: 500;\n}\n\n/* ========== å³ä¾§è¯¦æƒ…é¢æ¿ ========== */\n.spirit-root-details-container[data-v-6c1f24fe] {\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.spirit-root-details[data-v-6c1f24fe] {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n.spirit-root-details h2[data-v-6c1f24fe] {\n  margin: 0 0 1rem 0;\n  color: #93c5fd;\n  flex-shrink: 0;\n  font-size: 1.5rem;\n  text-shadow: 0 0 20px rgba(147, 197, 253, 0.3);\n}\n.description-scroll[data-v-6c1f24fe] {\n  flex: 1;\n  overflow-y: auto;\n  line-height: 1.7;\n  padding-right: 0.5rem;\n  min-height: 0;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.description-scroll p[data-v-6c1f24fe] {\n  margin: 0;\n  white-space: pre-wrap;\n  color: #94a3b8;\n}\n.description-scroll[data-v-6c1f24fe]::-webkit-scrollbar { width: 6px;\n}\n.description-scroll[data-v-6c1f24fe]::-webkit-scrollbar-track { background: transparent;\n}\n.description-scroll[data-v-6c1f24fe]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.cost-display[data-v-6c1f24fe] {\n  text-align: right;\n  font-weight: 600;\n  color: #fbbf24;\n  flex-shrink: 0;\n  margin-top: 1rem;\n}\n\n/* å“åº”å¼é€‚é… - æ‰‹æœºç«¯ä¼˜åŒ– */\n@media (max-width: 1200px) {\n.spirit-root-layout[data-v-6c1f24fe] {\n    grid-template-columns: 1fr 1.8fr;\n    gap: 1.5rem;\n}\n}\n@media (max-width: 1024px) {\n.spirit-root-layout[data-v-6c1f24fe] {\n    grid-template-columns: 1fr 1.5fr;\n    gap: 1.2rem;\n}\n.spirit-root-details h2[data-v-6c1f24fe] {\n    font-size: 1.6rem;\n}\n}\n@media (max-width: 640px) {\n.top-actions-container[data-v-6c1f24fe] {\n    flex-wrap: wrap;\n    justify-content: stretch;\n}\n.top-actions-container .action-item[data-v-6c1f24fe] {\n    flex-grow: 1;\n    text-align: center;\n}\n.spirit-root-layout[data-v-6c1f24fe] {\n    /* æ”¹ä¸ºå‚ç›´å †å å¸ƒå±€ */\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr;\n    gap: 1rem;\n    height: auto;\n    overflow: visible;\n    padding: 0.8rem;\n}\n.spirit-root-left-panel[data-v-6c1f24fe] {\n    order: 1;\n    /* ç§»é™¤max-heighté™åˆ¶ï¼Œè®©flexå¸ƒå±€æ­£å¸¸å·¥ä½œ */\n}\n.spirit-root-details-container[data-v-6c1f24fe] {\n    order: 2;\n    min-height: 300px;\n}\n.spirit-root-list-container[data-v-6c1f24fe] {\n    /* ç§»é™¤max-heighté™åˆ¶ï¼Œè®©flexå¸ƒå±€æ­£å¸¸å·¥ä½œ */\n    /* æ·»åŠ è§¦æ‘¸æ»šåŠ¨ä¼˜åŒ– */\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: thin;\n}\n  \n  /* ä¼˜åŒ–è§¦æ‘¸ä½“éªŒ */\n.spirit-root-item[data-v-6c1f24fe],\n  .action-item[data-v-6c1f24fe] {\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n}\n}\n@media (max-width: 640px) {\n.spirit-root-layout[data-v-6c1f24fe] {\n    gap: 0.8rem;\n    padding: 0.6rem;\n}\n.spirit-root-list-container[data-v-6c1f24fe] {\n    padding: 0.5rem;\n}\n.spirit-root-item[data-v-6c1f24fe] {\n    padding: 0.7rem;\n    font-size: 0.95rem;\n    margin-bottom: 0.4rem;\n}\n.single-actions-container[data-v-6c1f24fe] {\n    padding: 0.5rem;\n    gap: 0.4rem;\n}\n.action-item[data-v-6c1f24fe] {\n    padding: 0.7rem 1rem;\n    font-size: 0.9rem;\n}\n.spirit-root-details-container[data-v-6c1f24fe] {\n    padding: 1.2rem;\n    min-height: 250px;\n}\n.spirit-root-details h2[data-v-6c1f24fe] {\n    font-size: 1.4rem;\n    margin-bottom: 0.8rem;\n}\n}\n@media (max-width: 480px) {\n.top-actions-container[data-v-6c1f24fe] {\n    flex-direction: column;\n    align-items: stretch;\n}\n.spirit-root-selection-container[data-v-6c1f24fe] {\n    padding: 0.4rem;\n    height: auto;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n}\n.spirit-root-layout[data-v-6c1f24fe] {\n    gap: 0.6rem;\n    padding: 0;\n    height: auto;\n    min-height: 0;\n}\n.spirit-root-left-panel[data-v-6c1f24fe] {\n    border-radius: 6px;\n}\n.spirit-root-list-container[data-v-6c1f24fe] {\n    padding: 0.4rem;\n}\n.spirit-root-item[data-v-6c1f24fe] {\n    padding: 0.6rem 0.8rem;\n    font-size: 0.9rem;\n    margin-bottom: 0.3rem;\n    border-radius: 4px;\n}\n.spirit-root-name[data-v-6c1f24fe] {\n    font-size: 0.9rem;\n}\n.spirit-root-cost[data-v-6c1f24fe] {\n    font-size: 0.8rem;\n}\n.divider[data-v-6c1f24fe] {\n    margin: 0.3rem 0;\n}\n.single-actions-container[data-v-6c1f24fe] {\n    flex-direction: column;\n    gap: 0.4rem;\n    padding: 0.4rem;\n}\n.action-item[data-v-6c1f24fe] {\n    padding: 0.6rem;\n    font-size: 0.85rem;\n    border-radius: 4px;\n}\n.spirit-root-details-container[data-v-6c1f24fe] {\n    padding: 1rem;\n    min-height: 200px;\n    border-radius: 6px;\n}\n.spirit-root-details h2[data-v-6c1f24fe] {\n    font-size: 1.3rem;\n    margin-bottom: 0.6rem;\n}\n.description-scroll[data-v-6c1f24fe] {\n    font-size: 0.9rem;\n    line-height: 1.5;\n    padding-right: 0.3rem;\n}\n.cost-display[data-v-6c1f24fe] {\n    font-size: 1rem;\n    text-align: center;\n    margin-top: 0.8rem;\n}\n.placeholder[data-v-6c1f24fe] {\n    font-size: 1rem;\n    padding: 1rem;\n    text-align: center;\n    min-height: 150px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.top-actions-container[data-v-6c1f24fe] {\n    flex-direction: column;\n    align-items: stretch;\n    padding: 0.5rem;\n}\n.top-actions-container .action-item[data-v-6c1f24fe] {\n    text-align: center;\n}\n}\n@media (max-width: 360px) {\n.spirit-root-selection-container[data-v-6c1f24fe] {\n    padding: 0.3rem;\n}\n.spirit-root-layout[data-v-6c1f24fe] {\n    gap: 0.4rem;\n}\n.spirit-root-list-container[data-v-6c1f24fe] {\n    padding: 0.3rem;\n}\n.spirit-root-item[data-v-6c1f24fe] {\n    padding: 0.5rem 0.6rem;\n    font-size: 0.85rem;\n    margin-bottom: 0.2rem;\n}\n.spirit-root-name[data-v-6c1f24fe] {\n    font-size: 0.8rem;\n}\n.spirit-root-cost[data-v-6c1f24fe] {\n    font-size: 0.75rem;\n}\n.spirit-root-details-container[data-v-6c1f24fe] {\n    padding: 0.8rem;\n    min-height: 180px;\n}\n.spirit-root-details h2[data-v-6c1f24fe] {\n    font-size: 1.1rem;\n    margin-bottom: 0.5rem;\n}\n.description-scroll[data-v-6c1f24fe] {\n    font-size: 0.85rem;\n    line-height: 1.4;\n}\n.cost-display[data-v-6c1f24fe] {\n    font-size: 0.9rem;\n    margin-top: 0.6rem;\n}\n.action-item[data-v-6c1f24fe] {\n    padding: 0.5rem;\n    font-size: 0.8rem;\n}\n.placeholder[data-v-6c1f24fe] {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n    min-height: 120px;\n}\n}\n\n/* è‡ªå®šä¹‰æ¨¡å¼æ ·å¼ */\n.stats-display[data-v-6c1f24fe] {\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.stat-item[data-v-6c1f24fe] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.stat-label[data-v-6c1f24fe] {\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n}\n.stat-value[data-v-6c1f24fe] {\n  color: var(--color-accent);\n  font-weight: 600;\n}\n\n/* é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® - æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ */\n.top-actions-container[data-v-6c1f24fe] {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  border-bottom: 1px solid rgba(147, 197, 253, 0.15);\n  background: rgba(30, 41, 59, 0.3);\n  justify-content: flex-end;\n}\n.top-actions-container .action-item[data-v-6c1f24fe] {\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  border-radius: 6px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #93c5fd;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  font-size: 0.9rem;\n  white-space: nowrap;\n}\n.top-actions-container .action-item[data-v-6c1f24fe]:hover {\n  background: rgba(59, 130, 246, 0.2);\n  border-color: #93c5fd;\n  color: #bfdbfe;\n}\n\n/* äº®è‰²ä¸»é¢˜é¡¶éƒ¨æŒ‰é’® */\n[data-theme="light"] .top-actions-container[data-v-6c1f24fe] {\n  background: rgba(241, 245, 249, 0.6);\n  border-bottom-color: rgba(59, 130, 246, 0.15);\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-6c1f24fe] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #2563eb;\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-6c1f24fe]:hover {\n  background: rgba(59, 130, 246, 0.1);\n  border-color: #3b82f6;\n  color: #1e40af;\n}\n\n/* é€‰æ‹©æ¨¡å¼æ ‡ç­¾é¡µ */\n.selection-mode-tabs[data-v-6c1f24fe] {\n  display: flex;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n}\n.mode-tab[data-v-6c1f24fe] {\n  flex: 1;\n  padding: 0.8rem 1rem;\n  border: none;\n  background: transparent;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-weight: 500;\n}\n.mode-tab.active[data-v-6c1f24fe] {\n  color: var(--color-primary);\n  background: var(--color-surface);\n  border-bottom: 2px solid var(--color-primary);\n}\n.mode-tab[data-v-6c1f24fe]:hover:not(.active) {\n  background: rgba(136, 192, 208, 0.1);\n  color: var(--color-text);\n}\n\n/* è‡ªå®šä¹‰æ¨¡å¼æ ·å¼ */\n.custom-mode[data-v-6c1f24fe] {\n  flex: 1;\n  padding: 1rem;\n  overflow-y: auto;\n}\n.custom-selection-container[data-v-6c1f24fe] {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n.selection-group[data-v-6c1f24fe] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n.selection-label[data-v-6c1f24fe] {\n  font-weight: 600;\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.spirit-type-grid[data-v-6c1f24fe] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));\n  gap: 0.5rem;\n}\n.type-button[data-v-6c1f24fe] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.8rem 0.5rem;\n  border: 2px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-height: 70px;\n}\n.type-button[data-v-6c1f24fe]:hover {\n  border-color: var(--element-color, var(--color-primary));\n  background: rgba(136, 192, 208, 0.1);\n}\n.type-button.selected[data-v-6c1f24fe] {\n  border-color: var(--element-color, var(--color-primary));\n  background: var(--element-color, var(--color-primary));\n  color: white;\n}\n.type-icon[data-v-6c1f24fe] {\n  font-size: 1.2rem;\n}\n.type-name[data-v-6c1f24fe] {\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n.tier-selection[data-v-6c1f24fe] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.tier-button[data-v-6c1f24fe] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.8rem 1rem;\n  border: 2px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.tier-button[data-v-6c1f24fe]:hover {\n  border-color: var(--color-primary);\n  background: rgba(136, 192, 208, 0.1);\n}\n.tier-button.selected[data-v-6c1f24fe] {\n  border-color: var(--color-primary);\n  background: var(--color-primary);\n  color: white;\n}\n.tier-button.tier-common[data-v-6c1f24fe] {\n  border-color: #9CA3AF;\n}\n.tier-button.tier-low[data-v-6c1f24fe] {\n  border-color: #8B5CF6;\n}\n.tier-button.tier-middle[data-v-6c1f24fe] {\n  border-color: #3B82F6;\n}\n.tier-button.tier-high[data-v-6c1f24fe] {\n  border-color: #10B981;\n}\n.tier-button.tier-supreme[data-v-6c1f24fe] {\n  border-color: #F59E0B;\n}\n.tier-button.tier-heaven[data-v-6c1f24fe] {\n  border-color: #FF6B35;\n}\n.tier-button.tier-divine[data-v-6c1f24fe] {\n  border-color: #DC2626;\n}\n.tier-button.tier-special[data-v-6c1f24fe] {\n  border-color: #7C3AED;\n}\n.tier-name[data-v-6c1f24fe] {\n  font-weight: 600;\n}\n.tier-multiplier[data-v-6c1f24fe] {\n  color: var(--color-accent);\n  font-size: 0.9rem;\n}\n.tier-cost[data-v-6c1f24fe] {\n  color: var(--color-text-secondary);\n  font-size: 0.8rem;\n}\n.custom-preview[data-v-6c1f24fe] {\n  padding: 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface-light);\n}\n.preview-title[data-v-6c1f24fe] {\n  font-weight: 600;\n  margin-bottom: 0.8rem;\n  color: var(--color-text);\n}\n.preview-content[data-v-6c1f24fe] {\n  margin-bottom: 1rem;\n}\n.preview-name[data-v-6c1f24fe] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.8rem;\n  font-weight: 600;\n  color: var(--color-primary);\n}\n.preview-tier[data-v-6c1f24fe] {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 600;\n  background: var(--color-accent);\n  color: white;\n}\n.preview-stats[data-v-6c1f24fe] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.4rem;\n}\n.preview-stats .stat[data-v-6c1f24fe] {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n}\n.confirm-custom-button[data-v-6c1f24fe] {\n  width: 100%;\n  padding: 0.8rem;\n  border: none;\n  border-radius: 6px;\n  background: var(--color-primary);\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.confirm-custom-button[data-v-6c1f24fe]:hover:not(:disabled) {\n  background: var(--color-primary-dark);\n}\n.confirm-custom-button[data-v-6c1f24fe]:disabled {\n  background: var(--color-border);\n  color: var(--color-text-disabled);\n  cursor: not-allowed;\n}\n.actions-container[data-v-6c1f24fe] {\n  border-top: 1px solid var(--color-border);\n  background: rgba(0, 0, 0, 0.3);\n  padding: 0.5rem;\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* å…¼å®¹æ–°ç­‰çº§åç§°"ä»™å“" */\n.spirit-root-tier.tier-ä»™å“[data-v-6c1f24fe] { background: linear-gradient(135deg, #EF4444, #F87171); color: white;\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .spirit-root-left-panel[data-v-6c1f24fe],\n[data-theme="light"] .spirit-root-details-container[data-v-6c1f24fe] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .spirit-root-item[data-v-6c1f24fe] {\n  background: rgba(255, 255, 255, 0.6);\n}\n[data-theme="light"] .spirit-root-item[data-v-6c1f24fe]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .spirit-root-item.selected[data-v-6c1f24fe] {\n  background: rgba(219, 234, 254, 0.8);\n  border-color: rgba(59, 130, 246, 0.4);\n}\n[data-theme="light"] .spirit-root-name[data-v-6c1f24fe] {\n  color: #1e293b;\n}\n[data-theme="light"] .spirit-root-item.selected .spirit-root-name[data-v-6c1f24fe] {\n  color: #1e40af;\n}\n[data-theme="light"] .spirit-root-details h2[data-v-6c1f24fe] {\n  color: #2563eb;\n}\n[data-theme="light"] .description-scroll p[data-v-6c1f24fe] {\n  color: #475569;\n}\n',""]);const s=i},4135:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.dao-panel[data-v-5ac27f42] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n}\n\n/* é¡¶éƒ¨ç»Ÿè®¡åŒº */\n.dao-stats-header[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 12px 16px;\n  background: var(--color-background);\n  border-bottom: 1px solid var(--color-border);\n  border-radius: 12px 12px 0 0;\n}\n.stats-card[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 8px 14px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  min-width: 100px;\n}\n.stats-icon[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n}\n.stats-icon.enlightened[data-v-5ac27f42] {\n  background: linear-gradient(135deg, rgba(130, 163, 245, 0.2), rgba(192, 202, 245, 0.2));\n  color: var(--color-primary);\n}\n.stats-icon.experience[data-v-5ac27f42] {\n  background: linear-gradient(135deg, rgba(255, 213, 0, 0.2), rgba(255, 179, 0, 0.2));\n  color: var(--color-warning);\n}\n.stats-info[data-v-5ac27f42] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.stats-value[data-v-5ac27f42] {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: var(--color-text);\n  line-height: 1.2;\n}\n.stats-label[data-v-5ac27f42] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.stats-actions[data-v-5ac27f42] {\n  display: flex;\n  gap: 6px;\n  margin-left: auto;\n}\n.action-btn-icon[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 34px;\n  height: 34px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.action-btn-icon[data-v-5ac27f42]:hover {\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.1);\n}\n\n/* ç­›é€‰å’Œæ’åºæ  */\n.dao-filter-bar[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 12px;\n  padding: 10px 12px;\n  background: var(--color-surface);\n  border-radius: 10px;\n  margin-bottom: 12px;\n  flex-wrap: wrap;\n}\n.filter-tags[data-v-5ac27f42] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n.filter-tag[data-v-5ac27f42] {\n  display: inline-flex;\n  align-items: center;\n  gap: 5px;\n  padding: 6px 10px;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 16px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.filter-tag[data-v-5ac27f42]:hover {\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.filter-tag.active[data-v-5ac27f42] {\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.tag-count[data-v-5ac27f42] {\n  font-size: 0.65rem;\n  padding: 1px 5px;\n  background: rgba(var(--color-primary-rgb), 0.15);\n  border-radius: 8px;\n  font-weight: 600;\n}\n.sort-dropdown[data-v-5ac27f42] {\n  flex-shrink: 0;\n}\n.sort-select[data-v-5ac27f42] {\n  padding: 6px 10px;\n  font-size: 0.75rem;\n  color: var(--color-text);\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  outline: none;\n  transition: all 0.2s;\n}\n.sort-select[data-v-5ac27f42]:hover,\n.sort-select[data-v-5ac27f42]:focus {\n  border-color: var(--color-primary);\n}\n\n/* ç©ºçŠ¶æ€æ’å›¾ */\n.empty-illustration[data-v-5ac27f42] {\n  position: relative;\n  width: 120px;\n  height: 120px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.empty-icon-wrapper[data-v-5ac27f42] {\n  position: relative;\n  z-index: 2;\n  color: var(--color-primary);\n  opacity: 0.6;\n}\n.empty-rings[data-v-5ac27f42] {\n  position: absolute;\n  inset: 0;\n}\n.ring[data-v-5ac27f42] {\n  position: absolute;\n  border: 1px solid var(--color-border);\n  border-radius: 50%;\n  opacity: 0.4;\n}\n.ring-1[data-v-5ac27f42] {\n  inset: 20%;\n}\n.ring-2[data-v-5ac27f42] {\n  inset: 10%;\n}\n.ring-3[data-v-5ac27f42] {\n  inset: 0;\n}\n.empty-title[data-v-5ac27f42] {\n  margin: 0;\n  font-size: 1rem;\n  color: var(--color-text);\n}\n.empty-desc[data-v-5ac27f42] {\n  margin: 0;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  text-align: center;\n  max-width: 280px;\n}\n\n/* å¤§é“å¡ç‰‡ */\n.dao-card[data-v-5ac27f42] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 12px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  cursor: pointer;\n  transition: all 0.2s;\n  position: relative;\n}\n.dao-card[data-v-5ac27f42]:hover {\n  border-color: var(--color-primary);\n}\n.dao-card.active[data-v-5ac27f42] {\n  border-color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n.dao-card-header[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.dao-icon[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: linear-gradient(135deg, rgba(130, 163, 245, 0.15), rgba(192, 202, 245, 0.15));\n  border-radius: 8px;\n  color: var(--color-primary);\n}\n.dao-title-group[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex: 1;\n}\n.dao-card-body[data-v-5ac27f42] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.dao-progress-wrapper[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.dao-progress-bar[data-v-5ac27f42] {\n  flex: 1;\n  height: 6px;\n  background: var(--color-border);\n  border-radius: 3px;\n  overflow: hidden;\n  position: relative;\n}\n.dao-progress-fill[data-v-5ac27f42] {\n  height: 100%;\n  background: linear-gradient(90deg, var(--color-primary), var(--color-info));\n  border-radius: 3px;\n  transition: width 0.3s ease;\n}\n.dao-progress-glow[data-v-5ac27f42] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);\n  animation: glow-sweep-5ac27f42 2s infinite;\n}\n@keyframes glow-sweep-5ac27f42 {\n0% { transform: translateX(-100%);\n}\n100% { transform: translateX(100%);\n}\n}\n.dao-progress-text[data-v-5ac27f42] {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  min-width: 36px;\n  text-align: right;\n}\n.dao-exp-info[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  font-size: 0.75rem;\n}\n.exp-current[data-v-5ac27f42] {\n  color: var(--color-primary);\n  font-weight: 600;\n}\n.exp-divider[data-v-5ac27f42] {\n  color: var(--color-text-muted);\n}\n.exp-required[data-v-5ac27f42] {\n  color: var(--color-text-secondary);\n}\n.dao-card-actions[data-v-5ac27f42] {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n  gap: 4px;\n  opacity: 0;\n  transition: opacity 0.2s;\n}\n.dao-card:hover .dao-card-actions[data-v-5ac27f42] {\n  opacity: 1;\n}\n.dao-action-btn[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 26px;\n  height: 26px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.dao-action-btn[data-v-5ac27f42]:hover {\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.dao-action-btn.cultivate[data-v-5ac27f42]:hover {\n  border-color: var(--color-warning);\n  color: var(--color-warning);\n}\n.dao-action-btn.breakthrough[data-v-5ac27f42] {\n  border-color: #f59e0b;\n  color: #f59e0b;\n}\n.dao-action-btn.breakthrough[data-v-5ac27f42]:hover {\n  background: #f59e0b;\n  color: white;\n}\n\n/* é˜¶æ®µå¾½ç«  */\n.dao-stage-badge[data-v-5ac27f42] {\n  padding: 2px 8px;\n  border-radius: 10px;\n  font-size: 0.7rem;\n  font-weight: 500;\n}\n.dao-stage-badge.stage-low[data-v-5ac27f42] {\n  background: rgba(var(--color-info-rgb), 0.15);\n  color: var(--color-info);\n}\n.dao-stage-badge.stage-mid[data-v-5ac27f42] {\n  background: rgba(var(--color-success-rgb), 0.15);\n  color: var(--color-success);\n}\n.dao-stage-badge.stage-high[data-v-5ac27f42] {\n  background: rgba(var(--color-warning-rgb), 0.15);\n  color: var(--color-warning);\n}\n.dao-stage-badge.stage-max[data-v-5ac27f42] {\n  background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 140, 0, 0.2));\n  color: #ffa500;\n}\n\n/* è¯¦æƒ…é¢æ¿ */\n.dao-detail-panel[data-v-5ac27f42] {\n  margin-top: 12px;\n  padding: 16px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n}\n.detail-title-group[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.detail-icon[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n  background: linear-gradient(135deg, rgba(130, 163, 245, 0.2), rgba(192, 202, 245, 0.2));\n  border-radius: 10px;\n  color: var(--color-primary);\n}\n.detail-title[data-v-5ac27f42] {\n  margin: 0;\n  font-size: 1.1rem;\n  color: var(--color-text);\n}\n.detail-stage[data-v-5ac27f42] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.detail-body[data-v-5ac27f42] {\n  margin-top: 16px;\n}\n.detail-stats-grid[data-v-5ac27f42] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 10px;\n  margin-bottom: 16px;\n}\n.detail-stat-card[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: var(--color-background);\n  border-radius: 8px;\n}\n.stat-card-icon[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border-radius: 6px;\n  color: var(--color-primary);\n}\n.stat-card-icon.progress-icon[data-v-5ac27f42] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  color: var(--color-success);\n}\n.stat-card-content[data-v-5ac27f42] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.stat-card-value[data-v-5ac27f42] {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.stat-card-label[data-v-5ac27f42] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n}\n\n/* é˜¶æ®µè¿›åº¦åŒº */\n.stage-progress-section[data-v-5ac27f42] {\n  margin-bottom: 16px;\n}\n.section-title[data-v-5ac27f42] {\n  margin: 0 0 10px 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.stage-timeline[data-v-5ac27f42] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.stage-node[data-v-5ac27f42] {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  padding: 8px 10px;\n  background: var(--color-background);\n  border-radius: 8px;\n  border-left: 3px solid var(--color-border);\n}\n.stage-node.done[data-v-5ac27f42] {\n  border-left-color: var(--color-success);\n}\n.stage-node.current[data-v-5ac27f42] {\n  border-left-color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n.stage-node.locked[data-v-5ac27f42] {\n  opacity: 0.5;\n}\n.node-marker[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 22px;\n  height: 22px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n.stage-node.done .node-marker[data-v-5ac27f42] {\n  background: var(--color-success);\n  border-color: var(--color-success);\n  color: white;\n}\n.stage-node.current .node-marker[data-v-5ac27f42] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n.node-number[data-v-5ac27f42] {\n  font-size: 0.7rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n}\n.node-content[data-v-5ac27f42] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.node-name[data-v-5ac27f42] {\n  font-size: 0.85rem;\n  font-weight: 500;\n  color: var(--color-text);\n}\n.node-desc[data-v-5ac27f42] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n\n/* çªç ´æŒ‡å¼• */\n.breakthrough-guide[data-v-5ac27f42] {\n  margin-bottom: 16px;\n  padding: 14px;\n  background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(251, 191, 36, 0.05));\n  border: 1px solid rgba(245, 158, 11, 0.3);\n  border-radius: 10px;\n  border-left: 4px solid #f59e0b;\n}\n.guide-header[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 10px;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #f59e0b;\n}\n.guide-content[data-v-5ac27f42] {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.guide-desc[data-v-5ac27f42] {\n  margin: 0;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n}\n.guide-tips[data-v-5ac27f42] {\n  margin: 0;\n  padding-left: 20px;\n  list-style: disc;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  line-height: 1.6;\n}\n.guide-tips li[data-v-5ac27f42] {\n  margin-bottom: 4px;\n}\n.breakthrough-chance[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 10px 12px;\n  background: rgba(245, 158, 11, 0.1);\n  border-radius: 8px;\n  margin-top: 6px;\n}\n.chance-label[data-v-5ac27f42] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.chance-value[data-v-5ac27f42] {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: #f59e0b;\n}\n.detail-actions[data-v-5ac27f42] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n\n/* å·¥å…·æ  */\n.dao-toolbar[data-v-5ac27f42] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: var(--color-surface);\n  border-bottom: 1px solid var(--color-border);\n}\n.toolbar-left[data-v-5ac27f42] {\n  display: flex;\n  gap: 16px;\n  font-size: 0.9rem;\n}\n.dao-count[data-v-5ac27f42] {\n  color: var(--color-primary);\n  font-weight: 600;\n}\n.dao-exp[data-v-5ac27f42] {\n  color: var(--color-text-secondary);\n}\n.toolbar-right[data-v-5ac27f42] {\n  display: flex;\n  gap: 8px;\n}\n.tool-btn[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.tool-btn[data-v-5ac27f42]:hover {\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n\n/* ä¸»å†…å®¹ */\n.dao-content[data-v-5ac27f42] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  padding: 12px;\n}\n\n/* ç©ºçŠ¶æ€ */\n.dao-empty[data-v-5ac27f42] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 20px;\n  color: var(--color-text-secondary);\n}\n.quick-actions[data-v-5ac27f42] {\n  display: flex;\n  gap: 12px;\n}\n\n/* å¤§é“åˆ—è¡¨ */\n.dao-list[data-v-5ac27f42] {\n  flex: 1;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.dao-name[data-v-5ac27f42] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n/* é€šç”¨æŒ‰é’® */\n.action-btn[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  padding: 10px 16px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  color: var(--color-text);\n  font-size: 0.9rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.action-btn[data-v-5ac27f42]:hover {\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.action-btn.primary[data-v-5ac27f42] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n.action-btn.primary[data-v-5ac27f42]:hover {\n  opacity: 0.9;\n}\n.action-btn.secondary[data-v-5ac27f42] {\n  background: #ffb534d0;\n  border-color: var(--color-border);\n}\n.action-btn.warning[data-v-5ac27f42] {\n  background: #f59e0b;\n  border-color: #f59e0b;\n  color: white;\n}\n.action-btn.warning[data-v-5ac27f42]:hover {\n  opacity: 0.9;\n}\n.action-btn.large[data-v-5ac27f42] {\n  padding: 12px 20px;\n}\n.close-btn[data-v-5ac27f42] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n.close-btn[data-v-5ac27f42]:hover {\n  color: var(--color-text);\n  border-color: var(--color-primary);\n  background: var(--color-surface-hover);\n}\n\n/* å“åº”å¼ */\n@media (max-width: 640px) {\n.dao-stats-header[data-v-5ac27f42] {\n    flex-wrap: wrap;\n}\n.stats-card[data-v-5ac27f42] {\n    min-width: auto;\n    flex: 1;\n}\n.quick-actions[data-v-5ac27f42] {\n    flex-direction: column;\n}\n.detail-stats-grid[data-v-5ac27f42] {\n    grid-template-columns: 1fr;\n}\n}\n",""]);const s=i},4178:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-431f1334] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n}\n.modal-container[data-v-431f1334] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  width: 90%;\n  max-width: 500px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  animation: slideUp-431f1334 0.3s ease-out;\n}\n@keyframes slideUp-431f1334 {\nfrom {\n    opacity: 0;\n    transform: translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.modal-header[data-v-431f1334] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-title[data-v-431f1334] {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: var(--color-text);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.modal-close[data-v-431f1334] {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n.modal-close[data-v-431f1334]:hover {\n  background: rgba(var(--color-primary-rgb), 0.1);\n  color: var(--color-text);\n}\n.modal-content[data-v-431f1334] {\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n.form-group[data-v-431f1334] {\n  margin-bottom: 1.5rem;\n}\n.form-label[data-v-431f1334] {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--color-text);\n}\n.required[data-v-431f1334] {\n  color: var(--color-danger);\n}\n.optional[data-v-431f1334] {\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  font-weight: normal;\n}\n.form-input[data-v-431f1334],\n.form-textarea[data-v-431f1334] {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  font-size: 0.9rem;\n  font-family: inherit;\n  transition: all 0.2s ease;\n  box-sizing: border-box;\n}\n.form-input[data-v-431f1334]:focus,\n.form-textarea[data-v-431f1334]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  background: var(--color-surface-lighter);\n  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);\n}\n.form-textarea[data-v-431f1334] {\n  resize: vertical;\n  min-height: 80px;\n}\n.char-count[data-v-431f1334] {\n  margin-top: 0.25rem;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  text-align: right;\n}\n.preset-preview[data-v-431f1334] {\n  padding: 1rem;\n  background: rgba(var(--color-accent-rgb), 0.05);\n  border: 1px solid rgba(var(--color-accent-rgb), 0.15);\n  border-radius: 8px;\n  margin-top: 1rem;\n}\n.preview-header[data-v-431f1334] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin-bottom: 0.75rem;\n}\n.preview-tags[data-v-431f1334] {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.info-tag[data-v-431f1334] {\n  padding: 0.3rem 0.7rem;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n  border-radius: 12px;\n  font-size: 0.75rem;\n  color: var(--color-primary);\n}\n.info-tag.talent-tag[data-v-431f1334] {\n  background: rgba(var(--color-accent-rgb), 0.1);\n  border-color: rgba(var(--color-accent-rgb), 0.3);\n  color: var(--color-accent);\n  font-weight: 500;\n}\n.preset-info[data-v-431f1334] {\n  padding: 1rem;\n  background: rgba(var(--color-primary-rgb), 0.05);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.1);\n  border-radius: 6px;\n  margin-top: 1rem;\n}\n.info-item[data-v-431f1334] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.85rem;\n}\n.info-label[data-v-431f1334] {\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.info-value[data-v-431f1334] {\n  color: var(--color-text);\n  font-family: 'Monaco', 'Courier New', monospace;\n}\n.modal-footer[data-v-431f1334] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n}\n.btn[data-v-431f1334] {\n  padding: 0.7rem 1.5rem;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n.btn-cancel[data-v-431f1334] {\n  background: var(--color-surface-lighter);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n.btn-cancel[data-v-431f1334]:hover:not(:disabled) {\n  background: rgba(var(--color-text-rgb), 0.05);\n  border-color: var(--color-text-secondary);\n}\n.btn-confirm[data-v-431f1334] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: #fff;\n  border: none;\n  min-width: 120px;\n}\n.btn-confirm[data-v-431f1334]:hover:not(:disabled) {\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);\n  transform: translateY(-2px);\n}\n.btn-confirm[data-v-431f1334]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n.modal-container[data-v-431f1334] {\n    width: 95%;\n    max-width: 100%;\n    border-radius: 8px;\n}\n.modal-header[data-v-431f1334] {\n    padding: 1rem;\n}\n.modal-title[data-v-431f1334] {\n    font-size: 1.1rem;\n}\n.modal-content[data-v-431f1334] {\n    padding: 1rem;\n}\n.form-group[data-v-431f1334] {\n    margin-bottom: 1rem;\n}\n.modal-footer[data-v-431f1334] {\n    padding: 1rem;\n    flex-direction: column-reverse;\n    gap: 0.75rem;\n}\n.btn[data-v-431f1334] {\n    width: 100%;\n    padding: 0.8rem 1rem;\n}\n}\n",""]);const s=i},4191:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});class a{static buildPrompt(e){const t=e.factionCount,n=e.totalLocations,a=e.continentCount,r=Math.min(e.secretRealms,n),o=t,i=n-o,s=Math.max(1,Math.floor(.2*i)),l=Math.max(1,Math.floor(.2*i)),c=Math.max(1,Math.floor(.1*i)),d=Math.max(0,i-s-l-c),u=Math.floor(r*(.3+.3*Math.random())),m=Math.floor(r*(.2+.3*Math.random())),p=Math.max(0,r-u-m),f=e.characterBackground?`\nè§’è‰²å‡ºèº«: ${e.characterBackground}`:"",g=e.worldBackground?`\nä¸–ç•ŒèƒŒæ™¯: ${e.worldBackground}`:"",h=e.worldEra?`\nä¸–ç•Œæ—¶ä»£: ${e.worldEra}`:"",v=e.worldName?`\nä¸–ç•Œåç§°: ${e.worldName}`:"",b=Date.now()+Math.floor(1e6*Math.random()),y=Math.random().toString(36).substring(7),x=Math.ceil(Math.sqrt(a)),k=Math.ceil(a/x),w=Math.floor(1e4/k),E=Math.floor(1e4/x);return`# è¯¸å¤©ä¸‡ç•ŒåŠ¿åŠ›åœ°å›¾ç”Ÿæˆä»»åŠ¡\n\nä¼šè¯ID: ${y} | éšæœºç§å­: ${b}\n\n## ğŸ® æ¸¸æˆåæ ‡ç³»ç»Ÿè¯´æ˜\n**é‡è¦**ï¼šæœ¬é¡¹ç›®ä½¿ç”¨æ¸¸æˆåæ ‡ç³»ç»Ÿï¼Œä¸æ˜¯ç»çº¬åº¦ï¼\n- åæ ‡èŒƒå›´ï¼šx: 0-10000, y: 0-10000ï¼ˆåƒç´ åæ ‡ï¼‰\n- åŸç‚¹(0,0)åœ¨å·¦ä¸Šè§’ï¼Œxå‘å³å¢åŠ ï¼Œyå‘ä¸‹å¢åŠ \n- æ‰€æœ‰ä½ç½®ã€è¾¹ç•Œã€èŒƒå›´éƒ½å¿…é¡»ä½¿ç”¨æ­¤åæ ‡ç³»ç»Ÿ\n- ç¦æ­¢ä½¿ç”¨ç»çº¬åº¦æˆ–ä»»ä½•åœ°ç†åæ ‡ç³»ç»Ÿ\n\n## ğŸš¨ æœ€é«˜ä¼˜å…ˆçº§è¦æ±‚\nå¿…é¡»ç”Ÿæˆå®Œæ•´JSONï¼š\n1. continentsæ•°ç»„ï¼š${a}ä¸ªå¤§æ´²ï¼ˆè¾¹ç•Œä¸é‡å ï¼‰\n2. factionsæ•°ç»„ï¼š${t}ä¸ªåŠ¿åŠ›ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰\n3. locationsæ•°ç»„ï¼š${n}ä¸ªåœ°ç‚¹ï¼ˆä¸èƒ½ä¸ºç©ºï¼‰\n\n## ä¸–ç•Œè®¾å®š\n${f}${g}${h}${v}\n\n## ğŸš¨ ä¸–ç•Œé£æ ¼é€‚é…ï¼ˆé‡è¦ï¼‰\n**å¿…é¡»æ ¹æ®ä¸Šè¿°ä¸–ç•ŒèƒŒæ™¯ï¼Œè‡ªè¡Œåˆ¤æ–­å¹¶é€‰æ‹©åˆé€‚çš„é£æ ¼ï¼š**\n- å‘½åé£æ ¼ï¼šåŠ¿åŠ›ã€åœ°ç‚¹çš„å‘½åå¿…é¡»ç¬¦åˆä¸–ç•ŒèƒŒæ™¯è®¾å®š\n- å¢ƒç•Œä½“ç³»ï¼šæ ¹æ®ä¸–ç•ŒèƒŒæ™¯é€‰æ‹©åˆé€‚çš„å¢ƒç•Œä½“ç³»ï¼ˆå¦‚æ­¦é“ä¸–ç•Œç”¨åå¤©/å…ˆå¤©/å®—å¸ˆï¼Œä¿®ä»™ä¸–ç•Œç”¨ç‚¼æ°”/ç­‘åŸº/é‡‘ä¸¹ç­‰ï¼‰\n- åŠ¿åŠ›ç±»å‹ï¼šæ ¹æ®ä¸–ç•ŒèƒŒæ™¯é€‰æ‹©åˆé€‚çš„åŠ¿åŠ›ç±»å‹ï¼ˆå¦‚æ­¦ä¾ ç”¨é—¨æ´¾/å¸®ä¼šï¼Œä¿®ä»™ç”¨å®—é—¨/ä¸–å®¶ç­‰ï¼‰\n- ä¿æŒä¸€è‡´æ€§ï¼šæ•´ä¸ªä¸–ç•Œçš„é£æ ¼å¿…é¡»ç»Ÿä¸€ï¼Œä¸è¦æ··æ­\n\n**ç¦ç”¨è¯æ ¹**ï¼šæœ¬å¿ƒã€é—®å¿ƒã€è§æ€§ã€å½’ä¸€ã€å¤ªç„ã€å¤ªè™šã€ç´«è–‡ã€å¤©æœºã€é’éœã€æ— é‡ã€æ˜Šå¤©ã€ç„å¤©ã€å¤ªæ¸…ã€å¤ªä¸Šã€æ— æã€ä¹å¤©\n\n**é‡è¦**ï¼š\n- åªç”Ÿæˆcontinents/factions/locationsä¸‰ä¸ªå­—æ®µ\n- ä¸¥ç¦è¾“å‡ºworld_name/world_background/generation_info/player_spawn\n- æ¯æ¬¡ç”Ÿæˆå¿…é¡»æ˜¾è‘—ä¸åŒï¼Œé¿å…å›ºåŒ–\n\n## æ ¸å¿ƒåŸåˆ™\n### ä¿®ä»™ä¸–ç•ŒåŸºç¡€\n- æ ¸å¿ƒä½“ç³»: ä¿®ä»™ã€å¢ƒç•Œã€åŠŸæ³•ã€ä¸¹è¯ã€æ³•å®\n- æƒåŠ›ç»“æ„: å¼ºè€…ä¸ºå°Š\n\n### å¤šæ ·æ€§ä¸åˆ›æ–°\n- åŠ¿åŠ›å¤šæ ·åŒ–: æ¯æ¬¡ä¸åŒç±»å‹ç»„åˆ\n- åœ°ååˆ›æ–°: é¿å…æ¨¡æ¿åŒ–\n- è§„æ¨¡å¹³è¡¡: æ ¹æ®èƒŒæ™¯è°ƒæ•´\n\n### åŠ¿åŠ›åˆ†å¸ƒå‚è€ƒ\nå®—é—¨(40-50%) | ä¸–å®¶(20-30%) | é­”é“(10-20%) | æ•£ä¿®è”ç›Ÿ(10-15%) | å•†ä¼š(5-15%) | å¦–æ—(5-10%)\n\n## å¤§æ´²ç”Ÿæˆè¦æ±‚ï¼ˆ${a}ä¸ªï¼‰\n### ğŸš¨ å…³é”®è¦æ±‚ï¼šå¤§æ´²å¿…é¡»å®Œå…¨è¦†ç›–åœ°å›¾ï¼Œè¾¹ç•Œå¿…é¡»ç›¸è¿ï¼\n\n### ç½‘æ ¼åˆ†å‰²æ³•ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰\n- ç½‘æ ¼å¸ƒå±€: ${x}è¡Œ Ã— ${k}åˆ—\n- Xè½´åˆ†æ®µ: æ¯æ®µ${w}åƒç´ ï¼ˆæ¸¸æˆåæ ‡ï¼‰\n- Yè½´åˆ†æ®µ: æ¯æ®µ${E}åƒç´ ï¼ˆæ¸¸æˆåæ ‡ï¼‰\n- æ¯ä¸ªå¤§æ´²å æ®ä¸€ä¸ªç½‘æ ¼å•å…ƒ\n\n### å¤§æ´²è¾¹ç•Œç”Ÿæˆè§„åˆ™ï¼ˆé‡è¦ï¼ï¼‰\n**å¿…é¡»ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ç¡®ä¿è¾¹ç•Œç›¸è¿ï¼š**\n\n1. **ç¬¬ä¸€ä¸ªå¤§æ´²ï¼ˆå·¦ä¸Šè§’ï¼‰**ï¼š\n   - å·¦ä¸Šè§’: (0, 0)\n   - å³ä¸Šè§’: (${w}, 0)\n   - å³ä¸‹è§’: (${w}, ${E})\n   - å·¦ä¸‹è§’: (0, ${E})\n   - å¯åœ¨ä¸­é—´æ·»åŠ 1-2ä¸ªç‚¹å½¢æˆè‡ªç„¶å½¢çŠ¶\n\n2. **å…¶ä»–å¤§æ´²**ï¼š\n   - å¿…é¡»ä¸ç›¸é‚»å¤§æ´²å…±äº«è¾¹ç•Œç‚¹\n   - ç½‘æ ¼è¾¹ç•Œçš„å››ä¸ªè§’ç‚¹å¿…é¡»ç²¾ç¡®å¯¹é½\n   - å¯åœ¨è¾¹ç•Œä¸­é—´æ·»åŠ 1-2ä¸ªç‚¹å½¢æˆè‡ªç„¶æ›²çº¿\n   - æ€»ç‚¹æ•°ï¼š4-6ä¸ªï¼ˆæ¨è4-5ä¸ªï¼‰\n\n### å¤§æ´²è¦æ±‚\n- è¾¹ç•Œ: 4-5ä¸ªåæ ‡ç‚¹ï¼ˆæœ€å¤š6ä¸ªï¼‰ï¼Œå½¢æˆç®€å•å¤šè¾¹å½¢\n- åæ ‡æ ¼å¼: {"x": æ•´æ•°, "y": æ•´æ•°}ï¼ŒèŒƒå›´0-10000\n- **è¦†ç›–: å¿…é¡»å®Œå…¨è¦†ç›–åœ°å›¾ï¼Œç›¸é‚»å¤§æ´²è¾¹ç•Œå¿…é¡»ç²¾ç¡®å¯¹æ¥ï¼Œä¸ç•™ç©ºéš™**\n- å‘½å: ç‹¬ç‰¹åç§°ï¼Œé¿å…æ–¹ä½è¯ï¼Œç¬¦åˆä¸–ç•ŒèƒŒæ™¯\n- æè¿°: è¯¦ç»†æè¿°å¤§é™†çš„åœ°ç†ç‰¹å¾ã€æ°”å€™ã€æ–‡åŒ–ç‰¹è‰²\n- ç‰¹è‰²: ç‹¬ç‰¹åœ°ç†ç‰¹å¾ï¼ˆé›ªåŸŸã€æ²™æ¼ ã€æ£®æ—ã€å±±è„‰ã€æµ·æ´‹ç­‰ï¼‰\n- åŠ¿åŠ›: æ¯ä¸ªå¤§æ´²1-3ä¸ªä¸»è¦åŠ¿åŠ›\n\n### æ¨èå½¢çŠ¶ï¼ˆç®€å•è§„åˆ™ï¼‰\n- **çŸ©å½¢å˜ä½“**ï¼šåœ¨çŸ©å½¢åŸºç¡€ä¸Šï¼ŒæŸæ¡è¾¹ä¸­é—´åŠ 1ä¸ªç‚¹å½¢æˆå‡¸èµ·æˆ–å‡¹é™·\n- **æ¢¯å½¢**ï¼šä¸Šä¸‹è¾¹ä¸ç­‰é•¿çš„å››è¾¹å½¢\n- **äº”è¾¹å½¢**ï¼šåœ¨çŸ©å½¢åŸºç¡€ä¸Šåˆ‡æ‰ä¸€ä¸ªè§’\n- âŒ ç¦æ­¢ï¼šå¤æ‚çš„å¤šè§’æ˜Ÿå½¢ã€ä¸è§„åˆ™é”¯é½¿çŠ¶\n\n### è¾¹ç•Œé“å¾‹\n- âœ… ç›¸é‚»å¤§æ´²å¿…é¡»å…±äº«è¾¹ç•Œç‚¹ï¼ˆç²¾ç¡®åˆ°åƒç´ ï¼‰\n- âœ… ç½‘æ ¼è§’ç‚¹å¿…é¡»å¯¹é½ï¼ˆå¦‚ (${w}, 0) å¿…é¡»æ˜¯ä¸¤ä¸ªå¤§æ´²çš„å…±åŒé¡¶ç‚¹ï¼‰\n- âœ… è¾¹ç•Œç‚¹æŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆé¡ºåºæ’åˆ—\n- âœ… å½¢çŠ¶ç®€æ´ï¼Œä¸è¦å¥‡å½¢æ€ªçŠ¶\n- âŒ ç¦æ­¢ï¼šè¾¹ç•Œä¸­é—´æ–­å¼€ã€ç•™æœ‰ç©ºéš™\n- âŒ ç¦æ­¢ï¼šè·¨è¶Šç½‘æ ¼è¾¹ç•Œ\n- âŒ ç¦æ­¢ï¼šè¿‡äºå¤æ‚çš„å½¢çŠ¶ï¼ˆè¶…è¿‡6ä¸ªç‚¹ï¼‰\n\n## åŠ¿åŠ›ç”Ÿæˆè¦æ±‚ï¼ˆ${t}ä¸ªï¼‰\n### è§„æ¨¡å…³ç³»ï¼ˆæ¸¸æˆåæ ‡ï¼‰\n- å¤§æ´²: è¶…å¤§åœ°ç†æ¿å—ï¼Œè·¨åº¦2000-5000åƒç´ ï¼ˆæ¸¸æˆåæ ‡ï¼‰\n- **åŠ¿åŠ›èŒƒå›´: å å¤§æ´²3%-8%ï¼Œè·¨åº¦150-400åƒç´ ï¼ˆæ¸¸æˆåæ ‡ï¼‰** âš ï¸ ä¸è¦å¤ªå¤§ï¼\n- åŠ¿åŠ›ä½ç½®: å¿…é¡»åœ¨å¯¹åº”å¤§æ´²è¾¹ç•Œå†…ï¼Œä½¿ç”¨æ¸¸æˆåæ ‡{"x": æ•°å­—, "y": æ•°å­—}\n- åŠ¿åŠ›èŒƒå›´å½¢çŠ¶: ç®€å•çš„4-5è¾¹å½¢ï¼Œä¸è¦å¤æ‚å½¢çŠ¶\n\n### å¿…éœ€å­—æ®µ\n1. **åŸºç¡€ä¿¡æ¯**\n   - åç§°ã€ç±»å‹ã€ç­‰çº§ï¼ˆè¶…çº§/ä¸€æµ/äºŒæµ/ä¸‰æµï¼‰\n   - æè¿°ã€å†å²èƒŒæ™¯\n   - ç‰¹è‰²ä¸“é•¿ï¼ˆæ•°ç»„æ ¼å¼ï¼‰\n\n2. **é¢†å¯¼å±‚å­—æ®µ**ï¼ˆå‰ç«¯ç›´æ¥æ˜¾ç¤ºï¼‰\n\`\`\`json\n{\n  "å®—ä¸»": "å…·ä½“å§“åï¼ˆå¦‚ï¼šæ¬§é˜³çƒˆé£ï¼‰",\n  "å®—ä¸»ä¿®ä¸º": "å…·ä½“å¢ƒç•Œï¼ˆå¦‚ï¼šåŒ–ç¥ä¸­æœŸï¼‰",\n  "æœ€å¼ºä¿®ä¸º": "å®—é—¨æœ€é«˜å¢ƒç•Œï¼ˆå¿…å¡«ï¼‰",\n  "ç»¼åˆæˆ˜åŠ›": æ•°å­—1-100,\n  "æ ¸å¿ƒå¼Ÿå­æ•°": æ•°å­—,\n  "å†…é—¨å¼Ÿå­æ•°": æ•°å­—,\n  "å¤–é—¨å¼Ÿå­æ•°": æ•°å­—\n}\n\`\`\`\n\n3. **æˆå‘˜æ•°é‡å­—æ®µ**ï¼ˆå‰ç«¯æ˜¾ç¤ºï¼‰\n\`\`\`json\n{\n  "æ€»æ•°": æ€»äººæ•°,\n  "æŒ‰å¢ƒç•Œ": {\n    // ğŸš¨ å¢ƒç•Œä¸èƒ½è¶…è¿‡é¢†å¯¼å±‚.æœ€å¼ºä¿®ä¸º\n    // å¢ƒç•Œç­‰çº§ï¼šç»ƒæ°”æœŸ < ç­‘åŸºæœŸ < é‡‘ä¸¹æœŸ < å…ƒå©´æœŸ < åŒ–ç¥æœŸ < ç‚¼è™šæœŸ < åˆä½“æœŸ < æ¸¡åŠ«æœŸ\n    "ç»ƒæ°”æœŸ": æ•°é‡,\n    "ç­‘åŸºæœŸ": æ•°é‡\n  },\n  "æŒ‰èŒä½": {\n    "æ•£ä¿®": 0,\n    "å¤–é—¨å¼Ÿå­": æ•°é‡,\n    "å†…é—¨å¼Ÿå­": æ•°é‡,\n    "æ ¸å¿ƒå¼Ÿå­": æ•°é‡,\n    "ä¼ æ‰¿å¼Ÿå­": æ•°é‡,\n    "æ‰§äº‹": æ•°é‡,\n    "é•¿è€": æ•°é‡,\n    "å¤ªä¸Šé•¿è€": æ•°é‡ï¼ˆå¯é€‰ï¼Œå¤§åŠ¿åŠ›æ‰æœ‰ï¼‰,\n    "å‰¯æŒé—¨": 1,\n    "æŒé—¨": 1\n  }\n}\n\`\`\`\n\n### æ•°æ®ä¸€è‡´æ€§\n- æ€»æ•° = æŒ‰èŒä½æ‰€æœ‰èŒä½æ€»å’Œ\n- æŒ‰å¢ƒç•Œæ€»å’Œ = æ€»æ•°\n- æŒ‰å¢ƒç•Œå¢ƒç•Œ â‰¤ æœ€å¼ºä¿®ä¸º\n- æ‰€æœ‰æ•°å€¼å¿…é¡»æ˜¯æ•°å­—ç±»å‹\n\n### äººåè¦æ±‚\n- å…·ä½“ä¸­å¼å§“åï¼ˆæ¬§é˜³çƒˆé£ã€å¸å¾’äº‘é›…ã€ç‹¬å­¤å‰‘å¿ƒï¼‰\n- 2-3ä¸ªæ±‰å­—ï¼Œç¬¦åˆä¼ ç»Ÿå‘½å\n- æ¯ä¸ªäººåå”¯ä¸€ï¼Œä¸é‡å¤\n\n## åœ°ç‚¹ç”Ÿæˆè¦æ±‚ï¼ˆ${n}ä¸ªï¼‰\n### åˆ†å¸ƒ\n- åŠ¿åŠ›æ€»éƒ¨: ${o}ä¸ª\n- åŸé•‡åŠå¸‚: ${s}ä¸ª\n- ç‰¹æ®Šåœ°ç‚¹: ${l}ä¸ª\n- å±é™©åŒºåŸŸ: ${c}ä¸ª\n- è‡ªç„¶æ™¯è§‚: ${d}ä¸ª\n\n### 7ç§æ ‡å‡†ç±»å‹\n1. natural_landmark - è‡ªç„¶åœ°æ ‡ï¼ˆåå±±å¤§å·ï¼‰\n2. sect_power - åŠ¿åŠ›æ€»éƒ¨ï¼ˆå®—é—¨å±±é—¨ï¼‰\n3. city_town - åŸé•‡èšå±…åœ°ï¼ˆåŠå¸‚ã€åŸæ± ï¼‰\n4. blessed_land - ä¿®ç‚¼åœ£åœ°ï¼ˆæ´å¤©ç¦åœ°ï¼‰\n5. treasure_land - èµ„æºå®åœ°ï¼ˆå¥‡çå¼‚åœ°ï¼‰\n6. dangerous_area - å±é™©åŒºåŸŸï¼ˆå‡¶é™©ä¹‹åœ°ï¼‰\n7. special_other - ç‰¹æ®Šåœ°ç‚¹ï¼ˆå…¶ä»–ç‰¹æ®Šï¼‰\n\n### ç‰¹æ®Šå±æ€§ï¼ˆ${r}ä¸ªï¼‰\n- æœºé‡ä¹‹åœ°: ${u}ä¸ª\n- ä¼ æ‰¿é—è¿¹: ${m}ä¸ª\n- å±é™©ç¦åœ°: ${p}ä¸ª\n\n### åœ°ç‚¹åæ ‡è¦æ±‚ï¼ˆé‡è¦ï¼‰\n- åæ ‡æ ¼å¼: "åæ ‡": {"x": æ•°å­—, "y": æ•°å­—}\n- åæ ‡èŒƒå›´: xå’Œyå¿…é¡»åœ¨0-10000ä¹‹é—´ï¼ˆæ¸¸æˆåæ ‡ï¼‰\n- åœ°ç‚¹ä½ç½®å¿…é¡»åœ¨å¯¹åº”å¤§æ´²è¾¹ç•Œå†…\n- åŠ¿åŠ›æ€»éƒ¨åœ°ç‚¹åæ ‡åº”è¯¥ä¸åŠ¿åŠ›"ä½ç½®"åæ ‡ç›¸åŒæˆ–æ¥è¿‘\n- å¯åœ¨åŠ¿åŠ›èŒƒå›´å†…å¤–\n- ä¸­ç«‹åœ°ç‚¹å¯ä¸å±äºä»»ä½•åŠ¿åŠ›\n- ç¦æ­¢ä½¿ç”¨ç»çº¬åº¦æˆ–å…¶ä»–åæ ‡ç³»ç»Ÿ\n\n## æ•°æ®ç»“æ„æ£€æŸ¥\n### ä¸¥ç¦é”™è¯¯æ ¼å¼\n- âœ— ç©ºæ•°ç»„: "åŠ¿åŠ›èŒƒå›´": []\n- âœ— ç©ºæ•°ç»„: "å¤§æ´²è¾¹ç•Œ": []\n- âœ— ç©ºæ•°ç»„: "åœ°ç†ç‰¹å¾": []\n- âœ— ç©ºæ•°ç»„: "å¤©ç„¶å±éšœ": []\n- âœ— æ— æ•ˆåæ ‡: "ä½ç½®": "åˆå§‹åœ°"\n- âœ— ç¼ºå¤±å¿…éœ€å­—æ®µ\n- âœ— åŠ¿åŠ›èŒƒå›´å°‘äº4ä¸ªç‚¹\n- âœ— å¤§æ´²è¾¹ç•Œå°‘äº4ä¸ªç‚¹æˆ–è¶…è¿‡8ä¸ªç‚¹\n- âœ— å¤§æ´²è¾¹ç•Œç‚¹é¡ºåºé”™è¯¯ï¼ˆå¿…é¡»æŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆæ’åˆ—ï¼Œç›¸é‚»ç‚¹è¿æ¥ï¼‰\n\n### å¿…éœ€å­—æ®µ\n**åŠ¿åŠ›**ï¼š\n- ä½ç½®ï¼ˆå¯¹è±¡ï¼Œæ¸¸æˆåæ ‡ï¼‰: {"x": æ•°å­—, "y": æ•°å­—}\n- åŠ¿åŠ›èŒƒå›´ï¼ˆâ‰¥4ç‚¹ï¼ŒæŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆé¡ºåºï¼Œæ¸¸æˆåæ ‡ï¼‰\n- é¢†å¯¼å±‚ï¼ˆå®Œæ•´ï¼‰\n- æˆå‘˜æ•°é‡ï¼ˆå®Œæ•´ï¼‰\n\n**åœ°ç‚¹**ï¼š\n- åæ ‡ï¼ˆå¯¹è±¡ï¼Œæ¸¸æˆåæ ‡ï¼‰: {"x": æ•°å­—, "y": æ•°å­—}\n- åç§°ï¼ˆå­—ç¬¦ä¸²ï¼‰\n- ç±»å‹ï¼ˆ7ç§ç±»å‹ä¹‹ä¸€ï¼‰\n- æè¿°ï¼ˆè¯¦ç»†æè¿°ï¼‰\n\n**å¤§æ´²**ï¼š\n- å¤§æ´²è¾¹ç•Œï¼ˆ4-6ç‚¹ï¼Œæ¨è4-5ç‚¹ï¼Œ**å¿…é¡»æŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆé¡ºåºæ’åˆ—å½¢æˆé—­åˆå¤šè¾¹å½¢**ï¼Œæ¸¸æˆåæ ‡ï¼‰\n- åœ°ç†ç‰¹å¾ï¼ˆâ‰¥3ä¸ªï¼‰\n- å¤©ç„¶å±éšœï¼ˆâ‰¥2ä¸ªï¼‰\n- æè¿°ï¼ˆè¯¦ç»†çš„åœ°ç†å’Œæ–‡åŒ–æè¿°ï¼‰\n\n## JSONè¾“å‡ºæ ¼å¼\n\`\`\`json\n{\n  "continents": [\n    {\n      "id": "continent_1",\n      "åç§°": "å¤§æ´²åç§°",\n      "æè¿°": "åœ°ç†ç‰¹å¾å’Œæ–‡åŒ–æè¿°",\n      "æ°”å€™": "æ°”å€™ç±»å‹",\n      "åœ°ç†ç‰¹å¾": ["ç‰¹å¾1", "ç‰¹å¾2", "ç‰¹å¾3"],\n      "å¤©ç„¶å±éšœ": ["å±éšœ1", "å±éšœ2"],\n      "å¤§æ´²è¾¹ç•Œ": [\n        {"x": 0, "y": 0},\n        {"x": ${w}, "y": 0},\n        {"x": ${w}, "y": ${E}},\n        {"x": 0, "y": ${E}}\n      ],\n      // âš ï¸ æ¸¸æˆåæ ‡ç³»ç»Ÿï¼šx: 0-10000, y: 0-10000ï¼ˆåƒç´ åæ ‡ï¼Œä¸æ˜¯ç»çº¬åº¦ï¼‰\n      // âš ï¸ å¤§æ´²è¾¹ç•Œå¿…é¡»æŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆé¡ºåºæ’åˆ—ï¼Œç›¸é‚»ç‚¹è¿æ¥å½¢æˆé—­åˆå¤šè¾¹å½¢\n      // âš ï¸ ç›¸é‚»å¤§æ´²å¿…é¡»å…±äº«è¾¹ç•Œç‚¹ï¼Œç¡®ä¿æ— ç¼å¯¹æ¥ï¼\n      // âš ï¸ ç½‘æ ¼è§’ç‚¹å¿…é¡»ç²¾ç¡®å¯¹é½ï¼ˆå¦‚ç¬¬ä¸€ä¸ªå¤§æ´²çš„å³ä¸Šè§’ (${w}, 0) å¿…é¡»æ˜¯ç¬¬äºŒä¸ªå¤§æ´²çš„å·¦ä¸Šè§’ï¼‰\n      // âš ï¸ æ¨è4-5ä¸ªç‚¹ï¼Œæœ€å¤š6ä¸ªç‚¹ï¼Œä¿æŒå½¢çŠ¶ç®€æ´\n      // âš ï¸ ç¤ºä¾‹ï¼šçŸ©å½¢å˜ä½“å¯ä»¥åœ¨å³è¾¹ä¸­é—´åŠ ä¸€ä¸ªç‚¹ {"x": ${w}, "y": ${Math.floor(E/2)}} å½¢æˆå‡¸èµ·\n      "ä¸»è¦åŠ¿åŠ›": ["åŠ¿åŠ›IDåˆ—è¡¨"]\n    }\n  ],\n  "factions": [\n    {\n      "id": "faction_1",\n      "åç§°": "åŠ¿åŠ›åç§°",\n      "ç±»å‹": "ä¿®ä»™å®—é—¨/ä¿®ä»™ä¸–å®¶/é­”é“åŠ¿åŠ›ç­‰",\n      "ç­‰çº§": "è¶…çº§/ä¸€æµ/äºŒæµ/ä¸‰æµ",\n      "æè¿°": "åŠ¿åŠ›èƒŒæ™¯æè¿°",\n      "ç‰¹è‰²": ["ä¸“é•¿1", "ä¸“é•¿2"],\n      "ä¸ç©å®¶å…³ç³»": "ä¸­ç«‹",\n      "å£°æœ›å€¼": "ç¨‹åºè‡ªåŠ¨è®¡ç®—",\n      "ä½ç½®": {"x": 2500, "y": 1500},\n      // âš ï¸ ä½ç½®ä½¿ç”¨æ¸¸æˆåæ ‡ (0-10000)ï¼Œä¸æ˜¯ç»çº¬åº¦\n      "åŠ¿åŠ›èŒƒå›´": [\n        {"x": 2300, "y": 1300},\n        {"x": 2700, "y": 1300},\n        {"x": 2700, "y": 1700},\n        {"x": 2300, "y": 1700}\n      ],\n      // âš ï¸ åŠ¿åŠ›èŒƒå›´åæ ‡å¿…é¡»åœ¨æ¸¸æˆåæ ‡ç³»ç»Ÿå†… (0-10000)ï¼Œä¸æ˜¯ç»çº¬åº¦\n      // âš ï¸ åŠ¿åŠ›èŒƒå›´å¿…é¡»æŒ‰é¡ºæ—¶é’ˆæˆ–é€†æ—¶é’ˆé¡ºåºæ’åˆ—\n      // âš ï¸ åŠ¿åŠ›èŒƒå›´å¿…é¡»åœ¨å¯¹åº”å¤§æ´²è¾¹ç•Œå†…\n      // âš ï¸ åŠ¿åŠ›èŒƒå›´ä¸è¦å¤ªå¤§ï¼è·¨åº¦å»ºè®®150-400åƒç´ ï¼Œå å¤§æ´²3%-8%\n      // âš ï¸ å½¢çŠ¶ç®€å•ï¼š4-5ä¸ªç‚¹çš„çŸ©å½¢æˆ–äº”è¾¹å½¢å³å¯\n      "é¢†å¯¼å±‚": {\n        "å®—ä¸»": "æ¬§é˜³çƒˆé£",\n        "å®—ä¸»ä¿®ä¸º": "åŒ–ç¥ä¸­æœŸ",\n        "å‰¯å®—ä¸»": "ç‹æ˜æœˆ",\n        "æœ€å¼ºä¿®ä¸º": "åŒ–ç¥å¤§åœ†æ»¡",\n        "ç»¼åˆæˆ˜åŠ›": 85,\n        "æ ¸å¿ƒå¼Ÿå­æ•°": 50,\n        "å†…é—¨å¼Ÿå­æ•°": 300,\n        "å¤–é—¨å¼Ÿå­æ•°": 1200\n      },\n      "æˆå‘˜æ•°é‡": {\n        "æ€»æ•°": 1565,\n        "æŒ‰å¢ƒç•Œ": {\n          "ç»ƒæ°”æœŸ": 1200,\n          "ç­‘åŸºæœŸ": 300,\n          "é‡‘ä¸¹æœŸ": 50,\n          "å…ƒå©´æœŸ": 10,\n          "åŒ–ç¥æœŸ": 5\n        },\n        "æŒ‰èŒä½": {\n          "æ•£ä¿®": 0,\n          "å¤–é—¨å¼Ÿå­": 1200,\n          "å†…é—¨å¼Ÿå­": 300,\n          "æ ¸å¿ƒå¼Ÿå­": 50,\n          "ä¼ æ‰¿å¼Ÿå­": 10,\n          "æ‰§äº‹": 20,\n          "é•¿è€": 15,\n          "å¤ªä¸Šé•¿è€": 1,\n          "å‰¯æŒé—¨": 1,\n          "æŒé—¨": 1\n        }\n      },\n      "æ‰€å±å¤§æ´²": "continent_1"\n    }\n  ],\n  "locations": [\n    {\n      "id": "loc_1",\n      "åç§°": "åœ°ç‚¹åç§°",\n      "ç±»å‹": "sect_power",\n      "åæ ‡": {"x": 2500, "y": 1500},\n      // âš ï¸ åœ°ç‚¹åæ ‡ä½¿ç”¨æ¸¸æˆåæ ‡ç³»ç»Ÿ (0-10000)ï¼Œä¸æ˜¯ç»çº¬åº¦\n      // âš ï¸ åœ°ç‚¹åæ ‡å¿…é¡»åœ¨å¯¹åº”å¤§æ´²è¾¹ç•Œå†…\n      // âš ï¸ åŠ¿åŠ›æ€»éƒ¨åœ°ç‚¹åæ ‡åº”ä¸åŠ¿åŠ›"ä½ç½®"åæ ‡ç›¸åŒ\n      "æè¿°": "åœ°ç‚¹è¯¦ç»†æè¿°",\n      "å®‰å…¨ç­‰çº§": "å®‰å…¨",\n      "é€‚åˆå¢ƒç•Œ": ["ç­‘åŸºæœŸä»¥ä¸Š"],\n      "æ‰€å±åŠ¿åŠ›": "é’äº‘å®—",\n      "ç‰¹æ®Šç‰¹å¾": ["æŠ¤å±±å¤§é˜µ", "çµæ°”å……æ²›"],\n      "ç‰¹æ®Šå±æ€§": []\n    }\n  ]\n}\n\`\`\`\n\n## æœ€ç»ˆæ£€æŸ¥æ¸…å•\nç”Ÿæˆå‰å¿…é¡»ç¡®è®¤ï¼š\n1. âœ… continentsæ•°ç»„æœ‰${a}ä¸ªå¯¹è±¡ï¼Œè¾¹ç•Œä¸é‡å \n2. âœ… factionsæ•°ç»„æœ‰${t}ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯0ä¸ªï¼‰\n3. âœ… locationsæ•°ç»„æœ‰${n}ä¸ªå¯¹è±¡ï¼ˆä¸æ˜¯0ä¸ªï¼‰\n4. âœ… æ¯ä¸ªåŠ¿åŠ›æœ‰å®Œæ•´é¢†å¯¼å±‚å’Œæˆå‘˜æ•°é‡\n5. âœ… æ¯ä¸ªåŠ¿åŠ›èŒƒå›´â‰¥4ä¸ªåæ ‡ç‚¹\n6. âœ… æ¯ä¸ªå¤§æ´²è¾¹ç•Œ4-8ä¸ªåæ ‡ç‚¹\n7. âœ… æ‰€æœ‰åæ ‡ä¸ºæ•°å­—ç±»å‹ï¼ŒèŒƒå›´åœ¨0-10000ä¹‹é—´\n8. âœ… æˆå‘˜æ•°é‡æ•°æ®ä¸€è‡´æ€§\n9. âœ… æŒ‰å¢ƒç•Œå¢ƒç•Œâ‰¤æœ€å¼ºä¿®ä¸º\n10. âœ… é¿å…é‡å¤åç§°\n\nğŸ”¥ æ ¸å¿ƒç›®æ ‡ï¼šåˆ›é€ ç‹¬ä¸€æ— äºŒçš„ä¸–ç•Œï¼ŒåŒ…å«å®Œæ•´åŠ¿åŠ›ç»„ç»‡æ¶æ„ï¼\n\nç°åœ¨è¯·ç”Ÿæˆå®Œæ•´JSONæ•°æ®ï¼Œç¡®ä¿æ‰€æœ‰æ•°ç»„éƒ½ä¸ä¸ºç©ºï¼\n`}}},4227:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.action-menu[data-v-4273a3ac] {\n  position: fixed;\n  z-index: 120;\n}\n.overlay[data-v-4273a3ac] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.2);\n  backdrop-filter: blur(2px);\n  z-index: 0;\n}\n.fab[data-v-4273a3ac] {\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  background: var(--color-surface);\n  backdrop-filter: blur(10px);\n  border: 1px solid var(--color-border);\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.25s ease;\n  position: relative;\n  z-index: 2;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.fab[data-v-4273a3ac]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-primary);\n  border-color: var(--color-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);\n}\n.menu[data-v-4273a3ac] {\n  position: absolute;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 10px;\n  border-radius: 14px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.2);\n  backdrop-filter: blur(14px);\n  -webkit-backdrop-filter: blur(14px);\n  z-index: 2;\n  min-width: 180px;\n  white-space: nowrap;\n}\n[data-v-4273a3ac] .action-menu-item {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  border-radius: 10px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  text-align: left;\n  width: 100%;\n  text-decoration: none;\n  font-family: inherit;\n  font-size: 0.95rem;\n  box-sizing: border-box;\n}\n\n/* ç¡®ä¿ <a> æ ‡ç­¾ä½œä¸ºèœå•é¡¹æ—¶æ ·å¼ä¸€è‡´ */\n[data-v-4273a3ac] a.action-menu-item {\n  display: flex;\n}\n[data-v-4273a3ac] .action-menu-item:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n  transform: translateX(-2px);\n}\n[data-v-4273a3ac] .action-menu-item.is-disabled {\n  opacity: 0.55;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n[data-v-4273a3ac] .action-menu-item span {\n  font-size: 0.95rem;\n  letter-spacing: 0.05em;\n}\n[data-v-4273a3ac] .action-menu-item.is-danger {\n  border-color: rgba(239, 68, 68, 0.25);\n  color: var(--color-error);\n}\n[data-v-4273a3ac] .action-menu-item.is-danger:hover {\n  border-color: var(--color-error);\n  background: rgba(239, 68, 68, 0.1);\n}\n.pos-bottom-right .menu[data-v-4273a3ac] {\n  bottom: 62px;\n}\n.pos-top-right .menu[data-v-4273a3ac] {\n  top: 62px;\n}\n.menu-fade-enter-active[data-v-4273a3ac],\n.menu-fade-leave-active[data-v-4273a3ac] {\n  transition: opacity 0.18s ease;\n}\n.menu-fade-enter-from[data-v-4273a3ac],\n.menu-fade-leave-to[data-v-4273a3ac] {\n  opacity: 0;\n}\n.menu-pop-enter-active[data-v-4273a3ac],\n.menu-pop-leave-active[data-v-4273a3ac] {\n  transition: transform 0.18s ease, opacity 0.18s ease;\n}\n.menu-pop-enter-from[data-v-4273a3ac],\n.menu-pop-leave-to[data-v-4273a3ac] {\n  opacity: 0;\n  transform: translateY(6px) scale(0.98);\n}\n@media (max-width: 600px) {\n.action-menu[data-v-4273a3ac] {\n    bottom: 12px;\n    right: 12px;\n    top: auto;\n}\n.pos-top-right[data-v-4273a3ac] {\n    top: 12px;\n    bottom: auto;\n}\n.fab[data-v-4273a3ac] {\n    width: 40px;\n    height: 40px;\n    border-radius: 10px;\n}\n.pos-bottom-right .menu[data-v-4273a3ac] {\n    bottom: 52px;\n    min-width: 150px;\n}\n.pos-top-right .menu[data-v-4273a3ac] {\n    top: 52px;\n    min-width: 150px;\n}\n}\n",""]);const s=i},4270:(e,t,n)=>{"use strict";n.d(t,{T:()=>c,o:()=>l});var a=n(4061);const r=(0,a.ref)([]);let o=0;const i=e=>{const t=r.value.findIndex(t=>t.id===e);t>-1&&r.value.splice(t,1)},s=(e,t,n={})=>{const a=n.id||"toast-"+o++;i(a);const s=n.duration??("loading"===e?void 0:3e3),l={id:a,type:e,message:t,duration:s};return r.value.push(l),void 0!==s&&setTimeout(()=>{i(a)},s),a},l={success:(e,t={})=>s("success",e,t),error:(e,t={})=>s("error",e,t),warning:(e,t={})=>s("warning",e,t),info:(e,t={})=>s("info",e,t),loading:(e,t={})=>{const n=void 0===t.duration?void 0:t.duration;return s("loading",e,{...t,duration:n})},hide:i},c=(0,a.readonly)(r)},4316:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n.attribute-allocation-container[data-v-4bef2e09] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  color: var(--color-text);\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 1.5rem;\n}\n.header[data-v-4bef2e09] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1.5rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid rgba(147, 197, 253, 0.2);\n}\n.points-display .negative[data-v-4bef2e09] {\n  color: #f87171 !important;\n}\nh2[data-v-4bef2e09] {\n  margin: 0;\n  color: #93c5fd;\n  font-size: 1.5rem;\n  text-shadow: 0 0 20px rgba(147, 197, 253, 0.3);\n}\n.points-display[data-v-4bef2e09] {\n  font-size: 1.2rem;\n  color: #94a3b8;\n}\n.points-display span[data-v-4bef2e09] {\n  font-weight: 600;\n  color: #fbbf24;\n  font-size: 1.5rem;\n}\n.attributes-list[data-v-4bef2e09] {\n  overflow-y: auto;\n  flex-grow: 1;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.attributes-list[data-v-4bef2e09]::-webkit-scrollbar { width: 6px;\n}\n.attributes-list[data-v-4bef2e09]::-webkit-scrollbar-track { background: transparent;\n}\n.attributes-list[data-v-4bef2e09]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.attribute-item[data-v-4bef2e09] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 0.5rem;\n  margin-bottom: 0.5rem;\n  border-radius: 8px;\n  background: rgba(30, 41, 59, 0.4);\n  border: 1px solid transparent;\n  transition: all 0.25s ease;\n}\n.attribute-item[data-v-4bef2e09]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(147, 197, 253, 0.2);\n}\n.attribute-item[data-v-4bef2e09]:last-child {\n  margin-bottom: 0;\n}\n.attribute-info[data-v-4bef2e09] {\n  flex-basis: 70%;\n}\n.attribute-name[data-v-4bef2e09] {\n  font-size: 1.1rem;\n  font-weight: 500;\n  color: #93c5fd;\n}\n.attribute-desc[data-v-4bef2e09] {\n  font-size: 0.85rem;\n  color: #94a3b8;\n  margin: 0.3rem 0 0 0;\n  line-height: 1.4;\n}\n.attribute-controls[data-v-4bef2e09] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.attribute-controls button[data-v-4bef2e09] {\n  width: 35px;\n  height: 35px;\n  border-radius: 50%;\n  background: rgba(30, 41, 59, 0.6);\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  color: #93c5fd;\n  font-size: 1.5rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.attribute-controls button[data-v-4bef2e09]:hover:not(:disabled) {\n  background: rgba(59, 130, 246, 0.3);\n  border-color: #93c5fd;\n  color: #bfdbfe;\n}\n.attribute-controls button[data-v-4bef2e09]:disabled,\n.attribute-controls button.disabled[data-v-4bef2e09] {\n  opacity: 0.4;\n  cursor: not-allowed;\n  background: rgba(30, 41, 59, 0.3);\n  border-color: rgba(255, 255, 255, 0.06);\n  color: #64748b;\n}\n.attribute-value[data-v-4bef2e09] {\n  font-size: 1.4rem;\n  font-weight: 600;\n  min-width: 30px;\n  text-align: center;\n  color: #f1f5f9;\n}\n.actions[data-v-4bef2e09] {\n  padding-top: 1rem;\n  display: flex;\n  justify-content: center;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n.actions button[data-v-4bef2e09] {\n  padding: 0.5rem 1.5rem;\n  border: 1px solid rgba(147, 197, 253, 0.3);\n  background: rgba(30, 41, 59, 0.6);\n  color: #f1f5f9;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n}\n.actions button[data-v-4bef2e09]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  border-color: rgba(147, 197, 253, 0.5);\n}\n.actions .btn-secondary[data-v-4bef2e09] {\n  border-color: rgba(148, 163, 184, 0.4);\n  color: #94a3b8;\n}\n.actions .btn-secondary[data-v-4bef2e09]:hover {\n  background: rgba(148, 163, 184, 0.2);\n  border-color: #94a3b8;\n  color: #f1f5f9;\n}\n.actions .btn-warning[data-v-4bef2e09] {\n  border-color: rgba(251, 191, 36, 0.4);\n  color: #fbbf24;\n}\n.actions .btn-warning[data-v-4bef2e09]:hover {\n  background: rgba(251, 191, 36, 0.2);\n  border-color: #fbbf24;\n  color: #fef3c7;\n}\n.actions .btn-success[data-v-4bef2e09] {\n  border-color: rgba(52, 211, 153, 0.4);\n  color: #34d399;\n}\n.actions .btn-success[data-v-4bef2e09]:hover {\n  background: rgba(52, 211, 153, 0.2);\n  border-color: #34d399;\n  color: #a7f3d0;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 768px) {\n.attribute-allocation-container[data-v-4bef2e09] {\n    padding-bottom: 1rem;\n}\n.header[data-v-4bef2e09] {\n    flex-direction: column;\n    gap: 0.5rem;\n    text-align: center;\n    padding-bottom: 0.75rem;\n    margin-bottom: 1rem;\n}\n.header h2[data-v-4bef2e09] {\n    font-size: 1.3rem;\n}\n.points-display[data-v-4bef2e09] {\n    font-size: 1rem;\n}\n.points-display span[data-v-4bef2e09] {\n    font-size: 1.2rem;\n}\n.attributes-list[data-v-4bef2e09] {\n    margin-bottom: 0.5rem;\n}\n.attribute-item[data-v-4bef2e09] {\n    flex-direction: row;\n    gap: 0.75rem;\n    padding: 0.75rem 0.5rem;\n}\n.attribute-info[data-v-4bef2e09] {\n    flex: 1;\n    min-width: 0;\n}\n.attribute-name[data-v-4bef2e09] {\n    font-size: 0.95rem;\n}\n.attribute-desc[data-v-4bef2e09] {\n    font-size: 0.75rem;\n    line-height: 1.3;\n}\n.attribute-controls[data-v-4bef2e09] {\n    justify-content: flex-end;\n    gap: 0.5rem;\n    flex-shrink: 0;\n}\n.attribute-controls button[data-v-4bef2e09] {\n    width: 32px;\n    height: 32px;\n    font-size: 1.4rem;\n}\n.attribute-value[data-v-4bef2e09] {\n    font-size: 1.2rem;\n    min-width: 28px;\n}\n.actions[data-v-4bef2e09] {\n    gap: 0.5rem;\n    padding: 0.75rem 0;\n}\n.actions button[data-v-4bef2e09] {\n    padding: 0.5rem 1rem;\n    font-size: 0.85rem;\n    flex: 1;\n    min-width: 70px;\n}\n}\n@media (max-width: 640px) {\n.header[data-v-4bef2e09] {\n    gap: 0.5rem;\n}\n.header h2[data-v-4bef2e09] {\n    font-size: 1.2rem;\n}\n.attribute-item[data-v-4bef2e09] {\n    flex-direction: column;\n    gap: 0.75rem;\n    padding: 1rem 0.5rem;\n    align-items: center;\n}\n.attribute-info[data-v-4bef2e09] {\n    flex-basis: auto;\n    text-align: center;\n    width: 100%;\n}\n.attribute-name[data-v-4bef2e09] {\n    font-size: 1rem;\n    display: block;\n    margin-bottom: 0.25rem;\n}\n.attribute-controls[data-v-4bef2e09] {\n    justify-content: center;\n    gap: 1rem;\n}\n.attribute-controls button[data-v-4bef2e09] {\n    width: 38px;\n    height: 38px;\n    font-size: 1.6rem;\n}\n.attribute-value[data-v-4bef2e09] {\n    font-size: 1.4rem;\n    min-width: 35px;\n}\n.actions[data-v-4bef2e09] {\n    gap: 0.5rem;\n    padding: 1rem 0 0.5rem;\n}\n.actions button[data-v-4bef2e09] {\n    padding: 0.6rem 1.2rem;\n    font-size: 0.9rem;\n}\n}\n@media (max-width: 480px) {\n.header h2[data-v-4bef2e09] {\n    font-size: 1.1rem;\n}\n.points-display[data-v-4bef2e09] {\n    font-size: 0.9rem;\n}\n.points-display span[data-v-4bef2e09] {\n    font-size: 1.1rem;\n}\n.attribute-name[data-v-4bef2e09] {\n    font-size: 0.95rem;\n}\n.attribute-desc[data-v-4bef2e09] {\n    font-size: 0.7rem;\n}\n.attribute-controls button[data-v-4bef2e09] {\n    width: 36px;\n    height: 36px;\n    font-size: 1.5rem;\n}\n.attribute-value[data-v-4bef2e09] {\n    font-size: 1.3rem;\n    min-width: 32px;\n}\n.actions[data-v-4bef2e09] {\n    flex-wrap: wrap;\n    padding: 0.75rem 0;\n}\n.actions button[data-v-4bef2e09] {\n    flex: 1 1 calc(33.333% - 0.5rem);\n    min-width: 80px;\n    padding: 0.6rem 0.75rem;\n    font-size: 0.85rem;\n}\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .attribute-allocation-container[data-v-4bef2e09] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .header[data-v-4bef2e09] {\n  border-bottom-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] h2[data-v-4bef2e09] {\n  color: #2563eb;\n}\n[data-theme="light"] .points-display[data-v-4bef2e09] {\n  color: #475569;\n}\n[data-theme="light"] .points-display span[data-v-4bef2e09] {\n  color: #d97706;\n}\n[data-theme="light"] .attribute-item[data-v-4bef2e09] {\n  background: rgba(255, 255, 255, 0.6);\n}\n[data-theme="light"] .attribute-item[data-v-4bef2e09]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .attribute-name[data-v-4bef2e09] {\n  color: #2563eb;\n}\n[data-theme="light"] .attribute-desc[data-v-4bef2e09] {\n  color: #475569;\n}\n[data-theme="light"] .attribute-value[data-v-4bef2e09] {\n  color: #1e293b;\n}\n[data-theme="light"] .attribute-controls button[data-v-4bef2e09] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #2563eb;\n}\n[data-theme="light"] .attribute-controls button[data-v-4bef2e09]:hover:not(:disabled) {\n  background: rgba(59, 130, 246, 0.1);\n  border-color: #3b82f6;\n}\n[data-theme="light"] .actions button[data-v-4bef2e09] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #1e293b;\n}\n[data-theme="light"] .actions button[data-v-4bef2e09]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.5);\n}\n',""]);const s=i},4417:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},4459:(e,t,n)=>{"use strict";n.d(t,{promptStorage:()=>o});var a=n(602),r=n(9990);const o=new class{db=null;async init(){this.db||(this.db=await(0,a.P2)("dad-prompts",1,{upgrade(e){e.objectStoreNames.contains("prompts")||e.createObjectStore("prompts",{keyPath:"key"})}}))}async loadAll(){await this.init();const e=(0,r.LB)(),t={};for(const n in e){const a=await this.db.get("prompts",n),r=a?.content||e[n].content,o=!1!==a?.enabled,i=void 0!==a?.weight?a.weight:e[n].weight;t[n]={key:n,name:e[n].name,content:r,modified:!!a&&a.content!==e[n].content,enabled:o,default:e[n].content,category:e[n].category,description:e[n].description,order:e[n].order,weight:i}}return t}async loadByCategory(){await this.init();const e=await this.loadAll(),t={};for(const[e,n]of Object.entries(r.y8))t[e]={info:n,prompts:[]};for(const n in e){const a=e[n],r=a.category;if(t[r])t[r].prompts.push(a);else{const e=Object.keys(t)[0];e&&t[e].prompts.push(a)}}for(const e in t)t[e].prompts.sort((e,t)=>(e.order||999)-(t.order||999));return t}async save(e,t,n=!0,a){await this.init(),await this.db.put("prompts",{key:e,content:t,modified:!0,enabled:n,weight:a,updatedAt:(new Date).toISOString()})}async setEnabled(e,t){await this.init();const n=(0,r.LB)(),a=await this.db.get("prompts",e),o=a?.content||n[e]?.content||"",i=a?.modified||!1;await this.db.put("prompts",{key:e,content:o,modified:i,enabled:t,updatedAt:(new Date).toISOString()})}async getEnabledPrompts(){const e=await this.loadAll();return Object.keys(e).filter(t=>e[t].enabled)}async isModified(e){await this.init();const t=await this.db.get("prompts",e);return!!t?.modified}async getSaved(e){await this.init();const t=await this.db.get("prompts",e);return t?{content:t.content,modified:t.modified}:null}async get(e){await this.init();const t=(0,r.LB)(),n=await this.db.get("prompts",e);return n?.modified?n.content:t[e]?.content||""}async reset(e){await this.init(),await this.db.delete("prompts",e)}async resetAll(){await this.init(),await this.db.clear("prompts")}async exportAll(){const e=await this.loadAll(),t={};for(const n in e)t[n]=e[n].content;return t}async importPrompts(e){await this.init();const t=(0,r.LB)();let n=0;for(const a in e)t[a]&&(await this.save(a,e[a]),n++);return n}}},4472:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(660),n.b),d=i()(r()),u=l()(c);d.push([e.id,`\n.api-management-panel[data-v-88390262] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  background: var(--color-background);\n  overflow: hidden;\n  padding: 1rem;\n  gap: 1rem;\n  position: relative;\n}\n\n/* å¤´éƒ¨ */\n.panel-header[data-v-88390262] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: var(--color-surface);\n  border-radius: 0.75rem;\n  border: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.header-left[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.header-icon[data-v-88390262] {\n  font-size: 1.5rem;\n}\n.header-info[data-v-88390262] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.panel-title[data-v-88390262] {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1e293b;\n}\n.settings-subtitle[data-v-88390262] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.header-actions[data-v-88390262] {\n  display: flex;\n  gap: 0.5rem;\n}\n.action-btn[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  border: 1px solid var(--color-border);\n  border-radius: 0.5rem;\n  background: var(--color-surface);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.875rem;\n}\n.action-btn[data-v-88390262]:hover {\n  background: #f1f5f9;\n  border-color: #94a3b8;\n}\n.action-btn.primary[data-v-88390262] {\n  background: #3b82f6;\n  border-color: #3b82f6;\n  color: white;\n}\n.action-btn.primary[data-v-88390262]:hover {\n  background: #2563eb;\n  border-color: #2563eb;\n}\n\n/* å†…å®¹åŒºåŸŸ */\n.settings-container[data-v-88390262] {\n  flex: 1;\n  overflow-y: auto;\n  min-height: 0;\n  padding: 0 0.5rem 3rem 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(100, 116, 139, 0.3) rgba(243, 244, 246, 0.5);\n}\n.settings-container[data-v-88390262]::-webkit-scrollbar {\n  width: 8px;\n}\n.settings-container[data-v-88390262]::-webkit-scrollbar-track {\n  background: rgba(243, 244, 246, 0.5);\n  border-radius: 4px;\n}\n.settings-container[data-v-88390262]::-webkit-scrollbar-thumb {\n  background: rgba(100, 116, 139, 0.3);\n  border-radius: 4px;\n}\n\n/* è®¾ç½®åŒºå— */\n.settings-section[data-v-88390262] {\n  margin-bottom: 1.5rem;\n  background: white;\n  border-radius: 0.75rem;\n  border: 1px solid #e2e8f0;\n  overflow: hidden;\n}\n.section-header[data-v-88390262] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.25rem;\n  background: #f8fafc;\n  border-bottom: 1px solid #e2e8f0;\n}\n.section-title[data-v-88390262] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: #1e293b;\n}\n.section-count[data-v-88390262] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n\n/* APIå¡ç‰‡åˆ—è¡¨ */\n.api-list[data-v-88390262] {\n  padding: 0.75rem;\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.api-card[data-v-88390262] {\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 0.75rem;\n  overflow: hidden;\n  transition: all 0.2s ease;\n}\n.api-card[data-v-88390262]:hover {\n  border-color: #94a3b8;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n}\n.api-card.disabled[data-v-88390262] {\n  opacity: 0.6;\n}\n.api-card.default[data-v-88390262] {\n  border-color: #3b82f6;\n  background: linear-gradient(135deg, #eff6ff 0%, #f8fafc 100%);\n}\n.api-card-header[data-v-88390262] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background: white;\n  border-bottom: 1px solid #e2e8f0;\n}\n.api-info[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.api-name[data-v-88390262] {\n  font-weight: 600;\n  color: #1e293b;\n}\n.api-provider[data-v-88390262] {\n  font-size: 0.75rem;\n  color: #64748b;\n  background: #e2e8f0;\n  padding: 0.125rem 0.5rem;\n  border-radius: 1rem;\n}\n.api-actions[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.icon-btn[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: 0.375rem;\n  background: transparent;\n  color: #64748b;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.icon-btn[data-v-88390262]:hover {\n  background: #e2e8f0;\n  color: #1e293b;\n}\n.icon-btn.danger[data-v-88390262]:hover {\n  background: #fee2e2;\n  color: #dc2626;\n}\n.icon-btn[data-v-88390262]:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n.api-card-body[data-v-88390262] {\n  padding: 0.75rem 1rem;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 1rem;\n}\n.api-detail[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n}\n.detail-label[data-v-88390262] {\n  color: #64748b;\n}\n.detail-value[data-v-88390262] {\n  color: #1e293b;\n  font-weight: 500;\n}\n.detail-value.url[data-v-88390262] {\n  max-width: 200px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.detail-value.success[data-v-88390262] {\n  color: #059669;\n}\n.detail-value.fail[data-v-88390262] {\n  color: #dc2626;\n}\n.detail-value.unknown[data-v-88390262] {\n  color: #64748b;\n}\n.api-card-footer[data-v-88390262] {\n  padding: 0.5rem 1rem;\n  background: rgba(59, 130, 246, 0.05);\n  border-top: 1px solid #e2e8f0;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.assigned-label[data-v-88390262] {\n  font-size: 0.75rem;\n  color: #64748b;\n}\n.assigned-tags[data-v-88390262] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n}\n.function-tag[data-v-88390262] {\n  font-size: 0.75rem;\n  background: #3b82f6;\n  color: white;\n  padding: 0.125rem 0.5rem;\n  border-radius: 1rem;\n}\n\n/* è®¾ç½®åˆ—è¡¨ */\n.settings-list[data-v-88390262] {\n  padding: 0.5rem;\n}\n.setting-item[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-radius: 0.5rem;\n  transition: background 0.2s ease;\n}\n.setting-item[data-v-88390262]:hover {\n  background: #f8fafc;\n}\n.setting-info[data-v-88390262] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.setting-name[data-v-88390262] {\n  font-weight: 500;\n  color: #1e293b;\n}\n.setting-desc[data-v-88390262] {\n  font-size: 0.875rem;\n  color: #64748b;\n}\n.setting-control[data-v-88390262] {\n  display: flex;\n  align-items: center;\n}\n.setting-select[data-v-88390262] {\n  padding: 0.5rem 2rem 0.5rem 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  background-color: white;\n  background-image: url(${u});\n  background-repeat: no-repeat;\n  background-position: right 0.75rem center;\n  background-size: 12px;\n  color: #374151;\n  font-size: 0.875rem;\n  cursor: pointer;\n  appearance: none;\n  min-width: 140px;\n}\n\n/* å¼€å…³æ ·å¼ */\n.setting-switch[data-v-88390262] {\n  position: relative;\n  display: inline-block;\n  width: 44px;\n  height: 24px;\n}\n.setting-switch input[data-v-88390262] {\n  opacity: 0;\n  width: 0;\n  height: 0;\n}\n.switch-slider[data-v-88390262] {\n  position: absolute;\n  cursor: pointer;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #cbd5e1;\n  transition: 0.2s;\n  border-radius: 24px;\n}\n.switch-slider[data-v-88390262]:before {\n  position: absolute;\n  content: '';\n  height: 18px;\n  width: 18px;\n  left: 3px;\n  bottom: 3px;\n  background-color: white;\n  transition: 0.2s;\n  border-radius: 50%;\n}\ninput:checked + .switch-slider[data-v-88390262] {\n  background-color: #3b82f6;\n}\ninput:checked + .switch-slider[data-v-88390262]:before {\n  transform: translateX(20px);\n}\n\n/* æ¨¡æ€æ¡† */\n.modal-overlay[data-v-88390262] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.modal-content[data-v-88390262] {\n  background: white;\n  border-radius: 1rem;\n  width: 90%;\n  max-width: 500px;\n  max-height: 90vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.modal-header[data-v-88390262] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid #e2e8f0;\n}\n.modal-header h3[data-v-88390262] {\n  margin: 0;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: #1e293b;\n}\n.close-btn[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border: none;\n  border-radius: 0.5rem;\n  background: transparent;\n  color: #64748b;\n  cursor: pointer;\n}\n.close-btn[data-v-88390262]:hover {\n  background: #f1f5f9;\n  color: #1e293b;\n}\n.modal-body[data-v-88390262] {\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n.form-group[data-v-88390262] {\n  margin-bottom: 1rem;\n}\n.form-group label[data-v-88390262] {\n  display: block;\n  font-weight: 500;\n  color: #374151;\n  margin-bottom: 0.5rem;\n}\n.form-input[data-v-88390262],\n.form-select[data-v-88390262] {\n  width: 100%;\n  padding: 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.5rem;\n  font-size: 0.875rem;\n  background: white;\n  color: #374151;\n  box-sizing: border-box;\n}\n.form-input[data-v-88390262]:focus,\n.form-select[data-v-88390262]:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n}\n.form-row[data-v-88390262] {\n  display: flex;\n  gap: 1rem;\n}\n.form-group.half[data-v-88390262] {\n  flex: 1;\n}\n.model-input-row[data-v-88390262] {\n  display: flex;\n  gap: 0.5rem;\n}\n.model-input-row .form-input[data-v-88390262] {\n  flex: 1;\n}\n.model-select-wrapper[data-v-88390262] {\n  position: relative;\n}\n.model-dropdown[data-v-88390262] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  max-height: 200px;\n  overflow-y: auto;\n  background: white;\n  border: 1px solid #d1d5db;\n  border-radius: 0.5rem;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n  margin-top: 4px;\n}\n.model-dropdown-item[data-v-88390262] {\n  padding: 0.5rem 0.75rem;\n  cursor: pointer;\n  font-size: 0.875rem;\n  color: #374151;\n  transition: background 0.15s ease;\n}\n.model-dropdown-item[data-v-88390262]:hover {\n  background: #f1f5f9;\n}\n.model-dropdown-item.active[data-v-88390262] {\n  background: #eff6ff;\n  color: #3b82f6;\n  font-weight: 500;\n}\n.utility-btn[data-v-88390262] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.75rem;\n  border: 1px solid #d1d5db;\n  border-radius: 0.5rem;\n  background: white;\n  color: #374151;\n  cursor: pointer;\n}\n.utility-btn[data-v-88390262]:hover {\n  background: #f1f5f9;\n  border-color: #94a3b8;\n}\n.utility-btn[data-v-88390262]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.model-list[data-v-88390262] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n}\n.model-tag[data-v-88390262] {\n  padding: 0.25rem 0.75rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  background: #f8fafc;\n  color: #64748b;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.model-tag[data-v-88390262]:hover {\n  border-color: #3b82f6;\n  color: #3b82f6;\n}\n.model-tag.active[data-v-88390262] {\n  background: #3b82f6;\n  border-color: #3b82f6;\n  color: white;\n}\n.modal-footer[data-v-88390262] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  padding: 1rem 1.5rem;\n  border-top: 1px solid #e2e8f0;\n}\n.btn-cancel[data-v-88390262],\n.btn-confirm[data-v-88390262] {\n  padding: 0.625rem 1.25rem;\n  border-radius: 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.btn-cancel[data-v-88390262] {\n  background: white;\n  border: 1px solid #d1d5db;\n  color: #374151;\n}\n.btn-cancel[data-v-88390262]:hover {\n  background: #f1f5f9;\n  border-color: #94a3b8;\n}\n.btn-confirm[data-v-88390262] {\n  background: #3b82f6;\n  border: 1px solid #3b82f6;\n  color: white;\n}\n.btn-confirm[data-v-88390262]:hover {\n  background: #2563eb;\n  border-color: #2563eb;\n}\n\n/* åŠ è½½åŠ¨ç”» */\n.loading-pulse[data-v-88390262] {\n  animation: pulse-88390262 1.5s ease-in-out infinite;\n}\n@keyframes pulse-88390262 {\n0%, 100% { opacity: 1;\n}\n50% { opacity: 0.4;\n}\n}\n\n/* å“åº”å¼ */\n@media (max-width: 640px) {\n.header-actions .btn-text[data-v-88390262] {\n    display: none;\n}\n.api-card-body[data-v-88390262] {\n    flex-direction: column;\n    gap: 0.5rem;\n}\n.form-row[data-v-88390262] {\n    flex-direction: column;\n    gap: 1rem;\n}\n}\n\n/* æ·±è‰²ä¸»é¢˜ */\n[data-theme='dark'] .api-management-panel[data-v-88390262] {\n  background: var(--color-background);\n}\n[data-theme='dark'] .panel-header[data-v-88390262],\n[data-theme='dark'] .settings-section[data-v-88390262] {\n  background: #1e293b;\n  border-color: #475569;\n}\n[data-theme='dark'] .section-header[data-v-88390262] {\n  background: #334155;\n  border-bottom-color: #475569;\n}\n[data-theme='dark'] .panel-title[data-v-88390262],\n[data-theme='dark'] .section-title[data-v-88390262],\n[data-theme='dark'] .setting-name[data-v-88390262],\n[data-theme='dark'] .api-name[data-v-88390262] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .settings-subtitle[data-v-88390262],\n[data-theme='dark'] .setting-desc[data-v-88390262],\n[data-theme='dark'] .detail-label[data-v-88390262] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .api-card[data-v-88390262] {\n  background: #334155;\n  border-color: #475569;\n}\n[data-theme='dark'] .api-card-header[data-v-88390262] {\n  background: #1e293b;\n  border-bottom-color: #475569;\n}\n[data-theme='dark'] .setting-item[data-v-88390262]:hover,\n[data-theme='dark'] .api-card[data-v-88390262]:hover {\n  background: #334155;\n}\n[data-theme='dark'] .action-btn[data-v-88390262],\n[data-theme='dark'] .setting-select[data-v-88390262],\n[data-theme='dark'] .form-input[data-v-88390262],\n[data-theme='dark'] .form-select[data-v-88390262] {\n  background: #374151;\n  border-color: #4b5563;\n  color: #e5e7eb;\n}\n[data-theme='dark'] .modal-content[data-v-88390262] {\n  background: #1e293b;\n}\n[data-theme='dark'] .modal-header[data-v-88390262] {\n  border-bottom-color: #475569;\n}\n[data-theme='dark'] .modal-header h3[data-v-88390262] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .modal-footer[data-v-88390262] {\n  border-top-color: #475569;\n}\n[data-theme='dark'] .api-provider[data-v-88390262] {\n  background: #475569;\n  color: #e5e7eb;\n}\n[data-theme='dark'] .model-tag[data-v-88390262] {\n  background: #475569;\n  border-color: #4b5563;\n  color: #e5e7eb;\n}\n[data-theme='dark'] .model-dropdown[data-v-88390262] {\n  background: #374151;\n  border-color: #4b5563;\n}\n[data-theme='dark'] .model-dropdown-item[data-v-88390262] {\n  color: #e5e7eb;\n}\n[data-theme='dark'] .model-dropdown-item[data-v-88390262]:hover {\n  background: #4b5563;\n}\n[data-theme='dark'] .model-dropdown-item.active[data-v-88390262] {\n  background: #1e40af;\n  color: #93c5fd;\n}\n`,""]);const m=d},4511:(e,t,n)=>{"use strict";var a=n(5072),r=n.n(a),o=n(7825),i=n.n(o),s=n(7659),l=n.n(s),c=n(5056),d=n.n(c),u=n(540),m=n.n(u),p=n(1113),f=n.n(p),g=n(1208),h={};h.styleTagTransform=f(),h.setAttributes=d(),h.insert=l().bind(null,"head"),h.domAPI=i(),h.insertStyleElement=m(),r()(g.A,h),g.A&&g.A.locals&&g.A.locals},4530:(e,t,n)=>{"use strict";n.d(t,{WI:()=>d,jj:()=>g,ru:()=>c});const a=["çŠ¶æ€","ç©å®¶è§’è‰²çŠ¶æ€","ç©å®¶è§’è‰²çŠ¶æ€ä¿¡æ¯","ç©å®¶è§’è‰²ä¿¡æ¯","è§’è‰²åŸºç¡€ä¿¡æ¯","ç©å®¶è§’è‰²åŸºç¡€ä¿¡æ¯","ä¿®è¡ŒçŠ¶æ€","çŠ¶æ€æ•ˆæœ","å™äº‹å†å²","å¯¹è¯å†å²","ä»»åŠ¡ç³»ç»Ÿ","å®—é—¨ç³»ç»Ÿ","ä¸–ç•Œä¿¡æ¯","äººç‰©å…³ç³»","è£…å¤‡æ ","æ¸¸æˆæ—¶é—´","ä¸‰åƒå¤§é“","ä¿®ç‚¼åŠŸæ³•","æŒæ¡æŠ€èƒ½","èº«ä½“éƒ¨ä½å¼€å‘"],r=["å…ƒæ•°æ®","è§’è‰²","ç¤¾äº¤","ä¸–ç•Œ","ç³»ç»Ÿ"],o=e=>JSON.parse(JSON.stringify(e)),i=e=>!!e&&"object"==typeof e&&!Array.isArray(e),s=e=>{if(Array.isArray(e))return e.map(s);if(!i(e))return e;const t={};for(const[n,a]of Object.entries(e))"_AIè¯´æ˜"!==n&&"_AIä¿®æ”¹è§„åˆ™"!==n&&"_AIé‡è¦æé†’"!==n&&(t[n]=s(a));return t},l=e=>{const t={å¹´:1e3,æœˆ:1,æ—¥:1,å°æ—¶:8,åˆ†é’Ÿ:0};return i(e)?{å¹´:Number(e.å¹´??e.å¹´æ•°??t.å¹´),æœˆ:Number(e.æœˆ??t.æœˆ),æ—¥:Number(e.æ—¥??t.æ—¥),å°æ—¶:Number(e.å°æ—¶??t.å°æ—¶),åˆ†é’Ÿ:Number(e.åˆ†é’Ÿ??t.åˆ†é’Ÿ)}:t};function c(e){if(!e||"object"!=typeof e)return!1;const t=e;return i(t.å…ƒæ•°æ®)&&i(t.è§’è‰²)&&i(t.ç¤¾äº¤)&&i(t.ä¸–ç•Œ)&&i(t.ç³»ç»Ÿ)}function d(e){if(!e||"object"!=typeof e)return{needsMigration:!0,issues:["invalid-structure"],legacyKeysFound:[]};const t=e;if(c(e))return{needsMigration:!1,issues:[],legacyKeysFound:[]};const n=[...a.filter(e=>e in t),...t.å±æ€§||t.ä½ç½®||t.èƒŒåŒ…||t.æ—¶é—´?["çŸ­è·¯å¾„å¹³é“º"]:[]],o=r.filter(e=>!(e in t)),i=[];return n.length>0&&i.push("legacy-root-keys"),o.length>0&&i.push("missing-required-keys"),{needsMigration:i.length>0,issues:i,legacyKeysFound:n}}const u=()=>({é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}}),m=()=>({æ¨¡å¼:"å•æœº",æˆ¿é—´ID:null,ç©å®¶ID:null,åªè¯»è·¯å¾„:["ä¸–ç•Œ"],ä¸–ç•Œæ›å…‰:!1,å†²çªç­–ç•¥:"æœåŠ¡å™¨"}),p=e=>({ä¸–ç•Œåç§°:"æœå¤©å¤§é™†",å¤§é™†ä¿¡æ¯:[],åŠ¿åŠ›ä¿¡æ¯:[],åœ°ç‚¹ä¿¡æ¯:[],ç”Ÿæˆæ—¶é—´:e,ä¸–ç•ŒèƒŒæ™¯:"",ä¸–ç•Œçºªå…ƒ:"",ç‰¹æ®Šè®¾å®š:[],ç‰ˆæœ¬:"v1"}),f=()=>({åå­—:"æ— åä¿®å£«",æ€§åˆ«:"ç”·",å‡ºç”Ÿæ—¥æœŸ:{å¹´:982,æœˆ:1,æ—¥:1},ç§æ—:"äººæ—",ä¸–ç•Œ:"æœå¤©å¤§é™†",å¤©èµ„:"å‡¡äºº",å‡ºç”Ÿ:"æ•£ä¿®",çµæ ¹:"äº”è¡Œæ‚çµæ ¹",å¤©èµ‹:[],å…ˆå¤©å…­å¸:{æ ¹éª¨:5,çµæ€§:5,æ‚Ÿæ€§:5,æ°”è¿:5,é­…åŠ›:5,å¿ƒæ€§:5},åå¤©å…­å¸:{æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0}});function g(e){const t=o(e??{}),n=s(t),d={legacyKeysFound:[],removedLegacyKeys:[],warnings:[]};if(c(n))return{migrated:n,report:d};d.legacyKeysFound=a.filter(e=>e in n);const g=(new Date).toISOString(),h=n.è§’è‰²??n.è§’è‰²åŸºç¡€ä¿¡æ¯??n.ç©å®¶è§’è‰²åŸºç¡€ä¿¡æ¯??n.ç©å®¶è§’è‰²ä¿¡æ¯??n.ç©å®¶è§’è‰²çŠ¶æ€ä¿¡æ¯?.è§’è‰²??null,v=n.å±æ€§??n.çŠ¶æ€??n.ç©å®¶è§’è‰²çŠ¶æ€??n.ç©å®¶è§’è‰²çŠ¶æ€ä¿¡æ¯??null,b=i(v)?v:{},y={å¢ƒç•Œ:b.å¢ƒç•Œ??null,å£°æœ›:b.å£°æœ›??0,æ°”è¡€:b.æ°”è¡€??{å½“å‰:100,ä¸Šé™:100},çµæ°”:b.çµæ°”??{å½“å‰:50,ä¸Šé™:50},ç¥è¯†:b.ç¥è¯†??{å½“å‰:30,ä¸Šé™:30},å¯¿å‘½:b.å¯¿å‘½??{å½“å‰:18,ä¸Šé™:80}},x=n.æ•ˆæœ??n.ä¿®è¡ŒçŠ¶æ€??b.çŠ¶æ€æ•ˆæœ??n.çŠ¶æ€æ•ˆæœ??[],k=Array.isArray(x)?x:[],w=n.ä½ç½®??b.ä½ç½®??n.çŠ¶æ€ä½ç½®??{æè¿°:"æœå¤©å¤§é™†Â·æ— åä¹‹åœ°",x:5e3,y:5e3},E=l(n.å…ƒæ•°æ®?.æ—¶é—´??n.æ—¶é—´??n.æ¸¸æˆæ—¶é—´),N=n.èƒŒåŒ…??{çµçŸ³:{ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0},ç‰©å“:{}},S=n.è£…å¤‡??n.è£…å¤‡æ ??{è£…å¤‡1:null,è£…å¤‡2:null,è£…å¤‡3:null,è£…å¤‡4:null,è£…å¤‡5:null,è£…å¤‡6:null},V=n.åŠŸæ³•??{å½“å‰åŠŸæ³•ID:null,åŠŸæ³•è¿›åº¦:{},åŠŸæ³•å¥—è£…:{ä¸»ä¿®:null,è¾…ä¿®:[]}},_=n.ä¿®ç‚¼??(void 0!==n.ä¿®ç‚¼åŠŸæ³•?{ä¿®ç‚¼åŠŸæ³•:n.ä¿®ç‚¼åŠŸæ³•}:{ä¿®ç‚¼åŠŸæ³•:null}),C=n.å¤§é“??n.ä¸‰åƒå¤§é“??{å¤§é“åˆ—è¡¨:{}},A=n.æŠ€èƒ½??(n.æŒæ¡æŠ€èƒ½?{æŒæ¡æŠ€èƒ½:n.æŒæ¡æŠ€èƒ½,è£…å¤‡æ :[],å†·å´:{}}:{æŒæ¡æŠ€èƒ½:[],è£…å¤‡æ :[],å†·å´:{}}),D=n.å®—é—¨??n.å®—é—¨ç³»ç»Ÿ??void 0,T=n.å…³ç³»??n.äººç‰©å…³ç³»??{},B=n.è®°å¿†??{çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]},I=n.ä»»åŠ¡??n.ä»»åŠ¡ç³»ç»Ÿ??u(),z=(()=>{const e=i(I)?o(I):u();if(Array.isArray(e.å½“å‰ä»»åŠ¡åˆ—è¡¨)||(e.å½“å‰ä»»åŠ¡åˆ—è¡¨=[]),Array.isArray(e.å·²å®Œæˆä»»åŠ¡)&&e.å·²å®Œæˆä»»åŠ¡.length>0){const t=new Set(e.å½“å‰ä»»åŠ¡åˆ—è¡¨.map(e=>e?.ä»»åŠ¡ID).filter(e=>"string"==typeof e&&e.length>0));for(const n of e.å·²å®Œæˆä»»åŠ¡){const a=n?.ä»»åŠ¡ID;"string"==typeof a&&a.length>0&&!t.has(a)&&(e.å½“å‰ä»»åŠ¡åˆ—è¡¨.push(n),t.add(a))}delete e.å·²å®Œæˆä»»åŠ¡}return e})(),M=n.ä¸–ç•Œ?.ä¿¡æ¯??n.ä¸–ç•Œ??n.ä¸–ç•Œä¿¡æ¯??n.worldInfo??void 0,P=i(M)?M:p(g),R=n.ç³»ç»Ÿ?.é…ç½®??n.ç³»ç»Ÿ??n.ç³»ç»Ÿé…ç½®??void 0,$=n.ç³»ç»Ÿ?.å†å²?.å™äº‹??n.å†å²?.å™äº‹??(n.å™äº‹å†å²?n.å™äº‹å†å²:n.å¯¹è¯å†å²?n.å¯¹è¯å†å²:[]),O=n.ç³»ç»Ÿ?.è”æœº??n.è”æœº??m(),L=i(h)?h:f(),F={å…ƒæ•°æ®:{ç‰ˆæœ¬å·:3,å­˜æ¡£ID:String(n.å…ƒæ•°æ®?.å­˜æ¡£ID??n.å­˜æ¡£ID??`save_${Date.now()}`),å­˜æ¡£å:String(n.å…ƒæ•°æ®?.å­˜æ¡£å??n.å­˜æ¡£å??"è¿ç§»å­˜æ¡£"),æ¸¸æˆç‰ˆæœ¬:n.å…ƒæ•°æ®?.æ¸¸æˆç‰ˆæœ¬??n.æ¸¸æˆç‰ˆæœ¬,åˆ›å»ºæ—¶é—´:String(n.å…ƒæ•°æ®?.åˆ›å»ºæ—¶é—´??n.åˆ›å»ºæ—¶é—´??g),æ›´æ–°æ—¶é—´:g,æ¸¸æˆæ—¶é•¿ç§’:Number(n.å…ƒæ•°æ®?.æ¸¸æˆæ—¶é•¿ç§’??n.æ¸¸æˆæ—¶é•¿ç§’??n.å…ƒæ•°æ®?.æ¸¸æˆæ—¶é•¿??n.æ¸¸æˆæ—¶é•¿??0),æ—¶é—´:E},è§’è‰²:{èº«ä»½:L,å±æ€§:y,ä½ç½®:w,æ•ˆæœ:k,èº«ä½“:n.èº«ä½“??(n.èº«ä½“éƒ¨ä½å¼€å‘?{éƒ¨ä½å¼€å‘:n.èº«ä½“éƒ¨ä½å¼€å‘}:void 0),èƒŒåŒ…:N,è£…å¤‡:S,åŠŸæ³•:V,ä¿®ç‚¼:_,å¤§é“:C,æŠ€èƒ½:A},ç¤¾äº¤:{å…³ç³»:T,å®—é—¨:D??null,ä»»åŠ¡:z,è®°å¿†:B},ä¸–ç•Œ:{ä¿¡æ¯:P,çŠ¶æ€:n.ä¸–ç•Œ?.çŠ¶æ€??n.ä¸–ç•ŒçŠ¶æ€??void 0},ç³»ç»Ÿ:{é…ç½®:R,è®¾ç½®:n.ç³»ç»Ÿ?.è®¾ç½®??n.è®¾ç½®??void 0,ç¼“å­˜:n.ç³»ç»Ÿ?.ç¼“å­˜??n.ç¼“å­˜??void 0,è¡ŒåŠ¨é˜Ÿåˆ—:n.ç³»ç»Ÿ?.è¡ŒåŠ¨é˜Ÿåˆ—??n.è¡ŒåŠ¨é˜Ÿåˆ—??void 0,å†å²:{å™äº‹:Array.isArray($)?$:[]},æ‰©å±•:n.ç³»ç»Ÿ?.æ‰©å±•??n.æ‰©å±•??{},è”æœº:i(O)?{...m(),...O}:m()}};for(const e of a)e in n&&d.removedLegacyKeys.push(String(e));for(const e of r)e in F||d.warnings.push(`è¿ç§»åç¼ºå°‘å¿…å¡«å­—æ®µï¼š${String(e)}`);return F.è§’è‰²?.èº«ä»½||d.warnings.push("è¿ç§»åä»ç¼ºå°‘ è§’è‰².èº«ä»½ï¼ˆå°†å¯¼è‡´éƒ¨åˆ†ç•Œé¢æ— æ³•å±•ç¤ºï¼‰"),{migrated:F,report:d}}},4532:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n.talent-tier-selection[data-v-7141b6e9] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.loading-state[data-v-7141b6e9], .error-state[data-v-7141b6e9], .placeholder[data-v-7141b6e9] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  font-size: 1.1rem;\n  color: #94a3b8;\n  font-style: italic;\n}\n.tier-layout[data-v-7141b6e9] {\n  display: grid;\n  grid-template-columns: 1fr 2fr;\n  gap: 1.5rem;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* ========== å·¦ä¾§é¢æ¿ ========== */\n.tier-left-panel[data-v-7141b6e9] {\n  display: flex;\n  flex-direction: column;\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n/* é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® */\n.top-actions-container[data-v-7141b6e9] {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n  background: rgba(30, 41, 59, 0.3);\n  justify-content: flex-end;\n}\n.top-actions-container .action-item[data-v-7141b6e9] {\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #cbd5e1;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  font-size: 0.85rem;\n  font-weight: 500;\n  white-space: nowrap;\n  letter-spacing: 0.05em;\n}\n.top-actions-container .action-item[data-v-7141b6e9]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  border-color: rgba(147, 197, 253, 0.3);\n  color: #f1f5f9;\n}\n.tiers-list-container[data-v-7141b6e9] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.tiers-list-container[data-v-7141b6e9]::-webkit-scrollbar { width: 6px;\n}\n.tiers-list-container[data-v-7141b6e9]::-webkit-scrollbar-track { background: transparent;\n}\n.tiers-list-container[data-v-7141b6e9]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.tiers-list-container[data-v-7141b6e9]::-webkit-scrollbar-thumb:hover { background: rgba(147, 197, 253, 0.5);\n}\n\n/* ========== é€‰é¡¹å¡æ ·å¼ï¼ˆå¸¦å¤©èµ„è¾‰å…‰ï¼‰ ========== */\n.tier-item[data-v-7141b6e9] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.9rem 1rem;\n  margin-bottom: 0.5rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  border: 1px solid transparent;\n  background: rgba(30, 41, 59, 0.4);\n}\n.tier-item[data-v-7141b6e9]:hover {\n  background: rgba(var(--tier-glow-color-rgb, 147, 197, 253), 0.15);\n  border-color: rgba(var(--tier-glow-color-rgb, 147, 197, 253), 0.25);\n}\n.tier-item.selected[data-v-7141b6e9] {\n  background: rgba(var(--tier-glow-color-rgb, 147, 197, 253), 0.2);\n  border-color: rgba(var(--tier-glow-color-rgb, 147, 197, 253), 0.4);\n  box-shadow: 0 0 20px rgba(var(--tier-glow-color-rgb, 147, 197, 253), 0.25),\n              inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.item-content[data-v-7141b6e9] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n}\n.tier-name[data-v-7141b6e9] {\n  font-weight: 600;\n  color: var(--tier-glow-color, #f1f5f9);\n  text-shadow: 0 0 10px rgba(var(--tier-glow-color-rgb, 147, 197, 253), 0.3);\n}\n.tier-points[data-v-7141b6e9] {\n  color: #fbbf24;\n  font-weight: 500;\n  font-size: 0.9rem;\n}\n\n/* æŒ‰é’®ç»„å®¹å™¨ */\n.action-buttons[data-v-7141b6e9] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  opacity: 0;\n  transition: opacity 0.2s;\n  margin-left: 0.5rem;\n}\n.tier-item:hover .action-buttons[data-v-7141b6e9] {\n  opacity: 1;\n}\n.edit-btn[data-v-7141b6e9], .delete-btn[data-v-7141b6e9] {\n  background: none;\n  border: none;\n  color: #64748b;\n  cursor: pointer;\n  padding: 0.35rem;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.edit-btn[data-v-7141b6e9]:hover {\n  color: #93c5fd;\n  background: rgba(147, 197, 253, 0.1);\n}\n.delete-btn[data-v-7141b6e9]:hover {\n  color: #f87171;\n  background: rgba(248, 113, 113, 0.1);\n}\n.action-name[data-v-7141b6e9] {\n  font-weight: 500;\n}\n\n/* ========== å³ä¾§è¯¦æƒ…é¢æ¿ ========== */\n.tier-details-container[data-v-7141b6e9] {\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n.tier-details[data-v-7141b6e9] {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n.tier-details h2[data-v-7141b6e9] {\n  margin: 0 0 1rem 0;\n  font-size: 1.8rem;\n  text-align: center;\n  flex-shrink: 0;\n  text-shadow: 0 0 30px currentColor;\n}\n.description-scroll[data-v-7141b6e9] {\n  flex: 1;\n  overflow-y: auto;\n  line-height: 1.7;\n  padding-right: 0.5rem;\n  min-height: 0;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.description-scroll[data-v-7141b6e9]::-webkit-scrollbar { width: 6px;\n}\n.description-scroll[data-v-7141b6e9]::-webkit-scrollbar-track { background: transparent;\n}\n.description-scroll[data-v-7141b6e9]::-webkit-scrollbar-thumb { background: rgba(147, 197, 253, 0.3); border-radius: 3px;\n}\n.description-scroll p[data-v-7141b6e9] {\n  margin: 0;\n  white-space: pre-wrap;\n  color: #94a3b8;\n}\n.points-display[data-v-7141b6e9] {\n  text-align: center;\n  font-weight: 600;\n  color: #fbbf24;\n  font-size: 1.2rem;\n  padding-top: 1rem;\n  margin-top: 1rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n  flex-shrink: 0;\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .tier-left-panel[data-v-7141b6e9],\n[data-theme="light"] .tier-details-container[data-v-7141b6e9] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .top-actions-container[data-v-7141b6e9] {\n  background: rgba(241, 245, 249, 0.8);\n  border-color: rgba(0, 0, 0, 0.06);\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-7141b6e9] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(0, 0, 0, 0.1);\n  color: #475569;\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-7141b6e9]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #1e293b;\n}\n[data-theme="light"] .tier-item[data-v-7141b6e9] {\n  background: rgba(255, 255, 255, 0.6);\n}\n[data-theme="light"] .description-scroll p[data-v-7141b6e9] {\n  color: #475569;\n}\n[data-theme="light"] .points-display[data-v-7141b6e9] {\n  border-color: rgba(0, 0, 0, 0.06);\n}\n\n/* å“åº”å¼é€‚é… - æ‰‹æœºç«¯ä¼˜åŒ– */\n@media (max-width: 1200px) {\n.tier-layout[data-v-7141b6e9] {\n    grid-template-columns: 1fr 1.8fr;\n    gap: 1.5rem;\n}\n}\n@media (max-width: 1024px) {\n.tier-layout[data-v-7141b6e9] {\n    grid-template-columns: 1fr 1.5fr;\n    gap: 1.2rem;\n}\n.tier-details h2[data-v-7141b6e9] {\n    font-size: 1.8rem;\n}\n}\n@media (max-width: 640px) {\n.top-actions-container[data-v-7141b6e9] {\n    flex-wrap: wrap;\n    justify-content: stretch;\n}\n.top-actions-container .action-item[data-v-7141b6e9] {\n    flex-grow: 1;\n    text-align: center;\n}\n.tier-layout[data-v-7141b6e9] {\n    /* æ”¹ä¸ºå‚ç›´å †å å¸ƒå±€ */\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr;\n    gap: 1rem;\n    height: auto;\n    overflow: visible;\n    padding: 0.8rem;\n}\n.tier-left-panel[data-v-7141b6e9] {\n    order: 1;\n    max-height: 40vh;\n}\n.tier-details-container[data-v-7141b6e9] {\n    order: 2;\n    min-height: 300px;\n}\n.tiers-list-container[data-v-7141b6e9] {\n    max-height: 35vh;\n    /* æ·»åŠ è§¦æ‘¸æ»šåŠ¨ä¼˜åŒ– */\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: thin;\n}\n  \n  /* ä¼˜åŒ–è§¦æ‘¸ä½“éªŒ */\n.tier-item[data-v-7141b6e9],\n  .action-item[data-v-7141b6e9] {\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n}\n}\n@media (max-width: 640px) {\n.tier-layout[data-v-7141b6e9] {\n    gap: 0.8rem;\n    padding: 0.6rem;\n}\n.tier-left-panel[data-v-7141b6e9] {\n    max-height: 35vh;\n}\n.tiers-list-container[data-v-7141b6e9] {\n    max-height: 30vh;\n    padding: 0.5rem;\n}\n.tier-item[data-v-7141b6e9] {\n    padding: 0.7rem;\n    font-size: 0.95rem;\n    margin-bottom: 0.4rem;\n}\n.single-actions-container[data-v-7141b6e9] {\n    padding: 0.5rem;\n    gap: 0.4rem;\n}\n.action-item[data-v-7141b6e9] {\n    padding: 0.7rem 1rem;\n    font-size: 0.9rem;\n}\n.tier-details-container[data-v-7141b6e9] {\n    padding: 1.2rem;\n    min-height: 250px;\n}\n.tier-details h2[data-v-7141b6e9] {\n    font-size: 1.6rem;\n    margin-bottom: 0.8rem;\n}\n.points-display[data-v-7141b6e9] {\n    font-size: 1.1rem;\n}\n}\n@media (max-width: 480px) {\n.top-actions-container[data-v-7141b6e9] {\n    flex-direction: column;\n    align-items: stretch;\n}\n.talent-tier-selection[data-v-7141b6e9] {\n    padding: 0.4rem;\n    height: auto;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n}\n.tier-layout[data-v-7141b6e9] {\n    gap: 0.6rem;\n    padding: 0;\n    height: auto;\n    min-height: 0;\n}\n.tier-left-panel[data-v-7141b6e9] {\n    max-height: none;\n    border-radius: 6px;\n}\n.tiers-list-container[data-v-7141b6e9] {\n    max-height: 26vh;\n    padding: 0.4rem;\n}\n.tier-item[data-v-7141b6e9] {\n    padding: 0.6rem 0.8rem;\n    font-size: 0.9rem;\n    margin-bottom: 0.3rem;\n    border-radius: 4px;\n}\n.tier-name[data-v-7141b6e9] {\n    font-size: 0.9rem;\n}\n.tier-points[data-v-7141b6e9] {\n    font-size: 0.8rem;\n}\n.single-actions-container[data-v-7141b6e9] {\n    flex-direction: column;\n    gap: 0.4rem;\n    padding: 0.4rem;\n}\n.action-item[data-v-7141b6e9] {\n    padding: 0.6rem;\n    font-size: 0.85rem;\n    border-radius: 4px;\n}\n.tier-details-container[data-v-7141b6e9] {\n    padding: 1rem;\n    min-height: 200px;\n    border-radius: 6px;\n}\n.tier-details h2[data-v-7141b6e9] {\n    font-size: 1.4rem;\n    margin-bottom: 0.6rem;\n    text-align: center;\n}\n.description-scroll[data-v-7141b6e9] {\n    font-size: 0.9rem;\n    line-height: 1.5;\n    padding-right: 0.3rem;\n}\n.points-display[data-v-7141b6e9] {\n    font-size: 1rem;\n    text-align: center;\n    padding-top: 0.8rem;\n    margin-top: 0.8rem;\n}\n.placeholder[data-v-7141b6e9] {\n    font-size: 1rem;\n    padding: 1rem;\n    text-align: center;\n    min-height: 150px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.top-actions-container[data-v-7141b6e9] {\n    flex-direction: column;\n    align-items: stretch;\n    padding: 0.5rem;\n}\n.top-actions-container .action-item[data-v-7141b6e9] {\n    text-align: center;\n}\n}\n@media (max-width: 360px) {\n.talent-tier-selection[data-v-7141b6e9] {\n    padding: 0.3rem;\n}\n.tier-layout[data-v-7141b6e9] {\n    gap: 0.4rem;\n}\n.tier-left-panel[data-v-7141b6e9] {\n    max-height: 28vh;\n}\n.tiers-list-container[data-v-7141b6e9] {\n    max-height: 24vh;\n    padding: 0.3rem;\n}\n.tier-item[data-v-7141b6e9] {\n    padding: 0.5rem 0.6rem;\n    font-size: 0.85rem;\n    margin-bottom: 0.2rem;\n}\n.tier-name[data-v-7141b6e9] {\n    font-size: 0.8rem;\n}\n.tier-points[data-v-7141b6e9] {\n    font-size: 0.75rem;\n}\n.tier-details-container[data-v-7141b6e9] {\n    padding: 0.8rem;\n    min-height: 180px;\n}\n.tier-details h2[data-v-7141b6e9] {\n    font-size: 1.2rem;\n    margin-bottom: 0.5rem;\n}\n.description-scroll[data-v-7141b6e9] {\n    font-size: 0.85rem;\n    line-height: 1.4;\n}\n.points-display[data-v-7141b6e9] {\n    font-size: 0.9rem;\n    padding-top: 0.6rem;\n    margin-top: 0.6rem;\n}\n.action-item[data-v-7141b6e9] {\n    padding: 0.5rem;\n    font-size: 0.8rem;\n}\n.placeholder[data-v-7141b6e9] {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n    min-height: 120px;\n}\n}\n',""]);const s=i},4582:(e,t,n)=>{"use strict";n.d(t,{useCharacterStore:()=>te});var a=n(4061),r=n(810),o=n(2224),i=n(4270),s=n(3302),l=n(9173),c=n(1211),d=n(5099),u=n(8651),m=n(6585),p=n(1184),f=n(9852),g=n(840),h=n(3098),v=n(4530),b=n(2347),y=n(7527);async function x(e,t){return new Promise(n=>{(0,l.useUIStore)().showRetryDialog({title:`${e}å¤±è´¥`,message:`${e}ç»è¿‡å¤šæ¬¡å°è¯•åä»ç„¶å¤±è´¥ã€‚\n\né”™è¯¯ä¿¡æ¯ï¼š${t}\n\næ˜¯å¦ç»§ç»­é‡è¯•ï¼Ÿ\né€‰æ‹©"å–æ¶ˆ"å°†ç»ˆæ­¢è§’è‰²åˆ›å»ºæµç¨‹ã€‚`,onConfirm:()=>n(!0),onCancel:()=>n(!1)})})}function k(e,t){const{å…ˆå¤©å…­å¸:n}=e,a=Number(n?.æ ¹éª¨??0),r=Number(n?.çµæ€§??0),o=Number(n?.æ‚Ÿæ€§??0),i=100+10*a,s=50+5*r,l=30+3*o,c=80+5*a;return console.log(`[è§’è‰²åˆå§‹åŒ–] å±æ€§è®¡ç®—: æ°”è¡€=${i}, çµæ°”=${s}, ç¥è¯†=${l}, å¹´é¾„=${t}/${c}`),console.log(`[è§’è‰²åˆå§‹åŒ–] å…ˆå¤©å…­å¸: æ ¹éª¨=${a}, çµæ€§=${r}, æ‚Ÿæ€§=${o}`),{å¢ƒç•Œ:{åç§°:"å‡¡äºº",é˜¶æ®µ:"",å½“å‰è¿›åº¦:0,ä¸‹ä¸€çº§æ‰€éœ€:100,çªç ´æè¿°:"å¼•æ°”å…¥ä½“ï¼Œæ„Ÿæ‚Ÿå¤©åœ°çµæ°”ï¼Œè¸ä¸Šä¿®ä»™ç¬¬ä¸€æ­¥"},å£°æœ›:0,ä½ç½®:{æè¿°:"ä½ç½®ç”Ÿæˆå¤±è´¥"},æ°”è¡€:{å½“å‰:i,ä¸Šé™:i},çµæ°”:{å½“å‰:s,ä¸Šé™:s},ç¥è¯†:{å½“å‰:l,ä¸Šé™:l},å¯¿å‘½:{å½“å‰:t,ä¸Šé™:c}}}async function w(e,t,n,a,r=!0,o="generate"){console.log("[åˆå§‹åŒ–æµç¨‹] ===== initializeCharacter å…¥å£ =====");const i=(0,c.N)();!t.ç§æ—&&i.characterPayload.race&&(console.log(`[åˆå§‹åŒ–æµç¨‹] è¡¥ä¸ï¼šä» store åŒæ­¥ç§æ—ä¿¡æ¯: ${i.characterPayload.race}`),t.ç§æ—=i.characterPayload.race),console.log("[åˆå§‹åŒ–æµç¨‹] æ¥æ”¶åˆ°çš„ baseInfo.å…ˆå¤©å…­å¸:",t.å…ˆå¤©å…­å¸);try{const{saveData:e,processedBaseInfo:i}=function(e,t){let n;console.log("[åˆå§‹åŒ–æµç¨‹] 1. å‡†å¤‡åˆå§‹å­˜æ¡£æ•°æ®"),console.log("[åˆå§‹åŒ–æµç¨‹] prepareInitialData æ¥æ”¶åˆ°çš„ baseInfo.å…ˆå¤©å…­å¸:",e.å…ˆå¤©å…­å¸);try{n=JSON.parse(JSON.stringify(e)),console.log("[åˆå§‹åŒ–æµç¨‹] JSON åºåˆ—åŒ–åçš„ processedBaseInfo.å…ˆå¤©å…­å¸:",n.å…ˆå¤©å…­å¸)}catch(t){console.error("[è§’è‰²åˆå§‹åŒ–] JSON åºåˆ—åŒ–å¤±è´¥ï¼Œä½¿ç”¨åŸå§‹å¯¹è±¡",t),n=e}const a=t;var r;Math.floor(12*Math.random()),Math.floor(60*Math.random()),n.å‡ºç”Ÿæ—¥æœŸ||(n.å‡ºç”Ÿæ—¥æœŸ={å¹´:a-t,æœˆ:1,æ—¥:1,å°æ—¶:0,åˆ†é’Ÿ:0},console.log(`[è§’è‰²åˆå§‹åŒ–] ä¸´æ—¶å‡ºç”Ÿæ—¥æœŸ(AIå¯èƒ½ä¼šé‡æ–°è®¡ç®—): ${n.å‡ºç”Ÿæ—¥æœŸ.å¹´}å¹´${n.å‡ºç”Ÿæ—¥æœŸ.æœˆ}æœˆ${n.å‡ºç”Ÿæ—¥æœŸ.æ—¥}æ—¥ (å½“å‰${t}å²)`)),n.åå¤©å…­å¸||(n.åå¤©å…­å¸={æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0},console.log("[è§’è‰²åˆå§‹åŒ–] åˆå§‹åŒ–åå¤©å…­å¸ä¸ºå…¨0")),"string"!=typeof(r=n.çµæ ¹)||"éšæœºçµæ ¹"!==r&&!r.includes("éšæœº")?console.log("[çµæ ¹ç”Ÿæˆ] æ£€æµ‹åˆ°ç©å®¶å·²é€‰æ‹©ç‰¹å®šçµæ ¹ï¼Œå°†ç›´æ¥ä½¿ç”¨è¯¥çµæ ¹ï¼Œä¸è¿›è¡ŒéšæœºåŒ–å¤„ç†ã€‚"):console.log("[çµæ ¹ç”Ÿæˆ] æ£€æµ‹åˆ°éšæœºçµæ ¹ï¼Œå°†ç”± AI åˆ›é€ æ€§ç”Ÿæˆ"),"string"!=typeof n.å‡ºç”Ÿ||"éšæœºå‡ºç”Ÿ"!==n.å‡ºç”Ÿ&&!n.å‡ºç”Ÿ.includes("éšæœº")||console.log("[å‡ºç”Ÿç”Ÿæˆ] æ£€æµ‹åˆ°éšæœºå‡ºç”Ÿï¼Œå°†ç”± AI åˆ›é€ æ€§ç”Ÿæˆ");const o=k(n,t),i={å¢ƒç•Œ:o.å¢ƒç•Œ,å£°æœ›:o.å£°æœ›,æ°”è¡€:o.æ°”è¡€,çµæ°”:o.çµæ°”,ç¥è¯†:o.ç¥è¯†,å¯¿å‘½:o.å¯¿å‘½},s=o.ä½ç½®,l=(0,u.isTavernEnv)(),c={è§’è‰²:n,å±æ€§:i,ä½ç½®:s,æ•ˆæœ:[],æ—¶é—´:{å¹´:t,æœˆ:1,æ—¥:1,å°æ—¶:Math.floor(12*Math.random())+6,åˆ†é’Ÿ:Math.floor(60*Math.random())},èƒŒåŒ…:{çµçŸ³:{ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0},ç‰©å“:{}},è£…å¤‡:{è£…å¤‡1:null,è£…å¤‡2:null,è£…å¤‡3:null,è£…å¤‡4:null,è£…å¤‡5:null,è£…å¤‡6:null},åŠŸæ³•:{å½“å‰åŠŸæ³•ID:null,åŠŸæ³•è¿›åº¦:{},åŠŸæ³•å¥—è£…:{ä¸»ä¿®:null,è¾…ä¿®:[]}},ä¿®ç‚¼:{ä¿®ç‚¼åŠŸæ³•:null},å¤§é“:{å¤§é“åˆ—è¡¨:{}},æŠ€èƒ½:{æŒæ¡æŠ€èƒ½:[],è£…å¤‡æ :[],å†·å´:{}},å®—é—¨:void 0,ä»»åŠ¡:{é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}},è®°å¿†:{çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]},å…³ç³»:{},å†å²:{å™äº‹:[]},ç³»ç»Ÿ:{è§„åˆ™:{å±æ€§ä¸Šé™:{å…ˆå¤©å…­å¸:{æ¯é¡¹ä¸Šé™:10}},è£…å¤‡ç³»ç»Ÿ:"è£…å¤‡å­˜å‚¨å¼•ç”¨{ç‰©å“ID,åç§°}ï¼Œå®Œæ•´æ•°æ®åœ¨èƒŒåŒ….ç‰©å“ä¸­",å“è´¨æ§åˆ¶:"ä¸¥æ ¼éµå®ˆå¢ƒç•Œå¯¹åº”å“è´¨èŒƒå›´ï¼Œä»™å“ä¸–ç•Œä¸Šå‡ ä¹æ²¡æœ‰ï¼Œæ¯ä¸€ä¸ªéƒ½æ˜¯ä»¤ä¸–ç•ŒåŠ¨è¡çš„å­˜åœ¨ï¼Œç¥å“ä¸å­˜åœ¨"},æç¤º:["âš ï¸ å…ˆåˆ›å»ºåä¿®æ”¹ï¼šä¿®æ”¹æ•°æ®å‰å¿…é¡»ç¡®ä¿æ•°æ®å·²å­˜åœ¨","è£…å¤‡å­—æ®µï¼šè£…å¤‡1-6"],...l?{...(0,m.rW)()}:{}}};l&&c.ç³»ç»Ÿ?.nsfwMode&&(console.log("[è§’è‰²åˆå§‹åŒ–] NSFWæ¨¡å¼å·²å¼€å¯ï¼Œå°†ç”±AIç”Ÿæˆèº«ä½“éƒ¨ä½è¯¦ç»†æè¿°"),c.èº«ä½“={...c.èº«ä½“??{},éƒ¨ä½å¼€å‘:{}});const{migrated:d}=(0,v.jj)(c);return{saveData:d,processedBaseInfo:n}}(t,a),s=await async function(e,t){console.log("[åˆå§‹åŒ–æµç¨‹] 2. ç”Ÿæˆä¸–ç•Œæ•°æ®");const n=(0,l.useUIStore)();n.updateLoadingText("ğŸŒ ä¸–ç•Œç”Ÿæˆ: å‡†å¤‡é…ç½®...");const a=(0,c.N)(),r=a.worldGenerationConfig,o=a.selectedWorld;console.log("[ä¸–ç•Œç”Ÿæˆ] ç”¨æˆ·é…ç½®çš„ä¸–ç•Œè§„æ¨¡:",{ä¸»è¦åŠ¿åŠ›:r.majorFactionsCount,åœ°ç‚¹æ€»æ•°:r.totalLocations,ç§˜å¢ƒæ•°é‡:r.secretRealmsCount,å¤§é™†æ•°é‡:r.continentCount,ä»…ç”Ÿæˆå¤§é™†:r.generateOnlyContinents});const i=!r.generateOnlyContinents,s=i?r.majorFactionsCount||5:0,d=i?r.totalLocations||12:0,u=i?r.secretRealmsCount||5:0;r.generateOnlyContinents?console.log('[ä¸–ç•Œç”Ÿæˆ] âœ… å¼€å¯"ä»…ç”Ÿæˆå¤§é™†"æ¨¡å¼ï¼ŒåŠ¿åŠ›ã€åœ°ç‚¹å’Œç§˜å¢ƒå°†åœ¨å±€å†…åŠ¨æ€ç”Ÿæˆ'):console.log("[ä¸–ç•Œç”Ÿæˆ] ğŸ“‹ å®Œæ•´ä¸–ç•Œç”Ÿæˆæ¨¡å¼ï¼Œå°†ç”ŸæˆåŠ¿åŠ›ã€åœ°ç‚¹å’Œç§˜å¢ƒ");const m={worldName:o?.name||t.name,worldBackground:o?.description??t.description??void 0,worldEra:o?.era??t.era??void 0,factionCount:s,locationCount:d,secretRealmsCount:u,continentCount:r.continentCount||4,maxRetries:3,retryDelay:2e3,characterBackground:(e=>{if("string"==typeof e)return e;if(e&&"object"==typeof e&&"åç§°"in e){const t=e.åç§°;if("string"==typeof t)return t}return String(e??"")})(e.å‡ºç”Ÿ),mapConfig:r.mapConfig,onStreamChunk:e=>{n.updateLoadingText(`ğŸŒ ä¸–ç•Œç”Ÿæˆä¸­...\n\n${e.substring(0,150)}...`)}};console.log("[åˆå§‹åŒ–æµç¨‹] å¼€å§‹è°ƒç”¨ä¸–ç•Œç”Ÿæˆå™¨..."),n.updateLoadingText("ğŸŒ ä¸–ç•Œç”Ÿæˆ: è°ƒç”¨AIç”Ÿæˆä¸–ç•Œæ¶æ„...");const p=new b.U(m),f=Date.now(),g=await p.generateValidatedWorld(),h=Date.now()-f;if(console.log(`[åˆå§‹åŒ–æµç¨‹] ä¸–ç•Œç”Ÿæˆå™¨è¿”å›,è€—æ—¶: ${h}ms`),g.success&&g.worldInfo)return console.log("[åˆå§‹åŒ–æµç¨‹] ä¸–ç•Œç”ŸæˆæˆåŠŸ"),n.updateLoadingText("ğŸŒ ä¸–ç•Œç”Ÿæˆ: å®Œæˆ"),g.worldInfo;throw new Error(`ä¸–ç•Œç”Ÿæˆå¤±è´¥ï¼š${g.errors?.join(", ")||"æœªçŸ¥é”™è¯¯"}`)}(i,n);e.ä¸–ç•Œ||(e.ä¸–ç•Œ={ä¿¡æ¯:{},çŠ¶æ€:{}}),e.ä¸–ç•Œ.ä¿¡æ¯=s,console.log("[åˆå§‹åŒ–æµç¨‹] 2.5 ä¸–ç•Œå·²åŒ…å«åœ¨saveDataä¸­ï¼ˆæ–°æ¶æ„è·³è¿‡é…’é¦†åŒæ­¥ï¼‰"),console.log("[åˆå§‹åŒ–æµç¨‹] ä¸–ç•ŒåŒ…å«",s.å¤§é™†ä¿¡æ¯?.length||0,"ä¸ªå¤§é™†"),console.log("[åˆå§‹åŒ–æµç¨‹] å¤§é™†åˆ—è¡¨:",s.å¤§é™†ä¿¡æ¯?.map(e=>e.åç§°||e.name).join("ã€")),console.log("[åˆå§‹åŒ–æµç¨‹] å‡†å¤‡è°ƒç”¨generateOpeningScene..."),console.log("[åˆå§‹åŒ–æµç¨‹] ä½¿ç”¨æµå¼æ¨¡å¼:",r),console.log("[åˆå§‹åŒ–æµç¨‹] ä½¿ç”¨ç”Ÿæˆæ¨¡å¼:",o);const{finalSaveData:d}=await async function(e,t,n,a,r=!0,o="generate"){console.log("[åˆå§‹åŒ–æµç¨‹] 3. ç”Ÿæˆå¼€åœºå‰§æƒ…");const i=(0,l.useUIStore)();i.updateLoadingText("å¤©é“æ­£åœ¨ä¸ºä½ ä¹¦å†™å‘½è¿ä¹‹ç« ...");const s=(0,c.N)(),d={name:t.åå­—,gender:t.æ€§åˆ«,race:t.ç§æ—??"äººæ—",age:a,world:t.ä¸–ç•Œ||n,talentTier:t.å¤©èµ„,origin:t.å‡ºç”Ÿ,spiritRoot:t.çµæ ¹,talents:t.å¤©èµ‹||[],attributes:t.å…ˆå¤©å…­å¸||{},difficultyPrompt:s.currentDifficultyPrompt};console.log("[åˆå§‹åŒ–] ğŸ”¥ ç”¨æˆ·é€‰æ‹©æ•°æ®æ£€æŸ¥:"),console.log("  - ç§æ—:",t.ç§æ—,"->",d.race),console.log("  - å¤©èµ„:",d.talentTier),console.log("  - å‡ºèº«:",d.origin),console.log("  - çµæ ¹:",d.spiritRoot),console.log("  - å¤©èµ‹æ•°é‡:",d.talents?.length),console.log("  - éš¾åº¦:",s.gameDifficulty);const h=(0,u.isTavernEnv)(),v={worldInfo:e.ä¸–ç•Œ?.ä¿¡æ¯,availableContinents:e.ä¸–ç•Œ?.ä¿¡æ¯?.å¤§é™†ä¿¡æ¯?.map(e=>({åç§°:e.åç§°,æè¿°:e.æè¿°,å¤§æ´²è¾¹ç•Œ:e.å¤§æ´²è¾¹ç•Œ}))||[],availableLocations:e.ä¸–ç•Œ?.ä¿¡æ¯?.åœ°ç‚¹ä¿¡æ¯?.map(e=>({åç§°:e.name||e.åç§°,ç±»å‹:e.type||e.ç±»å‹,æè¿°:e.description||e.æè¿°,æ‰€å±åŠ¿åŠ›:e.faction||e.æ‰€å±åŠ¿åŠ›,coordinates:e.coordinates}))||[],mapConfig:e.ä¸–ç•Œ?.ä¿¡æ¯?.åœ°å›¾é…ç½®,systemSettings:h?(0,m.Md)(e.ç³»ç»Ÿ?.é…ç½®??{}):e.ç³»ç»Ÿ?.é…ç½®||{}};console.log("[åˆå§‹åŒ–] ğŸ”¥ ä¸–ç•Œæ£€æŸ¥:"),console.log("  - ä¸–ç•Œæè¿°:",e.ä¸–ç•Œ?.ä¿¡æ¯?.ä¸–ç•ŒèƒŒæ™¯||"æœªæ‰¾åˆ°"),console.log("  - å¤§é™†æ•°é‡:",v.availableContinents.length),console.log("  - åœ°ç‚¹æ•°é‡:",v.availableLocations.length);const b=await(0,g.IJ)(),y=(0,g.p$)(d,v),k=`æˆ‘åˆ›å»ºäº†è§’è‰²"${t.åå­—}"ï¼Œè¯·æ ¹æ®æˆ‘çš„é€‰æ‹©ç”Ÿæˆå¼€å±€æ•…äº‹å’Œåˆå§‹æ•°æ®ã€‚\n\n${y}\n\n**é‡è¦æç¤º**ï¼š\n- ä¸¥æ ¼æŒ‰ç…§æˆ‘çš„è§’è‰²è®¾å®šæ¥ç”Ÿæˆå†…å®¹\n- æˆ‘é€‰æ‹©çš„æ˜¯ä»€ä¹ˆæ ·çš„å‡ºèº«ã€å¤©èµ‹ã€çµæ ¹ï¼Œä½ å°±å¦‚å®å±•ç°\n- ä¸è¦å¼ºåŠ ä»»ä½•é¢„è®¾çš„å‰§æƒ…æ–¹å‘æˆ–ç”Ÿæ´»æ–¹å¼\n- è¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œæˆ‘çš„äººç”Ÿæˆ‘åšä¸»`;console.log(`[åˆå§‹åŒ–] å‡†å¤‡ç”Ÿæˆå¼€åœºå‰§æƒ…ï¼Œè§’è‰²: ${t.åå­—}`),console.log("[åˆå§‹åŒ–] å¯ç”¨å¤§é™†åˆ—è¡¨:",v.availableContinents.map(e=>e.åç§°)),console.log("[åˆå§‹åŒ–] å¯ç”¨åœ°ç‚¹æ•°é‡:",v.availableLocations?.length||0);let w="";const E=e=>{w+=e;const t=w.length>300?"..."+w.slice(-300):w;i.updateLoadingText(`å¤©é“æ­£åœ¨ä¸ºä½ ä¹¦å†™å‘½è¿ä¹‹ç« ...<br/><br/><div style="text-align: left; font-size: 0.9em; opacity: 0.8; white-space: pre-wrap;">${t}</div>`)},N=await async function(e,t,n,a){const r=(0,l.useUIStore)();let o=null,i=0;for(;;){i++;try{i>1&&r.updateLoadingText(`${a} (ç¬¬ ${i-1} æ¬¡é‡è¯•)`),console.log(`[robustAICall] æ­£åœ¨å°è¯•: ${a}, ç¬¬ ${i} æ¬¡`);const n=await e();if(console.log(`[robustAICall] æ”¶åˆ°å“åº” for ${a}:`,n),t(n))return console.log(`[robustAICall] å“åº”éªŒè¯æˆåŠŸ for ${a}`),n;throw new Error("AIå“åº”æ ¼å¼æ— æ•ˆæˆ–æœªé€šè¿‡éªŒè¯")}catch(e){if(o=e instanceof Error?e:new Error(String(e)),console.warn(`[AIè°ƒç”¨é‡è¯•] ç¬¬ ${i} æ¬¡å°è¯•å¤±è´¥:`,o.message),i>3){if(await x(a,o.message)){i=0;continue}throw new Error(`${a}å¤±è´¥ï¼Œç”¨æˆ·é€‰æ‹©ä¸ç»§ç»­é‡è¯•: ${o.message}`)}await new Promise(e=>setTimeout(e,1e3*i))}}}(async()=>{console.log("[åˆå§‹åŒ–] ===== å¼€å§‹ç”Ÿæˆå¼€åœºå‰§æƒ… =====");const e=Date.now();try{const t=f.J,n=await t.generateInitialMessage(b,k,{useStreaming:r,generateMode:o,onStreamChunk:E}),a=Date.now()-e;return console.log(`[åˆå§‹åŒ–] âœ… AIç”Ÿæˆå®Œæˆ,è€—æ—¶: ${a}ms, æµå¼æ¨¡å¼: ${r}, ç”Ÿæˆæ¨¡å¼: ${o}`),n}catch(e){throw console.error("[åˆå§‹åŒ–] âŒ AIç”Ÿæˆå¤±è´¥:",e),e}},e=>{if(console.log("[AIéªŒè¯-è¯Šæ–­] ===== å¼€å§‹éªŒè¯AIå“åº” ====="),console.log("[AIéªŒè¯-è¯Šæ–­] å“åº”ç±»å‹:",typeof e),console.log("[AIéªŒè¯-è¯Šæ–­] å“åº”å†…å®¹(å‰500å­—):",JSON.stringify(e).substring(0,500)),!e||"object"!=typeof e)return console.warn("[AIéªŒè¯] âŒ å“åº”ä¸æ˜¯å¯¹è±¡ï¼Œå®é™…ç±»å‹:",typeof e),console.warn("[AIéªŒè¯] å“åº”å†…å®¹:",e),!1;if(!e.text||"string"!=typeof e.text)return console.warn("[AIéªŒè¯] âŒ textå­—æ®µæ— æ•ˆ"),console.warn("[AIéªŒè¯] textå€¼:",e.text),!1;if(e.text.trim().length<200)return console.warn("[AIéªŒè¯] âŒ æ–‡æœ¬å¤ªçŸ­ (é•¿åº¦:",e.text.length,")"),!1;if(e.text.includes("placeholder")||e.text.includes("TODO")||e.text.includes("å¾…å¡«å……"))return console.warn("[AIéªŒè¯] âŒ æ–‡æœ¬åŒ…å«å ä½ç¬¦"),!1;if(!Array.isArray(e.tavern_commands))return console.warn("[AIéªŒè¯] âŒ tavern_commandsä¸æ˜¯æ•°ç»„ï¼Œå®é™…ç±»å‹:",typeof e.tavern_commands),console.warn("[AIéªŒè¯] tavern_commandså€¼:",e.tavern_commands),!1;if(0===e.tavern_commands.length)return console.warn("[AIéªŒè¯] âŒ tavern_commandsæ˜¯ç©ºæ•°ç»„"),!1;console.log("[AIéªŒè¯-è¯Šæ–­] tavern_commandsæ•°é‡:",e.tavern_commands.length);const t=e.tavern_commands.find(e=>!(!e||"set"!==e.action||"è§’è‰².ä½ç½®"!==e.key&&"ä½ç½®"!==e.key));if(t){const e=t.value;if(!e||"object"!=typeof e)return console.warn("[AIéªŒè¯] âŒ ä½ç½®å€¼ä¸æ˜¯å¯¹è±¡ï¼Œç±»å‹:",typeof e),console.warn("[AIéªŒè¯] ä½ç½®å€¼:",e),!1;const n=e;if(!n.æè¿°||"string"!=typeof n.æè¿°||0===n.æè¿°.trim().length)return console.warn("[AIéªŒè¯] âŒ ä½ç½®æè¿°æ— æ•ˆ"),console.warn("[AIéªŒè¯] æè¿°å€¼:",n.æè¿°),!1;if(n.æè¿°.includes("undefined")||n.æè¿°.includes("null"))return console.warn("[AIéªŒè¯] âŒ ä½ç½®æè¿°åŒ…å«æ— æ•ˆå†…å®¹:",n.æè¿°),!1;if("number"!=typeof n.x||"number"!=typeof n.y)return console.warn("[AIéªŒè¯] âŒ ä½ç½®åæ ‡æ— æ•ˆ"),console.warn("[AIéªŒè¯] x:",n.x,"y:",n.y),!1;console.log("[AIéªŒè¯] âœ… ä½ç½®å‘½ä»¤æœ‰æ•ˆ:",n.æè¿°,`(${n.x}, ${n.y})`)}else console.warn("[AIéªŒè¯] âš ï¸ æœªæä¾›ä½ç½®å‘½ä»¤ï¼ˆå°†ç»§ç»­æµç¨‹ï¼Œåç»­ç”±é»˜è®¤å€¼/æœ€ç»ˆæ ¡éªŒå…œåº•ï¼‰");return Array.isArray(e.action_options)?0===e.action_options.length?console.warn("[AIéªŒè¯] âš ï¸ action_optionsæ˜¯ç©ºæ•°ç»„ï¼Œå°†ä½¿ç”¨é»˜è®¤é€‰é¡¹"):console.log("[AIéªŒè¯] âœ… action_optionsæœ‰æ•ˆï¼Œæ•°é‡:",e.action_options.length):console.warn("[AIéªŒè¯] âš ï¸ action_optionsä¸æ˜¯æ•°ç»„ï¼Œå°†ä½¿ç”¨é»˜è®¤é€‰é¡¹"),console.log("[AIéªŒè¯] âœ… æ‰€æœ‰éªŒè¯é€šè¿‡"),!0},0,"å¤©é“æ­£åœ¨ä¹¦å†™å‘½è¿ä¹‹ç« "),S=f.J,{saveData:V,stateChanges:_}=await S.processGmResponse(N,e,!0),C=(0,c.N)();if("éšæœºçµæ ¹"===C.selectedSpiritRoot?.name&&V.è§’è‰²?.èº«ä»½?.çµæ ¹){const e=V.è§’è‰².èº«ä»½.çµæ ¹;"object"==typeof e&&C.setAIGeneratedSpiritRoot(e)}if("éšæœºå‡ºèº«"===C.selectedOrigin?.name&&V.è§’è‰²?.èº«ä»½?.å‡ºç”Ÿ){const e=V.è§’è‰².èº«ä»½.å‡ºç”Ÿ;"object"==typeof e&&C.setAIGeneratedOrigin(e)}if((0,p.useGameStateStore)().loadFromSaveData(V),!String(N.text||"").trim())throw new Error("AIç”Ÿæˆçš„å¼€åœºå‰§æƒ…ä¸ºç©º");return V.ç³»ç»Ÿ?.å†å²?.å™äº‹&&V.ç³»ç»Ÿ.å†å².å™äº‹.length>0&&(V.ç³»ç»Ÿ.å†å².å™äº‹[V.ç³»ç»Ÿ.å†å².å™äº‹.length-1].stateChanges=_),{finalSaveData:V,aiResponse:N}}(e,i,n,a,r,o);console.log("[åˆå§‹åŒ–æµç¨‹] generateOpeningSceneå·²è¿”å›"),console.log("[åˆå§‹åŒ–æµç¨‹] æ ¸å¿ƒå±æ€§æ ¡å‡†ï¼šåˆå¹¶AIä¿®æ”¹ä¸åˆå§‹å±æ€§...");const w=k(t,a),E=d.çŠ¶æ€||{},N=E.å¢ƒç•Œ&&"object"==typeof E.å¢ƒç•Œ?{åç§°:E.å¢ƒç•Œ.åç§°||w.å¢ƒç•Œ.åç§°,é˜¶æ®µ:void 0!==E.å¢ƒç•Œ.é˜¶æ®µ?E.å¢ƒç•Œ.é˜¶æ®µ:w.å¢ƒç•Œ.é˜¶æ®µ,å½“å‰è¿›åº¦:void 0!==E.å¢ƒç•Œ.å½“å‰è¿›åº¦?E.å¢ƒç•Œ.å½“å‰è¿›åº¦:w.å¢ƒç•Œ.å½“å‰è¿›åº¦,ä¸‹ä¸€çº§æ‰€éœ€:void 0!==E.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€?E.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€:w.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€,çªç ´æè¿°:E.å¢ƒç•Œ.çªç ´æè¿°||w.å¢ƒç•Œ.çªç ´æè¿°}:w.å¢ƒç•Œ;d.çŠ¶æ€={...w,...E,å¢ƒç•Œ:N},console.log("[åˆå§‹åŒ–æµç¨‹] æ ¸å¿ƒå±æ€§æ ¡å‡†å®Œæˆï¼Œå¢ƒç•Œ:",N),console.log("[åˆå§‹åŒ–æµç¨‹] å‡†å¤‡æœ€ç»ˆåŒ–å¹¶åŒæ­¥æ•°æ®...");const S=await async function(e,t,n,a){console.log("[åˆå§‹åŒ–æµç¨‹] 4. åˆå¹¶ã€éªŒè¯å¹¶åŒæ­¥æœ€ç»ˆæ•°æ®");const r=(0,l.useUIStore)();r.updateLoadingText(`æ­£åœ¨åŒæ­¥æ•°æ®ï¼Œå³å°†è¿›å…¥${t.åå­—}çš„ä¿®ä»™ä¸–ç•Œ...`);const o={...e.è§’è‰²?.èº«ä»½??{},...t,åå­—:t.åå­—,æ€§åˆ«:t.æ€§åˆ«,ç§æ—:t.ç§æ—,å…ˆå¤©å…­å¸:t.å…ˆå¤©å…­å¸,å¤©èµ‹:t.å¤©èµ‹};if("object"==typeof t.çµæ ¹&&t.çµæ ¹?.name?.includes("éšæœº")||"string"==typeof t.çµæ ¹&&t.çµæ ¹.includes("éšæœº")){console.log("[æ•°æ®æœ€ç»ˆåŒ–] ğŸ² ç”¨æˆ·é€‰æ‹©éšæœºçµæ ¹ï¼Œä½¿ç”¨AIç”Ÿæˆçš„æ•°æ®");const n=e.è§’è‰²?.èº«ä»½?.çµæ ¹;if(o.çµæ ¹=n||"éšæœºçµæ ¹","string"==typeof o.çµæ ¹&&o.çµæ ¹.includes("éšæœº")){console.warn("[æ•°æ®æœ€ç»ˆåŒ–] âš ï¸ è­¦å‘Šï¼šAIæœªèƒ½æ­£ç¡®æ›¿æ¢éšæœºçµæ ¹ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®åº“ç”Ÿæˆ");const e=t.å¤©èµ„;let n=y.Gr.filter(t=>"åºŸæŸ´"===e.name||"å‡¡äºº"===e.name?"å‡¡å“"===t.tier||"ä¸‹å“"===t.tier:"ä¿Šæ°"===e.name?"ä¸­å“"===t.tier||"ä¸Šå“"===t.tier:"å¤©éª„"===e.name?"ä¸Šå“"===t.tier||"æå“"===t.tier:"å¦–å­½"===e.name?"æå“"===t.tier:"å‡¡å“"===t.tier||"ä¸‹å“"===t.tier);0===n.length&&(n=y.Gr);const a=n[Math.floor(Math.random()*n.length)];o.çµæ ¹=a,console.log(`[æ•°æ®æœ€ç»ˆåŒ–] âœ… å·²ä»æœ¬åœ°æ•°æ®åº“ç”Ÿæˆéšæœºçµæ ¹: ${a.name} (${a.tier})`)}}else console.log(`[æ•°æ®æœ€ç»ˆåŒ–] âœ… ç”¨æˆ·é€‰æ‹©ç‰¹å®šçµæ ¹ï¼Œå¼ºåˆ¶ä½¿ç”¨ç”¨æˆ·é€‰æ‹©: ${t.çµæ ¹?.name}`),o.çµæ ¹=t.çµæ ¹;if("object"==typeof t.å‡ºç”Ÿ&&t.å‡ºç”Ÿ?.name?.includes("éšæœº")||"string"==typeof t.å‡ºç”Ÿ&&t.å‡ºç”Ÿ.includes("éšæœº")){console.log("[æ•°æ®æœ€ç»ˆåŒ–] ğŸ² ç”¨æˆ·é€‰æ‹©éšæœºå‡ºèº«ï¼Œä½¿ç”¨AIç”Ÿæˆçš„æ•°æ®");const t=e.è§’è‰²?.èº«ä»½?.å‡ºç”Ÿ;if(o.å‡ºç”Ÿ=t||"éšæœºå‡ºèº«","string"==typeof o.å‡ºç”Ÿ&&o.å‡ºç”Ÿ.includes("éšæœº")){console.warn("[æ•°æ®æœ€ç»ˆåŒ–] âš ï¸ è­¦å‘Šï¼šAIæœªèƒ½æ­£ç¡®æ›¿æ¢éšæœºå‡ºèº«ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®åº“ç”Ÿæˆ");const e=y.yM[Math.floor(Math.random()*y.yM.length)];o.å‡ºç”Ÿ=e,console.log(`[æ•°æ®æœ€ç»ˆåŒ–] âœ… å·²ä»æœ¬åœ°æ•°æ®åº“ç”Ÿæˆéšæœºå‡ºèº«: ${e.name}`)}}else console.log(`[æ•°æ®æœ€ç»ˆåŒ–] âœ… ç”¨æˆ·é€‰æ‹©ç‰¹å®šå‡ºèº«ï¼Œå¼ºåˆ¶ä½¿ç”¨ç”¨æˆ·é€‰æ‹©: ${t.å‡ºç”Ÿ?.name}`),o.å‡ºç”Ÿ=t.å‡ºç”Ÿ;const i=function(e){const t={...e},n=(0,c.N)();console.log("[æ•°æ®æ ¡å‡†] å¼€å§‹ä»åˆ›è§’ä»“åº“åŒæ­¥æ‰€æœ‰æƒå¨æ•°æ®..."),console.log("[æ•°æ®æ ¡å‡†] ã€é‡è¦ã€‘æ‰€æœ‰ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©çš„æ•°æ®éƒ½å°†è¢«ä¿æŠ¤ï¼Œä¸è¢«AIæˆ–ä»£ç ä¿®æ”¹");const a=n.selectedTalentTier;a?(console.log(`[æ•°æ®æ ¡å‡†] âœ… åŒæ­¥ç”¨æˆ·é€‰æ‹©çš„å¤©èµ„: ${a.name}`),t.å¤©èµ„=a):console.warn("[æ•°æ®æ ¡å‡†] è­¦å‘Š: æ— æ³•æ‰¾åˆ°æƒå¨çš„å¤©èµ„æ•°æ®ã€‚");const r=n.selectedOrigin,o=t.å‡ºç”Ÿ&&"object"==typeof t.å‡ºç”Ÿ&&"éšæœºå‡ºèº«"!==t.å‡ºç”Ÿ.åç§°;r&&!o?(console.log(`[æ•°æ®æ ¡å‡†] âœ… åŒæ­¥ç”¨æˆ·é€‰æ‹©çš„å‡ºèº«: ${r.name}`),t.å‡ºç”Ÿ=r):o?console.log("[æ•°æ®æ ¡å‡†] âœ… ä¿ç•™å·²ç”Ÿæˆçš„å…·ä½“å‡ºèº«:",t.å‡ºç”Ÿ.name):null===n.characterPayload.origin_id?(console.log("[æ•°æ®æ ¡å‡†] ğŸ² ç”¨æˆ·é€‰æ‹©éšæœºå‡ºèº«ï¼Œä½†æ— æœ‰æ•ˆç”Ÿæˆå€¼ï¼Œæ ‡è®°ä¸ºéšæœº"),t.å‡ºç”Ÿ="éšæœºå‡ºèº«"):console.warn("[æ•°æ®æ ¡å‡†] è­¦å‘Š: æ— æ³•æ‰¾åˆ°æƒå¨çš„å‡ºèº«æ•°æ®ã€‚");const i=n.selectedSpiritRoot,s=t.çµæ ¹&&"object"==typeof t.çµæ ¹&&"éšæœºçµæ ¹"!==t.çµæ ¹.åç§°;i&&!s?(console.log(`[æ•°æ®æ ¡å‡†] âœ… åŒæ­¥ç”¨æˆ·é€‰æ‹©çš„çµæ ¹: ${i.name} (${i.tier})`),t.çµæ ¹=i):s?console.log("[æ•°æ®æ ¡å‡†] âœ… ä¿ç•™å·²ç”Ÿæˆçš„å…·ä½“çµæ ¹:",t.çµæ ¹.name):null===n.characterPayload.spirit_root_id?(console.log("[æ•°æ®æ ¡å‡†] ğŸ² ç”¨æˆ·é€‰æ‹©éšæœºçµæ ¹ï¼Œä½†æ— æœ‰æ•ˆç”Ÿæˆå€¼ï¼Œæ ‡è®°ä¸ºéšæœº"),t.çµæ ¹="éšæœºçµæ ¹"):console.warn("[æ•°æ®æ ¡å‡†] è­¦å‘Š: æ— æ³•æ‰¾åˆ°æƒå¨çš„çµæ ¹æ•°æ®ã€‚");const l=n.selectedTalents;l&&l.length>0?(console.log(`[æ•°æ®æ ¡å‡†] âœ… åŒæ­¥ç”¨æˆ·é€‰æ‹©çš„å¤©èµ‹ï¼Œå…± ${l.length} ä¸ª`),t.å¤©èµ‹=l):(console.log("[æ•°æ®æ ¡å‡†] ç”¨æˆ·æœªé€‰æ‹©ä»»ä½•å¤©èµ‹ï¼Œå¤©èµ‹å­—æ®µè®¾ç½®ä¸ºç©ºæ•°ç»„ã€‚"),t.å¤©èµ‹=[]);const d=n.attributes;return d&&(console.log("[æ•°æ®æ ¡å‡†] âœ… åŒæ­¥ç”¨æˆ·åˆ†é…çš„å…ˆå¤©å…­å¸:",d),t.å…ˆå¤©å…­å¸={æ ¹éª¨:d.root_bone,çµæ€§:d.spirituality,æ‚Ÿæ€§:d.comprehension,æ°”è¿:d.fortune,é­…åŠ›:d.charm,å¿ƒæ€§:d.temperament}),console.log("[æ•°æ®æ ¡å‡†] æƒå¨æ•°æ®åŒæ­¥å®Œæˆã€‚"),t}(o);e.è§’è‰²||(e.è§’è‰²={}),e.è§’è‰².èº«ä»½=i,console.log("[æ•°æ®æœ€ç»ˆåŒ–] é‡æ–°è®¡ç®—å¹¶æ ¡å‡†æ ¸å¿ƒç©å®¶çŠ¶æ€...");const s=k(t,a),d=e.è§’è‰²?.å±æ€§??e.å±æ€§??{},u=e.è§’è‰²?.ä½ç½®??e.ä½ç½®,m=d.å¢ƒç•Œ&&"object"==typeof d.å¢ƒç•Œ?{åç§°:d.å¢ƒç•Œ.åç§°||s.å¢ƒç•Œ.åç§°,é˜¶æ®µ:void 0!==d.å¢ƒç•Œ.é˜¶æ®µ?d.å¢ƒç•Œ.é˜¶æ®µ:s.å¢ƒç•Œ.é˜¶æ®µ,å½“å‰è¿›åº¦:void 0!==d.å¢ƒç•Œ.å½“å‰è¿›åº¦?d.å¢ƒç•Œ.å½“å‰è¿›åº¦:s.å¢ƒç•Œ.å½“å‰è¿›åº¦,ä¸‹ä¸€çº§æ‰€éœ€:void 0!==d.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€?d.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€:s.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€,çªç ´æè¿°:d.å¢ƒç•Œ.çªç ´æè¿°||s.å¢ƒç•Œ.çªç ´æè¿°}:s.å¢ƒç•Œ;e.å±æ€§={å¢ƒç•Œ:m,å£°æœ›:"number"==typeof d.å£°æœ›?d.å£°æœ›:s.å£°æœ›,æ°”è¡€:d.æ°”è¡€??s.æ°”è¡€,çµæ°”:d.çµæ°”??s.çµæ°”,ç¥è¯†:d.ç¥è¯†??s.ç¥è¯†,å¯¿å‘½:d.å¯¿å‘½??s.å¯¿å‘½},console.log("[æ•°æ®æœ€ç»ˆåŒ–] å¢ƒç•Œåˆå¹¶ç»“æœ:",m);const p=u;if(!p||"string"!=typeof p.æè¿°||!p.æè¿°.includes("Â·")){console.error("[æ•°æ®æœ€ç»ˆåŒ–] âŒ ä½ç½®ä¿¡æ¯æ— æ•ˆæˆ–ä¸¢å¤±"),console.error("[æ•°æ®æœ€ç»ˆåŒ–-è¯Šæ–­] aiLocation:",p),console.error("[æ•°æ®æœ€ç»ˆåŒ–-è¯Šæ–­] aiLocation.æè¿°:",p?.æè¿°),console.error("[æ•°æ®æœ€ç»ˆåŒ–-è¯Šæ–­] å®Œæ•´saveData keys:",Object.keys(e));const t=e.å†å²?.å™äº‹||[];if(t.length>0){const e=t[t.length-1];console.error("[æ•°æ®æœ€ç»ˆåŒ–-è¯Šæ–­] æœ€åçš„å™äº‹å†å²:",JSON.stringify(e).substring(0,500))}throw new Error(`ä½ç½®ä¿¡æ¯åœ¨å¤„ç†è¿‡ç¨‹ä¸­ä¸¢å¤±ï¼ŒaiLocation=${JSON.stringify(p)}`)}e.è§’è‰²||(e.è§’è‰²={}),e.è§’è‰².ä½ç½®=p,console.log(`[æ•°æ®æœ€ç»ˆåŒ–] âœ… å·²ä¿ç•™AIç”Ÿæˆçš„ä½ç½®ä¿¡æ¯: "${p.æè¿°}"`),console.log("[æ•°æ®æœ€ç»ˆåŒ–] æ ¸å¿ƒç©å®¶çŠ¶æ€æ ¡å‡†å®Œæˆã€‚"),delete e.çŠ¶æ€;const f=e.å…ƒæ•°æ®?.æ—¶é—´??e.æ—¶é—´;if(f){const t={å¹´:f.å¹´-a,æœˆ:f.æœˆ,æ—¥:f.æ—¥,å°æ—¶:0,åˆ†é’Ÿ:0};e.è§’è‰²||(e.è§’è‰²={}),e.è§’è‰².èº«ä»½=e.è§’è‰².èº«ä»½||{},e.è§’è‰².èº«ä»½.å‡ºç”Ÿæ—¥æœŸ=t,console.log(`[æ•°æ®æœ€ç»ˆåŒ–] é‡æ–°è®¡ç®—å‡ºç”Ÿæ—¥æœŸ: ${t.å¹´}å¹´${t.æœˆ}æœˆ${t.æ—¥}æ—¥ (æ—¶é—´${f.å¹´}å¹´ - å¼€å±€å¹´é¾„${a}å²)`);const n=e.ç¤¾äº¤?.å…³ç³»??e.å…³ç³»;n&&Object.keys(n).length>0&&(console.log("[æ•°æ®æœ€ç»ˆåŒ–] éªŒè¯NPCå‡ºç”Ÿæ—¥æœŸ:"),Object.entries(n).forEach(([e,t])=>{const n=t;if(n.å‡ºç”Ÿæ—¥æœŸ&&n.å¹´é¾„){const t=f.å¹´-n.å‡ºç”Ÿæ—¥æœŸ.å¹´;console.log(`  - ${e}: å‡ºç”Ÿ${n.å‡ºç”Ÿæ—¥æœŸ.å¹´}å¹´, å£°ç§°å¹´é¾„${n.å¹´é¾„}å², å®é™…å¹´é¾„${t}å² ${t===n.å¹´é¾„?"âœ…":"âŒä¸åŒ¹é…"}`)}}))}const g=e.è§’è‰²?.ä½ç½®?.æè¿°;if(console.log(`[æ•°æ®æ ¡å‡†] âœ… ä½ç½®ä¿¡æ¯æœ€ç»ˆç¡®è®¤: "${g}"`),!g||!g.includes("Â·"))throw console.error("[æ•°æ®æ ¡å‡†] âŒ ä½ç½®æ ¼å¼å¼‚å¸¸ï¼Œè¿™ä¸åº”è¯¥å‘ç”Ÿï¼ˆéªŒè¯å™¨åº”è¯¥å·²æ‹¦æˆªï¼‰"),console.error("[æ•°æ®æ ¡å‡†-è¯Šæ–­] saveData.è§’è‰².ä½ç½®:",e.è§’è‰²?.ä½ç½®),new Error(`ä½ç½®æ ¼å¼éªŒè¯å¤±è´¥: "${g}"`);const{migrated:b,report:x}=(0,v.jj)(e);x.legacyKeysFound.length>0&&console.log("[æ•°æ®æœ€ç»ˆåŒ–] è¿ç§»æŠ¥å‘Š legacyKeysFound:",x.legacyKeysFound);const w=(0,h.zB)(b,{è§’è‰²:t,æ¨¡å¼:"å•æœº"},"creation");if(!w.isValid)throw new Error(`è§’è‰²æ•°æ®æœ€ç»ˆéªŒè¯å¤±è´¥: ${w.errors.join(", ")}`);const E=b?.è§’è‰²?.ä¿®ç‚¼?.ä¿®ç‚¼åŠŸæ³•,N=b?.è§’è‰²?.èƒŒåŒ…?.ç‰©å“??{};if(E?.ç‰©å“ID&&"string"==typeof E.åç§°){const e=N[E.ç‰©å“ID];!e||"åŠŸæ³•"!==e.ç±»å‹||e.åç§°!==E.åç§°&&!e.åç§°||!0!==e.ä¿®ç‚¼ä¸­&&!0!==e.å·²è£…å¤‡?(console.warn("[æ•°æ®æ ¡å‡†] æ£€æµ‹åˆ°æ— æ•ˆçš„â€œå¹½çµåŠŸæ³•â€ï¼šè§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³• éç©ºï¼Œä½†è§’è‰².èƒŒåŒ….ç‰©å“ä¸­æ— å¯¹åº”å®ä½“ã€‚æ­£åœ¨æ¸…é™¤æ— æ•ˆä¿®ç‚¼çŠ¶æ€..."),b.è§’è‰²?.ä¿®ç‚¼&&(b.è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•=null)):console.log(`[æ•°æ®æ ¡å‡†] åŠŸæ³•ä¸€è‡´æ€§æ ¡éªŒé€šè¿‡: "${E.åç§°}"`)}return console.log("[åˆå§‹åŒ–æµç¨‹] âœ… è§’è‰²åˆ›å»ºå®Œæˆï¼ˆæ–°æ¶æ„è·³è¿‡é…’é¦†åŒæ­¥ï¼‰"),r.updateLoadingText("âœ… è§’è‰²åˆ›å»ºå®Œæˆï¼"),console.log("[åˆå§‹åŒ–æµç¨‹] finalizeAndSyncDataå³å°†è¿”å› V3 saveData"),b}(d,t,0,a);return console.log("[åˆå§‹åŒ–æµç¨‹] æœ€ç»ˆåŒ–å®Œæˆ"),console.log("[åˆå§‹åŒ–æµç¨‹] âœ… è§’è‰²åˆ›å»ºæˆåŠŸï¼å‡†å¤‡è¿”å›completedSaveData"),console.log("[åˆå§‹åŒ–æµç¨‹] completedSaveDataç±»å‹:",typeof S),console.log("[åˆå§‹åŒ–æµç¨‹] completedSaveDataæœ‰æ•ˆ:",!!S),S}catch(e){throw console.error("[åˆå§‹åŒ–æµç¨‹] âŒ è§’è‰²åˆå§‹åŒ–å¤±è´¥ï¼š",e),console.error("[åˆå§‹åŒ–æµç¨‹] é”™è¯¯å †æ ˆ:",e instanceof Error?e.stack:"N/A"),e}finally{console.log("[åˆå§‹åŒ–æµç¨‹] initializeCharacterå‡½æ•°æ‰§è¡Œå®Œæ¯•")}}var E=n(9333),N=n(8546),S=n(6939),V=n(8708),_=(n(3943),n(6988));const C={class:"save-migration"},A={class:"migration-meta"},D={class:"meta-item"},T={class:"value"},B={class:"meta-item"},I={class:"value"},z={class:"migration-reasons"},M={class:"reason-list"},P={class:"migration-actions"},R=["disabled"],$=["disabled"],O=(0,a.defineComponent)({__name:"SaveMigrationModal",props:{characterId:{},saveSlot:{},legacyKeysFound:{},onConfirm:{type:Function},onCancel:{type:Function}},setup(e){const t=e,n=(0,a.ref)(!1);let r=!1;const o=async()=>{if(!n.value){n.value=!0;try{r=!0,await(t.onConfirm?.())}finally{n.value=!1}}},i=()=>{n.value||(r=!0,t.onCancel?.())};return(0,a.onBeforeUnmount)(()=>{r||t.onCancel?.()}),(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",C,[t[3]||(t[3]=(0,a.createElementVNode)("div",{class:"migration-header"},[(0,a.createElementVNode)("h4",null,"æ£€æµ‹åˆ°æ—§ç‰ˆå­˜æ¡£ç»“æ„"),(0,a.createElementVNode)("p",null,"æ­¤å­˜æ¡£ä¸ç¬¦åˆ V3ï¼ˆ5é¢†åŸŸï¼šå…ƒæ•°æ®/è§’è‰²/ç¤¾äº¤/ä¸–ç•Œ/ç³»ç»Ÿï¼‰ï¼Œå¿…é¡»è¿ç§»åæ‰èƒ½åŠ è½½ã€‚")],-1)),(0,a.createElementVNode)("div",A,[(0,a.createElementVNode)("div",D,[t[0]||(t[0]=(0,a.createElementVNode)("span",{class:"label"},"è§’è‰²ID",-1)),(0,a.createElementVNode)("span",T,(0,a.toDisplayString)(e.characterId),1)]),(0,a.createElementVNode)("div",B,[t[1]||(t[1]=(0,a.createElementVNode)("span",{class:"label"},"å­˜æ¡£æ§½ä½",-1)),(0,a.createElementVNode)("span",I,(0,a.toDisplayString)(e.saveSlot),1)])]),(0,a.createElementVNode)("div",z,[t[2]||(t[2]=(0,a.createElementVNode)("div",{class:"reason-title"},"æ£€æµ‹åˆ°çš„æ—§å­—æ®µ",-1)),(0,a.createElementVNode)("div",M,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.legacyKeysFound,e=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:e,class:"tag"},(0,a.toDisplayString)(e),1))),128))])]),t[4]||(t[4]=(0,a.createElementVNode)("div",{class:"migration-hint"},[(0,a.createElementVNode)("div",null,"æ“ä½œä¼šè‡ªåŠ¨ï¼š"),(0,a.createElementVNode)("ul",null,[(0,a.createElementVNode)("li",null,"å…ˆåœ¨ IndexedDB åˆ›å»ºä¸€ä»½éšè—å¤‡ä»½ï¼ˆä¸å‡ºç°åœ¨å­˜æ¡£åˆ—è¡¨ï¼‰"),(0,a.createElementVNode)("li",null,"è¦†ç›–å†™å›å½“å‰æ§½ä½ä¸º V3 æ–°ç»“æ„å­˜æ¡£")])],-1)),(0,a.createElementVNode)("div",P,[(0,a.createElementVNode)("button",{class:"primary",disabled:n.value,onClick:o},(0,a.toDisplayString)(n.value?"æ­£åœ¨è¿ç§»â€¦":"å¤‡ä»½å¹¶è¿ç§»"),9,R),(0,a.createElementVNode)("button",{class:"secondary",disabled:n.value,onClick:i},"å–æ¶ˆ",8,$)])]))}});var L=n(5072),F=n.n(L),j=n(7825),U=n.n(j),q=n(7659),G=n.n(q),H=n(5056),Y=n.n(H),W=n(540),X=n.n(W),J=n(1113),K=n.n(J),Q=n(9197),Z={};Z.styleTagTransform=K(),Z.setAttributes=Y(),Z.insert=G().bind(null,"head"),Z.domAPI=U(),Z.insertStyleElement=X(),F()(Q.A,Z),Q.A&&Q.A.locals&&Q.A.locals;const ee=(0,n(6262).A)(O,[["__scopeId","data-v-230bf738"]]),te=(0,r.nY)("characterV3",()=>{const e=(0,a.ref)({å½“å‰æ¿€æ´»å­˜æ¡£:null,è§’è‰²åˆ—è¡¨:{}}),t=(0,a.ref)(null),r=(0,a.ref)(!1),f=async()=>{if(!r.value)try{await d.YK()&&s.Yz.log("è§’è‰²å•†åº—","âœ… æ•°æ®å·²è¿ç§»åˆ°IndexedDB"),e.value=await d.$v(),r.value=!0,s.Yz.log("è§’è‰²å•†åº—","âœ… Storeåˆå§‹åŒ–å®Œæˆï¼Œæ•°æ®å·²åŠ è½½")}catch(t){s.Yz.error("è§’è‰²å•†åº—","âŒ Storeåˆå§‹åŒ–å¤±è´¥",t),e.value={å½“å‰æ¿€æ´»å­˜æ¡£:null,è§’è‰²åˆ—è¡¨:{}},r.value=!0}};f();const g=(0,a.computed)(()=>Object.values(e.value.è§’è‰²åˆ—è¡¨)),h=(0,a.computed)(()=>{const t=e.value.å½“å‰æ¿€æ´»å­˜æ¡£;return t&&e.value.è§’è‰²åˆ—è¡¨[t.è§’è‰²ID]||null}),b=(0,a.computed)(()=>{const t=e.value.å½“å‰æ¿€æ´»å­˜æ¡£,n=h.value;return t&&n?"å•æœº"===n.æ¨¡å¼&&n.å­˜æ¡£åˆ—è¡¨?n.å­˜æ¡£åˆ—è¡¨[t.å­˜æ¡£æ§½ä½]||null:"è”æœº"===n.æ¨¡å¼&&n.å­˜æ¡£?n.å­˜æ¡£:null:null}),y=(0,a.computed)(()=>{const e=h.value;return e?"å•æœº"===e.æ¨¡å¼&&e.å­˜æ¡£åˆ—è¡¨?Object.entries(e.å­˜æ¡£åˆ—è¡¨).map(([t,n])=>({...n,id:t,è§’è‰²åå­—:n.è§’è‰²åå­—||e.è§’è‰²?.åå­—||"æœªçŸ¥",å¢ƒç•Œ:n.å¢ƒç•Œ||n.å­˜æ¡£æ•°æ®?.å±æ€§?.å¢ƒç•Œ?.åç§°||"å‡¡äºº",ä½ç½®:n.ä½ç½®||n.å­˜æ¡£æ•°æ®?.ä½ç½®?.æè¿°||"æœªçŸ¥",ä¿å­˜æ—¶é—´:n.ä¿å­˜æ—¶é—´||null,æœ€åä¿å­˜æ—¶é—´:n.æœ€åä¿å­˜æ—¶é—´??n.ä¿å­˜æ—¶é—´??null,æ¸¸æˆæ—¶é•¿:n.æ¸¸æˆæ—¶é•¿||0})):"è”æœº"===e.æ¨¡å¼&&e.å­˜æ¡£?[{...e.å­˜æ¡£,id:"online_save",è§’è‰²åå­—:e.å­˜æ¡£.è§’è‰²åå­—||e.è§’è‰²?.åå­—||"æœªçŸ¥",å¢ƒç•Œ:e.å­˜æ¡£.å¢ƒç•Œ||e.å­˜æ¡£.å­˜æ¡£æ•°æ®?.å±æ€§?.å¢ƒç•Œ?.åç§°||"å‡¡äºº",ä½ç½®:e.å­˜æ¡£.ä½ç½®||e.å­˜æ¡£.å­˜æ¡£æ•°æ®?.ä½ç½®?.æè¿°||"æœªçŸ¥",ä¿å­˜æ—¶é—´:e.å­˜æ¡£.ä¿å­˜æ—¶é—´||null,æœ€åä¿å­˜æ—¶é—´:e.å­˜æ¡£.æœ€åä¿å­˜æ—¶é—´??e.å­˜æ¡£.ä¿å­˜æ—¶é—´??null,æ¸¸æˆæ—¶é•¿:e.å­˜æ¡£.æ¸¸æˆæ—¶é•¿||0}]:[]:[]}),x=async()=>{try{const t=JSON.parse(JSON.stringify(e.value));Object.values(t.è§’è‰²åˆ—è¡¨).forEach(e=>{e.å­˜æ¡£åˆ—è¡¨&&Object.values(e.å­˜æ¡£åˆ—è¡¨).forEach(e=>{delete e.å­˜æ¡£æ•°æ®}),e.å­˜æ¡£&&delete e.å­˜æ¡£.å­˜æ¡£æ•°æ®}),await d.c5(t),s.Yz.log("è§’è‰²å•†åº—","âœ… è§’è‰²å…ƒæ•°æ®å·²æäº¤åˆ°å­˜å‚¨"),e.value={...e.value}}catch(e){throw s.Yz.error("è§’è‰²å•†åº—","æŒä¹…åŒ–å…ƒæ•°æ®åˆ°IndexedDBå¤±è´¥",e),e}},C=async()=>{e.value=await d.$v(),s.Yz.log("è§’è‰²å•†åº—","å·²ä»ä¹¾å¤å®åº“é‡æ–°åŒæ­¥æ‰€æœ‰æ•°æ®")},A=async()=>(s.Yz.log("è§’è‰²å•†åº—","syncRootStateToCloud called. (Placeholder - no backend implementation yet)"),Promise.resolve()),D=async(t,a)=>{s.Yz.log("è§’è‰²å•†åº—",`å¼€å§‹åŠ è½½æ¸¸æˆï¼Œè§’è‰²ID: ${t}, å­˜æ¡£æ§½: ${a}`);const r=(0,l.useUIStore)(),o=e.value.è§’è‰²åˆ—è¡¨[t];if(!o)return s.Yz.error("è§’è‰²å•†åº—","æ‰¾ä¸åˆ°è¦åŠ è½½çš„è§’è‰²",t),i.o.error("æ‰¾ä¸åˆ°è¦åŠ è½½çš„è§’è‰²ï¼"),!1;let c;if(c="å•æœº"===o.æ¨¡å¼?o.å­˜æ¡£åˆ—è¡¨?.[a]:o.å­˜æ¡£,!c)return s.Yz.error("è§’è‰²å•†åº—","æ‰¾ä¸åˆ°æŒ‡å®šçš„å­˜æ¡£æ§½ä½",a),i.o.error("æ‰¾ä¸åˆ°æŒ‡å®šçš„å­˜æ¡£æ§½ä½ï¼"),!1;if("è”æœº"===o.æ¨¡å¼&&(0,N.isBackendConfigured)()){if(!await(0,E.verifyStoredToken)())return s.Yz.warn("è§’è‰²å•†åº—","è”æœºæ¨¡å¼tokenæ— æ•ˆï¼Œéœ€è¦ç™»å½•"),i.o.warning("è”æœºæ¨¡å¼éœ€è¦ç™»å½•"),!1;try{const e=await(0,E.NX)(t),n=e?.game_save,r=n?.save_data;r&&(c.å­˜æ¡£æ•°æ®=r,n?.game_time&&"string"==typeof n.game_time&&(c.æ¸¸æˆå†…æ—¶é—´=n.game_time),n?.world_map&&"object"==typeof n.world_map&&(c.ä¸–ç•Œåœ°å›¾=n.world_map),await d.dc(t,a,c.å­˜æ¡£æ•°æ®),o.å­˜æ¡£&&(o.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯={æœ€ååŒæ­¥:n?.last_sync?String(n.last_sync):(new Date).toISOString(),ç‰ˆæœ¬:"number"==typeof n?.version?n.version:o.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯?.ç‰ˆæœ¬??1,éœ€è¦åŒæ­¥:!1},await x()),s.Yz.log("è§’è‰²å•†åº—","è”æœºå­˜æ¡£å·²ä»äº‘ç«¯æ‹‰å–å¹¶ç¼“å­˜åˆ°æœ¬åœ°"))}catch(e){s.Yz.warn("è§’è‰²å•†åº—","è”æœºå­˜æ¡£äº‘ç«¯æ‹‰å–å¤±è´¥ï¼Œå›é€€æœ¬åœ°ç¼“å­˜",e)}}if(!c.å­˜æ¡£æ•°æ®){console.log("=== [è¯Šæ–­æ—¥å¿—-loadGame] ä»IndexedDBåŠ è½½ ==="),console.log("[14] åŠ è½½Key:",{è§’è‰²ID:t,å­˜æ¡£æ§½ä½:a}),s.Yz.log("è§’è‰²å•†åº—",`å­˜æ¡£æ•°æ®ä¸åœ¨å†…å­˜ä¸­ï¼Œä» IndexedDB åŠ è½½: ${t}/${a}`);try{const e=await d.loadSaveData(t,a);if(!e)return s.Yz.error("è§’è‰²å•†åº—",`IndexedDB ä¸­ä¸å­˜åœ¨å­˜æ¡£æ•°æ®: ${t}/${a}`),i.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨ï¼"),!1;console.log("[15] ä»IndexedDBåŠ è½½çš„è§’è‰².èƒŒåŒ….çµçŸ³æ•°æ®:",e.è§’è‰²?.èƒŒåŒ…?.çµçŸ³),c.å­˜æ¡£æ•°æ®=e,s.Yz.log("è§’è‰²å•†åº—","âœ… å·²ä» IndexedDB åŠ è½½å­˜æ¡£æ•°æ®")}catch(e){return s.Yz.error("è§’è‰²å•†åº—","ä» IndexedDB åŠ è½½å­˜æ¡£æ•°æ®å¤±è´¥",e),i.o.error("åŠ è½½å­˜æ¡£æ•°æ®å¤±è´¥ï¼"),!1}}if(c.å­˜æ¡£æ•°æ®){const e=(0,v.WI)(c.å­˜æ¡£æ•°æ®);if(e.needsMigration&&!await new Promise(n=>{r.showDetailModal({title:"å­˜æ¡£è¿ç§»ï¼ˆå¿…é¡»ï¼‰",component:ee,props:{characterId:t,saveSlot:a,legacyKeysFound:e.legacyKeysFound,onConfirm:async()=>{try{const e=c.å­˜æ¡£æ•°æ®,r=`__backup__${a}__${(new Date).toISOString().replace(/[:.]/g,"-")}`;await d.dc(t,r,e);const{migrated:o,report:l}=(0,v.jj)(e),u=(0,_.$)(o);if(!u.isValid)return console.error("[å­˜æ¡£è¿ç§»] è¿ç§»åæ ¡éªŒå¤±è´¥:",u.errors,l),i.o.error("è¿ç§»å¤±è´¥ï¼šæ–°ç»“æ„æ ¡éªŒä¸é€šè¿‡ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°"),void n(!1);u.warnings.length>0&&console.warn("[å­˜æ¡£è¿ç§»] è¿ç§»å‘Šè­¦:",u.warnings),await d.dc(t,a,o),c.å­˜æ¡£æ•°æ®=o,s.Yz.log("è§’è‰²å•†åº—",`[å­˜æ¡£è¿ç§»] âœ… å·²å†™å› V3ï¼š${t}/${a}`),n(!0)}catch(e){console.error("[å­˜æ¡£è¿ç§»] âŒ è¿ç§»è¿‡ç¨‹å¼‚å¸¸:",e),i.o.error("è¿ç§»å¤±è´¥ï¼šå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·æŸ¥çœ‹æ§åˆ¶å°"),n(!1)}finally{r.hideDetailModal()}},onCancel:()=>{r.hideDetailModal(),n(!1)}}})}))return i.o.info("å·²å–æ¶ˆè¿ç§»ï¼Œå­˜æ¡£æœªåŠ è½½"),!1}try{r.startLoading("å¼€å§‹åŠ è½½å­˜æ¡£..."),await(0,u.clearAllCharacterData)(),r.updateLoadingText("å¤©æœºé‡ç½®å®Œæ¯•ï¼Œæ­£åœ¨åŠ è½½å­˜æ¡£..."),s.Yz.log("è§’è‰²å•†åº—","è®¾ç½®å½“å‰æ¿€æ´»å­˜æ¡£"),e.value.å½“å‰æ¿€æ´»å­˜æ¡£={è§’è‰²ID:t,å­˜æ¡£æ§½ä½:a},await x(),s.Yz.log("è§’è‰²å•†åº—","å°†å­˜æ¡£æ•°æ®åŠ è½½åˆ° gameStateStore");const l=(0,p.useGameStateStore)();if(c.å­˜æ¡£æ•°æ®){l.loadFromSaveData(c.å­˜æ¡£æ•°æ®),s.Yz.log("è§’è‰²å•†åº—","âœ… å­˜æ¡£æ•°æ®å·²åŠ è½½åˆ° gameStateStore");try{const{vectorMemoryService:e}=await Promise.resolve().then(n.bind(n,5831)),r=`${t}_${a}`;if(await e.init(r),e.isEnabled()){const t=c.å­˜æ¡£æ•°æ®.ç¤¾äº¤?.è®°å¿†?.é•¿æœŸè®°å¿†||[];t.length>0&&0===(await e.getStats()).total&&(s.Yz.log("è§’è‰²å•†åº—",`å‘é‡è®°å¿†åº“ä¸ºç©ºï¼Œå¼€å§‹å¯¼å…¥ ${t.length} æ¡é•¿æœŸè®°å¿†`),await e.importLongTermMemories(t))}}catch(e){console.warn("[è§’è‰²å•†åº—] åˆå§‹åŒ–å‘é‡è®°å¿†æœåŠ¡å¤±è´¥ï¼ˆéè‡´å‘½ï¼‰:",e)}}return s.Yz.log("è§’è‰²å•†åº—","åŠ è½½å®Œæˆ"),i.o.success(`å·²æˆåŠŸåŠ è½½ã€${o.è§’è‰²?.åå­—||"æœªçŸ¥è§’è‰²"}ã€‘çš„å­˜æ¡£: ${c.å­˜æ¡£å||a}`),!0}catch(e){s.Yz.error("è§’è‰²å•†åº—","åŠ è½½è¿‡ç¨‹å‡ºé”™",e);const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";return i.o.error(`å­˜æ¡£åŠ è½½å¤±è´¥ï¼š${t}`),!1}finally{r.stopLoading()}},T=async t=>{r.value||await f();const n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£,a=h.value,o=b.value,l=(0,p.useGameStateStore)();if(!n||!a||!o)return t?.notifyIfNoActive&&l.isGameLoaded&&i.o.error("æ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£ï¼Œæ— æ³•ä¿å­˜ï¼",{id:"save-no-active"}),void s.Yz.warn("è§’è‰²å•†åº—","å½“å‰æ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£ï¼Œè·³è¿‡ä¿å­˜");const c=`save-game-${Date.now()}`;try{console.log("=== [è¯Šæ–­æ—¥å¿—-characterStore] å¼€å§‹ä¿å­˜æ¸¸æˆ ==="),console.log("[10] å½“å‰æ¿€æ´»å­˜æ¡£:",{è§’è‰²ID:n.è§’è‰²ID,å­˜æ¡£æ§½ä½:n.å­˜æ¡£æ§½ä½});const e=l.toSaveData();if(!e)throw new Error("æ— æ³•ç”Ÿæˆå­˜æ¡£æ•°æ®ï¼Œæ¸¸æˆçŠ¶æ€ä¸å®Œæ•´ã€‚");console.log("[11] toSaveData()è¿”å›çš„è§’è‰².èƒŒåŒ….çµçŸ³æ•°æ®:",e.è§’è‰²?.èƒŒåŒ…?.çµçŸ³),(0,S.DT)(e),(0,V.F)(e),e.ç¤¾äº¤?.å…³ç³»&&e.å…ƒæ•°æ®?.æ—¶é—´&&Object.values(e.ç¤¾äº¤.å…³ç³»).forEach(t=>{t&&"object"==typeof t&&(0,S.UY)(t,e.å…ƒæ•°æ®.æ—¶é—´)}),console.log("[12] å³å°†ä¿å­˜åˆ°IndexedDBçš„æ•°æ®:",{è§’è‰²ID:n.è§’è‰²ID,å­˜æ¡£æ§½ä½:n.å­˜æ¡£æ§½ä½,èƒŒåŒ…çµçŸ³:e.è§’è‰²?.èƒŒåŒ…?.çµçŸ³}),await d.dc(n.è§’è‰²ID,n.å­˜æ¡£æ§½ä½,e),console.log("[13] IndexedDBä¿å­˜å®Œæˆ"),s.Yz.log("è§’è‰²å•†åº—",`âœ… å­˜æ¡£å†…å®¹å·²ä¿å­˜åˆ° IndexedDB (Key: ${n.è§’è‰²ID}_${n.å­˜æ¡£æ§½ä½})`),o.ä¿å­˜æ—¶é—´=(new Date).toISOString();const t=e.è§’è‰²?.å±æ€§,r=e.è§’è‰²?.ä½ç½®;if(o.å¢ƒç•Œ=t?.å¢ƒç•Œ?.åç§°||"å‡¡äºº",o.ä½ç½®=r?.æè¿°||"æœªçŸ¥",e.å…ƒæ•°æ®?.æ—¶é—´){const t=e.å…ƒæ•°æ®.æ—¶é—´;o.æ¸¸æˆå†…æ—¶é—´=`${t.å¹´}å¹´${t.æœˆ}æœˆ${t.æ—¥}æ—¥`}if(delete o.å­˜æ¡£æ•°æ®,"å•æœº"===a.æ¨¡å¼&&a.å­˜æ¡£åˆ—è¡¨?a.å­˜æ¡£åˆ—è¡¨[n.å­˜æ¡£æ§½ä½]=o:"è”æœº"===a.æ¨¡å¼&&(a.å­˜æ¡£=o),await x(),"è”æœº"===a.æ¨¡å¼)try{const t=o.ä¸–ç•Œåœ°å›¾??{},r=o.æ¸¸æˆå†…æ—¶é—´??null,i=await(0,E.Sj)(n.è§’è‰²ID,{save_data:e,world_map:t,game_time:r}),s="number"==typeof i?.version?i.version:(a.å­˜æ¡£?.äº‘ç«¯åŒæ­¥ä¿¡æ¯?.ç‰ˆæœ¬??1)+1;a.å­˜æ¡£&&(a.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯={æœ€ååŒæ­¥:(new Date).toISOString(),ç‰ˆæœ¬:s,éœ€è¦åŒæ­¥:!1}),await x()}catch(e){s.Yz.warn("è§’è‰²å•†åº—","äº‘ç«¯åŒæ­¥å¤±è´¥ï¼ˆè”æœºæ¨¡å¼ï¼‰",e),a.å­˜æ¡£&&(a.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯={æœ€ååŒæ­¥:a.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯?.æœ€ååŒæ­¥||(new Date).toISOString(),ç‰ˆæœ¬:a.å­˜æ¡£.äº‘ç«¯åŒæ­¥ä¿¡æ¯?.ç‰ˆæœ¬||1,éœ€è¦åŒæ­¥:!0},await x())}s.Yz.log("è§’è‰²å•†åº—",`å­˜æ¡£ã€${o.å­˜æ¡£å}ã€‘å…ƒæ•°æ®å·²æ›´æ–°`)}catch(e){s.Yz.error("è§’è‰²å•†åº—","å­˜æ¡£ä¿å­˜è¿‡ç¨‹å‡ºé”™",e);const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";i.o.error(`å­˜æ¡£ä¿å­˜å¤±è´¥ï¼š${t}`,{id:c})}},B=async(t,n)=>{console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] å¼€å§‹åˆ é™¤å­˜æ¡£:",{charId:t,slotKey:n});const a=e.value.è§’è‰²åˆ—è¡¨[t];if(!a||"å•æœº"!==a.æ¨¡å¼||!a.å­˜æ¡£åˆ—è¡¨)return console.warn("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] æ— æ³•åˆ é™¤ï¼šè§’è‰²ä¸å­˜åœ¨æˆ–éå•æœºæ¨¡å¼"),void i.o.error("æ— æ³•åˆ é™¤å­˜æ¡£ï¼šè§’è‰²ä¸å­˜åœ¨æˆ–éå•æœºæ¨¡å¼");console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] å½“å‰å­˜æ¡£åˆ—è¡¨:",Object.keys(a.å­˜æ¡£åˆ—è¡¨));const r=Object.entries(a.å­˜æ¡£åˆ—è¡¨).filter(([e,t])=>t&&"ä¸Šæ¬¡å¯¹è¯"!==e).length;if(console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] å¯åˆ é™¤å­˜æ¡£æ•°é‡:",r),r<=1)return console.warn("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] æœ€åä¸€ä¸ªå­˜æ¡£ä¸èƒ½åˆ é™¤"),void i.o.error("æœ€åä¸€ä¸ªå­˜æ¡£ä¸èƒ½åˆ é™¤");const o=a.å­˜æ¡£åˆ—è¡¨?.[n]?.å­˜æ¡£å||n;if(!a.å­˜æ¡£åˆ—è¡¨?.[n])return console.warn("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] å­˜æ¡£ä¸å­˜åœ¨:",n),void i.o.error(`å­˜æ¡£ã€${o}ã€‘ä¸å­˜åœ¨`);const l=e.value.å½“å‰æ¿€æ´»å­˜æ¡£;if(l?.è§’è‰²ID===t&&l?.å­˜æ¡£æ§½ä½===n){console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] åˆ é™¤çš„æ˜¯å½“å‰æ¿€æ´»å­˜æ¡£ï¼Œæ¸…ç†é…’é¦†ç¯å¢ƒ");try{await(0,u.clearAllCharacterData)(),i.o.info((0,u.isTavernEnv)()?"å½“å‰å­˜æ¡£å·²æ¿€æ´»ï¼ŒåŒæ­¥æ¸…ç†é…’é¦†ç¯å¢ƒå˜é‡ã€‚":"å½“å‰å­˜æ¡£å·²æ¿€æ´»ï¼Œå·²æ¸…ç†ç¯å¢ƒå˜é‡ã€‚")}catch(e){s.Yz.error("è§’è‰²å•†åº—","åˆ é™¤æ¿€æ´»å­˜æ¡£æ—¶æ¸…ç†é…’é¦†æ•°æ®å¤±è´¥",e),i.o.error((0,u.isTavernEnv)()?"æ¸…ç†é…’é¦†ç¯å¢ƒå˜é‡å¤±è´¥ï¼Œå»ºè®®åˆ·æ–°é¡µé¢ã€‚":"æ¸…ç†ç¯å¢ƒå˜é‡å¤±è´¥ï¼Œå»ºè®®åˆ·æ–°é¡µé¢ã€‚")}e.value.å½“å‰æ¿€æ´»å­˜æ¡£=null}try{console.log(`[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] ä» IndexedDB åˆ é™¤å­˜æ¡£: ${t}/${n}`),await d.Jx(t,n),console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] âœ… IndexedDB å­˜æ¡£æ•°æ®å·²åˆ é™¤")}catch(e){console.error("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] åˆ é™¤ IndexedDB å­˜æ¡£æ•°æ®å¤±è´¥:",e),i.o.warning("æ¸…ç†å­˜æ¡£æ•°æ®æ—¶å‡ºç°é”™è¯¯")}console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] æ‰§è¡Œ delete æ“ä½œ"),delete a.å­˜æ¡£åˆ—è¡¨[n],a.å­˜æ¡£åˆ—è¡¨={...a.å­˜æ¡£åˆ—è¡¨},console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] åˆ é™¤åå­˜æ¡£åˆ—è¡¨:",Object.keys(a.å­˜æ¡£åˆ—è¡¨)),console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] å¼€å§‹ä¿å­˜åˆ° IndexedDB"),await x(),console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] IndexedDB ä¿å­˜å®Œæˆ");try{await A(),s.Yz.log("è§’è‰²å•†åº—","åˆ é™¤å­˜æ¡£åå·²åŒæ­¥åˆ°äº‘ç«¯")}catch(e){s.Yz.error("è§’è‰²å•†åº—","åˆ é™¤å­˜æ¡£ååŒæ­¥äº‘ç«¯å¤±è´¥",e)}i.o.success("å­˜æ¡£å·²åˆ é™¤"),console.log("[è§’è‰²å•†åº—-åˆ é™¤å­˜æ¡£] åˆ é™¤å­˜æ¡£å®Œæˆ")};return{rootState:e,initialized:r,allCharacterProfiles:g,activeCharacterProfile:h,activeSaveSlot:b,saveSlots:y,initializeStore:f,reloadFromStorage:C,createNewCharacter:async t=>{const n=(0,l.useUIStore)(),a=(0,c.N)(),{charId:r,baseInfo:o,world:m,mode:f,age:g}=t;if(e.value.è§’è‰²åˆ—è¡¨[r])return void i.o.error(`è§’è‰²ID ${r} å·²å­˜åœ¨ï¼Œåˆ›å»ºå¤±è´¥ï¼`);const h={...o,ä¸–ç•Œ:a.selectedWorld,å¤©èµ„:a.selectedTalentTier,å‡ºç”Ÿ:a.selectedOrigin||"éšæœºå‡ºèº«",çµæ ¹:a.selectedSpiritRoot||"éšæœºçµæ ¹",å¤©èµ‹:a.selectedTalents,åå¤©å…­å¸:o.åå¤©å…­å¸||{æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0}};s.Yz.log("è§’è‰²å•†åº—","æ„å»ºæƒå¨åˆ›è§’ä¿¡æ¯:",h);try{if(n.updateLoadingText("å³å°†å¼€å§‹è§’è‰²åˆ›å»º..."),await(0,u.clearAllCharacterData)(),"è”æœº"===f)try{n.updateLoadingText("æ­£åœ¨å‘äº‘ç«¯æäº¤è§’è‰²ä¿¡æ¯...");const e={char_id:r,base_info:h};s.Yz.log("è§’è‰²å•†åº—","å‘åç«¯æäº¤çš„æ•°æ®",e);const t=await(0,E.OW)(e);s.Yz.log("è§’è‰²å•†åº—","åç«¯è¿”å›ç»“æœ",t),n.updateLoadingText("è§’è‰²ä¿¡æ¯å·²æˆåŠŸæäº¤è‡³äº‘ç«¯ï¼")}catch(e){s.Yz.error("è§’è‰²å•†åº—","å‘åç«¯æäº¤å¤±è´¥",e),i.o.warning("å‘äº‘ç«¯æäº¤è§’è‰²ä¿¡æ¯å¤±è´¥ï¼Œå°†ç»§ç»­æœ¬åœ°åˆ›å»ºæµç¨‹")}console.log("[è§’è‰²å•†åº—] å‡†å¤‡è°ƒç”¨initializeCharacter...");let t,o=null;try{console.log("[è§’è‰²å•†åº—] è°ƒç”¨initializeCharacter,å‚æ•°:",{charId:r,baseInfo:h,world:m.name,age:g,useStreaming:a.useStreamingStart,generateMode:a.generateMode}),o=await w(0,h,m,g,a.useStreamingStart,a.generateMode),console.log("[è§’è‰²å•†åº—] âœ… initializeCharacterè¿”å›æˆåŠŸ,æ•°æ®æœ‰æ•ˆ:",!!o)}catch(e){if(console.error("[è§’è‰²å•†åº—] âŒ initializeCharacterå¤±è´¥:",e),"å•æœº"!==f)throw e;console.log("[è§’è‰²å•†åº—] å•æœºæ¨¡å¼,å°è¯•ç¦»çº¿åˆå§‹åŒ–..."),o=await async function(e,t,n,a){console.log("[ç¦»çº¿åˆå§‹åŒ–] å¼€å§‹æ‰§è¡Œæœ¬åœ°è§’è‰²åˆ›å»º..."),t.åå¤©å…­å¸||(t.åå¤©å…­å¸={æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0},console.log("[ç¦»çº¿åˆå§‹åŒ–] åˆå§‹åŒ–åå¤©å…­å¸ä¸ºå…¨0"));const r=k(t,a);r.ä½ç½®={æè¿°:"ä¸´æ—¶ä½ç½®ï¼ˆç­‰å¾…AIåˆå§‹åŒ–ï¼‰",x:115,y:35};const o=(new Date).toISOString(),i={å…ƒæ•°æ®:{ç‰ˆæœ¬å·:3,å­˜æ¡£ID:`save_${e}_${Date.now()}`,å­˜æ¡£å:`${t.åå­—}ï¼ˆç¦»çº¿å¼€å±€ï¼‰`,åˆ›å»ºæ—¶é—´:o,æ›´æ–°æ—¶é—´:o,æ¸¸æˆæ—¶é•¿ç§’:0,æ—¶é—´:{å¹´:1e3,æœˆ:1,æ—¥:1,å°æ—¶:8,åˆ†é’Ÿ:0}},è§’è‰²:{èº«ä»½:t,å±æ€§:{å¢ƒç•Œ:r.å¢ƒç•Œ,å£°æœ›:r.å£°æœ›,æ°”è¡€:r.æ°”è¡€,çµæ°”:r.çµæ°”,ç¥è¯†:r.ç¥è¯†,å¯¿å‘½:r.å¯¿å‘½},ä½ç½®:r.ä½ç½®,æ•ˆæœ:[],èƒŒåŒ…:{çµçŸ³:{ä¸‹å“:10,ä¸­å“:0,ä¸Šå“:0,æå“:0},ç‰©å“:{consumable_xinshou_danyao_01:{ç‰©å“ID:"consumable_xinshou_danyao_01",åç§°:"æ–°æ‰‹ä¸¹è¯",ç±»å‹:"å…¶ä»–",æ•°é‡:3,å“è´¨:{quality:"å‡¡",grade:1},æè¿°:"ä¸€é¢—æ™®é€šçš„ä¸¹è¯ï¼Œèƒ½æ¢å¤å°‘é‡æ°”è¡€ã€‚"},equipment_cubuyi_01:{ç‰©å“ID:"equipment_cubuyi_01",åç§°:"ç²—å¸ƒè¡£",ç±»å‹:"è£…å¤‡",æ•°é‡:1,å“è´¨:{quality:"å‡¡",grade:1},æè¿°:"ä¸€ä»¶æœ´ç´ çš„ç²—å¸ƒè¡£æœï¼Œèƒ½æä¾›å¾®ä¸è¶³é“çš„é˜²å¾¡ã€‚"}}},è£…å¤‡:{è£…å¤‡1:null,è£…å¤‡2:null,è£…å¤‡3:null,è£…å¤‡4:null,è£…å¤‡5:null,è£…å¤‡6:null},åŠŸæ³•:{å½“å‰åŠŸæ³•ID:null,åŠŸæ³•è¿›åº¦:{},åŠŸæ³•å¥—è£…:{ä¸»ä¿®:null,è¾…ä¿®:[]}},ä¿®ç‚¼:{ä¿®ç‚¼åŠŸæ³•:null,ä¿®ç‚¼çŠ¶æ€:{æ¨¡å¼:"æœªä¿®ç‚¼"}},å¤§é“:{å¤§é“åˆ—è¡¨:{}},æŠ€èƒ½:{æŒæ¡æŠ€èƒ½:[],è£…å¤‡æ :[],å†·å´:{}}},ç¤¾äº¤:{å…³ç³»:{},å®—é—¨:null,ä»»åŠ¡:{é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}},è®°å¿†:{çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]}},ä¸–ç•Œ:{ä¿¡æ¯:{ä¸–ç•Œåç§°:n.name,å¤§é™†ä¿¡æ¯:[],åŠ¿åŠ›ä¿¡æ¯:[],åœ°ç‚¹ä¿¡æ¯:[],ç”Ÿæˆæ—¶é—´:o,ä¸–ç•ŒèƒŒæ™¯:n.description??"",ä¸–ç•Œçºªå…ƒ:n.era||"æœªçŸ¥çºªå…ƒ",ç‰¹æ®Šè®¾å®š:[],ç‰ˆæœ¬:"offline-1.1"},çŠ¶æ€:{}},ç³»ç»Ÿ:{é…ç½®:{è§„åˆ™:{å±æ€§ä¸Šé™:{å…ˆå¤©å…­å¸:{æ¯é¡¹ä¸Šé™:10}}},æç¤º:["ç³»ç»Ÿè§„åˆ™ï¼šå…ˆå¤©å…­å¸æ¯é¡¹ä¸Šé™ä¸º10ï¼ˆNPCåŒæ ·é€‚ç”¨ï¼‰ï¼Œå¦‚è¶…é™éœ€è£å‰ªè‡³ä¸Šé™ã€‚","ç³»ç»Ÿä¼šæ ¹æ®æ—¶é—´è‡ªåŠ¨è®¡ç®—å½“å‰å¹´é¾„ï¼Œæ— éœ€æ‰‹åŠ¨æ›´æ–°å¯¿å‘½.å½“å‰å­—æ®µã€‚"]},ç¼“å­˜:{æŒæ¡æŠ€èƒ½:[]},å†å²:{å™äº‹:[]},æ‰©å±•:{ç¦»çº¿åˆå§‹åŒ–:{åˆå§‹å¹´é¾„:a,å¼€å±€æ—¶é—´:{å¹´:1e3-a,æœˆ:1,æ—¥:1,å°æ—¶:8,åˆ†é’Ÿ:0}}},è”æœº:{æ¨¡å¼:"å•æœº",æˆ¿é—´ID:null,ç©å®¶ID:null,åªè¯»è·¯å¾„:["ä¸–ç•Œ"],ä¸–ç•Œæ›å…‰:!1,å†²çªç­–ç•¥:"æœåŠ¡å™¨"}}};return console.log("[ç¦»çº¿åˆå§‹åŒ–] æœ¬åœ°è§’è‰²åˆ›å»ºå®Œæˆ:",i),i}(r,h,m,g)}if("å•æœº"===f){const e=(new Date).toISOString();t={æ¨¡å¼:"å•æœº",è§’è‰²:o?.è§’è‰²?.èº«ä»½||h,å­˜æ¡£åˆ—è¡¨:{å­˜æ¡£1:{å­˜æ¡£å:"å­˜æ¡£1",ä¿å­˜æ—¶é—´:e,æ¸¸æˆå†…æ—¶é—´:"ä¿®ä»™å…ƒå¹´ æ˜¥",è§’è‰²åå­—:h.åå­—,å¢ƒç•Œ:"å‡¡äºº",ä½ç½®:"æœªçŸ¥",ä¿®ä¸ºè¿›åº¦:0,å­˜æ¡£æ•°æ®:o},ä¸Šæ¬¡å¯¹è¯:{å­˜æ¡£å:"ä¸Šæ¬¡å¯¹è¯",ä¿å­˜æ—¶é—´:null,å­˜æ¡£æ•°æ®:null}}}}else t={æ¨¡å¼:"è”æœº",è§’è‰²:o?.è§’è‰²?.èº«ä»½||h,å­˜æ¡£:{å­˜æ¡£å:"äº‘ç«¯ä¿®è¡Œ",ä¿å­˜æ—¶é—´:(new Date).toISOString(),æ¸¸æˆå†…æ—¶é—´:"ä¿®ä»™å…ƒå¹´ æ˜¥",å­˜æ¡£æ•°æ®:o,äº‘ç«¯åŒæ­¥ä¿¡æ¯:{æœ€ååŒæ­¥:(new Date).toISOString(),ç‰ˆæœ¬:1,éœ€è¦åŒæ­¥:!1}}};e.value.è§’è‰²åˆ—è¡¨[r]=t;const l="å•æœº"===f?"å­˜æ¡£1":"å­˜æ¡£";if(e.value.å½“å‰æ¿€æ´»å­˜æ¡£={è§’è‰²ID:r,å­˜æ¡£æ§½ä½:l},await(async t=>{const n=e.value.è§’è‰²åˆ—è¡¨[t];if(!n)throw new Error(`[å­˜æ¡£æ ¸å¿ƒ] æ— æ³•æ‰¾åˆ°IDä¸º ${t} çš„è§’è‰²æ¡£æ¡ˆ`);const a=b.value;if(a&&a.å­˜æ¡£æ•°æ®)try{const t=e.value.å½“å‰æ¿€æ´»å­˜æ¡£;if(!t)throw new Error("[å­˜æ¡£æ ¸å¿ƒ] æ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£");s.Yz.log("è§’è‰²å•†åº—","ä¿å­˜å­˜æ¡£æ•°æ®åˆ° IndexedDB"),await d.dc(t.è§’è‰²ID,t.å­˜æ¡£æ§½ä½,a.å­˜æ¡£æ•°æ®),s.Yz.log("è§’è‰²å•†åº—",`âœ… å·²å°†ã€${n.è§’è‰².åå­—}ã€‘çš„å­˜æ¡£ä¿å­˜è‡³ IndexedDB`)}catch(e){throw s.Yz.error("è§’è‰²å•†åº—","ä¿å­˜è§’è‰²å­˜æ¡£å¤±è´¥",e),i.o.error("ä¿å­˜è§’è‰²å­˜æ¡£å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ§åˆ¶å°ã€‚"),e}else s.Yz.warn("è§’è‰²å•†åº—",`è§’è‰² ${t} æ²¡æœ‰å¯ç”¨çš„å­˜æ¡£æ•°æ®æ¥ä¿å­˜`)})(r),await x(),(0,p.useGameStateStore)().loadFromSaveData(o),s.Yz.log("è§’è‰²å•†åº—","âœ… åˆå§‹å­˜æ¡£å·²åŠ è½½åˆ° gameStateStore"),"è”æœº"===f)try{n.updateLoadingText("æ­£åœ¨åŒæ­¥åˆå§‹å­˜æ¡£åˆ°äº‘ç«¯...");const e={save_data:o,world_map:{},game_time:"ä¿®ä»™å…ƒå¹´ æ˜¥"};s.Yz.log("è§’è‰²å•†åº—","å‡†å¤‡åŒæ­¥åˆ°äº‘ç«¯çš„åˆå§‹å­˜æ¡£æ•°æ®",e),await(0,E.Sj)(r,e),n.updateLoadingText("åˆå§‹å­˜æ¡£å·²æˆåŠŸåŒæ­¥åˆ°äº‘ç«¯ï¼")}catch(e){s.Yz.warn("è§’è‰²å•†åº—","åŒæ­¥åˆå§‹å­˜æ¡£æ•°æ®åˆ°äº‘ç«¯å¤±è´¥",e);const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";i.o.warning(`äº‘ç«¯åŒæ­¥å¤±è´¥(åç«¯æœªå¯åŠ¨): ${t}`)}return h}catch(e){s.Yz.error("è§’è‰²å•†åº—","è§’è‰²åˆ›å»ºå¤±è´¥",e);const t=e instanceof Error?e.message:String(e);throw new Error(`è§’è‰²åˆ›å»ºå¤±è´¥: ${t}`)}},deleteCharacter:async t=>{if(console.log("[è§’è‰²å•†åº—-åˆ é™¤] å¼€å§‹åˆ é™¤è§’è‰²:",t),console.log("[è§’è‰²å•†åº—-åˆ é™¤] åˆ é™¤å‰è§’è‰²åˆ—è¡¨:",Object.keys(e.value.è§’è‰²åˆ—è¡¨)),!e.value.è§’è‰²åˆ—è¡¨[t])return void console.warn("[è§’è‰²å•†åº—-åˆ é™¤] è§’è‰²ä¸å­˜åœ¨ï¼Œæ— æ³•åˆ é™¤");const n=e.value.è§’è‰²åˆ—è¡¨[t]?.è§’è‰².åå­—||t;e.value.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID===t&&(console.log("[è§’è‰²å•†åº—-åˆ é™¤] åˆ é™¤çš„æ˜¯å½“å‰æ¿€æ´»è§’è‰²ï¼Œé‡ç½® gameStateStore"),(0,p.useGameStateStore)().resetState(),e.value.å½“å‰æ¿€æ´»å­˜æ¡£=null);try{console.log("[è§’è‰²å•†åº—-åˆ é™¤] å¼€å§‹æ¸…ç† IndexedDB ä¸­çš„æ‰€æœ‰å­˜æ¡£æ•°æ®...");const e=await d.Wj(t);console.log(`[è§’è‰²å•†åº—-åˆ é™¤] âœ… å·²æ¸…ç† ${e} ä¸ªå­˜æ¡£è®°å½•`)}catch(e){console.error("[è§’è‰²å•†åº—-åˆ é™¤] æ¸…ç† IndexedDB å­˜æ¡£æ•°æ®å¤±è´¥:",e),i.o.warning("æ¸…ç†å­˜æ¡£æ•°æ®æ—¶å‡ºç°é”™è¯¯ï¼Œéƒ¨åˆ†æ•°æ®å¯èƒ½æœªåˆ é™¤")}console.log("[è§’è‰²å•†åº—-åˆ é™¤] æ‰§è¡Œ delete æ“ä½œ"),delete e.value.è§’è‰²åˆ—è¡¨[t],console.log("[è§’è‰²å•†åº—-åˆ é™¤] åˆ é™¤åè§’è‰²åˆ—è¡¨:",Object.keys(e.value.è§’è‰²åˆ—è¡¨)),console.log("[è§’è‰²å•†åº—-åˆ é™¤] å¼€å§‹ä¿å­˜åˆ° IndexedDB"),await x(),console.log("[è§’è‰²å•†åº—-åˆ é™¤] IndexedDB ä¿å­˜å®Œæˆ");try{await A(),s.Yz.log("è§’è‰²å•†åº—","åˆ é™¤è§’è‰²åå·²åŒæ­¥åˆ°äº‘ç«¯")}catch(e){s.Yz.warn("è§’è‰²å•†åº—","åˆ é™¤è§’è‰²ååŒæ­¥äº‘ç«¯å¤±è´¥ï¼ˆåç«¯æœªå¯åŠ¨ï¼‰:",e)}i.o.success(`è§’è‰²ã€${n}ã€‘å·²ä»æœ¬åœ°æ•°æ®åº“åˆ é™¤ã€‚`),console.log("[è§’è‰²å•†åº—-åˆ é™¤] åˆ é™¤è§’è‰²å®Œæˆ")},deleteNpc:async e=>{const t=(0,p.useGameStateStore)(),n=t.relationships;if(!n){const e="æ— æ³•åˆ é™¤NPCï¼šæ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£æˆ–å…³ç³»æ•°æ®ã€‚";throw i.o.error(e),new Error(e)}const a=Object.keys(n).find(t=>n[t]?.åå­—===e);if(!a){const t=`æ‰¾ä¸åˆ°åä¸º ${e} çš„NPCã€‚`;throw i.o.error(t),new Error(t)}const r={...n[a]};try{console.log("[åˆ é™¤NPC-è°ƒè¯•] åˆ é™¤å‰ gameStateStore.relationships çš„å¼•ç”¨:",t.relationships===n),console.log("[åˆ é™¤NPC-è°ƒè¯•] åˆ é™¤å‰ relationships ä¸­çš„NPCåˆ—è¡¨:",Object.keys(n).map(e=>n[e]?.åå­—)),delete n[a],console.log(`[åˆ é™¤NPC-è°ƒè¯•] å·²ä»å†…å­˜ä¸­åˆ é™¤NPC: ${e}`),console.log("[åˆ é™¤NPC-è°ƒè¯•] åˆ é™¤å relationships ä¸­çš„NPCæ•°é‡:",Object.keys(n).length),console.log("[åˆ é™¤NPC-è°ƒè¯•] åˆ é™¤åæ˜¯å¦è¿˜å­˜åœ¨è¯¥NPC:",!!n[a]),console.log("[åˆ é™¤NPC-è°ƒè¯•] åˆ é™¤å gameStateStore.relationships ä¸­æ˜¯å¦è¿˜å­˜åœ¨:",!!t.relationships?.[a]),console.log("[åˆ é™¤NPC-è°ƒè¯•] åˆ é™¤å relationships ä¸­çš„NPCåˆ—è¡¨:",Object.keys(n).map(e=>n[e]?.åå­—)),s.Yz.log("è§’è‰²å•†åº—",`å·²ä» gameStateStore ä¸­åˆ é™¤NPC: ${e}`),console.log("[åˆ é™¤NPC-è°ƒè¯•] å¼€å§‹ä¿å­˜åˆ°å­˜å‚¨..."),await t.saveGame(),console.log("[åˆ é™¤NPC-è°ƒè¯•] ä¿å­˜å®Œæˆ");const r=t.toSaveData();if(r?.ç¤¾äº¤?.å…³ç³»){const t=Object.values(r.ç¤¾äº¤.å…³ç³»).some(t=>t?.åå­—===e);console.log("[åˆ é™¤NPC-è°ƒè¯•] toSaveData() è¿”å›çš„æ•°æ®ä¸­æ˜¯å¦è¿˜å­˜åœ¨è¯¥NPC:",t),console.log("[åˆ é™¤NPC-è°ƒè¯•] toSaveData() è¿”å›çš„å…³ç³»æ•°é‡:",Object.keys(r.ç¤¾äº¤.å…³ç³»).length),console.log("[åˆ é™¤NPC-è°ƒè¯•] toSaveData() è¿”å›çš„NPCåˆ—è¡¨:",Object.values(r.ç¤¾äº¤.å…³ç³»).map(e=>e?.åå­—))}s.Yz.log("è§’è‰²å•†åº—",`âœ… NPC ${e} å·²æˆåŠŸåˆ é™¤å¹¶ä¿å­˜`),i.o.success(`NPCã€${e}ã€‘å·²æˆåŠŸåˆ é™¤ã€‚`)}catch(t){throw s.Yz.error("è§’è‰²å•†åº—",`åˆ é™¤NPC ${e} åä¿å­˜å¤±è´¥`,t),n[a]=r,s.Yz.log("è§’è‰²å•†åº—",`å·²å›æ»š gameStateStore ä¸­çš„NPCåˆ é™¤æ“ä½œ: ${e}`),i.o.error(`åˆ é™¤NPCå¤±è´¥: ${t instanceof Error?t.message:"æœªçŸ¥é”™è¯¯"}`),t}},deleteSave:B,deleteSaveById:async t=>{const n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID;if(n)return B(n,t);i.o.error("æ— æ³•ç¡®å®šè§’è‰²ID")},createNewSave:async(t,n)=>{const a=e.value.è§’è‰²åˆ—è¡¨[t];a&&"å•æœº"===a.æ¨¡å¼?(a.å­˜æ¡£åˆ—è¡¨||(a.å­˜æ¡£åˆ—è¡¨={}),a.å­˜æ¡£åˆ—è¡¨[n]?i.o.error("å­˜æ¡£åç§°å·²å­˜åœ¨"):(a.å­˜æ¡£åˆ—è¡¨[n]={å­˜æ¡£å:n,ä¿å­˜æ—¶é—´:null,å­˜æ¡£æ•°æ®:null},await x(),i.o.success(`å­˜æ¡£ã€${n}ã€‘å·²åˆ›å»º`))):i.o.error("æ— æ³•åˆ›å»ºå­˜æ¡£ï¼šè§’è‰²ä¸å­˜åœ¨æˆ–éå•æœºæ¨¡å¼")},saveAsNewSlot:async t=>{const n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£,a=h.value;if(!n||!a)return i.o.error("æ²¡æœ‰æ¿€æ´»çš„æ¸¸æˆè¿›åº¦"),null;if("å•æœº"!==a.æ¨¡å¼)return i.o.error("è”æœºæ¨¡å¼ä¸æ”¯æŒå¤šå­˜æ¡£"),null;if(a.å­˜æ¡£åˆ—è¡¨||(a.å­˜æ¡£åˆ—è¡¨={}),a.å­˜æ¡£åˆ—è¡¨[t])return i.o.error("å­˜æ¡£åç§°å·²å­˜åœ¨"),null;try{const e=(0,p.useGameStateStore)().toSaveData();if(!e)return i.o.error("æ— æ³•è·å–å½“å‰æ¸¸æˆçŠ¶æ€"),null;const r=(new Date).toISOString(),o=e.è§’è‰²?.å±æ€§,l=e.è§’è‰²?.ä½ç½®,c={å­˜æ¡£å:t,ä¿å­˜æ—¶é—´:r,è§’è‰²åå­—:e.è§’è‰²?.èº«ä»½?.åå­—,å¢ƒç•Œ:o?.å¢ƒç•Œ?.åç§°||"å‡¡äºº",ä½ç½®:l?.æè¿°||"æœªçŸ¥",å­˜æ¡£æ•°æ®:JSON.parse(JSON.stringify(e))};if(o?.å¢ƒç•Œ&&o.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€>0&&(c.ä¿®ä¸ºè¿›åº¦=Math.floor(o.å¢ƒç•Œ.å½“å‰è¿›åº¦/o.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€*100)),e.å…ƒæ•°æ®?.æ—¶é—´){const t=e.å…ƒæ•°æ®.æ—¶é—´;c.æ¸¸æˆå†…æ—¶é—´=`${t.å¹´}å¹´${t.æœˆ}æœˆ${t.æ—¥}æ—¥`}return a.å­˜æ¡£åˆ—è¡¨[t]=c,await d.dc(n.è§’è‰²ID,t,e),await x(),i.o.success(`å·²å¦å­˜ä¸ºæ–°å­˜æ¡£ï¼š${t}`),s.Yz.log("è§’è‰²å•†åº—",`å·²åˆ›å»ºæ–°å­˜æ¡£æ§½ä½: ${t}`),t}catch(e){return s.Yz.error("è§’è‰²å•†åº—","å¦å­˜ä¸ºæ–°å­˜æ¡£å¤±è´¥",e),i.o.error("å¦å­˜ä¸ºæ–°å­˜æ¡£å¤±è´¥"),null}},saveToSlot:async t=>{const n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£,a=h.value;if(!n||!a){const e=`æ²¡æœ‰æ¿€æ´»çš„è§’è‰²ï¼Œæ— æ³•ä¿å­˜åˆ° ${t}`;throw s.Yz.error("è§’è‰²å•†åº—",`[saveToSlot] ${e}`),console.error(`[saveToSlot] ${e}`,{active:n,profile:a}),new Error(e)}if("å•æœº"!==a.æ¨¡å¼){const e=`è”æœºæ¨¡å¼ä¸æ”¯æŒå¤šå­˜æ¡£ï¼Œæ— æ³•ä¿å­˜åˆ° ${t}`;throw s.Yz.warn("è§’è‰²å•†åº—",`[saveToSlot] ${e}`),console.warn(`[saveToSlot] ${e}`,{æ¨¡å¼:a.æ¨¡å¼}),new Error(e)}a.å­˜æ¡£åˆ—è¡¨||(a.å­˜æ¡£åˆ—è¡¨={});try{const e=(0,p.useGameStateStore)().getCurrentSaveData();if(!e)throw new Error("æ— æ³•è·å–å½“å‰å­˜æ¡£æ•°æ®");try{(0,S.DT)(e),e.ç¤¾äº¤?.å…³ç³»&&e.å…ƒæ•°æ®?.æ—¶é—´&&Object.values(e.ç¤¾äº¤.å…³ç³»).forEach(t=>{t&&"object"==typeof t&&(0,S.UY)(t,e.å…ƒæ•°æ®.æ—¶é—´)})}catch(e){s.Yz.warn("è§’è‰²å•†åº—","[saveToSlot] è‡ªåŠ¨æ›´æ–°å¹´é¾„å¤±è´¥ï¼ˆéè‡´å‘½ï¼‰:",e)}const r=e.è§’è‰²?.å±æ€§,o=e.è§’è‰²?.ä½ç½®,i=(new Date).toISOString(),l=a.å­˜æ¡£åˆ—è¡¨;l[t],console.log(`[saveToSlot] ä¿å­˜åˆ°æ§½ä½ "${t}"`,{è§’è‰²ID:n.è§’è‰²ID,è§’è‰²å:a.è§’è‰²?.åå­—,å½“å‰æ¿€æ´»æ§½ä½:n.å­˜æ¡£æ§½ä½,ç›®æ ‡æ§½ä½:t,è¯´æ˜:"ç‰¹æ®Šå­˜æ¡£ä¸å—å½“å‰æ¿€æ´»å­˜æ¡£å½±å“ï¼Œå§‹ç»ˆä¿å­˜åˆ°è§’è‰²çº§åˆ«"});const c={å­˜æ¡£å:t,ä¿å­˜æ—¶é—´:i,å­˜æ¡£æ•°æ®:e,è§’è‰²åå­—:e.è§’è‰²?.èº«ä»½?.åå­—,å¢ƒç•Œ:r?.å¢ƒç•Œ?.åç§°||"å‡¡äºº",ä½ç½®:o?.æè¿°||"æœªçŸ¥",ä¿®ä¸ºè¿›åº¦:0,æ¸¸æˆå†…æ—¶é—´:void 0};if(r?.å¢ƒç•Œ&&r.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€>0&&(c.ä¿®ä¸ºè¿›åº¦=Math.floor(r.å¢ƒç•Œ.å½“å‰è¿›åº¦/r.å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€*100)),e.å…ƒæ•°æ®?.æ—¶é—´){const t=e.å…ƒæ•°æ®.æ—¶é—´;c.æ¸¸æˆå†…æ—¶é—´=`${t.å¹´}å¹´${t.æœˆ}æœˆ${t.æ—¥}æ—¥`}l[t]=c,await d.dc(n.è§’è‰²ID,t,e),await x(),s.Yz.log("è§’è‰²å•†åº—",`âœ… å·²ä¿å­˜åˆ°å­˜æ¡£æ§½ä½: ${t}`)}catch(e){throw s.Yz.error("è§’è‰²å•†åº—",`ä¿å­˜åˆ°æ§½ä½ ${t} å¤±è´¥`,e),e}},renameSave:async(t,n,a)=>{const r=e.value.è§’è‰²åˆ—è¡¨[t];if(!r||"å•æœº"!==r.æ¨¡å¼||!r.å­˜æ¡£åˆ—è¡¨)return void i.o.error("æ— æ³•é‡å‘½åå­˜æ¡£ï¼šè§’è‰²ä¸å­˜åœ¨æˆ–éå•æœºæ¨¡å¼");const o=r.å­˜æ¡£åˆ—è¡¨[n];if(!o)return void i.o.error("è¦é‡å‘½åçš„å­˜æ¡£ä¸å­˜åœ¨");if(a===n)return o.å­˜æ¡£å=a,await x(),void i.o.success("å­˜æ¡£åç§°å·²æ›´æ–°");if(r.å­˜æ¡£åˆ—è¡¨[a])return void i.o.error("æ–°å­˜æ¡£åç§°å·²å­˜åœ¨");r.å­˜æ¡£åˆ—è¡¨[a]={...o,å­˜æ¡£å:a};const s=e.value.å½“å‰æ¿€æ´»å­˜æ¡£;s?.è§’è‰²ID===t&&s?.å­˜æ¡£æ§½ä½===n&&(e.value.å½“å‰æ¿€æ´»å­˜æ¡£={è§’è‰²ID:t,å­˜æ¡£æ§½ä½:a}),delete r.å­˜æ¡£åˆ—è¡¨[n],await x(),i.o.success(`å­˜æ¡£å·²é‡å‘½åä¸ºã€${a}ã€‘`)},loadGame:D,loadGameById:async t=>{const n=h.value;if(!n)return i.o.error("æ²¡æœ‰æ¿€æ´»çš„è§’è‰²"),!1;const a=e.value.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID;return a?"å•æœº"===n.æ¨¡å¼?await D(a,t):await D(a,"å­˜æ¡£"):(i.o.error("æ— æ³•ç¡®å®šè§’è‰²ID"),!1)},saveCurrentGame:T,updateSaveDataDirectly:async t=>{const n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£,a=h.value,r=b.value;if((0,p.useGameStateStore)(),!(n&&a&&r&&t))return void s.Yz.warn("è§’è‰²å•†åº—","[ç›´æ¥æ›´æ–°] ç¼ºå°‘å¿…è¦å‚æ•°ï¼Œè·³è¿‡æ›´æ–°");const o=n.è§’è‰²ID,i=n.å­˜æ¡£æ§½ä½;s.Yz.log("è§’è‰²å•†åº—","[ç›´æ¥æ›´æ–°] å¼€å§‹æ›´æ–°å­˜æ¡£æ•°æ®åˆ°Store...");const l=r.å­˜æ¡£æ•°æ®?.å†å²?.å™äº‹;l&&Array.isArray(l)&&l.length>0&&(t.å†å²={...t.å†å²??{},å™äº‹:l},s.Yz.log("è§’è‰²å•†åº—",`[ç›´æ¥æ›´æ–°] ä¿ç•™æœ¬åœ°å™äº‹å†å²æ•°æ® (${l.length}æ¡)`)),"å•æœº"===a.æ¨¡å¼&&a.å­˜æ¡£åˆ—è¡¨?e.value.è§’è‰²åˆ—è¡¨[o].å­˜æ¡£åˆ—è¡¨={...a.å­˜æ¡£åˆ—è¡¨,[i]:{...a.å­˜æ¡£åˆ—è¡¨[i],å­˜æ¡£æ•°æ®:t,ä¿å­˜æ—¶é—´:(new Date).toISOString()}}:"è”æœº"===a.æ¨¡å¼&&a.å­˜æ¡£&&(e.value.è§’è‰²åˆ—è¡¨[o].å­˜æ¡£={...a.å­˜æ¡£,å­˜æ¡£æ•°æ®:t,ä¿å­˜æ—¶é—´:(new Date).toISOString()}),await x(),s.Yz.log("è§’è‰²å•†åº—","âœ… [ç›´æ¥æ›´æ–°] å­˜æ¡£æ•°æ®å·²æ›´æ–°åˆ°Storeå¹¶æŒä¹…åŒ–")},updateCharacterData:async t=>{const n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£,r=h.value,i=b.value;if(!i?.å­˜æ¡£æ•°æ®||!n||!r)return void s.Yz.warn("è§’è‰²å•†åº—","æ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£ï¼Œæ— æ³•æ›´æ–°è§’è‰²æ•°æ®");const l=[];if(t?.changes)for(const e of t.changes)l.push(e.key),(0,o.set)(i.å­˜æ¡£æ•°æ®,e.key,e.newValue);const c=n.è§’è‰²ID,d=n.å­˜æ¡£æ§½ä½;"å•æœº"===r.æ¨¡å¼&&r.å­˜æ¡£åˆ—è¡¨?e.value.è§’è‰²åˆ—è¡¨[c].å­˜æ¡£åˆ—è¡¨={...r.å­˜æ¡£åˆ—è¡¨,[d]:{...r.å­˜æ¡£åˆ—è¡¨[d],å­˜æ¡£æ•°æ®:(0,o.cloneDeep)(i.å­˜æ¡£æ•°æ®),ä¿å­˜æ—¶é—´:(new Date).toISOString()}}:"è”æœº"===r.æ¨¡å¼&&r.å­˜æ¡£&&(e.value.è§’è‰²åˆ—è¡¨[c].å­˜æ¡£={...r.å­˜æ¡£,å­˜æ¡£æ•°æ®:(0,o.cloneDeep)(i.å­˜æ¡£æ•°æ®),ä¿å­˜æ—¶é—´:(new Date).toISOString()}),(0,a.triggerRef)(e),await x(),l.length>0&&(await(async()=>{const t=e.value.å½“å‰æ¿€æ´»å­˜æ¡£,n=h.value,r=b.value;if((0,p.useGameStateStore)(),t&&n&&r?.å­˜æ¡£æ•°æ®)try{try{const e=(0,S.DT)(r.å­˜æ¡£æ•°æ®);s.Yz.log("è§’è‰²å•†åº—",`[åŒæ­¥] è‡ªåŠ¨æ›´æ–°ç©å®¶å¹´é¾„: ${e}å²`);const t=r.å­˜æ¡£æ•°æ®?.ç¤¾äº¤?.å…³ç³»,n=r.å­˜æ¡£æ•°æ®?.å…ƒæ•°æ®?.æ—¶é—´;if(t&&"object"==typeof t&&n){let e=0;Object.entries(t).forEach(([t,a])=>{const o=a;if(o&&"object"==typeof o)if(o.åå­—)try{r.å­˜æ¡£æ•°æ®&&((0,S.UY)(o,n),e++)}catch(e){s.Yz.warn("è§’è‰²å•†åº—",`[åŒæ­¥] æ›´æ–°NPC ${o.åå­—} å¹´é¾„å¤±è´¥:`,e)}else s.Yz.warn("è§’è‰²å•†åº—",`[åŒæ­¥] è·³è¿‡ç¼ºå°‘åå­—çš„NPC: ${t}`);else s.Yz.warn("è§’è‰²å•†åº—",`[åŒæ­¥] è·³è¿‡æ— æ•ˆçš„NPCæ•°æ®: ${t}`)}),s.Yz.log("è§’è‰²å•†åº—",`[åŒæ­¥] è‡ªåŠ¨æ›´æ–°${e}ä¸ªNPCå¹´é¾„`)}}catch(e){s.Yz.warn("è§’è‰²å•†åº—","[åŒæ­¥] è‡ªåŠ¨æ›´æ–°å¹´é¾„å¤±è´¥ï¼ˆéè‡´å‘½ï¼‰:",e)}s.Yz.log("è§’è‰²å•†åº—","[åŒæ­¥] ç›´æ¥ä¿å­˜åˆ° IndexedDBï¼ˆæ¶æ„å·²é‡æ„ï¼‰"),r.ä¿å­˜æ—¶é—´=(new Date).toISOString(),r.è§’è‰²åå­—=r.å­˜æ¡£æ•°æ®.è§’è‰²?.èº«ä»½?.åå­—;const o=r.å­˜æ¡£æ•°æ®.è§’è‰²?.å±æ€§??null,i=r.å­˜æ¡£æ•°æ®.è§’è‰²?.ä½ç½®??null;if(o&&(r.å¢ƒç•Œ=o.å¢ƒç•Œ?.åç§°||"å‡¡äºº","object"==typeof o.å¢ƒç•Œ&&null!==o.å¢ƒç•Œ)){const e=o.å¢ƒç•Œ;e.ä¸‹ä¸€çº§æ‰€éœ€>0&&(r.ä¿®ä¸ºè¿›åº¦=Math.floor(e.å½“å‰è¿›åº¦/e.ä¸‹ä¸€çº§æ‰€éœ€*100))}r.ä½ç½®=i?.æè¿°||"æœªçŸ¥";const l=r.å­˜æ¡£æ•°æ®?.å…ƒæ•°æ®?.æ—¶é—´;l&&(r.æ¸¸æˆå†…æ—¶é—´=`${l.å¹´}å¹´${l.æœˆ}æœˆ${l.æ—¥}æ—¥`),"å•æœº"===n.æ¨¡å¼&&n.å­˜æ¡£åˆ—è¡¨?e.value.è§’è‰²åˆ—è¡¨[t.è§’è‰²ID].å­˜æ¡£åˆ—è¡¨={...n.å­˜æ¡£åˆ—è¡¨,[t.å­˜æ¡£æ§½ä½]:{...r}}:"è”æœº"===n.æ¨¡å¼&&(e.value.è§’è‰²åˆ—è¡¨[t.è§’è‰²ID].å­˜æ¡£={...r}),(0,a.triggerRef)(e),await x(),s.Yz.log("è§’è‰²å•†åº—","[åŒæ­¥] æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°ï¼Œå…ƒæ•°æ®å·²æ›´æ–°")}catch(e){throw s.Yz.error("è§’è‰²å•†åº—","[åŒæ­¥] ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨å¤±è´¥",e),e}else s.Yz.warn("è§’è‰²å•†åº—","[åŒæ­¥] æ²¡æœ‰æ¿€æ´»çš„å­˜æ¡£æ•°æ®")})(),s.Yz.log("è§’è‰²å•†åº—",`âœ… è§’è‰²æ•°æ®å·²æ›´æ–°å¹¶å¢é‡åŒæ­¥ ${l.length} ä¸ªå­—æ®µ`,l))},loadSaves:async()=>{C()},importSave:async(t,n)=>{const a=e.value.è§’è‰²åˆ—è¡¨[t];if(!a)return void i.o.error("æ‰¾ä¸åˆ°è§’è‰²ï¼Œæ— æ³•å¯¼å…¥å­˜æ¡£");if("å•æœº"!==a.æ¨¡å¼)return void i.o.error("è”æœºæ¨¡å¼ä¸æ”¯æŒå­˜æ¡£å¯¼å…¥");a.å­˜æ¡£åˆ—è¡¨||(a.å­˜æ¡£åˆ—è¡¨={});let r=n.å­˜æ¡£å||"å¯¼å…¥å­˜æ¡£",l=1;for(;a.å­˜æ¡£åˆ—è¡¨[r];)r=`${n.å­˜æ¡£å||"å¯¼å…¥å­˜æ¡£"}_${l}`,l++;if(n.å­˜æ¡£æ•°æ®){const e=(0,u.isTavernEnv)()?(0,m.kL)(n.å­˜æ¡£æ•°æ®):n.å­˜æ¡£æ•°æ®,a=(0,v.ru)(e)?e:(0,v.jj)(e).migrated,l=(0,_.$)(a);if(!l.isValid)return console.error("[å¯¼å…¥å­˜æ¡£] V3æ ¡éªŒå¤±è´¥:",l.errors),void i.o.error(`å¯¼å…¥å¤±è´¥ï¼šå­˜æ¡£ç»“æ„ä¸åˆæ³•ï¼ˆ${l.errors[0]||"æœªçŸ¥åŸå› "}ï¼‰`);await d.dc(t,r,a);const c=a?.è§’è‰²?.å±æ€§,p=a?.è§’è‰²?.ä½ç½®;n={...n,è§’è‰²åå­—:n.è§’è‰²åå­—??a?.è§’è‰²?.èº«ä»½?.åå­—,å¢ƒç•Œ:n.å¢ƒç•Œ??c?.å¢ƒç•Œ?.åç§°,ä½ç½®:n.ä½ç½®??p?.æè¿°,æ¸¸æˆå†…æ—¶é—´:n.æ¸¸æˆå†…æ—¶é—´??(()=>{const e=a?.å…ƒæ•°æ®?.æ—¶é—´;return e?`${e.å¹´}å¹´${e.æœˆ}æœˆ${e.æ—¥}æ—¥`:void 0})(),å­˜æ¡£æ•°æ®:(0,o.cloneDeep)(a)},s.Yz.log("è§’è‰²å•†åº—",`âœ… å·²å°†å¯¼å…¥çš„å­˜æ¡£æ•°æ®ä¿å­˜åˆ° IndexedDB: ${t}/${r}`)}a.å­˜æ¡£åˆ—è¡¨[r]={...n,å­˜æ¡£å:r},await x(),i.o.success(`å­˜æ¡£ã€${r}ã€‘å¯¼å…¥æˆåŠŸ`)},clearAllSaves:async()=>{const t=h.value,n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£?.è§’è‰²ID;t&&n?("å•æœº"===t.æ¨¡å¼&&t.å­˜æ¡£åˆ—è¡¨?t.å­˜æ¡£åˆ—è¡¨={}:"è”æœº"===t.æ¨¡å¼&&t.å­˜æ¡£&&(t.å­˜æ¡£.å­˜æ¡£æ•°æ®=null,t.å­˜æ¡£.ä¿å­˜æ—¶é—´=null),e.value.å½“å‰æ¿€æ´»å­˜æ¡£=null,await x(),i.o.success("æ‰€æœ‰å­˜æ¡£å·²æ¸…ç©º")):i.o.error("æ²¡æœ‰æ¿€æ´»çš„è§’è‰²")},exitGameSession:async()=>{if(!e.value.å½“å‰æ¿€æ´»å­˜æ¡£)return;const t=(0,l.useUIStore)();try{t.startLoading("æ­£åœ¨é€€å‡ºæ¸¸æˆ..."),await(0,u.clearAllCharacterData)(),e.value.å½“å‰æ¿€æ´»å­˜æ¡£=null,await x(),i.o.success((0,u.isTavernEnv)()?"å·²æˆåŠŸé€€å‡ºæ¸¸æˆï¼Œé…’é¦†ç¯å¢ƒå·²é‡ç½®ã€‚":"å·²æˆåŠŸé€€å‡ºæ¸¸æˆã€‚")}catch(e){s.Yz.error("è§’è‰²å•†åº—","é€€å‡ºæ¸¸æˆä¼šè¯å¤±è´¥",e),i.o.error("é€€å‡ºæ¸¸æˆå¤±è´¥ï¼Œå»ºè®®åˆ·æ–°é¡µé¢ä»¥ç¡®ä¿ç¯å¢ƒçº¯å‡€ã€‚")}finally{t.stopLoading()}},rollbackToLastConversation:async()=>{const t=h.value,n=e.value.å½“å‰æ¿€æ´»å­˜æ¡£;if(!t||!n||"å•æœº"!==t.æ¨¡å¼||!t.å­˜æ¡£åˆ—è¡¨)throw new Error("æ— æ³•æ‰§è¡Œå›æ»šï¼šæ— æ•ˆçš„å­˜æ¡£çŠ¶æ€");let r=t.å­˜æ¡£åˆ—è¡¨["ä¸Šæ¬¡å¯¹è¯"];if(!r||!r.å­˜æ¡£æ•°æ®){s.Yz.log("è§’è‰²å•†åº—",'ä»IndexedDBåŠ è½½"ä¸Šæ¬¡å¯¹è¯"å­˜æ¡£æ•°æ®');const e=await d.loadSaveData(n.è§’è‰²ID,"ä¸Šæ¬¡å¯¹è¯");if(!e)throw new Error('æ²¡æœ‰å¯ç”¨äºå›æ»šçš„"ä¸Šæ¬¡å¯¹è¯"å­˜æ¡£ã€‚è¯·ç¡®ä¿å·²å¯ç”¨"å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½"åŠŸèƒ½ã€‚');r?r.å­˜æ¡£æ•°æ®=e:(r={id:"ä¸Šæ¬¡å¯¹è¯",å­˜æ¡£å:"ä¸Šæ¬¡å¯¹è¯",è§’è‰²åå­—:e.è§’è‰²?.èº«ä»½?.åå­—||t.è§’è‰²?.åå­—||"æœªçŸ¥",å¢ƒç•Œ:"æœªçŸ¥",ä½ç½®:"æœªçŸ¥",ä¿å­˜æ—¶é—´:(new Date).toISOString(),å­˜æ¡£æ•°æ®:e},t.å­˜æ¡£åˆ—è¡¨["ä¸Šæ¬¡å¯¹è¯"]=r)}const o=r.å­˜æ¡£æ•°æ®;if(!o)throw new Error('æ²¡æœ‰å¯ç”¨äºå›æ»šçš„"ä¸Šæ¬¡å¯¹è¯"å­˜æ¡£ã€‚è¯·ç¡®ä¿å·²å¯ç”¨"å¯¹è¯å‰è‡ªåŠ¨å¤‡ä»½"åŠŸèƒ½ã€‚');const i=t.å­˜æ¡£åˆ—è¡¨[n.å­˜æ¡£æ§½ä½];if(!i)throw new Error(`æ‰¾ä¸åˆ°å½“å‰æ¿€æ´»çš„å­˜æ¡£æ§½ä½: ${n.å­˜æ¡£æ§½ä½}`);const l=JSON.parse(JSON.stringify(o));i.å­˜æ¡£æ•°æ®=l,i.ä¿å­˜æ—¶é—´=(new Date).toISOString();const c=l.è§’è‰²?.å±æ€§,u=l.è§’è‰²?.ä½ç½®;if(i.å¢ƒç•Œ=c?.å¢ƒç•Œ?.åç§°||"å‡¡äºº",i.ä½ç½®=u?.æè¿°||"æœªçŸ¥",l.å…ƒæ•°æ®?.æ—¶é—´){const e=l.å…ƒæ•°æ®.æ—¶é—´;i.æ¸¸æˆå†…æ—¶é—´=`${e.å¹´}å¹´${e.æœˆ}æœˆ${e.æ—¥}æ—¥`}"å•æœº"===t.æ¨¡å¼&&t.å­˜æ¡£åˆ—è¡¨&&(e.value.è§’è‰²åˆ—è¡¨[n.è§’è‰²ID].å­˜æ¡£åˆ—è¡¨={...t.å­˜æ¡£åˆ—è¡¨,[n.å­˜æ¡£æ§½ä½]:{...i}}),(0,a.triggerRef)(e),await d.dc(n.è§’è‰²ID,n.å­˜æ¡£æ§½ä½,l),await x(),(0,p.useGameStateStore)().loadFromSaveData(l),s.Yz.log("è§’è‰²å•†åº—","âœ… å·²æˆåŠŸå›æ»šåˆ°ä¸Šæ¬¡å¯¹è¯å‰çš„çŠ¶æ€")},commitMetadataToStorage:x,repairCharacterDataWithAI:async(t,n)=>{const a=(0,l.useUIStore)(),r=e.value.è§’è‰²åˆ—è¡¨[t];if(!r)return void i.o.error("ä¿®å¤å¤±è´¥ï¼šæ‰¾ä¸åˆ°è§’è‰²");let o;if(o="å•æœº"===r.æ¨¡å¼?r.å­˜æ¡£åˆ—è¡¨?.[n]:r.å­˜æ¡£,o&&o.å­˜æ¡£æ•°æ®)try{a.startLoading("AIæ­£åœ¨åˆ†æå­˜æ¡£ç»“æ„ï¼Œè¯·ç¨å€™...");const e=(c=o.å­˜æ¡£æ•°æ®,`\n# ä»»åŠ¡ï¼šä¿®å¤æ¸¸æˆæ•°æ®\n\nä½ éœ€è¦ä¿®å¤ä»¥ä¸‹æŸåçš„æ¸¸æˆæ•°æ®ï¼Œä½¿å…¶ç¬¦åˆç±»å‹å®šä¹‰è¦æ±‚ã€‚\n\n## ç±»å‹å®šä¹‰\n${JSON.stringify({},null,2)}\n\n## æŸåçš„æ•°æ®\n${JSON.stringify(c,null,2)}\n\n## ä¿®å¤è¦æ±‚\n1. è¡¥å…¨ç¼ºå¤±çš„å¿…å¡«å­—æ®µ\n2. ä¿®æ­£é”™è¯¯çš„æ•°æ®ç±»å‹\n3. å¡«å……åˆç†çš„é»˜è®¤å€¼\n4. ä¿æŒç°æœ‰æ­£ç¡®æ•°æ®ä¸å˜\n\n## è¾“å‡ºæ ¼å¼\nè¿”å›ä¿®å¤åçš„å®Œæ•´JSONå¯¹è±¡ã€‚\n`.trim()),l=(0,u.getTavernHelper)();if(!l)throw new Error("é…’é¦†è¿æ¥ä¸å¯ç”¨");a.updateLoadingText("å¤©é“æ­£åœ¨æ¨æ¼”ä¿®å¤æ–¹æ¡ˆ...");const d=await l.generate({user_input:e,overrides:{temperature:.7,max_context_length:8e3,max_length:2048}});if(!d)throw new Error("AIæœªèƒ½ç”Ÿæˆä¿®å¤æŒ‡ä»¤");let m=[];try{const e=d.replace(/```json/g,"").replace(/```/g,"").trim(),t=JSON.parse(e);if(!t.tavern_commands||!Array.isArray(t.tavern_commands))throw new Error("AIå“åº”ä¸­ç¼ºå°‘æœ‰æ•ˆçš„ tavern_commands æ•°ç»„");m=t.tavern_commands}catch(e){throw s.Yz.error("è§’è‰²å•†åº—","è§£æAIä¿®å¤æŒ‡ä»¤å¤±è´¥",{error:e,response:d}),new Error("è§£æAIä¿®å¤æŒ‡ä»¤å¤±è´¥")}if(0===m.length)return i.o.info("AIåˆ†æè®¤ä¸ºå½“å‰å­˜æ¡£æ— éœ€ä¿®å¤ã€‚"),void await D(t,n);a.updateLoadingText(`AIå·²ç”Ÿæˆ ${m.length} æ¡ä¿®å¤æŒ‡ä»¤ï¼Œæ­£åœ¨åº”ç”¨...`);const p=await(async(e,t,n)=>{const a=[],r=(e,t,n)=>{const a=t.split(".");let r=e;for(let e=0;e<a.length-1;e++)void 0!==r[a[e]]&&"object"==typeof r[a[e]]||(r[a[e]]={}),r=r[a[e]];r[a[a.length-1]]=n};for(const o of n)try{const{action:n,key:i,value:l}=o;if(!n||!i){a.push(`æ— æ•ˆæŒ‡ä»¤: ${JSON.stringify(o)}`);continue}let c,d;i.startsWith("character.profile.")?(c=t,d=i.substring(18)):(c=e,d=i),"set"===n?(r(c,d,l),s.Yz.log("AIä¿®å¤",`æ‰§è¡Œ set: ${i} =`,l)):s.Yz.warn("AIä¿®å¤",`æš‚ä¸æ”¯æŒçš„æŒ‡ä»¤ action: ${n}`)}catch(e){a.push(`æ‰§è¡ŒæŒ‡ä»¤å¤±è´¥: ${JSON.stringify(o)}`),s.Yz.error("AIä¿®å¤","æ‰§è¡ŒæŒ‡ä»¤æ—¶å‡ºé”™",e)}return a})(o.å­˜æ¡£æ•°æ®,r,m);p.length>0&&(s.Yz.error("è§’è‰²å•†åº—","æ‰§è¡ŒAIä¿®å¤æŒ‡ä»¤æ—¶å‡ºé”™",p),i.o.error(`éƒ¨åˆ†ä¿®å¤æŒ‡ä»¤æ‰§è¡Œå¤±è´¥: ${p.join(", ")}`)),o.ä¿å­˜æ—¶é—´=(new Date).toISOString(),await x(),i.o.success("AIå·²å®Œæˆå­˜æ¡£ä¿®å¤ï¼æ­£åœ¨é‡æ–°åŠ è½½æ¸¸æˆ..."),await new Promise(e=>setTimeout(e,500)),await D(t,n)}catch(e){s.Yz.error("è§’è‰²å•†åº—","AIä¿®å¤å­˜æ¡£å¤±è´¥",e),i.o.error(`å­˜æ¡£ä¿®å¤å¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}finally{a.stopLoading()}else i.o.error("ä¿®å¤å¤±è´¥ï¼šæ‰¾ä¸åˆ°å­˜æ¡£æ•°æ®");var c},initialCreationStateChanges:t,setInitialCreationStateChanges:e=>{s.Yz.log("è§’è‰²å•†åº—","æš‚å­˜åˆå§‹è§’è‰²åˆ›å»ºçš„çŠ¶æ€å˜æ›´",e),t.value=e},consumeInitialCreationStateChanges:()=>{const e=t.value;return e&&(s.Yz.log("è§’è‰²å•†åº—","æ¶ˆè´¹åˆå§‹çŠ¶æ€å˜æ›´æ—¥å¿—",e),t.value=null),e},equipTechnique:async e=>{const t=(0,p.useGameStateStore)(),n=t.getCurrentSaveData();if(!n)return void i.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨");const a=n.è§’è‰²?.èƒŒåŒ…?.ç‰©å“?.[e];if(!a||"åŠŸæ³•"!==a.ç±»å‹)return void i.o.error("è¦è£…å¤‡çš„ç‰©å“ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åŠŸæ³•");if(console.log("[è§’è‰²å•†åº—-è°ƒè¯•] è£…å¤‡åŠŸæ³•å‰çš„æ•°æ®:",{åŠŸæ³•åç§°:a.åç§°,å“è´¨å­—æ®µå­˜åœ¨:!!a.å“è´¨,å“è´¨å†…å®¹:a.å“è´¨,å®Œæ•´ç‰©å“æ•°æ®:a}),Object.values(n.è§’è‰²?.èƒŒåŒ…?.ç‰©å“??{}).forEach(e=>{"åŠŸæ³•"===e.ç±»å‹&&(e.å·²è£…å¤‡=!1)}),a.å·²è£…å¤‡=!0,void 0!==a.ä¿®ç‚¼è¿›åº¦&&null!==a.ä¿®ç‚¼è¿›åº¦||(a.ä¿®ç‚¼è¿›åº¦=0,s.Yz.log("è§’è‰²å•†åº—","åˆå§‹åŒ–åŠŸæ³•ä¿®ç‚¼è¿›åº¦ä¸º 0")),a.å·²è§£é”æŠ€èƒ½||(a.å·²è§£é”æŠ€èƒ½=[]),a.åŠŸæ³•æŠ€èƒ½&&Array.isArray(a.åŠŸæ³•æŠ€èƒ½)){const e=a.ä¿®ç‚¼è¿›åº¦||0;s.Yz.log("è§’è‰²å•†åº—",`[æŠ€èƒ½è§£é”æ£€æŸ¥] åŠŸæ³•: ${a.åç§°}, è¿›åº¦: ${e}%, æŠ€èƒ½æ•°: ${a.åŠŸæ³•æŠ€èƒ½.length}`),a.åŠŸæ³•æŠ€èƒ½.forEach(t=>{const n=t.ç†Ÿç»ƒåº¦è¦æ±‚||0;s.Yz.log("è§’è‰²å•†åº—",`  æ£€æŸ¥æŠ€èƒ½: ${t.æŠ€èƒ½åç§°}, é˜ˆå€¼: ${n}%, å½“å‰è¿›åº¦: ${e}%, åº”è§£é”: ${e>=n}`),e>=n&&!a.å·²è§£é”æŠ€èƒ½.includes(t.æŠ€èƒ½åç§°)&&(a.å·²è§£é”æŠ€èƒ½.push(t.æŠ€èƒ½åç§°),s.Yz.log("è§’è‰²å•†åº—",`  âœ… ç«‹å³è§£é”æŠ€èƒ½: ${t.æŠ€èƒ½åç§°} (é˜ˆå€¼: ${n}%)`))}),s.Yz.log("è§’è‰²å•†åº—","[æŠ€èƒ½è§£é”ç»“æœ] å·²è§£é”æŠ€èƒ½æ•°ç»„:",a.å·²è§£é”æŠ€èƒ½)}n.è§’è‰².ä¿®ç‚¼={...n.è§’è‰².ä¿®ç‚¼??{},ä¿®ç‚¼åŠŸæ³•:{ç‰©å“ID:a.ç‰©å“ID,åç§°:a.åç§°}},s.Yz.log("è§’è‰²å•†åº—",`å·²è£…å¤‡åŠŸæ³•: ${a.åç§°}`),s.Yz.log("è§’è‰²å•†åº—",`ä¿®ç‚¼è¿›åº¦å­˜å‚¨åœ¨: èƒŒåŒ….ç‰©å“.${a.ç‰©å“ID}.ä¿®ç‚¼è¿›åº¦`),s.Yz.log("è§’è‰²å•†åº—",`å·²è§£é”æŠ€èƒ½æ•°é‡: ${a.å·²è§£é”æŠ€èƒ½?.length||0}`);try{const e=(0,V.F)(n);s.Yz.log("è§’è‰²å•†åº—",`è£…å¤‡åŠŸæ³•åå·²æ›´æ–°æŒæ¡æŠ€èƒ½åˆ—è¡¨ï¼Œå…± ${e.length} ä¸ªæŠ€èƒ½`)}catch(e){s.Yz.error("è§’è‰²å•†åº—","è£…å¤‡åŠŸæ³•åè‡ªåŠ¨è®¡ç®—æŒæ¡æŠ€èƒ½å¤±è´¥:",e)}t.loadFromSaveData(n);const r=t.inventory?.ç‰©å“?.[e];if(r&&"åŠŸæ³•"===r.ç±»å‹){r.å·²è§£é”æŠ€èƒ½||(r.å·²è§£é”æŠ€èƒ½=[]);const e=r.ä¿®ç‚¼è¿›åº¦||0;r.åŠŸæ³•æŠ€èƒ½&&Array.isArray(r.åŠŸæ³•æŠ€èƒ½)&&r.åŠŸæ³•æŠ€èƒ½.forEach(t=>{const n=t.ç†Ÿç»ƒåº¦è¦æ±‚||0;e>=n&&!r.å·²è§£é”æŠ€èƒ½.includes(t.æŠ€èƒ½åç§°)&&(r.å·²è§£é”æŠ€èƒ½.push(t.æŠ€èƒ½åç§°),s.Yz.log("è§’è‰²å•†åº—",`[äºŒæ¬¡ç¡®è®¤] è§£é”æŠ€èƒ½: ${t.æŠ€èƒ½åç§°}`))})}await T();const o=n.è§’è‰²?.èƒŒåŒ…?.ç‰©å“?.[e];console.log("[è§’è‰²å•†åº—-è°ƒè¯•] æŒä¹…åŒ–åçš„åŠŸæ³•æ•°æ®:",{åŠŸæ³•åç§°:o?.åç§°,å“è´¨å­—æ®µå­˜åœ¨:!!o?.å“è´¨,å“è´¨å†…å®¹:o?.å“è´¨,å®Œæ•´ç‰©å“æ•°æ®:o});const l=a.åç§°;i.o.success(`å·²å¼€å§‹ä¿®ç‚¼ã€Š${l}ã€‹`)},unequipTechnique:async t=>{const n=(0,p.useGameStateStore)().getCurrentSaveData();if(!n)return void i.o.error("å­˜æ¡£æ•°æ®ä¸å­˜åœ¨");const r=n.è§’è‰²?.èƒŒåŒ…?.ç‰©å“?.[t];if(!r||"åŠŸæ³•"!==r.ç±»å‹||!r.å·²è£…å¤‡)return s.Yz.error("è§’è‰²å•†åº—","åŠŸæ³•å¸è½½éªŒè¯å¤±è´¥:",{itemExists:!!r,itemType:r?.ç±»å‹,isEquipped:r?.å·²è£…å¤‡,requestedItemId:t}),void i.o.error("è¦å¸ä¸‹çš„åŠŸæ³•ä¸å½“å‰ä¿®ç‚¼çš„åŠŸæ³•ä¸åŒ¹é…");r.å·²è£…å¤‡=!1,n.è§’è‰²?.ä¿®ç‚¼?.ä¿®ç‚¼åŠŸæ³•?.ç‰©å“ID===t&&(n.è§’è‰².ä¿®ç‚¼={...n.è§’è‰².ä¿®ç‚¼??{},ä¿®ç‚¼åŠŸæ³•:null}),s.Yz.log("è§’è‰²å•†åº—",`å·²å¸ä¸‹åŠŸæ³•: ${r.åç§°}`),s.Yz.log("è§’è‰²å•†åº—",`ä¿®ç‚¼è¿›åº¦ä¿ç•™åœ¨: èƒŒåŒ….ç‰©å“.${r.ç‰©å“ID}.ä¿®ç‚¼è¿›åº¦`);try{const e=(0,V.F)(n);s.Yz.log("è§’è‰²å•†åº—",`å¸ä¸‹åŠŸæ³•åå·²æ›´æ–°æŒæ¡æŠ€èƒ½åˆ—è¡¨ï¼Œå…± ${e.length} ä¸ªæŠ€èƒ½`)}catch(e){s.Yz.error("è§’è‰²å•†åº—","å¸ä¸‹åŠŸæ³•åè‡ªåŠ¨è®¡ç®—æŒæ¡æŠ€èƒ½å¤±è´¥:",e)}(0,a.triggerRef)(e),await x();const o=r.ä¿®ç‚¼è¿›åº¦||0,l=r.åç§°;i.o.info(`å·²åœæ­¢ä¿®ç‚¼ã€Š${l}ã€‹ï¼Œä¿®ç‚¼è¿›åº¦${o}%å·²ä¿å­˜åˆ°èƒŒåŒ…`)},importCharacter:async t=>{if(!t||!t.è§’è‰²||!t.æ¨¡å¼)throw new Error("æ— æ•ˆçš„è§’è‰²æ–‡ä»¶æ ¼å¼ã€‚");const n=`char_${Date.now()}`,a=t.è§’è‰².åå­—||"æœªçŸ¥è§’è‰²";if(Object.values(e.value.è§’è‰²åˆ—è¡¨).some(e=>e.è§’è‰².åå­—===a))throw new Error(`è§’è‰² "${a}" å·²å­˜åœ¨ï¼Œè¯·å…ˆåˆ é™¤æˆ–é‡å‘½åç°æœ‰è§’è‰²ã€‚`);const r=t._å¯¼å…¥å­˜æ¡£åˆ—è¡¨;if(delete t._å¯¼å…¥å­˜æ¡£åˆ—è¡¨,t.å­˜æ¡£åˆ—è¡¨||(t.å­˜æ¡£åˆ—è¡¨={}),r&&Array.isArray(r)&&r.length>0){s.Yz.log("è§’è‰²å•†åº—",`å¼€å§‹å¯¼å…¥ ${r.length} ä¸ªå­˜æ¡£...`);for(const e of r){const a=e.å­˜æ¡£å||"å¯¼å…¥å­˜æ¡£";let r=a,o=1;for(;t.å­˜æ¡£åˆ—è¡¨[r];)r=`${a}_${o}`,o++;if(e.å­˜æ¡£æ•°æ®){const t=(0,u.isTavernEnv)()?(0,m.kL)(e.å­˜æ¡£æ•°æ®):e.å­˜æ¡£æ•°æ®,a=(0,v.ru)(t)?t:(0,v.jj)(t).migrated,o=(0,_.$)(a);if(!o.isValid)throw console.error("[å¯¼å…¥è§’è‰²] å­˜æ¡£V3æ ¡éªŒå¤±è´¥:",o.errors),new Error(`å¯¼å…¥è§’è‰²å¤±è´¥ï¼šå­˜æ¡£ç»“æ„ä¸åˆæ³•ï¼ˆ${o.errors[0]||"æœªçŸ¥åŸå› "}ï¼‰`);await d.dc(n,r,a);const i=a?.è§’è‰²?.å±æ€§,l=a?.è§’è‰²?.ä½ç½®;e.è§’è‰²åå­—=e.è§’è‰²åå­—??a?.è§’è‰²?.èº«ä»½?.åå­—,e.å¢ƒç•Œ=e.å¢ƒç•Œ??i?.å¢ƒç•Œ?.åç§°,e.ä½ç½®=e.ä½ç½®??l?.æè¿°,e.æ¸¸æˆå†…æ—¶é—´=e.æ¸¸æˆå†…æ—¶é—´??(()=>{const e=a?.å…ƒæ•°æ®?.æ—¶é—´;return e?`${e.å¹´}å¹´${e.æœˆ}æœˆ${e.æ—¥}æ—¥`:void 0})(),s.Yz.log("è§’è‰²å•†åº—",`âœ… å·²å°†å­˜æ¡£æ•°æ®ä¿å­˜åˆ° IndexedDB: ${n}/${r}`)}const i={...e};delete i.å­˜æ¡£æ•°æ®,t.å­˜æ¡£åˆ—è¡¨[r]={...i,å­˜æ¡£å:r}}s.Yz.log("è§’è‰²å•†åº—",`âœ… æˆåŠŸå¯¼å…¥ ${r.length} ä¸ªå­˜æ¡£`)}e.value.è§’è‰²åˆ—è¡¨[n]={...t},await x(),s.Yz.log("è§’è‰²å•†åº—",`æˆåŠŸå¯¼å…¥è§’è‰²: ${a} (æ–°ID: ${n})ï¼Œå« ${Object.keys(t.å­˜æ¡£åˆ—è¡¨).length} ä¸ªå­˜æ¡£`)},loadSaveData:async(e,t)=>{console.log(`[CharacterStore] Loading save data for ${e} - ${t}`);return await d.loadSaveData(e,t)||(console.error(`[CharacterStore] Failed to load save data for ${e} - ${t}`),null)},loadCharacterSaves:async t=>{const n=e.value.è§’è‰²åˆ—è¡¨[t];if(n){s.Yz.log("è§’è‰²å•†åº—",`[loadCharacterSaves] å¼€å§‹ä¸ºè§’è‰² ${t} åŠ è½½å­˜æ¡£æ•°æ®...`);try{let r=0;if("è”æœº"===n.æ¨¡å¼){n.å­˜æ¡£||(n.å­˜æ¡£={å­˜æ¡£å:"å­˜æ¡£",ä¿å­˜æ—¶é—´:"",æ¸¸æˆå†…æ—¶é—´:""});const e=n.å­˜æ¡£;if(!e.å­˜æ¡£æ•°æ®){if((0,N.isBackendConfigured)()&&await(0,E.verifyStoredToken)())try{const n=await(0,E.NX)(t),a=n?.game_save,o=a?.save_data;o&&(e.å­˜æ¡£æ•°æ®=o,a?.game_time&&"string"==typeof a.game_time&&(e.æ¸¸æˆå†…æ—¶é—´=a.game_time),e.äº‘ç«¯åŒæ­¥ä¿¡æ¯={æœ€ååŒæ­¥:a?.last_sync?String(a.last_sync):(new Date).toISOString(),ç‰ˆæœ¬:"number"==typeof a?.version?a.version:1,éœ€è¦åŒæ­¥:!1},r++,s.Yz.log("è§’è‰²å•†åº—","  > æˆåŠŸä»äº‘ç«¯åŠ è½½è”æœºå­˜æ¡£"))}catch(e){s.Yz.warn("è§’è‰²å•†åº—","ä»äº‘ç«¯åŠ è½½è”æœºå­˜æ¡£å¤±è´¥ï¼Œå°è¯•æœ¬åœ°ç¼“å­˜",e)}if(!e.å­˜æ¡£æ•°æ®){const n=await d.loadSaveData(t,"å­˜æ¡£");n&&(e.å­˜æ¡£æ•°æ®=n,r++,s.Yz.log("è§’è‰²å•†åº—","  > æˆåŠŸä»æœ¬åœ°åŠ è½½è”æœºå­˜æ¡£ç¼“å­˜"))}}}else{if(!n.å­˜æ¡£åˆ—è¡¨)return void s.Yz.log("è§’è‰²å•†åº—",`[loadCharacterSaves] è§’è‰² ${t} æ— å­˜æ¡£åˆ—è¡¨ï¼Œæ— éœ€åŠ è½½ã€‚`);const e=Object.keys(n.å­˜æ¡£åˆ—è¡¨);for(const a of e){const e=n.å­˜æ¡£åˆ—è¡¨[a];if(e&&!e.å­˜æ¡£æ•°æ®){const n=await d.loadSaveData(t,a);n&&(e.å­˜æ¡£æ•°æ®=n,r++,s.Yz.log("è§’è‰²å•†åº—",`  > æˆåŠŸåŠ è½½å­˜æ¡£: ${a}`))}}}r>0?((0,a.triggerRef)(e),s.Yz.log("è§’è‰²å•†åº—",`[loadCharacterSaves] å®ŒæˆåŠ è½½ï¼Œå…±è½½å…¥ ${r} ä¸ªå­˜æ¡£æ•°æ®ã€‚`)):s.Yz.log("è§’è‰²å•†åº—","[loadCharacterSaves] æ— éœ€åŠ è½½æ–°çš„å­˜æ¡£æ•°æ®ã€‚")}catch(e){s.Yz.error("è§’è‰²å•†åº—",`[loadCharacterSaves] åŠ è½½è§’è‰² ${t} çš„å­˜æ¡£æ—¶å‡ºé”™`,e)}}else s.Yz.warn("è§’è‰²å•†åº—",`[loadCharacterSaves] è§’è‰²ä¸å­˜åœ¨: ${t}`)}}})},4717:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},4728:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.character-details-wrapper[data-v-3baad3fb] {\n  width: 100%;\n  height: 100%;\n  background: var(--color-background);\n  overflow-y: auto;\n}\n\n/* åŠ è½½å’Œé”™è¯¯çŠ¶æ€ */\n.loading-container[data-v-3baad3fb], .error-container[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: var(--color-text-secondary);\n}\n.loading-spinner[data-v-3baad3fb] {\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--color-border);\n  border-top: 3px solid var(--color-primary);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 16px;\n}\n.error-icon[data-v-3baad3fb] {\n  margin-bottom: 16px;\n  color: var(--color-danger);\n}\n.retry-btn[data-v-3baad3fb] {\n  margin-top: 16px;\n  padding: 8px 16px;\n  background: var(--color-primary);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n}\n\n/* è§’è‰²å¤´éƒ¨ä¿¡æ¯ç®€åŒ–ç‰ˆ */\n.character-header[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 24px;\n  padding: 24px;\n  background: var(--color-surface);\n  border-bottom: 1px solid var(--color-border);\n  border-radius: 12px 12px 0 0;\n}\n\n/* æ–°ç‰ˆå¤´éƒ¨å¸ƒå±€ */\n.header-modern[data-v-3baad3fb] {\n  flex-direction: column;\n  gap: 16px;\n}\n.header-main[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  gap: 16px;\n}\n.header-left[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  min-width: 0;\n  flex: 1;\n}\n.header-stats[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n  width: 100%;\n  padding-top: 12px;\n  border-top: 1px solid var(--color-border);\n}\n.stat-item[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 12px;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n}\n.stat-label[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.stat-value[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text);\n  font-weight: 600;\n}\n.stat-value.gender.gender-ç”·[data-v-3baad3fb] {\n  color: #3b82f6;\n}\n.stat-value.gender.gender-å¥³[data-v-3baad3fb] {\n  color: #ec4899;\n}\n.stat-value.spirit-root[data-v-3baad3fb] {\n  color: var(--color-primary);\n}\n.stat-value.reputation[data-v-3baad3fb] {\n  color: var(--color-warning);\n}\n.avatar-circle[data-v-3baad3fb] {\n  width: 56px;\n  height: 56px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, var(--color-primary), var(--color-info));\n  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.3);\n  flex-shrink: 0;\n}\n.avatar-initial[data-v-3baad3fb] {\n  color: #fff;\n  font-size: 1.25rem;\n  font-weight: 800;\n  letter-spacing: 1px;\n}\n.title-area[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  min-width: 0;\n}\n.meta-chips[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.meta-chip[data-v-3baad3fb] {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 4px 10px;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 999px;\n  white-space: nowrap;\n}\n.realm-chip[data-v-3baad3fb] {\n  color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.06);\n  border-color: rgba(var(--color-primary-rgb), 0.35);\n}\n.age-chip[data-v-3baad3fb] {\n  color: var(--color-info);\n  background: rgba(var(--color-info-rgb), 0.06);\n  border-color: rgba(var(--color-info-rgb), 0.35);\n}\n.location-chip[data-v-3baad3fb] {\n  color: var(--color-success);\n  background: rgba(var(--color-success-rgb), 0.06);\n  border-color: rgba(var(--color-success-rgb), 0.35);\n}\n.header-right[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.reputation-badge[data-v-3baad3fb] {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 10px;\n  background: rgba(var(--color-warning-rgb), 0.12);\n  border: 1px solid rgba(var(--color-warning-rgb), 0.35);\n  border-radius: 10px;\n}\n.rep-label[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.rep-value[data-v-3baad3fb] {\n  font-weight: 700;\n  color: var(--color-warning);\n}\n.cultivation-compact[data-v-3baad3fb] {\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n}\n.cultivation-compact.mortal[data-v-3baad3fb] {\n  padding: 4px 8px;\n  background: rgba(var(--color-text-tertiary-rgb), 0.08);\n  border: 1px dashed rgba(var(--color-text-tertiary-rgb), 0.25);\n  border-radius: 8px;\n}\n.compact-bar[data-v-3baad3fb] {\n  width: 120px;\n  height: 6px;\n  background: rgba(var(--color-border-rgb), 0.5);\n  border-radius: 3px;\n  overflow: hidden;\n  position: relative;\n}\n.compact-progress[data-v-3baad3fb] {\n  height: 100%;\n  background: linear-gradient(90deg,\n    var(--color-info) 0%,\n    var(--color-success) 80%,\n    var(--color-warning) 100%\n  );\n  width: 0%;\n  transition: width 0.3s ease;\n  border-radius: 3px;\n}\n.compact-label[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n  min-width: 28px;\n}\n.compact-text[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: var(--color-text);\n  font-variant-numeric: tabular-nums;\n  min-width: 45px;\n  text-align: right;\n}\n.character-gender[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-width: 80px;\n}\n.gender-symbol[data-v-3baad3fb] {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 2rem;\n  font-weight: bold;\n  color: white;\n  margin-bottom: 8px;\n  transition: all 0.3s ease;\n  background: linear-gradient(135deg, var(--color-primary), var(--color-primary-hover));\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n.gender-å¥³ .gender-symbol[data-v-3baad3fb] {\n  background: linear-gradient(135deg, var(--color-accent), var(--color-accent-hover));\n  box-shadow: 0 4px 12px rgba(var(--color-accent-rgb), 0.3);\n}\n.gender-ç”· .gender-symbol[data-v-3baad3fb] {\n  background: linear-gradient(135deg, var(--color-info), var(--color-info-hover));\n  box-shadow: 0 4px 12px rgba(var(--color-info-rgb), 0.3);\n}\n.gender-text[data-v-3baad3fb] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n.character-info[data-v-3baad3fb] {\n  flex: 1;\n}\n.character-name[data-v-3baad3fb] {\n  margin: 0 0 16px 0;\n  font-size: 2rem;\n  font-weight: 700;\n  color: var(--color-text);\n}\n.character-details[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n.detail-item[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.label[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.value[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.realm[data-v-3baad3fb] {\n  color: var(--color-warning);\n  font-weight: 700;\n}\n.gender-value[data-v-3baad3fb] {\n  padding: 4px 12px;\n  border-radius: 16px;\n  font-weight: 600;\n  font-size: 0.9rem;\n}\n.gender-value.gender-å¥³[data-v-3baad3fb] {\n  background: rgba(var(--color-accent-rgb), 0.1);\n  color: var(--color-accent);\n  border: 1px solid rgba(var(--color-accent-rgb), 0.3);\n}\n.gender-value.gender-ç”·[data-v-3baad3fb] {\n  background: transparent;\n  color: var(--color-text);\n  border: none;\n}\n.character-stats[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  min-width: 120px;\n}\n.stat-item[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  gap: 8px;\n}\n.stat-label[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.stat-value[data-v-3baad3fb] {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n.stat-display[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n}\n.stat-value.reputation[data-v-3baad3fb] {\n  color: var(--color-warning);\n  text-shadow: 0 1px 2px rgba(245, 158, 11, 0.3);\n}\n.stat-display.cultivation[data-v-3baad3fb] {\n  width: 100%;\n  min-width: 100px;\n}\n\n/* å‡¡äººä¿®ç‚¼çŠ¶æ€æ ·å¼ */\n.stat-display.mortal-state[data-v-3baad3fb] {\n  padding: 8px 16px;\n  background: rgba(var(--color-primary-rgb), 0.05);\n  border-radius: 6px;\n  border: 1px dashed rgba(var(--color-primary-rgb), 0.3);\n}\n.mortal-hint[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-tertiary);\n  font-weight: 400;\n  opacity: 0.9;\n}\n.cultivation-bar[data-v-3baad3fb] {\n  width: 100%;\n  height: 8px;\n  background: var(--color-border);\n  border-radius: 4px;\n  overflow: hidden;\n  margin-bottom: 4px;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n.cultivation-progress[data-v-3baad3fb] {\n  height: 100%;\n  background: linear-gradient(90deg, var(--color-info), var(--color-success));\n  border-radius: 4px;\n  transition: width 0.5s ease;\n  box-shadow: 0 1px 2px rgba(59, 130, 246, 0.3);\n}\n.cultivation-text[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-info);\n  white-space: nowrap;\n}\n\n/* å†…å®¹ç½‘æ ¼ - ç€‘å¸ƒæµå¸ƒå±€ */\n.content-grid[data-v-3baad3fb] {\n  column-count: 2;\n  column-gap: 16px;\n  padding: 16px;\n  max-width: 100%;\n  overflow: hidden;\n  box-sizing: border-box;\n}\n\n/* ä¿¡æ¯åŒºå—ä¼˜åŒ– */\n.info-section[data-v-3baad3fb] {\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 16px;\n  box-shadow: none;\n  transition: border-color 0.2s ease, background-color 0.2s ease;\n  position: relative;\n  overflow: hidden;\n  box-sizing: border-box;\n  min-width: 0;\n  break-inside: avoid;\n  margin-bottom: 16px;\n}\n.info-section[data-v-3baad3fb]:hover {\n  transform: none;\n  box-shadow: none;\n  border-color: var(--color-border-hover);\n}\n.section-title[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin: 0 0 20px 0;\n  font-size: 1.2rem;\n  font-weight: 700;\n  color: var(--color-text);\n  padding-bottom: 12px;\n  border-bottom: 2px solid rgba(var(--color-border-rgb), 0.3);\n  position: relative;\n}\n.section-title[data-v-3baad3fb]::after {\n  content: '';\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  width: 40px;\n  height: 2px;\n  background: var(--color-primary);\n  border-radius: 1px;\n}\n.title-icon[data-v-3baad3fb] {\n  color: var(--color-primary);\n  flex-shrink: 0;\n  padding: 8px;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border-radius: 8px;\n}\n\n/* ç”Ÿå‘½çŠ¶æ€ */\n.vitals-grid[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.vital-item[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.vital-label[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--color-text);\n}\n.vital-bar[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.bar-container[data-v-3baad3fb] {\n  flex: 1;\n  height: 12px;\n  background: var(--color-border);\n  border-radius: 6px;\n  overflow: hidden;\n}\n.bar-fill[data-v-3baad3fb] {\n  height: 100%;\n  transition: width 0.3s ease;\n}\n.bar-danger[data-v-3baad3fb] { background: linear-gradient(90deg, var(--color-danger), var(--color-danger-hover));\n}\n.bar-info[data-v-3baad3fb] { background: linear-gradient(90deg, var(--color-info), var(--color-info-hover));\n}\n.bar-accent[data-v-3baad3fb] { background: linear-gradient(90deg, var(--color-warning), var(--color-warning-hover));\n}\n\n/* ç”Ÿå‘½çŠ¶æ€é¢œè‰²ï¼ˆçº¢è“é‡‘ä¸‰è‰²ï¼‰ */\n.bar-red[data-v-3baad3fb] { background: linear-gradient(90deg, var(--vital-health), var(--vital-health));\n}\n.bar-blue[data-v-3baad3fb] { background: linear-gradient(90deg, var(--vital-lingqi), var(--vital-lingqi));\n}\n.bar-gold[data-v-3baad3fb] { background: linear-gradient(90deg, var(--vital-spirit), var(--vital-spirit));\n}\n.vital-text[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n  min-width: 60px;\n}\n\n/* å¤©èµ‹ä¸çµæ ¹ */\n.talent-grid[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.talent-item[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  align-items: flex-start;\n  padding: 12px;\n  background: var(--color-surface);\n  border-radius: 8px;\n  border-left: 3px solid var(--color-primary);\n}\n.talent-label[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  margin-right: 1rem;\n}\n.talent-value[data-v-3baad3fb] {\n  font-weight: 600;\n}\n.tier[data-v-3baad3fb], .spirit-root[data-v-3baad3fb] {\n  padding: 4px 12px;\n  border-radius: 16px;\n  font-size: 0.85rem;\n}\n.tier[data-v-3baad3fb] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  color: var(--color-success);\n}\n.spirit-root[data-v-3baad3fb] {\n  background: rgba(var(--color-info-rgb), 0.1);\n  color: var(--color-info);\n}\n.talent-tags[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 12px;\n}\n.talent-tag[data-v-3baad3fb] {\n  padding: 4px 10px;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  color: var(--color-primary);\n  border-radius: 12px;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n\n/* çŠ¶æ€æ•ˆæœ */\n.effects-list[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.effect-item[data-v-3baad3fb] {\n  padding: 12px;\n  border-radius: 8px;\n  border-left: 4px solid;\n}\n.effect-buff[data-v-3baad3fb] {\n  border-color: var(--color-success);\n  background: rgba(var(--color-success-rgb), 0.1);\n}\n.effect-debuff[data-v-3baad3fb] {\n  border-color: var(--color-danger);\n  background: rgba(var(--color-danger-rgb), 0.1);\n}\n.effect-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 4px;\n}\n.effect-name[data-v-3baad3fb] {\n  font-weight: 600;\n}\n.effect-remove-btn[data-v-3baad3fb] {\n  padding: 4px;\n  background: transparent;\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n}\n.effect-remove-btn[data-v-3baad3fb]:hover {\n  background: var(--color-danger);\n  border-color: var(--color-danger);\n  color: white;\n}\n.effect-duration[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.effect-description[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text);\n  line-height: 1.4;\n  margin-bottom: 8px;\n}\n.effect-time-info[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  margin-top: 8px;\n  padding-top: 8px;\n  border-top: 1px solid var(--color-border);\n}\n.body-parts-list[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.body-part-item[data-v-3baad3fb] {\n  padding: 12px;\n  background: var(--color-surface);\n  border-radius: 8px;\n  border-left: 4px solid var(--color-info);\n}\n.part-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.part-name[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.part-level[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  font-weight: 600;\n  padding: 2px 8px;\n  border-radius: 10px;\n  background: rgba(var(--color-info-rgb), 0.1);\n  color: var(--color-info);\n}\n.part-description[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n}\n.effect-created[data-v-3baad3fb],\n.effect-remaining[data-v-3baad3fb] {\n  opacity: 0.8;\n}\n\n/* å…­å¸å±æ€§ */\n.basic-info-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 12px;\n}\n.basic-info-item[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  background: var(--color-surface-light);\n  border-radius: 6px;\n  min-height: 36px;\n}\n.basic-info-item .info-label[data-v-3baad3fb] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.basic-info-item .info-value[data-v-3baad3fb] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.basic-info-item .info-value.gender.gender-ç”·[data-v-3baad3fb] {\n  color: #3b82f6;\n}\n.basic-info-item .info-value.gender.gender-å¥³[data-v-3baad3fb] {\n  color: #ec4899;\n}\n.basic-info-item .info-value.origin[data-v-3baad3fb] {\n  color: var(--color-accent);\n}\n.basic-info-item .info-value.world[data-v-3baad3fb] {\n  color: var(--color-primary);\n}\n.basic-info-item .info-value.race[data-v-3baad3fb] {\n  color: var(--color-info);\n}\n.attributes-display[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n.attribute-group-title[data-v-3baad3fb] {\n  margin: 0 0 12px 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  white-space: nowrap;\n}\n.attributes-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(2, minmax(0, 1fr));\n  gap: 12px;\n}\n.attributes-grid.compact[data-v-3baad3fb] {\n  grid-template-columns: repeat(3, minmax(80px, 1fr));\n  gap: 8px;\n}\n.attribute-item[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 12px;\n  border-radius: 8px;\n  background: var(--color-surface-light);\n  min-height: 44px;\n  min-width: 80px; /* ç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´æ˜¾ç¤ºå®Œæ•´å±æ€§å */\n  width: 100%;\n  box-sizing: border-box;\n}\n.attribute-item.final[data-v-3baad3fb] {\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n  font-weight: 600;\n}\n.attribute-item.innate[data-v-3baad3fb] {\n  background: var(--color-surface-hover);\n}\n.attribute-item.acquired[data-v-3baad3fb] {\n  background: rgba(var(--color-border-rgb), 0.1);\n}\n.attribute-item.acquired.has-bonus[data-v-3baad3fb] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  border: 1px solid rgba(var(--color-success-rgb), 0.2);\n}\n.attr-name[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n  flex: 1 1 auto;\n  min-width: 0;\n  overflow: visible;\n  text-overflow: initial;\n  padding-right: 8px;\n}\n.attr-value[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n  white-space: nowrap;\n  overflow: visible;\n  text-overflow: initial;\n  flex-shrink: 0;\n  min-width: auto;\n}\n.attribute-item.acquired.has-bonus .attr-value[data-v-3baad3fb] {\n  color: var(--color-success);\n}\n.attribute-breakdown[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 20px;\n}\n\n/* åŠŸæ³•ç³»ç»Ÿäº¤äº’æ ·å¼ */\n.technique-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 6px;\n  transition: background-color 0.2s ease;\n}\n.technique-header[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n}\n.technique-main[data-v-3baad3fb] {\n  flex: 1;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.technique-toggle[data-v-3baad3fb] {\n  margin-left: 12px;\n}\n.toggle-icon[data-v-3baad3fb] {\n  transition: transform 0.3s ease;\n  color: var(--color-text-secondary);\n}\n.toggle-icon.rotated[data-v-3baad3fb] {\n  transform: rotate(180deg);\n}\n.technique-details[data-v-3baad3fb] {\n  margin-top: 12px;\n  padding: 16px;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n}\n.technique-description[data-v-3baad3fb] {\n  margin-bottom: 16px;\n}\n.technique-description p[data-v-3baad3fb] {\n  margin: 0;\n  color: var(--color-text);\n  line-height: 1.6;\n  font-style: italic;\n}\n.technique-effects[data-v-3baad3fb] {\n  border-top: 1px solid var(--color-border);\n  padding-top: 12px;\n}\n.effects-title[data-v-3baad3fb] {\n  margin: 0 0 8px 0;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.effects-list[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.effect-item[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.85rem;\n}\n.effect-label[data-v-3baad3fb] {\n  color: var(--color-text-secondary);\n  min-width: 80px;\n}\n.effect-value[data-v-3baad3fb] {\n  color: var(--color-success);\n  font-weight: 600;\n}\n.attribute-bonuses[data-v-3baad3fb] {\n  display: flex;\n  gap: 4px;\n  flex-wrap: wrap;\n}\n.bonus-tag[data-v-3baad3fb] {\n  padding: 2px 6px;\n  background: rgba(var(--color-success-rgb), 0.1);\n  color: var(--color-success);\n  border-radius: 4px;\n  font-size: 0.75rem;\n  border: 1px solid rgba(var(--color-success-rgb), 0.3);\n}\n.no-effects-text[data-v-3baad3fb] {\n  color: var(--color-text-secondary);\n  font-style: italic;\n  font-size: 0.85rem;\n  padding-top: 8px;\n}\n\n/* æŠ€èƒ½ç³»ç»Ÿæ ·å¼ */\n.skills-header[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: background-color 0.2s ease;\n}\n.skills-header[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n}\n.skills-count[data-v-3baad3fb] {\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  margin-left: auto;\n}\n.skills-preview[data-v-3baad3fb] {\n  margin-top: 12px;\n}\n.skills-list-compact[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n.skill-tag.compact[data-v-3baad3fb] {\n  padding: 4px 8px;\n  font-size: 0.8rem;\n}\n.more-skills[data-v-3baad3fb] {\n  color: var(--color-text-secondary);\n  font-style: italic;\n  font-size: 0.8rem;\n  padding: 4px 8px;\n}\n.skills-details[data-v-3baad3fb] {\n  margin-top: 16px;\n  padding: 16px;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n}\n.skill-category[data-v-3baad3fb] {\n  margin-bottom: 20px;\n}\n.skill-category[data-v-3baad3fb]:last-child {\n  margin-bottom: 0;\n}\n.category-title[data-v-3baad3fb] {\n  margin: 0 0 12px 0;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-primary);\n  padding-bottom: 6px;\n  border-bottom: 1px solid rgba(var(--color-primary-rgb), 0.2);\n}\n.skills-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\n  gap: 10px;\n}\n.skill-card[data-v-3baad3fb] {\n  padding: 12px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n}\n.skill-card[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.1);\n}\n.skill-card.skill-locked[data-v-3baad3fb] {\n  opacity: 0.6;\n  border-color: var(--color-border);\n  border-style: dashed;\n}\n.skill-card.skill-locked[data-v-3baad3fb]:hover {\n  border-color: var(--color-warning);\n}\n.skill-name[data-v-3baad3fb] {\n  font-weight: 600;\n  font-size: 0.9rem;\n  color: var(--color-text);\n  margin-bottom: 4px;\n}\n.skill-type[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin-bottom: 4px;\n}\n.skill-source[data-v-3baad3fb] {\n  font-size: 0.75rem;\n  color: var(--color-accent);\n  font-style: italic;\n}\n.skill-proficiency-mini[data-v-3baad3fb] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  margin-top: 4px;\n  padding: 2px 4px;\n  background: rgba(var(--color-info-rgb), 0.1);\n  border-radius: 4px;\n  width: fit-content;\n}\n.skill-unlock[data-v-3baad3fb] {\n  font-size: 0.75rem;\n  color: var(--color-warning);\n  font-style: italic;\n}\n.skill-status[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.unlock-icon[data-v-3baad3fb] {\n  color: var(--color-success);\n}\n\n/* ä¿®ç‚¼åŠŸæ³• */\n.cultivation-display[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n.technique-info[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.technique-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.technique-name[data-v-3baad3fb] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n}\n.technique-quality[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  padding: 4px 8px;\n  background: var(--color-surface-hover);\n  border-radius: 12px;\n}\n.technique-progress[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.progress-item[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.progress-label[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  min-width: 80px;\n}\n.progress-bar[data-v-3baad3fb] {\n  flex: 1;\n  height: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  overflow: hidden;\n  box-shadow: inset 0 1px 3px rgba(var(--color-border-rgb), 0.15);\n}\n.progress-fill[data-v-3baad3fb] {\n  height: 100%;\n  min-width: 2px; /* ç¡®ä¿å³ä½¿0%æ—¶ä¹Ÿæœ‰æœ€å°å®½åº¦æ˜¾ç¤º */\n  background: linear-gradient(90deg, var(--color-primary), var(--color-primary-hover));\n  transition: width 0.3s ease;\n  border-radius: 4px; /* ç¨å¾®åœ†æ¶¦çš„è§’ */\n}\n.progress-text[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n  min-width: 40px;\n}\n.learned-skills[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.skills-title[data-v-3baad3fb] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.skills-list[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.skill-tag[data-v-3baad3fb] {\n  padding: 6px 12px;\n  background: var(--color-info);\n  color: white;\n  border-radius: 16px;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n\n/* ä¸‰åƒå¤§é“ */\n.dao-list[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.dao-header-section[data-v-3baad3fb] {\n  margin-bottom: 12px;\n}\n.dao-summary[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 0;\n}\n.dao-count[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.dao-expand-btn[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  background: none;\n  border: 1px solid var(--color-border);\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.dao-expand-btn[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.dao-preview[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.dao-details[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.dao-item[data-v-3baad3fb] {\n  padding: 12px;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  /* ğŸ”¥ ç§»åŠ¨ç«¯ç‚¹å‡»ä¼˜åŒ– */\n  touch-action: manipulation;\n  -webkit-tap-highlight-color: rgba(var(--color-primary-rgb), 0.1);\n  user-select: none;\n}\n.dao-item[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.1);\n}\n.dao-item[data-v-3baad3fb]:active {\n  transform: scale(0.98);\n  background: var(--color-surface-hover);\n}\n.dao-item.compact[data-v-3baad3fb] {\n  padding: 8px 10px;\n}\n.dao-item.detailed[data-v-3baad3fb] {\n  padding: 16px;\n}\n.more-dao[data-v-3baad3fb] {\n  padding: 8px 12px;\n  text-align: center;\n  color: var(--color-text-secondary);\n  font-size: 0.8rem;\n  font-style: italic;\n  border: 1px dashed var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface-light);\n}\n.dao-stats[data-v-3baad3fb] {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(var(--color-border-rgb), 0.5);\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 8px;\n}\n.dao-stats .stat-item[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n}\n.dao-stats .stat-label[data-v-3baad3fb] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  margin-bottom: 2px;\n}\n.dao-stats .stat-value[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.dao-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.dao-name[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.dao-stage[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  background: var(--color-info);\n  color: white;\n  padding: 2px 8px;\n  border-radius: 10px;\n}\n.dao-progress[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.progress-bar.small[data-v-3baad3fb] {\n  height: 6px;\n}\n.progress-text.small[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  min-width: 35px;\n}\n\n/* äººé™…å…³ç³» */\n.relationships-summary[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.relationship-stats[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 12px;\n}\n.relationship-categories[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.category-item[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  background: var(--color-surface-light);\n  border-radius: 6px;\n}\n.category-name[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text);\n}\n.category-count[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-primary);\n}\n\n/* èƒŒåŒ…æ¦‚è§ˆ */\n.inventory-summary[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n.inventory-stats .stat-group[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.spirit-stones[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.stones-title[data-v-3baad3fb] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.stones-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n}\n.stone-item[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  border-radius: 6px;\n  font-size: 0.85rem;\n}\n.grade-common[data-v-3baad3fb] { background: rgba(128, 128, 128, 0.1);\n}\n.grade-rare[data-v-3baad3fb] { background: rgba(59, 130, 246, 0.1);\n}\n.grade-epic[data-v-3baad3fb] { background: rgba(147, 51, 234, 0.1);\n}\n.grade-legend[data-v-3baad3fb] { background: rgba(245, 158, 11, 0.1);\n}\n.stone-name[data-v-3baad3fb] {\n  color: var(--color-text);\n}\n.stone-count[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n/* å®—é—¨ä¿¡æ¯ */\n.sect-info[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n.sect-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.sect-name[data-v-3baad3fb] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.sect-type[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  padding: 4px 8px;\n  background: var(--color-primary);\n  color: white;\n  border-radius: 12px;\n}\n.sect-details[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.detail-row[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.detail-label[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n}\n.detail-value[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n/* ç©ºçŠ¶æ€ */\n.empty-state[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-3baad3fb] {\n  margin-bottom: 8px;\n  opacity: 0.6;\n  color: var(--color-text-muted);\n}\n\n/* å“è´¨é¢œè‰² */\n.border-quality-ç¥å“[data-v-3baad3fb], .text-quality-ç¥å“[data-v-3baad3fb] { color: #ef4444 !important;\n}\n.border-quality-æå“[data-v-3baad3fb], .text-quality-æå“[data-v-3baad3fb] { color: #f59e0b !important;\n}\n.border-quality-ä¸Šå“[data-v-3baad3fb], .text-quality-ä¸Šå“[data-v-3baad3fb] { color: #8b5cf6 !important;\n}\n.border-quality-ä¸­å“[data-v-3baad3fb], .text-quality-ä¸­å“[data-v-3baad3fb] { color: #3b82f6 !important;\n}\n.border-quality-ä¸‹å“[data-v-3baad3fb], .text-quality-ä¸‹å“[data-v-3baad3fb] { color: #10b981 !important;\n}\n.border-quality-å‡¡å“[data-v-3baad3fb], .text-quality-å‡¡å“[data-v-3baad3fb] { color: #84cc16 !important;\n}\n.border-quality-æœªçŸ¥[data-v-3baad3fb], .text-quality-æœªçŸ¥[data-v-3baad3fb] { color: var(--color-text) !important;\n}\n\n/* å®—é—¨å…³ç³»é¢œè‰² */\n.relationship-æ¶åŠ£[data-v-3baad3fb] { color: var(--color-danger) !important;\n}\n.relationship-ä¸€èˆ¬[data-v-3baad3fb] { color: var(--color-text-secondary) !important;\n}\n.relationship-è‰¯å¥½[data-v-3baad3fb] { color: var(--color-success) !important;\n}\n.relationship-äº²å¯†[data-v-3baad3fb] { color: var(--color-info) !important;\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 1400px) {\n.content-grid[data-v-3baad3fb] {\n    column-count: 2;\n    column-gap: 12px;\n    padding: 12px;\n}\n}\n@media (max-width: 1200px) {\n.content-grid[data-v-3baad3fb] {\n    column-count: 2;\n    column-gap: 12px;\n}\n.right-column[data-v-3baad3fb] {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n    gap: 12px;\n}\n.right-column .info-section[data-v-3baad3fb] {\n    margin-bottom: 0;\n}\n}\n@media (max-width: 900px) {\n.content-grid[data-v-3baad3fb] {\n    column-count: 1;\n    column-gap: 12px;\n    padding: 8px;\n}\n.right-column[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n    gap: 12px;\n}\n}\n@media (max-width: 640px) {\n.character-header[data-v-3baad3fb] {\n    flex-direction: column;\n    text-align: center;\n    gap: 12px;\n    padding: 16px;\n}\n.header-left[data-v-3baad3fb] { justify-content: center;\n}\n.header-right[data-v-3baad3fb] { width: 100%; justify-content: center; flex-wrap: wrap;\n}\n.compact-bar[data-v-3baad3fb] { width: 60%;\n}\n.character-details[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n    text-align: center;\n    gap: 8px;\n}\n.content-grid[data-v-3baad3fb] {\n    column-count: 1;\n    padding: 8px;\n}\n.right-column[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n}\n.info-section[data-v-3baad3fb] {\n    padding: 12px;\n    margin-bottom: 12px;\n    border-radius: 8px;\n}\n.attributes-grid[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n    gap: 8px;\n}\n.attributes-grid.compact[data-v-3baad3fb] {\n    grid-template-columns: repeat(2, minmax(70px, 1fr));\n    gap: 8px;\n}\n.attribute-breakdown[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n    gap: 12px;\n}\n.stones-grid[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n}\n\n\n  /* ç¡®ä¿æ–‡å­—æ˜¾ç¤ºå®Œæ•´ */\n.attr-name[data-v-3baad3fb], .attr-value[data-v-3baad3fb] {\n    white-space: nowrap;\n    overflow: visible;\n    text-overflow: initial;\n}\n.attribute-item[data-v-3baad3fb] {\n    min-height: 36px;\n    padding: 8px;\n  min-width: 70px; /* ç¡®ä¿ç§»åŠ¨ç«¯ä¹Ÿæœ‰è¶³å¤Ÿç©ºé—´ */\n    width: 100%;\n}\n.character-name[data-v-3baad3fb] {\n    font-size: 1.6rem;\n}\n.section-title[data-v-3baad3fb] {\n    font-size: 1rem;\n}\n}\n@media (max-width: 480px) {\n.character-details-wrapper[data-v-3baad3fb] {\n    font-size: 14px;\n}\n.character-header[data-v-3baad3fb] {\n    padding: 12px;\n    gap: 8px;\n}\n.header-main[data-v-3baad3fb] {\n    flex-direction: column;\n    align-items: flex-start;\n}\n.header-right[data-v-3baad3fb] {\n    width: 100%;\n}\n.header-stats[data-v-3baad3fb] {\n    padding-top: 8px;\n    gap: 8px;\n}\n.stat-item[data-v-3baad3fb] {\n    flex: 1 1 calc(50% - 4px);\n    min-width: 120px;\n}\n.gender-symbol[data-v-3baad3fb] {\n    width: 40px;\n    height: 40px;\n    font-size: 1.3rem;\n}\n.character-name[data-v-3baad3fb] {\n    font-size: 1.4rem;\n}\n.content-grid[data-v-3baad3fb] {\n    column-count: 1;\n    padding: 6px;\n}\n.info-section[data-v-3baad3fb] {\n    padding: 10px;\n    margin-bottom: 8px;\n    border-radius: 6px;\n}\n.section-title[data-v-3baad3fb] {\n    font-size: 0.9rem;\n    margin-bottom: 12px;\n}\n.attributes-grid.compact[data-v-3baad3fb] {\n    grid-template-columns: repeat(2, minmax(60px, 1fr));\n    gap: 6px;\n}\n.attribute-item[data-v-3baad3fb] {\n    padding: 6px;\n    min-height: 32px;\n    min-width: 60px; /* ç¡®ä¿è¶…å°å±å¹•ä¹Ÿæœ‰è¶³å¤Ÿç©ºé—´ */\n}\n.attr-name[data-v-3baad3fb] {\n    font-size: 0.8rem;\n}\n.attr-value[data-v-3baad3fb] {\n    font-size: 0.85rem;\n}\n.skill-card[data-v-3baad3fb] {\n    padding: 8px;\n}\n.dao-item[data-v-3baad3fb] {\n    padding: 8px;\n}\n.technique-progress[data-v-3baad3fb] {\n    gap: 8px;\n}\n.progress-item[data-v-3baad3fb] {\n    gap: 8px;\n}\n.progress-label[data-v-3baad3fb] {\n    min-width: 60px;\n    font-size: 0.8rem;\n}\n}\n\n/* è‡ªå®šä¹‰å¼¹çª—æ ·å¼ */\n.modal-overlay[data-v-3baad3fb] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  z-index: 3000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  backdrop-filter: blur(8px);\n  animation: overlay-fade-in-3baad3fb 0.3s ease-out;\n}\n@keyframes overlay-fade-in-3baad3fb {\nfrom { opacity: 0;\n}\nto { opacity: 1;\n}\n}\n.skill-modal[data-v-3baad3fb], .dao-modal[data-v-3baad3fb] {\n  background: var(--color-surface);\n  border-radius: 20px;\n  width: 100%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow: hidden;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);\n  animation: modal-slide-up-3baad3fb 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n@keyframes modal-slide-up-3baad3fb {\nfrom {\n    opacity: 0;\n    transform: translateY(40px) scale(0.95);\n}\nto {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n}\n}\n.modal-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 24px 28px 20px 28px;\n  border-bottom: 1px solid var(--color-border);\n  background: linear-gradient(135deg, var(--color-surface-light), rgba(var(--color-primary-rgb), 0.05));\n  position: relative;\n}\n.modal-header[data-v-3baad3fb]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 3px;\n  background: linear-gradient(90deg, var(--color-primary), var(--color-accent), var(--color-success));\n}\n.modal-header h3[data-v-3baad3fb] {\n  margin: 0;\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: var(--color-text);\n  background: linear-gradient(135deg, var(--color-text), var(--color-primary));\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n.modal-close-btn[data-v-3baad3fb] {\n  background: var(--color-surface-hover);\n  border: 1px solid var(--color-border);\n  padding: 8px;\n  border-radius: 10px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  transition: all 0.3s ease;\n}\n.modal-close-btn[data-v-3baad3fb]:hover {\n  background: var(--color-danger);\n  border-color: var(--color-danger);\n  color: white;\n  transform: scale(1.1);\n}\n.modal-content[data-v-3baad3fb] {\n  padding: 24px 28px 28px 28px;\n  overflow-y: auto;\n  max-height: calc(80vh - 80px);\n}\n\n/* æŠ€èƒ½è¯¦æƒ…æ ·å¼ */\n.skill-detail-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n  margin-bottom: 24px;\n}\n.skill-detail-item[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  background: var(--color-surface-light);\n  border-radius: 12px;\n  border: 1px solid var(--color-border);\n  transition: all 0.2s ease;\n}\n.skill-detail-item[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: rgba(var(--color-primary-rgb), 0.3);\n}\n.detail-label[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.detail-value[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.status-unlocked[data-v-3baad3fb] {\n  color: var(--color-success);\n  background: rgba(var(--color-success-rgb), 0.1);\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 0.85rem;\n}\n.status-locked[data-v-3baad3fb] {\n  color: var(--color-warning);\n  background: rgba(var(--color-warning-rgb), 0.1);\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 0.85rem;\n}\n.skill-description[data-v-3baad3fb] {\n  background: linear-gradient(135deg, var(--color-surface-light), rgba(var(--color-info-rgb), 0.05));\n  border-radius: 12px;\n  padding: 20px;\n  border-left: 4px solid var(--color-info);\n}\n.skill-description h4[data-v-3baad3fb] {\n  margin: 0 0 12px 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-info);\n}\n.skill-description p[data-v-3baad3fb] {\n  margin: 0;\n  color: var(--color-text);\n  line-height: 1.6;\n  font-style: italic;\n}\n\n/* å¤§é“è¯¦æƒ…æ ·å¼ */\n.dao-progress-section[data-v-3baad3fb] {\n  margin-bottom: 20px;\n  padding: 20px;\n  background: linear-gradient(135deg, var(--color-surface-light), rgba(var(--color-success-rgb), 0.05));\n  border-radius: 12px;\n  border: 1px solid rgba(var(--color-success-rgb), 0.2);\n}\n.dao-stage-info[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.stage-label[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.stage-value[data-v-3baad3fb] {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: var(--color-success);\n  background: rgba(var(--color-success-rgb), 0.1);\n  padding: 4px 12px;\n  border-radius: 16px;\n}\n.dao-progress-bar[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.progress-bar-bg[data-v-3baad3fb] {\n  flex: 1;\n  height: 12px;\n  background: var(--color-border);\n  border-radius: 6px;\n  overflow: hidden;\n  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n.progress-bar-fill[data-v-3baad3fb] {\n  height: 100%;\n  background: linear-gradient(90deg, var(--color-success), var(--color-info));\n  border-radius: 6px;\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 8px rgba(var(--color-success-rgb), 0.4);\n}\n.progress-text[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-success);\n  min-width: 45px;\n  text-align: right;\n}\n.dao-stats-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 16px;\n  margin-bottom: 20px;\n}\n.dao-stat-item[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 16px;\n  background: var(--color-surface-light);\n  border-radius: 12px;\n  border: 1px solid var(--color-border);\n  text-align: center;\n  transition: all 0.2s ease;\n}\n.dao-stat-item[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: rgba(var(--color-primary-rgb), 0.3);\n  transform: translateY(-2px);\n}\n.stat-label[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  margin-bottom: 8px;\n  font-weight: 500;\n}\n.stat-value[data-v-3baad3fb] {\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n.dao-description[data-v-3baad3fb] {\n  background: linear-gradient(135deg, var(--color-surface-light), rgba(var(--color-warning-rgb), 0.05));\n  border-radius: 12px;\n  padding: 20px;\n  border-left: 4px solid var(--color-warning);\n}\n.dao-description h4[data-v-3baad3fb] {\n  margin: 0 0 12px 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-warning);\n}\n.dao-description p[data-v-3baad3fb] {\n  margin: 0;\n  color: var(--color-text);\n  line-height: 1.6;\n  font-style: italic;\n}\n\n/* å“åº”å¼ä¼˜åŒ– */\n@media (max-width: 640px) {\n.skill-detail-grid[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n}\n.dao-stats-grid[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n}\n.modal-content[data-v-3baad3fb] {\n    padding: 20px 24px 24px 24px;\n}\n.modal-header[data-v-3baad3fb] {\n    padding: 20px 24px 16px 24px;\n}\n.modal-header h3[data-v-3baad3fb] {\n    font-size: 1.2rem;\n}\n}\n\n/* æ–°çš„ç»“æ„åŒ–æ•°æ®æ ·å¼ */\n.spirit-root-display[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  width: 100%;\n}\n.spirit-root-main[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  width: 100%;\n}\n.spirit-root-name-section[data-v-3baad3fb] {\n  display: flex;\n  justify-content: flex-start;\n}\n.spirit-root-badges[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  align-items: flex-end;\n}\n.badge-row[data-v-3baad3fb] {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n.spirit-root-grade[data-v-3baad3fb] {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  text-align: center;\n  min-width: 32px;\n}\n.spirit-root-grade.grade-ä¸‹å“[data-v-3baad3fb] {\n  background: linear-gradient(135deg, #8B5CF6, #A78BFA);\n  color: white;\n}\n.spirit-root-grade.grade-ä¸­å“[data-v-3baad3fb] {\n  background: linear-gradient(135deg, #3B82F6, #60A5FA);\n  color: white;\n}\n.spirit-root-grade.grade-ä¸Šå“[data-v-3baad3fb] {\n  background: linear-gradient(135deg, #10B981, #34D399);\n  color: white;\n}\n.spirit-root-grade.grade-æå“[data-v-3baad3fb] {\n  background: linear-gradient(135deg, #F59E0B, #FBBF24);\n  color: white;\n}\n.spirit-root-grade.grade-ç¥å“[data-v-3baad3fb] {\n  background: linear-gradient(135deg, #DC2626, #F87171);\n  color: white;\n}\n.spirit-root-grade.grade-ä»™å“[data-v-3baad3fb] { background: linear-gradient(135deg, #EF4444, #F87171); color: white;\n}\n.spirit-root-grade.grade-å¤©å“[data-v-3baad3fb] { background: linear-gradient(135deg, #EF4444, #F87171); color: white;\n}\n.spirit-root-grade.grade-åœ£å“[data-v-3baad3fb] {\n  background: linear-gradient(135deg, #EC4899, #F472B6);\n  color: white;\n}\n.spirit-root-quality[data-v-3baad3fb] {\n  font-size: 0.75rem;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-weight: 600;\n  text-align: center;\n  border: 1px solid;\n}\n.spirit-root-quality.quality-å˜å¼‚[data-v-3baad3fb] {\n  background: rgba(139, 69, 19, 0.1);\n  color: #8B4513;\n  border-color: #8B4513;\n}\n.spirit-root-quality.quality-å¤åˆ[data-v-3baad3fb] {\n  background: rgba(75, 85, 99, 0.1);\n  color: #4B5563;\n  border-color: #4B5563;\n}\n.spirit-root-quality.quality-ä¼ è¯´[data-v-3baad3fb] {\n  background: linear-gradient(135deg, #7C3AED, #A78BFA);\n  color: white;\n  border: none;\n}\n.spirit-root-desc[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-style: italic;\n  max-width: 200px;\n  text-align: right;\n  line-height: 1.4;\n  margin-top: 0.25rem;\n}\n.quality-ä»™å“[data-v-3baad3fb] { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: white;\n}\n.quality-å¤©å“[data-v-3baad3fb] { background: linear-gradient(135deg, #fbbf24, #f59e0b); color: white;\n}\n.quality-åœ°å“[data-v-3baad3fb] { background: linear-gradient(135deg, #a78bfa, #8b5cf6); color: white;\n}\n.quality-ç„å“[data-v-3baad3fb] { background: linear-gradient(135deg, #60a5fa, #3b82f6); color: white;\n}\n.quality-é»„å“[data-v-3baad3fb] { background: linear-gradient(135deg, #34d399, #10b981); color: white;\n}\n.quality-å‡¡å“[data-v-3baad3fb] { background: linear-gradient(135deg, #9ca3af, #6b7280); color: white;\n}\n\n/* ä¿®ç‚¼é€Ÿåº¦æ ·å¼ */\n.spirit-root-speed[data-v-3baad3fb] {\n  padding: 2px 8px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  border-radius: 12px;\n  background: linear-gradient(135deg, #10b981, #34d399);\n  color: white;\n  border: none;\n  margin-left: 4px;\n}\n\n/* çµæ ¹ç‰¹æ®Šæ•ˆæœæ ·å¼ */\n.spirit-root-effects[data-v-3baad3fb] {\n  margin-top: 8px;\n}\n.effects-title[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  margin-bottom: 4px;\n}\n.effects-list[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n}\n.effect-tag[data-v-3baad3fb] {\n  padding: 2px 6px;\n  font-size: 0.7rem;\n  background: rgba(59, 130, 246, 0.1);\n  color: var(--color-primary);\n  border-radius: 8px;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.talent-tags[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  align-items: flex-end;\n  flex-direction: column;\n}\n.talent-tag[data-v-3baad3fb] {\n  position: relative;\n  background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.1));\n  color: #9333ea;\n  padding: 4px 12px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: 500;\n  border: 1px solid rgba(147, 51, 234, 0.2);\n  cursor: help;\n}\n.talent-description-display[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin-top: 4px;\n  padding-left: 8px;\n  border-left: 2px solid var(--color-border);\n}\n\n/* æ–°çš„å¤©èµ‹ä¸çµæ ¹å¡ç‰‡æ ·å¼ */\n.talent-content[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n/* å¤©èµ‹å®¹å™¨æ ·å¼ */\n.talents-container[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.talents-container.no-talents[data-v-3baad3fb] {\n  opacity: 0.7;\n}\n.talent-item.no-talent[data-v-3baad3fb] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 12px;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  border: 1px dashed var(--color-border);\n}\n.talent-item.no-talent .talent-name[data-v-3baad3fb] {\n  color: var(--color-text-secondary);\n  font-style: italic;\n  font-size: 0.9rem;\n}\n.talent-tier-card[data-v-3baad3fb],\n.spirit-root-card[data-v-3baad3fb],\n.talents-card[data-v-3baad3fb] {\n  padding: 16px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  transition: all 0.2s ease;\n}\n.spirit-root-card[data-v-3baad3fb] {\n  cursor: pointer;\n}\n.spirit-root-card[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px rgba(var(--color-primary-rgb), 0.15);\n}\n.talent-tier-card[data-v-3baad3fb]:hover,\n.talents-card[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.1);\n}\n\n/* å¤©èµ„ç­‰çº§æè¿°æ ·å¼ */\n.tier-description[data-v-3baad3fb] {\n  margin-top: 12px;\n  padding: 10px;\n  background: var(--color-background);\n  border-radius: 8px;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  line-height: 1.6;\n  border-left: 3px solid var(--color-primary);\n}\n\n/* å¡ç‰‡å¤´éƒ¨æ ·å¼ */\n.tier-header[data-v-3baad3fb],\n.root-header[data-v-3baad3fb],\n.talents-header[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(var(--color-border-rgb), 0.3);\n}\n.tier-icon[data-v-3baad3fb],\n.root-icon[data-v-3baad3fb],\n.talents-icon[data-v-3baad3fb] {\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.tier-label[data-v-3baad3fb],\n.root-label[data-v-3baad3fb],\n.talents-label[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.click-hint[data-v-3baad3fb] {\n  margin-left: auto;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  opacity: 0.7;\n  transition: opacity 0.2s ease;\n}\n.spirit-root-card:hover .click-hint[data-v-3baad3fb] {\n  opacity: 1;\n}\n\n/* çµæ ¹å¡ç‰‡æ–°æ ·å¼ */\n.root-main-info[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  align-items: flex-start;\n}\n.root-name[data-v-3baad3fb] {\n  font-size: 1.1rem;\n  font-weight: 700;\n}\n.property-badges[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.prop-badge[data-v-3baad3fb] {\n  padding: 4px 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  border-radius: 999px;\n  border: 1px solid transparent;\n}\n.grade-badge[data-v-3baad3fb] {\n  color: white;\n  border: none;\n}\n.grade-å‡¡å“[data-v-3baad3fb] { background: #9ca3af;\n}\n.grade-ä¸‹å“[data-v-3baad3fb] { background: #10b981;\n}\n.grade-ä¸­å“[data-v-3baad3fb] { background: #3b82f6;\n}\n.grade-ä¸Šå“[data-v-3baad3fb] { background: #8b5cf6;\n}\n.grade-æå“[data-v-3baad3fb] { background: #f59e0b;\n}\n.grade-ç¥å“[data-v-3baad3fb] { background: #ef4444;\n}\n.grade-ç‰¹æ®Š[data-v-3baad3fb] { background: linear-gradient(45deg, #f59e0b, #ef4444);\n}\n.speed-badge[data-v-3baad3fb] {\n  background: rgba(var(--color-info-rgb), 0.1);\n  color: var(--color-info);\n  border-color: rgba(var(--color-info-rgb), 0.3);\n}\n.quality-badge[data-v-3baad3fb] {\n  background: rgba(var(--color-accent-rgb), 0.1);\n  color: var(--color-accent);\n  border-color: rgba(var(--color-accent-rgb), 0.3);\n}\n.root-description[data-v-3baad3fb] {\n  margin-top: 12px;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  font-style: italic;\n  line-height: 1.5;\n}\n.root-effects[data-v-3baad3fb] {\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid rgba(var(--color-border-rgb), 0.3);\n}\n.effects-tags[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n.root-effects .effect-tag[data-v-3baad3fb] {\n  padding: 4px 10px;\n  font-size: 0.8rem;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  color: var(--color-primary);\n  border-radius: 999px;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n}\n\n/* çµæ ¹å¼¹çª—æ–°æ ·å¼ */\n.detail-value.type-value[data-v-3baad3fb],\n.detail-value.grade-value[data-v-3baad3fb],\n.detail-value.speed-value[data-v-3baad3fb] {\n  padding: 6px 16px;\n  border-radius: 999px;\n  font-size: 1rem;\n  display: inline-block;\n  margin-top: 4px;\n}\n.detail-value.grade-value[data-v-3baad3fb] {\n  color: white;\n}\n.detail-value.speed-value[data-v-3baad3fb] {\n  background: rgba(var(--color-info-rgb), 0.1);\n  color: var(--color-info);\n  border: 1px solid rgba(var(--color-info-rgb), 0.3);\n}\n.talents-count[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin-left: auto;\n}\n\n/* å£°æœ›æ˜¾ç¤ºæ ·å¼ */\n.reputation-item .vital-label[data-v-3baad3fb] {\n  color: var(--color-warning);\n}\n.reputation-display[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n}\n.reputation-value[data-v-3baad3fb] {\n  padding: 4px 12px;\n  background: linear-gradient(135deg, rgba(var(--color-warning-rgb), 0.1), rgba(var(--color-warning-rgb), 0.05));\n  border: 1px solid rgba(var(--color-warning-rgb), 0.3);\n  border-radius: 16px;\n  font-weight: 600;\n  color: var(--color-warning);\n  font-size: 0.85rem;\n}\n.reputation-number[data-v-3baad3fb] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  opacity: 0.8;\n  margin-left: 4px;\n}\n\n/* çµæ ¹è¯¦æƒ…å¼¹çª—æ ·å¼ */\n.spirit-root-modal[data-v-3baad3fb] {\n  background: var(--color-surface);\n  border-radius: 20px;\n  width: 100%;\n  max-width: 600px;\n  max-height: 80vh;\n  overflow: hidden;\n  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);\n  animation: modal-slide-up-3baad3fb 0.4s cubic-bezier(0.16, 1, 0.3, 1);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n.spirit-root-detail-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 16px;\n  margin-bottom: 24px;\n}\n.detail-card[data-v-3baad3fb] {\n  padding: 16px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  text-align: center;\n  transition: all 0.2s ease;\n}\n.detail-card[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.1);\n}\n.detail-header[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid rgba(var(--color-border-rgb), 0.3);\n}\n.detail-icon[data-v-3baad3fb] {\n  font-size: 1.2rem;\n}\n.detail-title[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.detail-value[data-v-3baad3fb] {\n  font-weight: 700;\n  color: var(--color-primary);\n  font-size: 1.1rem;\n}\n.spirit-root-description[data-v-3baad3fb],\n.spirit-root-effects-section[data-v-3baad3fb],\n.advanced-details[data-v-3baad3fb] {\n  margin-bottom: 20px;\n}\n.spirit-root-description h4[data-v-3baad3fb],\n.spirit-root-effects-section h4[data-v-3baad3fb],\n.advanced-details h4[data-v-3baad3fb] {\n  margin: 0 0 12px 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-primary);\n}\n.spirit-root-description p[data-v-3baad3fb] {\n  margin: 0;\n  color: var(--color-text);\n  line-height: 1.6;\n  font-style: italic;\n}\n.effects-grid[data-v-3baad3fb] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n}\n.effects-grid .effect-tag-modal[data-v-3baad3fb] {\n  padding: 6px 14px;\n  background: rgba(var(--color-success-rgb), 0.1);\n  color: var(--color-success);\n  border-radius: 999px;\n  font-size: 0.85rem;\n  font-weight: 500;\n  border: 1px solid rgba(var(--color-success-rgb), 0.3);\n  transition: all 0.2s ease;\n}\n.effects-grid .effect-tag-modal[data-v-3baad3fb]:hover {\n  background: rgba(var(--color-success-rgb), 0.2);\n  transform: translateY(-1px);\n}\n.advanced-grid[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.advanced-item[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px 12px;\n  background: var(--color-surface-light);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.advanced-label[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n}\n.advanced-value[data-v-3baad3fb] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n/* å“åº”å¼ä¼˜åŒ– */\n@media (max-width: 640px) {\n.spirit-root-detail-grid[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n}\n.talent-content[data-v-3baad3fb] {\n    gap: 12px;\n}\n.talent-tier-card[data-v-3baad3fb],\n  .spirit-root-card[data-v-3baad3fb],\n  .talents-card[data-v-3baad3fb] {\n    padding: 12px;\n}\n.tier-value[data-v-3baad3fb] {\n    font-size: 1rem;\n    padding: 4px 12px;\n}\n.property-badges[data-v-3baad3fb] {\n    justify-content: center;\n    gap: 4px;\n}\n}\n.info-value.clickable[data-v-3baad3fb] {\n    cursor: pointer;\n    text-decoration: underline;\n    text-decoration-style: dashed;\n    text-underline-offset: 3px;\n    transition: color 0.2s, text-decoration-color 0.2s;\n}\n.info-value.clickable[data-v-3baad3fb]:hover {\n    text-decoration-style: solid;\n    color: var(--color-primary-hover);\n}\n.info-value.origin.clickable[data-v-3baad3fb] {\n    color: var(--color-accent);\n}\n.info-value.origin.clickable[data-v-3baad3fb]:hover {\n    color: var(--color-accent-hover);\n}\n\n/* ==================== å…¨æ–°é¡¶éƒ¨å¡ç‰‡è®¾è®¡ ==================== */\n.character-header-card[data-v-3baad3fb] {\n  position: relative;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  overflow: hidden;\n  margin-bottom: 16px;\n}\n.header-bg-decoration[data-v-3baad3fb] {\n  display: none;\n}\n.header-content[data-v-3baad3fb] {\n  position: relative;\n  display: grid;\n  grid-template-columns: auto 1fr auto;\n  gap: 20px;\n  padding: 20px;\n  align-items: center;\n}\n.profile-section[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 20px;\n}\n.avatar-wrapper[data-v-3baad3fb] {\n  position: relative;\n}\n.avatar-circle[data-v-3baad3fb] {\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, var(--color-primary), var(--color-info));\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n  position: relative;\n  z-index: 2;\n}\n.avatar-text[data-v-3baad3fb] {\n  color: #fff;\n  font-size: 1.5rem;\n  font-weight: 700;\n}\n.avatar-glow[data-v-3baad3fb] {\n  display: none;\n}\n.identity-info[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.character-title[data-v-3baad3fb] {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-text);\n  margin: 0;\n}\n.character-subtitle[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.subtitle-item[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.gender-badge[data-v-3baad3fb] {\n  padding: 4px 10px;\n  border-radius: 12px;\n  font-weight: 600;\n}\n.gender-badge.gender-ç”·[data-v-3baad3fb] {\n  background: rgba(59, 130, 246, 0.2);\n  color: #60a5fa;\n  border: 1px solid rgba(59, 130, 246, 0.3);\n}\n.gender-badge.gender-å¥³[data-v-3baad3fb] {\n  background: rgba(236, 72, 153, 0.2);\n  color: #f472b6;\n  border: 1px solid rgba(236, 72, 153, 0.3);\n}\n.subtitle-divider[data-v-3baad3fb] {\n  color: var(--color-text-muted);\n}\n.age-text[data-v-3baad3fb], .origin-text[data-v-3baad3fb], .race-text[data-v-3baad3fb] {\n  color: var(--color-text-secondary);\n}\n.core-stats-grid[data-v-3baad3fb] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 12px;\n  flex: 1;\n}\n.stat-card[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  padding: 10px 14px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  transition: all 0.2s ease;\n}\n.stat-card[data-v-3baad3fb]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n}\n.card-icon[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  flex-shrink: 0;\n}\n.realm-card .card-icon[data-v-3baad3fb] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.2));\n  color: #60a5fa;\n}\n.spirit-card .card-icon[data-v-3baad3fb] {\n  background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(147, 51, 234, 0.2));\n  color: #c084fc;\n}\n.location-card .card-icon[data-v-3baad3fb] {\n  background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(5, 150, 105, 0.2));\n  color: #34d399;\n}\n.reputation-card .card-icon[data-v-3baad3fb] {\n  background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(245, 158, 11, 0.2));\n  color: #fbbf24;\n}\n.card-content[data-v-3baad3fb] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  min-width: 0;\n}\n.card-label[data-v-3baad3fb] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.card-value[data-v-3baad3fb] {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--color-text);\n  line-height: 1.4;\n  word-break: break-all;\n}\n.location-value[data-v-3baad3fb] {\n  font-size: 0.9rem;\n  line-height: 1.3;\n}\n.cultivation-section[data-v-3baad3fb] {\n  min-width: 200px;\n}\n.cultivation-progress-card[data-v-3baad3fb] {\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  padding: 14px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n.progress-header[data-v-3baad3fb] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.progress-label[data-v-3baad3fb] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  font-weight: 600;\n}\n.progress-percentage[data-v-3baad3fb] {\n  font-size: 1rem;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n.progress-bar-container[data-v-3baad3fb] {\n  position: relative;\n}\n.progress-bar-bg[data-v-3baad3fb] {\n  height: 8px;\n  background: var(--color-border);\n  border-radius: 999px;\n  overflow: hidden;\n  position: relative;\n}\n.progress-bar-fill[data-v-3baad3fb] {\n  height: 100%;\n  background: linear-gradient(90deg, var(--color-primary), var(--color-info));\n  border-radius: 999px;\n  position: relative;\n  transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n}\n.progress-bar-shine[data-v-3baad3fb] {\n  display: none;\n}\n.progress-text[data-v-3baad3fb] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n.cultivation-status[data-v-3baad3fb] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 12px;\n  padding: 14px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n}\n.status-icon[data-v-3baad3fb] {\n  font-size: 1.25rem;\n  color: var(--color-primary);\n}\n.status-text[data-v-3baad3fb] {\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n}\n\n/* å“åº”å¼è®¾è®¡ */\n@media (max-width: 1200px) {\n.header-content[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n    gap: 20px;\n}\n.core-stats-grid[data-v-3baad3fb] {\n    grid-template-columns: repeat(2, 1fr);\n}\n.cultivation-section[data-v-3baad3fb] {\n    min-width: auto;\n}\n}\n@media (max-width: 768px) {\n.header-content[data-v-3baad3fb] {\n    padding: 20px;\n}\n.profile-section[data-v-3baad3fb] {\n    flex-direction: column;\n    text-align: center;\n    gap: 12px;\n}\n.character-subtitle[data-v-3baad3fb] {\n    justify-content: center;\n}\n.core-stats-grid[data-v-3baad3fb] {\n    grid-template-columns: 1fr;\n}\n.avatar-circle[data-v-3baad3fb] {\n    width: 64px;\n    height: 64px;\n}\n.avatar-text[data-v-3baad3fb] {\n    font-size: 1.5rem;\n}\n.character-title[data-v-3baad3fb] {\n    font-size: 1.5rem;\n}\n}\n  ",""]);const s=i},4765:e=>{"use strict";var t=String.prototype.replace,n=/%20/g,a="RFC3986";e.exports={default:a,formatters:{RFC1738:function(e){return t.call(e,n,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:a}},4803:(e,t,n)=>{"use strict";var a=n(8859),r=n(9675),o=function(e,t,n){for(var a,r=e;null!=(a=r.next);r=a)if(a.key===t)return r.next=a.next,n||(a.next=e.next,e.next=a),a};e.exports=function(){var e,t={assert:function(e){if(!t.has(e))throw new r("Side channel does not contain "+a(e))},delete:function(t){var n=e&&e.next,a=function(e,t){if(e)return o(e,t,!0)}(e,t);return a&&n&&n===a&&(e=void 0),!!a},get:function(t){return function(e,t){if(e){var n=o(e,t);return n&&n.value}}(e,t)},has:function(t){return function(e,t){return!!e&&!!o(e,t)}(e,t)},set:function(t,n){e||(e={next:void 0}),function(e,t,n){var a=o(e,t);a?a.value=n:e.next={key:t,next:e.next,value:n}}(e,t,n)}};return t}},4820:(e,t,n)=>{"use strict";function a(e){const t=[],n=[],a=[];try{return Array.isArray(e)?(e.forEach((e,r)=>{try{const o=function(e,t){const n=[],a=[];try{if(!e||"object"!=typeof e)return n.push(`æŒ‡ä»¤${t}: ä¸æ˜¯æœ‰æ•ˆçš„å¯¹è±¡`),{valid:!1,errors:n,warnings:a};const r=e;r.action||n.push(`æŒ‡ä»¤${t}: ç¼ºå°‘actionå­—æ®µ`),r.key||n.push(`æŒ‡ä»¤${t}: ç¼ºå°‘keyå­—æ®µ`);const o=["set","add","push","delete","pull"];r.action&&!o.includes(r.action)&&n.push(`æŒ‡ä»¤${t}: actionå€¼"${r.action}"æ— æ•ˆï¼Œå¿…é¡»æ˜¯: ${o.join(", ")}`),r.key&&"string"!=typeof r.key&&n.push(`æŒ‡ä»¤${t}: keyå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹`),"delete"!==r.action&&void 0===r.value&&n.push(`æŒ‡ä»¤${t}: ${r.action}æ“ä½œå¿…é¡»æä¾›valueå­—æ®µ`);const i=["action","key","value"],s=Object.keys(r).filter(e=>!i.includes(e));if(s.length>0&&a.push(`æŒ‡ä»¤${t}: åŒ…å«å¤šä½™å­—æ®µ: ${s.join(", ")}ï¼ˆè¿™äº›å­—æ®µä¼šè¢«è‡ªåŠ¨ç§»é™¤ï¼‰`),r.key&&void 0!==r.value)try{const e=function(e,t,n){const a=[];try{const r=["å…ƒæ•°æ®","è§’è‰²","ç¤¾äº¤","ä¸–ç•Œ","ç³»ç»Ÿ"];if(!r.some(t=>e===t||e.startsWith(`${t}.`)))return a.push(`keyå¿…é¡»ä»¥ ${r.join(" / ")} å¼€å¤´ï¼ˆV3çŸ­è·¯å¾„ï¼‰ï¼Œå½“å‰: ${e}`),a;const o=["æ ¹éª¨","çµæ€§","æ‚Ÿæ€§","æ°”è¿","é­…åŠ›","å¿ƒæ€§"];if("add"===n&&(["å…ƒæ•°æ®.æ—¶é—´.å¹´","å…ƒæ•°æ®.æ—¶é—´.æœˆ","å…ƒæ•°æ®.æ—¶é—´.æ—¥","å…ƒæ•°æ®.æ—¶é—´.å°æ—¶","å…ƒæ•°æ®.æ—¶é—´.åˆ†é’Ÿ","è§’è‰².å±æ€§.å£°æœ›","è§’è‰².å±æ€§.æ°”è¡€.å½“å‰","è§’è‰².å±æ€§.æ°”è¡€.ä¸Šé™","è§’è‰².å±æ€§.çµæ°”.å½“å‰","è§’è‰².å±æ€§.çµæ°”.ä¸Šé™","è§’è‰².å±æ€§.ç¥è¯†.å½“å‰","è§’è‰².å±æ€§.ç¥è¯†.ä¸Šé™","è§’è‰².å±æ€§.å¯¿å‘½.å½“å‰","è§’è‰².å±æ€§.å¯¿å‘½.ä¸Šé™","è§’è‰².èƒŒåŒ….çµçŸ³.ä¸‹å“","è§’è‰².èƒŒåŒ….çµçŸ³.ä¸­å“","è§’è‰².èƒŒåŒ….çµçŸ³.ä¸Šå“","è§’è‰².èƒŒåŒ….çµçŸ³.æå“"].includes(e)&&"number"!=typeof t&&a.push(`${e} ä½¿ç”¨ add æ—¶ value å¿…é¡»æ˜¯æ•°å­—ï¼Œå½“å‰ç±»å‹: ${typeof t}`),e.startsWith("è§’è‰².èº«ä»½.åå¤©å…­å¸.")&&o.some(t=>e.endsWith(`.${t}`))&&"number"!=typeof t&&a.push(`${e} ä½¿ç”¨ add æ—¶ value å¿…é¡»æ˜¯æ•°å­—ï¼Œå½“å‰ç±»å‹: ${typeof t}`)),"è§’è‰².å±æ€§.å¢ƒç•Œ"===e&&"set"===n)if("object"!=typeof t||null===t)a.push("è§’è‰².å±æ€§.å¢ƒç•Œ å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹");else{const e=t;void 0!==e.åç§°&&"string"!=typeof e.åç§°&&a.push("å¢ƒç•Œ.åç§°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹"),void 0!==e.é˜¶æ®µ&&"string"!=typeof e.é˜¶æ®µ&&a.push("å¢ƒç•Œ.é˜¶æ®µå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹"),void 0!==e.å½“å‰è¿›åº¦&&"number"!=typeof e.å½“å‰è¿›åº¦&&a.push("å¢ƒç•Œ.å½“å‰è¿›åº¦å¿…é¡»æ˜¯æ•°å­—ç±»å‹"),void 0!==e.ä¸‹ä¸€çº§æ‰€éœ€&&"number"!=typeof e.ä¸‹ä¸€çº§æ‰€éœ€&&a.push("å¢ƒç•Œ.ä¸‹ä¸€çº§æ‰€éœ€å¿…é¡»æ˜¯æ•°å­—ç±»å‹"),void 0!==e.çªç ´æè¿°&&"string"!=typeof e.çªç ´æè¿°&&a.push("å¢ƒç•Œ.çªç ´æè¿°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹")}if("è§’è‰².ä½ç½®"===e&&"set"===n)if("object"!=typeof t||null===t)a.push("è§’è‰².ä½ç½® å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹");else{const e=t;void 0!==e.æè¿°&&"string"!=typeof e.æè¿°&&a.push("ä½ç½®.æè¿°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹"),void 0!==e.x&&"number"!=typeof e.x&&a.push("ä½ç½®.xå¿…é¡»æ˜¯æ•°å­—ç±»å‹"),void 0!==e.y&&"number"!=typeof e.y&&a.push("ä½ç½®.yå¿…é¡»æ˜¯æ•°å­—ç±»å‹"),void 0!==e.åœ°å›¾ID&&"string"!=typeof e.åœ°å›¾ID&&a.push("ä½ç½®.åœ°å›¾IDå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹")}if("è§’è‰².æ•ˆæœ"===e&&"push"===n)if("object"!=typeof t||null===t)a.push("è§’è‰².æ•ˆæœ push çš„ value å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹");else{const e=t;void 0===e.ç±»å‹||["buff","debuff"].includes(e.ç±»å‹)||a.push(`çŠ¶æ€æ•ˆæœç±»å‹å¿…é¡»æ˜¯"buff"æˆ–"debuff"ï¼Œå½“å‰å€¼: ${e.ç±»å‹}`),void 0!==e.æŒç»­æ—¶é—´åˆ†é’Ÿ&&"number"!=typeof e.æŒç»­æ—¶é—´åˆ†é’Ÿ&&a.push("çŠ¶æ€æ•ˆæœ.æŒç»­æ—¶é—´åˆ†é’Ÿå¿…é¡»æ˜¯æ•°å­—ç±»å‹")}if("è§’è‰².èƒŒåŒ….ç‰©å“"===e&&"push"===n&&("object"==typeof t&&null!==t||a.push("æ¨é€åˆ° è§’è‰².èƒŒåŒ….ç‰©å“ çš„ç‰©å“å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹")),e.startsWith("è§’è‰².èƒŒåŒ….ç‰©å“.")&&"set"===n&&(3!==(e.match(/\./g)||[]).length||"object"==typeof t&&null!==t||a.push("ç‰©å“å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹")),e.startsWith("ç¤¾äº¤.å…³ç³».")&&2===(e.match(/\./g)||[]).length&&"set"===n&&"object"==typeof t&&null!==t){const e=t;!e.å¢ƒç•Œ||"object"==typeof e.å¢ƒç•Œ&&null!==e.å¢ƒç•Œ||a.push("NPCå¢ƒç•Œå¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),void 0===e.å¤©èµ‹||Array.isArray(e.å¤©èµ‹)||a.push("NPCå¤©èµ‹å¿…é¡»æ˜¯æ•°ç»„ç±»å‹")}if(e.startsWith("ç¤¾äº¤.å…³ç³».")&&e.endsWith(".å¢ƒç•Œ")&&"set"===n)if("object"!=typeof t||null===t)a.push("NPCå¢ƒç•Œå¿…é¡»æ˜¯å¯¹è±¡ç±»å‹");else{const e=t;void 0!==e.åç§°&&"string"!=typeof e.åç§°&&a.push("NPCå¢ƒç•Œ.åç§°å¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹"),void 0!==e.é˜¶æ®µ&&"string"!=typeof e.é˜¶æ®µ&&a.push("NPCå¢ƒç•Œ.é˜¶æ®µå¿…é¡»æ˜¯å­—ç¬¦ä¸²ç±»å‹")}return e.startsWith("è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.")&&"set"===n&&3===(e.match(/\./g)||[]).length&&("object"==typeof t&&null!==t||a.push("å¤§é“å¯¹è±¡å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹")),"ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨"===e&&"push"===n&&("object"==typeof t&&null!==t||a.push("ä»»åŠ¡å¯¹è±¡å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹")),a}catch(e){return console.error("[æŒ‡ä»¤éªŒè¯] validateValueTypeå‘ç”Ÿå¼‚å¸¸:",e),a.push(`éªŒè¯è¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸: ${e instanceof Error?e.message:String(e)}`),a}}(r.key,r.value,r.action);n.push(...e.map(e=>`æŒ‡ä»¤${t}: ${e}`))}catch(e){console.error("[æŒ‡ä»¤éªŒè¯] å€¼ç±»å‹æ£€æŸ¥å¼‚å¸¸:",e),a.push(`æŒ‡ä»¤${t}: å€¼ç±»å‹æ£€æŸ¥æ—¶å‘ç”Ÿå¼‚å¸¸ï¼Œå·²è·³è¿‡`)}return{valid:0===n.length,errors:n,warnings:a}}catch(e){return console.error("[æŒ‡ä»¤éªŒè¯] validateCommandå‘ç”Ÿä¸¥é‡å¼‚å¸¸:",e),n.push(`æŒ‡ä»¤${t}: éªŒè¯è¿‡ç¨‹å‘ç”Ÿä¸¥é‡å¼‚å¸¸`),{valid:!1,errors:n,warnings:a}}}(e,r);t.push(...o.errors),n.push(...o.warnings),o.errors.length>0&&a.push({command:e,errors:o.errors})}catch(e){console.error(`[æŒ‡ä»¤éªŒè¯] éªŒè¯æŒ‡ä»¤${r}æ—¶å‘ç”Ÿå¼‚å¸¸:`,e),t.push(`æŒ‡ä»¤${r}: éªŒè¯æ—¶å‘ç”Ÿå¼‚å¸¸`),n.push(`æŒ‡ä»¤${r}: å·²è·³è¿‡å¼‚å¸¸æŒ‡ä»¤`)}}),{valid:0===t.length,errors:t,warnings:n,invalidCommands:a}):{valid:!1,errors:["tavern_commandså¿…é¡»æ˜¯æ•°ç»„ç±»å‹"],warnings:[],invalidCommands:[]}}catch(e){return console.error("[æŒ‡ä»¤éªŒè¯] validateCommandså‘ç”Ÿä¸¥é‡å¼‚å¸¸:",e),{valid:!1,errors:["æŒ‡ä»¤æ•°ç»„éªŒè¯è¿‡ç¨‹å‘ç”Ÿä¸¥é‡å¼‚å¸¸"],warnings:[],invalidCommands:[]}}}function r(e){const{action:t,key:n,value:a}=e,r={action:t,key:n,value:a};return"delete"===t&&delete r.value,r}function o(e){return e.map(r)}n.d(t,{cleanCommands:()=>o,validateCommands:()=>a})},4901:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.sect-system-panel[data-v-5e39adc6] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  gap: 8px;\n  background: var(--color-background);\n}\n.sect-tabs[data-v-5e39adc6] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  padding: 6px 4px;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-surface);\n  border-radius: 8px;\n}\n.sect-tab[data-v-5e39adc6] {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 10px;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.sect-tab[data-v-5e39adc6]:hover {\n  color: var(--color-text);\n  border-color: rgba(var(--color-primary-rgb), 0.35);\n  background: var(--color-surface);\n}\n.sect-tab.active[data-v-5e39adc6] {\n  color: var(--color-primary);\n  border-color: rgba(var(--color-primary-rgb), 0.5);\n  background: rgba(var(--color-primary-rgb), 0.08);\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.15);\n}\n.sect-system-content[data-v-5e39adc6] {\n  flex: 1;\n  min-height: 0;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n@media (max-width: 768px) {\n.sect-tabs[data-v-5e39adc6] {\n    padding: 6px;\n}\n.sect-tab[data-v-5e39adc6] {\n    font-size: 0.75rem;\n    padding: 5px 8px;\n}\n}\n",""]);const s=i},5032:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.inventory-content[data-v-28a5e031] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n  overflow: hidden;\n}\n\n/* è‡ªå®šä¹‰ç¡®è®¤å¼¹çª—æ ·å¼ */\n.custom-confirm-overlay[data-v-28a5e031] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 2000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  backdrop-filter: blur(4px);\n}\n.custom-confirm-modal[data-v-28a5e031] {\n  background: var(--color-surface);\n  border-radius: 16px;\n  width: 100%;\n  max-width: 400px;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  animation: modal-appear-28a5e031 0.3s ease-out;\n  border: 1px solid var(--color-primary-border);\n}\n.confirm-header[data-v-28a5e031] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px 16px 24px;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-primary-light);\n}\n.confirm-header h3[data-v-28a5e031] {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.confirm-close-btn[data-v-28a5e031] {\n  background: none;\n  border: none;\n  padding: 4px;\n  border-radius: 6px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  transition: all 0.2s ease;\n}\n.confirm-close-btn[data-v-28a5e031]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n}\n.confirm-content[data-v-28a5e031] {\n  padding: 24px;\n}\n.confirm-content p[data-v-28a5e031] {\n  margin: 0;\n  color: var(--color-text);\n  line-height: 1.6;\n  white-space: pre-line;\n}\n.confirm-actions[data-v-28a5e031] {\n  display: flex;\n  gap: 12px;\n  padding: 16px 24px 24px 24px;\n  justify-content: flex-end;\n}\n.confirm-btn[data-v-28a5e031] {\n  padding: 10px 20px;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 80px;\n}\n.cancel-btn[data-v-28a5e031] {\n  background: var(--color-surface-hover);\n  color: var(--color-text-secondary);\n}\n.cancel-btn[data-v-28a5e031]:hover {\n  background: var(--color-surface-light);\n  color: var(--color-text);\n}\n.confirm-btn.confirm-btn[data-v-28a5e031] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.confirm-btn.confirm-btn[data-v-28a5e031]:hover {\n  background: var(--color-primary-hover);\n}\n\n/* ç§»åŠ¨ç«¯æ¨¡æ€æ¡† */\n.item-modal-overlay[data-v-28a5e031] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  backdrop-filter: blur(4px);\n}\n.item-modal[data-v-28a5e031] {\n  background: var(--color-surface);\n  border-radius: 16px;\n  width: 100%;\n  max-width: 400px;\n  max-height: 80vh;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  animation: modal-appear-28a5e031 0.3s ease-out;\n  border: 1px solid var(--color-primary-border);\n}\n@keyframes modal-appear-28a5e031 {\nfrom {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n}\n}\n.modal-header[data-v-28a5e031] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-primary-light);\n}\n.modal-header h3[data-v-28a5e031] {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n.modal-close-btn[data-v-28a5e031] {\n  background: none;\n  border: none;\n  padding: 4px;\n  border-radius: 6px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  transition: all 0.2s ease;\n}\n.modal-close-btn[data-v-28a5e031]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n}\n.modal-content[data-v-28a5e031] {\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n}\n.modal-icon-simple[data-v-28a5e031] {\n  width: 80px;\n  height: 80px;\n  border-radius: 12px;\n  border: 3px solid var(--color-border);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 16px;\n  background: var(--color-surface-hover);\n  font-weight: bold;\n  font-size: 14px;\n  color: var(--color-text);\n}\n.modal-info[data-v-28a5e031] {\n  width: 100%;\n}\n.modal-meta[data-v-28a5e031] {\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n  margin-bottom: 12px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.grade-display[data-v-28a5e031] {\n  font-size: 0.8rem;\n  font-weight: bold;\n  padding: 2px 6px;\n  border-radius: 4px;\n  border: 1px solid currentColor;\n  white-space: nowrap;\n}\n\n/* å“çº§é¢œè‰²æ ·å¼ */\n.grade-display.grade-broken[data-v-28a5e031] {\n  background: #6b7280;\n  color: white;\n  border-color: #6b7280;\n}\n.grade-display.grade-low[data-v-28a5e031] {\n  background: #10b981; /* ç»¿è‰² - ä¸‹å“ */\n  color: white;\n  border-color: #10b981;\n}\n.grade-display.grade-mid[data-v-28a5e031] {\n  background: #3b82f6; /* è“è‰² - ä¸­å“ */\n  color: white;\n  border-color: #3b82f6;\n}\n.grade-display.grade-high[data-v-28a5e031] {\n  background: #8b5cf6; /* ç´«è‰² - ä¸Šå“ */\n  color: white;\n  border-color: #8b5cf6;\n}\n.grade-display.grade-perfect[data-v-28a5e031] {\n  background: #f59e0b; /* é‡‘è‰² - æå“ */\n  color: white;\n  border-color: #f59e0b;\n}\n.grade-display.grade-unknown[data-v-28a5e031] {\n  background: #9ca3af;\n  color: white;\n  border-color: #9ca3af;\n}\n.modal-description[data-v-28a5e031] {\n  color: var(--color-text);\n  line-height: 1.6;\n  margin-bottom: 16px;\n}\n.modal-attributes[data-v-28a5e031] {\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  padding: 12px;\n  margin-top: 16px;\n}\n.modal-attributes h4[data-v-28a5e031] {\n  margin: 0 0 8px 0;\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  font-weight: 600;\n}\n.modal-actions[data-v-28a5e031] {\n  display: flex;\n  gap: 8px;\n  padding: 16px 20px;\n  border-top: 1px solid var(--color-border);\n}\n\n/* ä¸»å†…å®¹åŒºåŸŸ */\n.inventory-content[data-v-28a5e031] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n/* æ ‡ç­¾å¯¼èˆª */\n.tabs-header[data-v-28a5e031] {\n  background: var(--color-surface);\n  border-bottom: 1px solid var(--color-border);\n  padding: 16px;\n  flex-shrink: 0;\n  border-radius: 12px 12px 0 0;\n}\n.tabs-nav[data-v-28a5e031] {\n  display: flex;\n  gap: 4px;\n  margin-bottom: 16px;\n}\n.tab-btn[data-v-28a5e031] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 10px 16px;\n  border: none;\n  border-radius: 8px;\n  background: transparent;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-weight: 500;\n}\n.tab-btn[data-v-28a5e031]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n}\n.tab-btn.active[data-v-28a5e031] {\n  background: var(--color-primary);\n  color: white;\n}\n\n/* å·¥å…·æ  */\n.tools-section[data-v-28a5e031] {\n  display: flex;\n  gap: 12px;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.search-box[data-v-28a5e031] {\n  position: relative;\n  flex: 1;\n  min-width: 150px;\n}\n.search-icon[data-v-28a5e031] {\n  position: absolute;\n  left: 12px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: var(--color-text-secondary);\n  z-index: 1;\n}\n.search-box input[data-v-28a5e031] {\n  width: 100%;\n  padding: 10px 12px 10px 40px;\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  background: var(--color-background);\n  font-size: 14px;\n  transition: all 0.2s ease;\n}\n.search-box input[data-v-28a5e031]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);\n}\n.filter-buttons[data-v-28a5e031] {\n  display: flex;\n  gap: 8px;\n}\n.filter-select[data-v-28a5e031] {\n  padding: 8px 12px;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text);\n  font-size: 13px;\n  min-width: 80px;\n}\n.filter-select option[data-v-28a5e031] {\n  background: var(--color-surface);\n  color: var(--color-text);\n}\n.refresh-btn[data-v-28a5e031] {\n  padding: 8px;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  min-width: 32px;\n  height: 32px;\n}\n.refresh-btn[data-v-28a5e031]:hover:not(:disabled) {\n  background: var(--color-surface-hover);\n  color: var(--color-primary);\n  border-color: var(--color-primary);\n}\n.refresh-btn[data-v-28a5e031]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.refresh-btn .spinning[data-v-28a5e031] {\n  animation: spin-28a5e031 1s linear infinite;\n}\n\n/* æ ‡ç­¾å†…å®¹ */\n.tab-content[data-v-28a5e031] {\n  flex: 1;\n  overflow: hidden;\n}\n\n/* ç‰©å“æ ‡ç­¾ */\n.items-tab[data-v-28a5e031] {\n  display: flex;\n  height: 100%;\n}\n.items-grid[data-v-28a5e031] {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n  gap: 18px;\n  align-content: start;\n  background: var(--color-background);\n}\n.grid-placeholder[data-v-28a5e031] {\n  grid-column: 1 / -1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 40px;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n.filter-tip[data-v-28a5e031] {\n  font-size: 0.8rem;\n  color: var(--color-text-muted);\n  margin-top: 8px;\n  opacity: 0.8;\n}\n.loading-spinner[data-v-28a5e031] {\n  width: 32px;\n  height: 32px;\n  border: 3px solid var(--color-border);\n  border-top: 3px solid var(--color-primary);\n  border-radius: 50%;\n  animation: spin-28a5e031 1s linear infinite;\n  margin-bottom: 16px;\n}\n@keyframes spin-28a5e031 {\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* ç‰©å“å¡ç‰‡ - é‡æ–°è®¾è®¡ç¾è§‚å¸ƒå±€ */\n.item-card[data-v-28a5e031] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 8px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: column;\n  height: 140px;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n.item-card[data-v-28a5e031]:hover {\n  border-color: var(--color-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  background: var(--color-surface-light);\n}\n\n/* é¡¶éƒ¨åŒºåŸŸï¼šå›¾æ ‡å’Œå“è´¨ */\n.item-top-section[data-v-28a5e031] {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: flex-start;\n  margin-bottom: 8px;\n}\n.item-icon-area[data-v-28a5e031] {\n  width: 48px;\n  height: 48px;\n  border-radius: 8px;\n  border: 2px solid var(--color-border);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-background);\n  position: relative;\n}\n.item-type-icon[data-v-28a5e031] {\n  font-size: 24px;\n  opacity: 0.9;\n}\n.item-quality-badge[data-v-28a5e031] {\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  font-size: 10px;\n  font-weight: bold;\n  padding: 3px 6px;\n  border-radius: 6px;\n  background: var(--color-surface);\n  border: 1px solid currentColor;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  z-index: 2;\n  min-width: 20px;\n  text-align: center;\n}\n\n/* æ•°é‡æ˜¾ç¤º - æ›´å¤§æ›´æ˜¾çœ¼ */\n.item-quantity-display[data-v-28a5e031] {\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  /* ä»…æ”¹å˜æ–‡å­—é¢œè‰²ï¼Œä¸æ”¹èƒŒæ™¯ */\n  background: transparent;\n  color: var(--color-accent, #7c4dff);\n  font-size: 12px;\n  font-weight: 700;\n  padding: 0;\n  border-radius: 0;\n  box-shadow: none;\n  border: none;\n  z-index: 4;\n  min-width: 0;\n  text-align: right;\n}\n\n/* åç§°åŒºåŸŸ */\n.item-name-section[data-v-28a5e031] {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 0 4px;\n}\n.item-name[data-v-28a5e031] {\n  font-size: 12px;\n  font-weight: 600;\n  line-height: 1.3;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  word-break: break-word;\n}\n\n/* åº•éƒ¨åŒºåŸŸï¼šç±»å‹å’Œå“çº§ */\n.item-bottom-section[data-v-28a5e031] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 4px;\n  margin-top: auto;\n  padding-top: 4px;\n}\n.item-type-label[data-v-28a5e031] {\n  font-size: 9px;\n  color: var(--color-text-secondary);\n  background: var(--color-background);\n  padding: 2px 6px;\n  border-radius: 4px;\n  border: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.item-grade-info[data-v-28a5e031] {\n  font-size: 8px;\n  font-weight: bold;\n  padding: 2px 4px;\n  border-radius: 4px;\n  border: 1px solid currentColor;\n  background: rgba(255, 255, 255, 0.9);\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  flex-shrink: 0;\n}\n\n/* å“çº§æ ·å¼ - ç®€åŒ–ç‰ˆæœ¬ */\n.grade-broken[data-v-28a5e031] {\n  background: #6b7280;\n  color: white;\n}\n.grade-low[data-v-28a5e031] {\n  background: #10b981; /* ç»¿è‰² - ä¸‹å“ */\n  color: white;\n}\n.grade-mid[data-v-28a5e031] {\n  background: #3b82f6; /* è“è‰² - ä¸­å“ */\n  color: white;\n}\n.grade-high[data-v-28a5e031] {\n  background: #8b5cf6; /* ç´«è‰² - ä¸Šå“ */\n  color: white;\n}\n.grade-perfect[data-v-28a5e031] {\n  background: #f59e0b; /* é‡‘è‰² - æå“ */\n  color: white;\n}\n.grade-unknown[data-v-28a5e031] {\n  background: #9ca3af;\n  color: white;\n}\n\n/* çµçŸ³å“è´¨æ ·å¼ - é¢œè‰²é€’å¢ */\n.grade-common[data-v-28a5e031] {\n  background: linear-gradient(135deg, #9ca3af, #6b7280);\n  border-color: #9ca3af;\n  color: white;\n  box-shadow: 0 2px 8px rgba(156, 163, 175, 0.3);\n}\n.grade-rare[data-v-28a5e031] {\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  border-color: #3b82f6;\n  color: white;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);\n}\n.grade-epic[data-v-28a5e031] {\n  background: linear-gradient(135deg, #8b5cf6, #7c3aed);\n  border-color: #8b5cf6;\n  color: white;\n  box-shadow: 0 2px 8px rgba(139, 92, 246, 0.4);\n}\n.grade-legend[data-v-28a5e031] {\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  border-color: #f59e0b;\n  color: white;\n  box-shadow: 0 2px 12px rgba(245, 158, 11, 0.5);\n}\n\n/* æ¡Œé¢ç«¯è¯¦æƒ…ä¾§è¾¹æ  */\n.item-details-sidebar[data-v-28a5e031] {\n  width: 320px;\n  border-left: 1px solid var(--color-border);\n  background: var(--color-surface);\n  display: flex;\n  flex-direction: column;\n}\n.details-content[data-v-28a5e031] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.details-header[data-v-28a5e031] {\n  padding: 20px;\n  border-bottom: 1px solid var(--color-border);\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.details-icon-large[data-v-28a5e031] {\n  width: 60px;\n  height: 60px;\n  border-radius: 10px;\n  border: 2px solid var(--color-border);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-background);\n  flex-shrink: 0;\n  font-weight: bold;\n  font-size: 12px;\n  color: var(--color-text);\n}\n.details-title-area h3[data-v-28a5e031] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n}\n.details-meta[data-v-28a5e031] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  margin-top: 4px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  flex-wrap: wrap;\n}\n.details-body[data-v-28a5e031] {\n  flex: 1;\n  padding: 20px;\n  overflow-y: auto;\n}\n.details-description[data-v-28a5e031] {\n  color: var(--color-text);\n  line-height: 1.6;\n  margin-bottom: 20px;\n}\n.details-attributes h4[data-v-28a5e031] {\n  margin: 0 0 12px 0;\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  font-weight: 600;\n}\n.details-placeholder[data-v-28a5e031] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n.details-actions[data-v-28a5e031] {\n  padding: 16px 20px;\n  border-top: 1px solid var(--color-border);\n  display: flex;\n  gap: 8px;\n}\n\n/* çµçŸ³æ ‡ç­¾ */\n.currency-tab[data-v-28a5e031] {\n  padding: 24px;\n  overflow-y: auto;\n}\n.currency-grid[data-v-28a5e031] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n  gap: 16px;\n  width: 100%;\n}\n.currency-card[data-v-28a5e031] {\n  background: var(--color-surface);\n  border: 2px solid var(--color-border);\n  border-radius: 12px;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  transition: all 0.3s ease;\n  cursor: default;\n  position: relative;\n  overflow: hidden;\n}\n.currency-card[data-v-28a5e031]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 4px;\n  opacity: 0.8;\n  transition: opacity 0.3s ease;\n}\n.currency-card.grade-common[data-v-28a5e031]::before {\n  background: linear-gradient(90deg, #9ca3af, #6b7280);\n}\n.currency-card.grade-rare[data-v-28a5e031]::before {\n  background: linear-gradient(90deg, #3b82f6, #2563eb);\n}\n.currency-card.grade-epic[data-v-28a5e031]::before {\n  background: linear-gradient(90deg, #8b5cf6, #7c3aed);\n}\n.currency-card.grade-legend[data-v-28a5e031]::before {\n  background: linear-gradient(90deg, #f59e0b, #d97706);\n}\n.currency-card[data-v-28a5e031]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);\n}\n.currency-card[data-v-28a5e031]:hover::before {\n  opacity: 1;\n}\n.currency-card-top[data-v-28a5e031] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.currency-icon[data-v-28a5e031] {\n  flex-shrink: 0;\n  color: var(--color-text-secondary);\n  transition: color 0.3s ease;\n}\n\n/* çµçŸ³å›¾æ ‡é¢œè‰² */\n.icon-grade-common[data-v-28a5e031] {\n  color: #9ca3af;\n}\n.icon-grade-rare[data-v-28a5e031] {\n  color: #3b82f6;\n}\n.icon-grade-epic[data-v-28a5e031] {\n  color: #8b5cf6;\n}\n.icon-grade-legend[data-v-28a5e031] {\n  color: #f59e0b;\n}\n.currency-info[data-v-28a5e031] {\n  flex: 1;\n}\n.currency-amount[data-v-28a5e031] {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-text);\n  margin-bottom: 4px;\n}\n.currency-label[data-v-28a5e031] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n}\n\n/* å…‘æ¢åŠŸèƒ½ */\n.currency-exchange[data-v-28a5e031] {\n  display: flex;\n  gap: 8px;\n  margin-top: 8px;\n}\n.exchange-btn[data-v-28a5e031] {\n  flex: 1;\n  padding: 6px 12px;\n  border: 1px solid var(--color-primary);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-primary);\n  font-size: 0.8rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  position: relative;\n  overflow: hidden;\n}\n.exchange-btn[data-v-28a5e031]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s ease;\n}\n.exchange-btn[data-v-28a5e031]:hover:not(:disabled) {\n  background: var(--color-primary);\n  color: white;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n.exchange-btn[data-v-28a5e031]:hover:not(:disabled)::before {\n  left: 100%;\n}\n.exchange-btn.down[data-v-28a5e031] {\n  border-color: var(--color-warning);\n  color: var(--color-warning);\n}\n.exchange-btn.down[data-v-28a5e031]:hover:not(:disabled) {\n  background: var(--color-warning);\n  color: white;\n  box-shadow: 0 4px 12px rgba(var(--color-warning-rgb), 0.3);\n}\n.exchange-btn[data-v-28a5e031]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n.exchange-btn[data-v-28a5e031]:active:not(:disabled) {\n  transform: translateY(0) scale(0.98);\n}\n\n/* æŒ‰é’®æ ·å¼ */\n.action-btn[data-v-28a5e031] {\n  flex: 1;\n  padding: 12px;\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.action-btn[data-v-28a5e031]:hover {\n  background: var(--color-surface-light);\n  transform: translateY(-1px);\n}\n.use-btn[data-v-28a5e031] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n.use-btn[data-v-28a5e031]:hover {\n  background: var(--color-primary-hover);\n}\n.discard-btn[data-v-28a5e031] {\n  background: var(--color-error);\n  border-color: var(--color-error);\n  color: white;\n}\n.discard-btn[data-v-28a5e031]:hover {\n  background: var(--color-error-hover);\n}\n\n/* å±æ€§æ–‡æœ¬æ˜¾ç¤º */\n.attribute-text[data-v-28a5e031] {\n  background: var(--color-background);\n  border-radius: 6px;\n  padding: 12px;\n  font-size: 0.9rem;\n  color: var(--color-text);\n  line-height: 1.4;\n  word-break: break-all;\n}\n\n/* åŠŸæ³•æ•ˆæœæ ·å¼ */\n.skill-effects[data-v-28a5e031] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.effect-item[data-v-28a5e031] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 0;\n}\n.effect-label[data-v-28a5e031] {\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  min-width: 80px;\n}\n.effect-value[data-v-28a5e031] {\n  color: var(--color-success);\n  font-weight: 500;\n}\n.special-abilities[data-v-28a5e031] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n}\n.ability-tag[data-v-28a5e031] {\n  background: var(--color-primary);\n  color: white;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n\n/* åŠŸæ³•æŠ€èƒ½æ ·å¼ */\n.technique-skills[data-v-28a5e031] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.skill-item[data-v-28a5e031] {\n  background: var(--color-background);\n  border-radius: 8px;\n  padding: 12px;\n  border: 1px solid var(--color-border);\n}\n.skill-header[data-v-28a5e031] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n.skill-name[data-v-28a5e031] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.skill-type[data-v-28a5e031] {\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n.skill-type.type-æ”»å‡»[data-v-28a5e031] {\n  background: var(--color-error);\n  color: white;\n}\n.skill-type.type-é˜²å¾¡[data-v-28a5e031] {\n  background: var(--color-info);\n  color: white;\n}\n.skill-type.type-è¾…åŠ©[data-v-28a5e031] {\n  background: var(--color-success);\n  color: white;\n}\n.skill-type.type-ç§»åŠ¨[data-v-28a5e031] {\n  background: var(--color-warning);\n  color: white;\n}\n.skill-type.type-å…¶ä»–[data-v-28a5e031] {\n  background: var(--color-text-secondary);\n  color: white;\n}\n.skill-description[data-v-28a5e031] {\n  color: var(--color-text);\n  font-size: 0.9rem;\n  line-height: 1.4;\n  margin-bottom: 6px;\n}\n.skill-unlock-requirement[data-v-28a5e031] {\n  font-size: 0.75rem;\n  color: var(--color-warning);\n  font-weight: 600;\n  padding: 2px 8px;\n  background: rgba(var(--color-warning-rgb), 0.1);\n  border-radius: 4px;\n  margin-left: auto;\n}\n.skill-cost[data-v-28a5e031] {\n  color: var(--color-info);\n  font-size: 0.8rem;\n  font-weight: 500;\n  margin-top: 4px;\n}\n.skill-unlock[data-v-28a5e031] {\n  color: var(--color-text-secondary);\n  font-size: 0.8rem;\n}\n.cultivate-btn[data-v-28a5e031] {\n  background: var(--color-info);\n  border-color: var(--color-info);\n  color: white;\n}\n.cultivate-btn[data-v-28a5e031]:hover {\n  background: var(--color-info-hover);\n}\n.equip-btn[data-v-28a5e031] {\n  background: var(--color-success);\n  border-color: var(--color-success);\n  color: white;\n}\n.equip-btn[data-v-28a5e031]:hover {\n  background: var(--color-success-hover);\n}\n\n/* å“è´¨æ ·å¼ç³»ç»Ÿ - å†…è”æ–‡å­—æ ·å¼ï¼Œä¸å¡«å……æ•´è¡Œ */\n/* ç¥é˜¶ - æ·±çº¢è‰²ï¼ˆæœ€é«˜å“è´¨ï¼‰ */\n.text-quality-ç¥[data-v-28a5e031],\n.text-quality-ç¥é˜¶[data-v-28a5e031] {\n  color: white !important;\n  background: linear-gradient(135deg, #dc2626, #b91c1c) !important;\n  border: 1px solid #dc2626 !important;\n  box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3) !important;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;\n  padding: 2px 6px !important;\n  border-radius: 4px !important;\n  display: inline !important;\n  white-space: nowrap !important;\n}\n\n/* ä»™é˜¶ - ç²‰ç´«è‰² */\n.text-quality-ä»™[data-v-28a5e031],\n.text-quality-ä»™é˜¶[data-v-28a5e031] {\n  color: white !important;\n  background: linear-gradient(135deg, #ec4899, #db2777) !important;\n  border: 1px solid #ec4899 !important;\n  box-shadow: 0 2px 8px rgba(236, 72, 153, 0.3) !important;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;\n  padding: 2px 6px !important;\n  border-radius: 4px !important;\n  display: inline !important;\n  white-space: nowrap !important;\n}\n\n/* å¤©é˜¶ - è“è‰² */\n.text-quality-å¤©[data-v-28a5e031],\n.text-quality-å¤©é˜¶[data-v-28a5e031] {\n  color: white !important;\n  background: linear-gradient(135deg, #3b82f6, #2563eb) !important;\n  border: 1px solid #3b82f6 !important;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3) !important;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;\n  padding: 2px 6px !important;\n  border-radius: 4px !important;\n  display: inline !important;\n  white-space: nowrap !important;\n}\n\n/* åœ°é˜¶ - æ©™è‰² */\n.text-quality-åœ°[data-v-28a5e031],\n.text-quality-åœ°é˜¶[data-v-28a5e031] {\n  color: white !important;\n  background: linear-gradient(135deg, #f59e0b, #d97706) !important;\n  border: 1px solid #f59e0b !important;\n  box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3) !important;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;\n  padding: 2px 6px !important;\n  border-radius: 4px !important;\n  display: inline !important;\n  white-space: nowrap !important;\n}\n\n/* ç„é˜¶ - ç´«è‰² */\n.text-quality-ç„[data-v-28a5e031],\n.text-quality-ç„é˜¶[data-v-28a5e031] {\n  color: white !important;\n  background: linear-gradient(135deg, #8b5cf6, #7c3aed) !important;\n  border: 1px solid #8b5cf6 !important;\n  box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3) !important;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;\n  padding: 2px 6px !important;\n  border-radius: 4px !important;\n  display: inline !important;\n  white-space: nowrap !important;\n}\n\n/* é»„é˜¶ - é‡‘é»„è‰² */\n.text-quality-é»„[data-v-28a5e031],\n.text-quality-é»„é˜¶[data-v-28a5e031] {\n  color: white !important;\n  background: linear-gradient(135deg, #eab308, #ca8a04) !important;\n  border: 1px solid #eab308 !important;\n  box-shadow: 0 2px 8px rgba(234, 179, 8, 0.3) !important;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;\n  padding: 2px 6px !important;\n  border-radius: 4px !important;\n  display: inline !important;\n  white-space: nowrap !important;\n}\n\n/* å‡¡é˜¶ - ç°è‰²ï¼ˆæœ€ä½å“è´¨ï¼‰ */\n.text-quality-å‡¡[data-v-28a5e031],\n.text-quality-å‡¡é˜¶[data-v-28a5e031] {\n  color: white !important;\n  background: linear-gradient(135deg, #6b7280, #4b5563) !important;\n  border: 1px solid #6b7280 !important;\n  box-shadow: 0 2px 8px rgba(107, 114, 128, 0.3) !important;\n  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;\n  padding: 2px 6px !important;\n  border-radius: 4px !important;\n  display: inline !important;\n  white-space: nowrap !important;\n}\n\n/* è¾¹æ¡†æ ·å¼ä¹Ÿéœ€è¦ä¿®å¤ */\n.border-quality-ç¥[data-v-28a5e031] {\n  border-color: #dc2626 !important;\n}\n.border-quality-ä»™[data-v-28a5e031] {\n  border-color: #ec4899 !important;\n}\n.border-quality-å¤©[data-v-28a5e031] {\n  border-color: #3b82f6 !important;\n}\n.border-quality-åœ°[data-v-28a5e031] {\n  border-color: #f59e0b !important;\n}\n.border-quality-ç„[data-v-28a5e031] {\n  border-color: #8b5cf6 !important;\n}\n.border-quality-å‡¡[data-v-28a5e031] {\n  border-color: #6b7280 !important;\n}\n.border-quality-å‡¡[data-v-28a5e031] {\n  border-color: #6b7280 !important;\n}\n\n/* è£…å¤‡æ ‡ç­¾é¡µæ ·å¼ */\n.equipment-tab[data-v-28a5e031] {\n  height: 100%;\n  overflow-y: auto;\n}\n.item-grade[data-v-28a5e031] {\n  border-radius: 5px;\n  border: 2px solid #9ca3af;\n}\n.equipment-content[data-v-28a5e031] {\n  padding: 20px;\n}\n.equipment-header[data-v-28a5e031] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 24px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid var(--color-border);\n}\n.equipment-title[data-v-28a5e031] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin: 0;\n  font-size: 1.4rem;\n  font-weight: 700;\n  color: var(--color-text);\n}\n.equipment-stats[data-v-28a5e031] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n}\n.equipment-stats .stat-item[data-v-28a5e031] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n}\n.equipment-stats .stat-label[data-v-28a5e031] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin-bottom: 4px;\n}\n.equipment-stats .stat-value[data-v-28a5e031] {\n  font-size: 1.1rem;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n\n/* è£…å¤‡ç½‘æ ¼ */\n.equipment-grid[data-v-28a5e031] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));\n  gap: 20px;\n}\n.equipment-slot[data-v-28a5e031] {\n  background: var(--color-surface);\n  border: 2px solid var(--color-border);\n  border-radius: 12px;\n  padding: 16px;\n  transition: all 0.3s ease;\n  min-height: 160px;\n  position: relative;\n}\n.equipment-slot.has-equipment[data-v-28a5e031] {\n  border-color: var(--color-success);\n  box-shadow: 0 4px 12px rgba(var(--color-success-rgb), 0.1);\n}\n.equipment-slot.has-equipment[data-v-28a5e031]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 25px rgba(var(--color-success-rgb), 0.2);\n}\n.equipment-slot.empty-slot[data-v-28a5e031] {\n  border-style: dashed;\n  border-color: var(--color-border);\n}\n.slot-header[data-v-28a5e031] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 12px;\n}\n.slot-name[data-v-28a5e031] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  padding: 4px 8px;\n  border-radius: 6px;\n  background: var(--color-surface-light);\n  display: inline-block;\n}\n.slot-actions[data-v-28a5e031] {\n  display: flex;\n  gap: 4px;\n}\n\n/* å¸ä¸‹æŒ‰é’®æ ·å¼ä¼˜åŒ– */\n.unequip-btn[data-v-28a5e031] {\n  padding: 8px 12px;\n  background: linear-gradient(135deg, #ef4444, #dc2626);\n  border: 1px solid #ef4444;\n  border-radius: 8px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  font-size: 12px;\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);\n  position: relative;\n  overflow: hidden;\n}\n.unequip-btn[data-v-28a5e031]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s ease;\n}\n.unequip-btn[data-v-28a5e031]:hover {\n  background: linear-gradient(135deg, #dc2626, #b91c1c);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px rgba(239, 68, 68, 0.4);\n}\n.unequip-btn[data-v-28a5e031]:hover::before {\n  left: 100%;\n}\n.unequip-btn[data-v-28a5e031]:active {\n  transform: translateY(0);\n}\n\n/* è¯¦æƒ…åŒºåŸŸçš„å¸ä¸‹æŒ‰é’®ä¿æŒä¸å…¶ä»– action-btn ä¸€è‡´ä¸”ä¸ä¸Šæµ® */\n.action-btn.unequip-btn[data-v-28a5e031] {\n  background: var(--color-danger);\n  border-color: var(--color-danger);\n  color: white;\n  border-radius: 8px;\n}\n.action-btn.unequip-btn[data-v-28a5e031]:hover {\n  background: var(--color-danger-hover);\n  transform: none;\n  box-shadow: none;\n}\n\n/* è£…å¤‡ç‰©å“æ˜¾ç¤º - ä¼˜åŒ–æ ·å¼ */\n.equipment-item[data-v-28a5e031] {\n  display: flex;\n  gap: 16px;\n  align-items: flex-start;\n  background: var(--color-background);\n  border: 2px solid var(--color-border);\n  border-radius: 12px;\n  padding: 16px;\n  transition: all 0.3s ease;\n}\n.equipment-item[data-v-28a5e031]:hover {\n  border-color: var(--color-primary);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.1);\n  transform: translateY(-2px);\n}\n.item-icon[data-v-28a5e031] {\n  width: 60px;\n  height: 60px;\n  border-radius: 10px;\n  border: 3px solid;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-surface-light);\n  flex-shrink: 0;\n  font-weight: bold;\n  transition: all 0.3s ease;\n}\n.item-type-text[data-v-28a5e031] {\n  font-size: 12px;\n  font-weight: bold;\n  text-align: center;\n  color: var(--color-text);\n  line-height: 1.2;\n  word-break: break-word;\n}\n.item-info[data-v-28a5e031] {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.item-name[data-v-28a5e031] {\n  font-size: 1.1rem;\n  font-weight: 700;\n  margin-bottom: 0;\n  line-height: 1.3;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  line-clamp: 2;\n  -webkit-box-orient: vertical;\n  color: var(--color-text);\n}\n.item-quality[data-v-28a5e031] {\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  border-radius: 6px;\n  margin-bottom: 0;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 4px 8px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  width: fit-content;\n}\n.item-description[data-v-28a5e031] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n  margin-bottom: 0;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  line-clamp: 3;\n  -webkit-box-orient: vertical;\n  background: var(--color-surface-light);\n  padding: 8px 12px;\n  border-radius: 8px;\n  border-left: 3px solid var(--color-primary);\n}\n.item-effects[data-v-28a5e031] {\n  background: var(--color-surface-light);\n  padding: 8px;\n  border-radius: 6px;\n  border-left: 3px solid var(--color-info);\n}\n.effects-title[data-v-28a5e031] {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: var(--color-info);\n  margin-bottom: 4px;\n}\n.effects-text[data-v-28a5e031] {\n  font-size: 0.8rem;\n  color: var(--color-text);\n  line-height: 1.3;\n}\n\n/* ç©ºè£…å¤‡æ§½ä½ */\n.empty-equipment-slot[data-v-28a5e031] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  height: 120px;\n  gap: 8px;\n}\n.empty-icon[data-v-28a5e031] {\n  color: var(--color-text-muted);\n  opacity: 0.5;\n}\n.empty-text[data-v-28a5e031] {\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n}\n.empty-hint[data-v-28a5e031] {\n  font-size: 0.8rem;\n  color: var(--color-text-muted);\n  font-style: italic;\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… - ä¼˜åŒ–å¡ç‰‡æ˜¾ç¤º */\n@media (max-width: 640px) {\n.tabs-header[data-v-28a5e031] {\n    padding: 12px;\n}\n.tools-section[data-v-28a5e031] {\n    flex-direction: column;\n    gap: 8px;\n    align-items: stretch;\n}\n.search-box[data-v-28a5e031] {\n    min-width: auto;\n}\n.filter-buttons[data-v-28a5e031] {\n    justify-content: space-between;\n}\n.filter-select[data-v-28a5e031] {\n    flex: 1;\n}\n.items-grid[data-v-28a5e031] {\n    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));\n    padding: 16px;\n    gap: 12px;\n}\n.item-card[data-v-28a5e031] {\n    height: 130px;\n    padding: 6px;\n}\n.item-icon-area[data-v-28a5e031] {\n    width: 40px;\n    height: 40px;\n}\n.item-type-icon[data-v-28a5e031] {\n    font-size: 20px;\n}\n.item-name[data-v-28a5e031] {\n    font-size: 11px;\n}\n.item-type-label[data-v-28a5e031] {\n    font-size: 8px;\n    padding: 1px 4px;\n}\n.item-grade-info[data-v-28a5e031] {\n    font-size: 7px;\n    padding: 1px 3px;\n}\n.currency-grid[data-v-28a5e031] {\n    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));\n    gap: 12px;\n}\n.currency-card[data-v-28a5e031] {\n    padding: 16px;\n}\n.currency-amount[data-v-28a5e031] {\n    font-size: 1.25rem;\n}\n\n  /* è£…å¤‡é¡µé¢ç§»åŠ¨ç«¯é€‚é… */\n.equipment-content[data-v-28a5e031] {\n    padding: 12px;\n}\n.equipment-header[data-v-28a5e031] {\n    flex-direction: column;\n    gap: 12px;\n    align-items: flex-start;\n}\n.equipment-grid[data-v-28a5e031] {\n    grid-template-columns: 1fr;\n    gap: 16px;\n}\n.equipment-slot[data-v-28a5e031] {\n    min-height: 140px;\n    padding: 12px;\n}\n}\n@media (max-width: 480px) {\n.tabs-nav[data-v-28a5e031] {\n    justify-content: center;\n}\n.tab-btn[data-v-28a5e031] {\n    flex: 1;\n    justify-content: center;\n}\n.items-grid[data-v-28a5e031] {\n    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n    gap: 10px;\n    padding: 12px;\n}\n.item-card[data-v-28a5e031] {\n    height: 120px;\n    padding: 5px;\n}\n.item-icon-area[data-v-28a5e031] {\n    width: 32px;\n    height: 32px;\n}\n.item-type-icon[data-v-28a5e031] {\n    font-size: 16px;\n}\n.item-name[data-v-28a5e031] {\n    font-size: 10px;\n}\n.item-type-label[data-v-28a5e031] {\n    font-size: 7px;\n    padding: 1px 3px;\n}\n.item-grade-info[data-v-28a5e031] {\n    font-size: 6px;\n    padding: 1px 2px;\n}\n.item-quality-badge[data-v-28a5e031] {\n    font-size: 6px;\n    padding: 1px 2px;\n}\n.item-quantity-badge[data-v-28a5e031] {\n    font-size: 8px;\n    padding: 1px 4px;\n}\n.currency-grid[data-v-28a5e031] {\n    grid-template-columns: 1fr;\n}\n.currency-card[data-v-28a5e031] {\n    padding: 14px;\n}\n}\n",""]);const s=i},5056:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},5072:e=>{"use strict";var t=[];function n(e){for(var n=-1,a=0;a<t.length;a++)if(t[a].identifier===e){n=a;break}return n}function a(e,a){for(var o={},i=[],s=0;s<e.length;s++){var l=e[s],c=a.base?l[0]+a.base:l[0],d=o[c]||0,u="".concat(c," ").concat(d);o[c]=d+1;var m=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)t[m].references++,t[m].updater(p);else{var f=r(p,a);a.byIndex=s,t.splice(s,0,{identifier:u,updater:f,references:1})}i.push(u)}return i}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=a(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=n(o[i]);t[s].references--}for(var l=a(e,r),c=0;c<o.length;c++){var d=n(o[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=l}}},5081:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.raw-data-container[data-v-192d0848] {\n  background-color: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 1rem;\n  max-height: 600px;\n  overflow-y: auto;\n  font-size: 0.8rem;\n}\n.raw-data-container pre[data-v-192d0848] {\n  white-space: pre-wrap;\n  word-break: break-all;\n  margin: 0;\n}\n.spirit-stones-grid[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 0.75rem;\n}\n.spirit-stone-item[data-v-192d0848] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem;\n  background: var(--color-surface);\n  border-radius: 4px;\n  border: 1px solid var(--color-border);\n  font-size: 0.85rem;\n}\n.spirit-stone-item span[data-v-192d0848]:first-child {\n  color: var(--color-text-secondary);\n}\n.spirit-stone-item span[data-v-192d0848]:last-child {\n  font-weight: 600;\n  color: var(--color-primary);\n}\n.relationship-network-panel[data-v-192d0848] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n}\n.panel-content[data-v-192d0848] {\n  flex: 1;\n  overflow: hidden;\n}\n.relationships-container[data-v-192d0848] {\n  height: 100%;\n  display: flex;\n  background: var(--color-surface);\n  overflow: hidden;\n}\n.relationship-list[data-v-192d0848] {\n  width: 280px; /* çª„ä¸€ç‚¹ */\n  border-right: 1px solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n}\n.list-header[data-v-192d0848] {\n  padding: 1rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.panel-title[data-v-192d0848] {\n  margin: 0 0 1rem 0;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-primary);\n  text-align: center;\n}\n.search-bar[data-v-192d0848] {\n  position: relative;\n  display: flex;\n  align-items: center;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 0.5rem;\n}\n.search-bar svg[data-v-192d0848] {\n  color: var(--color-text-secondary);\n  margin-right: 0.5rem;\n}\n.search-input[data-v-192d0848] {\n  flex: 1;\n  border: none;\n  outline: none;\n  background: transparent;\n  color: var(--color-text);\n  font-size: 0.875rem;\n}\n.list-content[data-v-192d0848] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n}\n.loading-state[data-v-192d0848],\n.empty-state[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-192d0848] {\n  opacity: 0.5;\n  margin-bottom: 1rem;\n}\n.empty-text[data-v-192d0848] {\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n.empty-hint[data-v-192d0848] {\n  font-size: 0.8rem;\n  opacity: 0.8;\n}\n.person-list[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.person-card[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  padding: 0.75rem; /* æ›´ç´§å‡‘ */\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.person-card[data-v-192d0848]:hover {\n  border-color: var(--color-primary);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\n  transform: translateY(-1px);\n}\n.person-card.selected[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));\n  border-color: var(--color-primary);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);\n}\n.person-avatar[data-v-192d0848] {\n  width: 48px;\n  height: 48px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  color: white;\n  margin-right: 0.75rem;\n  flex-shrink: 0;\n  background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n}\n.avatar-text[data-v-192d0848] {\n  font-size: 1.2rem;\n}\n.person-info[data-v-192d0848] {\n  flex: 1;\n  min-width: 0;\n}\n.person-name[data-v-192d0848] {\n  font-weight: 600;\n  color: var(--color-text);\n  margin-bottom: 0.5rem;\n  font-size: 1rem;\n}\n.person-meta[data-v-192d0848] {\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n}\n.relationship-type[data-v-192d0848] {\n  background: rgba(59, 130, 246, 0.1);\n  color: var(--color-primary);\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n.attention-toggle[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: rgba(156, 163, 175, 0.1);\n  border: 1px solid rgba(156, 163, 175, 0.2);\n  padding: 0;\n  outline: none;\n  position: relative;\n  z-index: 100;\n  pointer-events: auto;\n}\n.attention-toggle[data-v-192d0848]:hover {\n  background: rgba(59, 130, 246, 0.1);\n  border-color: rgba(59, 130, 246, 0.3);\n  transform: scale(1.1);\n}\n.attention-icon[data-v-192d0848] {\n  transition: all 0.2s ease;\n}\n.attention-icon.active[data-v-192d0848] {\n  color: #22c55e;\n}\n.attention-icon.inactive[data-v-192d0848] {\n  color: #9ca3af;\n}\n.attention-toggle:hover .attention-icon.inactive[data-v-192d0848] {\n  color: #3b82f6;\n}\n.attention-toggle:hover .attention-icon.active[data-v-192d0848] {\n  color: #16a34a;\n}\n.person-realm[data-v-192d0848] {\n  margin-bottom: 0.5rem;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.person-realm .realm-label[data-v-192d0848] {\n  margin-right: 0.25rem;\n}\n.person-realm .realm-value[data-v-192d0848] {\n  color: var(--color-primary);\n  font-weight: 600;\n}\n.intimacy-info[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.intimacy-bar[data-v-192d0848] {\n  flex: 1;\n  height: 4px;\n  background: rgba(59, 130, 246, 0.1);\n  border-radius: 2px;\n  overflow: hidden;\n}\n.intimacy-fill[data-v-192d0848] {\n  height: 100%;\n  border-radius: 2px;\n  transition: width 0.3s ease;\n}\n.intimacy-high[data-v-192d0848] {\n  background: linear-gradient(90deg, #22c55e, #16a34a);\n}\n.intimacy-good[data-v-192d0848] {\n  background: linear-gradient(90deg, #3b82f6, #1d4ed8);\n}\n.intimacy-medium[data-v-192d0848] {\n  background: linear-gradient(90deg, #8b5cf6, #7c3aed);\n}\n.intimacy-low[data-v-192d0848] {\n  background: linear-gradient(90deg, #f59e0b, #d97706);\n}\n.intimacy-neutral[data-v-192d0848] {\n  background: linear-gradient(90deg, #6b7280, #4b5563);\n}\n.intimacy-dislike[data-v-192d0848] {\n  background: linear-gradient(90deg, #f97316, #ea580c);\n}\n.intimacy-hostile[data-v-192d0848] {\n  background: linear-gradient(90deg, #dc2626, #b91c1c);\n}\n.intimacy-enemy[data-v-192d0848] {\n  background: linear-gradient(90deg, #ef4444, #dc2626);\n}\n.intimacy-value[data-v-192d0848] {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  min-width: 30px;\n  text-align: right;\n}\n.arrow-icon[data-v-192d0848] {\n  color: var(--color-border-hover);\n  transition: transform 0.2s;\n}\n.person-card.selected .arrow-icon[data-v-192d0848] {\n  transform: rotate(90deg);\n  color: var(--color-primary);\n}\n.relationship-detail[data-v-192d0848] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-width: 0; /* å…³é”®ä¿®å¤ï¼šå…è®¸flexé¡¹æ”¶ç¼©ï¼Œé˜²æ­¢å†…å®¹æº¢å‡º */\n  overflow: hidden; /* éšè—æ‰€æœ‰æº¢å‡ºï¼Œæ»šåŠ¨ç”±å­å…ƒç´ å¤„ç† */\n}\n.detail-header[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n  border-bottom: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.detail-avatar[data-v-192d0848] {\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  color: white;\n  font-size: 1.5rem;\n  background: linear-gradient(135deg, #3b82f6, #8b5cf6);\n  flex-shrink: 0;\n  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);\n}\n.detail-info[data-v-192d0848] {\n  flex: 1;\n  min-width: 0; /* å…è®¸flexé¡¹æ”¶ç¼©ï¼Œé˜²æ­¢é•¿åç§°æ’‘å¼€å®¹å™¨ */\n}\n.detail-name[data-v-192d0848] {\n  margin: 0 0 0.5rem 0;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-text);\n  word-break: break-all; /* å¼ºåˆ¶é•¿åç§°æ¢è¡Œ */\n}\n.detail-badges[data-v-192d0848] {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.relationship-badge[data-v-192d0848],\n.intimacy-badge[data-v-192d0848],\n.race-badge[data-v-192d0848],\n.faction-badge[data-v-192d0848] {\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n.relationship-badge[data-v-192d0848] {\n  background: rgba(59, 130, 246, 0.1);\n  color: var(--color-primary);\n}\n.race-badge[data-v-192d0848] {\n  background: rgba(34, 197, 94, 0.1);\n  color: #22c55e;\n  border: 1px solid rgba(34, 197, 94, 0.3);\n}\n.faction-badge[data-v-192d0848] {\n  background: rgba(168, 85, 247, 0.1);\n  color: #a855f7;\n  border: 1px solid rgba(168, 85, 247, 0.3);\n}\n.detail-body[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n  flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */\n  min-height: 0; /* å…è®¸æ”¶ç¼© */\n  overflow-y: auto; /* å†…å®¹æº¢å‡ºæ—¶æ»šåŠ¨ */\n  padding: 1rem;\n}\n.tab-content[data-v-192d0848] {\n  animation: fadeIn-192d0848 0.3s ease;\n}\n@keyframes fadeIn-192d0848 {\nfrom {\n    opacity: 0;\n    transform: translateY(10px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.empty-state-small[data-v-192d0848] {\n  padding: 2rem;\n  text-align: center;\n  color: var(--color-text-secondary);\n  font-style: italic;\n}\n.detail-section[data-v-192d0848] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 1rem;\n}\n.section-title[data-v-192d0848] {\n  margin: 0 0 1rem 0;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.info-grid[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n  gap: 1rem;\n}\n.info-grid-2col[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n.info-item[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.info-label[data-v-192d0848] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.info-value[data-v-192d0848] {\n  font-size: 0.875rem;\n  color: var(--color-text);\n  font-weight: 600;\n}\n.memory-list[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  margin-top: 1rem;\n}\n.memory-header[data-v-192d0848] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n}\n.summary-mode-hint[data-v-192d0848] {\n  margin-top: 0.75rem;\n  padding: 0.5rem 0.75rem;\n  background: rgba(59, 130, 246, 0.08);\n  border-left: 3px solid #3b82f6;\n  border-radius: 4px;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n}\n.summary-mode-hint strong[data-v-192d0848] {\n  color: var(--color-primary);\n  font-weight: 600;\n}\n.memory-actions-header[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.memory-count[data-v-192d0848] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  background: rgba(59, 130, 246, 0.1);\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-weight: 500;\n}\n.memory-controls-group[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.download-memory-btn[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n.download-memory-btn[data-v-192d0848]:hover {\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n}\n.summarize-controls[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.summarize-input[data-v-192d0848] {\n  width: 60px;\n  padding: 0.375rem 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text);\n  font-size: 0.75rem;\n  text-align: center;\n  transition: all 0.2s ease;\n}\n.summarize-input[data-v-192d0848]:focus {\n  outline: none;\n  border-color: #8b5cf6;\n  box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.1);\n}\n.summarize-btn[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  background: linear-gradient(135deg, #8b5cf6, #7c3aed);\n  color: white;\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n.summarize-btn[data-v-192d0848]:hover:not(:disabled) {\n  background: linear-gradient(135deg, #7c3aed, #6d28d9);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);\n}\n.summarize-btn[data-v-192d0848]:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n.memory-summary-list[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n}\n.memory-summary-item[data-v-192d0848] {\n  display: flex;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(124, 58, 237, 0.05));\n  border-radius: 8px;\n  border-left: 3px solid #8b5cf6;\n}\n.summary-icon[data-v-192d0848] {\n  font-size: 1.25rem;\n  flex-shrink: 0;\n}\n.summary-text[data-v-192d0848] {\n  flex: 1;\n  font-size: 0.85rem;\n  line-height: 1.6;\n  color: var(--color-text);\n}\n.memory-pagination[data-v-192d0848] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 1rem;\n  padding-top: 0.75rem;\n  border-top: 1px solid var(--color-border);\n  margin-top: 1rem;\n}\n.pagination-btn[data-v-192d0848] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 0.5rem 1rem;\n  color: var(--color-text);\n  cursor: pointer;\n  font-size: 0.8rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n.pagination-btn[data-v-192d0848]:hover:not(:disabled) {\n  background: var(--color-surface);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.pagination-btn[data-v-192d0848]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.pagination-controls[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.5rem;\n}\n.pagination-info[data-v-192d0848] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n  text-align: center;\n}\n.jump-to-page[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.page-input[data-v-192d0848] {\n  width: 60px;\n  padding: 0.375rem 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text);\n  font-size: 0.75rem;\n  text-align: center;\n  transition: all 0.2s ease;\n}\n.page-input[data-v-192d0848]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1);\n}\n.jump-btn[data-v-192d0848] {\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n}\n.jump-btn[data-v-192d0848]:hover {\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n}\n.memory-summary-section[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(124, 58, 237, 0.08));\n  border-left: 4px solid #8b5cf6;\n}\n.memory-item[data-v-192d0848] {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border-radius: 6px;\n  border-left: 3px solid var(--color-primary);\n  font-size: 0.85rem;\n  line-height: 1.4;\n  color: var(--color-text-secondary);\n}\n.memory-content[data-v-192d0848] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.memory-time[data-v-192d0848] {\n  font-size: 0.75rem;\n  color: var(--color-primary);\n  font-weight: 600;\n  opacity: 0.8;\n}\n.memory-event[data-v-192d0848] {\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  line-height: 1.5;\n}\n.memory-actions[data-v-192d0848] {\n  display: flex;\n  gap: 6px;\n}\n.memory-btn[data-v-192d0848] {\n  padding: 4px 8px;\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  font-size: 12px;\n  cursor: pointer;\n  background: var(--color-background);\n}\n.memory-btn.edit[data-v-192d0848] {\n  color: #2563eb;\n  border-color: #bfdbfe;\n}\n.memory-btn.delete[data-v-192d0848] {\n  color: #dc2626;\n  border-color: #fecaca;\n}\n\n/* ç®€åŒ–ï¼šå¤–è²Œæè¿°æ ·å¼ */\n.appearance-description[data-v-192d0848] {\n  padding: 1rem;\n  background: rgba(147, 51, 234, 0.05);\n  border-radius: 8px;\n  border-left: 3px solid #9333ea;\n}\n.description-text[data-v-192d0848] {\n  font-size: 0.875rem;\n  line-height: 1.6;\n  color: var(--color-text);\n  margin: 0;\n  font-style: italic;\n}\n.subsection-title[data-v-192d0848] {\n  margin: 0 0 0.75rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.talents-grid[data-v-192d0848] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.talent-tag[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1));\n  color: #3b82f6;\n  padding: 0.25rem 0.5rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.attributes-grid[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));\n  gap: 0.75rem;\n}\n.attribute-item[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0.5rem;\n  background: var(--color-surface);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.attr-label[data-v-192d0848] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  margin-bottom: 0.25rem;\n  font-weight: 500;\n}\n.attr-value[data-v-192d0848] {\n  font-size: 1rem;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n\n/* NPCç‰©å“æ ·å¼ */\n.npc-inventory[data-v-192d0848] {\n  margin-top: 0.75rem;\n}\n.npc-items-grid[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 0.75rem;\n}\n.npc-item-card[data-v-192d0848] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 0.75rem;\n  transition: all 0.2s ease;\n}\n.npc-item-card[data-v-192d0848]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.npc-item-card.quality-å‡¡[data-v-192d0848] {\n  border-left: 3px solid #6b7280;\n}\n.npc-item-card.quality-é»„[data-v-192d0848] {\n  border-left: 3px solid #f59e0b;\n}\n.npc-item-card.quality-ç„[data-v-192d0848] {\n  border-left: 3px solid #8b5cf6;\n}\n.npc-item-card.quality-åœ°[data-v-192d0848] {\n  border-left: 3px solid #06b6d4;\n}\n.npc-item-card.quality-å¤©[data-v-192d0848] {\n  border-left: 3px solid #ec4899;\n}\n.npc-item-card.quality-ä»™[data-v-192d0848] {\n  border-left: 3px solid #f59e0b;\n  box-shadow: 0 0 10px rgba(245, 158, 11, 0.3);\n}\n.npc-item-card.quality-ç¥[data-v-192d0848] {\n  border-left: 3px solid #9333ea;\n  box-shadow: 0 0 15px rgba(147, 51, 234, 0.4);\n}\n.item-header[data-v-192d0848] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0.5rem;\n}\n.item-name[data-v-192d0848] {\n  font-weight: 600;\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.item-type[data-v-192d0848] {\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n  padding: 0.125rem 0.375rem;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 500;\n}\n.item-quality[data-v-192d0848] {\n  margin-bottom: 0.5rem;\n}\n.quality-text[data-v-192d0848] {\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n}\n.item-quantity[data-v-192d0848] {\n  text-align: right;\n  margin-bottom: 0.5rem;\n  font-size: 0.8rem;\n  /* ä½¿ç”¨ä¸»é¢˜ä¸»è‰²ï¼Œå¢å¼ºä¸å¡ç‰‡èƒŒæ™¯çš„å¯¹æ¯”åº¦ */\n  color: var(--color-primary);\n  font-weight: 700;\n}\n.item-description[data-v-192d0848] {\n  margin-bottom: 0.75rem;\n}\n.item-description p[data-v-192d0848] {\n  margin: 0;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  line-height: 1.4;\n}\n.item-actions[data-v-192d0848] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.trade-btn[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  background: linear-gradient(135deg, #059669, #047857);\n  color: white;\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.trade-btn[data-v-192d0848]:hover {\n  background: linear-gradient(135deg, #047857, #065f46);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(5, 150, 105, 0.3);\n}\n.trade-btn[data-v-192d0848]:active {\n  transform: translateY(0);\n}\n.request-btn[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  color: white;\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.request-btn[data-v-192d0848]:hover {\n  background: linear-gradient(135deg, #2563eb, #1d4ed8);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n}\n.request-btn[data-v-192d0848]:active {\n  transform: translateY(0);\n}\n.steal-btn[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  background: linear-gradient(135deg, #dc2626, #b91c1c);\n  color: white;\n  border: none;\n  padding: 0.375rem 0.75rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.steal-btn[data-v-192d0848]:hover {\n  background: linear-gradient(135deg, #b91c1c, #991b1b);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);\n}\n.steal-btn[data-v-192d0848]:active {\n  transform: translateY(0);\n}\n.empty-inventory[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.empty-inventory .empty-icon[data-v-192d0848] {\n  margin-bottom: 0.75rem;\n  opacity: 0.5;\n}\n.no-selection[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.placeholder-icon[data-v-192d0848] {\n  opacity: 0.5;\n  margin-bottom: 1rem;\n}\n.placeholder-text[data-v-192d0848] {\n  font-size: 1rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n.placeholder-hint[data-v-192d0848] {\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n.animate-spin[data-v-192d0848] {\n  animation: spin-192d0848 1s linear infinite;\n}\n@keyframes spin-192d0848 {\nfrom {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* === NSFW ç§å¯†ä¿¡æ¯æ ·å¼ === */\n.nsfw-section[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(236, 72, 153, 0.05), rgba(219, 39, 119, 0.05));\n  border: 2px solid rgba(236, 72, 153, 0.3);\n}\n.nsfw-subsection[data-v-192d0848] {\n  margin-bottom: 1rem;\n}\n.nsfw-subsection[data-v-192d0848]:last-child {\n  margin-bottom: 0;\n}\n.development-bars[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.dev-bar-item[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.dev-bar-header[data-v-192d0848] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.8rem;\n}\n.dev-label[data-v-192d0848] {\n  color: var(--color-text);\n  font-weight: 500;\n}\n.dev-value[data-v-192d0848] {\n  color: #ec4899;\n  font-weight: 700;\n  font-size: 0.75rem;\n}\n.dev-bar-track[data-v-192d0848] {\n  height: 8px;\n  background: rgba(236, 72, 153, 0.1);\n  border-radius: 4px;\n  overflow: hidden;\n}\n.dev-bar-fill[data-v-192d0848] {\n  height: 100%;\n  background: linear-gradient(90deg, #ec4899, #db2777);\n  border-radius: 4px;\n  transition: width 0.3s ease;\n}\n.status-badge[data-v-192d0848] {\n  display: inline-block;\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n.status-æ­£å¸¸[data-v-192d0848] {\n  background: rgba(107, 114, 128, 0.2);\n  color: #6b7280;\n}\n.status-å¾®æ¹¿[data-v-192d0848] {\n  background: rgba(59, 130, 246, 0.2);\n  color: #3b82f6;\n}\n.status-å‘æƒ…[data-v-192d0848] {\n  background: rgba(236, 72, 153, 0.2);\n  color: #ec4899;\n}\n.status-é«˜æ½®[data-v-192d0848] {\n  background: rgba(220, 38, 38, 0.2);\n  color: #dc2626;\n}\n.status-è´¤è€…æ—¶é—´[data-v-192d0848] {\n  background: rgba(139, 92, 246, 0.2);\n  color: #8b5cf6;\n}\n.fetish-tag[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(236, 72, 153, 0.15), rgba(219, 39, 119, 0.15));\n  color: #ec4899;\n  padding: 0.25rem 0.5rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border: 1px solid rgba(236, 72, 153, 0.3);\n}\n.partner-tag[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(236, 72, 153, 0.12), rgba(219, 39, 119, 0.12));\n  color: #db2777;\n  padding: 0.3rem 0.6rem;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  font-weight: 500;\n  border: 1px solid rgba(236, 72, 153, 0.25);\n}\n.partner-list[data-v-192d0848] {\n  margin-top: 0.75rem;\n}\n.toggle-more-btn[data-v-192d0848] {\n  margin-top: 0.75rem;\n  background: rgba(236, 72, 153, 0.08);\n  border: 1px solid rgba(236, 72, 153, 0.25);\n  color: #db2777;\n  padding: 0.35rem 0.6rem;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.toggle-more-btn[data-v-192d0848]:hover {\n  background: rgba(236, 72, 153, 0.12);\n  border-color: rgba(236, 72, 153, 0.35);\n}\n.pregnancy-info[data-v-192d0848] {\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.pregnancy-active[data-v-192d0848] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n}\n.pregnancy-icon[data-v-192d0848] {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n.pregnancy-details[data-v-192d0848] {\n  flex: 1;\n  font-size: 0.85rem;\n  color: var(--color-text);\n  line-height: 1.6;\n}\n.pregnancy-inactive[data-v-192d0848] {\n  text-align: center;\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n}\n.first-time-info[data-v-192d0848] {\n  padding: 0.75rem;\n  background: rgba(236, 72, 153, 0.05);\n  border-radius: 6px;\n  border-left: 3px solid #ec4899;\n  font-size: 0.85rem;\n  color: var(--color-text);\n}\n\n/* å®æ—¶çŠ¶æ€é«˜äº®åŒºåŸŸï¼ˆé€šç”¨ï¼‰*/\n.highlight-section[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(147, 51, 234, 0.05));\n  border-radius: 8px;\n  padding: 1rem;\n  border: 1px solid rgba(59, 130, 246, 0.15);\n}\n.realtime-status[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.status-item[data-v-192d0848] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background: var(--color-background);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.status-icon[data-v-192d0848] {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n  line-height: 1;\n}\n.status-content[data-v-192d0848] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.status-label[data-v-192d0848] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  font-weight: 600;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.status-text[data-v-192d0848] {\n  font-size: 0.85rem;\n  color: var(--color-text);\n  line-height: 1.5;\n  font-style: italic;\n}\n.desire-fill[data-v-192d0848] {\n  background: linear-gradient(90deg, #f59e0b, #dc2626);\n}\n.mini-label[data-v-192d0848] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n\n/* æ€§ç»éªŒç»Ÿè®¡ */\n.experience-grid[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 0.75rem;\n  margin-bottom: 0.75rem;\n}\n.exp-item[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.exp-icon[data-v-192d0848] {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n.exp-content[data-v-192d0848] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.exp-label[data-v-192d0848] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.exp-value[data-v-192d0848] {\n  font-size: 0.95rem;\n  color: #ec4899;\n  font-weight: 700;\n}\n.last-time-info[data-v-192d0848] {\n  padding: 0.5rem 0.75rem;\n  background: rgba(236, 72, 153, 0.05);\n  border-radius: 4px;\n  font-size: 0.8rem;\n  text-align: center;\n}\n.last-time-label[data-v-192d0848] {\n  color: var(--color-text-secondary);\n  margin-right: 0.5rem;\n}\n.last-time-value[data-v-192d0848] {\n  color: var(--color-text);\n  font-weight: 600;\n}\n\n/* èº«ä½“éƒ¨ä½åˆ—è¡¨ */\n.body-parts-list[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.body-part-item[data-v-192d0848] {\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.part-header[data-v-192d0848] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.part-name[data-v-192d0848] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.part-mark[data-v-192d0848] {\n  font-size: 0.7rem;\n  padding: 0.125rem 0.375rem;\n  background: linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(219, 39, 119, 0.2));\n  color: #ec4899;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.part-description[data-v-192d0848] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-style: italic;\n  margin-bottom: 0.5rem;\n  padding: 0.5rem;\n  background: rgba(236, 72, 153, 0.05);\n  border-radius: 4px;\n  line-height: 1.4;\n}\n.part-stats[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.part-stat[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.stat-label[data-v-192d0848] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  min-width: 50px;\n}\n.stat-bar-mini[data-v-192d0848] {\n  flex: 1;\n  height: 6px;\n  background: rgba(236, 72, 153, 0.1);\n  border-radius: 3px;\n  overflow: hidden;\n}\n.stat-bar-fill[data-v-192d0848] {\n  height: 100%;\n  border-radius: 3px;\n  transition: width 0.3s ease;\n}\n.stat-bar-fill.sensitivity[data-v-192d0848] {\n  background: linear-gradient(90deg, #f59e0b, #ec4899);\n}\n.stat-bar-fill.development[data-v-192d0848] {\n  background: linear-gradient(90deg, #8b5cf6, #ec4899);\n}\n.stat-value[data-v-192d0848] {\n  font-size: 0.7rem;\n  color: #ec4899;\n  font-weight: 700;\n  min-width: 35px;\n  text-align: right;\n}\n\n/* ä½“æ¶²çŠ¶æ€ */\n.fluid-status[data-v-192d0848] {\n  padding: 0.75rem;\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.08), rgba(236, 72, 153, 0.08));\n  border-radius: 6px;\n  border-left: 3px solid #3b82f6;\n  font-size: 0.85rem;\n  color: var(--color-text);\n  font-style: italic;\n}\n\n/* ç‰¹æ®Šä½“è´¨æ ‡ç­¾ */\n.special-trait-tag[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(168, 85, 247, 0.15), rgba(236, 72, 153, 0.15));\n  color: #a855f7;\n  padding: 0.25rem 0.5rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border: 1px solid rgba(168, 85, 247, 0.3);\n}\n\n/* ========== äººæ ¼åº•çº¿æ ·å¼ ========== */\n.personality-section[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(239, 68, 68, 0.08), rgba(249, 115, 22, 0.08));\n  border-left: 4px solid #ef4444;\n}\n.personality-bottomlines[data-v-192d0848] {\n  margin-bottom: 0.75rem;\n}\n.bottomline-tags[data-v-192d0848] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.bottomline-tag[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(249, 115, 22, 0.15));\n  color: #ef4444;\n  padding: 0.4rem 0.75rem;\n  border-radius: 8px;\n  font-size: 0.85rem;\n  font-weight: 600;\n  border: 1.5px solid rgba(239, 68, 68, 0.4);\n  display: inline-flex;\n  align-items: center;\n  box-shadow: 0 2px 4px rgba(239, 68, 68, 0.1);\n  transition: all 0.2s ease;\n}\n.bottomline-tag[data-v-192d0848]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(239, 68, 68, 0.2);\n  border-color: rgba(239, 68, 68, 0.6);\n}\n.bottomline-empty[data-v-192d0848] {\n  color: var(--text-secondary);\n  font-style: italic;\n  font-size: 0.875rem;\n  padding: 0.5rem 0;\n}\n.bottomline-warning[data-v-192d0848] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  background: rgba(239, 68, 68, 0.1);\n  padding: 0.75rem;\n  border-radius: 8px;\n  border: 1px solid rgba(239, 68, 68, 0.3);\n}\n.warning-icon[data-v-192d0848] {\n  font-size: 1.1rem;\n  color: #f59e0b;\n  flex-shrink: 0;\n  animation: pulse-192d0848 2s infinite;\n}\n@keyframes pulse-192d0848 {\n0%,\n  100% {\n    opacity: 1;\n    transform: scale(1);\n}\n50% {\n    opacity: 0.6;\n    transform: scale(1.1);\n}\n}\n.warning-text[data-v-192d0848] {\n  color: #dc2626;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  font-weight: 500;\n}\n\n/* ========== Tabå¯¼èˆªæ ·å¼ ========== */\n.detail-tabs[data-v-192d0848] {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0 0 1rem 0;\n  border-bottom: 2px solid var(--color-border);\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n}\n.tab-btn[data-v-192d0848] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px 8px 0 0;\n  padding: 0.5rem 1rem;\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  position: relative;\n  outline: none;\n}\n.tab-btn[data-v-192d0848]:hover {\n  background: var(--color-surface);\n  border-color: var(--color-primary);\n  color: var(--color-text);\n  transform: translateY(-2px);\n}\n.tab-btn.active[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n  font-weight: 600;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);\n}\n.tab-btn.active[data-v-192d0848]::after {\n  content: '';\n  position: absolute;\n  bottom: -2px;\n  left: 0;\n  right: 0;\n  height: 2px;\n  background: var(--color-primary);\n}\n.tab-panel[data-v-192d0848] {\n  animation: fadeIn-192d0848 0.3s ease;\n}\n\n/* ========== å“åº”å¼2åˆ—å¸ƒå±€æ ·å¼ ========== */\n.info-grid-responsive[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 8px;\n}\n\n/* å°å±å¹•æ—¶åˆ‡æ¢ä¸ºå•åˆ— */\n@media (max-width: 500px) {\n.info-grid-responsive[data-v-192d0848] {\n    grid-template-columns: 1fr;\n}\n}\n.info-item-row[data-v-192d0848] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 6px 10px;\n  background: transparent;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.05);\n  transition: background 0.2s ease;\n}\n.info-item-row[data-v-192d0848]:hover {\n  background: rgba(59, 130, 246, 0.03);\n}\n.info-item-row .info-label[data-v-192d0848] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n  min-width: 50px;\n}\n.info-item-row .info-value[data-v-192d0848] {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--color-text);\n  text-align: right;\n  flex: 1;\n  word-break: break-word;\n}\n\n/* ========== NPCè®°å¿†åˆ—è¡¨æ ·å¼ ========== */\n.npc-memories-list[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.npc-memory-item[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(234, 179, 8, 0.05), rgba(249, 115, 22, 0.05));\n  border-left: 3px solid #eab308;\n  border-radius: 4px;\n  padding: 10px 12px;\n  transition: all 0.2s ease;\n}\n.npc-memory-item[data-v-192d0848]:hover {\n  background: linear-gradient(135deg, rgba(234, 179, 8, 0.1), rgba(249, 115, 22, 0.1));\n  transform: translateX(4px);\n  box-shadow: 0 2px 6px rgba(234, 179, 8, 0.15);\n}\n.npc-memory-content[data-v-192d0848] {\n  font-size: 0.85rem;\n  color: var(--color-text);\n  line-height: 1.5;\n}\n\n/* ========== NPCå…­å¸å±æ€§æ ·å¼ ========== */\n.npc-attributes-container[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.npc-attr-group[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.05), rgba(147, 51, 234, 0.05));\n  border: 1px solid rgba(59, 130, 246, 0.15);\n  border-radius: 8px;\n  padding: 10px;\n}\n.npc-attr-group-title[data-v-192d0848] {\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: var(--color-primary);\n  margin-bottom: 8px;\n  padding-left: 4px;\n}\n.npc-attr-grid[data-v-192d0848] {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 6px;\n}\n.npc-attr-item[data-v-192d0848] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 6px 4px;\n  background: rgba(255, 255, 255, 0.05);\n  border-radius: 6px;\n  border: 1px solid transparent;\n  transition: all 0.2s ease;\n}\n.npc-attr-item[data-v-192d0848]:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(59, 130, 246, 0.3);\n  transform: translateY(-2px);\n}\n.npc-attr-item.final[data-v-192d0848] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.12), rgba(147, 51, 234, 0.12));\n}\n.npc-attr-item.final[data-v-192d0848]:hover {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(147, 51, 234, 0.2));\n}\n.npc-attr-label[data-v-192d0848] {\n  font-size: 0.7rem;\n  color: var(--text-secondary);\n  margin-bottom: 2px;\n  font-weight: 500;\n}\n.npc-attr-value[data-v-192d0848] {\n  font-size: 0.95rem;\n  font-weight: 700;\n  color: var(--color-primary);\n}\n.name-and-actions[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n}\n.delete-npc-btn[data-v-192d0848] {\n  background: transparent;\n  border: 1px solid var(--color-border);\n  color: var(--color-text-secondary);\n  border-radius: 50%;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n.delete-npc-btn[data-v-192d0848]:hover {\n  background: rgba(239, 68, 68, 0.1);\n  border-color: #ef4444;\n  color: #ef4444;\n  transform: scale(1.1);\n}\n.action-buttons[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.action-btn[data-v-192d0848] {\n  background: transparent;\n  border: 1px solid var(--color-border);\n  color: var(--color-text-secondary);\n  border-radius: 50%;\n  width: 28px;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n.action-btn.download-btn[data-v-192d0848]:hover {\n  background: rgba(59, 130, 246, 0.1);\n  border-color: #3b82f6;\n  color: #3b82f6;\n  transform: scale(1.1);\n}\n.action-btn.export-btn[data-v-192d0848]:hover {\n  background: rgba(16, 185, 129, 0.1);\n  border-color: #10b981;\n  color: #10b981;\n  transform: scale(1.1);\n}\n.card-actions[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  position: relative;\n  z-index: 10;\n  pointer-events: auto;\n}\n.delete-btn-card[data-v-192d0848] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: rgba(156, 163, 175, 0.1);\n  border: 1px solid rgba(156, 163, 175, 0.2);\n  color: #9ca3af;\n  padding: 0;\n  outline: none;\n  position: relative;\n  z-index: 100;\n  pointer-events: auto;\n}\n.delete-btn-card[data-v-192d0848]:hover {\n  background: rgba(239, 68, 68, 0.1);\n  border-color: #ef4444;\n  color: #ef4444;\n  transform: scale(1.1);\n}\n.back-to-list-btn[data-v-192d0848] {\n  display: none; /* é»˜è®¤éšè— */\n  background: transparent;\n  border: 1px solid var(--color-border);\n  color: var(--color-text-secondary);\n  border-radius: 50%;\n  width: 32px;\n  height: 32px;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n  margin-right: 0.5rem;\n}\n.back-to-list-btn[data-v-192d0848]:hover {\n  background: var(--color-surface);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n@media (max-width: 768px) {\n.relationships-container[data-v-192d0848] {\n    position: relative;\n    overflow: hidden;\n}\n.relationship-list[data-v-192d0848],\n  .relationship-detail[data-v-192d0848] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    transition: transform 0.3s ease-in-out;\n    backface-visibility: hidden;\n}\n.relationship-list[data-v-192d0848] {\n    transform: translateX(0);\n    z-index: 10;\n}\n.relationship-detail[data-v-192d0848] {\n    transform: translateX(100%);\n    z-index: 20;\n    border-left: none; /* ç§»é™¤å·¦è¾¹æ¡† */\n}\n.relationships-container.details-active .relationship-list[data-v-192d0848] {\n    transform: translateX(-100%);\n}\n.relationships-container.details-active .relationship-detail[data-v-192d0848] {\n    transform: translateX(0);\n}\n.back-to-list-btn[data-v-192d0848] {\n    display: flex; /* åœ¨ç§»åŠ¨ç«¯æ˜¾ç¤º */\n}\n.detail-header[data-v-192d0848] {\n    padding: 0.75rem 1rem;\n}\n}\n",""]);const s=i},5097:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.sect-migration[data-v-84b88b2c] {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  color: var(--color-text);\n}\n.migration-header h4[data-v-84b88b2c] {\n  margin: 0 0 6px 0;\n  font-size: 1.05rem;\n}\n.migration-header p[data-v-84b88b2c] {\n  margin: 0;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.migration-reasons[data-v-84b88b2c] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 10px;\n}\n.reason-item[data-v-84b88b2c] {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.reason-item .dot[data-v-84b88b2c] {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--color-warning);\n  flex-shrink: 0;\n}\n.migration-meta[data-v-84b88b2c] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 10px;\n}\n.meta-item[data-v-84b88b2c] {\n  padding: 8px 10px;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  background: var(--color-background);\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.meta-item .label[data-v-84b88b2c] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.meta-item .value[data-v-84b88b2c] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.migration-actions[data-v-84b88b2c] {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n.migration-actions button[data-v-84b88b2c] {\n  border: none;\n  border-radius: 8px;\n  padding: 8px 14px;\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.migration-actions .primary[data-v-84b88b2c] {\n  background: linear-gradient(135deg, #22c55e, #16a34a);\n  color: white;\n}\n.migration-actions .primary[data-v-84b88b2c]:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n.migration-actions .secondary[data-v-84b88b2c] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  color: var(--color-text);\n}\n.migration-hint[data-v-84b88b2c] {\n  margin: 0;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  background: rgba(var(--color-primary-rgb), 0.08);\n  padding: 8px 10px;\n  border-radius: 8px;\n}\n",""]);const s=i},5099:(e,t,n)=>{"use strict";n.d(t,{$v:()=>m,Jx:()=>x,Wj:()=>k,YK:()=>v,c5:()=>h,dc:()=>b,loadFromIndexedDB:()=>w,loadSaveData:()=>y,saveData:()=>p});const a="DAD_SAVES_DB",r=1,o="saves",i="root_data",s="characters",l="active_save",c="savedata_";let d=null;function u(){return new Promise((e,t)=>{if(d)return void e(d);const n=indexedDB.open(a,r);n.onerror=()=>{console.error("ã€ä¹¾å¤å®åº“-IDBã€‘æ•°æ®åº“æ‰“å¼€å¤±è´¥:",n.error),t(n.error)},n.onsuccess=()=>{d=n.result,console.log("ã€ä¹¾å¤å®åº“-IDBã€‘æ•°æ®åº“å·²æ‰“å¼€"),e(n.result)},n.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains(o)||(t.createObjectStore(o,{keyPath:"id"}),console.log("ã€ä¹¾å¤å®åº“-IDBã€‘å¯¹è±¡å­˜å‚¨å·²åˆ›å»º:",o))}})}async function m(){try{const e=(await u()).transaction([o],"readonly").objectStore(o),t=e.get(s),n=e.get(l);return new Promise((e,a)=>{let r=null,o=null,i=0;const s=()=>{2===i&&(console.log("ã€ä¹¾å¤å®åº“-IDBã€‘åˆ†ç‰‡æ•°æ®åŠ è½½å®Œæˆ"),e({è§’è‰²åˆ—è¡¨:r||{},å½“å‰æ¿€æ´»å­˜æ¡£:o||null}))};t.onsuccess=()=>{r=t.result?.data||{},i++,s()},t.onerror=()=>a(t.error),n.onsuccess=()=>{o=n.result?.data||null,i++,s()},n.onerror=()=>a(n.error)})}catch(e){return console.error("ã€ä¹¾å¤å®åº“-IDBã€‘åŠ è½½æ ¹æ•°æ®æ—¶å‡ºé”™:",e),{å½“å‰æ¿€æ´»å­˜æ¡£:null,è§’è‰²åˆ—è¡¨:{}}}}async function p(e,t){const n=await u();return new Promise((a,r)=>{const i=n.transaction([o],"readwrite").objectStore(o).put({id:e,data:JSON.parse(JSON.stringify(t)),timestamp:(new Date).toISOString()});i.onsuccess=()=>a(),i.onerror=()=>r(i.error)})}async function f(e){try{console.log("[IndexedDB-ä¿å­˜è§’è‰²] å‡†å¤‡ä¿å­˜è§’è‰²åˆ—è¡¨, è§’è‰²æ•°:",Object.keys(e).length),await p(s,e),console.log("[IndexedDB-ä¿å­˜è§’è‰²] âœ… è§’è‰²åˆ—è¡¨å·²ä¿å­˜åˆ° IndexedDB")}catch(e){throw console.error("[IndexedDB-ä¿å­˜è§’è‰²] âŒ ä¿å­˜è§’è‰²åˆ—è¡¨å¤±è´¥:",e),e}}async function g(e){try{await p(l,e),console.log("ã€ä¹¾å¤å®åº“-IDBã€‘å½“å‰æ¿€æ´»å­˜æ¡£å·²ä¿å­˜")}catch(e){throw console.error("ã€ä¹¾å¤å®åº“-IDBã€‘ä¿å­˜å½“å‰æ¿€æ´»å­˜æ¡£å¤±è´¥:",e),e}}async function h(e){try{console.log("[IndexedDB-ä¿å­˜] å¼€å§‹ä¿å­˜æ ¹æ•°æ®"),console.log("[IndexedDB-ä¿å­˜] è§’è‰²åˆ—è¡¨é”®å:",Object.keys(e.è§’è‰²åˆ—è¡¨)),console.log("[IndexedDB-ä¿å­˜] å½“å‰æ¿€æ´»å­˜æ¡£:",e.å½“å‰æ¿€æ´»å­˜æ¡£),await Promise.all([f(e.è§’è‰²åˆ—è¡¨),g(e.å½“å‰æ¿€æ´»å­˜æ¡£)]),console.log("[IndexedDB-ä¿å­˜] âœ… æ ¹æ•°æ®ï¼ˆåˆ†ç‰‡ï¼‰ä¿å­˜æˆåŠŸ")}catch(e){throw console.error("[IndexedDB-ä¿å­˜] âŒ ä¿å­˜æ ¹æ•°æ®æ—¶å‡ºé”™:",e),e}}async function v(){try{const e="DAD_SAVES_V3",t=localStorage.getItem(e);if(t){console.log("ã€ä¹¾å¤å®åº“-IDBã€‘æ£€æµ‹åˆ°localStorageæ•°æ®ï¼Œå¼€å§‹è¿ç§»...");const n=JSON.parse(t);return await h(n),localStorage.setItem("DAD_SAVES_V3_BACKUP",t),localStorage.removeItem(e),console.log("ã€ä¹¾å¤å®åº“-IDBã€‘âœ… localStorage æ•°æ®è¿ç§»å®Œæˆï¼"),!0}const n=(await u()).transaction([o],"readwrite").objectStore(o),a=n.get(i);return new Promise((e,t)=>{a.onsuccess=async()=>{const r=a.result;if(r&&r.data&&(r.data.è§’è‰²åˆ—è¡¨||r.data.å½“å‰æ¿€æ´»å­˜æ¡£)){console.log("ã€ä¹¾å¤å®åº“-IDBã€‘æ£€æµ‹åˆ°æ—§çš„å•ä½“DBè®°å½•ï¼Œå¼€å§‹åˆ†ç‰‡è¿ç§»...");try{const a=r.data;await f(a.è§’è‰²åˆ—è¡¨||{}),await g(a.å½“å‰æ¿€æ´»å­˜æ¡£||null);const o=n.delete(i);o.onsuccess=()=>{console.log("ã€ä¹¾å¤å®åº“-IDBã€‘âœ… æ—§çš„å•ä½“DBè®°å½•å·²æˆåŠŸè¿ç§»å¹¶åˆ é™¤"),e(!0)},o.onerror=()=>{console.error("ã€ä¹¾å¤å®åº“-IDBã€‘âŒ åˆ é™¤æ—§çš„å•ä½“DBè®°å½•å¤±è´¥:",o.error),t(o.error)}}catch(e){console.error("ã€ä¹¾å¤å®åº“-IDBã€‘âŒ åˆ†ç‰‡è¿ç§»å¤±è´¥:",e),t(e)}}else console.log("ã€ä¹¾å¤å®åº“-IDBã€‘æ— éœ€æ•°æ®è¿ç§»"),e(!1)},a.onerror=()=>{console.error("ã€ä¹¾å¤å®åº“-IDBã€‘âŒ æ£€æŸ¥æ—§æ•°æ®å¤±è´¥:",a.error),t(a.error)}})}catch(e){return console.error("ã€ä¹¾å¤å®åº“-IDBã€‘âŒ æ•°æ®è¿ç§»è¿‡ç¨‹å‡ºé”™:",e),!1}}async function b(e,t,n){try{const a=`${c}${e}_${t}`;await p(a,n),console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘SaveData å·²ä¿å­˜ (${e}/${t})`)}catch(e){throw console.error("ã€ä¹¾å¤å®åº“-IDBã€‘ä¿å­˜ SaveData å¤±è´¥:",e),e}}async function y(e,t){try{const n=`${c}${e}_${t}`,a=await u();return new Promise((r,i)=>{const s=a.transaction([o],"readonly").objectStore(o).get(n);s.onsuccess=()=>{const n=s.result;n&&n.data?(console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘SaveData å·²åŠ è½½ (${e}/${t})`),r(n.data)):(console.warn(`ã€ä¹¾å¤å®åº“-IDBã€‘SaveData ä¸å­˜åœ¨ (${e}/${t})`),r(null))},s.onerror=()=>{console.error("ã€ä¹¾å¤å®åº“-IDBã€‘åŠ è½½ SaveData å¤±è´¥:",s.error),i(s.error)}})}catch(e){return console.error("ã€ä¹¾å¤å®åº“-IDBã€‘åŠ è½½ SaveData æ—¶å‡ºé”™:",e),null}}async function x(e,t){try{const n=`${c}${e}_${t}`,a=await u();return new Promise((r,i)=>{const s=a.transaction([o],"readwrite").objectStore(o).delete(n);s.onsuccess=()=>{console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘SaveData å·²åˆ é™¤ (${e}/${t})`),r()},s.onerror=()=>{console.error("ã€ä¹¾å¤å®åº“-IDBã€‘åˆ é™¤ SaveData å¤±è´¥:",s.error),i(s.error)}})}catch(e){throw console.error("ã€ä¹¾å¤å®åº“-IDBã€‘åˆ é™¤ SaveData æ—¶å‡ºé”™:",e),e}}async function k(e){try{const t=await u(),n=`${c}${e}_`;return console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘å¼€å§‹æ¸…ç†è§’è‰² ${e} çš„æ‰€æœ‰å­˜æ¡£...`),new Promise((e,a)=>{const r=t.transaction([o],"readwrite").objectStore(o),i=r.getAllKeys();i.onsuccess=()=>{const t=i.result.filter(e=>"string"==typeof e&&e.startsWith(n));if(console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘æ‰¾åˆ° ${t.length} ä¸ªå­˜æ¡£è®°å½•å¾…åˆ é™¤:`,t),0===t.length)return console.log("ã€ä¹¾å¤å®åº“-IDBã€‘æ²¡æœ‰æ‰¾åˆ°éœ€è¦åˆ é™¤çš„å­˜æ¡£"),void e(0);let a=0,o=0;t.forEach(n=>{const i=r.delete(n);i.onsuccess=()=>{a++,console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘âœ… å·²åˆ é™¤: ${n}`),a+o===t.length&&(console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘æ‰¹é‡åˆ é™¤å®Œæˆï¼ŒæˆåŠŸ ${a} ä¸ªï¼Œå¤±è´¥ ${o} ä¸ª`),e(a))},i.onerror=()=>{o++,console.error(`ã€ä¹¾å¤å®åº“-IDBã€‘âŒ åˆ é™¤å¤±è´¥: ${n}`,i.error),a+o===t.length&&(console.log(`ã€ä¹¾å¤å®åº“-IDBã€‘æ‰¹é‡åˆ é™¤å®Œæˆï¼ŒæˆåŠŸ ${a} ä¸ªï¼Œå¤±è´¥ ${o} ä¸ª`),e(a))}})},i.onerror=()=>{console.error("ã€ä¹¾å¤å®åº“-IDBã€‘è·å–æ‰€æœ‰é”®å¤±è´¥:",i.error),a(i.error)}})}catch(e){throw console.error("ã€ä¹¾å¤å®åº“-IDBã€‘æ‰¹é‡åˆ é™¤å­˜æ¡£æ•°æ®æ—¶å‡ºé”™:",e),e}}async function w(e){try{const t=await u();return new Promise((n,a)=>{const r=t.transaction([o],"readonly").objectStore(o).get(e);r.onsuccess=()=>{const e=r.result;e&&e.data?n(e.data):n(null)},r.onerror=()=>{a(r.error)}})}catch(t){return console.error(`ã€ä¹¾å¤å®åº“-IDBã€‘ä» IndexedDB åŠ è½½æ•°æ®å¤±è´¥ (key: ${e}):`,t),null}}},5218:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.retry-dialog-overlay[data-v-67dbe82b] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 99999;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  backdrop-filter: blur(4px);\n}\n.retry-dialog[data-v-67dbe82b] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 16px;\n  width: 100%;\n  max-width: 480px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);\n  animation: dialog-appear-67dbe82b 0.3s ease-out;\n  overflow: hidden;\n  /* ç¡®ä¿èƒŒæ™¯å®Œå…¨è´´åˆ */\n  display: flex;\n  flex-direction: column;\n}\n@keyframes dialog-appear-67dbe82b {\nfrom {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n}\n}\n.dialog-header[data-v-67dbe82b] {\n  padding: 24px 24px 16px;\n  text-align: center;\n  background: var(--color-surface);\n  /* å»é™¤å¯èƒ½çš„é—´éš™ */\n  margin: 0;\n  flex-shrink: 0;\n}\n.dialog-header h3[data-v-67dbe82b] {\n  margin: 0;\n  padding: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--color-text);\n  line-height: 1.4;\n}\n.dialog-content[data-v-67dbe82b] {\n  padding: 20px 24px;\n  text-align: center;\n  background: var(--color-surface);\n  /* ç¡®ä¿å†…å®¹åŒºåŸŸå¯æ»šåŠ¨ä½†ä¸è¶…å‡º */\n  max-height: 50vh;\n  overflow-y: auto;\n  overflow-x: hidden;\n  /* å»é™¤å¯èƒ½çš„é—´éš™ */\n  margin: 0;\n  flex: 1;\n}\n\n/* æ»šåŠ¨æ¡æ ·å¼ä¼˜åŒ– */\n.dialog-content[data-v-67dbe82b]::-webkit-scrollbar {\n  width: 6px;\n}\n.dialog-content[data-v-67dbe82b]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.dialog-content[data-v-67dbe82b]::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n}\n.dialog-content[data-v-67dbe82b]::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.4);\n}\n.error-icon[data-v-67dbe82b] {\n  color: var(--color-warning);\n  margin: 0 0 16px 0;\n  padding: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.message[data-v-67dbe82b] {\n  color: var(--color-text);\n  line-height: 1.6;\n  margin: 0;\n  padding: 0;\n  white-space: pre-line;\n  text-align: left;\n  word-break: break-word;\n}\n.dialog-actions[data-v-67dbe82b] {\n  display: flex;\n  gap: 12px;\n  padding: 16px 24px 24px;\n  background: var(--color-surface);\n  /* å»é™¤å¯èƒ½çš„é—´éš™ */\n  margin: 0;\n  flex-shrink: 0;\n}\n.btn-primary[data-v-67dbe82b],\n.btn-secondary[data-v-67dbe82b] {\n  flex: 1;\n  padding: 12px 20px;\n  margin: 0;\n  border-radius: 8px;\n  border: 1px solid;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 14px;\n  line-height: 1.5;\n}\n.btn-primary[data-v-67dbe82b] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n.btn-primary[data-v-67dbe82b]:hover {\n  background: var(--color-primary-hover);\n  border-color: var(--color-primary-hover);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n.btn-secondary[data-v-67dbe82b] {\n  background: transparent;\n  border-color: var(--color-border);\n  color: var(--color-text-secondary);\n}\n.btn-secondary[data-v-67dbe82b]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-text-secondary);\n  color: var(--color-text);\n  transform: translateY(-1px);\n}\n.btn-primary[data-v-67dbe82b]:active,\n.btn-secondary[data-v-67dbe82b]:active {\n  transform: translateY(0) scale(0.98);\n}\n@media (max-width: 480px) {\n.retry-dialog-overlay[data-v-67dbe82b] {\n    padding: 16px;\n}\n.retry-dialog[data-v-67dbe82b] {\n    max-width: none;\n    border-radius: 12px;\n}\n.dialog-header[data-v-67dbe82b] {\n    padding: 20px 20px 12px;\n}\n.dialog-header h3[data-v-67dbe82b] {\n    font-size: 1.1rem;\n}\n.dialog-content[data-v-67dbe82b] {\n    padding: 16px 20px;\n    max-height: 60vh;\n}\n.dialog-actions[data-v-67dbe82b] {\n    flex-direction: column-reverse;\n    gap: 10px;\n    padding: 12px 20px 20px;\n}\n.btn-primary[data-v-67dbe82b],\n  .btn-secondary[data-v-67dbe82b] {\n    flex: none;\n    width: 100%;\n}\n}\n",""]);const s=i},5224:e=>{"use strict";e.exports="data:image/svg+xml,%3Csvg width=%2760%27 height=%2760%27 viewBox=%270 0 60 60%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cg fill=%27none%27 fill-rule=%27evenodd%27%3E%3Cg fill=%27%23ffffff%27 fill-opacity=%270.08%27%3E%3Cpath d=%27M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z%27/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"},5269:(e,t,n)=>{"use strict";function a(e){if("number"==typeof e&&Number.isFinite(e))return e;if("string"==typeof e){const t=e.trim();if(!t)return null;const n=Number(t);return Number.isFinite(n)?n:null}return null}function r(e){if(Array.isArray(e))return e.map(e=>"string"==typeof e?e.trim():"").filter(Boolean);if("string"==typeof e){const t=e.trim();return t?t.split(/[ã€,ï¼Œ;ï¼›\n]/).map(e=>e.trim()).filter(Boolean):[]}return null}function o(e){const{action:t,key:n,value:o}=e,l=[];try{if("è§’è‰².å±æ€§.å¢ƒç•Œ"===n&&"set"===t){const e=i(o);l.push(...e.errors)}if("è§’è‰².ä½ç½®"===n&&"set"===t){const e=function(e){const t=[];return"object"!=typeof e||null===e?(t.push("ä½ç½®å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),{valid:!1,errors:t}):(e.æè¿°||t.push('ä½ç½®ç¼ºå°‘"æè¿°"å­—æ®µ'),void 0!==e.x&&"number"!=typeof e.x&&t.push("ä½ç½®.xç±»å‹é”™è¯¯ï¼Œåº”ä¸ºæ•°å­—"),void 0!==e.y&&"number"!=typeof e.y&&t.push("ä½ç½®.yç±»å‹é”™è¯¯ï¼Œåº”ä¸ºæ•°å­—"),void 0!==e.åœ°å›¾ID&&"string"!=typeof e.åœ°å›¾ID&&t.push("ä½ç½®.åœ°å›¾IDç±»å‹é”™è¯¯ï¼Œåº”ä¸ºå­—ç¬¦ä¸²"),{valid:0===t.length,errors:t})}(o);l.push(...e.errors)}if("è§’è‰².æ•ˆæœ"===n&&"push"===t){const e=function(e){const t=[];return"object"!=typeof e||null===e?(t.push("çŠ¶æ€æ•ˆæœå¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),{valid:!1,errors:t}):(e.çŠ¶æ€åç§°||t.push('çŠ¶æ€æ•ˆæœç¼ºå°‘"çŠ¶æ€åç§°"å­—æ®µ'),e.ç±»å‹&&["buff","debuff"].includes(e.ç±»å‹)||t.push('çŠ¶æ€æ•ˆæœç¼ºå°‘"ç±»å‹"å­—æ®µæˆ–å€¼æ— æ•ˆ'),void 0===e.çŠ¶æ€æè¿°&&t.push('çŠ¶æ€æ•ˆæœç¼ºå°‘"çŠ¶æ€æè¿°"å­—æ®µ'),"number"!=typeof e.æŒç»­æ—¶é—´åˆ†é’Ÿ&&t.push('çŠ¶æ€æ•ˆæœç¼ºå°‘"æŒç»­æ—¶é—´åˆ†é’Ÿ"å­—æ®µæˆ–ç±»å‹é”™è¯¯'),e.ç”Ÿæˆæ—¶é—´&&"object"==typeof e.ç”Ÿæˆæ—¶é—´||t.push('çŠ¶æ€æ•ˆæœç¼ºå°‘"ç”Ÿæˆæ—¶é—´"å¯¹è±¡å­—æ®µ'),{valid:0===t.length,errors:t})}(o);l.push(...e.errors)}if("è§’è‰².èƒŒåŒ….ç‰©å“"===n&&"push"===t){const e=s(o);l.push(...e.errors)}if(n.startsWith("è§’è‰².èƒŒåŒ….ç‰©å“.")&&"set"===t&&3===(n.match(/\./g)||[]).length){const e=s(o);l.push(...e.errors)}if(n.startsWith("ç¤¾äº¤.å…³ç³».")&&2===(n.match(/\./g)||[]).length&&"set"===t&&o&&"object"==typeof o&&o.åå­—&&o.æ€§åˆ«&&o.å‡ºç”Ÿæ—¥æœŸ&&(o.å¤–è²Œæè¿°||o.æ€§æ ¼ç‰¹å¾||o.å¢ƒç•Œ)){const e=function(e){const t=[];if("object"!=typeof e||null===e)return t.push("NPCå¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),{valid:!1,errors:t};if(e.åå­—||t.push('NPCç¼ºå°‘"åå­—"å­—æ®µ'),e.æ€§åˆ«||t.push('NPCç¼ºå°‘"æ€§åˆ«"å­—æ®µ'),e.å‡ºç”Ÿæ—¥æœŸ||t.push('NPCç¼ºå°‘"å‡ºç”Ÿæ—¥æœŸ"å­—æ®µ'),e.å¢ƒç•Œ){const n=i(e.å¢ƒç•Œ);t.push(...n.errors)}else t.push('NPCç¼ºå°‘"å¢ƒç•Œ"å­—æ®µ');if(e.å‡ºç”Ÿ||t.push('NPCç¼ºå°‘"å‡ºç”Ÿ"å­—æ®µ'),void 0!==e.æ€§æ ¼ç‰¹å¾){const t=r(e.æ€§æ ¼ç‰¹å¾);t&&(e.æ€§æ ¼ç‰¹å¾=t)}if(e.æ€§æ ¼ç‰¹å¾||t.push('NPCç¼ºå°‘"æ€§æ ¼ç‰¹å¾"å­—æ®µ'),e.å¤–è²Œæè¿°||t.push('NPCç¼ºå°‘"å¤–è²Œæè¿°"å­—æ®µ'),e.ä¸ç©å®¶å…³ç³»||t.push('NPCç¼ºå°‘"ä¸ç©å®¶å…³ç³»"å­—æ®µ'),void 0!==e.å¥½æ„Ÿåº¦){const t=a(e.å¥½æ„Ÿåº¦);null!==t&&(e.å¥½æ„Ÿåº¦=t)}if("number"!=typeof e.å¥½æ„Ÿåº¦&&t.push('NPCç¼ºå°‘"å¥½æ„Ÿåº¦"å­—æ®µæˆ–ç±»å‹é”™è¯¯'),void 0===e.å¤©èµ‹||Array.isArray(e.å¤©èµ‹)||t.push("NPCå¤©èµ‹å¿…é¡»æ˜¯æ•°ç»„ç±»å‹"),e.ç§å¯†ä¿¡æ¯&&"object"==typeof e.ç§å¯†ä¿¡æ¯&&void 0!==e.ç§å¯†ä¿¡æ¯.èº«ä½“éƒ¨ä½){const n=e.ç§å¯†ä¿¡æ¯.èº«ä½“éƒ¨ä½;Array.isArray(n)||n&&"object"==typeof n||t.push("NPCç§å¯†ä¿¡æ¯.èº«ä½“éƒ¨ä½å¿…é¡»æ˜¯æ•°ç»„æˆ–å¯¹è±¡ç±»å‹")}if(void 0!==e.è®°å¿†&&!Array.isArray(e.è®°å¿†)){const t=r(e.è®°å¿†);t&&(e.è®°å¿†=t)}return{valid:0===t.length,errors:t}}(o);l.push(...e.errors)}if(n.includes("ç¤¾äº¤.å…³ç³».")&&n.endsWith(".å¢ƒç•Œ")&&"set"===t){const e=i(o);l.push(...e.errors)}if(n.startsWith("è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.")&&"set"===t&&3===(n.match(/\./g)||[]).length){const e=function(e,t){const n=[];if("object"!=typeof e||null===e)return n.push("å¤§é“å¯¹è±¡å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),{valid:!1,errors:n};if(!e.é“å){const a=t||e.name||e.åç§°;a?e.é“å=a:n.push('å¤§é“å¯¹è±¡ç¼ºå°‘"é“å"å­—æ®µ')}return void 0===e.æè¿°&&(e.æè¿°=e.description||"ä¿®è¡Œä¹‹é“"),Array.isArray(e.é˜¶æ®µåˆ—è¡¨)||(e.é˜¶æ®µåˆ—è¡¨=[{é˜¶æ®µå:"å…¥é—¨",éœ€æ±‚ç»éªŒ:100},{é˜¶æ®µå:"å°æˆ",éœ€æ±‚ç»éªŒ:500},{é˜¶æ®µå:"å¤§æˆ",éœ€æ±‚ç»éªŒ:2e3},{é˜¶æ®µå:"åœ†æ»¡",éœ€æ±‚ç»éªŒ:1e4}]),"boolean"!=typeof e.æ˜¯å¦è§£é”&&(e.æ˜¯å¦è§£é”=!0),"number"!=typeof e.å½“å‰é˜¶æ®µ&&(e.å½“å‰é˜¶æ®µ=0),"number"!=typeof e.å½“å‰ç»éªŒ&&(e.å½“å‰ç»éªŒ=0),"number"!=typeof e.æ€»ç»éªŒ&&(e.æ€»ç»éªŒ=0),{valid:0===n.length,errors:n}}(o,n.split(".")[3]);l.push(...e.errors)}if("ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨"===n&&"push"===t){const e=function(e){const t=[];return"object"!=typeof e||null===e?(t.push("ä»»åŠ¡å¯¹è±¡å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),{valid:!1,errors:t}):(e.ä»»åŠ¡ID||t.push('ä»»åŠ¡ç¼ºå°‘"ä»»åŠ¡ID"å­—æ®µ'),e.ä»»åŠ¡åç§°||t.push('ä»»åŠ¡ç¼ºå°‘"ä»»åŠ¡åç§°"å­—æ®µ'),void 0===e.ä»»åŠ¡æè¿°&&t.push('ä»»åŠ¡ç¼ºå°‘"ä»»åŠ¡æè¿°"å­—æ®µ'),e.ä»»åŠ¡çŠ¶æ€||t.push('ä»»åŠ¡ç¼ºå°‘"ä»»åŠ¡çŠ¶æ€"å­—æ®µ'),e.ä»»åŠ¡ç±»å‹||t.push('ä»»åŠ¡ç¼ºå°‘"ä»»åŠ¡ç±»å‹"å­—æ®µ'),{valid:0===t.length,errors:t})}(o);l.push(...e.errors)}return{valid:0===l.length,errors:l}}catch(e){return console.error("[æŒ‡ä»¤å€¼éªŒè¯] éªŒè¯è¿‡ç¨‹å‘ç”Ÿå¼‚å¸¸:",e),{valid:!1,errors:[`éªŒè¯è¿‡ç¨‹å¼‚å¸¸: ${e instanceof Error?e.message:String(e)}`]}}}function i(e,t){const n=[];if("object"!=typeof e||null===e)return n.push("å¢ƒç•Œå¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),{valid:!1,errors:n};if(e.åç§°||n.push('å¢ƒç•Œç¼ºå°‘"åç§°"å­—æ®µ'),e.é˜¶æ®µ||n.push('å¢ƒç•Œç¼ºå°‘"é˜¶æ®µ"å­—æ®µ'),void 0!==e.å½“å‰è¿›åº¦){const t=a(e.å½“å‰è¿›åº¦);null===t?n.push('å¢ƒç•Œ"å½“å‰è¿›åº¦"å­—æ®µç±»å‹é”™è¯¯ï¼Œåº”ä¸ºæ•°å­—'):e.å½“å‰è¿›åº¦=t}if(void 0!==e.ä¸‹ä¸€çº§æ‰€éœ€){const t=a(e.ä¸‹ä¸€çº§æ‰€éœ€);null===t?n.push('å¢ƒç•Œ"ä¸‹ä¸€çº§æ‰€éœ€"å­—æ®µç±»å‹é”™è¯¯ï¼Œåº”ä¸ºæ•°å­—'):e.ä¸‹ä¸€çº§æ‰€éœ€=t}return void 0!==e.çªç ´æè¿°&&"string"!=typeof e.çªç ´æè¿°&&n.push('å¢ƒç•Œ"çªç ´æè¿°"å­—æ®µç±»å‹é”™è¯¯ï¼Œåº”ä¸ºå­—ç¬¦ä¸²'),{valid:0===n.length,errors:n}}function s(e){const t=[];return"object"!=typeof e||null===e?(t.push("ç‰©å“å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"),{valid:!1,errors:t}):(e.ç‰©å“ID||t.push('ç‰©å“ç¼ºå°‘"ç‰©å“ID"å­—æ®µ'),e.åç§°||t.push('ç‰©å“ç¼ºå°‘"åç§°"å­—æ®µ'),e.ç±»å‹||t.push('ç‰©å“ç¼ºå°‘"ç±»å‹"å­—æ®µ'),e.å“è´¨?"object"==typeof e.å“è´¨?(e.å“è´¨.quality||t.push('ç‰©å“å“è´¨ç¼ºå°‘"quality"å­—æ®µ'),"number"!=typeof e.å“è´¨.grade&&t.push('ç‰©å“å“è´¨ç¼ºå°‘"grade"å­—æ®µæˆ–ç±»å‹é”™è¯¯')):t.push("ç‰©å“å“è´¨å¿…é¡»æ˜¯å¯¹è±¡ç±»å‹"):t.push('ç‰©å“ç¼ºå°‘"å“è´¨"å­—æ®µ'),"number"!=typeof e.æ•°é‡&&t.push('ç‰©å“ç¼ºå°‘"æ•°é‡"å­—æ®µæˆ–ç±»å‹é”™è¯¯'),void 0===e.æè¿°&&t.push('ç‰©å“ç¼ºå°‘"æè¿°"å­—æ®µ'),"åŠŸæ³•"===e.ç±»å‹&&(Array.isArray(e.åŠŸæ³•æŠ€èƒ½)?0===e.åŠŸæ³•æŠ€èƒ½.length?t.push('åŠŸæ³•ç‰©å“çš„"åŠŸæ³•æŠ€èƒ½"æ•°ç»„ä¸èƒ½ä¸ºç©ºï¼Œè‡³å°‘éœ€è¦1ä¸ªæŠ€èƒ½'):e.åŠŸæ³•æŠ€èƒ½.forEach((e,n)=>{"object"!=typeof e||null===e?t.push(`åŠŸæ³•æŠ€èƒ½[${n}]ä¸æ˜¯å¯¹è±¡ç±»å‹`):(e.æŠ€èƒ½åç§°||t.push(`åŠŸæ³•æŠ€èƒ½[${n}]ç¼ºå°‘"æŠ€èƒ½åç§°"å­—æ®µ`),void 0===e.æŠ€èƒ½æè¿°&&t.push(`åŠŸæ³•æŠ€èƒ½[${n}]ç¼ºå°‘"æŠ€èƒ½æè¿°"å­—æ®µ`),"number"!=typeof e.ç†Ÿç»ƒåº¦è¦æ±‚&&t.push(`åŠŸæ³•æŠ€èƒ½[${n}]ç¼ºå°‘"ç†Ÿç»ƒåº¦è¦æ±‚"å­—æ®µæˆ–ç±»å‹é”™è¯¯`))}):t.push('åŠŸæ³•ç‰©å“ç¼ºå°‘"åŠŸæ³•æŠ€èƒ½"æ•°ç»„')),{valid:0===t.length,errors:t})}n.d(t,{validateAndRepairCommandValue:()=>o})},5342:(e,t,n)=>{"use strict";n.d(t,{A:()=>vt});var a=n(4061),r=n(5365),o=n(3528),i=n(6680),s=n(8133);const l=(0,n(9596).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var c=n(1783),d=n(6494),u=n(8684),m=n(100),p=n(2288),f=n(9173),g=n(4270),h=n(876);const v={class:"api-management-panel"},b={class:"panel-header"},y={class:"header-left"},x={class:"header-info"},k={class:"panel-title"},w={class:"settings-subtitle"},E={class:"header-actions"},N={class:"btn-text"},S={class:"btn-text"},V={class:"btn-text"},_={class:"settings-container"},C={class:"settings-section"},A={class:"section-header"},D={class:"section-title"},T={class:"section-count"},B={class:"api-list"},I={class:"api-card-header"},z={class:"api-info"},M={class:"api-name"},P={class:"api-provider"},R={class:"api-actions"},$=["title"],O=["checked","onChange"],L=["onClick","title"],F=["onClick","title"],j=["onClick","title","disabled"],U={class:"api-card-body"},q={class:"api-detail"},G={class:"detail-label"},H={class:"detail-value"},Y={class:"api-detail"},W={class:"detail-label"},X={class:"detail-value url"},J={class:"api-detail"},K={class:"detail-label"},Q={key:0,class:"api-card-footer"},Z={class:"assigned-label"},ee={class:"assigned-tags"},te={class:"settings-section"},ne={class:"section-header"},ae={class:"section-title"},re={class:"settings-list"},oe={class:"setting-info"},ie={class:"setting-name"},se={class:"setting-desc"},le={class:"setting-control"},ce=["value","onChange"],de=["value"],ue={class:"settings-section"},me={class:"section-header"},pe={class:"section-title"},fe={class:"settings-list"},ge={class:"setting-item"},he={class:"setting-info"},ve={class:"setting-name"},be={class:"setting-desc"},ye={class:"setting-control"},xe={class:"setting-switch"},ke={class:"setting-item"},we={class:"setting-info"},Ee={class:"setting-name"},Ne={class:"setting-desc"},Se={class:"setting-control"},Ve={value:"raw"},_e={value:"standard"},Ce={class:"setting-item"},Ae={class:"setting-info"},De={class:"setting-name"},Te={class:"setting-desc"},Be={class:"setting-control"},Ie={value:"generate"},ze={value:"generateRaw"},Me={class:"modal-content"},Pe={class:"modal-header"},Re={class:"modal-body"},$e={class:"form-group"},Oe=["placeholder"],Le={class:"form-group"},Fe={value:"custom"},je={class:"form-group"},Ue=["placeholder"],qe={class:"form-group"},Ge={class:"form-group"},He={class:"model-select-wrapper"},Ye={class:"model-input-row"},We=["placeholder"],Xe=["disabled"],Je={key:0,class:"model-dropdown"},Ke=["onMousedown"],Qe={class:"form-row"},Ze={class:"form-group half"},et={class:"form-group half"},tt={class:"modal-footer"},nt=(0,a.defineComponent)({__name:"APIManagementPanel",setup(e){const{t}=(0,h.s)(),n=(0,m.useAPIManagementStore)(),nt=(0,f.useUIStore)();(0,a.onMounted)(()=>{n.loadFromStorage(),it()});const at=(0,a.ref)(!0),rt=(0,a.ref)("raw"),ot=(0,a.ref)("generate"),it=()=>{const e=p.aiService.getConfig();at.value=!1!==e.streaming,rt.value=e.memorySummaryMode||"raw",ot.value=e.initMode||"generate"};(0,a.watch)([at,rt,ot],()=>{p.aiService.saveConfig({streaming:at.value,memorySummaryMode:rt.value,initMode:ot.value}),nt.useStreaming=at.value});const st=(0,a.ref)(!1),lt=(0,a.ref)(!1),ct=(0,a.ref)({name:"",provider:"openai",url:"",apiKey:"",model:"gpt-4o",temperature:.7,maxTokens:16e3,enabled:!0}),dt=(0,a.ref)(null),ut=(0,a.ref)(!1),mt=(0,a.ref)([]),pt=(0,a.ref)(!1),ft=(0,a.computed)(()=>{const e=ct.value.model?.toLowerCase()||"";return e?mt.value.filter(t=>t.toLowerCase().includes(e)):mt.value}),gt=()=>{pt.value=!0},ht=(0,a.ref)(null),vt=(0,a.ref)({}),bt=e=>p.o[e]?.url||"https://api.openai.com",yt=e=>p.o[e]?.defaultModel||"gpt-4o",xt=()=>{const e=p.o[ct.value.provider];e&&(ct.value.url=e.url,ct.value.model=e.defaultModel)},kt=e=>({main:"ä¸»æ¸¸æˆæµç¨‹",memory_summary:"è®°å¿†æ€»ç»“",text_optimization:"æ–‡æœ¬ä¼˜åŒ–",cot:"æ€ç»´é“¾",world_generation:"ä¸–ç•Œç”Ÿæˆ",quest_generation:"ä»»åŠ¡ç”Ÿæˆ",npc_generation:"NPCç”Ÿæˆ",split_generation_step2:"åˆ†æ­¥ç”Ÿæˆç¬¬äºŒæ­¥"}[e]||e),wt=e=>n.apiAssignments.filter(t=>t.apiId===e).map(e=>e.type),Et=e=>{const t=vt.value[e];return"success"===t?"success":"fail"===t?"fail":"unknown"},Nt=e=>{const n=vt.value[e];return t("success"===n?"è¿æ¥æ­£å¸¸":"fail"===n?"è¿æ¥å¤±è´¥":"æœªæµ‹è¯•")},St=async()=>{if(!ut.value)if(ct.value.url&&ct.value.apiKey){ut.value=!0;try{const e=p.aiService.getConfig();p.aiService.saveConfig({mode:"custom",customAPI:{provider:ct.value.provider,url:ct.value.url,apiKey:ct.value.apiKey,model:ct.value.model||"gpt-4o",temperature:ct.value.temperature||.7,maxTokens:ct.value.maxTokens||16e3}});const n=await p.aiService.fetchModels();mt.value=n,g.o.success(`${t("è·å–åˆ°")} ${n.length} ${t("ä¸ªæ¨¡å‹")}`),p.aiService.saveConfig(e)}catch(e){g.o.error(t("è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥"))}finally{ut.value=!1}}else g.o.warning(t("è¯·å…ˆå¡«å†™APIåœ°å€å’Œå¯†é’¥"))},Vt=()=>{if(ct.value.name){if(lt.value&&dt.value)n.updateAPI(dt.value,ct.value),g.o.success(t("APIé…ç½®å·²æ›´æ–°"));else{const e={name:ct.value.name,provider:ct.value.provider,url:ct.value.url||bt(ct.value.provider),apiKey:ct.value.apiKey||"",model:ct.value.model||yt(ct.value.provider),temperature:ct.value.temperature||.7,maxTokens:ct.value.maxTokens||16e3,enabled:!0};n.addAPI(e),g.o.success(t("APIé…ç½®å·²æ·»åŠ "))}Ct(),_t()}else g.o.warning(t("è¯·å¡«å†™é…ç½®åç§°"))},_t=()=>{const e=n.apiConfigs.find(e=>"default"===e.id);e&&p.aiService.saveConfig({mode:"custom",customAPI:{provider:e.provider,url:e.url,apiKey:e.apiKey,model:e.model,temperature:e.temperature,maxTokens:e.maxTokens}})},Ct=()=>{st.value=!1,lt.value=!1,dt.value=null,ct.value={name:"",provider:"openai",url:"",apiKey:"",model:"gpt-4o",temperature:.7,maxTokens:16e3,enabled:!0},mt.value=[]},At=()=>{const e=n.exportConfig(),a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),o=document.createElement("a");o.href=r,o.download=`ä»™é€”-APIé…ç½®-${(new Date).toISOString().split("T")[0]}.json`,o.click(),URL.revokeObjectURL(r),g.o.success(t("APIé…ç½®å·²å¯¼å‡º"))},Dt=()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=async e=>{const a=e.target.files?.[0];if(a)try{const e=await a.text(),r=JSON.parse(e);n.importConfig(r),_t(),g.o.success(t("APIé…ç½®å·²å¯¼å…¥"))}catch(e){g.o.error(t("å¯¼å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æ ¼å¼"))}},e.click()};return(e,m)=>((0,a.openBlock)(),(0,a.createElementBlock)("div",v,[(0,a.createCommentVNode)(" å¤´éƒ¨ "),(0,a.createElementVNode)("div",b,[(0,a.createElementVNode)("div",y,[m[12]||(m[12]=(0,a.createElementVNode)("div",{class:"header-icon"},"ğŸ”Œ",-1)),(0,a.createElementVNode)("div",x,[(0,a.createElementVNode)("h3",k,(0,a.toDisplayString)((0,a.unref)(t)("APIç®¡ç†")),1),(0,a.createElementVNode)("span",w,(0,a.toDisplayString)((0,a.unref)(t)("ç®¡ç†å¤šä¸ªAPIé…ç½®å’ŒåŠŸèƒ½åˆ†é…")),1)])]),(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("button",{class:"action-btn",onClick:Dt},[(0,a.createVNode)((0,a.unref)(r.A),{size:16}),(0,a.createElementVNode)("span",N,(0,a.toDisplayString)((0,a.unref)(t)("å¯¼å…¥")),1)]),(0,a.createElementVNode)("button",{class:"action-btn",onClick:At},[(0,a.createVNode)((0,a.unref)(o.A),{size:16}),(0,a.createElementVNode)("span",S,(0,a.toDisplayString)((0,a.unref)(t)("å¯¼å‡º")),1)]),(0,a.createElementVNode)("button",{class:"action-btn primary",onClick:m[0]||(m[0]=e=>st.value=!0)},[(0,a.createVNode)((0,a.unref)(i.A),{size:16}),(0,a.createElementVNode)("span",V,(0,a.toDisplayString)((0,a.unref)(t)("æ–°å¢API")),1)])])]),(0,a.createCommentVNode)(" å†…å®¹åŒºåŸŸ "),(0,a.createElementVNode)("div",_,[(0,a.createCommentVNode)(" APIåˆ—è¡¨åŒº "),(0,a.createElementVNode)("div",C,[(0,a.createElementVNode)("div",A,[(0,a.createElementVNode)("h4",D,"ğŸ“¡ "+(0,a.toDisplayString)((0,a.unref)(t)("APIé…ç½®åˆ—è¡¨")),1),(0,a.createElementVNode)("span",T,(0,a.toDisplayString)((0,a.unref)(n).apiConfigs.length)+" "+(0,a.toDisplayString)((0,a.unref)(t)("ä¸ªé…ç½®")),1)]),(0,a.createElementVNode)("div",B,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(n).apiConfigs,e=>{return(0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.id,class:(0,a.normalizeClass)(["api-card",{disabled:!e.enabled,default:"default"===e.id}])},[(0,a.createElementVNode)("div",I,[(0,a.createElementVNode)("div",z,[(0,a.createElementVNode)("span",M,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)("span",P,(0,a.toDisplayString)((r=e.provider,p.o[r]?.name||r)),1)]),(0,a.createElementVNode)("div",R,[(0,a.createElementVNode)("label",{class:"setting-switch",title:(0,a.unref)(t)("å¯ç”¨/ç¦ç”¨")},[(0,a.createElementVNode)("input",{type:"checkbox",checked:e.enabled,onChange:t=>{return a=e.id,void n.toggleAPI(a);var a}},null,40,O),m[13]||(m[13]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))],8,$),(0,a.createElementVNode)("button",{class:"icon-btn",onClick:n=>(async e=>{if(!ht.value){ht.value=e.id;try{const n=p.aiService.getConfig();p.aiService.saveConfig({mode:"custom",customAPI:{provider:e.provider,url:e.url,apiKey:e.apiKey,model:e.model,temperature:e.temperature,maxTokens:e.maxTokens}});const a="ä½ æ­£åœ¨è¿›è¡ŒAPIè¿é€šæ€§æµ‹è¯•ã€‚è¯·ä»…è¾“å‡ºï¼šä»™é€”æœ¬-è¿é€šæµ‹è¯•-OK",r=await p.aiService.generate({user_input:a,should_stream:!1,generation_id:`api_test_${Date.now()}`}),o=r.toLowerCase().includes("ä»™é€”æœ¬")||r.toLowerCase().includes("ok");vt.value[e.id]=o?"success":"fail",o?g.o.success(`${e.name} ${t("è¿æ¥æˆåŠŸ")}`):g.o.warning(`${e.name} ${t("å“åº”å¼‚å¸¸")}`),p.aiService.saveConfig(n)}catch(n){vt.value[e.id]="fail",g.o.error(`${e.name} ${t("è¿æ¥å¤±è´¥")}: ${n instanceof Error?n.message:"æœªçŸ¥é”™è¯¯"}`)}finally{ht.value=null}}})(e),title:(0,a.unref)(t)("æµ‹è¯•è¿æ¥")},[(0,a.createVNode)((0,a.unref)(s.A),{size:16,class:(0,a.normalizeClass)({"loading-pulse":ht.value===e.id})},null,8,["class"])],8,L),(0,a.createElementVNode)("button",{class:"icon-btn",onClick:t=>(e=>{ct.value={...e},dt.value=e.id,lt.value=!0})(e),title:(0,a.unref)(t)("ç¼–è¾‘")},[(0,a.createVNode)((0,a.unref)(l),{size:16})],8,F),(0,a.createElementVNode)("button",{class:"icon-btn danger",onClick:a=>{var r;"default"!==(r=e.id)?nt.showRetryDialog({title:t("ç¡®è®¤åˆ é™¤"),message:t("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªAPIé…ç½®å—ï¼Ÿä½¿ç”¨å®ƒçš„åŠŸèƒ½å°†è‡ªåŠ¨å›é€€åˆ°é»˜è®¤APIã€‚"),confirmText:t("åˆ é™¤"),cancelText:t("å–æ¶ˆ"),onConfirm:()=>{n.deleteAPI(r),g.o.success(t("APIé…ç½®å·²åˆ é™¤"))},onCancel:()=>{}}):g.o.error(t("ä¸èƒ½åˆ é™¤é»˜è®¤APIé…ç½®"))},title:(0,a.unref)(t)("åˆ é™¤"),disabled:"default"===e.id},[(0,a.createVNode)((0,a.unref)(c.A),{size:16})],8,j)])]),(0,a.createElementVNode)("div",U,[(0,a.createElementVNode)("div",q,[(0,a.createElementVNode)("span",G,(0,a.toDisplayString)((0,a.unref)(t)("æ¨¡å‹"))+":",1),(0,a.createElementVNode)("span",H,(0,a.toDisplayString)(e.model),1)]),(0,a.createElementVNode)("div",Y,[(0,a.createElementVNode)("span",W,(0,a.toDisplayString)((0,a.unref)(t)("åœ°å€"))+":",1),(0,a.createElementVNode)("span",X,(0,a.toDisplayString)(e.url||(0,a.unref)(t)("é»˜è®¤")),1)]),(0,a.createElementVNode)("div",J,[(0,a.createElementVNode)("span",K,(0,a.toDisplayString)((0,a.unref)(t)("çŠ¶æ€"))+":",1),(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)(["detail-value",Et(e.id)])},(0,a.toDisplayString)(Nt(e.id)),3)])]),wt(e.id).length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",Q,[(0,a.createElementVNode)("span",Z,(0,a.toDisplayString)((0,a.unref)(t)("å·²åˆ†é…åŠŸèƒ½"))+":",1),(0,a.createElementVNode)("div",ee,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(wt(e.id),e=>((0,a.openBlock)(),(0,a.createElementBlock)("span",{key:e,class:"function-tag"},(0,a.toDisplayString)(kt(e)),1))),128))])])):(0,a.createCommentVNode)("v-if",!0)],2);var r}),128))])]),(0,a.createCommentVNode)(" åŠŸèƒ½åˆ†é…åŒº "),(0,a.createElementVNode)("div",te,[(0,a.createElementVNode)("div",ne,[(0,a.createElementVNode)("h4",ae,"âš™ï¸ "+(0,a.toDisplayString)((0,a.unref)(t)("åŠŸèƒ½åˆ†é…")),1)]),(0,a.createElementVNode)("div",re,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(n).apiAssignments,e=>{return(0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e.type,class:"setting-item"},[(0,a.createElementVNode)("div",oe,[(0,a.createElementVNode)("label",ie,(0,a.toDisplayString)(kt(e.type)),1),(0,a.createElementVNode)("span",se,(0,a.toDisplayString)((r=e.type,{main:"æ¸¸æˆä¸»è¦äº¤äº’å’Œå‰§æƒ…ç”Ÿæˆ",memory_summary:"å‹ç¼©å’Œæ€»ç»“å†å²è®°å¿†",text_optimization:"ä¼˜åŒ–AIè¾“å‡ºçš„æ–‡æœ¬è´¨é‡",cot:"æ€ç»´é“¾æ¨ç†è¾…åŠ©",world_generation:"ç”Ÿæˆä¸–ç•Œã€åœ°ç‚¹ç­‰å†…å®¹",quest_generation:"ç”Ÿæˆä»»åŠ¡å’Œç›®æ ‡",npc_generation:"ç”ŸæˆNPCè§’è‰²",split_generation_step2:"åˆ†æ­¥ç”Ÿæˆæ¨¡å¼ä¸­ç¬¬äºŒæ­¥ï¼ˆè®°å¿†/æŒ‡ä»¤/è¡ŒåŠ¨é€‰é¡¹ï¼‰çš„ç”Ÿæˆ"}[r]||"")),1)]),(0,a.createElementVNode)("div",le,[(0,a.createElementVNode)("select",{value:e.apiId,onChange:a=>((e,a)=>{n.assignAPI(e,a),g.o.success(`${kt(e)} ${t("å·²åˆ†é…åˆ°")} ${n.apiConfigs.find(e=>e.id===a)?.name||"API"}`)})(e.type,a.target.value),class:"setting-select"},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)((0,a.unref)(n).enabledAPIs,e=>((0,a.openBlock)(),(0,a.createElementBlock)("option",{key:e.id,value:e.id},(0,a.toDisplayString)(e.name),9,de))),128))],40,ce)])]);var r}),128))])]),(0,a.createCommentVNode)(" é€šç”¨AIè®¾ç½®åŒº "),(0,a.createElementVNode)("div",ue,[(0,a.createElementVNode)("div",me,[(0,a.createElementVNode)("h4",pe,"ğŸ¤– "+(0,a.toDisplayString)((0,a.unref)(t)("é€šç”¨AIè®¾ç½®")),1)]),(0,a.createElementVNode)("div",fe,[(0,a.createElementVNode)("div",ge,[(0,a.createElementVNode)("div",he,[(0,a.createElementVNode)("label",ve,(0,a.toDisplayString)((0,a.unref)(t)("æµå¼ä¼ è¾“")),1),(0,a.createElementVNode)("span",be,(0,a.toDisplayString)((0,a.unref)(t)("å®æ—¶æ˜¾ç¤ºAIç”Ÿæˆå†…å®¹")),1)]),(0,a.createElementVNode)("div",ye,[(0,a.createElementVNode)("label",xe,[(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"checkbox","onUpdate:modelValue":m[1]||(m[1]=e=>at.value=e)},null,512),[[a.vModelCheckbox,at.value]]),m[14]||(m[14]=(0,a.createElementVNode)("span",{class:"switch-slider"},null,-1))])])]),(0,a.createElementVNode)("div",ke,[(0,a.createElementVNode)("div",we,[(0,a.createElementVNode)("label",Ee,(0,a.toDisplayString)((0,a.unref)(t)("è®°å¿†æ€»ç»“æ¨¡å¼")),1),(0,a.createElementVNode)("span",Ne,(0,a.toDisplayString)((0,a.unref)(t)("Rawæ¨¡å¼æ›´å‡†ç¡®ï¼Œæ ‡å‡†æ¨¡å¼åŒ…å«é¢„è®¾")),1)]),(0,a.createElementVNode)("div",Se,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":m[2]||(m[2]=e=>rt.value=e),class:"setting-select"},[(0,a.createElementVNode)("option",Ve,(0,a.toDisplayString)((0,a.unref)(t)("Rawæ¨¡å¼ï¼ˆæ¨èï¼‰")),1),(0,a.createElementVNode)("option",_e,(0,a.toDisplayString)((0,a.unref)(t)("æ ‡å‡†æ¨¡å¼")),1)],512),[[a.vModelSelect,rt.value]])])]),(0,a.createElementVNode)("div",Ce,[(0,a.createElementVNode)("div",Ae,[(0,a.createElementVNode)("label",De,(0,a.toDisplayString)((0,a.unref)(t)("å¼€å±€ç”Ÿæˆæ¨¡å¼")),1),(0,a.createElementVNode)("span",Te,(0,a.toDisplayString)((0,a.unref)(t)("è§’è‰²åˆå§‹åŒ–ä½¿ç”¨çš„ç”Ÿæˆæ¨¡å¼")),1)]),(0,a.createElementVNode)("div",Be,[(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":m[3]||(m[3]=e=>ot.value=e),class:"setting-select"},[(0,a.createElementVNode)("option",Ie,(0,a.toDisplayString)((0,a.unref)(t)("æ ‡å‡†æ¨¡å¼")),1),(0,a.createElementVNode)("option",ze,(0,a.toDisplayString)((0,a.unref)(t)("Rawæ¨¡å¼")),1)],512),[[a.vModelSelect,ot.value]])])])])])]),(0,a.createCommentVNode)(" æ–°å¢/ç¼–è¾‘APIå¼¹çª— "),st.value||lt.value?((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:0,class:"modal-overlay",onClick:(0,a.withModifiers)(Ct,["self"])},[(0,a.createElementVNode)("div",Me,[(0,a.createElementVNode)("div",Pe,[(0,a.createElementVNode)("h3",null,(0,a.toDisplayString)(lt.value?(0,a.unref)(t)("ç¼–è¾‘APIé…ç½®"):(0,a.unref)(t)("æ–°å¢APIé…ç½®")),1),(0,a.createElementVNode)("button",{class:"close-btn",onClick:Ct},[(0,a.createVNode)((0,a.unref)(d.A),{size:20})])]),(0,a.createElementVNode)("div",Re,[(0,a.createElementVNode)("div",$e,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)((0,a.unref)(t)("é…ç½®åç§°")),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":m[4]||(m[4]=e=>ct.value.name=e),class:"form-input",placeholder:(0,a.unref)(t)("ä¾‹å¦‚ï¼šä¸»åŠ›API")},null,8,Oe),[[a.vModelText,ct.value.name]])]),(0,a.createElementVNode)("div",Le,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)((0,a.unref)(t)("APIæä¾›å•†")),1),(0,a.withDirectives)((0,a.createElementVNode)("select",{"onUpdate:modelValue":m[5]||(m[5]=e=>ct.value.provider=e),class:"form-select",onChange:xt},[m[15]||(m[15]=(0,a.createElementVNode)("option",{value:"openai"},"OpenAI",-1)),m[16]||(m[16]=(0,a.createElementVNode)("option",{value:"claude"},"Claude",-1)),m[17]||(m[17]=(0,a.createElementVNode)("option",{value:"gemini"},"Gemini",-1)),m[18]||(m[18]=(0,a.createElementVNode)("option",{value:"deepseek"},"DeepSeek",-1)),(0,a.createElementVNode)("option",Fe,(0,a.toDisplayString)((0,a.unref)(t)("è‡ªå®šä¹‰(OpenAIå…¼å®¹)")),1)],544),[[a.vModelSelect,ct.value.provider]])]),(0,a.createElementVNode)("div",je,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)((0,a.unref)(t)("APIåœ°å€")),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":m[6]||(m[6]=e=>ct.value.url=e),class:"form-input",placeholder:bt(ct.value.provider||"openai")},null,8,Ue),[[a.vModelText,ct.value.url]])]),(0,a.createElementVNode)("div",qe,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)((0,a.unref)(t)("APIå¯†é’¥")),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":m[7]||(m[7]=e=>ct.value.apiKey=e),type:"password",class:"form-input",placeholder:"sk-..."},null,512),[[a.vModelText,ct.value.apiKey]])]),(0,a.createElementVNode)("div",Ge,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)((0,a.unref)(t)("æ¨¡å‹åç§°")),1),(0,a.createElementVNode)("div",He,[(0,a.createElementVNode)("div",Ye,[(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":m[8]||(m[8]=e=>ct.value.model=e),class:"form-input",placeholder:yt(ct.value.provider||"openai"),onFocus:m[9]||(m[9]=e=>pt.value=!0),onInput:gt},null,40,We),[[a.vModelText,ct.value.model]]),(0,a.createElementVNode)("button",{class:"utility-btn",onClick:St,disabled:ut.value},[(0,a.createVNode)((0,a.unref)(u.A),{size:16,class:(0,a.normalizeClass)({"loading-pulse":ut.value})},null,8,["class"])],8,Xe)]),pt.value&&ft.value.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",Je,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(ft.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:e,class:(0,a.normalizeClass)(["model-dropdown-item",{active:ct.value.model===e}]),onMousedown:(0,a.withModifiers)(t=>(e=>{ct.value.model=e,pt.value=!1})(e),["prevent"])},(0,a.toDisplayString)(e),43,Ke))),128))])):(0,a.createCommentVNode)("v-if",!0)])]),(0,a.createElementVNode)("div",Qe,[(0,a.createElementVNode)("div",Ze,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)((0,a.unref)(t)("æ¸©åº¦å‚æ•°")),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":m[10]||(m[10]=e=>ct.value.temperature=e),type:"number",class:"form-input",min:"0",max:"2",step:"0.1"},null,512),[[a.vModelText,ct.value.temperature,void 0,{number:!0}]])]),(0,a.createElementVNode)("div",et,[(0,a.createElementVNode)("label",null,(0,a.toDisplayString)((0,a.unref)(t)("æœ€å¤§Tokenæ•°")),1),(0,a.withDirectives)((0,a.createElementVNode)("input",{"onUpdate:modelValue":m[11]||(m[11]=e=>ct.value.maxTokens=e),type:"number",class:"form-input",min:"100",max:"128000"},null,512),[[a.vModelText,ct.value.maxTokens,void 0,{number:!0}]])])])]),(0,a.createElementVNode)("div",tt,[(0,a.createElementVNode)("button",{class:"btn-cancel",onClick:Ct},(0,a.toDisplayString)((0,a.unref)(t)("å–æ¶ˆ")),1),(0,a.createElementVNode)("button",{class:"btn-confirm",onClick:Vt},(0,a.toDisplayString)((0,a.unref)(t)("ä¿å­˜")),1)])])])):(0,a.createCommentVNode)("v-if",!0)]))}});var at=n(5072),rt=n.n(at),ot=n(7825),it=n.n(ot),st=n(7659),lt=n.n(st),ct=n(5056),dt=n.n(ct),ut=n(540),mt=n.n(ut),pt=n(1113),ft=n.n(pt),gt=n(4472),ht={};ht.styleTagTransform=ft(),ht.setAttributes=dt(),ht.insert=lt().bind(null,"head"),ht.domAPI=it(),ht.insertStyleElement=mt(),rt()(gt.A,ht),gt.A&&gt.A.locals&&gt.A.locals;const vt=(0,n(6262).A)(nt,[["__scopeId","data-v-88390262"]])},5345:e=>{"use strict";e.exports=URIError},5365:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},5373:(e,t,n)=>{"use strict";var a=n(8636),r=n(2642),o=n(4765);e.exports={formats:o,parse:r,stringify:a}},5503:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n/* ========== åŸºç¡€å¸ƒå±€ - æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n.step-wrapper[data-v-3aba8ab6] {\n  height: 100%;\n}\n.creation-container[data-v-3aba8ab6] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative;\n  overflow: hidden;\n  box-sizing: border-box;\n  background: transparent; /* é€æ˜èƒŒæ™¯ä»¥æ˜¾ç¤ºè§†é¢‘ */\n}\n.creation-scroll[data-v-3aba8ab6] {\n  width: 95%;\n  max-width: 1200px;\n  height: 92vh;\n  max-height: 92vh;\n  background: rgba(15, 23, 42, 0.75);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 16px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);\n  display: flex;\n  flex-direction: column;\n  padding: 2rem;\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  position: relative;\n  z-index: 1;\n  overflow: hidden;\n}\n\n/* ========== å¤´éƒ¨åŒºåŸŸ ========== */\n.header-container[data-v-3aba8ab6] {\n  margin-bottom: 1.5rem;\n  flex-shrink: 0;\n}\n.header-top[data-v-3aba8ab6] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  flex-wrap: wrap;\n  gap: 0.75rem;\n}\n.mode-indicator[data-v-3aba8ab6] {\n  font-size: 0.75rem;\n  color: #fbbf24;\n  padding: 0.25rem 0.75rem;\n  background: rgba(251, 191, 36, 0.1);\n  border: 1px solid rgba(251, 191, 36, 0.25);\n  border-radius: 4px;\n  font-weight: 500;\n  letter-spacing: 0.05em;\n}\n.cloud-sync-container[data-v-3aba8ab6] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n\n/* ========== è¿›åº¦æ­¥éª¤ ========== */\n.progress-steps[data-v-3aba8ab6] {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  overflow-x: auto;\n  overflow-y: hidden;\n  gap: 0.5rem;\n  padding: 0.5rem 0;\n  scrollbar-width: none;\n  -ms-overflow-style: none;\n}\n.progress-steps[data-v-3aba8ab6]::-webkit-scrollbar {\n  display: none;\n}\n.step[data-v-3aba8ab6] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  opacity: 0.4;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n  min-width: 60px;\n  cursor: default;\n}\n.step.active[data-v-3aba8ab6] {\n  opacity: 1;\n}\n.step-circle[data-v-3aba8ab6] {\n  width: 36px;\n  height: 36px;\n  border-radius: 50%;\n  background: rgba(30, 41, 59, 0.8);\n  border: 2px solid rgba(255, 255, 255, 0.1);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #94a3b8;\n  transition: all 0.3s ease;\n}\n.step.active .step-circle[data-v-3aba8ab6] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(37, 99, 235, 0.9));\n  color: #ffffff;\n  border-color: rgba(96, 165, 250, 0.5);\n  box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);\n}\n.step-label[data-v-3aba8ab6] {\n  margin-top: 0.5rem;\n  font-size: 0.7rem;\n  color: #64748b;\n  text-align: center;\n  letter-spacing: 0.05em;\n}\n.step.active .step-label[data-v-3aba8ab6] {\n  color: #f1f5f9;\n  font-weight: 500;\n}\n\n/* ========== å†…å®¹åŒºåŸŸ ========== */\n.step-content[data-v-3aba8ab6] {\n  flex: 1 1 0;\n  min-height: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 1.5rem 0.5rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.step-content[data-v-3aba8ab6]::-webkit-scrollbar {\n  width: 6px;\n}\n.step-content[data-v-3aba8ab6]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.step-content[data-v-3aba8ab6]::-webkit-scrollbar-thumb {\n  background: rgba(147, 197, 253, 0.3);\n  border-radius: 3px;\n}\n.step-content[data-v-3aba8ab6]::-webkit-scrollbar-thumb:hover {\n  background: rgba(147, 197, 253, 0.5);\n}\n\n/* ========== å¯¼èˆªæŒ‰é’® ========== */\n.navigation-buttons[data-v-3aba8ab6] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n  flex-shrink: 0;\n  padding-top: 1.5rem;\n  position: relative;\n}\n.points-display[data-v-3aba8ab6] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n}\n.destiny-points[data-v-3aba8ab6] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  background: rgba(30, 41, 59, 0.6);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n  border-radius: 8px;\n}\n.points-label[data-v-3aba8ab6] {\n  color: #94a3b8;\n  font-size: 0.85rem;\n}\n.points-value[data-v-3aba8ab6] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #93c5fd;\n}\n.points-value.low[data-v-3aba8ab6] {\n  color: #f87171;\n  animation: pulse-3aba8ab6 1s ease-in-out infinite;\n}\n@keyframes pulse-3aba8ab6 {\n0%, 100% { opacity: 1;\n}\n50% { opacity: 0.5;\n}\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .creation-scroll[data-v-3aba8ab6] {\n  background: rgba(255, 255, 255, 0.85);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .mode-indicator[data-v-3aba8ab6] {\n  color: #d97706;\n  background: rgba(251, 191, 36, 0.15);\n  border-color: rgba(251, 191, 36, 0.3);\n}\n[data-theme="light"] .step-circle[data-v-3aba8ab6] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.1);\n  color: #64748b;\n}\n[data-theme="light"] .step.active .step-circle[data-v-3aba8ab6] {\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  border-color: rgba(59, 130, 246, 0.5);\n}\n[data-theme="light"] .step-label[data-v-3aba8ab6] {\n  color: #94a3b8;\n}\n[data-theme="light"] .step.active .step-label[data-v-3aba8ab6] {\n  color: #1e293b;\n}\n[data-theme="light"] .step-content[data-v-3aba8ab6] {\n  border-color: rgba(0, 0, 0, 0.06);\n}\n[data-theme="light"] .destiny-points[data-v-3aba8ab6] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .points-label[data-v-3aba8ab6] {\n  color: #64748b;\n}\n[data-theme="light"] .points-value[data-v-3aba8ab6] {\n  color: #3b82f6;\n}\n\n/* ========== å¹³æ¿é€‚é… ========== */\n@media (max-width: 768px) {\n.creation-scroll[data-v-3aba8ab6] {\n    width: 98%;\n    height: 95vh;\n    max-height: 95vh;\n    padding: 1.5rem;\n    border-radius: 12px;\n}\n.header-container[data-v-3aba8ab6] {\n    margin-bottom: 1rem;\n}\n.progress-steps[data-v-3aba8ab6] {\n    justify-content: flex-start;\n    gap: 0.75rem;\n}\n.step[data-v-3aba8ab6] {\n    min-width: 55px;\n}\n.step-circle[data-v-3aba8ab6] {\n    width: 32px;\n    height: 32px;\n    font-size: 0.85rem;\n}\n.step-label[data-v-3aba8ab6] {\n    font-size: 0.65rem;\n}\n.step-content[data-v-3aba8ab6] {\n    padding: 1rem 0.25rem;\n}\n.navigation-buttons[data-v-3aba8ab6] {\n    flex-wrap: wrap;\n    gap: 0.5rem;\n}\n.points-display[data-v-3aba8ab6] {\n    flex-basis: 100%;\n    order: -1;\n    margin-bottom: 0.5rem;\n    position: static;\n    transform: none;\n}\n.navigation-buttons button[data-v-3aba8ab6] {\n    flex: 1;\n    min-width: 100px;\n}\n}\n\n/* ========== æ‰‹æœºé€‚é… ========== */\n@media (max-width: 480px) {\n.creation-scroll[data-v-3aba8ab6] {\n    width: 100%;\n    height: 100vh;\n    max-height: 100vh;\n    padding: 1rem;\n    padding-bottom: max(1rem, env(safe-area-inset-bottom));\n    border-radius: 0;\n    box-shadow: none;\n}\n.header-top[data-v-3aba8ab6] {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 0.5rem;\n}\n.mode-indicator[data-v-3aba8ab6] {\n    text-align: center;\n    font-size: 0.7rem;\n}\n.cloud-sync-container[data-v-3aba8ab6] {\n    justify-content: center;\n}\n.progress-steps[data-v-3aba8ab6] {\n    gap: 0.4rem;\n}\n.step[data-v-3aba8ab6] {\n    min-width: 46px;\n}\n.step-circle[data-v-3aba8ab6] {\n    width: 28px;\n    height: 28px;\n    font-size: 0.75rem;\n}\n.step-label[data-v-3aba8ab6] {\n    font-size: 0.55rem;\n}\n.step-content[data-v-3aba8ab6] {\n    padding: 0.75rem 0.25rem;\n}\n.navigation-buttons[data-v-3aba8ab6] {\n    padding-top: 0.75rem;\n    gap: 0.5rem;\n}\n.points-display[data-v-3aba8ab6] {\n    width: 100%;\n    flex-basis: 100%;\n    order: -1;\n    margin-bottom: 0.5rem;\n    position: static;\n    transform: none;\n    justify-content: center;\n}\n.destiny-points[data-v-3aba8ab6] {\n    padding: 0.4rem 0.75rem;\n}\n.points-label[data-v-3aba8ab6] {\n    font-size: 0.75rem;\n}\n.points-value[data-v-3aba8ab6] {\n    font-size: 0.95rem;\n}\n.navigation-buttons button[data-v-3aba8ab6] {\n    flex: 1 1 calc(50% - 0.25rem);\n    min-width: 0;\n    padding: 0.6rem 0.4rem;\n    font-size: 0.8rem;\n}\n}\n\n/* ========== è¶…å°å±å¹•é€‚é… ========== */\n@media (max-width: 360px) {\n.creation-scroll[data-v-3aba8ab6] {\n    padding: 0.75rem;\n}\n.step[data-v-3aba8ab6] {\n    min-width: 42px;\n}\n.step-circle[data-v-3aba8ab6] {\n    width: 26px;\n    height: 26px;\n    font-size: 0.7rem;\n}\n.step-label[data-v-3aba8ab6] {\n    font-size: 0.5rem;\n}\n}\n',""]);const s=i},5517:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},5609:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.modal-overlay[data-v-6ec25edf] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n.modal-dialog[data-v-6ec25edf] {\n  width: 90%;\n  max-width: 600px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-surface);\n  border-radius: 12px;\n  padding: 2rem;\n  overflow: hidden;\n}\n.modal-title[data-v-6ec25edf] {\n  margin-top: 0;\n  color: var(--color-primary);\n  text-align: center;\n  margin-bottom: 1.5rem;\n  flex-shrink: 0;\n}\n.form-fields[data-v-6ec25edf] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n  padding-right: 0.5rem;\n}\n.form-fields[data-v-6ec25edf]::-webkit-scrollbar {\n  width: 8px;\n}\n.form-fields[data-v-6ec25edf]::-webkit-scrollbar-track {\n  background: rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n}\n.form-fields[data-v-6ec25edf]::-webkit-scrollbar-thumb {\n  background: rgba(var(--color-primary-rgb), 0.3);\n  border-radius: 4px;\n}\n.form-fields[data-v-6ec25edf]::-webkit-scrollbar-thumb:hover {\n  background: rgba(var(--color-primary-rgb), 0.5);\n}\n.form-group label[data-v-6ec25edf] {\n  display: block;\n  margin-bottom: 0.5rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.form-group input[data-v-6ec25edf],\n.form-group textarea[data-v-6ec25edf],\n.form-group select[data-v-6ec25edf] {\n  width: 100%;\n  padding: 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 1rem;\n  transition: var(--transition-fast);\n}\ninput[type="color"][data-v-6ec25edf] {\n  padding: 0.25rem;\n  height: 2.5rem;\n}\ninput[type="color"][data-v-6ec25edf] {\n  padding: 0.25rem;\n  height: 2.5rem;\n}\n.form-group input[data-v-6ec25edf]:focus,\n.form-group textarea[data-v-6ec25edf]:focus,\n.form-group select[data-v-6ec25edf]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 10px rgba(var(--color-primary-rgb), 0.3);\n}\n.error-messages[data-v-6ec25edf] {\n    color: var(--color-danger);\n    margin-bottom: 1rem;\n    font-size: 0.9rem;\n    flex-shrink: 0;\n}\n.modal-actions[data-v-6ec25edf] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  margin-top: 1rem;\n  flex-shrink: 0;\n}\n\n/* Transition styles */\n.modal-fade-enter-active[data-v-6ec25edf], .modal-fade-leave-active[data-v-6ec25edf] {\n  transition: opacity 0.3s ease;\n}\n.modal-fade-enter-from[data-v-6ec25edf], .modal-fade-leave-to[data-v-6ec25edf] {\n  opacity: 0;\n}\n.modal-fade-enter-active .modal-content[data-v-6ec25edf],\n.modal-fade-leave-active .modal-content[data-v-6ec25edf] {\n  transition: transform 0.3s ease;\n}\n.modal-fade-enter-from .modal-content[data-v-6ec25edf],\n.modal-fade-leave-to .modal-content[data-v-6ec25edf] {\n  transform: scale(0.9);\n}\n\n/* åŠ¨æ€åˆ—è¡¨æ ·å¼ */\n.dynamic-list-container[data-v-6ec25edf] {\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface-light);\n  padding: 1rem;\n}\n.list-header[data-v-6ec25edf] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.add-btn[data-v-6ec25edf] {\n  background: var(--color-primary);\n  color: white;\n  border: none;\n  padding: 0.5rem 1rem;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: all 0.2s ease;\n}\n.add-btn[data-v-6ec25edf]:hover {\n  background: var(--color-primary-dark);\n}\n.list-items[data-v-6ec25edf] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.list-item[data-v-6ec25edf] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n}\n.item-inputs[data-v-6ec25edf] {\n  display: flex;\n  gap: 0.5rem;\n  flex: 1;\n}\n.item-input[data-v-6ec25edf] {\n  flex: 1;\n  padding: 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  background: var(--color-background);\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.item-input[data-v-6ec25edf]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 5px rgba(var(--color-primary-rgb), 0.3);\n}\n.remove-btn[data-v-6ec25edf] {\n  background: var(--color-danger);\n  color: white;\n  border: none;\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  cursor: pointer;\n  font-size: 1.2rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n.remove-btn[data-v-6ec25edf]:hover {\n  background: #dc2626;\n  transform: scale(1.1);\n}\n.empty-list[data-v-6ec25edf] {\n  text-align: center;\n  color: var(--color-text-secondary);\n  font-style: italic;\n  padding: 2rem;\n}\n@media (max-width: 600px) {\n.modal-dialog[data-v-6ec25edf] {\n    padding: 1.5rem;\n    width: 95%;\n    max-height: 90vh;\n}\n.item-inputs[data-v-6ec25edf] {\n    flex-direction: column;\n}\n.modal-actions[data-v-6ec25edf] {\n    flex-direction: column-reverse;\n    gap: 0.5rem;\n}\n.modal-actions .btn[data-v-6ec25edf] {\n    width: 100%;\n}\n}\n',""]);const s=i},5674:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.error-boundary[data-v-7ca07f60] {\n  width: 100%;\n  height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-background);\n  padding: 2rem;\n}\n.error-container[data-v-7ca07f60] {\n  max-width: 600px;\n  width: 100%;\n  background: var(--color-surface);\n  border: 2px solid var(--color-error);\n  border-radius: 12px;\n  padding: 2rem;\n  text-align: center;\n}\n.error-icon[data-v-7ca07f60] {\n  font-size: 4rem;\n  margin-bottom: 1rem;\n}\n.error-container h2[data-v-7ca07f60] {\n  color: var(--color-error);\n  margin: 0 0 1rem 0;\n  font-size: 1.8rem;\n}\n.error-message[data-v-7ca07f60] {\n  color: var(--color-text);\n  margin: 0 0 1.5rem 0;\n  font-size: 1rem;\n  line-height: 1.6;\n}\n.error-details[data-v-7ca07f60] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 1rem;\n  margin-bottom: 1.5rem;\n  text-align: left;\n  max-height: 300px;\n  overflow-y: auto;\n}\n.error-details pre[data-v-7ca07f60] {\n  margin: 0;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.error-actions[data-v-7ca07f60] {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  flex-wrap: wrap;\n}\n.btn-retry[data-v-7ca07f60],\n.btn-back[data-v-7ca07f60],\n.btn-details[data-v-7ca07f60] {\n  padding: 0.75rem 1.5rem;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n  border: none;\n}\n.btn-retry[data-v-7ca07f60] {\n  background: var(--color-primary);\n  color: white;\n}\n.btn-retry[data-v-7ca07f60]:hover {\n  background: var(--color-primary-dark);\n  transform: translateY(-2px);\n}\n.btn-back[data-v-7ca07f60] {\n  background: var(--color-surface);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n.btn-back[data-v-7ca07f60]:hover {\n  background: var(--color-background);\n}\n.btn-details[data-v-7ca07f60] {\n  background: var(--color-info);\n  color: white;\n}\n.btn-details[data-v-7ca07f60]:hover {\n  background: var(--color-info-dark);\n}\n@media (max-width: 640px) {\n.error-boundary[data-v-7ca07f60] {\n    padding: 1rem;\n}\n.error-container[data-v-7ca07f60] {\n    padding: 1.5rem;\n}\n.error-container h2[data-v-7ca07f60] {\n    font-size: 1.5rem;\n}\n.error-actions[data-v-7ca07f60] {\n    flex-direction: column;\n}\n.btn-retry[data-v-7ca07f60],\n  .btn-back[data-v-7ca07f60],\n  .btn-details[data-v-7ca07f60] {\n    width: 100%;\n}\n}\n",""]);const s=i},5726:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},5735:(e,t,n)=>{"use strict";n.d(t,{BC:()=>l,Ge:()=>d,VW:()=>c,Vd:()=>i,savePreset:()=>s});var a=n(5099),r=n(7760);const o="character_presets";async function i(){try{const e=await(0,a.loadFromIndexedDB)(o);return e&&Array.isArray(e.presets)?e.presets:[]}catch(e){return console.error("[é¢„è®¾ç®¡ç†å™¨] åŠ è½½é¢„è®¾å¤±è´¥:",e),[]}}async function s(e){try{const t=`preset_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n={presets:[{id:t,savedAt:(new Date).toISOString(),...e},...await i()]};return await(0,a.saveData)(o,n),t}catch(e){throw console.error("[é¢„è®¾ç®¡ç†å™¨] ä¿å­˜é¢„è®¾å¤±è´¥:",e),e}}async function l(e){try{const t=await i(),n=t.filter(t=>t.id!==e);if(n.length===t.length)return;const r={presets:n};await(0,a.saveData)(o,r)}catch(e){throw console.error("[é¢„è®¾ç®¡ç†å™¨] åˆ é™¤é¢„è®¾å¤±è´¥:",e),e}}async function c(e){try{console.log("[é¢„è®¾ç®¡ç†å™¨] å¼€å§‹å¯¼å‡ºé¢„è®¾:",e);const t=await i(),n=e&&e.length>0?t.filter(t=>e.includes(t.id)):t;if(0===n.length)throw new Error("æ²¡æœ‰å¯å¯¼å‡ºçš„é¢„è®¾");const a=(0,r.q3)("presets",{presets:n}),o=JSON.stringify(a,null,2),s=new Blob([o],{type:"application/json"}),l=URL.createObjectURL(s),c=document.createElement("a");c.href=l;const d=`character-presets-${(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5)}.json`;c.download=d,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l),console.log("[é¢„è®¾ç®¡ç†å™¨] é¢„è®¾å¯¼å‡ºæˆåŠŸ:",d)}catch(e){throw console.error("[é¢„è®¾ç®¡ç†å™¨] å¯¼å‡ºé¢„è®¾å¤±è´¥:",e),e}}async function d(e,t="merge"){try{console.log("[é¢„è®¾ç®¡ç†å™¨] å¼€å§‹å¯¼å…¥é¢„è®¾, æ¨¡å¼:",t);const n=await e.text(),s=JSON.parse(n),l=(0,r.ZT)(s);let c;if("presets"===l.type&&Array.isArray(l.payload?.presets))c=l.payload.presets;else{if(!Array.isArray(s.presets))throw new Error("æ— æ•ˆçš„é¢„è®¾æ–‡ä»¶æ ¼å¼");c=s.presets}let d=0,u=0;const m="replace"===t?[]:await i(),p=new Set(m.map(e=>e.id)),f=[];for(const e of c)try{if(!e.name||!e.data){console.warn("[é¢„è®¾ç®¡ç†å™¨] è·³è¿‡æ— æ•ˆé¢„è®¾:",e),u++;continue}let t=e.id;p.has(e.id)&&(t=`preset_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,console.log("[é¢„è®¾ç®¡ç†å™¨] IDå†²çª,ç”Ÿæˆæ–°ID:",e.id,"->",t));const n={...e,id:t,savedAt:(new Date).toISOString()};f.push(n),p.add(t),d++}catch(t){console.error("[é¢„è®¾ç®¡ç†å™¨] å¯¼å…¥é¢„è®¾å¤±è´¥:",e,t),u++}const g={presets:"replace"===t?f:[...f,...m]};return await(0,a.saveData)(o,g),console.log("[é¢„è®¾ç®¡ç†å™¨] é¢„è®¾å¯¼å…¥å®Œæˆ, æˆåŠŸ:",d,"å¤±è´¥:",u),{success:d,failed:u}}catch(e){throw console.error("[é¢„è®¾ç®¡ç†å™¨] å¯¼å…¥é¢„è®¾å¤±è´¥:",e),e}}},5794:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.hexagon-chart-container[data-v-a8caf924] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n/* æµ…è‰²ä¸»é¢˜ - é‡‘è¾‰ä»™å…‰ */\n.grid-line[data-v-a8caf924] {\n  fill: none;\n  stroke: var(--color-primary);\n  stroke-width: 1;\n  opacity: 0.2;\n}\n.data-polygon[data-v-a8caf924] {\n  fill: url(#goldGradient);\n  stroke: var(--color-primary);\n  stroke-width: 2.5;\n  filter: drop-shadow(0 0 8px rgba(218, 165, 32, 0.3));\n  transition: all 0.3s ease;\n}\n.data-polygon[data-v-a8caf924]:hover {\n  filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.5));\n}\n.data-point[data-v-a8caf924] {\n  fill: var(--color-accent);\n  stroke: rgba(255, 255, 255, 0.9);\n  stroke-width: 2;\n  filter: drop-shadow(0 0 4px rgba(255, 140, 0, 0.4));\n}\n.data-value-text[data-v-a8caf924] {\n  fill: var(--color-text);\n  font-size: 12px;\n  font-weight: bold;\n  font-family: var(--font-family-serif);\n  text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);\n}\n.label-text[data-v-a8caf924] {\n  fill: var(--color-primary);\n  font-size: 13px;\n  font-weight: 600;\n  font-family: var(--font-family-serif);\n  text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.9);\n}\n\n/* æ·±è‰²ä¸»é¢˜ - å¤œç©ºæ˜Ÿè¾° */\n[data-theme="dark"] .grid-line[data-v-a8caf924] {\n  stroke: #64b5f6;\n  opacity: 0.4;\n}\n[data-theme="dark"] .data-polygon[data-v-a8caf924] {\n  fill: url(#darkGradient);\n  stroke: #64b5f6;\n}\n[data-theme="dark"] .data-point[data-v-a8caf924] {\n  fill: #ba68c8;\n  stroke: rgba(30, 30, 60, 0.8);\n}\n[data-theme="dark"] .data-value-text[data-v-a8caf924] {\n  fill: #e1e4e8;\n}\n[data-theme="dark"] .label-text[data-v-a8caf924] {\n  fill: #64b5f6;\n}\n',""]);const s=i},5795:(e,t,n)=>{"use strict";var a=n(6549);if(a)try{a([],"length")}catch(e){a=null}e.exports=a},5822:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.skills-panel[data-v-3988334e] {\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  background: var(--color-background-light);\n}\n.panel-content[data-v-3988334e] {\n  padding: 1rem;\n  overflow-y: auto;\n  flex: 1;\n  min-height: 0;\n}\n\n/* --- Current Cultivation Card --- */\n.current-cultivation-card[data-v-3988334e] {\n  background: var(--color-surface);\n  border-radius: 12px;\n  border: 1px solid var(--color-border);\n  position: relative;\n  overflow: hidden;\n  margin-bottom: 1rem;\n  transition: all 0.3s ease;\n}\n.card-background-glow[data-v-3988334e] {\n  position: absolute;\n  top: -50%;\n  left: -50%;\n  width: 200%;\n  height: 200%;\n  background: radial-gradient(circle, rgba(var(--color-primary-rgb), 0.1) 0%, rgba(var(--color-primary-rgb), 0) 70%);\n  animation: rotateGlow-3988334e 15s linear infinite;\n  opacity: 0;\n  transition: opacity 0.5s ease;\n}\n.current-cultivation-card.quality-å‡¡ .card-background-glow[data-v-3988334e] { opacity: 0;\n}\n.current-cultivation-card.quality-äºº .card-background-glow[data-v-3988334e] { background: radial-gradient(circle, rgba(var(--color-success-rgb), 0.1) 0%, transparent 70%); opacity: 1;\n}\n.current-cultivation-card.quality-åœ° .card-background-glow[data-v-3988334e] { background: radial-gradient(circle, rgba(var(--color-primary-rgb), 0.15) 0%, transparent 70%); opacity: 1;\n}\n.current-cultivation-card.quality-å¤© .card-background-glow[data-v-3988334e] { background: radial-gradient(circle, rgba(var(--color-accent-rgb), 0.2) 0%, transparent 70%); opacity: 1;\n}\n.current-cultivation-card.quality-é“ .card-background-glow[data-v-3988334e] { background: radial-gradient(circle, rgba(var(--color-warning-rgb), 0.25) 0%, transparent 70%); opacity: 1;\n}\n@keyframes rotateGlow-3988334e {\nfrom { transform: rotate(0deg);\n}\nto { transform: rotate(360deg);\n}\n}\n.card-content-wrapper[data-v-3988334e] {\n  position: relative;\n  z-index: 1;\n  padding: 1.25rem;\n}\n.detail-header[data-v-3988334e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 1.25rem;\n}\n.title-group[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n.title-icon-wrapper[data-v-3988334e] {\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 8px;\n  background: rgba(var(--color-primary-rgb), 0.1);\n}\n.title-icon[data-v-3988334e] {\n  color: var(--color-primary);\n  margin: 0;\n}\n.cultivation-status[data-v-3988334e] {\n  font-size: 0.75rem;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n  margin: 0 0 0.25rem 0;\n  text-transform: uppercase;\n}\n.detail-title[data-v-3988334e] {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-text);\n  margin: 0;\n}\n.header-actions[data-v-3988334e] {\n  display: flex;\n  gap: 0.5rem;\n}\n\n/* --- Progress Section --- */\n.progress-section[data-v-3988334e] {\n  margin-top: 1.5rem;\n}\n.progress-info[data-v-3988334e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding: 0.75rem 1rem;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n}\n.progress-label[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.label-icon[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border-radius: 6px;\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: white;\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.3);\n}\n.label-text[data-v-3988334e] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.progress-value[data-v-3988334e] {\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-primary);\n  font-variant-numeric: tabular-nums;\n  letter-spacing: -0.02em;\n}\n.progress-bar-wrapper[data-v-3988334e] {\n  position: relative;\n  padding-top: 2rem; /* Space for milestone labels */\n  margin-bottom: 1rem; /* Space below the bar */\n}\n.progress-bar.large[data-v-3988334e] {\n  height: 16px;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  overflow: visible;\n  position: relative;\n}\n.progress-fill[data-v-3988334e] {\n  background: linear-gradient(90deg, var(--color-primary-light), var(--color-primary));\n  border-radius: 8px;\n  position: relative;\n  overflow: hidden;\n}\n.progress-shine[data-v-3988334e] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);\n  animation: shine-3988334e 2.5s ease-in-out infinite;\n}\n@keyframes shine-3988334e {\n0% { transform: translateX(-100%);\n}\n100% { transform: translateX(100%);\n}\n}\n.progress-milestones[data-v-3988334e] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n}\n.milestone[data-v-3988334e] {\n  position: absolute;\n  bottom: 100%; /* Position above the bar */\n  transform: translateX(-50%);\n  padding-bottom: 8px; /* Space for the line */\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  pointer-events: all;\n}\n.milestone[data-v-3988334e]::after { /* This will be the line */\n  content: '';\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  width: 1px;\n  height: 8px;\n  background: var(--color-border);\n}\n.milestone-name[data-v-3988334e] { /* This is the text box */\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  background: var(--color-surface-light);\n  padding: 2px 6px;\n  border-radius: 4px;\n  white-space: nowrap;\n  border: 1px solid var(--color-border);\n}\n.milestone.unlocked .milestone-name[data-v-3988334e] {\n  color: var(--color-success);\n  border-color: var(--color-success);\n  font-weight: 600;\n}\n.milestone.unlocked[data-v-3988334e]::after {\n  background: var(--color-success);\n}\n.upcoming-skill-info[data-v-3988334e] {\n  margin-top: 0.75rem;\n  text-align: center;\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  background: var(--color-surface-light);\n  padding: 0.5rem;\n  border-radius: 6px;\n}\n.upcoming-skill-info strong[data-v-3988334e] {\n  color: var(--color-primary);\n}\n\n/* --- ä¿®ç‚¼ç»Ÿè®¡ä¿¡æ¯ --- */\n.cultivation-stats[data-v-3988334e] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n  gap: 10px;\n  margin-top: 12px;\n  padding-top: 12px;\n  border-top: 1px solid var(--color-border);\n}\n.stat-card[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  padding: 10px 12px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 10px;\n  transition: all 0.2s ease;\n}\n.stat-card[data-v-3988334e]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface-hover);\n}\n.stat-card.highlight[data-v-3988334e] {\n  background: rgba(var(--color-warning-rgb), 0.1);\n  border-color: rgba(var(--color-warning-rgb), 0.4);\n}\n.stat-card.highlight .stat-icon[data-v-3988334e] {\n  color: var(--color-warning);\n}\n.stat-icon[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border-radius: 8px;\n  color: var(--color-primary);\n  flex-shrink: 0;\n}\n.stat-info[data-v-3988334e] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  min-width: 0;\n}\n.stat-info .stat-label[data-v-3988334e] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.stat-info .stat-value[data-v-3988334e] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* --- Skills List --- */\n.skills-list-section[data-v-3988334e] {\n  margin-top: 1rem;\n}\n.skills-category[data-v-3988334e] {\n  background: var(--color-surface);\n  border-radius: 12px;\n  border: 1px solid var(--color-border);\n  padding: 1rem;\n  margin-bottom: 1rem;\n}\n.category-header[data-v-3988334e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.list-title[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  font-size: 1.125rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin: 0;\n}\n.title-badge[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 32px;\n  height: 32px;\n  border-radius: 8px;\n}\n.title-badge.success[data-v-3988334e] {\n  background: rgba(var(--color-success-rgb), 0.15);\n  color: var(--color-success);\n}\n.title-badge.warning[data-v-3988334e] {\n  background: rgba(var(--color-warning-rgb), 0.15);\n  color: var(--color-warning);\n}\n.skill-count[data-v-3988334e] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  padding: 0.25rem 0.75rem;\n  background: var(--color-surface-light);\n  border-radius: 12px;\n}\n.skills-grid[data-v-3988334e] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  gap: 1rem;\n}\n.skill-card[data-v-3988334e] {\n  padding: 1rem;\n  border-radius: 8px;\n  border: 1px solid transparent;\n  background: var(--color-surface-light);\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.skill-card[data-v-3988334e]:hover {\n  transform: translateY(-4px);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\n  border-color: var(--color-primary);\n}\n.skill-card.mastered[data-v-3988334e] {\n  background: linear-gradient(135deg, var(--color-surface), rgba(var(--color-success-rgb), 0.05));\n}\n.skill-card.locked[data-v-3988334e] {\n  background: linear-gradient(135deg, var(--color-surface), rgba(var(--color-warning-rgb), 0.05));\n}\n.skill-header[data-v-3988334e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.75rem;\n}\n.skill-name[data-v-3988334e] {\n  font-weight: 600;\n  font-size: 1rem;\n  color: var(--color-text);\n}\n.unlock-badge[data-v-3988334e] {\n  font-size: 0.75rem;\n  padding: 0.25rem 0.5rem;\n  background: rgba(var(--color-success-rgb), 0.15);\n  color: var(--color-success);\n  border-radius: 4px;\n  font-weight: 500;\n}\n.lock-icon[data-v-3988334e] {\n  font-size: 1rem;\n  color: var(--color-warning);\n}\n.skill-description[data-v-3988334e] {\n  margin: 0 0 1rem 0;\n  font-size: 0.875rem;\n  line-height: 1.6;\n  color: var(--color-text-secondary);\n  flex-grow: 1;\n}\n.skill-description.dimmed[data-v-3988334e] {\n  color: var(--color-text-secondary);\n  filter: blur(1px);\n  opacity: 0.7;\n}\n.skill-footer[data-v-3988334e] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin-top: auto;\n}\n.unlock-condition[data-v-3988334e] {\n  font-weight: 500;\n}\n.unlock-progress-bar[data-v-3988334e] {\n  height: 6px;\n  background: var(--color-border);\n  border-radius: 3px;\n  overflow: hidden;\n}\n.unlock-progress-fill[data-v-3988334e] {\n  height: 100%;\n  background: var(--color-primary);\n  border-radius: 3px;\n  transition: width 0.5s ease;\n}\n.techniques-grid[data-v-3988334e] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));\n  gap: 1rem;\n}\n.technique-card[data-v-3988334e] {\n  border-radius: 8px;\n  overflow: hidden;\n  position: relative;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n}\n.technique-card[data-v-3988334e]:hover {\n  transform: translateY(-4px) scale(1.03);\n  box-shadow: 0 8px 24px rgba(0,0,0,0.1);\n  border-color: var(--color-primary);\n}\n.technique-card .item-quality-indicator[data-v-3988334e] {\n  height: 4px;\n}\n.technique-card .item-icon[data-v-3988334e] {\n  font-size: 2rem;\n  font-weight: bold;\n  line-height: 1;\n  text-align: center;\n  padding: 1rem 0;\n  color: var(--color-text);\n}\n.technique-card .item-name[data-v-3988334e] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  text-align: center;\n  padding: 0.5rem;\n  background: var(--color-surface-light);\n  border-top: 1px solid var(--color-border);\n}\n.technique-card .item-info[data-v-3988334e] {\n  display: none; /* Hide old info */\n}\n\n/* åŠŸæ³•ä¿¡æ¯ */\n.technique-info-container[data-v-3988334e] {\n  background: var(--color-surface-light);\n  border-radius: 8px;\n  padding: 0.5rem 1rem;\n  margin-bottom: 1.5rem;\n}\n.info-row[data-v-3988334e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 0;\n  border-bottom: 1px solid var(--color-border);\n}\n.info-row[data-v-3988334e]:last-child {\n  border-bottom: none;\n}\n.info-label[data-v-3988334e] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.info-value[data-v-3988334e] {\n  font-size: 0.875rem;\n  color: var(--color-text);\n  font-weight: 600;\n}\n.technique-modal-overlay[data-v-3988334e] {\n  position: fixed; inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(4px);\n  display: flex; align-items: center; justify-content: center;\n  z-index: 1000;\n}\n.technique-modal[data-v-3988334e] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  max-width: 500px; width: 90%;\n  box-shadow: 0 10px 30px rgba(0,0,0,0.2);\n}\n.modal-header[data-v-3988334e] {\n  padding: 1rem;\n  border-bottom: 1px solid var(--color-border);\n  display: flex; justify-content: space-between; align-items: center;\n}\n.modal-title[data-v-3988334e] { font-size: 1.125rem; font-weight: 600; margin: 0;\n}\n.close-btn[data-v-3988334e] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n.close-btn[data-v-3988334e]:hover {\n  color: var(--color-text);\n  border-color: var(--color-primary);\n  background: var(--color-surface-hover);\n}\n.modal-content[data-v-3988334e] { padding: 1rem;\n}\n.modal-actions[data-v-3988334e] {\n  padding: 1rem;\n  border-top: 1px solid var(--color-border);\n  display: flex; gap: 0.5rem; justify-content: flex-end;\n}\n\n/* æŒ‰é’®æ ·å¼ */\n.action-btn[data-v-3988334e] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.375rem;\n  padding: 0.5rem 0.875rem;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface);\n  color: var(--color-text);\n  font-size: 0.8rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.action-btn[data-v-3988334e]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface-light);\n  transform: translateY(-1px);\n}\n.action-btn.primary[data-v-3988334e] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-primary-dark, #2563eb));\n  border-color: var(--color-primary);\n  color: white;\n}\n.action-btn.primary[data-v-3988334e]:hover {\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n.action-btn.accent[data-v-3988334e] {\n  background: linear-gradient(135deg, #2e8b57, #267349);\n  border-color: #2e8b57;\n  color: white;\n}\n.action-btn.accent[data-v-3988334e]:hover {\n  box-shadow: 0 4px 12px rgba(46, 139, 87, 0.3);\n}\n.action-btn.warning[data-v-3988334e] {\n  background: linear-gradient(135deg, #f59e0b, #d97706);\n  border-color: #f59e0b;\n  color: white;\n}\n.action-btn.warning[data-v-3988334e]:hover {\n  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);\n}\n.btn-icon[data-v-3988334e] {\n  flex-shrink: 0;\n  color: inherit;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* ç¡®ä¿ lucide å›¾æ ‡ SVG ç»§æ‰¿é¢œè‰² */\n.action-btn[data-v-3988334e] svg {\n  color: inherit;\n  stroke: currentColor;\n}\n.btn-text[data-v-3988334e] {\n  white-space: nowrap;\n}\n",""]);const s=i},5831:(e,t,n)=>{"use strict";n.d(t,{vectorMemoryService:()=>d});var a=n(602);const r={enabled:!1,maxRetrieveCount:10,minSimilarity:.3,tagWeight:.4,vectorWeight:.6},o=new Set(["å‡¡äºº","ç‚¼æ°”","ç­‘åŸº","é‡‘ä¸¹","å…ƒå©´","åŒ–ç¥","ç‚¼è™š","åˆä½“","æ¸¡åŠ«","é£å‡","åˆæœŸ","ä¸­æœŸ","åæœŸ","åœ†æ»¡","æå¢ƒ","çªç ´","ç“¶é¢ˆ","ä¿®ç‚¼","é—­å…³","æ‚Ÿé“","æ„Ÿæ‚Ÿ","ä¸¹ç”°","ç»è„‰","çµæ°”","çœŸæ°”","æ³•åŠ›","ç¥è¯†","æˆ˜æ–—","äº¤æ‰‹","æ–©æ€","å‡»è´¥","é‡ä¼¤","è½»ä¼¤","æ¿’æ­»","é™¨è½","ä¸¹è¯","æ³•å®","çµçŸ³","åŠŸæ³•","ç§˜ç±","ææ–™","çµè‰","å¸ˆçˆ¶","å¾’å¼Ÿ","é“å‹","æ•Œäºº","ä»‡äºº","ç›Ÿå‹","å®—é—¨","é—¨æ´¾","æ´åºœ","å±±é—¨","ç§˜å¢ƒ","ç¦åœ°","åŠå¸‚","åŸæ± ","æ‹œå¸ˆ","å…¥é—¨","å‡ºå…³","å†ç»ƒ","ä»»åŠ¡","æœºç¼˜","åŠ«éš¾"]),i=new Set(["çš„","äº†","æ˜¯","åœ¨","æœ‰","å’Œ","ä¸","æˆ–","ä¹Ÿ","éƒ½","å°±","ç€","è¢«","è®©","æŠŠ","ç»™","ä»","åˆ°","å‘","å¾€","å¯¹","äº","ä¸º","è€Œ","ä½†","å´","å› ","æ‰€","è¿™","é‚£","å®ƒ","ä»–","å¥¹","æˆ‘","ä½ ","ä»¬","è‡ª","å…¶","æ­¤","å½¼","ä¸€","ä¸ª","äº›","å¾ˆ","æ›´","æœ€","é","ä¸","æ— ","æ²¡","æœª"]);function s(e){const t=[];for(const n of o)e.includes(n)&&t.push(n);const n=/[\u4e00-\u9fa5]{2,4}/g;let a;for(;null!==(a=n.exec(e));){const e=a[0];i.has(e)||o.has(e)||t.push(e)}return[...new Set(t)]}function l(e){const t=[],n=s(e);for(const e of n)o.has(e)&&t.push(e);const a=/[\u4e00-\u9fa5]{2,3}/g;let r;for(;null!==(r=a.exec(e));){const e=r[0];i.has(e)||o.has(e)||t.length<15&&t.push(e)}return[...new Set(t)].slice(0,20)}class c{vocabulary;wordToIndex;constructor(){this.vocabulary=Array.from(o),this.wordToIndex=new Map,this.vocabulary.forEach((e,t)=>{this.wordToIndex.set(e,t)})}vectorize(e){const t=s(e),n=new Array(this.vocabulary.length).fill(0),a=new Map;for(const e of t)a.set(e,(a.get(e)||0)+1);for(const[e,t]of a){const a=this.wordToIndex.get(e);void 0!==a&&(n[a]=t)}const r=Math.sqrt(n.reduce((e,t)=>e+t*t,0));if(r>0)for(let e=0;e<n.length;e++)n[e]/=r;return n}cosineSimilarity(e,t){if(e.length!==t.length)return 0;let n=0;for(let a=0;a<e.length;a++)n+=e[a]*t[a];return n}}const d=new class{db=null;vectorizer;config;saveSlot="";constructor(){this.vectorizer=new c,this.config={...r},this.loadConfig()}async init(e){this.saveSlot=e;const t=`vector-memory-${e}`;this.db=await(0,a.P2)(t,1,{upgrade(e){if(!e.objectStoreNames.contains("memories")){const t=e.createObjectStore("memories",{keyPath:"id"});t.createIndex("tags","tags",{multiEntry:!0}),t.createIndex("category","category"),t.createIndex("timestamp","timestamp")}}}),console.log(`[å‘é‡è®°å¿†] åˆå§‹åŒ–å®Œæˆ: ${t}`)}loadConfig(){try{const e=localStorage.getItem("vectorMemoryConfig");e&&(this.config={...r,...JSON.parse(e)})}catch(e){console.warn("[å‘é‡è®°å¿†] åŠ è½½é…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤é…ç½®")}}saveConfig(e){this.config={...this.config,...e},localStorage.setItem("vectorMemoryConfig",JSON.stringify(this.config))}getConfig(){return{...this.config}}isEnabled(){return this.config.enabled}async addMemory(e,t=5){if(!this.db)return console.warn("[å‘é‡è®°å¿†] æ•°æ®åº“æœªåˆå§‹åŒ–"),null;const n=l(e),a=function(e,t){const n=n=>n.some(n=>e.includes(n)||t.includes(n));return n(["æˆ˜æ–—","äº¤æ‰‹","æ–©æ€","å‡»è´¥","é‡ä¼¤","æ”»å‡»","é˜²å¾¡"])?"combat":n(["å¸ˆçˆ¶","å¾’å¼Ÿ","é“å‹","æ‹œå¸ˆ","ç»“äº¤","å¥½æ„Ÿ","å…³ç³»"])?"social":n(["ä¿®ç‚¼","é—­å…³","çªç ´","æ„Ÿæ‚Ÿ","å¢ƒç•Œ","åŠŸæ³•"])?"cultivation":n(["æ¢ç´¢","å‘ç°","ç§˜å¢ƒ","å†ç»ƒ","å¯»æ‰¾"])?"exploration":n(["æœºç¼˜","åŠ«éš¾","äº‹ä»¶","ä»»åŠ¡","å®Œæˆ"])?"event":"other"}(e,n),r=this.vectorizer.vectorize(e),i={id:`mem_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,content:e,tags:n,vector:r,timestamp:Date.now(),importance:t,category:a,metadata:{npcs:n.filter(e=>!o.has(e)).slice(0,5)}};return await this.db.put("memories",i),console.log(`[å‘é‡è®°å¿†] æ·»åŠ è®°å¿†: ${e.substring(0,50)}... æ ‡ç­¾: ${n.join(", ")}`),i}async importLongTermMemories(e){let t=0;for(const n of e)n&&n.trim()&&(await this.addMemory(n,7),t++);return console.log(`[å‘é‡è®°å¿†] å¯¼å…¥ ${t} æ¡é•¿æœŸè®°å¿†`),t}async searchMemories(e,t){if(!this.db||!this.config.enabled)return[];const n=l(e),a=this.vectorizer.vectorize(e);t?.involvedNpcs&&n.push(...t.involvedNpcs),t?.currentLocation&&n.push(t.currentLocation);const r=await this.db.getAll("memories"),o=[];for(const e of r){const t=e.tags.filter(e=>n.includes(e)),r=t.length/Math.max(n.length,1),i=this.vectorizer.cosineSimilarity(a,e.vector),s=r*this.config.tagWeight+i*this.config.vectorWeight;s>=this.config.minSimilarity&&o.push({entry:e,score:s,matchedTags:t})}return o.sort((e,t)=>t.score-e.score),o.slice(0,this.config.maxRetrieveCount)}async getAllMemories(){return this.db?await this.db.getAll("memories"):[]}async getStats(){if(!this.db)return{total:0,byCategory:{},topTags:[]};const e=await this.db.getAll("memories"),t={},n={};for(const a of e){t[a.category]=(t[a.category]||0)+1;for(const e of a.tags)n[e]=(n[e]||0)+1}const a=Object.entries(n).map(([e,t])=>({tag:e,count:t})).sort((e,t)=>t.count-e.count).slice(0,20);return{total:e.length,byCategory:t,topTags:a}}async clear(){this.db&&(await this.db.clear("memories"),console.log("[å‘é‡è®°å¿†] å·²æ¸…ç©ºå‘é‡åº“"))}formatForAI(e){if(0===e.length)return"";const t=["ã€ç›¸å…³é•¿æœŸè®°å¿†ã€‘"];for(const{entry:n,matchedTags:a}of e){const e=a.length>0?`[${a.join(",")}]`:"";t.push(`- ${e} ${n.content}`)}return t.join("\n")}}},5880:e=>{"use strict";e.exports=Math.pow},5926:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n.quest-panel[data-v-93158eac] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n}\n\n/* å·¥å…·æ  */\n.quest-toolbar[data-v-93158eac] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  background: var(--color-surface);\n  border-bottom: 1px solid var(--color-border);\n  border-radius: 12px 12px 0 0;\n}\n.tab-btns[data-v-93158eac] {\n  display: flex;\n  gap: 4px;\n}\n.tab-btns button[data-v-93158eac] {\n  padding: 6px 12px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.tab-btns button.active[data-v-93158eac] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n.toolbar-right[data-v-93158eac] {\n  display: flex;\n  gap: 8px;\n}\n.tool-btn[data-v-93158eac] {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  padding: 6px 12px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n.tool-btn[data-v-93158eac]:hover {\n  border-color: var(--color-primary);\n}\n.tool-btn.primary[data-v-93158eac] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n.tool-btn[data-v-93158eac]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n/* ä»»åŠ¡åˆ—è¡¨ */\n.quest-list[data-v-93158eac] {\n  flex: 1;\n  padding: 12px;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.empty-state[data-v-93158eac] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 16px;\n  color: var(--color-text-secondary);\n}\n\n/* ä»»åŠ¡é¡¹ */\n.quest-item[data-v-93158eac] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.2s;\n}\n.quest-item[data-v-93158eac]:hover {\n  border-color: var(--color-primary);\n}\n.quest-item.completed[data-v-93158eac] {\n  opacity: 0.6;\n}\n.quest-item.tracked[data-v-93158eac] {\n  border-color: var(--color-info);\n  box-shadow: 0 0 0 1px var(--color-info);\n}\n.quest-main[data-v-93158eac] {\n  padding: 12px;\n  cursor: pointer;\n}\n.quest-header[data-v-93158eac] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 8px;\n}\n.quest-type-tag[data-v-93158eac] {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 0.7rem;\n  font-weight: 500;\n  color: white;\n  background: var(--color-text-secondary);\n}\n.quest-type-tag.type-sect[data-v-93158eac] { background: #45b7d1;\n}\n.quest-type-tag.type-adventure[data-v-93158eac] { background: #f9ca24; color: #333;\n}\n.quest-type-tag.type-daily[data-v-93158eac] { background: #95afc0;\n}\n.quest-type-tag.type-system[data-v-93158eac] { background: #a29bfe;\n}\n.quest-type-tag.type-companion[data-v-93158eac] { background: #fd79a8;\n}\n.quest-type-tag.type-cultivation[data-v-93158eac] { background: #fdcb6e; color: #333;\n}\n.quest-type-tag.type-collect[data-v-93158eac] { background: #00b894;\n}\n.quest-type-tag.type-combat[data-v-93158eac] { background: #e17055;\n}\n.quest-name[data-v-93158eac] {\n  flex: 1;\n  font-weight: 600;\n  color: var(--color-text);\n  font-size: 0.95rem;\n}\n.status-done[data-v-93158eac] {\n  color: #22c55e;\n  font-weight: bold;\n}\n.quest-progress[data-v-93158eac] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.progress-bar[data-v-93158eac] {\n  flex: 1;\n  height: 4px;\n  background: var(--color-border);\n  border-radius: 2px;\n  overflow: hidden;\n}\n.progress-fill[data-v-93158eac] {\n  height: 100%;\n  background: var(--color-primary);\n  transition: width 0.3s;\n}\n.progress-text[data-v-93158eac] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  min-width: 35px;\n}\n\n/* å¿«æ·æ“ä½œ */\n.quest-actions[data-v-93158eac] {\n  display: flex;\n  gap: 4px;\n  padding: 8px 12px;\n  background: var(--color-background);\n  border-top: 1px solid var(--color-border);\n}\n.act-btn[data-v-93158eac] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 4px 10px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s;\n  font-size: 0.75rem;\n}\n.act-text[data-v-93158eac] {\n  font-size: 0.75rem;\n  white-space: nowrap;\n}\n.act-btn[data-v-93158eac]:hover { border-color: var(--color-primary); color: var(--color-primary);\n}\n.act-btn.accept[data-v-93158eac]:hover { border-color: #22c55e; color: #22c55e;\n}\n.act-btn.track.active[data-v-93158eac] { background: var(--color-info); border-color: var(--color-info); color: white;\n}\n.act-btn.abandon[data-v-93158eac]:hover { border-color: #f59e0b; color: #f59e0b;\n}\n.act-btn.delete[data-v-93158eac]:hover { border-color: #ef4444; color: #ef4444;\n}\n\n/* ä»»åŠ¡è¯¦æƒ… */\n.quest-detail[data-v-93158eac] {\n  padding: 12px;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-background);\n}\n.quest-desc[data-v-93158eac] {\n  margin: 0 0 12px;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  line-height: 1.5;\n}\n.objectives[data-v-93158eac] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  margin-bottom: 12px;\n}\n.objective[data-v-93158eac] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 6px 8px;\n  background: var(--color-surface);\n  border-radius: 4px;\n  font-size: 0.85rem;\n}\n.objective.done[data-v-93158eac] {\n  opacity: 0.6;\n}\n.objective.done .obj-text[data-v-93158eac] {\n  text-decoration: line-through;\n}\n.obj-check[data-v-93158eac] {\n  color: var(--color-text-secondary);\n}\n.objective.done .obj-check[data-v-93158eac] {\n  color: #22c55e;\n}\n.obj-text[data-v-93158eac] {\n  flex: 1;\n  color: var(--color-text);\n}\n.obj-progress[data-v-93158eac] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.rewards[data-v-93158eac] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n  font-size: 0.8rem;\n}\n.reward-label[data-v-93158eac] {\n  color: var(--color-text-secondary);\n}\n.reward[data-v-93158eac] {\n  padding: 2px 6px;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border-radius: 4px;\n  color: var(--color-primary);\n}\n\n/* é…ç½®å¯¹è¯æ¡† */\n.config-overlay[data-v-93158eac] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.config-dialog[data-v-93158eac] {\n  background: var(--color-surface);\n  border-radius: 12px;\n  width: 90%;\n  max-width: 400px;\n  overflow: hidden;\n}\n.config-header[data-v-93158eac] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 16px;\n  border-bottom: 1px solid var(--color-border);\n}\n.config-header h3[data-v-93158eac] {\n  margin: 0;\n  font-size: 1rem;\n}\n.close-btn[data-v-93158eac] {\n  background: none;\n  border: none;\n  font-size: 1.25rem;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n}\n.config-body[data-v-93158eac] {\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.config-row[data-v-93158eac] {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.config-row label[data-v-93158eac] {\n  font-size: 0.85rem;\n  color: var(--color-text);\n  font-weight: 500;\n}\n.config-row select[data-v-93158eac],\n.config-row textarea[data-v-93158eac] {\n  padding: 8px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.config-row input[type="checkbox"][data-v-93158eac] {\n  width: 18px;\n  height: 18px;\n}\n.config-footer[data-v-93158eac] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  padding: 12px 16px;\n  border-top: 1px solid var(--color-border);\n}\n.btn[data-v-93158eac] {\n  padding: 8px 16px;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-background);\n  color: var(--color-text);\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n.btn.primary[data-v-93158eac] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n\n/* é€šç”¨æŒ‰é’® */\n.action-btn[data-v-93158eac] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 8px 16px;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface);\n  color: var(--color-text);\n  cursor: pointer;\n  font-size: 0.9rem;\n}\n.action-btn.primary[data-v-93158eac] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n}\n',""]);const s=i},5937:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n/* å‘½ä»¤æ—¥å¿—å¼¹çª—æ ·å¼ */\n.command-log-overlay[data-v-ac3d68ea] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  backdrop-filter: blur(4px);\n}\n.command-log-modal[data-v-ac3d68ea] {\n  background: var(--color-surface);\n  border-radius: 16px;\n  width: 100%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n}\n\n/* å¼¹çª—åŠ¨ç”» */\n.command-log-modal-enter-active[data-v-ac3d68ea],\n.command-log-modal-leave-active[data-v-ac3d68ea] {\n  transition: all 0.3s ease;\n}\n.command-log-modal-enter-from[data-v-ac3d68ea],\n.command-log-modal-leave-to[data-v-ac3d68ea] {\n  opacity: 0;\n  transform: scale(0.9) translateY(20px);\n}\n.command-log-header[data-v-ac3d68ea] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  background: linear-gradient(\n    135deg,\n    var(--color-surface-light) 0%,\n    var(--color-surface-hover) 100%\n  );\n  border-bottom: 1px solid var(--color-border);\n  flex-shrink: 0;\n}\n.command-log-header h3[data-v-ac3d68ea] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.close-log-btn[data-v-ac3d68ea] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 50%;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.close-log-btn[data-v-ac3d68ea]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n  transform: rotate(90deg);\n}\n.command-log-content[data-v-ac3d68ea] {\n  padding: 16px;\n  overflow-y: auto;\n  flex: 1;\n}\n.command-list[data-v-ac3d68ea] {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n.command-item[data-v-ac3d68ea] {\n  display: flex;\n  gap: 12px;\n  padding: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  transition: all 0.2s ease;\n}\n.command-item[data-v-ac3d68ea]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  border-color: var(--color-primary);\n}\n.command-icon-wrapper[data-v-ac3d68ea] {\n  width: 40px;\n  height: 40px;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background: var(--color-primary-light);\n  color: var(--color-primary);\n}\n.command-details[data-v-ac3d68ea] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.command-description[data-v-ac3d68ea] {\n  margin: 0;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--color-text);\n  line-height: 1.4;\n}\n.command-values[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.85rem;\n  font-family: var(--font-family-mono);\n}\n.old-value[data-v-ac3d68ea],\n.new-value[data-v-ac3d68ea] {\n  padding: 4px 8px;\n  border-radius: 4px;\n}\n.old-value[data-v-ac3d68ea] {\n  background: rgba(var(--color-error-rgb), 0.1);\n  color: var(--color-danger);\n  text-decoration: line-through;\n}\n.new-value[data-v-ac3d68ea] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  color: var(--color-success);\n  font-weight: 600;\n}\n.arrow[data-v-ac3d68ea] {\n  color: var(--color-text-secondary);\n  font-weight: 600;\n}\n.no-commands[data-v-ac3d68ea] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.no-commands .empty-icon[data-v-ac3d68ea] {\n  opacity: 0.5;\n  margin-bottom: 1rem;\n}\n.no-commands .empty-text[data-v-ac3d68ea] {\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  color: var(--color-text);\n  font-size: 1rem;\n}\n.no-commands .empty-hint[data-v-ac3d68ea] {\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é… */\n[data-theme='dark'] .command-log-modal[data-v-ac3d68ea] {\n  background: #1e293b;\n  border-color: #475569;\n}\n[data-theme='dark'] .command-log-header[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #334155 0%, #1e293b 100%);\n  border-color: #475569;\n}\n[data-theme='dark'] .command-item[data-v-ac3d68ea] {\n  background: #334155;\n  border-color: #475569;\n}\n[data-theme='dark'] .command-item[data-v-ac3d68ea]:hover {\n  border-color: var(--color-primary);\n}\n[data-theme='dark'] .command-icon-wrapper[data-v-ac3d68ea] {\n  background: rgba(var(--color-primary-rgb), 0.1);\n}\n[data-theme='dark'] .old-value[data-v-ac3d68ea] {\n  background: rgba(var(--color-error-rgb), 0.2);\n}\n[data-theme='dark'] .new-value[data-v-ac3d68ea] {\n  background: rgba(var(--color-success-rgb), 0.2);\n}\n.main-game-panel[data-v-ac3d68ea] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  box-sizing: border-box;\n}\n\n/* çŸ­æœŸè®°å¿†åŒºåŸŸ */\n.memory-section[data-v-ac3d68ea] {\n  padding: 12px 20px;\n  background: linear-gradient(135deg, #fefbff 0%, #f8fafc 100%);\n  border-bottom: 1px solid #e2e8f0;\n  position: relative;\n  z-index: 20;\n  flex-shrink: 0;\n}\n.memory-header[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n  padding: 4px 0;\n  transition: all 0.2s ease;\n}\n.memory-header[data-v-ac3d68ea]:hover {\n  background: rgba(99, 102, 241, 0.05);\n  border-radius: 6px;\n  margin: -4px;\n  padding: 8px 4px;\n}\n.memory-title[data-v-ac3d68ea] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #6366f1;\n}\n.memory-icon[data-v-ac3d68ea] {\n  color: #94a3b8;\n  transition: transform 0.2s ease;\n}\n\n/* ä¸‹æ‹‰æ‚¬æµ®æ•ˆæœ */\n.memory-dropdown[data-v-ac3d68ea] {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: var(--color-surface);\n  border: 1px solid #e2e8f0;\n  border-top: none;\n  border-radius: 0 0 12px 12px;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n  z-index: 19;\n  max-height: 300px;\n  overflow-y: auto;\n}\n.memory-content[data-v-ac3d68ea] {\n  padding: 16px 20px;\n}\n.memory-item[data-v-ac3d68ea] {\n  font-size: 0.85rem;\n  color: #374151;\n  margin-bottom: 12px;\n  padding: 12px 16px;\n  background: rgba(99, 102, 241, 0.05);\n  border-radius: 8px;\n  border-left: 3px solid #6366f1;\n  line-height: 1.5;\n}\n.memory-item[data-v-ac3d68ea]:last-child {\n  margin-bottom: 0;\n}\n.no-memory[data-v-ac3d68ea] {\n  font-size: 0.9rem;\n  color: #9ca3af;\n  font-style: italic;\n  text-align: center;\n  padding: 20px;\n}\n\n/* ä¸‹æ‹‰åŠ¨ç”» */\n.memory-dropdown-enter-active[data-v-ac3d68ea],\n.memory-dropdown-leave-active[data-v-ac3d68ea] {\n  transition: all 0.3s ease;\n}\n.memory-dropdown-enter-from[data-v-ac3d68ea] {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n.memory-dropdown-leave-to[data-v-ac3d68ea] {\n  opacity: 0;\n  transform: translateY(-10px);\n}\n\n/* å½“å‰å™è¿°æ˜¾ç¤ºåŒºåŸŸ */\n.current-narrative[data-v-ac3d68ea] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  min-width: 0; /* é˜²æ­¢flexæ”¶ç¼©é—®é¢˜ */\n  border-radius: 12px; /* åœ†è§’ */\n  box-shadow: none !important; /* ç§»é™¤é˜´å½± */\n  background-color: var(--color-surface) !important; /* æäº®å™äº‹åŒºåŸŸä½†ä¸åˆºçœ¼ */\n}\n\n/* æµå¼è¾“å‡ºå†…å®¹æ ·å¼ */\n.streaming-narrative-content[data-v-ac3d68ea] {\n  margin-top: 16px;\n  padding: 16px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  animation: fadeIn-ac3d68ea 0.3s ease-in;\n}\n.streaming-text[data-v-ac3d68ea] {\n  line-height: 1.8;\n  color: var(--color-text);\n  font-size: 0.95rem;\n}\n@keyframes fadeIn-ac3d68ea {\nfrom {\n    opacity: 0;\n    transform: translateY(10px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.content-area[data-v-ac3d68ea] {\n  background-color: var(--color-surface) !important; /* æäº®å†…å®¹åŒº */\n  padding: 20px;\n  flex: 1;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  /* æ˜¾ç¤ºå¯è§çš„æ»šåŠ¨æ‹‡æŒ‡ï¼Œä½†è½¨é“é€æ˜ */\n  scrollbar-color: rgba(148, 163, 184, 0.6) transparent;\n  box-sizing: border-box;\n  min-height: 200px;\n  display: flex; /* è®©å­å…ƒç´ å¯ä»¥æ’‘æ»¡é«˜åº¦ */\n  box-shadow: none !important; /* ç§»é™¤é˜´å½± */\n}\n\n/* æ·±è‰²ä¸»é¢˜ä¸‹ content-area èƒŒæ™¯ä¸å†…éƒ¨ä¸€è‡´ */\n[data-theme='dark'] .content-area[data-v-ac3d68ea] {\n  background-color: #1e293b !important;\n}\n\n/* WebKitæ»šåŠ¨æ¡æ ·å¼ */\n.content-area[data-v-ac3d68ea]::-webkit-scrollbar {\n  width: 6px;\n  background: transparent;\n}\n.content-area[data-v-ac3d68ea]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.content-area[data-v-ac3d68ea]::-webkit-scrollbar-track-piece {\n  background: transparent;\n}\n.content-area[data-v-ac3d68ea]::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(148, 163, 184, 0.6);\n}\n\n/* æ‚¬åœæ—¶ç•¥å¾®å¢å¼ºå¯è§åº¦ */\n.content-area[data-v-ac3d68ea]:hover::-webkit-scrollbar-thumb {\n  background-color: rgba(148, 163, 184, 0.8);\n}\n.content-area[data-v-ac3d68ea]::-webkit-scrollbar-button {\n  display: none;\n}\n.content-area[data-v-ac3d68ea]::-webkit-scrollbar-corner {\n  background: transparent;\n}\n\n/* AIå¤„ç†çŠ¶æ€æŒ‡ç¤ºå™¨ï¼ˆç”Ÿæˆæ—¶æ˜¾ç¤ºåœ¨é¡¶éƒ¨ï¼‰ */\n.ai-processing-indicator[data-v-ac3d68ea] {\n  width: 100%;\n  background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(59, 130, 246, 0.05) 100%);\n  border: 1px solid rgba(99, 102, 241, 0.2);\n  border-radius: 8px;\n  padding: 12px 16px;\n  margin-bottom: 16px;\n  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.1);\n}\n\n/* é‡ç½®çŠ¶æ€æŒ‰é’® */\n.reset-state-btn[data-v-ac3d68ea] {\n  padding: 6px;\n  font-size: 13px;\n  background: transparent;\n  color: var(--color-text-secondary);\n  border: 1px solid transparent;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-left: auto; /* æ¨åˆ°å³ä¾§ */\n}\n.reset-state-btn[data-v-ac3d68ea]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-danger);\n  border-color: var(--color-border-hover);\n  transform: translateY(-1px);\n}\n\n/* æµå¼çŠ¶æ€å…ƒæ•°æ®å¸ƒå±€ */\n.streaming-meta[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  gap: 12px;\n}\n.streaming-indicator[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  font-size: 0.85rem;\n  color: var(--color-primary);\n  font-weight: 500;\n}\n.streaming-dot[data-v-ac3d68ea] {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  background: var(--color-primary);\n  animation: pulse-ac3d68ea 1.2s ease-in-out infinite;\n}\n.streaming-text[data-v-ac3d68ea] {\n  font-weight: 500;\n}\n\n/* ç­‰å¾…åŠ¨ç”»æ ·å¼ */\n.waiting-animation[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 60px 0; /* å¢åŠ ä¸€äº›å‚ç›´ç©ºé—´ */\n}\n.thinking-dots[data-v-ac3d68ea] {\n  display: flex;\n  gap: 8px;\n}\n.thinking-dots .dot[data-v-ac3d68ea] {\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: var(--color-primary);\n  animation: thinking-ac3d68ea 1.4s ease-in-out infinite;\n}\n.thinking-dots .dot[data-v-ac3d68ea]:nth-child(1) {\n  animation-delay: 0s;\n}\n.thinking-dots .dot[data-v-ac3d68ea]:nth-child(2) {\n  animation-delay: 0.2s;\n}\n.thinking-dots .dot[data-v-ac3d68ea]:nth-child(3) {\n  animation-delay: 0.4s;\n}\n@keyframes thinking-ac3d68ea {\n0%,\n  60%,\n  100% {\n    transform: scale(1);\n    opacity: 0.7;\n}\n30% {\n    transform: scale(1.3);\n    opacity: 1;\n}\n}\n\n/* .waiting-text is no longer used */\n@keyframes pulse-ac3d68ea {\n0% {\n    box-shadow: 0 0 0 0 currentColor;\n    opacity: 0.8;\n}\n70% {\n    box-shadow: 0 0 0 6px transparent;\n    opacity: 1;\n}\n100% {\n    box-shadow: 0 0 0 0 transparent;\n    opacity: 0.8;\n}\n}\n\n/* è¾“å…¥æ¡†å³ä¾§çš„æµå¼ä¼ è¾“é€‰é¡¹æ ·å¼ - åˆ é™¤æ—§æ ·å¼ */\n\n/* è¾“å…¥æ¡†å®¹å™¨æ ·å¼ */\n.input-container[data-v-ac3d68ea] {\n  flex: 1;\n  position: relative;\n  display: flex;\n  align-items: stretch; /* è®©å†…éƒ¨å…ƒç´ å‚ç›´æ‹‰ä¼¸ */\n  border: 1px solid #d1d5db;\n  border-radius: 8px;\n  background: var(--color-surface);\n  transition: all 0.2s ease;\n  min-height: 32px; /* å‡å°æœ€å°é«˜åº¦ä»¥å¯¹åº”å•è¡Œ */\n  max-width: 100%; /* é˜²æ­¢æ¨ªå‘æ‰©å±• */\n  overflow: hidden; /* ç¡®ä¿å†…å®¹ä¸ä¼šæº¢å‡ºå®¹å™¨ */\n}\n.input-container[data-v-ac3d68ea]:focus-within {\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n.input-container[data-v-ac3d68ea]:has(.game-input:disabled) {\n  background: #f9fafb;\n}\n\n/* è¾“å…¥æ¡†å†…éƒ¨çš„æ–‡æœ¬åŒºåŸŸ */\n.input-container .game-input[data-v-ac3d68ea] {\n  flex: 1;\n  border: none;\n  background: transparent;\n  padding: 8px 16px;\n  padding-right: 0; /* å³ä¾§ç•™ç»™æµå¼ä¼ è¾“é€‰é¡¹ */\n  outline: none;\n  box-shadow: none;\n  resize: none;\n  overflow-y: auto;\n  width: 100%; /* ç¡®ä¿å®½åº¦å¡«æ»¡å®¹å™¨ */\n  min-height: 24px; /* å•è¡Œé«˜åº¦ */\n  max-height: 120px;\n  min-width: 0; /* å…è®¸ç¼©å° */\n  box-sizing: border-box;\n  word-wrap: break-word;\n  white-space: pre-wrap; /* ä¿æŒæ¢è¡Œå’Œç©ºæ ¼ */\n  overflow-wrap: break-word;\n  /* ç§»é™¤è‡ªåŠ¨é«˜åº¦ç›¸å…³æ ·å¼ï¼Œç”¨JSæ§åˆ¶ */\n  height: auto;\n  line-height: 1.4;\n  /* é€æ˜æ»šåŠ¨æ¡ï¼ˆFirefoxï¼‰ */\n  scrollbar-width: thin;\n  scrollbar-color: rgba(148, 163, 184, 0.6) transparent;\n}\n.input-container .game-input[data-v-ac3d68ea]:focus {\n  border: none;\n  box-shadow: none;\n}\n\n/* é€æ˜æ»šåŠ¨æ¡ï¼ˆWebKitï¼‰ */\n.input-container .game-input[data-v-ac3d68ea]::-webkit-scrollbar {\n  width: 6px;\n  background: transparent;\n}\n.input-container .game-input[data-v-ac3d68ea]::-webkit-scrollbar-track,\n.input-container .game-input[data-v-ac3d68ea]::-webkit-scrollbar-track-piece,\n.input-container .game-input[data-v-ac3d68ea]::-webkit-scrollbar-corner {\n  background: transparent;\n}\n.input-container .game-input[data-v-ac3d68ea]::-webkit-scrollbar-thumb {\n  border-radius: 3px;\n  background-color: rgba(148, 163, 184, 0.6);\n}\n.input-container .game-input[data-v-ac3d68ea]:hover::-webkit-scrollbar-thumb {\n  background-color: rgba(148, 163, 184, 0.8);\n}\n\n/* è¾“å…¥æ¡†å†…éƒ¨çš„æµå¼ä¼ è¾“é€‰é¡¹ */\n.stream-toggle-inside[data-v-ac3d68ea] {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n  padding: 4px 12px;\n  border-left: 1px solid #e5e7eb;\n  margin-left: 8px;\n  cursor: pointer;\n  user-select: none;\n  flex-shrink: 0;\n  align-self: stretch; /* å‚ç›´æ‹‰ä¼¸ä»¥åŒ¹é…å®¹å™¨é«˜åº¦ */\n  min-height: 32px; /* å‡å°æœ€å°é«˜åº¦ä»¥å¯¹åº”å•è¡Œ */\n}\n.stream-toggle-inside[data-v-ac3d68ea]:hover {\n  color: var(--color-text);\n}\n.stream-toggle-inside input[type='checkbox'][data-v-ac3d68ea] {\n  width: 12px;\n  height: 12px;\n  cursor: pointer;\n}\n.stream-toggle-inside .label-text[data-v-ac3d68ea] {\n  cursor: pointer;\n}\n\n/* å½“å‰å™è¿°æ˜¾ç¤ºåŒºåŸŸ */\n/* .current-narrative æ ·å¼å·²åˆå¹¶åˆ° line 1996 */\n.narrative-content[data-v-ac3d68ea] {\n  line-height: 1.8;\n  color: var(--color-text);\n  font-size: 0.95rem;\n  background: var(--color-surface); /* ç¡®ä¿å™è¿°å†…å®¹åŒºåŸŸèƒŒæ™¯ä¸€è‡´ */\n}\n.action-options[data-v-ac3d68ea] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  margin-top: 16px;\n  padding-top: 16px;\n  border-top: 1px solid #e5e7eb;\n  margin-bottom: 16px;\n}\n.action-option-btn[data-v-ac3d68ea] {\n  padding: 8px 16px;\n  background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-primary-hover) 100%);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  transition: all 0.2s;\n  white-space: normal;\n  word-break: break-word;\n  max-width: 100%;\n  text-align: center;\n  flex: 0 1 auto;\n  min-width: 0;\n}\n.action-option-btn[data-v-ac3d68ea]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);\n}\n.narrative-meta[data-v-ac3d68ea] {\n  margin-bottom: 12px;\n  padding-bottom: 8px;\n  border-bottom: 1px solid #f3f4f6;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.meta-buttons[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.header-action-btn.rollback-btn[data-v-ac3d68ea] {\n  background: transparent;\n  border: 1px solid transparent;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.header-action-btn.rollback-btn[data-v-ac3d68ea]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-primary);\n}\n.narrative-time[data-v-ac3d68ea] {\n  font-size: 0.8rem;\n  color: #6b7280;\n  font-weight: 500;\n}\n\n/* å˜é‡æ›´æ–°æŒ‰é’® */\n.variable-updates-toggle[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n  color: white;\n  border: none;\n  border-radius: 20px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n  position: relative;\n  overflow: hidden;\n}\n.variable-updates-toggle[data-v-ac3d68ea]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n  transition: left 0.5s ease;\n}\n.variable-updates-toggle[data-v-ac3d68ea]:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);\n  background: linear-gradient(135deg, #2563eb, #1e40af);\n}\n.variable-updates-toggle[data-v-ac3d68ea]:hover::before {\n  left: 100%;\n}\n.variable-updates-toggle.active[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #10b981, #059669);\n  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);\n}\n.variable-updates-toggle.disabled[data-v-ac3d68ea] {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: linear-gradient(135deg, #9ca3af, #6b7280);\n  box-shadow: 0 2px 8px rgba(156, 163, 175, 0.3);\n}\n.variable-updates-toggle.disabled[data-v-ac3d68ea]:hover {\n  transform: none;\n  background: linear-gradient(135deg, #9ca3af, #6b7280);\n  box-shadow: 0 2px 8px rgba(156, 163, 175, 0.3);\n}\n.variable-updates-toggle.disabled[data-v-ac3d68ea]::before {\n  display: none;\n}\n.update-count[data-v-ac3d68ea] {\n  background: rgba(255, 255, 255, 0.2);\n  color: white;\n  font-size: 0.7rem;\n  font-weight: 700;\n  padding: 2px 6px;\n  border-radius: 10px;\n  min-width: 18px;\n  text-align: center;\n  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);\n}\n\n/* æ‚¬æµ®é¢æ¿è¦†ç›–å±‚ */\n.variable-updates-overlay[data-v-ac3d68ea] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 20px;\n  backdrop-filter: blur(4px);\n}\n\n/* æ‚¬æµ®é¢æ¿ä¸»ä½“ */\n.variable-updates-modal[data-v-ac3d68ea] {\n  background: var(--color-surface);\n  border-radius: 16px;\n  width: 100%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow: hidden;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--color-border);\n  animation: modal-appear-ac3d68ea 0.3s ease-out;\n}\n@keyframes modal-appear-ac3d68ea {\nfrom {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n}\n}\n\n/* æ‚¬æµ®é¢æ¿åŠ¨ç”» */\n.variable-updates-modal-enter-active[data-v-ac3d68ea],\n.variable-updates-modal-leave-active[data-v-ac3d68ea] {\n  transition: all 0.3s ease;\n}\n.variable-updates-modal-enter-from[data-v-ac3d68ea] {\n  opacity: 0;\n  transform: scale(0.9) translateY(20px);\n}\n.variable-updates-modal-leave-to[data-v-ac3d68ea] {\n  opacity: 0;\n  transform: scale(0.9) translateY(20px);\n}\n\n/* æ‚¬æµ®é¢æ¿å¤´éƒ¨ */\n.variable-updates-modal .updates-header[data-v-ac3d68ea] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px 20px;\n  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n  border-bottom: 1px solid var(--color-border);\n}\n.variable-updates-modal .updates-header h4[data-v-ac3d68ea] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.close-updates-btn[data-v-ac3d68ea] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 6px;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.close-updates-btn[data-v-ac3d68ea]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n  transform: rotate(90deg);\n}\n\n/* æ‚¬æµ®é¢æ¿å†…å®¹ */\n.variable-updates-modal .updates-content[data-v-ac3d68ea] {\n  padding: 16px;\n  overflow-y: auto;\n  max-height: 60vh;\n}\n\n/* ç§»é™¤é‡å¤çš„æ ·å¼ï¼Œè®©å†…éƒ¨FormattedTextç»„ä»¶å¤„ç† */\n.empty-narrative[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: #9ca3af;\n  font-style: italic;\n  font-size: 0.9rem;\n}\n\n/* åŠ¨ä½œé˜Ÿåˆ—æ˜¾ç¤ºåŒºåŸŸ */\n.action-queue-display[data-v-ac3d68ea] {\n  margin-bottom: 12px;\n  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  padding: 12px;\n}\n.queue-header[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 8px;\n}\n.queue-title[data-v-ac3d68ea] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #6366f1;\n}\n.clear-queue-btn[data-v-ac3d68ea] {\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n.clear-queue-btn[data-v-ac3d68ea]:hover {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n.queue-actions[data-v-ac3d68ea] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n  max-height: 150px;\n  overflow-y: auto;\n}\n.queue-action-item[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 8px 12px;\n  background: rgba(99, 102, 241, 0.05);\n  border: 1px solid rgba(99, 102, 241, 0.1);\n  border-radius: 6px;\n  font-size: 0.85rem;\n}\n.action-text[data-v-ac3d68ea] {\n  flex: 1;\n  color: #374151;\n  line-height: 1.4;\n  margin-right: 8px;\n}\n.action-controls[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  flex-shrink: 0;\n}\n.undo-indicator[data-v-ac3d68ea] {\n  font-size: 12px;\n  opacity: 0.7;\n  animation: rotate-ac3d68ea 2s linear infinite;\n}\n@keyframes rotate-ac3d68ea {\nfrom {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(360deg);\n}\n}\n.remove-action-btn[data-v-ac3d68ea] {\n  background: transparent;\n  border: none;\n  color: #9ca3af;\n  cursor: pointer;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 16px;\n  line-height: 1;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n.remove-action-btn[data-v-ac3d68ea]:hover {\n  background: rgba(239, 68, 68, 0.1);\n  color: #ef4444;\n}\n.input-section[data-v-ac3d68ea] {\n  padding: 16px 20px 20px 20px; /* è¿›ä¸€æ­¥å¢åŠ åº•éƒ¨å†…è¾¹è· */\n  border-top: 1px solid #e2e8f0;\n  background: #f8fafc;\n  box-sizing: border-box;\n  flex-shrink: 0;\n}\n.input-wrapper[data-v-ac3d68ea] {\n  display: flex;\n  gap: 12px;\n  align-items: stretch; /* æ”¹ä¸ºstretchè®©æ‰€æœ‰å…ƒç´ é«˜åº¦ä¸€è‡´ */\n  width: 100%;\n  max-width: none;\n}\n.game-input[data-v-ac3d68ea] {\n  /* è¿™äº›æ ·å¼ç°åœ¨ç”± .input-container å¤„ç† */\n  font-size: 0.9rem;\n  line-height: 1.4;\n  color: #374151;\n  resize: none;\n  /* ç§»é™¤å›ºå®šé«˜åº¦ï¼Œæ”¹ä¸ºè‡ªåŠ¨è°ƒæ•´ */\n  /* min-height: 44px; */\n  /* max-height: 120px; */\n  font-family: inherit;\n  /* ç§»é™¤è¿‡æ¸¡æ•ˆæœï¼Œé¿å…é«˜åº¦è°ƒæ•´æ—¶çš„é—ªçƒ */\n  /* transition: all 0.2s ease; */\n}\n\n/* ç§»é™¤åŸæ¥çš„ focus æ ·å¼ï¼Œç°åœ¨ç”±å®¹å™¨å¤„ç† */\n/* .game-input:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n} */\n.game-input[data-v-ac3d68ea]:disabled {\n  /* background: #f9fafb; */\n  color: #9ca3af;\n  cursor: not-allowed;\n}\n.game-input[data-v-ac3d68ea]::placeholder {\n  color: #9ca3af;\n}\n.send-button[data-v-ac3d68ea] {\n  padding: 12px 24px;\n  background: #3b82f6;\n  color: white;\n  border: none;\n  border-radius: 8px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n  font-family: inherit;\n  min-height: 32px; /* å‡å°æœ€å°é«˜åº¦ä»¥åŒ¹é…è¾“å…¥æ¡† */\n  align-self: stretch; /* å‚ç›´æ‹‰ä¼¸ä»¥åŒ¹é…å®¹å™¨é«˜åº¦ */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.send-button[data-v-ac3d68ea]:hover:not(:disabled) {\n  background: #2563eb;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n}\n.send-button[data-v-ac3d68ea]:disabled {\n  background: #d1d5db;\n  color: #9ca3af;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n.animate-spin[data-v-ac3d68ea] {\n  animation: spin-ac3d68ea 1s linear infinite;\n}\n@keyframes spin-ac3d68ea {\nfrom {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* æ·±è‰²ä¸»é¢˜ */\n[data-theme='dark'] .main-game-panel[data-v-ac3d68ea] {\n  background: var(--color-background);\n}\n\n/* å™è¿°å†…å®¹æ·±è‰²ä¸»é¢˜ */\n[data-theme='dark'] .narrative-content[data-v-ac3d68ea] {\n  background: var(--color-background);\n  color: #e2e8f0;\n}\n[data-theme='dark'] .narrative-meta[data-v-ac3d68ea] {\n  border-bottom-color: #374151;\n}\n[data-theme='dark'] .narrative-time[data-v-ac3d68ea] {\n  color: #94a3b8;\n}\n\n/* æ·±è‰²ä¸»é¢˜ - å˜é‡æ›´æ–°æŒ‰é’® */\n[data-theme='dark'] .variable-updates-toggle[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #3b82f6, #1e3a8a);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.4);\n}\n[data-theme='dark'] .variable-updates-toggle[data-v-ac3d68ea]:hover {\n  background: linear-gradient(135deg, #2563eb, #1e40af);\n  box-shadow: 0 4px 16px rgba(59, 130, 246, 0.5);\n}\n[data-theme='dark'] .variable-updates-toggle.active[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #10b981, #065f46);\n  box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);\n}\n[data-theme='dark'] .variable-updates-toggle.active[data-v-ac3d68ea]:hover {\n  background: linear-gradient(135deg, #059669, #047857);\n  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.5);\n}\n[data-theme='dark'] .variable-updates-toggle.disabled[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #4b5563, #374151);\n  box-shadow: 0 2px 8px rgba(75, 85, 99, 0.4);\n}\n[data-theme='dark'] .variable-updates-toggle.disabled[data-v-ac3d68ea]:hover {\n  background: linear-gradient(135deg, #4b5563, #374151);\n  box-shadow: 0 2px 8px rgba(75, 85, 99, 0.4);\n}\n[data-theme='dark'] .variable-updates-overlay[data-v-ac3d68ea] {\n  background: rgba(0, 0, 0, 0.7);\n}\n[data-theme='dark'] .variable-updates-modal[data-v-ac3d68ea] {\n  background: #1e293b;\n  border-color: #475569;\n}\n[data-theme='dark'] .variable-updates-modal .updates-header[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #334155 0%, #475569 100%);\n  border-color: #475569;\n}\n[data-theme='dark'] .variable-updates-modal .updates-header h4[data-v-ac3d68ea] {\n  color: #e2e8f0;\n}\n[data-theme='dark'] .close-updates-btn[data-v-ac3d68ea] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .close-updates-btn[data-v-ac3d68ea]:hover {\n  background: #475569;\n  color: #e2e8f0;\n}\n[data-theme='dark'] .empty-narrative[data-v-ac3d68ea] {\n  color: #6b7280;\n}\n\n/* ç¡®ä¿æ·±è‰²ä¸»é¢˜ä¸‹å½“å‰å™è¿°åŒºåŸŸèƒŒæ™¯ä¸€è‡´ */\n[data-theme='dark'] .current-narrative[data-v-ac3d68ea] {\n  background-color: #1e293b !important;\n}\n\n/* æ·±è‰²ä¸»é¢˜ - æµå¼è¾“å‡ºå†…å®¹ */\n[data-theme='dark'] .streaming-narrative-content[data-v-ac3d68ea] {\n  background: var(--color-surface);\n  border-color: var(--color-border);\n}\n[data-theme='dark'] .streaming-text[data-v-ac3d68ea] {\n  color: #e2e8f0;\n}\n[data-theme='dark'] .ai-processing-display[data-v-ac3d68ea] {\n  background: var(--color-background) !important;\n}\n[data-theme='dark'] .reset-state-btn[data-v-ac3d68ea] {\n  background: rgba(var(--color-error-rgb), 0.2);\n  color: var(--color-danger);\n  border-color: rgba(var(--color-error-rgb), 0.3);\n}\n[data-theme='dark'] .reset-state-btn[data-v-ac3d68ea]:hover {\n  background: rgba(var(--color-error-rgb), 0.3);\n  border-color: rgba(var(--color-error-rgb), 0.5);\n}\n[data-theme='dark'] .narrative-content[data-v-ac3d68ea] {\n  background: #1e293b !important;\n}\n[data-theme='dark'] .input-section[data-v-ac3d68ea] {\n  background: #334155;\n  border-top-color: #475569;\n}\n[data-theme='dark'] .game-input[data-v-ac3d68ea] {\n  /* background: #1e293b; - ç°åœ¨ç”±å®¹å™¨å¤„ç† */\n  /* border-color: #475569; - ç°åœ¨ç”±å®¹å™¨å¤„ç† */\n  color: #e2e8f0;\n}\n\n/* ç§»é™¤é‡å¤çš„æ·±è‰²ä¸»é¢˜ focus æ ·å¼ */\n/* [data-theme=\"dark\"] .game-input:focus {\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);\n} */\n[data-theme='dark'] .game-input[data-v-ac3d68ea]:disabled {\n  /* background: #0f172a; - ç°åœ¨ç”±å®¹å™¨å¤„ç† */\n  color: #64748b;\n}\n[data-theme='dark'] .game-input[data-v-ac3d68ea]::placeholder {\n  color: #64748b;\n}\n[data-theme='dark'] .send-button[data-v-ac3d68ea] {\n  background: #3b82f6;\n}\n[data-theme='dark'] .send-button[data-v-ac3d68ea]:hover:not(:disabled) {\n  background: #2563eb;\n}\n[data-theme='dark'] .send-button[data-v-ac3d68ea]:disabled {\n  background: #374151;\n  color: #64748b;\n}\n\n/* çŸ­æœŸè®°å¿†æ·±è‰²ä¸»é¢˜ */\n[data-theme='dark'] .memory-section[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n  border-color: #475569;\n}\n[data-theme='dark'] .memory-header[data-v-ac3d68ea]:hover {\n  background: rgba(99, 102, 241, 0.1);\n}\n[data-theme='dark'] .memory-title[data-v-ac3d68ea] {\n  color: #818cf8;\n}\n[data-theme='dark'] .memory-icon[data-v-ac3d68ea] {\n  color: #64748b;\n}\n[data-theme='dark'] .memory-dropdown[data-v-ac3d68ea] {\n  background: #1e293b;\n  border-color: #475569;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n}\n[data-theme='dark'] .memory-item[data-v-ac3d68ea] {\n  background: rgba(129, 140, 248, 0.1);\n  border-left-color: #818cf8;\n  color: #e2e8f0;\n}\n\n/* ç­‰å¾…è¦†ç›–å±‚æ·±è‰²ä¸»é¢˜ - æ›´æ–°ä¸ºAIå¤„ç†æ˜¾ç¤ºæ ·å¼ */\n[data-theme='dark'] .streaming-meta[data-v-ac3d68ea] {\n  border-bottom-color: #374151;\n}\n[data-theme='dark'] .streaming-indicator[data-v-ac3d68ea] {\n  color: #60a5fa;\n}\n[data-theme='dark'] .streaming-dot[data-v-ac3d68ea] {\n  background: #60a5fa;\n}\n[data-theme='dark'] .thinking-dots .dot[data-v-ac3d68ea] {\n  background: #60a5fa;\n}\n[data-theme='dark'] .waiting-text[data-v-ac3d68ea] {\n  color: #94a3b8;\n}\n\n/* è¾“å…¥æ¡†å³ä¾§æµå¼ä¼ è¾“é€‰é¡¹æ·±è‰²ä¸»é¢˜ - æ›´æ–°ä¸ºå†…éƒ¨æ ·å¼ */\n[data-theme='dark'] .input-container[data-v-ac3d68ea] {\n  background: #1e293b;\n  border-color: #475569;\n}\n[data-theme='dark'] .input-container[data-v-ac3d68ea]:focus-within {\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);\n}\n[data-theme='dark'] .input-container[data-v-ac3d68ea]:has(.game-input:disabled) {\n  background: #0f172a;\n}\n[data-theme='dark'] .stream-toggle-inside[data-v-ac3d68ea] {\n  color: #94a3b8;\n  border-left-color: #475569;\n}\n[data-theme='dark'] .stream-toggle-inside[data-v-ac3d68ea]:hover {\n  color: #e2e8f0;\n}\n\n/* è¡ŒåŠ¨é€‰æ‹©å™¨æŒ‰é’® */\n.action-selector-btn[data-v-ac3d68ea] {\n  width: 44px;\n  min-height: 32px; /* å‡å°æœ€å°é«˜åº¦ä»¥åŒ¹é…è¾“å…¥æ¡† */\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  color: #6366f1;\n  align-self: stretch; /* å‚ç›´æ‹‰ä¼¸ä»¥åŒ¹é…å®¹å™¨é«˜åº¦ */\n  flex-shrink: 0;\n}\n.action-selector-btn[data-v-ac3d68ea]:hover:not(:disabled) {\n  background: #f1f5f9;\n  border-color: #6366f1;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(99, 102, 241, 0.15);\n}\n.action-selector-btn[data-v-ac3d68ea]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n/* è¡ŒåŠ¨é€‰æ‹©å¼¹çª— */\n.action-modal-overlay[data-v-ac3d68ea],\n.action-config-overlay[data-v-ac3d68ea] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.4);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n  backdrop-filter: blur(2px);\n}\n.action-modal[data-v-ac3d68ea] {\n  background: var(--color-surface);\n  border-radius: 12px;\n  max-width: 480px;\n  width: 90%;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n}\n.action-config-modal[data-v-ac3d68ea] {\n  background: var(--color-surface);\n  border-radius: 12px;\n  max-width: 400px;\n  width: 90%;\n  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);\n  overflow: hidden;\n}\n.modal-header[data-v-ac3d68ea],\n.config-header[data-v-ac3d68ea] {\n  padding: 16px 20px;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: var(--color-primary, #3b82f6);\n}\n.modal-header h3[data-v-ac3d68ea],\n.config-header h3[data-v-ac3d68ea] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: white;\n}\n.close-btn[data-v-ac3d68ea] {\n  width: 28px;\n  height: 28px;\n  border: none;\n  background: var(--color-surface-light);\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: white;\n  transition: all 0.2s ease;\n}\n.close-btn[data-v-ac3d68ea]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n}\n.action-grid[data-v-ac3d68ea] {\n  padding: 16px;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 8px;\n}\n.quick-action-btn[data-v-ac3d68ea] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 6px;\n  padding: 12px 8px;\n  border: 1px solid #e5e7eb;\n  border-radius: 8px;\n  background: var(--color-surface);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.8rem;\n  min-height: 70px;\n}\n.quick-action-btn[data-v-ac3d68ea]:hover {\n  border-color: #3b82f6;\n  background: #f8fafc;\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.15);\n}\n.quick-action-btn.cultivation[data-v-ac3d68ea] {\n  border-color: rgba(34, 197, 94, 0.2);\n  background: rgba(34, 197, 94, 0.03);\n}\n.quick-action-btn.cultivation[data-v-ac3d68ea]:hover {\n  border-color: #22c55e;\n  background: rgba(34, 197, 94, 0.08);\n}\n.quick-action-btn.exploration[data-v-ac3d68ea] {\n  border-color: rgba(59, 130, 246, 0.2);\n  background: rgba(59, 130, 246, 0.03);\n}\n.quick-action-btn.exploration[data-v-ac3d68ea]:hover {\n  border-color: #3b82f6;\n  background: rgba(59, 130, 246, 0.08);\n}\n.quick-action-btn.social[data-v-ac3d68ea] {\n  border-color: rgba(20, 184, 166, 0.2);\n  background: rgba(20, 184, 166, 0.03);\n}\n.quick-action-btn.social[data-v-ac3d68ea]:hover {\n  border-color: #14b8a6;\n  background: rgba(20, 184, 166, 0.08);\n}\n.quick-action-btn.other[data-v-ac3d68ea] {\n  border-color: rgba(156, 163, 175, 0.2);\n  background: rgba(156, 163, 175, 0.03);\n}\n.quick-action-btn.other[data-v-ac3d68ea]:hover {\n  border-color: #9ca3af;\n  background: rgba(156, 163, 175, 0.08);\n}\n.action-icon[data-v-ac3d68ea] {\n  font-size: 1.2rem;\n  line-height: 1;\n}\n.action-text[data-v-ac3d68ea] {\n  font-weight: 500;\n  color: #374151;\n  text-align: center;\n  line-height: 1.2;\n}\n\n/* é…ç½®å¼¹çª—å†…å®¹ */\n.config-content[data-v-ac3d68ea] {\n  padding: 20px;\n}\n.action-description[data-v-ac3d68ea] {\n  margin: 0 0 20px 0;\n  color: #6b7280;\n  line-height: 1.5;\n}\n.config-section[data-v-ac3d68ea] {\n  margin-bottom: 20px;\n}\n.config-section[data-v-ac3d68ea]:last-child {\n  margin-bottom: 0;\n}\n.config-label[data-v-ac3d68ea] {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n  color: #374151;\n  font-size: 0.875rem;\n}\n.time-selector[data-v-ac3d68ea] {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n.time-btn[data-v-ac3d68ea] {\n  padding: 8px 16px;\n  border: 1px solid #d1d5db;\n  border-radius: 6px;\n  background: var(--color-surface);\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s ease;\n}\n.time-btn[data-v-ac3d68ea]:hover {\n  border-color: #3b82f6;\n}\n.time-btn.active[data-v-ac3d68ea] {\n  border-color: #3b82f6;\n  background: #3b82f6;\n  color: white;\n}\n.time-custom[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  font-size: 0.875rem;\n}\n.time-input[data-v-ac3d68ea] {\n  width: 80px;\n  padding: 6px 10px;\n  border: 1px solid #d1d5db;\n  border-radius: 4px;\n  font-size: 0.875rem;\n}\n.action-options[data-v-ac3d68ea] {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.option-item[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.option-item[data-v-ac3d68ea]:hover {\n  border-color: #3b82f6;\n  background: #f8fafc;\n}\n.option-item input[type='radio'][data-v-ac3d68ea] {\n  margin: 0;\n}\n.config-actions[data-v-ac3d68ea] {\n  padding: 20px;\n  border-top: 1px solid #e5e7eb;\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n}\n.cancel-btn[data-v-ac3d68ea],\n.confirm-btn[data-v-ac3d68ea] {\n  padding: 8px 20px;\n  border-radius: 6px;\n  font-size: 0.875rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.cancel-btn[data-v-ac3d68ea] {\n  border: 1px solid #d1d5db;\n  background: var(--color-surface);\n  color: #6b7280;\n}\n.cancel-btn[data-v-ac3d68ea]:hover {\n  background: #f9fafb;\n  border-color: #9ca3af;\n}\n.confirm-btn[data-v-ac3d68ea] {\n  border: 1px solid #3b82f6;\n  background: #3b82f6;\n  color: white;\n}\n.confirm-btn[data-v-ac3d68ea]:hover {\n  background: #2563eb;\n  border-color: #2563eb;\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é… */\n[data-theme='dark'] .action-selector-btn[data-v-ac3d68ea] {\n  background: #374151;\n  border-color: #4b5563;\n  color: #d1d5db;\n}\n[data-theme='dark'] .action-selector-btn[data-v-ac3d68ea]:hover:not(:disabled) {\n  background: #4b5563;\n  border-color: #6b7280;\n}\n[data-theme='dark'] .action-modal[data-v-ac3d68ea],\n[data-theme='dark'] .action-config-modal[data-v-ac3d68ea] {\n  background: #1f2937;\n}\n[data-theme='dark'] .modal-header[data-v-ac3d68ea],\n[data-theme='dark'] .config-header[data-v-ac3d68ea],\n[data-theme='dark'] .config-actions[data-v-ac3d68ea] {\n  border-color: #374151;\n}\n[data-theme='dark'] .modal-header h3[data-v-ac3d68ea],\n[data-theme='dark'] .config-header h3[data-v-ac3d68ea],\n[data-theme='dark'] .category-title[data-v-ac3d68ea],\n[data-theme='dark'] .config-label[data-v-ac3d68ea],\n[data-theme='dark'] .action-name[data-v-ac3d68ea] {\n  color: #f9fafb;\n}\n[data-theme='dark'] .close-btn[data-v-ac3d68ea] {\n  background: #374151;\n  color: #d1d5db;\n}\n[data-theme='dark'] .close-btn[data-v-ac3d68ea]:hover {\n  background: #4b5563;\n  color: #f9fafb;\n}\n[data-theme='dark'] .action-btn[data-v-ac3d68ea] {\n  background: #374151;\n  border-color: #4b5563;\n}\n[data-theme='dark'] .action-btn[data-v-ac3d68ea]:hover {\n  border-color: #3b82f6;\n  background: #1f2937;\n}\n[data-theme='dark'] .time-btn[data-v-ac3d68ea],\n[data-theme='dark'] .option-item[data-v-ac3d68ea] {\n  background: #374151;\n  border-color: #4b5563;\n  color: #d1d5db;\n}\n[data-theme='dark'] .time-input[data-v-ac3d68ea] {\n  background: #374151;\n  border-color: #4b5563;\n  color: #f9fafb;\n}\n[data-theme='dark'] .cancel-btn[data-v-ac3d68ea] {\n  background: #374151;\n  border-color: #4b5563;\n  color: #d1d5db;\n}\n[data-theme='dark'] .cancel-btn[data-v-ac3d68ea]:hover {\n  background: #4b5563;\n}\n\n/* æ·±è‰²ä¸»é¢˜åŠ¨ä½œé˜Ÿåˆ—æ ·å¼ */\n[data-theme='dark'] .action-queue-display[data-v-ac3d68ea] {\n  background: linear-gradient(135deg, #374151 0%, #1f2937 100%);\n  border-color: #4b5563;\n}\n[data-theme='dark'] .queue-title[data-v-ac3d68ea] {\n  color: #818cf8;\n}\n[data-theme='dark'] .clear-queue-btn[data-v-ac3d68ea] {\n  color: #9ca3af;\n}\n[data-theme='dark'] .clear-queue-btn[data-v-ac3d68ea]:hover {\n  background: rgba(239, 68, 68, 0.2);\n  color: #f87171;\n}\n[data-theme='dark'] .queue-action-item[data-v-ac3d68ea] {\n  background: rgba(129, 140, 248, 0.1);\n  border-color: rgba(129, 140, 248, 0.2);\n}\n[data-theme='dark'] .action-text[data-v-ac3d68ea] {\n  color: #e5e7eb;\n}\n[data-theme='dark'] .remove-action-btn[data-v-ac3d68ea] {\n  color: #9ca3af;\n}\n[data-theme='dark'] .remove-action-btn[data-v-ac3d68ea]:hover {\n  background: rgba(239, 68, 68, 0.2);\n  color: #f87171;\n}\n[data-theme='dark'] .action-controls[data-v-ac3d68ea] {\n  color: #d1d5db;\n}\n[data-theme='dark'] .undo-indicator[data-v-ac3d68ea] {\n  filter: brightness(1.2);\n}\n\n/* å˜æ›´æè¿°æ ·å¼ */\n.change-description[data-v-ac3d68ea] {\n  color: var(--color-text);\n  font-size: 0.8rem;\n  margin-bottom: 6px;\n  padding: 4px 8px;\n  background: var(--color-surface-light);\n  border-radius: 4px;\n  border-left: 2px solid var(--color-primary);\n  line-height: 1.3;\n  font-style: italic;\n}\n\n/* æ·±è‰²ä¸»é¢˜ä¸‹çš„å˜æ›´æè¿° */\n[data-theme='dark'] .change-description[data-v-ac3d68ea] {\n  background: #334155;\n  color: #e2e8f0;\n  border-left-color: #60a5fa;\n}\n\n/* ç©ºçŠ¶æ€æ ·å¼ */\n.no-changes[data-v-ac3d68ea] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.no-changes .empty-icon[data-v-ac3d68ea] {\n  opacity: 0.5;\n  margin-bottom: 1rem;\n  color: var(--color-text-secondary);\n}\n.no-changes .empty-text[data-v-ac3d68ea] {\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n  color: var(--color-text);\n  font-size: 0.9rem;\n}\n.no-changes .empty-hint[data-v-ac3d68ea] {\n  font-size: 0.8rem;\n  opacity: 0.8;\n  line-height: 1.4;\n}\n\n/* å›¾ç‰‡é¢„è§ˆå®¹å™¨æ ·å¼ */\n.image-preview-container[data-v-ac3d68ea] {\n  display: flex;\n  gap: 8px;\n  padding: 8px;\n  flex-wrap: wrap;\n  border-bottom: 1px solid #e5e7eb;\n  background: #f9fafb;\n}\n.image-preview-item[data-v-ac3d68ea] {\n  position: relative;\n  width: 60px;\n  height: 60px;\n  border-radius: 6px;\n  overflow: hidden;\n  border: 2px solid #e5e7eb;\n  transition: all 0.2s ease;\n}\n.image-preview-item[data-v-ac3d68ea]:hover {\n  border-color: #3b82f6;\n  transform: scale(1.05);\n}\n.image-preview-item img[data-v-ac3d68ea] {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n.remove-image-btn[data-v-ac3d68ea] {\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  width: 20px;\n  height: 20px;\n  padding: 0;\n  background: rgba(239, 68, 68, 0.9);\n  border: none;\n  border-radius: 50%;\n  color: white;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: all 0.2s ease;\n}\n.image-preview-item:hover .remove-image-btn[data-v-ac3d68ea] {\n  opacity: 1;\n}\n.remove-image-btn[data-v-ac3d68ea]:hover {\n  background: rgba(220, 38, 38, 1);\n  transform: scale(1.1);\n}\n\n/* å›¾ç‰‡ä¸Šä¼ æŒ‰é’®ç‰¹æ®Šæ ·å¼ */\n.image-upload-btn svg[data-v-ac3d68ea] {\n  color: #10b981;\n}\n.image-upload-btn:hover:not(:disabled) svg[data-v-ac3d68ea] {\n  color: #059669;\n}\n\n/* æ·±è‰²ä¸»é¢˜å›¾ç‰‡é¢„è§ˆæ ·å¼ */\n[data-theme='dark'] .image-preview-container[data-v-ac3d68ea] {\n  background: #0f172a;\n  border-bottom-color: #475569;\n}\n[data-theme='dark'] .image-preview-item[data-v-ac3d68ea] {\n  border-color: #475569;\n}\n[data-theme='dark'] .image-preview-item[data-v-ac3d68ea]:hover {\n  border-color: #3b82f6;\n}\n\n/* æœ€æ–°æ¶ˆæ¯textæ ·å¼ */\n.latest-message-text[data-v-ac3d68ea] {\n  margin-top: 20px;\n  padding: 16px;\n  background: #f8fafc;\n  border: 1px solid #e2e8f0;\n  border-left: 4px solid #818cf8;\n  border-radius: 8px;\n  font-size: 0.9rem;\n  color: #475569;\n  line-height: 1.7;\n}\n.latest-text-header[data-v-ac3d68ea] {\n  font-weight: 600;\n  color: #6366f1;\n  margin-bottom: 8px;\n  font-size: 0.85rem;\n}\n[data-theme='dark'] .latest-message-text[data-v-ac3d68ea] {\n  background: #334155;\n  border-color: #4b5563;\n  border-left-color: #818cf8;\n  color: #cbd5e1;\n}\n[data-theme='dark'] .latest-text-header[data-v-ac3d68ea] {\n  color: #a5b4fc;\n}\n\n/* Cultivation Panel */\n.cultivation-panel-overlay[data-v-ac3d68ea] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1001; /* Higher than action modal */\n  backdrop-filter: blur(4px);\n}\n.cultivation-panel[data-v-ac3d68ea] {\n  background: linear-gradient(145deg, #f9fafb, #f3f4f6);\n  border-radius: 16px;\n  width: 90%;\n  max-width: 800px;\n  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  display: flex;\n  flex-direction: column;\n  animation: modal-appear-ac3d68ea 0.4s cubic-bezier(0.25, 1, 0.5, 1);\n}\n.cultivation-panel .panel-header[data-v-ac3d68ea] {\n  padding: 16px 24px;\n  border-bottom: 1px solid #e5e7eb;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.cultivation-panel .panel-header h3[data-v-ac3d68ea] {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: #1f2937;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.cultivation-panel .panel-content[data-v-ac3d68ea] {\n  padding: 24px;\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 24px;\n}\n.cultivation-card[data-v-ac3d68ea] {\n  background: white;\n  border-radius: 12px;\n  padding: 20px;\n  border: 1px solid #e5e7eb;\n  display: flex;\n  flex-direction: column;\n  transition: all 0.3s ease;\n  position: relative;\n  overflow: hidden;\n}\n.cultivation-card[data-v-ac3d68ea]:hover {\n  transform: translateY(-5px);\n  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);\n  border-color: #a5b4fc;\n}\n.cultivation-card .card-header[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin-bottom: 12px;\n}\n.cultivation-card .card-icon[data-v-ac3d68ea] {\n  color: #6366f1;\n}\n.cultivation-zap .card-icon[data-v-ac3d68ea] {\n  color: #f59e0b;\n}\n.cultivation-shield .card-icon[data-v-ac3d68ea] {\n  color: #3b82f6;\n}\n.cultivation-braincircuit .card-icon[data-v-ac3d68ea] {\n  color: #8b5cf6;\n}\n.cultivation-card .card-title[data-v-ac3d68ea] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #111827;\n}\n.cultivation-card .card-description[data-v-ac3d68ea] {\n  font-size: 0.85rem;\n  color: #4b5563;\n  line-height: 1.6;\n  flex-grow: 1;\n  margin: 0 0 16px 0;\n}\n.cultivation-card .card-config[data-v-ac3d68ea] {\n  margin-bottom: 16px;\n}\n.cultivation-card .config-label[data-v-ac3d68ea] {\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: #6b7280;\n  margin-bottom: 8px;\n  display: block;\n}\n.cultivation-card .time-selector[data-v-ac3d68ea] {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.cultivation-card .time-slider[data-v-ac3d68ea] {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 100%;\n  height: 6px;\n  background: #e5e7eb;\n  border-radius: 3px;\n  outline: none;\n  opacity: 0.7;\n  transition: opacity 0.2s;\n}\n.cultivation-card .time-slider[data-v-ac3d68ea]:hover {\n  opacity: 1;\n}\n.cultivation-card .time-slider[data-v-ac3d68ea]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 16px;\n  height: 16px;\n  background: #6366f1;\n  cursor: pointer;\n  border-radius: 50%;\n}\n.cultivation-card .time-slider[data-v-ac3d68ea]::-moz-range-thumb {\n  width: 16px;\n  height: 16px;\n  background: #6366f1;\n  cursor: pointer;\n  border-radius: 50%;\n}\n.cultivation-card .time-display[data-v-ac3d68ea] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #1f2937;\n  min-width: 50px;\n  text-align: right;\n}\n.start-cultivation-btn[data-v-ac3d68ea] {\n  width: 100%;\n  padding: 10px;\n  border: none;\n  border-radius: 8px;\n  background: #4f46e5;\n  color: white;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.start-cultivation-btn[data-v-ac3d68ea]:hover {\n  background: #4338ca;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 10px rgba(79, 70, 229, 0.3);\n}\n.cultivation-zap .start-cultivation-btn[data-v-ac3d68ea] {\n  background: #f59e0b;\n}\n.cultivation-zap .start-cultivation-btn[data-v-ac3d68ea]:hover {\n  background: #d97706;\n  box-shadow: 0 4px 10px rgba(245, 158, 11, 0.3);\n}\n.cultivation-shield .start-cultivation-btn[data-v-ac3d68ea] {\n  background: #3b82f6;\n}\n.cultivation-shield .start-cultivation-btn[data-v-ac3d68ea]:hover {\n  background: #2563eb;\n  box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);\n}\n.cultivation-braincircuit .start-cultivation-btn[data-v-ac3d68ea] {\n  background: #8b5cf6;\n}\n.cultivation-braincircuit .start-cultivation-btn[data-v-ac3d68ea]:hover {\n  background: #7c3aed;\n  box-shadow: 0 4px 10px rgba(139, 92, 246, 0.3);\n}\n\n/* Dark theme for cultivation panel */\n[data-theme='dark'] .cultivation-panel[data-v-ac3d68ea] {\n  background: linear-gradient(145deg, #1f2937, #111827);\n  border-color: #374151;\n}\n[data-theme='dark'] .cultivation-panel .panel-header[data-v-ac3d68ea] {\n  border-color: #374151;\n}\n[data-theme='dark'] .cultivation-panel .panel-header h3[data-v-ac3d68ea] {\n  color: #f3f4f6;\n}\n[data-theme='dark'] .cultivation-card[data-v-ac3d68ea] {\n  background: #1f2937;\n  border-color: #374151;\n}\n[data-theme='dark'] .cultivation-card[data-v-ac3d68ea]:hover {\n  border-color: #a5b4fc;\n}\n[data-theme='dark'] .cultivation-card .card-title[data-v-ac3d68ea] {\n  color: #f9fafb;\n}\n[data-theme='dark'] .cultivation-card .card-description[data-v-ac3d68ea] {\n  color: #9ca3af;\n}\n[data-theme='dark'] .cultivation-card .config-label[data-v-ac3d68ea] {\n  color: #9ca3af;\n}\n[data-theme='dark'] .cultivation-card .time-slider[data-v-ac3d68ea] {\n  background: #4b5563;\n}\n[data-theme='dark'] .cultivation-card .time-display[data-v-ac3d68ea] {\n  color: #f3f4f6;\n}\n\n/* æ‰‹æœºç«¯å“åº”å¼ä¿®å¤ */\n@media (max-width: 768px) {\n.main-game-panel[data-v-ac3d68ea] {\n    width: 100%;\n    max-width: 100vw;\n    overflow-x: hidden;\n}\n.content-area[data-v-ac3d68ea] {\n    padding: 4px;\n    overflow-x: hidden;\n    width: 100%;\n    box-sizing: border-box;\n}\n.current-narrative[data-v-ac3d68ea] {\n    min-width: 0;\n    max-width: 100%;\n    overflow-x: hidden;\n    width: 100%;\n}\n.streaming-narrative-content[data-v-ac3d68ea],\n  .narrative-content[data-v-ac3d68ea] {\n    overflow-x: hidden;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    max-width: 100%;\n    padding: 8px;\n}\n.streaming-text[data-v-ac3d68ea],\n  .narrative-text[data-v-ac3d68ea] {\n    max-width: 100%;\n    overflow-x: hidden;\n    word-wrap: break-word;\n    overflow-wrap: break-word;\n    font-size: 0.85rem;\n}\n.input-wrapper[data-v-ac3d68ea] {\n    gap: 4px;\n    padding: 4px;\n    width: 100%;\n    box-sizing: border-box;\n}\n.input-container[data-v-ac3d68ea] {\n    min-width: 0;\n    flex: 1;\n}\n.game-input[data-v-ac3d68ea] {\n    font-size: 0.85rem;\n    padding: 6px 8px;\n}\n.send-button[data-v-ac3d68ea] {\n    padding: 8px 12px;\n    flex-shrink: 0;\n    min-width: 44px;\n}\n.stream-toggle-inside[data-v-ac3d68ea] {\n    font-size: 0.75rem;\n    padding: 0 6px;\n}\n}\n",""]);const s=i},5976:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},6119:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.panel-header[data-v-759e00bb] {\n  padding: 1rem;\n  border-bottom: 1px solid var(--color-border);\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n.panel-title[data-v-759e00bb] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0;\n  font-size: 1.2rem;\n  color: var(--color-text);\n}\n.header-actions[data-v-759e00bb] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n.search-bar[data-v-759e00bb] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 0.5rem;\n  min-width: 180px;\n  flex: 1 1 220px;\n}\n.search-input[data-v-759e00bb] {\n  border: none;\n  outline: none;\n  background: transparent;\n  color: var(--color-text);\n  font-size: 0.875rem;\n  flex: 1;\n}\n.format-guide-btn[data-v-759e00bb] {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  padding: 0.5rem 1rem;\n  background: var(--color-accent);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  white-space: nowrap;\n}\n.format-guide-btn[data-v-759e00bb]:hover {\n  background: var(--color-accent-hover);\n  transform: translateY(-1px);\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 640px) {\n.panel-header[data-v-759e00bb] {\n    flex-direction: column;\n    gap: 0.5rem;\n    align-items: stretch;\n}\n.panel-title[data-v-759e00bb] {\n    font-size: 1.1rem;\n}\n.header-actions[data-v-759e00bb] {\n    justify-content: stretch;\n}\n.search-bar[data-v-759e00bb] {\n    min-width: 100%;\n    flex: 1;\n}\n}\n@media (max-width: 480px) {\n.panel-header[data-v-759e00bb] {\n    padding: 0.75rem;\n}\n.panel-title[data-v-759e00bb] {\n    font-size: 1rem;\n}\n.search-bar[data-v-759e00bb] {\n    padding: 0.4rem;\n}\n.search-input[data-v-759e00bb] {\n    font-size: 0.8rem;\n}\n}\n.header-buttons[data-v-759e00bb] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 0 0 auto;\n  white-space: nowrap;\n  min-width: fit-content;\n}\n.refresh-btn[data-v-759e00bb],\n.export-btn[data-v-759e00bb],\n.stats-btn[data-v-759e00bb] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.5rem 1rem;\n  background: var(--color-primary);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n  white-space: nowrap;\n}\n.refresh-btn[data-v-759e00bb]:hover,\n.export-btn[data-v-759e00bb]:hover,\n.stats-btn[data-v-759e00bb]:hover {\n  background: var(--color-primary-hover);\n  transform: translateY(-1px);\n}\n.animate-spin[data-v-759e00bb] {\n  animation: spin-759e00bb 1s linear infinite;\n}\n@keyframes spin-759e00bb {\nfrom {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(360deg);\n}\n}\n@media (max-width: 560px) {\n.header-buttons .refresh-btn span[data-v-759e00bb],\n  .header-buttons .export-btn span[data-v-759e00bb],\n  .header-buttons .stats-btn span[data-v-759e00bb] {\n    display: none;\n}\n}\n",""]);const s=i},6188:e=>{"use strict";e.exports=Math.max},6262:(e,t)=>{"use strict";t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n}},6314:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",a=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),a&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),a&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,a,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);a&&i[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},6477:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.sect-members[data-v-659283e6] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n.player-info-bar[data-v-659283e6] {\n  display: flex;\n  gap: 1.5rem;\n  padding: 0.75rem 1rem;\n  background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(168, 85, 247, 0.05));\n  border-radius: 8px;\n  border: 1px solid rgba(147, 51, 234, 0.2);\n}\n.info-item[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.info-label[data-v-659283e6] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.info-value[data-v-659283e6] {\n  font-weight: 600;\n  font-size: 0.9rem;\n}\n.info-value.sect-name[data-v-659283e6] { color: var(--color-text);\n}\n.info-value.position[data-v-659283e6] { color: #9333ea;\n}\n.member-tabs[data-v-659283e6] {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.tab-btn[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  gap: 0.35rem;\n  padding: 0.5rem 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  font-size: 0.8rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.tab-btn[data-v-659283e6]:hover {\n  border-color: rgba(59, 130, 246, 0.3);\n  color: var(--color-text);\n}\n.tab-btn.active[data-v-659283e6] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05));\n  border-color: rgba(59, 130, 246, 0.4);\n  color: #3b82f6;\n}\n.count-badge[data-v-659283e6] {\n  background: #3b82f6;\n  color: white;\n  font-size: 0.7rem;\n  padding: 0.1rem 0.4rem;\n  border-radius: 10px;\n  font-weight: 600;\n}\n.member-list[data-v-659283e6] {\n  flex: 1;\n  overflow-y: auto;\n}\n.empty-state[data-v-659283e6] {\n  text-align: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-659283e6] {\n  opacity: 0.5;\n  margin-bottom: 0.5rem;\n}\n.empty-text[data-v-659283e6] {\n  font-weight: 600;\n  margin-bottom: 0.25rem;\n}\n.empty-hint[data-v-659283e6] {\n  font-size: 0.8rem;\n  opacity: 0.7;\n  margin-bottom: 1rem;\n}\n.ask-btn[data-v-659283e6] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.6rem 1rem;\n  background: linear-gradient(135deg, #3b82f6, #2563eb);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.ask-btn[data-v-659283e6]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n}\n.members[data-v-659283e6] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.member-card[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.member-card[data-v-659283e6]:hover {\n  border-color: rgba(59, 130, 246, 0.3);\n  background: var(--color-surface);\n}\n.member-card.is-self[data-v-659283e6] {\n  border-color: rgba(147, 51, 234, 0.3);\n  background: linear-gradient(135deg, rgba(147, 51, 234, 0.05), rgba(168, 85, 247, 0.02));\n}\n.member-avatar[data-v-659283e6] {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: linear-gradient(135deg, #9333ea, #7c3aed);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n.avatar-text[data-v-659283e6] {\n  color: white;\n  font-weight: 600;\n  font-size: 1rem;\n}\n.gender-badge[data-v-659283e6] {\n  position: absolute;\n  bottom: -2px;\n  right: -2px;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  font-size: 0.6rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 2px solid var(--color-background);\n}\n.gender-badge.male[data-v-659283e6] {\n  background: #3b82f6;\n  color: white;\n}\n.gender-badge.female[data-v-659283e6] {\n  background: #ec4899;\n  color: white;\n}\n.member-info[data-v-659283e6] {\n  flex: 1;\n  min-width: 0;\n}\n.member-header[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.25rem;\n}\n.member-name[data-v-659283e6] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.member-position[data-v-659283e6] {\n  font-size: 0.7rem;\n  padding: 0.1rem 0.4rem;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.position-elder[data-v-659283e6] { background: rgba(239, 68, 68, 0.1); color: #ef4444;\n}\n.position-true[data-v-659283e6] { background: rgba(139, 92, 246, 0.1); color: #8b5cf6;\n}\n.position-inner[data-v-659283e6] { background: rgba(59, 130, 246, 0.1); color: #3b82f6;\n}\n.position-outer[data-v-659283e6] { background: rgba(107, 114, 128, 0.1); color: #6b7280;\n}\n.member-details[data-v-659283e6] {\n  display: flex;\n  gap: 0.75rem;\n}\n.detail-item[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  gap: 0.2rem;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.detail-item.realm[data-v-659283e6] { color: #8b5cf6;\n}\n.relation-best[data-v-659283e6] { color: #ec4899 !important;\n}\n.relation-good[data-v-659283e6] { color: #f59e0b !important;\n}\n.relation-friendly[data-v-659283e6] { color: #22c55e !important;\n}\n.relation-normal[data-v-659283e6] { color: var(--color-text-secondary) !important;\n}\n.relation-cold[data-v-659283e6] { color: #6b7280 !important;\n}\n.relation-hostile[data-v-659283e6] { color: #ef4444 !important;\n}\n.arrow-icon[data-v-659283e6] {\n  color: var(--color-text-secondary);\n  flex-shrink: 0;\n}\n.quick-actions[data-v-659283e6] {\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.actions-title[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin: 0 0 0.75rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.action-buttons[data-v-659283e6] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n.action-btn[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.35rem;\n  padding: 0.5rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.75rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.action-btn[data-v-659283e6]:hover {\n  border-color: rgba(59, 130, 246, 0.3);\n  background: rgba(59, 130, 246, 0.05);\n  color: #3b82f6;\n}\n.members-notice[data-v-659283e6] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  background: rgba(59, 130, 246, 0.1);\n  border-radius: 6px;\n  font-size: 0.75rem;\n  color: #3b82f6;\n}\n",""]);const s=i},6494:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6533:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.loading-overlay[data-v-c8648b8a] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(5px);\n  -webkit-backdrop-filter: blur(5px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 10000;\n}\n.loading-content[data-v-c8648b8a] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 20px;\n}\n.spinner[data-v-c8648b8a] {\n  width: 50px;\n  height: 50px;\n  border: 5px solid rgba(var(--color-primary-rgb), 0.3);\n  border-top-color: var(--color-primary);\n  border-radius: 50%;\n  animation: spin-c8648b8a 1.2s linear infinite;\n}\n@keyframes spin-c8648b8a {\nto {\n    transform: rotate(360deg);\n}\n}\n.loading-text[data-v-c8648b8a] {\n  color: var(--color-accent);\n  font-size: 1.2rem;\n  font-weight: 500;\n  text-shadow: 0 0 10px rgba(var(--color-primary-rgb), 0.5);\n}\n.fade-enter-active[data-v-c8648b8a],\n.fade-leave-active[data-v-c8648b8a] {\n  transition: opacity 0.3s ease;\n}\n.fade-enter-from[data-v-c8648b8a],\n.fade-leave-to[data-v-c8648b8a] {\n  opacity: 0;\n}\n",""]);const s=i},6549:e=>{"use strict";e.exports=Object.getOwnPropertyDescriptor},6556:(e,t,n)=>{"use strict";var a=n(453),r=n(3126),o=r([a("%String.prototype.indexOf%")]);e.exports=function(e,t){var n=a(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?r([n]):n}},6570:e=>{"use strict";function t(e,t,a){a=a||2;var o,i,s,l,u,m,f,g=t&&t.length,h=g?t[0]*a:e.length,v=n(e,0,h,a,!0),b=[];if(!v||v.next===v.prev)return b;if(g&&(v=function(e,t,a,r){var o,i,s,l=[];for(o=0,i=t.length;o<i;o++)(s=n(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===s.next&&(s.steiner=!0),l.push(p(s));for(l.sort(c),o=0;o<l.length;o++)a=d(l[o],a);return a}(e,t,v,a)),e.length>80*a){o=s=e[0],i=l=e[1];for(var y=a;y<h;y+=a)(u=e[y])<o&&(o=u),(m=e[y+1])<i&&(i=m),u>s&&(s=u),m>l&&(l=m);f=0!==(f=Math.max(s-o,l-i))?32767/f:0}return r(v,b,a,o,i,f,0),b}function n(e,t,n,a,r){var o,i;if(r===V(e,t,n,a)>0)for(o=t;o<n;o+=a)i=E(o,e[o],e[o+1],i);else for(o=n-a;o>=t;o-=a)i=E(o,e[o],e[o+1],i);return i&&v(i,i.next)&&(N(i),i=i.next),i}function a(e,t){if(!e)return e;t||(t=e);var n,a=e;do{if(n=!1,a.steiner||!v(a,a.next)&&0!==h(a.prev,a,a.next))a=a.next;else{if(N(a),(a=t=a.prev)===a.next)break;n=!0}}while(n||a!==t);return t}function r(e,t,n,c,d,u,p){if(e){!p&&u&&function(e,t,n,a){var r=e;do{0===r.z&&(r.z=m(r.x,r.y,t,n,a)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,a,r,o,i,s,l,c=1;do{for(n=e,e=null,o=null,i=0;n;){for(i++,a=n,s=0,t=0;t<c&&(s++,a=a.nextZ);t++);for(l=c;s>0||l>0&&a;)0!==s&&(0===l||!a||n.z<=a.z)?(r=n,n=n.nextZ,s--):(r=a,a=a.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=a}o.nextZ=null,c*=2}while(i>1)}(r)}(e,c,d,u);for(var f,g,h=e;e.prev!==e.next;)if(f=e.prev,g=e.next,u?i(e,c,d,u):o(e))t.push(f.i/n|0),t.push(e.i/n|0),t.push(g.i/n|0),N(e),e=g.next,h=g.next;else if((e=g)===h){p?1===p?r(e=s(a(e),t,n),t,n,c,d,u,2):2===p&&l(e,t,n,c,d,u):r(a(e),t,n,c,d,u,1);break}}}function o(e){var t=e.prev,n=e,a=e.next;if(h(t,n,a)>=0)return!1;for(var r=t.x,o=n.x,i=a.x,s=t.y,l=n.y,c=a.y,d=r<o?r<i?r:i:o<i?o:i,u=s<l?s<c?s:c:l<c?l:c,m=r>o?r>i?r:i:o>i?o:i,p=s>l?s>c?s:c:l>c?l:c,g=a.next;g!==t;){if(g.x>=d&&g.x<=m&&g.y>=u&&g.y<=p&&f(r,s,o,l,i,c,g.x,g.y)&&h(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function i(e,t,n,a){var r=e.prev,o=e,i=e.next;if(h(r,o,i)>=0)return!1;for(var s=r.x,l=o.x,c=i.x,d=r.y,u=o.y,p=i.y,g=s<l?s<c?s:c:l<c?l:c,v=d<u?d<p?d:p:u<p?u:p,b=s>l?s>c?s:c:l>c?l:c,y=d>u?d>p?d:p:u>p?u:p,x=m(g,v,t,n,a),k=m(b,y,t,n,a),w=e.prevZ,E=e.nextZ;w&&w.z>=x&&E&&E.z<=k;){if(w.x>=g&&w.x<=b&&w.y>=v&&w.y<=y&&w!==r&&w!==i&&f(s,d,l,u,c,p,w.x,w.y)&&h(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,E.x>=g&&E.x<=b&&E.y>=v&&E.y<=y&&E!==r&&E!==i&&f(s,d,l,u,c,p,E.x,E.y)&&h(E.prev,E,E.next)>=0)return!1;E=E.nextZ}for(;w&&w.z>=x;){if(w.x>=g&&w.x<=b&&w.y>=v&&w.y<=y&&w!==r&&w!==i&&f(s,d,l,u,c,p,w.x,w.y)&&h(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=k;){if(E.x>=g&&E.x<=b&&E.y>=v&&E.y<=y&&E!==r&&E!==i&&f(s,d,l,u,c,p,E.x,E.y)&&h(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function s(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!v(o,i)&&b(o,r,r.next,i)&&k(o,i)&&k(i,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),N(r),N(r.next),r=e=i),r=r.next}while(r!==e);return a(r)}function l(e,t,n,o,i,s){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&g(l,c)){var d=w(l,c);return l=a(l,l.next),d=a(d,d.next),r(l,t,n,o,i,s,0),void r(d,t,n,o,i,s,0)}c=c.next}l=l.next}while(l!==e)}function c(e,t){return e.x-t.x}function d(e,t){var n=function(e,t){var n,a=t,r=e.x,o=e.y,i=-1/0;do{if(o<=a.y&&o>=a.next.y&&a.next.y!==a.y){var s=a.x+(o-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(s<=r&&s>i&&(i=s,n=a.x<a.next.x?a:a.next,s===r))return n}a=a.next}while(a!==t);if(!n)return null;var l,c=n,d=n.x,m=n.y,p=1/0;a=n;do{r>=a.x&&a.x>=d&&r!==a.x&&f(o<m?r:i,o,d,m,o<m?i:r,o,a.x,a.y)&&(l=Math.abs(o-a.y)/(r-a.x),k(a,e)&&(l<p||l===p&&(a.x>n.x||a.x===n.x&&u(n,a)))&&(n=a,p=l)),a=a.next}while(a!==c);return n}(e,t);if(!n)return t;var r=w(n,e);return a(r,r.next),a(n,n.next)}function u(e,t){return h(e.prev,e,t.prev)<0&&h(t.next,e,e.next)<0}function m(e,t,n,a,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-a)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function p(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function f(e,t,n,a,r,o,i,s){return(r-i)*(t-s)>=(e-i)*(o-s)&&(e-i)*(a-s)>=(n-i)*(t-s)&&(n-i)*(o-s)>=(r-i)*(a-s)}function g(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&b(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(k(e,t)&&k(t,e)&&function(e,t){var n=e,a=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(a=!a),n=n.next}while(n!==e);return a}(e,t)&&(h(e.prev,e,t.prev)||h(e,t.prev,t))||v(e,t)&&h(e.prev,e,e.next)>0&&h(t.prev,t,t.next)>0)}function h(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function v(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,n,a){var r=x(h(e,t,n)),o=x(h(e,t,a)),i=x(h(n,a,e)),s=x(h(n,a,t));return r!==o&&i!==s||!(0!==r||!y(e,n,t))||!(0!==o||!y(e,a,t))||!(0!==i||!y(n,e,a))||!(0!==s||!y(n,t,a))}function y(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function x(e){return e>0?1:e<0?-1:0}function k(e,t){return h(e.prev,e,e.next)<0?h(e,t,e.next)>=0&&h(e,e.prev,t)>=0:h(e,t,e.prev)<0||h(e,e.next,t)<0}function w(e,t){var n=new S(e.i,e.x,e.y),a=new S(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,a.next=n,n.prev=a,o.next=a,a.prev=o,a}function E(e,t,n,a){var r=new S(e,t,n);return a?(r.next=a.next,r.prev=a,a.next.prev=r,a.next=r):(r.prev=r,r.next=r),r}function N(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function V(e,t,n,a){for(var r=0,o=t,i=n-a;o<n;o+=a)r+=(e[i]-e[o])*(e[o+1]+e[i+1]),i=o;return r}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,a){var r=t&&t.length,o=r?t[0]*n:e.length,i=Math.abs(V(e,0,o,n));if(r)for(var s=0,l=t.length;s<l;s++){var c=t[s]*n,d=s<l-1?t[s+1]*n:e.length;i-=Math.abs(V(e,c,d,n))}var u=0;for(s=0;s<a.length;s+=3){var m=a[s]*n,p=a[s+1]*n,f=a[s+2]*n;u+=Math.abs((e[m]-e[f])*(e[p+1]-e[m+1])-(e[m]-e[p])*(e[f+1]-e[m+1]))}return 0===i&&0===u?0:Math.abs((u-i)/i)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},a=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var i=0;i<t;i++)n.vertices.push(e[r][o][i]);r>0&&(a+=e[r-1].length,n.holes.push(a))}return n}},6585:(e,t,n)=>{"use strict";function a(){try{const e=localStorage.getItem("dad_game_settings");if(e){const t=JSON.parse(e);return{nsfwMode:void 0===t.enableNsfwMode||t.enableNsfwMode,nsfwGenderFilter:t.nsfwGenderFilter||"female"}}}catch{}return{nsfwMode:!0,nsfwGenderFilter:"female"}}function r(e){const t=e&&"object"==typeof e?e:{},{nsfwMode:n,nsfwGenderFilter:r}=a();return void 0===t.nsfwMode&&(t.nsfwMode=n),void 0===t.nsfwGenderFilter&&(t.nsfwGenderFilter=r),t}function o(e){if(!e||"object"!=typeof e)return e;const t=e;return t.ç³»ç»Ÿ=r(t.ç³»ç»Ÿ),t}n.d(t,{Md:()=>r,kL:()=>o,rW:()=>a})},6588:(e,t,n)=>{"use strict";n.d(t,{repairSaveData:()=>i});var a=n(2224),r=n(4530),o=n(6988);function i(e){console.log("[æ•°æ®ä¿®å¤] å¼€å§‹ä¿®å¤å­˜æ¡£æ•°æ®");try{if(!e||"object"!=typeof e)return console.error("[æ•°æ®ä¿®å¤] âŒ å­˜æ¡£æ•°æ®ä¸ºç©ºæˆ–æ— æ•ˆï¼Œåˆ›å»ºé»˜è®¤å­˜æ¡£"),p();const n=(0,r.ru)(e)?e:(0,r.jj)(e).migrated,i=(0,a.cloneDeep)(n),s=(0,o.$)(i);if(!s.isValid)return console.warn("[æ•°æ®ä¿®å¤] âš ï¸ å­˜æ¡£ç»“æ„ä¸åˆæ ¼ï¼Œä½¿ç”¨æœ€å°V3æ¨¡æ¿å…œåº•:",s.errors),p();if(i.å…ƒæ•°æ®=i.å…ƒæ•°æ®&&"object"==typeof i.å…ƒæ•°æ®?i.å…ƒæ•°æ®:p().å…ƒæ•°æ®,i.å…ƒæ•°æ®.ç‰ˆæœ¬å·=3,i.å…ƒæ•°æ®.å­˜æ¡£ID=i.å…ƒæ•°æ®.å­˜æ¡£ID||`save_${Date.now()}`,i.å…ƒæ•°æ®.å­˜æ¡£å=i.å…ƒæ•°æ®.å­˜æ¡£å||"è‡ªåŠ¨å­˜æ¡£",i.å…ƒæ•°æ®.åˆ›å»ºæ—¶é—´=i.å…ƒæ•°æ®.åˆ›å»ºæ—¶é—´||(new Date).toISOString(),i.å…ƒæ•°æ®.æ›´æ–°æ—¶é—´=(new Date).toISOString(),i.å…ƒæ•°æ®.æ¸¸æˆæ—¶é•¿ç§’=m(i.å…ƒæ•°æ®.æ¸¸æˆæ—¶é•¿ç§’,0,999999999,0),i.å…ƒæ•°æ®.æ—¶é—´=(t=i.å…ƒæ•°æ®.æ—¶é—´)&&"object"==typeof t?{å¹´:m(t.å¹´,1,999999,1e3),æœˆ:m(t.æœˆ,1,12,1),æ—¥:m(t.æ—¥,1,30,1),å°æ—¶:m(t.å°æ—¶,0,23,8),åˆ†é’Ÿ:m(t.åˆ†é’Ÿ,0,59,0)}:{å¹´:1e3,æœˆ:1,æ—¥:1,å°æ—¶:8,åˆ†é’Ÿ:0},i.è§’è‰²=i.è§’è‰²&&"object"==typeof i.è§’è‰²?i.è§’è‰²:p().è§’è‰²,i.è§’è‰².èº«ä»½=i.è§’è‰².èº«ä»½&&"object"==typeof i.è§’è‰².èº«ä»½?i.è§’è‰².èº«ä»½:p().è§’è‰².èº«ä»½,i.è§’è‰².èº«ä»½.åå­—=i.è§’è‰².èº«ä»½.åå­—||"æ— åä¿®å£«",i.è§’è‰².èº«ä»½.æ€§åˆ«=i.è§’è‰².èº«ä»½.æ€§åˆ«||"ç”·",i.è§’è‰².èº«ä»½.å‡ºç”Ÿæ—¥æœŸ||(i.è§’è‰².èº«ä»½.å‡ºç”Ÿæ—¥æœŸ={å¹´:982,æœˆ:1,æ—¥:1}),i.è§’è‰².èº«ä»½.å…ˆå¤©å…­å¸&&"object"==typeof i.è§’è‰².èº«ä»½.å…ˆå¤©å…­å¸){const e=i.è§’è‰².èº«ä»½.å…ˆå¤©å…­å¸;e.æ ¹éª¨=m(e.æ ¹éª¨,0,10,5),e.çµæ€§=m(e.çµæ€§,0,10,5),e.æ‚Ÿæ€§=m(e.æ‚Ÿæ€§,0,10,5),e.æ°”è¿=m(e.æ°”è¿,0,10,5),e.é­…åŠ›=m(e.é­…åŠ›,0,10,5),e.å¿ƒæ€§=m(e.å¿ƒæ€§,0,10,5)}else i.è§’è‰².èº«ä»½.å…ˆå¤©å…­å¸={æ ¹éª¨:5,çµæ€§:5,æ‚Ÿæ€§:5,æ°”è¿:5,é­…åŠ›:5,å¿ƒæ€§:5};i.è§’è‰².èº«ä»½.åå¤©å…­å¸&&"object"==typeof i.è§’è‰².èº«ä»½.åå¤©å…­å¸||(i.è§’è‰².èº«ä»½.åå¤©å…­å¸={æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0}),i.è§’è‰².å±æ€§&&"object"==typeof i.è§’è‰².å±æ€§?(i.è§’è‰².å±æ€§.å¢ƒç•Œ=l(i.è§’è‰².å±æ€§.å¢ƒç•Œ),i.è§’è‰².å±æ€§.æ°”è¡€=c(i.è§’è‰².å±æ€§.æ°”è¡€,100,100),i.è§’è‰².å±æ€§.çµæ°”=c(i.è§’è‰².å±æ€§.çµæ°”,50,50),i.è§’è‰².å±æ€§.ç¥è¯†=c(i.è§’è‰².å±æ€§.ç¥è¯†,30,30),i.è§’è‰².å±æ€§.å¯¿å‘½=c(i.è§’è‰².å±æ€§.å¯¿å‘½,18,80),i.è§’è‰².å±æ€§.å£°æœ›=m(i.è§’è‰².å±æ€§.å£°æœ›,0,999999,0)):(console.warn("[æ•°æ®ä¿®å¤] å±æ€§ç¼ºå¤±ï¼Œåˆ›å»ºé»˜è®¤å€¼"),i.è§’è‰².å±æ€§={å¢ƒç•Œ:{åç§°:"å‡¡äºº",é˜¶æ®µ:"",å½“å‰è¿›åº¦:0,ä¸‹ä¸€çº§æ‰€éœ€:100,çªç ´æè¿°:"å¼•æ°”å…¥ä½“ï¼Œæ„Ÿæ‚Ÿå¤©åœ°çµæ°”ï¼Œè¸ä¸Šä¿®ä»™ç¬¬ä¸€æ­¥"},å£°æœ›:0,æ°”è¡€:{å½“å‰:100,ä¸Šé™:100},çµæ°”:{å½“å‰:50,ä¸Šé™:50},ç¥è¯†:{å½“å‰:30,ä¸Šé™:30},å¯¿å‘½:{å½“å‰:18,ä¸Šé™:80}}),i.è§’è‰².ä½ç½®&&"object"==typeof i.è§’è‰².ä½ç½®?i.è§’è‰².ä½ç½®.æè¿°||(i.è§’è‰².ä½ç½®.æè¿°="æœå¤©å¤§é™†Â·æ— åä¹‹åœ°"):i.è§’è‰².ä½ç½®={æè¿°:"æœå¤©å¤§é™†Â·æ— åä¹‹åœ°",x:5e3,y:5e3},Array.isArray(i.è§’è‰².æ•ˆæœ)||(i.è§’è‰².æ•ˆæœ=[]);const f={è£…å¤‡1:null,è£…å¤‡2:null,è£…å¤‡3:null,è£…å¤‡4:null,è£…å¤‡5:null,è£…å¤‡6:null};i.è§’è‰².è£…å¤‡&&"object"==typeof i.è§’è‰².è£…å¤‡||(i.è§’è‰².è£…å¤‡={...f});for(let e=1;e<=6;e++){const t=`è£…å¤‡${e}`,n=i.è§’è‰².è£…å¤‡[t];i.è§’è‰².è£…å¤‡[t]=null==n?null:"string"==typeof n?n:"object"==typeof n&&null!==n&&"ç‰©å“ID"in n?String(n.ç‰©å“ID||""):null}if(i.è§’è‰².èƒŒåŒ…&&"object"==typeof i.è§’è‰².èƒŒåŒ…)if(i.è§’è‰².èƒŒåŒ….çµçŸ³&&"object"==typeof i.è§’è‰².èƒŒåŒ….çµçŸ³?(i.è§’è‰².èƒŒåŒ….çµçŸ³.ä¸‹å“=m(i.è§’è‰².èƒŒåŒ….çµçŸ³.ä¸‹å“,0,999999999,0),i.è§’è‰².èƒŒåŒ….çµçŸ³.ä¸­å“=m(i.è§’è‰².èƒŒåŒ….çµçŸ³.ä¸­å“,0,999999999,0),i.è§’è‰².èƒŒåŒ….çµçŸ³.ä¸Šå“=m(i.è§’è‰².èƒŒåŒ….çµçŸ³.ä¸Šå“,0,999999999,0),i.è§’è‰².èƒŒåŒ….çµçŸ³.æå“=m(i.è§’è‰².èƒŒåŒ….çµçŸ³.æå“,0,999999999,0)):i.è§’è‰².èƒŒåŒ….çµçŸ³={ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0},i.è§’è‰².èƒŒåŒ….ç‰©å“&&"object"==typeof i.è§’è‰².èƒŒåŒ….ç‰©å“){const e={};for(const[t,n]of Object.entries(i.è§’è‰².èƒŒåŒ….ç‰©å“)){const a=n;a&&"object"==typeof a&&"string"==typeof a.åç§°&&a.åç§°.trim()&&(e[t]=d(a))}i.è§’è‰².èƒŒåŒ….ç‰©å“=e}else i.è§’è‰².èƒŒåŒ….ç‰©å“={};else i.è§’è‰².èƒŒåŒ…={çµçŸ³:{ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0},ç‰©å“:{}};if(i.ç¤¾äº¤&&"object"==typeof i.ç¤¾äº¤||(i.ç¤¾äº¤=p().ç¤¾äº¤),i.ç¤¾äº¤.å…³ç³»&&"object"==typeof i.ç¤¾äº¤.å…³ç³»){const e=i.ç¤¾äº¤.å…³ç³»,t={};for(const[n,a]of Object.entries(e)){if(n.startsWith("_"))continue;if(!a||"object"!=typeof a)continue;const e=a,r="string"==typeof e.åå­—?e.åå­—.trim():"",o="string"==typeof n?n.trim():"",i=r||o;i&&(e.åå­—=i,t[i]=u(e))}i.ç¤¾äº¤.å…³ç³»=t}else i.ç¤¾äº¤.å…³ç³»={};if(i.ç¤¾äº¤.è®°å¿†&&"object"==typeof i.ç¤¾äº¤.è®°å¿†?(i.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†=Array.isArray(i.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†)?i.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†:[],i.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†=Array.isArray(i.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†)?i.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†:[],i.ç¤¾äº¤.è®°å¿†.é•¿æœŸè®°å¿†=Array.isArray(i.ç¤¾äº¤.è®°å¿†.é•¿æœŸè®°å¿†)?i.ç¤¾äº¤.è®°å¿†.é•¿æœŸè®°å¿†:[],i.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†=Array.isArray(i.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†)?i.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†:[]):i.ç¤¾äº¤.è®°å¿†={çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]},i.ç³»ç»Ÿ&&"object"==typeof i.ç³»ç»Ÿ||(i.ç³»ç»Ÿ=p().ç³»ç»Ÿ),i.ç³»ç»Ÿ.å†å²&&"object"==typeof i.ç³»ç»Ÿ.å†å²||(i.ç³»ç»Ÿ.å†å²={å™äº‹:[]}),Array.isArray(i.ç³»ç»Ÿ.å†å².å™äº‹)||(i.ç³»ç»Ÿ.å†å².å™äº‹=[]),i.è§’è‰².å¤§é“&&"object"==typeof i.è§’è‰².å¤§é“||(i.è§’è‰².å¤§é“={å¤§é“åˆ—è¡¨:{}}),i.è§’è‰².åŠŸæ³•&&"object"==typeof i.è§’è‰².åŠŸæ³•||(i.è§’è‰².åŠŸæ³•={å½“å‰åŠŸæ³•ID:null,åŠŸæ³•è¿›åº¦:{},åŠŸæ³•å¥—è£…:{ä¸»ä¿®:null,è¾…ä¿®:[]}}),i.è§’è‰².ä¿®ç‚¼&&"object"==typeof i.è§’è‰².ä¿®ç‚¼||(i.è§’è‰².ä¿®ç‚¼={ä¿®ç‚¼åŠŸæ³•:null,ä¿®ç‚¼çŠ¶æ€:{æ¨¡å¼:"æœªä¿®ç‚¼"}}),i.è§’è‰².æŠ€èƒ½&&"object"==typeof i.è§’è‰².æŠ€èƒ½||(i.è§’è‰².æŠ€èƒ½={æŒæ¡æŠ€èƒ½:[],è£…å¤‡æ :[],å†·å´:{}}),i.ç¤¾äº¤.ä»»åŠ¡&&"object"==typeof i.ç¤¾äº¤.ä»»åŠ¡||(i.ç¤¾äº¤.ä»»åŠ¡={é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}}),i.è§’è‰².ä¿®ç‚¼?.ä¿®ç‚¼åŠŸæ³•&&"object"==typeof i.è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•){const e=i.è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•;if(e.ç‰©å“ID){const t=i.è§’è‰²?.èƒŒåŒ…?.ç‰©å“?.[e.ç‰©å“ID];t&&"åŠŸæ³•"===t.ç±»å‹?e.åç§°&&e.åç§°===t.åç§°||(e.åç§°=t.åç§°):i.è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•=null}else i.è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•=null}return console.log("[æ•°æ®ä¿®å¤] âœ… å­˜æ¡£æ•°æ®ä¿®å¤å®Œæˆ"),i}catch(e){return console.error("[æ•°æ®ä¿®å¤] âŒ ä¿®å¤è¿‡ç¨‹å‘ç”Ÿä¸¥é‡é”™è¯¯ï¼Œè¿”å›é»˜è®¤å­˜æ¡£:",e),p()}var t}function s(e,t){const n=e||"å‡¡äºº",a=t||"";if("å‡¡äºº"===n)return"å¼•æ°”å…¥ä½“ï¼Œæ„Ÿæ‚Ÿå¤©åœ°çµæ°”ï¼Œè¸ä¸Šä¿®ä»™ç¬¬ä¸€æ­¥";const r={ç»ƒæ°”:{åˆæœŸ:"å‡èšä¸¹ç”°çµæ°”ï¼Œæ‰“é€šä»»ç£äºŒè„‰ï¼Œå†²å‡»ç»ƒæ°”ä¸­æœŸ",ä¸­æœŸ:"æ‹“å®½ç»è„‰ï¼Œæå‡çµæ°”å®¹é‡ï¼Œå†²å‡»ç»ƒæ°”åæœŸ",åæœŸ:"å‡å®æ ¹åŸºï¼Œæ„Ÿæ‚Ÿå¤©åœ°æ³•åˆ™ï¼Œå†²å‡»ç»ƒæ°”åœ†æ»¡",åœ†æ»¡:"çµæ°”è´¯é€šå‘¨å¤©ï¼Œå‡ç»ƒçµæ ¹æœ¬æºï¼Œå‡†å¤‡ç­‘åŸº","":"æ¬è¿å‘¨å¤©ï¼Œå‡èšçµæ°”ï¼Œå¤¯å®ç»ƒæ°”æ ¹åŸº"},ç­‘åŸº:{åˆæœŸ:"å‡èšé“å°ï¼Œå°†çµæ°”å‹ç¼©å‡å®ï¼Œå†²å‡»ç­‘åŸºä¸­æœŸ",ä¸­æœŸ:"ç¨³å›ºé“åŸºï¼Œæ‰©å……ä¸¹ç”°å®¹é‡ï¼Œå†²å‡»ç­‘åŸºåæœŸ",åæœŸ:"æ„Ÿæ‚Ÿå¤©åœ°æ³•åˆ™ï¼Œå‡ç»ƒé‡‘ä¸¹é›å½¢ï¼Œå†²å‡»ç­‘åŸºåœ†æ»¡",åœ†æ»¡:"é“åŸºåœ†æ»¡ï¼Œç ´è€Œåç«‹ï¼Œå°†çµæ°”å‡èšæˆé‡‘ä¸¹","":"å¤¯å®é“åŸºï¼Œå‹ç¼©çµæ°”ï¼Œæå‡ç­‘åŸºå¢ƒç•Œ"},é‡‘ä¸¹:{åˆæœŸ:"å‡å®é‡‘ä¸¹ï¼Œåˆ»ç”»ç¬¦æ–‡ï¼Œå†²å‡»é‡‘ä¸¹ä¸­æœŸ",ä¸­æœŸ:"æ·¬ç‚¼é‡‘ä¸¹ï¼Œé¢†æ‚Ÿé“éŸµï¼Œå†²å‡»é‡‘ä¸¹åæœŸ",åæœŸ:"é‡‘ä¸¹å¤§æˆï¼Œè•´å…»å…ƒç¥ï¼Œå†²å‡»é‡‘ä¸¹åœ†æ»¡",åœ†æ»¡:"ç ´ä¸¹æˆå©´ï¼Œå…ƒç¥å‡ºçªï¼Œè¸å…¥å…ƒå©´å¢ƒç•Œ","":"æ·¬ç‚¼é‡‘ä¸¹æœ¬æºï¼Œåˆ»ç”»å¤©åœ°ç¬¦æ–‡ï¼Œæå‡é‡‘ä¸¹å“è´¨"},å…ƒå©´:{åˆæœŸ:"ç¨³å›ºå…ƒå©´ï¼Œå‡ç»ƒç¥é­‚ï¼Œå†²å‡»å…ƒå©´ä¸­æœŸ",ä¸­æœŸ:"å…ƒå©´å£®å¤§ï¼Œæ„Ÿæ‚Ÿå¤§é“ï¼Œå†²å‡»å…ƒå©´åæœŸ",åæœŸ:"å…ƒå©´å¤§æˆï¼Œå‡ç»ƒå…ƒç¥ï¼Œå†²å‡»å…ƒå©´åœ†æ»¡",åœ†æ»¡:"å…ƒç¥èœ•å˜ï¼Œè‚‰èº«æˆåœ£ï¼Œå‡†å¤‡åŒ–ç¥","":"å£®å¤§å…ƒå©´ï¼Œæ·¬ç‚¼ç¥é­‚ï¼Œæå‡å…ƒå©´å¢ƒç•Œ"},åŒ–ç¥:{åˆæœŸ:"ç¥é­‚åˆä¸€ï¼Œé¢†æ‚Ÿæ³•åˆ™ï¼Œå†²å‡»åŒ–ç¥ä¸­æœŸ",ä¸­æœŸ:"å‡èšç¥æ ¼ï¼Œå‚æ‚Ÿå¤©é“ï¼Œå†²å‡»åŒ–ç¥åæœŸ",åæœŸ:"ç¥æ ¼å¤§æˆï¼Œèåˆæ³•åˆ™ï¼Œå†²å‡»åŒ–ç¥åœ†æ»¡",åœ†æ»¡:"ç‚¼è™šåˆé“ï¼Œè‚‰èº«ä¸ç­ï¼Œå‡†å¤‡çªç ´ç‚¼è™š","":"æ„Ÿæ‚Ÿå¤§é“æ³•åˆ™ï¼Œå‡ç»ƒç¥æ ¼ï¼Œæå‡åŒ–ç¥å¢ƒç•Œ"},ç‚¼è™š:{åˆæœŸ:"ç‚¼è™šåŒ–å®ï¼Œè™šç©ºå‡å½¢ï¼Œå†²å‡»ç‚¼è™šä¸­æœŸ",ä¸­æœŸ:"è™šå®åˆä¸€ï¼Œå‚æ‚Ÿç©ºé—´æ³•åˆ™ï¼Œå†²å‡»ç‚¼è™šåæœŸ",åæœŸ:"æ’•è£‚è™šç©ºï¼ŒæŒæ§ç©ºé—´ï¼Œå†²å‡»ç‚¼è™šåœ†æ»¡",åœ†æ»¡:"è™šç©ºå¤§æˆï¼Œä¸å¤©åœ°åˆä¸€ï¼Œå‡†å¤‡æ¸¡åŠ«","":"ç‚¼åŒ–è™šç©ºä¹‹åŠ›ï¼Œæ„Ÿæ‚Ÿç©ºé—´å¥¥ä¹‰ï¼Œæå‡ç‚¼è™šå¢ƒç•Œ"},åˆä½“:{åˆæœŸ:"å¤©äººåˆä¸€ï¼Œä¸å¤©åœ°å…±é¸£ï¼Œå†²å‡»åˆä½“ä¸­æœŸ",ä¸­æœŸ:"é¢†æ‚Ÿå¤©é“ï¼ŒæŒæ§å¤©åœ°ä¹‹åŠ›ï¼Œå†²å‡»åˆä½“åæœŸ",åæœŸ:"å¤©åœ°è®¤å¯ï¼Œæ³•åˆ™åŠ èº«ï¼Œå†²å‡»åˆä½“åœ†æ»¡",åœ†æ»¡:"ä¸é“åˆçœŸï¼Œå¤©åŠ«å°†è‡³ï¼Œå‡†å¤‡æ¸¡åŠ«é£å‡","":"æ„Ÿæ‚Ÿå¤©åœ°å¤§é“ï¼Œä¸å¤©åœ°å…±é¸£ï¼Œæå‡åˆä½“å¢ƒç•Œ"},å¤§ä¹˜:{åˆæœŸ:"å¤§é“åœ†æ»¡ï¼Œæ³•åˆ™å…¥ä½“ï¼Œå†²å‡»å¤§ä¹˜ä¸­æœŸ",ä¸­æœŸ:"å¤©é“è®¤å¯ï¼Œå‚æ‚Ÿä»™é“ï¼Œå†²å‡»å¤§ä¹˜åæœŸ",åæœŸ:"ä»™éŸµåˆç°ï¼Œå‡†å¤‡æ¸¡åŠ«ï¼Œå†²å‡»å¤§ä¹˜åœ†æ»¡",åœ†æ»¡:"æ¸¡ä¹ä¹å¤©åŠ«ï¼Œé£å‡ä»™ç•Œï¼Œè¶…è„±å‡¡å°˜","":"æ„Ÿæ‚Ÿä»™é“å¥¥ä¹‰ï¼Œå‡ç»ƒä»™ä½“ï¼Œå‡†å¤‡é£å‡"}}[n];return r?r[a]||r[""]||`æ„Ÿæ‚Ÿ${n}å¢ƒç•Œå¥¥ä¹‰ï¼Œæå‡ä¿®ä¸ºå¢ƒç•Œ`:{åˆæœŸ:`å‡ç»ƒ${n}åˆæœŸæ ¹åŸºï¼Œå†²å‡»${n}ä¸­æœŸ`,ä¸­æœŸ:`ç¨³å›º${n}ä¸­æœŸä¿®ä¸ºï¼Œå†²å‡»${n}åæœŸ`,åæœŸ:`åœ†æ»¡${n}åæœŸå¢ƒç•Œï¼Œå†²å‡»${n}åœ†æ»¡`,åœ†æ»¡:`${n}åœ†æ»¡å¤§æˆï¼Œå‡†å¤‡çªç ´ä¸‹ä¸€å¢ƒç•Œ`,"":`æ„Ÿæ‚Ÿ${n}å¢ƒç•Œå¥¥ä¹‰ï¼Œæå‡ä¿®ä¸º`}[a]||`æ„Ÿæ‚Ÿ${n}å¢ƒç•Œï¼Œæå‡ä¿®ä¸º`}function l(e){if(!e||"object"!=typeof e)return{åç§°:"å‡¡äºº",é˜¶æ®µ:"",å½“å‰è¿›åº¦:0,ä¸‹ä¸€çº§æ‰€éœ€:100,çªç ´æè¿°:"å¼•æ°”å…¥ä½“ï¼Œæ„Ÿæ‚Ÿå¤©åœ°çµæ°”ï¼Œè¸ä¸Šä¿®ä»™ç¬¬ä¸€æ­¥"};const t=e.åç§°||"å‡¡äºº",n=void 0!==e.é˜¶æ®µ?e.é˜¶æ®µ:"";return{åç§°:t,é˜¶æ®µ:n,å½“å‰è¿›åº¦:m(e.å½“å‰è¿›åº¦,0,999999999,0),ä¸‹ä¸€çº§æ‰€éœ€:m(e.ä¸‹ä¸€çº§æ‰€éœ€,1,999999999,100),çªç ´æè¿°:e.çªç ´æè¿°||s(t,n)}}function c(e,t,n){if(!e||"object"!=typeof e)return{å½“å‰:t,ä¸Šé™:n};const a=m(e.å½“å‰,0,999999999,t),r=m(e.ä¸Šé™,1,999999999,n);return{å½“å‰:Math.min(a,r),ä¸Šé™:r}}function d(e){const t={...e};return t.ç‰©å“ID=t.ç‰©å“ID||`item_${Date.now()}`,t.åç§°=t.åç§°||"æœªå‘½åç‰©å“",t.æ•°é‡=m(t.æ•°é‡,1,999999,1),t.å“è´¨&&"object"==typeof t.å“è´¨?(["å‡¡","é»„","ç„","åœ°","å¤©","ä»™","ç¥"].includes(t.å“è´¨.quality)||(t.å“è´¨.quality="å‡¡"),t.å“è´¨.grade=m(t.å“è´¨.grade,0,10,1)):t.å“è´¨={quality:"å‡¡",grade:1},["è£…å¤‡","åŠŸæ³•","ä¸¹è¯","ææ–™","å…¶ä»–"].includes(t.ç±»å‹)||(t.ç±»å‹="å…¶ä»–"),t}function u(e){const t={...e};return t.åå­—=t.åå­—||"æ— å",t.æ€§åˆ«=t.æ€§åˆ«||"ç”·",t.å¢ƒç•Œ=l(t.å¢ƒç•Œ),t.å…ˆå¤©å…­å¸&&"object"==typeof t.å…ˆå¤©å…­å¸||(t.å…ˆå¤©å…­å¸={æ ¹éª¨:5,çµæ€§:5,æ‚Ÿæ€§:5,æ°”è¿:5,é­…åŠ›:5,å¿ƒæ€§:5}),t.å½“å‰ä½ç½®&&"object"==typeof t.å½“å‰ä½ç½®?t.å½“å‰ä½ç½®.æè¿°||(t.å½“å‰ä½ç½®.æè¿°="æœå¤©å¤§é™†Â·æ— åä¹‹åœ°"):t.å½“å‰ä½ç½®={æè¿°:"æœå¤©å¤§é™†Â·æ— åä¹‹åœ°"},t.å¥½æ„Ÿåº¦=m(t.å¥½æ„Ÿåº¦,-100,100,0),Array.isArray(t.è®°å¿†)||(t.è®°å¿†=[]),t.èƒŒåŒ…&&"object"==typeof t.èƒŒåŒ…||(t.èƒŒåŒ…={çµçŸ³:{ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0},ç‰©å“:{}}),t}function m(e,t,n,a){if("number"==typeof e&&!isNaN(e))return Math.max(t,Math.min(n,e));if("string"==typeof e){const a=parseFloat(e);if(!isNaN(a))return Math.max(t,Math.min(n,a))}return a}function p(){const e=(new Date).toISOString();return{å…ƒæ•°æ®:{ç‰ˆæœ¬å·:3,å­˜æ¡£ID:`save_${Date.now()}`,å­˜æ¡£å:"è‡ªåŠ¨å­˜æ¡£",æ¸¸æˆç‰ˆæœ¬:"0.0.0",åˆ›å»ºæ—¶é—´:e,æ›´æ–°æ—¶é—´:e,æ¸¸æˆæ—¶é•¿ç§’:0,æ—¶é—´:{å¹´:1e3,æœˆ:1,æ—¥:1,å°æ—¶:8,åˆ†é’Ÿ:0}},è§’è‰²:{èº«ä»½:{åå­—:"æ— åä¿®å£«",æ€§åˆ«:"ç”·",å‡ºç”Ÿæ—¥æœŸ:{å¹´:982,æœˆ:1,æ—¥:1},ç§æ—:"äººæ—",ä¸–ç•Œ:"æœå¤©å¤§é™†",å¤©èµ„:"å‡¡äºº",å‡ºç”Ÿ:"æ•£ä¿®",çµæ ¹:"äº”è¡Œæ‚çµæ ¹",å¤©èµ‹:[],å…ˆå¤©å…­å¸:{æ ¹éª¨:5,çµæ€§:5,æ‚Ÿæ€§:5,æ°”è¿:5,é­…åŠ›:5,å¿ƒæ€§:5},åå¤©å…­å¸:{æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0}},å±æ€§:{å¢ƒç•Œ:{åç§°:"å‡¡äºº",é˜¶æ®µ:"",å½“å‰è¿›åº¦:0,ä¸‹ä¸€çº§æ‰€éœ€:100,çªç ´æè¿°:"å¼•æ°”å…¥ä½“ï¼Œæ„Ÿæ‚Ÿå¤©åœ°çµæ°”ï¼Œè¸ä¸Šä¿®ä»™ç¬¬ä¸€æ­¥"},å£°æœ›:0,æ°”è¡€:{å½“å‰:100,ä¸Šé™:100},çµæ°”:{å½“å‰:50,ä¸Šé™:50},ç¥è¯†:{å½“å‰:30,ä¸Šé™:30},å¯¿å‘½:{å½“å‰:18,ä¸Šé™:80}},ä½ç½®:{æè¿°:"æœå¤©å¤§é™†Â·æ— åä¹‹åœ°",x:5e3,y:5e3},æ•ˆæœ:[],èº«ä½“:{æ€»ä½“çŠ¶å†µ:"",éƒ¨ä½:{}},èƒŒåŒ…:{çµçŸ³:{ä¸‹å“:0,ä¸­å“:0,ä¸Šå“:0,æå“:0},ç‰©å“:{}},è£…å¤‡:{è£…å¤‡1:null,è£…å¤‡2:null,è£…å¤‡3:null,è£…å¤‡4:null,è£…å¤‡5:null,è£…å¤‡6:null},åŠŸæ³•:{å½“å‰åŠŸæ³•ID:null,åŠŸæ³•è¿›åº¦:{},åŠŸæ³•å¥—è£…:{ä¸»ä¿®:null,è¾…ä¿®:[]}},ä¿®ç‚¼:{ä¿®ç‚¼åŠŸæ³•:null,ä¿®ç‚¼çŠ¶æ€:{æ¨¡å¼:"æœªä¿®ç‚¼"}},å¤§é“:{å¤§é“åˆ—è¡¨:{}},æŠ€èƒ½:{æŒæ¡æŠ€èƒ½:[],è£…å¤‡æ :[],å†·å´:{}}},ç¤¾äº¤:{å…³ç³»:{},å®—é—¨:null,ä»»åŠ¡:{é…ç½®:{å¯ç”¨ç³»ç»Ÿä»»åŠ¡:!1,ç³»ç»Ÿä»»åŠ¡ç±»å‹:"ä¿®ä»™è¾…åŠ©ç³»ç»Ÿ",ç³»ç»Ÿä»»åŠ¡æç¤ºè¯:"",è‡ªåŠ¨åˆ·æ–°:!1,é»˜è®¤ä»»åŠ¡æ•°é‡:3},å½“å‰ä»»åŠ¡åˆ—è¡¨:[],ä»»åŠ¡ç»Ÿè®¡:{å®Œæˆæ€»æ•°:0,å„ç±»å‹å®Œæˆ:{}}},è®°å¿†:{çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]}},ä¸–ç•Œ:{ä¿¡æ¯:{ä¸–ç•Œåç§°:"æœå¤©å¤§é™†",å¤§é™†ä¿¡æ¯:[],åŠ¿åŠ›ä¿¡æ¯:[],åœ°ç‚¹ä¿¡æ¯:[],ç”Ÿæˆæ—¶é—´:e,ä¸–ç•ŒèƒŒæ™¯:"",ä¸–ç•Œçºªå…ƒ:"",ç‰¹æ®Šè®¾å®š:[],ç‰ˆæœ¬:"v1"},çŠ¶æ€:{ç¯å¢ƒ:{},äº‹ä»¶:[],å†å²:[],NPCçŠ¶æ€:{}}},ç³»ç»Ÿ:{é…ç½®:{},è®¾ç½®:{},ç¼“å­˜:{æŒæ¡æŠ€èƒ½:[],ä¸´æ—¶ç»Ÿè®¡:{}},è¡ŒåŠ¨é˜Ÿåˆ—:{actions:[]},å†å²:{å™äº‹:[]},æ‰©å±•:{},è”æœº:{æ¨¡å¼:"å•æœº",æˆ¿é—´ID:null,ç©å®¶ID:null,åªè¯»è·¯å¾„:["ä¸–ç•Œ"],ä¸–ç•Œæ›å…‰:!1,å†²çªç­–ç•¥:"æœåŠ¡å™¨"}}}}},6627:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'/* Theme overrides to improve light/dark readability (focused on dashboard sidebar) */\n\n/* Scrollbars follow theme */\n.right-sidebar .sidebar-content {\n  scrollbar-color: var(--scrollbar-thumb-color) transparent;\n}\n.right-sidebar .sidebar-content::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-thumb-color);\n}\n\n/* Containers use themed surfaces/borders */\n.right-sidebar .ai-chat-section,\n.right-sidebar .info-section,\n.right-sidebar .cultivation-section,\n.right-sidebar .vitals-section,\n.right-sidebar .attributes-section,\n.right-sidebar .location-section,\n.right-sidebar .wealth-section,\n.right-sidebar .collapsible-section {\n  background: var(--color-surface) !important;\n  border: 1px solid var(--color-border) !important;\n}\n\n/* Subtle hover */\n.right-sidebar .section-header:hover {\n  background: var(--color-surface-light) !important;\n}\n\n/* Text colors */\n.right-sidebar .sidebar-title,\n.right-sidebar .detail-value,\n.right-sidebar .vital-text,\n.right-sidebar .effect-name,\n.right-sidebar .realm-name {\n  color: var(--color-text) !important;\n}\n.right-sidebar .detail-label,\n.right-sidebar .state-label,\n.right-sidebar .state-text,\n.right-sidebar .progress-text,\n.right-sidebar .effect-time,\n.right-sidebar .empty-text,\n.right-sidebar .no-char-text,\n.right-sidebar .realm-level,\n.right-sidebar .vital-name {\n  color: var(--color-text-secondary) !important;\n}\n.right-sidebar .section-title { color: var(--color-text) !important; }\n.right-sidebar .section-icon { color: var(--color-primary) !important; }\n\n/* Collapsible toggle icon */\n.right-sidebar .collapse-toggle { color: var(--color-text-secondary) !important; }\n.right-sidebar .collapse-toggle:hover {\n  color: var(--color-text) !important;\n  background: var(--color-surface-light) !important;\n}\n\n/* Vital item cards */\n.right-sidebar .vital-item {\n  background: var(--color-surface) !important;\n  border: 1px solid var(--color-border) !important;\n}\n.right-sidebar .vital-item:hover {\n  background: var(--color-surface-light) !important;\n  border-color: var(--color-border) !important;\n}\n\n/* Progress bars */\n.right-sidebar .progress-bar { background: var(--color-surface-light) !important; }\n.right-sidebar .progress-fill.health { background: var(--vital-health) !important; }\n.right-sidebar .progress-fill.mana { background: var(--vital-lingqi) !important; }\n.right-sidebar .progress-fill.spirit { background: var(--vital-spirit) !important; }\n.right-sidebar .progress-fill.lifespan { background: var(--vital-lifespan) !important; }\n.right-sidebar .progress-fill.cultivation { background: var(--color-accent) !important; }\n\n/* Status effect cards: neutral base, colored left bar */\n.right-sidebar .status-effect-card {\n  background: var(--color-surface) !important;\n  border: 1px solid var(--color-border) !important;\n}\n.right-sidebar .status-effect-card::before { background: var(--color-border) !important; }\n.right-sidebar .status-effect-card.buff::before { background: linear-gradient(to bottom, var(--color-success), var(--color-success)) !important; }\n.right-sidebar .status-effect-card.debuff::before { background: linear-gradient(to bottom, var(--color-error), var(--color-error)) !important; }\n\n/* Talent card simplified */\n.right-sidebar .talent-card {\n  background: var(--color-surface) !important;\n  border: 1px solid var(--color-accent) !important;\n  border-left: 4px solid var(--color-accent) !important;\n}\n.right-sidebar .talent-name { color: var(--color-accent) !important; }\n.right-sidebar .talent-level {\n  color: var(--color-warning) !important;\n  background: var(--color-surface-light) !important;\n  border: 1px solid var(--color-warning) !important;\n}\n\n/* Icons by type */\n.right-sidebar .vital-icon.blood { color: var(--vital-health) !important; }\n.right-sidebar .vital-icon.mana { color: var(--vital-lingqi) !important; }\n.right-sidebar .vital-icon.spirit { color: var(--vital-spirit) !important; }\n.right-sidebar .vital-icon.lifespan { color: var(--vital-lifespan) !important; }\n\n/* Character summary sections keep a subtle primary/accents using existing rgb if available */\n.right-sidebar .character-info-section {\n  background: rgba(var(--color-primary-rgb), 0.06) !important;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.15) !important;\n}\n.right-sidebar .character-state-section {\n  background: var(--color-surface) !important;\n  border: 1px solid var(--color-border) !important;\n}\n\n/* Inventory item count badge: keep readable in both themes */\n.item-quantity-display { color: #f7f7f5 !important; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }\n\n/* ===== ä¿®å¤å³ä¾§é¢æ¿é¢œè‰²æ·¡åŒ–é—®é¢˜ ===== */\n\n/* ç§»é™¤å¯èƒ½å¯¼è‡´ç™½è‰²é®ç½©çš„æ•ˆæœ */\n.right-sidebar,\n.right-panel-area {\n  filter: none !important;\n  backdrop-filter: none !important;\n  -webkit-backdrop-filter: none !important;\n  mix-blend-mode: normal !important;\n  opacity: 1 !important;\n}\n\n/* ç¡®ä¿å³ä¾§é¢æ¿çš„èƒŒæ™¯å®Œå…¨ä¸é€æ˜ */\n.right-sidebar {\n  background: var(--color-surface) !important;\n}\n\n/* ç§»é™¤ä»»ä½•å¯èƒ½çš„ä¼ªå…ƒç´ é®ç½© */\n.right-sidebar::before,\n.right-sidebar::after,\n.right-panel-area::before,\n.right-panel-area::after {\n  display: none !important;\n}\n\n/* ===== æŒ‰é’®æ–‡å­—æº¢å‡ºå’Œå±…ä¸­ä¿®å¤ ===== */\n\n/* é€šç”¨æŒ‰é’®æœ€å°å®½åº¦å’Œå±…ä¸­æ ·å¼ */\nbutton {\n  min-width: fit-content;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* RetryConfirmDialog æŒ‰é’®ä¿®å¤ */\n.retry-dialog .btn-primary,\n.retry-dialog .btn-secondary {\n  min-width: 100px !important; /* ç¡®ä¿æœ€å°å®½åº¦ */\n  padding: 12px 24px !important; /* å¢åŠ å·¦å³å†…è¾¹è·é˜²æ­¢æ–‡å­—æº¢å‡º */\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* DataClearButtons æŒ‰é’®ä¿®å¤ */\n.clear-button {\n  min-width: 120px !important; /* é˜²æ­¢"æ¸…é™¤è‡ªå®šä¹‰æ•°æ®"ç­‰é•¿æ–‡å­—æº¢å‡º */\n  padding: 0.4rem 1rem !important; /* å¢åŠ å·¦å³å†…è¾¹è· */\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex !important;\n  align-items: center;\n  justify-content: center;\n  gap: 0.25rem;\n}\n\n.clear-button .clear-text {\n  flex: 1;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* SavePanel æ“ä½œæŒ‰é’®ä¿®å¤ */\n.operation-btn {\n  min-width: 140px !important; /* ä¸º"å¯¼å‡ºå­˜æ¡£"ã€"å¯¼å…¥å­˜æ¡£"ç­‰æŒ‰é’®è®¾ç½®æœ€å°å®½åº¦ */\n  padding: 1rem 1.2rem !important;\n  text-align: center;\n}\n\n.operation-btn .btn-content {\n  width: 100%;\n  text-align: center;\n}\n\n.operation-btn .btn-title {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* MainGamePanel ä¸­çš„å¿«æ·æ“ä½œæŒ‰é’®ä¿®å¤ */\n.quick-action-btn {\n  min-width: 80px !important; /* ç¡®ä¿æŒ‰é’®æœ€å°å®½åº¦ */\n  min-height: 70px;\n  padding: 12px 10px !important; /* å¢åŠ å·¦å³å†…è¾¹è· */\n  text-align: center;\n  display: flex !important;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n}\n\n.quick-action-btn .action-text {\n  width: 100%;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 0.8rem;\n  line-height: 1.2;\n}\n\n/* é…ç½®å¼¹çª—æŒ‰é’®ä¿®å¤ */\n.cancel-btn,\n.confirm-btn {\n  min-width: 80px !important; /* ç¡®ä¿"å–æ¶ˆ"ã€"ç¡®è®¤"æŒ‰é’®æœ€å°å®½åº¦ */\n  padding: 8px 24px !important; /* å¢åŠ å·¦å³å†…è¾¹è· */\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* LocalPromptModal æŒ‰é’®ä¿®å¤ */\n.cancel-button {\n  min-width: 80px !important;\n  padding: 8px 24px !important;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n/* é€šç”¨æŒ‰é’®æ–‡å­—å±…ä¸­ä¿®å¤ */\n.btn-text,\n.action-text,\n.btn-title {\n  text-align: center !important;\n  width: 100%;\n  display: block;\n}\n\n/* ä¿®å¤LeftSidebarä¸­çš„æŒ‰é’® */\n.left-sidebar .nav-btn {\n  min-width: 100%;\n  text-align: left; /* LeftSidebaræŒ‰é’®åº”è¯¥å·¦å¯¹é½ */\n}\n\n.left-sidebar .nav-btn .btn-text,\n.left-sidebar .nav-btn .btn-desc {\n  text-align: left;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* TopBarä¸­çš„å…¨å±æŒ‰é’® */\n.fullscreen-btn {\n  min-width: 32px !important;\n  min-height: 32px !important;\n  display: flex !important;\n  align-items: center;\n  justify-content: center;\n}\n\n/* å‘é€æŒ‰é’®ä¿®å¤ */\n.send-button {\n  min-width: 60px !important;\n  padding: 12px 24px !important;\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: flex !important;\n  align-items: center;\n  justify-content: center;\n}\n\n/* è¡ŒåŠ¨é€‰æ‹©å™¨æŒ‰é’®ä¿®å¤ */\n.action-selector-btn {\n  min-width: 44px !important;\n  min-height: 44px !important;\n  display: flex !important;\n  align-items: center;\n  justify-content: center;\n}\n\n/* å“åº”å¼è°ƒæ•´ */\n@media (max-width: 640px) {\n  .clear-button {\n    min-width: 100px !important;\n    padding: 0.3rem 0.8rem !important;\n  }\n  \n  .operation-btn {\n    min-width: 120px !important;\n    padding: 0.8rem 1rem !important;\n  }\n  \n  .quick-action-btn {\n    min-width: 70px !important;\n    min-height: 60px;\n    padding: 8px 6px !important;\n  }\n  \n  .cancel-btn,\n  .confirm-btn {\n    min-width: 70px !important;\n    padding: 6px 18px !important;\n  }\n  \n  .send-button {\n    min-width: 50px !important;\n    padding: 10px 20px !important;\n  }\n}\n\n@media (max-width: 480px) {\n  .clear-button {\n    min-width: 90px !important;\n    padding: 0.25rem 0.6rem !important;\n  }\n  \n  .operation-btn {\n    min-width: 100px !important;\n    padding: 0.6rem 0.8rem !important;\n  }\n  \n  .quick-action-btn {\n    min-width: 60px !important;\n    min-height: 50px;\n    padding: 6px 4px !important;\n  }\n  \n  .cancel-btn,\n  .confirm-btn {\n    min-width: 60px !important;\n    padding: 6px 15px !important;\n  }\n  \n  .send-button {\n    min-width: 45px !important;\n    padding: 8px 16px !important;\n  }\n}\n',""]);const s=i},6680:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6728:(e,t,n)=>{"use strict";n.d(t,{MH:()=>r});var a=n(7527);function r(e,t){const n=t.è§’è‰²?.èº«ä»½??null,r=n?.åå¤©å…­å¸||{æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0},o=function(e,t){const n={æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0};return console.log("[è£…å¤‡åŠ æˆè®¡ç®—] å¼€å§‹è®¡ç®—è£…å¤‡åŠ æˆ"),console.log("[è£…å¤‡åŠ æˆè®¡ç®—] è£…å¤‡æ æ•°æ®:",e),console.log("[è£…å¤‡åŠ æˆè®¡ç®—] èƒŒåŒ…ç‰©å“æ•°æ®:",t?.ç‰©å“),Object.entries(e).forEach(([e,a])=>{if(console.log(`[è£…å¤‡åŠ æˆè®¡ç®—] æ£€æŸ¥æ§½ä½ ${e}, itemId: ${a}`),a&&t.ç‰©å“&&t.ç‰©å“[a]){const e=t.ç‰©å“[a];if(console.log("[è£…å¤‡åŠ æˆè®¡ç®—] æ‰¾åˆ°ç‰©å“:",e),"è£…å¤‡"===e.ç±»å‹&&e.è£…å¤‡å¢å¹…?.åå¤©å…­å¸){console.log(`[è£…å¤‡åŠ æˆè®¡ç®—] ç‰©å“ ${e.åç§°} æœ‰è£…å¤‡å¢å¹…:`,e.è£…å¤‡å¢å¹…);const t=e.è£…å¤‡å¢å¹….åå¤©å…­å¸;Object.entries(t).forEach(([t,a])=>{if(t in n){const r=Number(a);isNaN(r)?console.warn(`[è£…å¤‡åŠ æˆè®¡ç®—] å±æ€§ ${t} çš„å€¼ "${a}" ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­—ï¼Œå·²å¿½ç•¥ã€‚ç‰©å“: ${e.åç§°}`):(console.log(`[è£…å¤‡åŠ æˆè®¡ç®—] æ·»åŠ å±æ€§åŠ æˆ: ${t} +${r} (åŸå§‹å€¼: ${a})`),n[t]+=r)}else console.warn(`[è£…å¤‡åŠ æˆè®¡ç®—] å‘ç°æœªçŸ¥çš„åå¤©å…­å¸å±æ€§ "${t}"ï¼Œå·²å¿½ç•¥ã€‚ç‰©å“: ${e.åç§°}`)})}else console.log(`[è£…å¤‡åŠ æˆè®¡ç®—] ç‰©å“ ${e.åç§°} æ²¡æœ‰è£…å¤‡å¢å¹…æˆ–åå¤©å…­å¸å±æ€§`)}else console.log(`[è£…å¤‡åŠ æˆè®¡ç®—] æ§½ä½ ${e} ä¸ºç©ºæˆ–ç‰©å“ä¸å­˜åœ¨`)}),console.log("[è£…å¤‡åŠ æˆè®¡ç®—] æœ€ç»ˆè£…å¤‡åŠ æˆ:",n),n}(t.è§’è‰²?.è£…å¤‡??null,t.è§’è‰²?.èƒŒåŒ…??null),i=function(e){const t={æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0},n=e.è§’è‰²?.èº«ä»½??null,r=n?.å¤©èµ‹||[];return r.map(e=>"string"==typeof e?e:e&&"object"==typeof e&&e.åç§°?e.åç§°:null).filter(Boolean),r.forEach(e=>{let n,r;if("string"==typeof e?(r=e,n=a.qS.find(e=>e.name===r)):e&&"object"==typeof e&&(r=e.åç§°||"",n=a.qS.find(e=>e.name===r),!n&&e.effects&&(n={id:0,name:r,description:e.æè¿°||"",talent_cost:0,rarity:1,effects:e.effects})),n&&n.effects){const e=function(e){const t={æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0};return e.forEach(e=>{e.effects&&Array.isArray(e.effects)&&e.effects.forEach(e=>{if("string"!=typeof e){if("åå¤©å…­å¸"===e.ç±»å‹){const n=e.ç›®æ ‡,a=Number(e.æ•°å€¼)||0;let r=n;"ç¥è¯†"===n&&(r="æ‚Ÿæ€§"),"æƒŸæ€§"===n&&(r="æ‚Ÿæ€§"),"ä½“è´¨"===n&&(r="æ ¹éª¨"),"æ•æ·"===n&&(r="çµæ€§"),r&&r in t&&(t[r]+=a)}if("type"in e&&"ATTRIBUTE_MODIFIER"===e.type){const n="target"in e?e.target:void 0,a="value"in e&&Number(e.value)||0;if(!n)return;const r={STR:"æ ¹éª¨",CON:"æ ¹éª¨",DEX:"çµæ€§",INT:"æ‚Ÿæ€§",SPI:"æ‚Ÿæ€§",LUK:"æ°”è¿"}[n];r&&r in t&&(t[r]+=a)}}})}),t}([n]);Object.keys(t).forEach(n=>{t[n]+=e[n]})}}),t}(t),s={æ ¹éª¨:r.æ ¹éª¨+o.æ ¹éª¨+i.æ ¹éª¨,çµæ€§:r.çµæ€§+o.çµæ€§+i.çµæ€§,æ‚Ÿæ€§:r.æ‚Ÿæ€§+o.æ‚Ÿæ€§+i.æ‚Ÿæ€§,æ°”è¿:r.æ°”è¿+o.æ°”è¿+i.æ°”è¿,é­…åŠ›:r.é­…åŠ›+o.é­…åŠ›+i.é­…åŠ›,å¿ƒæ€§:r.å¿ƒæ€§+o.å¿ƒæ€§+i.å¿ƒæ€§};return{å…ˆå¤©å…­å¸:e,åå¤©å…­å¸:s,æœ€ç»ˆå…­å¸:{æ ¹éª¨:e.æ ¹éª¨+s.æ ¹éª¨,çµæ€§:e.çµæ€§+s.çµæ€§,æ‚Ÿæ€§:e.æ‚Ÿæ€§+s.æ‚Ÿæ€§,æ°”è¿:e.æ°”è¿+s.æ°”è¿,é­…åŠ›:e.é­…åŠ›+s.é­…åŠ›,å¿ƒæ€§:e.å¿ƒæ€§+s.å¿ƒæ€§}}}},6743:(e,t,n)=>{"use strict";var a=n(9353);e.exports=Function.prototype.bind||a},6748:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},6840:e=>{"use strict";e.exports=Number.isNaN||function(e){return e!=e}},6896:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.variable-section[data-v-510a4b50] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n}\n.section-header[data-v-510a4b50] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n  flex-shrink: 0;\n}\n.section-title[data-v-510a4b50] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.add-btn[data-v-510a4b50] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.5rem 1rem;\n  background: var(--color-primary);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n}\n.add-btn[data-v-510a4b50]:hover {\n  background: var(--color-primary-hover);\n}\n.add-btn[data-v-510a4b50]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: var(--color-border);\n}\n.variable-content[data-v-510a4b50] {\n  flex: 1;\n  overflow: hidden;\n}\n.variable-list[data-v-510a4b50] {\n  height: 100%;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.variable-item[data-v-510a4b50] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 1rem;\n}\n.variable-header[data-v-510a4b50] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n  gap: 0.5rem;\n}\n.variable-key[data-v-510a4b50] {\n  font-weight: 600;\n  color: var(--color-primary);\n  flex: 1;\n  word-break: break-word;\n}\n.variable-type[data-v-510a4b50] {\n  font-size: 0.75rem;\n  padding: 0.125rem 0.5rem;\n  background: var(--color-accent-light);\n  color: var(--color-accent);\n  border-radius: 4px;\n  flex-shrink: 0;\n}\n.variable-actions[data-v-510a4b50] {\n  display: flex;\n  gap: 0.25rem;\n  flex-shrink: 0;\n}\n.action-btn[data-v-510a4b50] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 24px;\n  height: 24px;\n  padding: 0;\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s;\n  color: var(--color-text-secondary);\n  background: var(--color-surface);\n}\n.action-btn[data-v-510a4b50]:hover {\n  background: var(--color-hover);\n  color: var(--color-text);\n}\n.action-btn[data-v-510a4b50]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n  border-color: var(--color-border);\n}\n.action-btn.edit[data-v-510a4b50]:disabled:hover,\n.action-btn.copy[data-v-510a4b50]:disabled:hover,\n.action-btn.delete[data-v-510a4b50]:disabled:hover {\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n  border-color: var(--color-border);\n}\n.action-btn.edit[data-v-510a4b50]:hover {\n  background: var(--color-info);\n  color: white;\n  border-color: var(--color-info);\n}\n.action-btn.copy[data-v-510a4b50]:hover {\n  background: var(--color-success);\n  color: white;\n  border-color: var(--color-success);\n}\n.action-btn.delete[data-v-510a4b50]:hover {\n  background: var(--color-danger);\n  color: white;\n  border-color: var(--color-danger);\n}\n.variable-value[data-v-510a4b50] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  word-break: break-word;\n}\n.code-pre[data-v-510a4b50] {\n  margin: 0;\n  padding: 0.75rem;\n  background: var(--color-code-bg);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  max-height: 200px;\n  overflow: auto;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.empty-state[data-v-510a4b50] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem 1rem;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n.debug-info[data-v-510a4b50] {\n  margin-top: 1rem;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.debug-info summary[data-v-510a4b50] {\n  cursor: pointer;\n  color: var(--color-primary);\n}\n.debug-content[data-v-510a4b50] {\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: var(--color-surface);\n  border-radius: 4px;\n  text-align: left;\n}\n.debug-actions[data-v-510a4b50] {\n  margin-top: 0.5rem;\n}\n.debug-btn[data-v-510a4b50] {\n  padding: 0.25rem 0.5rem;\n  background: var(--color-primary);\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.75rem;\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 640px) {\n.variable-section[data-v-510a4b50] {\n    padding: 0.75rem;\n}\n.section-header[data-v-510a4b50] {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 0.5rem;\n    margin-bottom: 0.75rem;\n}\n.section-title[data-v-510a4b50] {\n    font-size: 1rem;\n    text-align: center;\n}\n.add-btn[data-v-510a4b50] {\n    align-self: center;\n    padding: 0.4rem 0.8rem;\n    font-size: 0.8rem;\n}\n.variable-item[data-v-510a4b50] {\n    padding: 0.75rem;\n}\n.variable-header[data-v-510a4b50] {\n    flex-direction: column;\n    align-items: stretch;\n    gap: 0.5rem;\n}\n.variable-key[data-v-510a4b50] {\n    font-size: 0.9rem;\n}\n.variable-actions[data-v-510a4b50] {\n    justify-content: center;\n    gap: 0.5rem;\n}\n.action-btn[data-v-510a4b50] {\n    width: 32px;\n    height: 32px;\n}\n.code-pre[data-v-510a4b50] {\n    font-size: 0.75rem;\n    padding: 0.5rem;\n}\n}\n@media (max-width: 480px) {\n.variable-section[data-v-510a4b50] {\n    padding: 0.5rem;\n}\n.section-title[data-v-510a4b50] {\n    font-size: 0.9rem;\n}\n.add-btn[data-v-510a4b50] {\n    padding: 0.35rem 0.7rem;\n    font-size: 0.75rem;\n}\n.variable-item[data-v-510a4b50] {\n    padding: 0.5rem;\n}\n.variable-key[data-v-510a4b50] {\n    font-size: 0.85rem;\n}\n.variable-type[data-v-510a4b50] {\n    font-size: 0.7rem;\n}\n.action-btn[data-v-510a4b50] {\n    width: 28px;\n    height: 28px;\n}\n.code-pre[data-v-510a4b50] {\n    font-size: 0.7rem;\n    padding: 0.4rem;\n}\n.empty-state[data-v-510a4b50] {\n    padding: 2rem 0.5rem;\n}\n}\n",""]);const s=i},6939:(e,t,n)=>{"use strict";function a(e,t){let n=t.å¹´-e.å¹´;return(t.æœˆ<e.æœˆ||t.æœˆ===e.æœˆ&&t.æ—¥<e.æ—¥)&&n--,Math.max(0,n)}function r(e,t){return{å¹´:t.å¹´-e,æœˆ:t.æœˆ,æ—¥:t.æ—¥,å°æ—¶:0,åˆ†é’Ÿ:0}}function o(e){const t=e?.å…ƒæ•°æ®?.æ—¶é—´??{å¹´:1,æœˆ:1,æ—¥:1,å°æ—¶:8,åˆ†é’Ÿ:0},n=e?.è§’è‰²?.èº«ä»½??null;if(!n||"object"!=typeof n)return 0;if(!n.å‡ºç”Ÿæ—¥æœŸ){const e=18;return n.å‡ºç”Ÿæ—¥æœŸ=r(e,t),e}return a(n.å‡ºç”Ÿæ—¥æœŸ,t)}function i(e,t){const n=t||{å¹´:1,æœˆ:1,æ—¥:1,å°æ—¶:8,åˆ†é’Ÿ:0},o=e;if(!o.å‡ºç”Ÿæ—¥æœŸ){const e=o.å¹´é¾„||18,t=r(e,n);return o.å‡ºç”Ÿæ—¥æœŸ=t,e}const i=a(o.å‡ºç”Ÿæ—¥æœŸ,n);return void 0!==o.å¹´é¾„&&(o.å¹´é¾„=i),i}n.d(t,{DT:()=>o,R5:()=>a,UY:()=>i})},6988:(e,t,n)=>{"use strict";n.d(t,{$:()=>s});const a=e=>!!e&&"object"==typeof e&&!Array.isArray(e),r=e=>"number"==typeof e&&Number.isFinite(e),o=e=>{const t=[];if(!a(e))return["å…ƒæ•°æ®.æ—¶é—´ å¿…é¡»æ˜¯å¯¹è±¡"];const n=[["å¹´",0,999999],["æœˆ",1,12],["æ—¥",1,31],["å°æ—¶",0,23],["åˆ†é’Ÿ",0,59]];for(const[a,o,i]of n){const n=e[a];r(n)?(n<o||n>i)&&t.push(`å…ƒæ•°æ®.æ—¶é—´.${String(a)} è¶…å‡ºèŒƒå›´ï¼ˆ${o}-${i}ï¼‰`):t.push(`å…ƒæ•°æ®.æ—¶é—´.${String(a)} å¿…é¡»æ˜¯æ•°å­—`)}return t},i=e=>{if(!e||"object"!=typeof e)return!1;const t=e;return a(t.å…ƒæ•°æ®)&&a(t.è§’è‰²)&&a(t.ç¤¾äº¤)&&a(t.ä¸–ç•Œ)&&a(t.ç³»ç»Ÿ)};function s(e){const t=[],n=[];if(!i(e))return{isValid:!1,errors:["ä¸æ˜¯ V3 å­˜æ¡£ç»“æ„ï¼ˆç¼ºå°‘ å…ƒæ•°æ®/è§’è‰²/ç¤¾äº¤/ä¸–ç•Œ/ç³»ç»Ÿï¼‰"],warnings:[]};const s=e,l=s.å…ƒæ•°æ®?.ç‰ˆæœ¬å·;3!==l&&t.push("å…ƒæ•°æ®.ç‰ˆæœ¬å· å¿…é¡»ä¸º 3"),"string"==typeof s.å…ƒæ•°æ®?.å­˜æ¡£ID&&s.å…ƒæ•°æ®.å­˜æ¡£ID.trim()||t.push("å…ƒæ•°æ®.å­˜æ¡£ID å¿…å¡«"),"string"==typeof s.å…ƒæ•°æ®?.å­˜æ¡£å&&s.å…ƒæ•°æ®.å­˜æ¡£å.trim()||t.push("å…ƒæ•°æ®.å­˜æ¡£å å¿…å¡«"),"string"!=typeof s.å…ƒæ•°æ®?.åˆ›å»ºæ—¶é—´&&t.push("å…ƒæ•°æ®.åˆ›å»ºæ—¶é—´ å¿…é¡»æ˜¯å­—ç¬¦ä¸²(ISO8601)"),"string"!=typeof s.å…ƒæ•°æ®?.æ›´æ–°æ—¶é—´&&t.push("å…ƒæ•°æ®.æ›´æ–°æ—¶é—´ å¿…é¡»æ˜¯å­—ç¬¦ä¸²(ISO8601)"),r(s.å…ƒæ•°æ®?.æ¸¸æˆæ—¶é•¿ç§’)||t.push("å…ƒæ•°æ®.æ¸¸æˆæ—¶é•¿ç§’ å¿…é¡»æ˜¯æ•°å­—"),t.push(...o(s.å…ƒæ•°æ®?.æ—¶é—´)),a(s.è§’è‰²?.èº«ä»½)||t.push("è§’è‰².èº«ä»½ å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),a(s.è§’è‰²?.å±æ€§)||t.push("è§’è‰².å±æ€§ å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),a(s.è§’è‰²?.ä½ç½®)||t.push("è§’è‰².ä½ç½® å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),Array.isArray(s.è§’è‰²?.æ•ˆæœ)||t.push("è§’è‰².æ•ˆæœ å¿…å¡«ä¸”å¿…é¡»æ˜¯æ•°ç»„"),a(s.è§’è‰²?.èƒŒåŒ…)||t.push("è§’è‰².èƒŒåŒ… å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),a(s.è§’è‰²?.è£…å¤‡)||t.push("è§’è‰².è£…å¤‡ å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡");const c=s.è§’è‰²?.èƒŒåŒ…?.ç‰©å“;a(c)||t.push("è§’è‰².èƒŒåŒ….ç‰©å“ å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡");const d=s.è§’è‰²?.è£…å¤‡;if(a(d)&&a(c))for(let e=1;e<=6;e++){const a=`è£…å¤‡${e}`,r=d[a];null!=r&&("string"==typeof r?r in c||n.push(`è§’è‰².è£…å¤‡.${a} å¼•ç”¨äº†ä¸å­˜åœ¨çš„ç‰©å“IDï¼š${r}`):t.push(`è§’è‰².è£…å¤‡.${a} å¿…é¡»æ˜¯ string|null`))}a(s.ç¤¾äº¤?.å…³ç³»)||t.push("ç¤¾äº¤.å…³ç³» å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),a(s.ç¤¾äº¤?.ä»»åŠ¡)||t.push("ç¤¾äº¤.ä»»åŠ¡ å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),a(s.ç¤¾äº¤?.è®°å¿†)||t.push("ç¤¾äº¤.è®°å¿† å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),a(s.ä¸–ç•Œ?.ä¿¡æ¯)||t.push("ä¸–ç•Œ.ä¿¡æ¯ å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡"),a(s.ç³»ç»Ÿ?.è”æœº)||t.push("ç³»ç»Ÿ.è”æœº å¿…å¡«ä¸”å¿…é¡»æ˜¯å¯¹è±¡");const u=s.ç³»ç»Ÿ?.è”æœº?.åªè¯»è·¯å¾„;return Array.isArray(u)||t.push("ç³»ç»Ÿ.è”æœº.åªè¯»è·¯å¾„ å¿…å¡«ä¸”å¿…é¡»æ˜¯æ•°ç»„"),{isValid:0===t.length,errors:t,warnings:n}}},7044:e=>{"use strict";e.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%2716%27 height=%2716%27 viewBox=%270 0 24 24%27 fill=%27none%27 stroke=%27%236b7280%27 stroke-width=%272%27%3E%3Cpath d=%27m6 9 6 6 6-6%27/%3E%3C/svg%3E"},7094:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.video-background-container[data-v-39a20c5f] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  z-index: -10;\n  pointer-events: none;\n  background-color: #1a1b26; /* ç®€å•çš„æš—è‰²èƒŒæ™¯ä½œä¸ºå¤‡ç”¨ */\n}\n.video-background[data-v-39a20c5f] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  transform: translate(-50%, -50%);\n  z-index: -2;\n}\n.video-overlay[data-v-39a20c5f] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(10, 15, 24, 0);\n  z-index: -1;\n}\n",""]);const s=i},7119:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},7136:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.quantity-modal-overlay[data-v-76ad986e] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2000; /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */\n  backdrop-filter: blur(4px);\n}\n.quantity-modal[data-v-76ad986e] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-primary-border);\n  border-radius: 16px;\n  width: 100%;\n  max-width: 400px;\n  color: var(--color-text);\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  animation: modal-appear-76ad986e 0.3s ease-out;\n  overflow: hidden;\n}\n@keyframes modal-appear-76ad986e {\nfrom {\n    opacity: 0;\n    transform: scale(0.9) translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n}\n}\n.modal-header[data-v-76ad986e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px 24px 16px 24px;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-primary-light);\n}\n.modal-header h3[data-v-76ad986e] {\n  margin: 0;\n  color: var(--color-text);\n  font-size: 1.25rem;\n  font-weight: 600;\n}\n.close-btn[data-v-76ad986e] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.close-btn[data-v-76ad986e]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n  border-color: var(--color-primary);\n}\n.modal-body[data-v-76ad986e] {\n  padding: 24px;\n}\n.item-info[data-v-76ad986e] {\n  display: flex;\n  align-items: center;\n  gap: 16px;\n  margin-bottom: 24px;\n  padding: 16px;\n  background: var(--color-surface-light);\n  border-radius: 8px;\n}\n.item-icon[data-v-76ad986e] {\n  font-size: 32px;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: var(--color-background);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n}\n.item-details[data-v-76ad986e] {\n  flex: 1;\n}\n.item-name[data-v-76ad986e] {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin-bottom: 4px;\n}\n.item-type[data-v-76ad986e] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  margin-bottom: 4px;\n}\n.available-quantity[data-v-76ad986e] {\n  font-size: 0.85rem;\n  color: var(--color-primary);\n  font-weight: 500;\n}\n.quantity-selector[data-v-76ad986e] {\n  margin-bottom: 20px;\n}\n.quantity-selector label[data-v-76ad986e] {\n  display: block;\n  margin-bottom: 12px;\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n}\n.quantity-controls[data-v-76ad986e] {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n.quantity-btn[data-v-76ad986e] {\n  background: var(--color-surface-hover);\n  border: 1px solid var(--color-border);\n  color: var(--color-text);\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n.quantity-btn[data-v-76ad986e]:hover:not(:disabled) {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.quantity-btn[data-v-76ad986e]:disabled {\n  background: var(--color-surface-light);\n  color: var(--color-text-muted);\n  cursor: not-allowed;\n}\n.quantity-input[data-v-76ad986e] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  color: var(--color-text);\n  padding: 8px 12px;\n  border-radius: 8px;\n  width: 100px;\n  text-align: center;\n  font-size: 1rem;\n  font-weight: 600;\n  transition: all 0.2s ease;\n}\n.quantity-input[data-v-76ad986e]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);\n}\n.quantity-shortcuts[data-v-76ad986e] {\n  display: flex;\n  gap: 8px;\n  flex-wrap: wrap;\n  margin-top: 16px;\n}\n.preset-btn[data-v-76ad986e] {\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  color: var(--color-text-secondary);\n  padding: 6px 12px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  transition: all 0.2s ease;\n}\n.preset-btn[data-v-76ad986e]:hover:not(:disabled) {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n  border-color: var(--color-border-hover);\n}\n.preset-btn[data-v-76ad986e]:disabled {\n  background: var(--color-surface);\n  color: var(--color-text-muted);\n  cursor: not-allowed;\n}\n.modal-footer[data-v-76ad986e] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 12px;\n  padding: 16px 24px 24px 24px;\n  border-top: 1px solid var(--color-border);\n}\n.cancel-btn[data-v-76ad986e], .confirm-btn[data-v-76ad986e] {\n  padding: 10px 20px;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  min-width: 80px;\n}\n.cancel-btn[data-v-76ad986e] {\n  background: var(--color-surface-hover);\n  color: var(--color-text-secondary);\n}\n.cancel-btn[data-v-76ad986e]:hover {\n  background: var(--color-surface-light);\n  color: var(--color-text);\n}\n.confirm-btn[data-v-76ad986e] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.confirm-btn[data-v-76ad986e]:hover:not(:disabled) {\n  background: var(--color-primary-hover);\n}\n.confirm-btn[data-v-76ad986e]:disabled {\n  background: var(--color-surface-light);\n  border-color: var(--color-border);\n  color: var(--color-text-muted);\n  cursor: not-allowed;\n}\n.discard-confirm[data-v-76ad986e] {\n  background: var(--color-danger) !important;\n  border-color: var(--color-danger) !important;\n}\n.discard-confirm[data-v-76ad986e]:hover:not(:disabled) {\n  background: var(--color-danger-hover) !important;\n}\n.item-description[data-v-76ad986e] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin-top: 4px;\n  font-style: italic;\n}\n",""]);const s=i},7176:(e,t,n)=>{"use strict";var a,r=n(3126),o=n(5795);try{a=[].__proto__===Array.prototype}catch(e){if(!e||"object"!=typeof e||!("code"in e)||"ERR_PROTO_ACCESS"!==e.code)throw e}var i=!!a&&o&&o(Object.prototype,"__proto__"),s=Object,l=s.getPrototypeOf;e.exports=i&&"function"==typeof i.get?r([i.get]):"function"==typeof l&&function(e){return l(null==e?e:s(e))}},7457:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-3e075713] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n}\n.modal-container[data-v-3e075713] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  width: 90%;\n  max-width: 600px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  animation: slideUp-3e075713 0.3s ease-out;\n}\n@keyframes slideUp-3e075713 {\nfrom {\n    opacity: 0;\n    transform: translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.modal-header[data-v-3e075713] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-title[data-v-3e075713] {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: var(--color-text);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.modal-close[data-v-3e075713] {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n.modal-close[data-v-3e075713]:hover {\n  background: rgba(var(--color-primary-rgb), 0.1);\n  color: var(--color-text);\n}\n.modal-content[data-v-3e075713] {\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n  min-height: 200px;\n}\n\n/* Loading State */\n.loading-state[data-v-3e075713] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  gap: 1rem;\n}\n.spinner[data-v-3e075713] {\n  width: 40px;\n  height: 40px;\n  border: 3px solid rgba(var(--color-primary-rgb), 0.2);\n  border-top-color: var(--color-primary);\n  border-radius: 50%;\n  animation: spin-3e075713 1s linear infinite;\n}\n@keyframes spin-3e075713 {\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* Empty State */\n.empty-state[data-v-3e075713] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem 2rem;\n  text-align: center;\n}\n.empty-icon[data-v-3e075713] {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  opacity: 0.5;\n}\n.empty-state p[data-v-3e075713] {\n  margin: 0.5rem 0;\n  color: var(--color-text-secondary);\n}\n.empty-hint[data-v-3e075713] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  opacity: 0.7;\n  max-width: 300px;\n}\n\n/* Export Options */\n.export-options[data-v-3e075713] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n}\n.option-label[data-v-3e075713] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 1rem;\n  border: 2px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.option-label[data-v-3e075713]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface-lighter);\n}\n.radio-input[data-v-3e075713] {\n  margin-top: 0.2rem;\n  cursor: pointer;\n}\n.option-text[data-v-3e075713] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  flex: 1;\n}\n.option-title[data-v-3e075713] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.option-desc[data-v-3e075713] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n\n/* Presets List */\n.presets-list[data-v-3e075713] {\n  margin-bottom: 1.5rem;\n}\n.list-header[data-v-3e075713] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem;\n  background: var(--color-surface-light);\n  border-radius: 6px;\n  margin-bottom: 1rem;\n}\n.checkbox-label[data-v-3e075713] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  font-size: 0.9rem;\n  color: var(--color-text);\n}\n.checkbox-input[data-v-3e075713] {\n  cursor: pointer;\n}\n.selected-count[data-v-3e075713] {\n  font-size: 0.85rem;\n  color: var(--color-primary);\n  font-weight: 500;\n}\n.preset-items[data-v-3e075713] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  max-height: 300px;\n  overflow-y: auto;\n  padding: 0.25rem;\n}\n.preset-item[data-v-3e075713] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  border: 2px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.preset-item[data-v-3e075713]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface-lighter);\n}\n.preset-item.selected[data-v-3e075713] {\n  border-color: var(--color-primary);\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.1));\n}\n.preset-info[data-v-3e075713] {\n  flex: 1;\n}\n.preset-header[data-v-3e075713] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.25rem;\n}\n.preset-name[data-v-3e075713] {\n  margin: 0;\n  font-size: 0.95rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.preset-date[data-v-3e075713] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.preset-description[data-v-3e075713] {\n  margin: 0.25rem 0;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  line-height: 1.3;\n}\n.preset-tags[data-v-3e075713] {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.5rem;\n  flex-wrap: wrap;\n}\n.info-tag[data-v-3e075713] {\n  padding: 0.2rem 0.6rem;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n  border-radius: 10px;\n  font-size: 0.7rem;\n  color: var(--color-primary);\n}\n.info-tag.name-tag[data-v-3e075713] {\n  background: linear-gradient(135deg, rgba(var(--color-accent-rgb), 0.15), rgba(var(--color-primary-rgb), 0.15));\n  border-color: var(--color-accent);\n  color: var(--color-accent);\n  font-weight: 600;\n}\n.info-tag.age-tag[data-v-3e075713] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  border-color: rgba(var(--color-success-rgb), 0.3);\n  color: var(--color-success);\n}\n\n/* Export Info */\n.export-info[data-v-3e075713] {\n  padding: 1rem;\n  background: rgba(var(--color-primary-rgb), 0.05);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.1);\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.info-item[data-v-3e075713] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.85rem;\n}\n.info-label[data-v-3e075713] {\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.info-value[data-v-3e075713] {\n  color: var(--color-text);\n  font-family: 'Monaco', 'Courier New', monospace;\n}\n.modal-footer[data-v-3e075713] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n}\n.btn[data-v-3e075713] {\n  padding: 0.7rem 1.5rem;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n.btn-cancel[data-v-3e075713] {\n  background: var(--color-surface-lighter);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n.btn-cancel[data-v-3e075713]:hover:not(:disabled) {\n  background: rgba(var(--color-text-rgb), 0.05);\n  border-color: var(--color-text-secondary);\n}\n.btn-confirm[data-v-3e075713] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: #fff;\n  border: none;\n  min-width: 120px;\n}\n.btn-confirm[data-v-3e075713]:hover:not(:disabled) {\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);\n  transform: translateY(-2px);\n}\n.btn-confirm[data-v-3e075713]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n.modal-container[data-v-3e075713] {\n    width: 95%;\n    max-width: 100%;\n    border-radius: 8px;\n}\n.modal-header[data-v-3e075713] {\n    padding: 1rem;\n}\n.modal-title[data-v-3e075713] {\n    font-size: 1.1rem;\n}\n.modal-content[data-v-3e075713] {\n    padding: 1rem;\n}\n.modal-footer[data-v-3e075713] {\n    padding: 1rem;\n    flex-direction: column-reverse;\n    gap: 0.75rem;\n}\n.btn[data-v-3e075713] {\n    width: 100%;\n    padding: 0.8rem 1rem;\n}\n}\n",""]);const s=i},7470:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n/* Unified style tokens for Character Management */\n.character-management-panel[data-v-2e4cdf3e] {\n  --cm-radius-sm: 6px;\n  --cm-radius-md: 8px;\n  --cm-radius-lg: 12px;\n  --cm-gap-xs: 0.25rem;\n  --cm-gap-sm: 0.5rem;\n  --cm-gap-md: 0.8rem;\n  --cm-gap-lg: 1rem;\n  --cm-border-width: 1px;\n  --cm-border-strong: 2px;\n  --cm-divider-width: 2px;\n  /* Card sizing tokens */\n  --cm-card-min-h: 92px;\n  --cm-card-padding: 0.9rem;\n  --cm-avatar-size: 36px;\n  --cm-header-gap: 0.75rem;\n  --cm-name-font: 1rem;\n  --cm-meta-font: 0.8rem;\n  --cm-save-count-minw: 36px;\n  --cm-save-count-count-font: 1.05rem;\n  --cm-save-count-label-font: 0.7rem;\n}\n/* åŸºç¡€æ ·å¼é‡ç½® */\n[data-v-2e4cdf3e] {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n/* è‡ªå®šä¹‰å¯¹è¯æ¡†æ ·å¼ */\n.dialog-overlay[data-v-2e4cdf3e] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(10, 20, 30, 0.6);\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  transition: opacity 0.3s ease;\n}\n.dialog-box[data-v-2e4cdf3e] {\n  background: var(--color-surface-transparent);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  padding: 2rem;\n  width: 90%;\n  max-width: 450px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n  color: var(--color-text);\n  transform: scale(0.95);\n  opacity: 0;\n  animation: dialog-fade-in-2e4cdf3e 0.3s forwards;\n}\n@keyframes dialog-fade-in-2e4cdf3e {\nto {\n    transform: scale(1);\n    opacity: 1;\n}\n}\n.dialog-title[data-v-2e4cdf3e] {\n  font-size: 1.5rem;\n  color: var(--color-accent);\n  margin: 0 0 1rem 0;\n  font-weight: 600;\n}\n.dialog-message[data-v-2e4cdf3e] {\n  font-size: 1rem;\n  color: var(--color-text-secondary);\n  margin: 0 0 1.5rem 0;\n  line-height: 1.6;\n}\n.dialog-input[data-v-2e4cdf3e] {\n  width: 100%;\n  padding: 0.8rem 1rem;\n  background: var(--color-background-transparent);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  color: var(--color-text);\n  font-size: 1rem;\n  margin-bottom: 1.5rem;\n  transition:\n    border-color 0.3s,\n    box-shadow 0.3s;\n}\n.dialog-input[data-v-2e4cdf3e]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.2);\n}\n.dialog-actions[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n}\n.btn-dialog-confirm[data-v-2e4cdf3e],\n.btn-dialog-cancel[data-v-2e4cdf3e] {\n  padding: 0.6rem 1.5rem;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  cursor: pointer;\n  font-weight: 600;\n  transition: all 0.3s;\n}\n.btn-dialog-confirm[data-v-2e4cdf3e] {\n  background: var(--color-primary);\n  color: white;\n  border-color: var(--color-primary);\n}\n.btn-dialog-confirm[data-v-2e4cdf3e]:hover {\n  background: var(--color-primary-dark);\n  transform: translateY(-2px);\n}\n.btn-dialog-cancel[data-v-2e4cdf3e] {\n  background: var(--color-surface);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n.btn-dialog-cancel[data-v-2e4cdf3e]:hover {\n  background: var(--color-background);\n}\n\n/* ä¸»å®¹å™¨æ ·å¼ */\n.character-management-panel[data-v-2e4cdf3e] {\n  width: 100%;\n  height: 100%;\n  background: var(--color-background);\n  color: var(--color-text);\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  position: relative;\n}\n.character-management-panel.fullscreen[data-v-2e4cdf3e] {\n  background: var(--color-background);\n}\n\n/* å…¨å±æ¨¡å¼å¤´éƒ¨ */\n.fullscreen-header[data-v-2e4cdf3e] {\n  position: relative;\n  z-index: 10;\n  padding: 2rem;\n  background: var(--color-surface-transparent);\n  backdrop-filter: blur(12px);\n  border-bottom: 1px solid var(--color-border);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.fullscreen-back-btn[data-v-2e4cdf3e] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background: transparent;\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s ease;\n  font-size: 0.9rem;\n}\n.fullscreen-back-btn[data-v-2e4cdf3e]:hover {\n  background: var(--color-surface-hover);\n  color: var(--color-text);\n  border-color: var(--color-primary);\n}\n.fullscreen-title[data-v-2e4cdf3e] {\n  position: absolute;\n  left: 50%;\n  transform: translateX(-50%);\n  text-align: center;\n}\n.fullscreen-title h1[data-v-2e4cdf3e] {\n  font-family: var(--font-family-serif);\n  font-size: 2.5rem;\n  font-weight: 500;\n  letter-spacing: 0.3em;\n  color: var(--color-text);\n  text-shadow: 0 0 20px rgba(var(--color-primary-rgb), 0.4);\n  margin: 0 0 0.5rem 0;\n  padding-left: 0.3em;\n}\n.fullscreen-title p[data-v-2e4cdf3e] {\n  font-size: 1rem;\n  color: var(--color-text-secondary);\n  letter-spacing: 0.1em;\n  opacity: 0.8;\n  margin: 0;\n}\n\n/* ä¸»ä½“å†…å®¹ */\n.main-content[data-v-2e4cdf3e] {\n  flex: 1;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.main-content.fullscreen-content[data-v-2e4cdf3e] {\n  position: relative;\n  flex: 1;\n  overflow: hidden;\n}\n\n/* ç§»åŠ¨ç«¯å¤´éƒ¨å¯¼èˆª */\n.mobile-header[data-v-2e4cdf3e] {\n  display: none;\n  background: var(--color-surface-transparent);\n  backdrop-filter: blur(12px);\n  border-bottom: 1px solid var(--color-border);\n  padding: 1rem;\n  align-items: center;\n  gap: 1rem;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n.mobile-menu-btn[data-v-2e4cdf3e] {\n  display: flex;\n  align-items: center;\n  gap: 0.6rem;\n  padding: 0.8rem 1rem;\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-surface-rgb), 0.8),\n    rgba(var(--color-background-rgb), 0.6)\n  );\n  backdrop-filter: blur(10px);\n  border: 2px solid rgba(var(--color-border-rgb), 0.3);\n  border-radius: 12px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n  font-weight: 600;\n  position: relative;\n  overflow: hidden;\n}\n.mobile-menu-btn[data-v-2e4cdf3e]:hover {\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-surface-rgb), 0.9),\n    rgba(var(--color-background-rgb), 0.7)\n  );\n  color: var(--color-primary);\n  border-color: var(--color-primary);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.2);\n}\n.mobile-menu-btn.active[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: white;\n  border-color: var(--color-primary);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);\n}\n.hamburger[data-v-2e4cdf3e] {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  width: 16px;\n  height: 12px;\n}\n.hamburger span[data-v-2e4cdf3e] {\n  display: block;\n  height: 2px;\n  width: 100%;\n  background: currentColor;\n  border-radius: 1px;\n  transition: transform 0.2s ease;\n}\n.mobile-menu-btn.active .hamburger span[data-v-2e4cdf3e]:nth-child(1) {\n  transform: rotate(45deg) translate(3px, 3px);\n}\n.mobile-menu-btn.active .hamburger span[data-v-2e4cdf3e]:nth-child(2) {\n  opacity: 0;\n}\n.mobile-menu-btn.active .hamburger span[data-v-2e4cdf3e]:nth-child(3) {\n  transform: rotate(-45deg) translate(3px, -3px);\n}\n.mobile-title[data-v-2e4cdf3e] {\n  flex: 1;\n  min-width: 0; /* Allow shrinking and text-overflow to work */\n}\n.mobile-title h2[data-v-2e4cdf3e] {\n  margin: 0;\n  font-size: 1.2rem;\n  color: var(--color-text);\n  font-weight: 600;\n}\n.mobile-title .selected-info[data-v-2e4cdf3e] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin-top: 0.2rem;\n  /* Fix for vertical text issue on small screens */\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.panel-overlay[data-v-2e4cdf3e] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  z-index: 1100;\n}\n\n/* ç©ºçŠ¶æ€ */\n.empty-state[data-v-2e4cdf3e] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 2rem;\n}\n.empty-icon[data-v-2e4cdf3e] {\n  font-size: 4rem;\n  margin-bottom: 1rem;\n}\n.empty-state h2[data-v-2e4cdf3e] {\n  color: var(--color-accent);\n  margin-bottom: 0.5rem;\n}\n.empty-actions[data-v-2e4cdf3e] {\n  display: flex;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n.btn-create[data-v-2e4cdf3e],\n.btn-import[data-v-2e4cdf3e] {\n  padding: 1rem 2rem;\n  color: white;\n  border-radius: 12px;\n  font-size: 1.1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s;\n}\n.btn-create[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, var(--color-success), var(--color-info));\n  border: 1px solid var(--color-success);\n}\n.btn-create[data-v-2e4cdf3e]:hover {\n  transform: scale(1.05);\n}\n.btn-import[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  border: 1px solid var(--color-primary);\n}\n.btn-import[data-v-2e4cdf3e]:hover {\n  transform: scale(1.05);\n}\n\n/* ç®¡ç†å¸ƒå±€ - 3è¡Œ2åˆ—ç½‘æ ¼ */\n.management-layout[data-v-2e4cdf3e] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  height: 100%;\n}\n\n/* 3è¡Œ2åˆ—ç½‘æ ¼å¸ƒå±€ - ç®€æ´ç‰ˆæœ¬ */\n.grid-container[data-v-2e4cdf3e] {\n  display: grid;\n  grid-template-columns: 320px 1fr;\n  grid-template-rows: auto 1fr auto;\n  grid-template-areas:\n    'header-left header-right'\n    'content-left content-right'\n    'footer-left footer-right';\n  height: 100%;\n  overflow: hidden;\n  /* ä½¿ç”¨å•ä¸€å‚ç›´åˆ†å‰²çº¿ */\n  position: relative;\n}\n\n/* ç»Ÿä¸€çš„å‚ç›´åˆ†å‰²çº¿ */\n.grid-container[data-v-2e4cdf3e]::before {\n  content: '';\n  position: absolute;\n  left: 320px;\n  top: 0;\n  bottom: 0;\n  width: 2px;\n  background: var(--color-primary);\n  z-index: 10;\n}\n\n/* æ ‡é¢˜æ  - ç®€åŒ–æ ·å¼ */\n.grid-header-left[data-v-2e4cdf3e],\n.grid-header-right[data-v-2e4cdf3e] {\n  padding: 0.8rem 1rem;\n  background: var(--color-surface);\n  border-bottom: 1px solid var(--color-border);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 1rem;\n}\n.grid-header-left h2[data-v-2e4cdf3e],\n.grid-header-right h2[data-v-2e4cdf3e] {\n  margin: 0;\n  font-size: 1rem;\n  color: var(--color-text);\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.header-title-group[data-v-2e4cdf3e] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex: 1;\n  min-width: 0;\n}\n.btn-header-action[data-v-2e4cdf3e] {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  padding: 0.4rem 0.8rem;\n  border: 1px solid;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  font-weight: 600;\n  transition: all 0.2s ease;\n  background: var(--color-surface);\n  flex-shrink: 0;\n}\n.btn-header-action.import[data-v-2e4cdf3e] {\n  color: var(--color-info);\n  border-color: rgba(var(--color-info-rgb), 0.4);\n}\n.btn-header-action.import[data-v-2e4cdf3e]:hover {\n  background: rgba(var(--color-info-rgb), 0.1);\n  border-color: var(--color-info);\n}\n.character-count[data-v-2e4cdf3e] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  background: var(--color-background);\n  padding: 0.2rem 0.4rem;\n  border-radius: 4px;\n  border: 1px solid var(--color-border);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n}\n\n/* å³ä¾§æ ‡é¢˜æ å¸ƒå±€ */\n.header-left-content[data-v-2e4cdf3e] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.4rem;\n  flex: 1;\n  min-width: 0;\n}\n.selected-char-info[data-v-2e4cdf3e] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-primary-rgb), 0.1),\n    rgba(var(--color-accent-rgb), 0.05)\n  );\n  padding: 0.3rem 0.6rem;\n  border-radius: 6px;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.3);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: fit-content;\n}\n\n/* å­˜æ¡£æ“ä½œæŒ‰é’®ç»„ */\n.save-actions-buttons[data-v-2e4cdf3e] {\n  display: flex;\n  gap: 0.6rem;\n  flex-shrink: 0;\n}\n.btn-save-action[data-v-2e4cdf3e] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.6rem 1rem;\n  border: 2px solid;\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.85rem;\n  font-weight: 600;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-surface-rgb), 0.8),\n    rgba(var(--color-background-rgb), 0.6)\n  );\n  backdrop-filter: blur(10px);\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n}\n.btn-save-action.export[data-v-2e4cdf3e] {\n  color: var(--color-success);\n  border-color: rgba(var(--color-success-rgb), 0.4);\n}\n.btn-save-action.export[data-v-2e4cdf3e]:hover:not(:disabled) {\n  background: linear-gradient(135deg, var(--color-success), rgba(var(--color-success-rgb), 0.8));\n  color: white;\n  border-color: var(--color-success);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(var(--color-success-rgb), 0.3);\n}\n.btn-save-action.import[data-v-2e4cdf3e] {\n  color: var(--color-info);\n  border-color: rgba(var(--color-info-rgb), 0.4);\n}\n.btn-save-action.import[data-v-2e4cdf3e]:hover:not(:disabled) {\n  background: linear-gradient(135deg, var(--color-info), rgba(var(--color-info-rgb), 0.8));\n  color: white;\n  border-color: var(--color-info);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(var(--color-info-rgb), 0.3);\n}\n.btn-save-action.migrate[data-v-2e4cdf3e] {\n  color: var(--color-warning);\n  border-color: rgba(var(--color-warning-rgb), 0.4);\n}\n.btn-save-action.migrate[data-v-2e4cdf3e]:hover:not(:disabled) {\n  background: linear-gradient(135deg, var(--color-warning), rgba(var(--color-warning-rgb), 0.85));\n  color: #1a1a1a;\n  border-color: var(--color-warning);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(var(--color-warning-rgb), 0.3);\n}\n.btn-save-action[data-v-2e4cdf3e]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  filter: grayscale(0.5);\n}\n.btn-save-action[data-v-2e4cdf3e]:disabled:hover {\n  transform: none;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);\n}\n\n/* å†…å®¹åŒºåŸŸ - ç®€åŒ–æ ·å¼ */\n.grid-content-left[data-v-2e4cdf3e],\n.grid-content-right[data-v-2e4cdf3e] {\n  background: var(--color-background);\n}\n\n/* åº•éƒ¨åŒºåŸŸ */\n.grid-footer-left[data-v-2e4cdf3e],\n.grid-footer-right[data-v-2e4cdf3e] {\n  min-height: 0;\n}\n\n/* è§’è‰²é¢æ¿ - ç®€åŒ– */\n.characters-panel[data-v-2e4cdf3e] {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: hidden;\n}\n.characters-grid[data-v-2e4cdf3e] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n}\n\n/* è§’è‰²å¡ç‰‡ - ç®€åŒ–ç´§å‡‘è®¾è®¡ */\n.character-card[data-v-2e4cdf3e] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 0.6rem;\n  margin-bottom: 0.4rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.character-card[data-v-2e4cdf3e]:hover {\n  border-color: var(--color-primary);\n  box-shadow: 0 1px 4px rgba(var(--color-primary-rgb), 0.2);\n}\n.character-card.active[data-v-2e4cdf3e] {\n  border-color: var(--color-success);\n  background: rgba(var(--color-success-rgb), 0.05);\n}\n.character-card.single-mode[data-v-2e4cdf3e] {\n  border-left: 3px solid var(--color-success);\n}\n.character-card.online-mode[data-v-2e4cdf3e] {\n  border-left: 3px solid var(--color-primary);\n}\n\n/* å¡ç‰‡å¤´éƒ¨ - ç®€åŒ– */\n.card-header[data-v-2e4cdf3e] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.5rem;\n}\n.char-avatar[data-v-2e4cdf3e] {\n  position: relative;\n  width: 28px;\n  height: 28px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: 600;\n  color: white;\n  font-size: 0.8rem;\n  flex-shrink: 0;\n  background: linear-gradient(135deg, var(--color-success), var(--color-info));\n}\n.char-avatar.è”æœº[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-info));\n}\n.mode-indicator[data-v-2e4cdf3e] {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  width: 10px;\n  height: 10px;\n  background: rgba(0, 0, 0, 0.7);\n  color: var(--color-warning);\n  border-radius: 50%;\n  font-size: 0.45rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: bold;\n  border: 1px solid var(--color-background);\n}\n.char-info[data-v-2e4cdf3e] {\n  flex: 1;\n  min-width: 0;\n}\n.char-name[data-v-2e4cdf3e] {\n  margin: 0 0 0.1rem 0;\n  font-size: 0.85rem;\n  color: var(--color-text);\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.char-meta[data-v-2e4cdf3e] {\n  display: flex;\n  gap: 0.3rem;\n  font-size: 0.65rem;\n  color: var(--color-text-secondary);\n}\n.save-count[data-v-2e4cdf3e] {\n  text-align: center;\n  flex-shrink: 0;\n  min-width: 28px;\n}\n.save-count .count[data-v-2e4cdf3e] {\n  display: block;\n  font-size: 0.9rem;\n  font-weight: bold;\n  color: var(--color-accent);\n  line-height: 1;\n}\n.save-count .label[data-v-2e4cdf3e] {\n  font-size: 0.6rem;\n  color: var(--color-text-secondary);\n  line-height: 1;\n}\n\n/* å¡ç‰‡æ“ä½œ - ç®€åŒ–æŒ‰é’® */\n.card-actions[data-v-2e4cdf3e] {\n  display: flex;\n  gap: 0.3rem;\n  margin-top: 0.5rem;\n  padding-top: 0.5rem;\n  border-top: 1px solid var(--color-border);\n}\n.btn-details[data-v-2e4cdf3e],\n.btn-export[data-v-2e4cdf3e],\n.btn-delete[data-v-2e4cdf3e] {\n  flex: 1;\n  padding: 0.3rem 0.5rem;\n  border-radius: 4px;\n  border: 1px solid var(--color-border);\n  cursor: pointer;\n  font-size: 0.7rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  background: var(--color-background);\n}\n.btn-details[data-v-2e4cdf3e] {\n  color: var(--color-info);\n  border-color: var(--color-info);\n}\n.btn-details[data-v-2e4cdf3e]:hover {\n  background: var(--color-info);\n  color: white;\n}\n.btn-export[data-v-2e4cdf3e] {\n  color: var(--color-success);\n  border-color: var(--color-success);\n}\n.btn-export[data-v-2e4cdf3e]:hover {\n  background: var(--color-success);\n  color: white;\n}\n.btn-delete[data-v-2e4cdf3e] {\n  color: var(--color-error);\n  border-color: var(--color-error);\n}\n.btn-delete[data-v-2e4cdf3e]:hover {\n  background: var(--color-error);\n  color: white;\n}\n\n/* å³ä¾§å­˜æ¡£é¢æ¿ - ç®€åŒ– */\n.saves-panel[data-v-2e4cdf3e] {\n  background: var(--color-background);\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* æ— é€‰æ‹©çŠ¶æ€ */\n.no-selection[data-v-2e4cdf3e] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-text-secondary);\n}\n.no-selection-icon[data-v-2e4cdf3e] {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n/* æ–°å¢ï¼šåŠ è½½å­˜æ¡£æ ·å¼ */\n.loading-saves[data-v-2e4cdf3e] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: var(--color-text-secondary);\n}\n.loading-spinner[data-v-2e4cdf3e] {\n  width: 40px;\n  height: 40px;\n  border: 4px solid rgba(var(--color-primary-rgb), 0.2);\n  border-top-color: var(--color-primary);\n  border-radius: 50%;\n  animation: spin-2e4cdf3e 1s linear infinite;\n  margin-bottom: 1rem;\n}\n@keyframes spin-2e4cdf3e {\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* å­˜æ¡£å®¹å™¨ */\n.saves-container[data-v-2e4cdf3e],\n.online-saves-container[data-v-2e4cdf3e] {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 1rem;\n  height: 0;\n  -webkit-overflow-scrolling: touch;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(var(--color-primary-rgb), 0.3) transparent;\n}\n.saves-container[data-v-2e4cdf3e]::-webkit-scrollbar,\n.online-saves-container[data-v-2e4cdf3e]::-webkit-scrollbar {\n  width: 6px;\n}\n.saves-container[data-v-2e4cdf3e]::-webkit-scrollbar-track,\n.online-saves-container[data-v-2e4cdf3e]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.saves-container[data-v-2e4cdf3e]::-webkit-scrollbar-thumb,\n.online-saves-container[data-v-2e4cdf3e]::-webkit-scrollbar-thumb {\n  background: rgba(var(--color-primary-rgb), 0.3);\n  border-radius: 3px;\n}\n.saves-container[data-v-2e4cdf3e]::-webkit-scrollbar-thumb:hover,\n.online-saves-container[data-v-2e4cdf3e]::-webkit-scrollbar-thumb:hover {\n  background: rgba(var(--color-primary-rgb), 0.5);\n}\n.saves-section[data-v-2e4cdf3e] {\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100%;\n}\n\n/* ä¸Šæ¬¡å¯¹è¯å­˜æ¡£åŒºåŸŸ */\n.auto-saves-section[data-v-2e4cdf3e] {\n  margin-bottom: 1.5rem;\n}\n.auto-saves-section h3[data-v-2e4cdf3e] {\n  margin: 0 0 0.8rem 0;\n  color: var(--color-warning);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.auto-saves-grid[data-v-2e4cdf3e] {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n}\n\n/* æ‰‹åŠ¨å­˜æ¡£åŒºåŸŸ */\n.manual-saves-section[data-v-2e4cdf3e] {\n  margin-bottom: 1rem;\n}\n.manual-saves-header[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.8rem;\n}\n.manual-saves-header h3[data-v-2e4cdf3e] {\n  margin: 0;\n  color: var(--color-warning);\n  font-size: 1rem;\n  font-weight: 600;\n}\n.save-info-text[data-v-2e4cdf3e] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  font-style: italic;\n}\n.manual-saves-grid[data-v-2e4cdf3e] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));\n  gap: 1rem;\n  max-height: 400px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 0;\n  -webkit-overflow-scrolling: touch;\n  scroll-behavior: smooth;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(var(--color-primary-rgb), 0.3) transparent;\n}\n.manual-saves-grid[data-v-2e4cdf3e]::-webkit-scrollbar {\n  width: 6px;\n}\n.manual-saves-grid[data-v-2e4cdf3e]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.manual-saves-grid[data-v-2e4cdf3e]::-webkit-scrollbar-thumb {\n  background: rgba(var(--color-primary-rgb), 0.3);\n  border-radius: 3px;\n}\n.manual-saves-grid[data-v-2e4cdf3e]::-webkit-scrollbar-thumb:hover {\n  background: rgba(var(--color-primary-rgb), 0.5);\n}\n\n/* å­˜æ¡£å¡ç‰‡ */\n.save-card[data-v-2e4cdf3e],\n.online-save-card[data-v-2e4cdf3e] {\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-surface-rgb), 0.9),\n    rgba(var(--color-background-rgb), 0.7)\n  );\n  backdrop-filter: blur(15px);\n  border: 2px solid rgba(var(--color-border-rgb), 0.6);\n  border-radius: 8px;\n  padding: 0.9rem;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: var(--color-text);\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n  -webkit-tap-highlight-color: transparent;\n  touch-action: manipulation;\n}\n.save-card[data-v-2e4cdf3e]::before,\n.online-save-card[data-v-2e4cdf3e]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-primary-rgb), 0.06),\n    rgba(var(--color-accent-rgb), 0.03)\n  );\n  opacity: 0;\n  transition: opacity 0.3s ease;\n  border-radius: 8px;\n}\n.save-card[data-v-2e4cdf3e]:hover::before,\n.online-save-card[data-v-2e4cdf3e]:hover::before {\n  opacity: 1;\n}\n.save-card[data-v-2e4cdf3e]:hover,\n.online-save-card[data-v-2e4cdf3e]:hover {\n  border-color: var(--color-primary);\n  transform: translateY(-2px);\n  box-shadow:\n    0 4px 15px rgba(var(--color-primary-rgb), 0.15),\n    0 2px 8px rgba(0, 0, 0, 0.08);\n}\n.save-card.has-data[data-v-2e4cdf3e] {\n  border-left: 4px solid var(--color-success);\n  border-color: rgba(var(--color-success-rgb), 0.8);\n  position: relative;\n}\n.save-card.auto-save[data-v-2e4cdf3e] {\n  border-left-color: var(--color-info);\n  border-color: rgba(var(--color-info-rgb), 0.8);\n}\n.save-icon[data-v-2e4cdf3e] {\n  display: inline-block;\n  margin-right: 0.5rem;\n  vertical-align: middle;\n  position: relative;\n  top: -1px;\n}\n.last-save-icon[data-v-2e4cdf3e] {\n  color: var(--color-primary);\n}\n.time-save-icon[data-v-2e4cdf3e] {\n  color: var(--color-warning);\n}\n.save-card.has-data[data-v-2e4cdf3e]::after {\n  content: '';\n  position: absolute;\n  top: 0.7rem;\n  right: 0.7rem;\n  width: 6px;\n  height: 6px;\n  background: var(--color-success);\n  border-radius: 50%;\n  box-shadow: 0 0 8px rgba(var(--color-success-rgb), 0.6);\n}\n\n/* å­˜æ¡£æ•°æ® */\n.save-header[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.8rem;\n}\n.save-name[data-v-2e4cdf3e] {\n  margin: 0;\n  font-size: 1rem;\n  color: var(--color-warning);\n  font-weight: 600;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 140px;\n}\n.save-badges[data-v-2e4cdf3e] {\n  display: flex;\n  gap: 0.4rem;\n  flex-shrink: 0;\n}\n.realm-badge[data-v-2e4cdf3e],\n.age-badge[data-v-2e4cdf3e] {\n  padding: 2px 6px;\n  border-radius: 8px;\n  font-size: 0.7rem;\n  font-weight: 600;\n  white-space: nowrap;\n}\n.realm-badge[data-v-2e4cdf3e] {\n  background: rgba(var(--color-success-rgb), 0.15);\n  color: var(--color-success);\n}\n.age-badge[data-v-2e4cdf3e] {\n  background: rgba(var(--color-accent-rgb), 0.15);\n  color: var(--color-accent);\n}\n\n/* å­˜æ¡£ç»Ÿè®¡ */\n.save-stats[data-v-2e4cdf3e] {\n  margin-bottom: 0.8rem;\n}\n.stat-grid[data-v-2e4cdf3e] {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 0.6rem;\n}\n.stat[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: space-between;\n  font-size: 0.8rem;\n  align-items: center;\n}\n.stat .label[data-v-2e4cdf3e] {\n  color: var(--color-text-secondary);\n  font-size: 0.75rem;\n}\n.stat .value[data-v-2e4cdf3e] {\n  color: var(--color-text);\n  font-weight: 600;\n  font-size: 0.8rem;\n}\n\n/* å­˜æ¡£åº•éƒ¨ */\n.save-footer[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  padding-top: 0.6rem;\n  border-top: 1px solid rgba(var(--color-border-rgb), 0.2);\n}\n.save-footer .location[data-v-2e4cdf3e] {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 120px;\n}\n.sync-status[data-v-2e4cdf3e] {\n  padding: 1px 4px;\n  border-radius: 3px;\n  font-weight: 600;\n  font-size: 0.7rem;\n}\n.sync-status.synced[data-v-2e4cdf3e] {\n  background: rgba(var(--color-success-rgb), 0.15);\n  color: var(--color-success);\n}\n\n/* ç©ºå­˜æ¡£ */\n.save-empty[data-v-2e4cdf3e] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  color: var(--color-text-secondary);\n  min-height: 100px;\n  padding: 1.5rem;\n}\n.save-empty .empty-hint[data-v-2e4cdf3e] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  margin: 0.5rem 0 1rem 0;\n  opacity: 0.8;\n}\n.loading-saves[data-v-2e4cdf3e] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n  gap: 0.75rem;\n}\n.loading-saves .loading-spinner[data-v-2e4cdf3e] {\n  font-size: 1.5rem;\n  animation: spin-2e4cdf3e 1s linear infinite;\n}\n@keyframes spin-2e4cdf3e {\nfrom { transform: rotate(0deg);\n}\nto { transform: rotate(360deg);\n}\n}\n.empty-slot-icon[data-v-2e4cdf3e] {\n  font-size: 2rem;\n  margin-bottom: 0.4rem;\n  opacity: 0.6;\n}\n.empty-text[data-v-2e4cdf3e] {\n  margin-bottom: 0.6rem;\n  font-size: 0.9rem;\n}\n.empty-desc[data-v-2e4cdf3e] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  opacity: 0.8;\n}\n.auto-save-desc[data-v-2e4cdf3e] {\n  font-size: 0.7rem;\n  color: var(--color-text-secondary);\n  display: block;\n  margin-top: 0.3rem;\n}\n\n/* å­˜æ¡£æ“ä½œæŒ‰é’® */\n.save-actions[data-v-2e4cdf3e] {\n  display: flex;\n  gap: 0.4rem;\n}\n.btn-export-save[data-v-2e4cdf3e],\n.btn-edit-save[data-v-2e4cdf3e],\n.btn-delete-save[data-v-2e4cdf3e] {\n  cursor: pointer;\n  padding: 0.3rem 0.5rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n  font-size: 0.7rem;\n  font-weight: 600;\n  border: 1px solid;\n  backdrop-filter: blur(5px);\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n  min-width: 26px;\n  height: 26px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.btn-export-save[data-v-2e4cdf3e] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  border-color: rgba(var(--color-success-rgb), 0.3);\n  color: var(--color-success);\n}\n.btn-export-save[data-v-2e4cdf3e]:hover {\n  background: rgba(var(--color-success-rgb), 0.2);\n  border-color: rgba(var(--color-success-rgb), 0.5);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(var(--color-success-rgb), 0.2);\n}\n.btn-edit-save[data-v-2e4cdf3e] {\n  background: rgba(var(--color-info-rgb), 0.1);\n  border-color: rgba(var(--color-info-rgb), 0.3);\n  color: var(--color-info);\n}\n.btn-edit-save[data-v-2e4cdf3e]:hover {\n  background: rgba(var(--color-info-rgb), 0.2);\n  border-color: rgba(var(--color-info-rgb), 0.5);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(var(--color-info-rgb), 0.2);\n}\n.btn-delete-save[data-v-2e4cdf3e] {\n  background: rgba(var(--color-error-rgb), 0.1);\n  border-color: rgba(var(--color-error-rgb), 0.3);\n  color: var(--color-error);\n}\n.btn-delete-save[data-v-2e4cdf3e]:hover:not(.disabled):not(:disabled) {\n  background: rgba(var(--color-error-rgb), 0.2);\n  border-color: rgba(var(--color-error-rgb), 0.5);\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(var(--color-error-rgb), 0.2);\n}\n.btn-delete-save.disabled[data-v-2e4cdf3e],\n.btn-delete-save[data-v-2e4cdf3e]:disabled {\n  opacity: 0.4;\n  cursor: not-allowed;\n  background: rgba(128, 128, 128, 0.1) !important;\n  border-color: rgba(128, 128, 128, 0.2) !important;\n  color: #888 !important;\n  transform: none !important;\n  box-shadow: none !important;\n}\n\n/* æŒ‰é’®æ ·å¼ */\n.btn-start[data-v-2e4cdf3e],\n.btn-play[data-v-2e4cdf3e],\n.btn-sync[data-v-2e4cdf3e] {\n  padding: 0.6rem 1rem;\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: white;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.5);\n  border-radius: 8px;\n  cursor: pointer;\n  font-size: 0.8rem;\n  font-weight: 600;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.25);\n  position: relative;\n  overflow: hidden;\n}\n.btn-start[data-v-2e4cdf3e]:hover,\n.btn-play[data-v-2e4cdf3e]:hover,\n.btn-sync[data-v-2e4cdf3e]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.35);\n}\n.btn-start[data-v-2e4cdf3e]::before,\n.btn-play[data-v-2e4cdf3e]::before,\n.btn-sync[data-v-2e4cdf3e]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);\n  transition: left 0.4s;\n}\n.btn-start[data-v-2e4cdf3e]:hover::before,\n.btn-play[data-v-2e4cdf3e]:hover::before,\n.btn-sync[data-v-2e4cdf3e]:hover::before {\n  left: 100%;\n}\n\n/* è”æœºæ¨¡å¼æ ·å¼ */\n.online-saves-container[data-v-2e4cdf3e] {\n  flex: 1;\n  overflow-y: auto;\n  overflow-x: hidden;\n  padding: 1rem;\n  height: 0;\n}\n.login-prompt[data-v-2e4cdf3e] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  padding: 2rem;\n}\n.login-icon[data-v-2e4cdf3e] {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n.btn-login[data-v-2e4cdf3e] {\n  padding: 0.8rem 1.5rem;\n  background: var(--color-primary);\n  color: white;\n  border: 1px solid var(--color-primary-active);\n  border-radius: 8px;\n  cursor: pointer;\n  margin-top: 1rem;\n}\n.online-save-card[data-v-2e4cdf3e] {\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-surface-rgb), 0.9),\n    rgba(var(--color-background-rgb), 0.7)\n  );\n  backdrop-filter: blur(15px);\n  border: 2px solid rgba(var(--color-border-rgb), 0.6);\n  border-radius: 8px;\n  padding: 0.9rem;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  color: var(--color-text);\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n.online-actions[data-v-2e4cdf3e] {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid var(--color-border);\n}\n\n/* è¯¦æƒ…å¼¹çª— */\n.modal-overlay[data-v-2e4cdf3e] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  backdrop-filter: blur(4px);\n}\n.details-modal[data-v-2e4cdf3e] {\n  background: var(--color-surface-transparent);\n  backdrop-filter: blur(20px);\n  border-radius: 15px;\n  width: 90%;\n  max-width: 800px;\n  max-height: 90vh;\n  overflow-y: auto;\n  border: 1px solid var(--color-border);\n}\n.modal-header[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem 2rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-header h3[data-v-2e4cdf3e] {\n  margin: 0;\n  color: var(--color-accent);\n}\n.btn-close[data-v-2e4cdf3e] {\n  background: none;\n  border: 1px solid var(--color-border);\n  font-size: 1.5rem;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 0.1rem;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n}\n.modal-content[data-v-2e4cdf3e] {\n  padding: 2rem;\n}\n.details-grid[data-v-2e4cdf3e] {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 2rem;\n}\n.detail-section[data-v-2e4cdf3e] {\n  background: linear-gradient(\n    135deg,\n    rgba(var(--color-primary-rgb), 0.08),\n    rgba(var(--color-accent-rgb), 0.06)\n  );\n  border: 1px solid rgba(var(--color-primary-rgb), 0.15);\n  border-radius: 10px;\n  padding: 1.5rem;\n  backdrop-filter: blur(8px);\n}\n.detail-section h4[data-v-2e4cdf3e] {\n  margin: 0 0 1rem 0;\n  color: var(--color-warning);\n}\n.detail-items[data-v-2e4cdf3e] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.8rem;\n}\n.detail-item[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid rgba(var(--color-border-rgb), 0.3);\n}\n.detail-item .label[data-v-2e4cdf3e] {\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.detail-item .value[data-v-2e4cdf3e] {\n  color: var(--color-text);\n  font-weight: 600;\n}\n.attributes-display[data-v-2e4cdf3e] {\n  display: flex;\n  justify-content: center;\n}\n.talents-list[data-v-2e4cdf3e] {\n  min-height: 100px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.talent-items[data-v-2e4cdf3e] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.talent-tag[data-v-2e4cdf3e] {\n  background: rgba(var(--color-accent-rgb), 0.15);\n  color: var(--color-accent);\n  padding: 4px 8px;\n  border-radius: 6px;\n  font-size: 0.8rem;\n  font-weight: 500;\n}\n.no-talents[data-v-2e4cdf3e] {\n  color: var(--color-text-secondary);\n  font-style: italic;\n  text-align: center;\n}\n\n/* å“åº”å¼é€‚é… */\n@media (max-width: 1200px) {\n.grid-container[data-v-2e4cdf3e] {\n    grid-template-columns: 300px 1fr;\n}\n\n  /* è°ƒæ•´åˆ†å‰²çº¿ä½ç½® */\n.grid-container[data-v-2e4cdf3e]::before {\n    left: 300px;\n}\n.manual-saves-grid[data-v-2e4cdf3e] {\n    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));\n}\n}\n@media (max-width: 1024px) {\n.grid-container[data-v-2e4cdf3e] {\n    grid-template-columns: 280px 1fr;\n}\n\n  /* è°ƒæ•´åˆ†å‰²çº¿ä½ç½® */\n.grid-container[data-v-2e4cdf3e]::before {\n    left: 280px;\n}\n.characters-panel[data-v-2e4cdf3e] {\n    max-width: 260px;\n}\n.save-card[data-v-2e4cdf3e],\n  .online-save-card[data-v-2e4cdf3e] {\n    padding: 0.8rem;\n}\n.details-grid[data-v-2e4cdf3e] {\n    grid-template-columns: 1fr;\n    gap: 1.5rem;\n}\n}\n@media (max-width: 640px) {\n.mobile-header[data-v-2e4cdf3e] {\n    display: flex;\n}\n.character-management-panel[data-v-2e4cdf3e] {\n    height: 100%;\n    overflow: hidden;\n}\n.main-content[data-v-2e4cdf3e] {\n    flex: 1;\n    overflow: hidden;\n    min-height: 0;\n}\n.management-layout[data-v-2e4cdf3e] {\n    flex-direction: column;\n    height: 100%;\n}\n.grid-container[data-v-2e4cdf3e] {\n    grid-template-columns: 1fr;\n    grid-template-rows: auto 1fr auto;\n    grid-template-areas:\n      'header-right'\n      'content-main'\n      'footer-main';\n    order: 1;\n}\n\n  /* ç§»åŠ¨ç«¯éšè—å‚ç›´åˆ†å‰²çº¿ */\n.grid-container[data-v-2e4cdf3e]::before {\n    display: none;\n}\n.grid-header-left[data-v-2e4cdf3e] {\n    border-right: none;\n    border-bottom: 1px solid var(--color-border);\n    /* æ‰‹æœºç«¯éšè—å·¦ä¾§æ ‡é¢˜æ  */\n    display: none;\n}\n.grid-header-right[data-v-2e4cdf3e] {\n    padding: 0.8rem;\n    flex-direction: column;\n    align-items: stretch;\n    gap: 0.8rem;\n}\n.header-left-content[data-v-2e4cdf3e] {\n    gap: 0.3rem;\n}\n.save-actions-buttons[data-v-2e4cdf3e] {\n    width: 100%;\n    gap: 0.5rem;\n}\n.btn-save-action[data-v-2e4cdf3e] {\n    flex: 1;\n    padding: 0.7rem 0.8rem;\n    font-size: 0.8rem;\n    justify-content: center;\n}\n.btn-save-action span[data-v-2e4cdf3e] {\n    display: inline;\n}\n.grid-content-left[data-v-2e4cdf3e],\n  .grid-content-right[data-v-2e4cdf3e] {\n    grid-area: content-main;\n    position: relative;\n    overflow: hidden;\n    height: 100%;\n}\n.grid-footer-left[data-v-2e4cdf3e],\n  .grid-footer-right[data-v-2e4cdf3e] {\n    grid-area: footer-main;\n    border-right: none;\n}\n.characters-panel[data-v-2e4cdf3e] {\n    position: fixed;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    width: 85%;\n    max-width: 280px;\n    z-index: 1200;\n    transform: translateX(-100%);\n    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);\n    border: none;\n    background: var(--color-surface);\n    backdrop-filter: blur(20px);\n    margin: 0;\n    padding: 0;\n    border-right: none;\n}\n.characters-panel.is-open[data-v-2e4cdf3e] {\n    transform: translateX(0);\n}\n.saves-panel[data-v-2e4cdf3e] {\n    width: 100%;\n    border-left: none;\n}\n.saves-container[data-v-2e4cdf3e],\n  .online-saves-container[data-v-2e4cdf3e] {\n    padding: 1rem 1.2rem;\n    flex: 1;\n    min-height: 0;\n    max-height: none;\n}\n.auto-saves-grid[data-v-2e4cdf3e] {\n    grid-template-columns: 1fr;\n    gap: 0.8rem;\n}\n.manual-saves-grid[data-v-2e4cdf3e] {\n    grid-template-columns: 1fr;\n    gap: 0.8rem;\n    max-height: 300px;\n}\n.modal-content[data-v-2e4cdf3e] {\n    padding: 1rem;\n}\n.details-modal[data-v-2e4cdf3e] {\n    width: 95%;\n    max-height: 85vh;\n}\n.dialog-box[data-v-2e4cdf3e] {\n    width: 95%;\n    max-width: 400px;\n    padding: 1.5rem;\n}\n.characters-grid[data-v-2e4cdf3e] {\n    padding: 1rem;\n}\n.character-card[data-v-2e4cdf3e] {\n    padding: 1rem;\n    margin-bottom: 0.8rem;\n    transition: all 0.2s ease;\n}\n.character-card[data-v-2e4cdf3e]:active {\n    transform: scale(0.98);\n    background: linear-gradient(\n      135deg,\n      rgba(var(--color-primary-rgb), 0.05),\n      rgba(var(--color-accent-rgb), 0.03)\n    );\n}\n.card-header[data-v-2e4cdf3e] {\n    flex-wrap: wrap;\n    gap: 0.8rem;\n}\n.char-info[data-v-2e4cdf3e] {\n    min-width: 120px;\n}\n.char-meta[data-v-2e4cdf3e] {\n    flex-wrap: wrap;\n    gap: 0.5rem;\n}\n}\n@media (max-width: 640px) {\n.mobile-header[data-v-2e4cdf3e] {\n    padding: 0.8rem 1rem;\n}\n.mobile-menu-btn[data-v-2e4cdf3e] {\n    padding: 0.4rem 0.6rem;\n    font-size: 0.8rem;\n    min-height: 44px;\n    min-width: 44px;\n}\n.mobile-title h2[data-v-2e4cdf3e] {\n    font-size: 1.1rem;\n}\n.mobile-title .selected-info[data-v-2e4cdf3e] {\n    font-size: 0.75rem;\n}\n.characters-panel[data-v-2e4cdf3e] {\n    width: 90%;\n    max-width: 300px;\n}\n.character-card[data-v-2e4cdf3e] {\n    padding: 0.9rem;\n    position: relative;\n    overflow: hidden;\n}\n.character-card[data-v-2e4cdf3e]::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 0;\n    height: 0;\n    background: rgba(var(--color-primary-rgb), 0.1);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n    transition:\n      width 0.3s ease,\n      height 0.3s ease;\n    pointer-events: none;\n}\n.character-card[data-v-2e4cdf3e]:active::after {\n    width: 200px;\n    height: 200px;\n}\n.save-card[data-v-2e4cdf3e],\n  .online-save-card[data-v-2e4cdf3e] {\n    padding: 1rem;\n    position: relative;\n    overflow: hidden;\n}\n.save-card[data-v-2e4cdf3e]::after,\n  .online-save-card[data-v-2e4cdf3e]::after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    width: 0;\n    height: 0;\n    background: rgba(var(--color-success-rgb), 0.1);\n    border-radius: 50%;\n    transform: translate(-50%, -50%);\n    transition:\n      width 0.3s ease,\n      height 0.3s ease;\n    pointer-events: none;\n}\n.save-card[data-v-2e4cdf3e]:active::after,\n  .online-save-card[data-v-2e4cdf3e]:active::after {\n    width: 150px;\n    height: 150px;\n}\n.auto-saves-grid[data-v-2e4cdf3e] {\n    gap: 0.6rem;\n}\n.manual-saves-grid[data-v-2e4cdf3e] {\n    gap: 0.6rem;\n}\n}\n@media (max-width: 480px) {\n.empty-actions[data-v-2e4cdf3e] {\n    flex-direction: column;\n}\n.btn-create[data-v-2e4cdf3e],\n  .btn-import[data-v-2e4cdf3e] {\n    width: 100%;\n}\n.mobile-header[data-v-2e4cdf3e] {\n    padding: 0.6rem 0.8rem;\n}\n.mobile-menu-btn[data-v-2e4cdf3e] {\n    padding: 0.4rem 0.5rem;\n    min-height: 44px;\n    min-width: 44px;\n}\n.mobile-title h2[data-v-2e4cdf3e] {\n    font-size: 1rem;\n}\n.hamburger[data-v-2e4cdf3e] {\n    width: 14px;\n    height: 10px;\n}\n.characters-panel[data-v-2e4cdf3e] {\n    width: 95%;\n    max-width: 280px;\n}\n.characters-grid[data-v-2e4cdf3e] {\n    padding: 0.8rem;\n}\n.character-card[data-v-2e4cdf3e] {\n    padding: 0.8rem;\n    margin-bottom: 0.8rem;\n    min-height: 80px;\n}\n.btn-save-action span[data-v-2e4cdf3e] {\n    font-size: 0.75rem;\n}\n.card-header[data-v-2e4cdf3e] {\n    margin-bottom: 0.8rem;\n    gap: 0.6rem;\n}\n.char-avatar[data-v-2e4cdf3e] {\n    width: 40px;\n    height: 40px;\n    font-size: 1.1rem;\n}\n.mode-indicator[data-v-2e4cdf3e] {\n    width: 16px;\n    height: 16px;\n    font-size: 0.6rem;\n}\n.char-name[data-v-2e4cdf3e] {\n    font-size: 1rem;\n}\n.char-meta[data-v-2e4cdf3e] {\n    font-size: 0.8rem;\n}\n.saves-container[data-v-2e4cdf3e],\n  .online-saves-container[data-v-2e4cdf3e] {\n    padding: 0.8rem;\n    flex: 1;\n    min-height: 0;\n    max-height: none;\n}\n.save-card[data-v-2e4cdf3e],\n  .online-save-card[data-v-2e4cdf3e] {\n    padding: 0.9rem;\n    min-height: 120px;\n}\n.stat-grid[data-v-2e4cdf3e] {\n    grid-template-columns: 1fr;\n    gap: 0.5rem;\n}\n.save-footer[data-v-2e4cdf3e] {\n    flex-direction: column;\n    gap: 0.3rem;\n    align-items: flex-start;\n}\n.dialog-box[data-v-2e4cdf3e] {\n    width: 95%;\n    padding: 1.2rem;\n    max-height: 90vh;\n    overflow-y: auto;\n}\n.dialog-title[data-v-2e4cdf3e] {\n    font-size: 1.3rem;\n}\n.dialog-actions[data-v-2e4cdf3e] {\n    flex-direction: column-reverse;\n    gap: 0.8rem;\n}\n.btn-dialog-confirm[data-v-2e4cdf3e],\n  .btn-dialog-cancel[data-v-2e4cdf3e] {\n    width: 100%;\n    padding: 0.8rem;\n    min-height: 44px;\n    font-size: 1rem;\n}\n.details-grid[data-v-2e4cdf3e] {\n    grid-template-columns: 1fr;\n    gap: 1rem;\n}\n.detail-section[data-v-2e4cdf3e] {\n    padding: 1rem;\n}\n.btn-details[data-v-2e4cdf3e],\n  .btn-export[data-v-2e4cdf3e],\n  .btn-delete[data-v-2e4cdf3e] {\n    min-height: 36px;\n    font-size: 0.85rem;\n    padding: 0.6rem 0.8rem;\n}\n.btn-start[data-v-2e4cdf3e],\n  .btn-play[data-v-2e4cdf3e],\n  .btn-sync[data-v-2e4cdf3e] {\n    min-height: 40px;\n    padding: 0.7rem 1rem;\n    font-size: 0.85rem;\n}\n}\n@media (max-width: 360px) {\n.mobile-header[data-v-2e4cdf3e] {\n    padding: 0.5rem;\n}\n.mobile-menu-btn[data-v-2e4cdf3e] {\n    padding: 0.3rem 0.4rem;\n    gap: 0.3rem;\n    min-height: 40px;\n    min-width: 40px;\n}\n.mobile-title h2[data-v-2e4cdf3e] {\n    font-size: 0.95rem;\n}\n.mobile-title .selected-info[data-v-2e4cdf3e] {\n    font-size: 0.7rem;\n}\n.characters-panel[data-v-2e4cdf3e] {\n    width: 100%;\n    max-width: 260px;\n    min-width: 240px;\n}\n.character-card[data-v-2e4cdf3e] {\n    padding: 0.6rem;\n    min-height: 70px;\n}\n.save-card[data-v-2e4cdf3e],\n  .online-save-card[data-v-2e4cdf3e] {\n    padding: 0.8rem;\n    min-height: 100px;\n}\n.save-header[data-v-2e4cdf3e] {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 0.5rem;\n}\n.save-badges[data-v-2e4cdf3e] {\n    align-self: stretch;\n    justify-content: flex-start;\n}\n.dialog-box[data-v-2e4cdf3e] {\n    width: 98%;\n    padding: 1rem;\n    margin: 0.5rem;\n    max-height: 95vh;\n}\n.dialog-title[data-v-2e4cdf3e] {\n    font-size: 1.1rem;\n}\n.dialog-message[data-v-2e4cdf3e] {\n    font-size: 0.9rem;\n    line-height: 1.5;\n}\n.dialog-input[data-v-2e4cdf3e] {\n    padding: 0.7rem;\n    font-size: 0.9rem;\n}\n.btn-dialog-confirm[data-v-2e4cdf3e],\n  .btn-dialog-cancel[data-v-2e4cdf3e] {\n    padding: 0.7rem;\n    font-size: 0.9rem;\n    min-height: 40px;\n}\n.character-management-panel[data-v-2e4cdf3e] {\n    height: 100%;\n    overflow: hidden;\n}\n.main-content[data-v-2e4cdf3e] {\n    flex: 1;\n    overflow: hidden;\n    min-height: 0;\n}\n.saves-container[data-v-2e4cdf3e],\n  .online-saves-container[data-v-2e4cdf3e] {\n    flex: 1;\n    min-height: 0;\n    padding: 0.6rem;\n    max-height: none;\n}\n.char-name[data-v-2e4cdf3e] {\n    font-size: 0.9rem;\n}\n.char-meta[data-v-2e4cdf3e] {\n    font-size: 0.75rem;\n}\n.save-count .count[data-v-2e4cdf3e] {\n    font-size: 1rem;\n}\n.save-count .label[data-v-2e4cdf3e] {\n    font-size: 0.65rem;\n}\n}\n\n/* Style unification overrides */\n/* Replace absolute divider with contextual borders */\n.grid-container[data-v-2e4cdf3e]::before {\n  content: none;\n}\n.grid-header-left[data-v-2e4cdf3e],\n.grid-content-left[data-v-2e4cdf3e],\n.grid-footer-left[data-v-2e4cdf3e] {\n  border-right: var(--cm-divider-width) solid var(--color-primary);\n  box-sizing: border-box;\n}\n\n/* Ensure left column fills its grid cell at <=1024px (fix misaligned divider) */\n@media (max-width: 1024px) {\n.grid-content-left.characters-panel[data-v-2e4cdf3e] {\n    max-width: none;\n    width: 100%;\n}\n}\n\n/* Consistent radii across controls */\n.dialog-box[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-lg);\n}\n.dialog-input[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-md);\n}\n.btn-dialog-confirm[data-v-2e4cdf3e],\n.btn-dialog-cancel[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-md);\n}\n.fullscreen-back-btn[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-md);\n}\n.character-card[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-sm);\n}\n.save-card[data-v-2e4cdf3e],\n.online-save-card[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-md);\n}\n.btn-details[data-v-2e4cdf3e],\n.btn-delete[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-md);\n}\n.btn-start[data-v-2e4cdf3e],\n.btn-play[data-v-2e4cdf3e],\n.btn-sync[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-md);\n}\n.btn-login[data-v-2e4cdf3e],\n.btn-close[data-v-2e4cdf3e] {\n  border-radius: var(--cm-radius-md);\n}\n\n/* Desktop card density adjustments: make character list less flat */\n@media (min-width: 769px) {\n.characters-grid[data-v-2e4cdf3e] {\n    padding: 0.8rem;\n}\n.character-card[data-v-2e4cdf3e] {\n    min-height: var(--cm-card-min-h);\n    padding: var(--cm-card-padding);\n}\n.card-header[data-v-2e4cdf3e] {\n    gap: var(--cm-header-gap);\n    margin-bottom: 0.6rem;\n}\n.char-avatar[data-v-2e4cdf3e] {\n    width: var(--cm-avatar-size);\n    height: var(--cm-avatar-size);\n    font-size: 0.95rem;\n}\n.char-name[data-v-2e4cdf3e] {\n    font-size: var(--cm-name-font);\n}\n.char-meta[data-v-2e4cdf3e] {\n    font-size: var(--cm-meta-font);\n}\n.save-count[data-v-2e4cdf3e] {\n    min-width: var(--cm-save-count-minw);\n}\n.save-count .count[data-v-2e4cdf3e] {\n    font-size: var(--cm-save-count-count-font);\n}\n.save-count .label[data-v-2e4cdf3e] {\n    font-size: var(--cm-save-count-label-font);\n}\n}\n\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼é€‚é… ========== */\n[data-theme='dark'] .character-management-panel[data-v-2e4cdf3e] {\n  background: rgb(30, 41, 59);\n}\n[data-theme='dark'] .fullscreen-header[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.9);\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n  backdrop-filter: blur(12px);\n}\n[data-theme='dark'] .fullscreen-back-btn[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.6);\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #94a3b8;\n}\n[data-theme='dark'] .fullscreen-back-btn[data-v-2e4cdf3e]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  color: #f1f5f9;\n  border-color: rgba(147, 197, 253, 0.3);\n}\n[data-theme='dark'] .fullscreen-title h1[data-v-2e4cdf3e] {\n  color: #f1f5f9;\n  text-shadow: 0 0 20px rgba(147, 197, 253, 0.4);\n}\n[data-theme='dark'] .fullscreen-title p[data-v-2e4cdf3e] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .mobile-header[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.9);\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n  backdrop-filter: blur(12px);\n}\n[data-theme='dark'] .mobile-menu-btn[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.8);\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #94a3b8;\n}\n[data-theme='dark'] .mobile-menu-btn[data-v-2e4cdf3e]:hover {\n  background: rgba(51, 65, 85, 0.9);\n  color: #93c5fd;\n  border-color: rgba(147, 197, 253, 0.3);\n}\n[data-theme='dark'] .mobile-menu-btn.active[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(37, 99, 235, 0.9));\n  color: #ffffff;\n  border-color: rgba(147, 197, 253, 0.5);\n}\n[data-theme='dark'] .mobile-title h2[data-v-2e4cdf3e] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .mobile-title .selected-info[data-v-2e4cdf3e] {\n  color: #94a3b8;\n}\n\n/* ç½‘æ ¼å¸ƒå±€æš—è‰²é€‚é… */\n[data-theme='dark'] .grid-header-left[data-v-2e4cdf3e],\n[data-theme='dark'] .grid-header-right[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.8);\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n[data-theme='dark'] .grid-header-left h2[data-v-2e4cdf3e],\n[data-theme='dark'] .grid-header-right h2[data-v-2e4cdf3e] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .character-count[data-v-2e4cdf3e] {\n  background: rgba(15, 23, 42, 0.6);\n  border-color: rgba(255, 255, 255, 0.08);\n  color: #94a3b8;\n}\n[data-theme='dark'] .selected-char-info[data-v-2e4cdf3e] {\n  background: rgba(59, 130, 246, 0.15);\n  border-color: rgba(147, 197, 253, 0.3);\n  color: #93c5fd;\n}\n[data-theme='dark'] .grid-content-left[data-v-2e4cdf3e],\n[data-theme='dark'] .grid-content-right[data-v-2e4cdf3e] {\n  background: rgb(30, 41, 59);\n}\n[data-theme='dark'] .grid-content-left.characters-panel[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.95);\n}\n\n/* åˆ†å‰²çº¿æš—è‰²é€‚é… */\n[data-theme='dark'] .grid-header-left[data-v-2e4cdf3e],\n[data-theme='dark'] .grid-content-left[data-v-2e4cdf3e],\n[data-theme='dark'] .grid-footer-left[data-v-2e4cdf3e] {\n  border-right-color: rgba(147, 197, 253, 0.3);\n}\n\n/* è§’è‰²å¡ç‰‡æš—è‰²é€‚é… */\n[data-theme='dark'] .character-card[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.6);\n  border-color: rgba(255, 255, 255, 0.08);\n}\n[data-theme='dark'] .character-card[data-v-2e4cdf3e]:hover {\n  background: rgba(51, 65, 85, 0.7);\n  border-color: rgba(147, 197, 253, 0.3);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);\n}\n[data-theme='dark'] .character-card.active[data-v-2e4cdf3e] {\n  background: rgba(30, 58, 138, 0.4);\n  border-color: rgba(147, 197, 253, 0.5);\n}\n[data-theme='dark'] .character-card.single-mode[data-v-2e4cdf3e] {\n  border-left-color: #9ece6a;\n}\n[data-theme='dark'] .character-card.online-mode[data-v-2e4cdf3e] {\n  border-left-color: #93c5fd;\n}\n[data-theme='dark'] .char-name[data-v-2e4cdf3e] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .char-meta[data-v-2e4cdf3e] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .save-count .count[data-v-2e4cdf3e] {\n  color: #c0caf5;\n}\n[data-theme='dark'] .save-count .label[data-v-2e4cdf3e] {\n  color: #64748b;\n}\n[data-theme='dark'] .card-actions[data-v-2e4cdf3e] {\n  border-top-color: rgba(255, 255, 255, 0.08);\n}\n[data-theme='dark'] .btn-details[data-v-2e4cdf3e],\n[data-theme='dark'] .btn-export[data-v-2e4cdf3e],\n[data-theme='dark'] .btn-delete[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.6);\n}\n[data-theme='dark'] .btn-details[data-v-2e4cdf3e] {\n  color: #77cdfe;\n  border-color: rgba(119, 205, 254, 0.4);\n}\n[data-theme='dark'] .btn-details[data-v-2e4cdf3e]:hover {\n  background: #77cdfe;\n  color: #0f172a;\n}\n[data-theme='dark'] .btn-export[data-v-2e4cdf3e] {\n  color: #9ece6a;\n  border-color: rgba(158, 206, 106, 0.4);\n}\n[data-theme='dark'] .btn-export[data-v-2e4cdf3e]:hover {\n  background: #9ece6a;\n  color: #0f172a;\n}\n[data-theme='dark'] .btn-delete[data-v-2e4cdf3e] {\n  color: #f87171;\n  border-color: rgba(248, 113, 113, 0.4);\n}\n[data-theme='dark'] .btn-delete[data-v-2e4cdf3e]:hover {\n  background: #f87171;\n  color: #0f172a;\n}\n\n/* å­˜æ¡£é¢æ¿æš—è‰²é€‚é… */\n[data-theme='dark'] .saves-panel[data-v-2e4cdf3e] {\n  background: rgb(30, 41, 59);\n}\n[data-theme='dark'] .no-selection[data-v-2e4cdf3e] {\n  color: #64748b;\n}\n[data-theme='dark'] .manual-saves-header h3[data-v-2e4cdf3e] {\n  color: #fbbf24;\n}\n[data-theme='dark'] .save-info-text[data-v-2e4cdf3e] {\n  color: #64748b;\n}\n\n/* å­˜æ¡£å¡ç‰‡æš—è‰²é€‚é… */\n[data-theme='dark'] .save-card[data-v-2e4cdf3e],\n[data-theme='dark'] .online-save-card[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.7);\n  border-color: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(15px);\n}\n[data-theme='dark'] .save-card[data-v-2e4cdf3e]::before,\n[data-theme='dark'] .online-save-card[data-v-2e4cdf3e]::before {\n  background: linear-gradient(135deg, rgba(147, 197, 253, 0.08), rgba(192, 202, 245, 0.04));\n}\n[data-theme='dark'] .save-card[data-v-2e4cdf3e]:hover,\n[data-theme='dark'] .online-save-card[data-v-2e4cdf3e]:hover {\n  border-color: rgba(147, 197, 253, 0.4);\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);\n}\n[data-theme='dark'] .save-card.has-data[data-v-2e4cdf3e] {\n  border-left-color: #9ece6a;\n  border-color: rgba(158, 206, 106, 0.5);\n}\n[data-theme='dark'] .save-card.auto-save[data-v-2e4cdf3e] {\n  border-left-color: #77cdfe;\n  border-color: rgba(119, 205, 254, 0.5);\n}\n[data-theme='dark'] .save-card.has-data[data-v-2e4cdf3e]::after {\n  background: #9ece6a;\n  box-shadow: 0 0 8px rgba(158, 206, 106, 0.6);\n}\n[data-theme='dark'] .save-name[data-v-2e4cdf3e] {\n  color: #fbbf24;\n}\n[data-theme='dark'] .realm-badge[data-v-2e4cdf3e] {\n  background: rgba(158, 206, 106, 0.2);\n  color: #9ece6a;\n}\n[data-theme='dark'] .age-badge[data-v-2e4cdf3e] {\n  background: rgba(192, 202, 245, 0.2);\n  color: #c0caf5;\n}\n[data-theme='dark'] .stat .label[data-v-2e4cdf3e] {\n  color: #64748b;\n}\n[data-theme='dark'] .stat .value[data-v-2e4cdf3e] {\n  color: #e2e8f0;\n}\n[data-theme='dark'] .save-footer[data-v-2e4cdf3e] {\n  border-top-color: rgba(255, 255, 255, 0.08);\n  color: #64748b;\n}\n[data-theme='dark'] .sync-status.synced[data-v-2e4cdf3e] {\n  background: rgba(158, 206, 106, 0.2);\n  color: #9ece6a;\n}\n[data-theme='dark'] .save-empty[data-v-2e4cdf3e] {\n  color: #64748b;\n}\n\n/* å­˜æ¡£æ“ä½œæŒ‰é’®æš—è‰²é€‚é… */\n[data-theme='dark'] .btn-export-save[data-v-2e4cdf3e] {\n  background: rgba(158, 206, 106, 0.15);\n  border-color: rgba(158, 206, 106, 0.3);\n  color: #9ece6a;\n}\n[data-theme='dark'] .btn-export-save[data-v-2e4cdf3e]:hover {\n  background: rgba(158, 206, 106, 0.25);\n  border-color: rgba(158, 206, 106, 0.5);\n}\n[data-theme='dark'] .btn-edit-save[data-v-2e4cdf3e] {\n  background: rgba(119, 205, 254, 0.15);\n  border-color: rgba(119, 205, 254, 0.3);\n  color: #77cdfe;\n}\n[data-theme='dark'] .btn-edit-save[data-v-2e4cdf3e]:hover {\n  background: rgba(119, 205, 254, 0.25);\n  border-color: rgba(119, 205, 254, 0.5);\n}\n[data-theme='dark'] .btn-delete-save[data-v-2e4cdf3e] {\n  background: rgba(248, 113, 113, 0.15);\n  border-color: rgba(248, 113, 113, 0.3);\n  color: #f87171;\n}\n[data-theme='dark'] .btn-delete-save[data-v-2e4cdf3e]:hover:not(.disabled):not(:disabled) {\n  background: rgba(248, 113, 113, 0.25);\n  border-color: rgba(248, 113, 113, 0.5);\n}\n\n/* æŒ‰é’®æš—è‰²é€‚é… */\n[data-theme='dark'] .btn-start[data-v-2e4cdf3e],\n[data-theme='dark'] .btn-play[data-v-2e4cdf3e],\n[data-theme='dark'] .btn-sync[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(37, 99, 235, 0.9));\n  border-color: rgba(147, 197, 253, 0.4);\n  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);\n}\n[data-theme='dark'] .btn-start[data-v-2e4cdf3e]:hover,\n[data-theme='dark'] .btn-play[data-v-2e4cdf3e]:hover,\n[data-theme='dark'] .btn-sync[data-v-2e4cdf3e]:hover {\n  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);\n}\n[data-theme='dark'] .btn-header-action[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.6);\n}\n[data-theme='dark'] .btn-header-action.import[data-v-2e4cdf3e] {\n  color: #77cdfe;\n  border-color: rgba(119, 205, 254, 0.4);\n}\n[data-theme='dark'] .btn-header-action.import[data-v-2e4cdf3e]:hover {\n  background: rgba(119, 205, 254, 0.15);\n  border-color: #77cdfe;\n}\n[data-theme='dark'] .btn-save-action[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.7);\n  backdrop-filter: blur(10px);\n}\n[data-theme='dark'] .btn-save-action.export[data-v-2e4cdf3e] {\n  color: #9ece6a;\n  border-color: rgba(158, 206, 106, 0.4);\n}\n[data-theme='dark'] .btn-save-action.export[data-v-2e4cdf3e]:hover:not(:disabled) {\n  background: linear-gradient(135deg, #9ece6a, rgba(158, 206, 106, 0.8));\n  color: #0f172a;\n}\n[data-theme='dark'] .btn-save-action.import[data-v-2e4cdf3e] {\n  color: #77cdfe;\n  border-color: rgba(119, 205, 254, 0.4);\n}\n[data-theme='dark'] .btn-save-action.import[data-v-2e4cdf3e]:hover:not(:disabled) {\n  background: linear-gradient(135deg, #77cdfe, rgba(119, 205, 254, 0.8));\n  color: #0f172a;\n}\n[data-theme='dark'] .btn-save-action.migrate[data-v-2e4cdf3e] {\n  color: var(--color-warning);\n  border-color: rgba(var(--color-warning-rgb), 0.45);\n}\n[data-theme='dark'] .btn-save-action.migrate[data-v-2e4cdf3e]:hover:not(:disabled) {\n  background: linear-gradient(135deg, var(--color-warning), rgba(var(--color-warning-rgb), 0.85));\n  color: #0f172a;\n}\n\n/* å¯¹è¯æ¡†æš—è‰²é€‚é… */\n[data-theme='dark'] .dialog-overlay[data-v-2e4cdf3e] {\n  background: rgba(10, 15, 25, 0.7);\n}\n[data-theme='dark'] .dialog-box[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.95);\n  border-color: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(20px);\n}\n[data-theme='dark'] .dialog-title[data-v-2e4cdf3e] {\n  color: #c0caf5;\n}\n[data-theme='dark'] .dialog-message[data-v-2e4cdf3e] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .dialog-input[data-v-2e4cdf3e] {\n  background: rgba(15, 23, 42, 0.6);\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #f1f5f9;\n}\n[data-theme='dark'] .dialog-input[data-v-2e4cdf3e]:focus {\n  border-color: #93c5fd;\n  box-shadow: 0 0 0 3px rgba(147, 197, 253, 0.2);\n}\n[data-theme='dark'] .btn-dialog-confirm[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(37, 99, 235, 0.9));\n  border-color: rgba(147, 197, 253, 0.4);\n}\n[data-theme='dark'] .btn-dialog-cancel[data-v-2e4cdf3e] {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #94a3b8;\n}\n[data-theme='dark'] .btn-dialog-cancel[data-v-2e4cdf3e]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  color: #f1f5f9;\n}\n\n/* è¯¦æƒ…å¼¹çª—æš—è‰²é€‚é… */\n[data-theme='dark'] .modal-overlay[data-v-2e4cdf3e] {\n  background: rgba(10, 15, 25, 0.7);\n}\n[data-theme='dark'] .details-modal[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.95);\n  border-color: rgba(255, 255, 255, 0.1);\n  backdrop-filter: blur(20px);\n}\n[data-theme='dark'] .modal-header[data-v-2e4cdf3e] {\n  border-bottom-color: rgba(255, 255, 255, 0.08);\n}\n[data-theme='dark'] .modal-header h3[data-v-2e4cdf3e] {\n  color: #c0caf5;\n}\n[data-theme='dark'] .btn-close[data-v-2e4cdf3e] {\n  border-color: rgba(255, 255, 255, 0.1);\n  color: #64748b;\n}\n[data-theme='dark'] .btn-close[data-v-2e4cdf3e]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  color: #f1f5f9;\n}\n[data-theme='dark'] .detail-section[data-v-2e4cdf3e] {\n  background: rgba(30, 41, 59, 0.6);\n  border-color: rgba(147, 197, 253, 0.15);\n}\n[data-theme='dark'] .detail-section h4[data-v-2e4cdf3e] {\n  color: #fbbf24;\n}\n[data-theme='dark'] .detail-item[data-v-2e4cdf3e] {\n  border-bottom-color: rgba(255, 255, 255, 0.06);\n}\n[data-theme='dark'] .detail-item .label[data-v-2e4cdf3e] {\n  color: #64748b;\n}\n[data-theme='dark'] .detail-item .value[data-v-2e4cdf3e] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .talent-tag[data-v-2e4cdf3e] {\n  background: rgba(192, 202, 245, 0.2);\n  color: #c0caf5;\n}\n[data-theme='dark'] .no-talents[data-v-2e4cdf3e] {\n  color: #64748b;\n}\n\n/* ç©ºçŠ¶æ€æš—è‰²é€‚é… */\n[data-theme='dark'] .empty-state h2[data-v-2e4cdf3e] {\n  color: #c0caf5;\n}\n[data-theme='dark'] .empty-state p[data-v-2e4cdf3e] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .btn-create[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, #9ece6a, #77cdfe);\n  border-color: rgba(158, 206, 106, 0.5);\n}\n[data-theme='dark'] .btn-import[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(192, 202, 245, 0.8));\n  border-color: rgba(147, 197, 253, 0.5);\n}\n\n/* è”æœºæ¨¡å¼æš—è‰²é€‚é… */\n[data-theme='dark'] .login-prompt h3[data-v-2e4cdf3e] {\n  color: #f1f5f9;\n}\n[data-theme='dark'] .login-prompt p[data-v-2e4cdf3e] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .btn-login[data-v-2e4cdf3e] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(37, 99, 235, 0.9));\n  border-color: rgba(147, 197, 253, 0.4);\n}\n\n/* åŠ è½½çŠ¶æ€æš—è‰²é€‚é… */\n[data-theme='dark'] .loading-saves p[data-v-2e4cdf3e] {\n  color: #94a3b8;\n}\n[data-theme='dark'] .loading-spinner[data-v-2e4cdf3e] {\n  border-color: rgba(147, 197, 253, 0.2);\n  border-top-color: #93c5fd;\n}\n",""]);const s=i},7527:(e,t,n)=>{"use strict";n.d(t,{Gr:()=>i,VQ:()=>r,eQ:()=>a,qS:()=>s,yM:()=>o});const a=[{id:1,name:"æœå¤©å¤§é™†",era:"æœå¤©å†å…ƒå¹´",description:'æ­¤æ–¹ä¸–ç•Œåä¸º"æœå¤©å¤§é™†"ï¼Œä¹ƒæ˜¯ä¸€å¤„å¤©é“å®Œæ•´ã€çµæ°”å……æ²›çš„ä¸Šå–„ä¹‹åœ°ã€‚å…¶æ ¸å¿ƒæ³•åˆ™æ˜¯"ä¸‡çµç«æ¸¡ï¼Œä¸€æ­¥ç™»å¤©"ï¼Œæ— è®ºæ˜¯äººã€å¦–ã€ç²¾ã€æ€ªï¼Œçš†æœ‰ç¼˜æ³•è¸ä¸Šä¿®è¡Œä¹‹è·¯ï¼Œå©é—®é•¿ç”Ÿã€‚\nä»™å‡¡ä¹‹åˆ«åœ¨æ­¤ç•Œæ³¾æ¸­åˆ†æ˜ï¼Œå®›è‹¥å¤©æ¸Šã€‚å‡¡äººå¯¿ä¸è¿‡ç™¾è½½ï¼Œå—ç”Ÿè€ç—…æ­»ä¹‹è‹¦ï¼Œç»ˆå½’ä¸€æŠ”é»„åœŸï¼›è€Œä¿®å£«ä¸€æ—¦è¸å…¥é“é€”ï¼Œä¾¿èƒ½ååå¤©åœ°çµæ°”ï¼Œæ·¬ç‚¼å·±èº«ï¼Œå¯¿å…ƒåŠ¨è¾„åƒè½½ï¼Œæ›´æœ‰å¤§èƒ½è€…ä¸å¤©åœ°åŒå¯¿ã€‚å‡¡ä¿—ç‹æœæ›´è¿­ï¼Œäºä¿®å£«è€Œè¨€ä¸è¿‡æ˜¯å¼¹æŒ‡ä¸€ç¬é—´ã€‚åœ¨å‡¡äººçœ¼ä¸­ï¼Œä¿®å£«æ˜¯é«˜æ‚¬äºä¹å¤©çš„ä»™ç¥ï¼Œä¸€è¨€å¯å®šä¸€å›½å…´è¡°ï¼Œä¸€å¿µå¯å¼•é£é›¨é›·éœ†ã€‚ç„¶è€Œï¼Œè¿™ç§åŠ›é‡å¹¶éæ¯«æ— ä»£ä»·ã€‚\næ­¤ç•Œå¥‰è¡Œ"å¤§é“äº‰é”‹"çš„é“åˆ™ï¼Œå¤©é“äºˆä¸‡ç‰©æœºç¼˜ï¼Œå´ä¹Ÿé™ä¸‹æ— å°½å‡¶é™©ã€‚çµè„‰å®åœ°ã€ç¥åŠŸç§˜æ³•ã€å¤©æåœ°å®ï¼Œçš†æ˜¯æœ‰ç¼˜è€…å±…ä¹‹ï¼Œè€Œ"ç¼˜"å­—èƒŒåï¼Œå¾€å¾€æ˜¯è¡€ä¸ç«çš„æ´—ç¤¼ã€‚ä¿®å£«ä¹‹é—´ï¼Œä¸ºæ±‚é“é€”ç²¾è¿›ï¼Œäº‰æ–—ä¹ƒæ˜¯å¸¸æ€ã€‚åŒé—¨å¯èƒ½åç›®ï¼ŒæŒšå‹äº¦ä¼šèƒŒå›ï¼Œæ€äººå¤ºå®ã€æ–©è‰é™¤æ ¹ä¹‹äº‹å±¡è§ä¸é²œã€‚è¿™æ˜¯ä¸€ä¸ªæåº¦è‡ªç”±çš„ä¸–ç•Œï¼Œä½ å¯ä»¥é€‰æ‹©æˆä¸ºå®ˆæŠ¤ä¸€æ–¹çš„å–„ä»™ï¼Œäº¦å¯æˆä¸ºè‚†è™å…«è’çš„é­”å¤´ï¼Œåªè¦ä½ æœ‰è¶³å¤Ÿçš„å®åŠ›ã€‚ä½†è‡ªç”±çš„èƒŒåï¼Œæ˜¯æ— å¤„ä¸åœ¨çš„å±é™©ï¼Œä¸€æ­¥è¸é”™ï¼Œä¾¿æ˜¯ä¸‡åŠ«ä¸å¤ï¼Œèº«æ­»é“æ¶ˆã€‚\nç„¶å¤©é“äº¦æœ‰åˆ¶è¡¡ï¼Œä¿®å£«è‹¥æ— æ•…ä»¥å¤§æ³•åŠ›å¹²æ¶‰å‡¡ä¿—ç‹æœæ›´è¿­ã€å± æˆ®å‡¡äººï¼Œä¾¿ä¼šä¸æ­¤æ–¹å¤©åœ°ç»“ä¸‹å› æœã€‚è™½æ— ä¸šæŠ¥åŠ èº«ï¼Œå´ä¼šåœ¨æ—¥åå†²å‡»æ›´é«˜å¢ƒç•Œã€æ¸¡åŠ«é£å‡ä¹‹æ—¶ï¼Œå¼•æ¥æ›´å¼ºå¤§çš„å¤©åŠ«ï¼Œå¹³æ·»æ— æ•°å˜æ•°ã€‚æ•…è€Œå¤šæ•°ä¿®å£«é€‰æ‹©åœ¨å±±é—¨æ¸…ä¿®ï¼Œæˆ–äºçº¢å°˜å†ç»ƒï¼Œä»¥æ±‚å‹˜ç ´å¿ƒéšœï¼Œè¯å¾—å¤§é“ã€‚ä¿®ä»™ç™¾è‰ºâ€”â€”ç‚¼ä¸¹ã€ç‚¼å™¨ã€ç¬¦ç®“ã€é˜µæ³•ï¼Œåœ¨æ­¤ç•Œå‘å±•åˆ°äº†æè‡´ï¼Œå…±åŒæ„ç­‘äº†ä¸€ä¸ªæ— æ¯”å…´ç››ã€å´ä¹Ÿæ— æ¯”æ®‹é…·çš„ä¿®ä»™æ–‡æ˜ã€‚'},{id:2,name:"åœ°çƒ",era:"çµæ°”å¤è‹å…ƒå¹´",description:'åœ¨2026å¹´çš„ä¸€å¤©ï¼Œåœ°çƒç»å†äº†ä¸€åœºå‰æ‰€æœªæœ‰çš„çµæ°”å¤è‹ã€‚æ›¾ç»åªå­˜åœ¨äºç¥è¯ä¼ è¯´ä¸­çš„"çµæ°”"ï¼Œå¦‚æ½®æ°´èˆ¬æ¶Œå…¥ç°ä»£ä¸–ç•Œã€‚ç§‘å­¦æ— æ³•è§£é‡Šçš„å¼‚è±¡é¢‘é¢‘å‘ç”Ÿï¼šåŸå¸‚ä¸Šç©ºå‡ºç°æå…‰èˆ¬çš„èƒ½é‡æ³¢åŠ¨ï¼Œæ·±å±±è€æ—æ¶Œç°å‡ºç¥ç§˜çš„çµè„‰ï¼Œæ™®é€šåŠ¨æ¤ç‰©å¼€å§‹å˜å¼‚è¿›åŒ–ã€‚\nåœ¨è¿™ä¸ªå·¨å˜çš„æ—¶ä»£ï¼Œä½ æ˜¯æå°‘æ•°èƒ½æ„ŸçŸ¥å¹¶å¸æ”¶çµæ°”çš„"è§‰é†’è€…"ã€‚å½“å…¨ä¸–ç•Œè¿˜åœ¨ç”¨ç§‘å­¦ä»ªå™¨ç ”ç©¶è¿™è‚¡ç¥ç§˜èƒ½é‡æ—¶ï¼Œä½ å·²ç»èƒ½å¤Ÿå°†å…¶ç‚¼åŒ–å…¥ä½“ï¼Œèµ°ä¸Šäº†ä¿®çœŸä¹‹è·¯ã€‚ç°ä»£åŒ–çš„éƒ½å¸‚ã€ä¾¿æ·çš„ç½‘ç»œã€å‘è¾¾çš„ç§‘æŠ€ï¼Œä¸å¤è€çš„ä¿®ç‚¼ä½“ç³»ç¢°æ’ï¼Œäº§ç”Ÿäº†å¥‡å¦™çš„åŒ–å­¦ååº”ã€‚\næ”¿åºœæˆç«‹äº†"è¶…è‡ªç„¶äº‹åŠ¡ç®¡ç†å±€"ï¼Œå„å›½äº‰ç›¸ç ”ç©¶çµæ°”åº”ç”¨æŠ€æœ¯ï¼Œè·¨å›½ä¼ä¸šè¯•å›¾å°†çµæ°”å•†ä¸šåŒ–ï¼Œè€Œå¤è€å®—é—¨çš„åè£”ä»¬ä¹Ÿçº·çº·å‡ºä¸–ã€‚åœ¨è¿™ä¸ªçµæ°”ä¸ç§‘æŠ€å¹¶å­˜çš„æ—¶ä»£ï¼Œä½ å°†åœ¨é’¢é“æ£®æ—ä¸­ç‹¬è‡ªä¿®è¡Œï¼Œæ¢ç´¢"ç§‘å­¦ä¿®çœŸ"çš„å¥¥ç§˜ã€‚äººç±»çš„å¯¿å‘½ä¾ç„¶æœ‰é™ï¼Œæ™®é€šäººå¯¹è§‰é†’è€…æ—¢æ•¬ç•åˆææƒ§ï¼Œè€Œä½ ï¼Œå¿…é¡»åœ¨ä¸¤ä¸ªä¸–ç•Œä¹‹é—´æ‰¾åˆ°è‡ªå·±çš„é“è·¯ã€‚'},{id:3,name:"èµ›åšä¿®çœŸ",era:"æ–°çºªå…ƒ2156",description:'2156å¹´ï¼Œäººç±»æ–‡æ˜å·²ç»è¸å…¥æ˜Ÿé™…æ—¶ä»£ã€‚åœ¨èµ›åšæœ‹å…‹çš„éœ“è™¹éƒ½å¸‚ä¸­ï¼Œä¹‰ä½“æ”¹é€ ã€ç¥ç»æ¥é©³ã€æ„è¯†ä¸Šä¼ å·²æˆä¸ºå¸¸æ€ã€‚ç„¶è€Œï¼Œä¸€æ¬¡æ·±ç©ºæ¢ç´¢æ„å¤–å‘ç°äº†"çµèƒ½æ°´æ™¶"â€”â€”ä¸€ç§èƒ½å¤Ÿå¢å¼ºäººç±»ç²¾ç¥åŠ›çš„ç¥ç§˜çŸ¿çŸ³ï¼Œå½»åº•æ”¹å˜äº†ä¸–ç•Œã€‚\nä½ æ˜¯ä¸€åè¾¹ç¼˜è·‘è€…ï¼Œåœ¨æ¥è§¦çµèƒ½æ°´æ™¶åè§‰é†’äº†ä¿®ç‚¼å¤©èµ‹ã€‚ä¸ä¼ ç»Ÿä¿®çœŸä¸åŒï¼Œè¿™ä¸ªæ—¶ä»£çš„ä¿®è¡Œä¾æ‰˜äº"ä¹‰ä½“çµä¿®"ä½“ç³»ï¼šå°†çµèƒ½ä¸èµ›åšä¹‰ä½“ç»“åˆï¼Œæ•°æ®æµå°±æ˜¯çµæ°”ï¼Œç¥ç»ç½‘ç»œå°±æ˜¯ç»è„‰ï¼Œæ„è¯†æ ¸å¿ƒå°±æ˜¯ä¸¹ç”°ã€‚ä½ å¯ä»¥é€šè¿‡é»‘å®¢æ‰‹æ®µ"ç›—å–"ä¼ä¸šçš„ä¿®ç‚¼æ•°æ®ï¼Œå¯ä»¥åœ¨è™šæ‹Ÿç°å®ä¸­è¿›è¡Œ"æ•°æ®é—­å…³"ï¼Œä¹Ÿå¯ä»¥ç”¨çº³ç±³æœºå™¨äººæ„å»º"æœºæ¢°é‡‘ä¸¹"ã€‚\nå·¨å‹ä¼ä¸šå„æ–­äº†çµèƒ½èµ„æºï¼Œèµ›åšä¿®å£«ä»¬ä¸ºäº†çªç ´å¢ƒç•Œä¸å¾—ä¸æ¥å—å±é™©ä»»åŠ¡ã€‚åŸå¸‚ä¸‹å±‚è´«æ°‘çªŸä¸­æœ‰äººåœ¨ç ´æ—§çš„èƒ¶å›Šæ—…é¦†é‡Œä¿®ç‚¼ï¼Œä¸Šå±‚åˆ™æ˜¯ä¼ä¸šä¾›å…»çš„"æ•°æ®ä»™äºº"äº«å—ç€æ— å°½èµ„æºã€‚è¿™æ˜¯ä¸€ä¸ªå­¤ç‹¬ä¿®å£«çš„æ—¶ä»£ï¼Œåœ¨éœ“è™¹é—ªçƒã€ä¹‰ä½“æ¨ªè¡Œçš„ä¸–ç•Œé‡Œï¼Œä½ å°†ç”¨ä»£ç å’Œçµèƒ½ä¹¦å†™å±äºè‡ªå·±çš„é£å‡ä¼ è¯´ã€‚'},{id:4,name:"é­”æ³•çºªå…ƒ",era:"ç¬¬ä¸ƒé­”æ³•æ—¶ä»£",description:'è¿™æ˜¯ä¸€ä¸ªé­”æ³•ä¸çµæ°”èåˆçš„å¥‡å¹»ä¸–ç•Œã€‚åƒå¹´å‰ï¼Œä¸œæ–¹çš„"ä¿®çœŸä½“ç³»"ä¸è¥¿æ–¹çš„"é­”æ³•ä½“ç³»"å‘ç”Ÿäº†å²è¯—çº§çš„ç¢°æ’ï¼Œæœ€ç»ˆä¸¤å¤§æ–‡æ˜è¾¾æˆäº†å¾®å¦™çš„å¹³è¡¡ã€‚åœ¨è¿™ä¸ªä¸–ç•Œï¼Œå¤è€çš„ä¿®çœŸå®—é—¨ä¸é­”æ³•å­¦é™¢å¹¶å­˜ï¼Œé“å®¶çš„ç¬¦ç®“ä¸ç‚¼é‡‘æœ¯çš„é­”æ³•é˜µæœ‰ç€æƒŠäººçš„ç›¸ä¼¼ä¹‹å¤„ã€‚\nä½ ç”Ÿäºè¾¹å¢ƒä¹‹åœ°ï¼Œè¿™é‡Œæ˜¯ä¸¤å¤§æ–‡æ˜çš„äº¤æ±‡ç‚¹ã€‚ä½ å¯ä»¥é€‰æ‹©ä¼ ç»Ÿçš„ä¿®çœŸä¹‹è·¯ï¼Œç‚¼æ°”ç­‘åŸºé‡‘ä¸¹å…ƒå©´ï¼›ä¹Ÿå¯ä»¥å­¦ä¹ è¥¿æ–¹çš„é­”æ³•ä½“ç³»ï¼Œæˆä¸ºå…ƒç´ æ³•å¸ˆæˆ–æ˜¯æ­»çµæœ¯å£«ã€‚æ›´æœ‰é‡å¿ƒè€…ï¼Œè¯•å›¾èåˆä¸¤ç§ä½“ç³»ï¼Œåˆ›é€ å‰æ‰€æœªæœ‰çš„"é­”ä¿®"ä¹‹é“ã€‚\nè¿™ä¸ªä¸–ç•Œå……æ»¡äº†æœºé‡ä¸å±é™©ã€‚å¤è€çš„é¾™æ—ç›˜è¸åœ¨çµè„‰ä¹‹ä¸Šï¼Œç²¾çµç‹å›½å®ˆæŠ¤ç€ä¸–ç•Œæ ‘çš„ç§˜å¯†ï¼ŒçŸ®äººåœ¨åœ°åº•æŒ–æ˜ç€é­”æ™¶çŸ¿è„‰ï¼Œè€Œäººç±»å¸å›½åˆ™åœ¨ä¸¤å¤§ä½“ç³»çš„ç¢°æ’ä¸­å¯»æ‰¾å¹³è¡¡ã€‚é­”æ³•å­¦é™¢çš„å­¦ç”Ÿå¯èƒ½ä¼šä¸ä¿®çœŸå®—é—¨çš„å¼Ÿå­å‘ç”Ÿå†²çªï¼Œå¤è€çš„ä¿®å£«å¯èƒ½éœ€è¦é¢å¯¹æŒæ¡ç¦å’’çš„å¤§é­”æ³•å¸ˆã€‚åœ¨è¿™ä¸ªèåˆä¸å†²çªå¹¶å­˜çš„æ—¶ä»£ï¼Œä½ å°†ç‹¬è‡ªæ¢ç´¢ä¸¤ç§åŠ›é‡çš„å¥¥ç§˜ï¼Œå¯»æ‰¾è¶…è¶Šæé™çš„å¯èƒ½ã€‚'},{id:5,name:"æ´ªè’æœ«ä¸–",era:"æœ«æ³•æ—¶ä»£ç¬¬ä¸‰åƒçºª",description:'è¿™æ˜¯ä¸€ä¸ªåŠ›é‡ä½“ç³»å‡‹é›¶çš„æœ«ä¸–ã€‚è¿œå¤æ—¶æœŸï¼Œç¥é­”æ¨ªè¡Œï¼Œå¤§èƒ½è€…æ‰‹æŒæ˜Ÿè¾°ã€è„šè¸è™šç©ºã€‚ç„¶è€Œï¼Œéšç€ä¸€åœºå¸­å·æ•´ä¸ªå¤§é™†çš„"å¤©é“æµ©åŠ«"ï¼Œçµæ°”é€æ¸æ¯ç«­ï¼Œæ›¾ç»æ— æ•Œçš„ä¿®çœŸä½“ç³»å·²ç»æ”¯ç¦»ç ´ç¢ã€‚å¦‚ä»Šçš„ä¸–ç•Œï¼Œå·²æ˜¯æœ«æ³•æ—¶ä»£çš„ç¬¬ä¸‰åƒå¹´ã€‚\nä½ ç”Ÿäºè¿™ä¸ªè¡°è´¥çš„æ—¶ä»£ï¼Œçµè„‰æ¯ç«­ã€å¤©æåœ°å®è¿‘ä¹ç»è¿¹ã€‚æ›¾ç»è¾‰ç…Œçš„ä»™é—¨å¤§å¤šå·²æˆåºŸå¢Ÿï¼Œå”¯æœ‰å°‘æ•°ä¼ æ‰¿å°šå­˜ï¼Œè‹Ÿå»¶æ®‹å–˜ã€‚ä¿®è¡Œä¹‹è·¯è‰°éš¾æ— æ¯”ï¼Œç‚¼æ°”éƒ½éœ€è¦æ•°åå¹´è‹¦åŠŸã€‚ä½†æ­£å› å¦‚æ­¤ï¼Œè¿™æ˜¯ä¸€ä¸ªå›å½’æœ¬çœŸçš„æ—¶ä»£â€”â€”æ²¡æœ‰æ·å¾„ï¼Œæ²¡æœ‰å¤–ä¸¹ï¼Œåªæœ‰æœ€æœ´ç´ çš„è‹¦ä¿®å’Œç£¨ç ºã€‚\næœ«æ³•æ—¶ä»£çš„æ®‹é…·åœ¨äºï¼Œæ¯ä¸€æ¬¡çªç ´éƒ½å¯èƒ½æ˜¯ç”Ÿæ­»åŠ«ã€‚èµ„æºç¨€ç¼ºï¼Œå¼ºè€…ä¸ºäº†ä¸€æ ªçµè‰å¯ä»¥è¡€æ´—ä¸€åº§åŸã€‚æ—¶é—´åœ¨è¿™é‡Œå˜å¾—æ›´åŠ æ²‰é‡ï¼Œä¿®å£«é—­å…³æ•°åå¹´é†’æ¥ï¼Œå¯èƒ½å‘ç°æ•´ä¸ªå®—é—¨å·²ç»è¦†ç­ã€‚è¿™æ˜¯ä¸€ä¸ªé€‚è€…ç”Ÿå­˜çš„æ—¶ä»£ï¼Œä¹Ÿæ˜¯æœ€è€ƒéªŒé“å¿ƒçš„æ—¶ä»£ã€‚'},{id:6,name:"æ˜Ÿæµ·ä¿®ä»™",era:"æ˜Ÿé™…å¤§èˆªæµ·æ—¶ä»£",description:'ä¿®çœŸæ–‡æ˜å·²ç»çªç ´äº†æ˜Ÿçƒçš„æŸç¼šï¼Œè¸å…¥æ— å æ˜Ÿæµ·ã€‚æ•°ä¸‡å¹´å‰ï¼Œç¬¬ä¸€æ‰¹æ¸¡åŠ«æœŸå¤§èƒ½é£å‡å¤±è´¥ï¼Œå´æ„å¤–å‘ç°äº†å®‡å®™æ·±å¤„çš„æ— æ•°ä¿®çœŸæ˜Ÿçƒï¼Œå¼€å¯äº†æ˜Ÿé™…å¤§èˆªæµ·æ—¶ä»£ã€‚\nåœ¨è¿™ä¸ªå®‡å®™ä¸­ï¼Œæ¯é¢—æ˜Ÿçƒéƒ½æœ‰ç‹¬ç‰¹çš„ä¿®çœŸä½“ç³»å’ŒåŠ›é‡æºæ³‰ã€‚æœ‰çš„æ˜Ÿçƒçµæ°”æµ“éƒå¦‚æµ·ï¼Œæœ‰çš„æ˜Ÿçƒåˆ™å­•è‚²ç€ç‰¹æ®Šçš„"æ˜Ÿè¾°ä¹‹åŠ›"ã€‚ä¿®å£«ä»¬é©¾é©­é£èˆŸç©¿æ¢­æ˜Ÿæµ·ï¼Œæ¢ç´¢é—è¿¹ï¼Œäº‰å¤ºèµ„æºã€‚æ˜Ÿé™…åŠ¿åŠ›æ—ç«‹ï¼Œå¤è€çš„ä¿®çœŸå®—é—¨æ¼”å˜æˆè·¨æ˜Ÿç³»çš„ä¿®çœŸå¸å›½ã€‚\nè¿™é‡Œçš„æ—¶é—´è·¨åº¦æ›´åŠ ææ€–ã€‚ç‚¼è™šæœŸä¿®å£«é—­å…³ç™¾å¹´ï¼Œå¯èƒ½é†’æ¥æ—¶å·²ç»è·¨è¶Šäº†æ•°å…‰å¹´ã€‚æ˜Ÿé™…èˆªè¡ŒåŠ¨è¾„æ•°åå¹´ï¼Œä¿®å£«ä»¬åœ¨é£èˆŸä¸­ä¿®ç‚¼ã€çªç ´ã€è¡°è€ã€‚æœ‰äººè€—å°½åƒå¹´å¯¿å…ƒï¼Œä¹Ÿæ— æ³•åˆ°è¾¾ä¼ è¯´ä¸­çš„"é“æºæ˜Ÿ"ã€‚è¿™æ˜¯ä¸€ä¸ªå­¤ç‹¬çš„æ—¶ä»£ï¼Œæ˜Ÿæµ·èŒ«èŒ«ï¼Œé“è·¯æ¼«é•¿ï¼Œè€Œæ—¶é—´æ˜¯æœ€æ— æƒ…çš„æ•Œäººã€‚'},{id:7,name:"æ­¦é“è‹ç©¹",era:"æ­¦é“çºªå…ƒ",description:"è¿™æ˜¯ä¸€ä¸ªä»¥æ­¦å…¥é“çš„ä¸–ç•Œï¼Œæ²¡æœ‰ä¼ ç»Ÿçš„çµæ°”ä¿®ç‚¼ï¼Œåªæœ‰çº¯ç²¹çš„æ­¦é“ä½“ç³»ã€‚åœ¨è¿™é‡Œï¼ŒåŠ›é‡æ¥æºäºå¯¹èº«ä½“çš„æè‡´æ·¬ç‚¼å’Œå¯¹æ­¦é“çœŸæ„çš„æ„Ÿæ‚Ÿã€‚æ‹³ç ´å±±æ²³ã€æŒç¢è™šç©ºï¼Œæ˜¯æ­¦è€…çš„ç»ˆæè¿½æ±‚ã€‚\næ­¦é“ä¿®è¡Œåˆ†ä¸ºæ·¬ä½“ã€å‡æ°”ã€é€šç„ã€åŒ–çœŸã€ç ´è™šã€ç™»å¤©å…­å¤§å¢ƒç•Œã€‚æ¯ä¸€æ¬¡çªç ´éƒ½éœ€è¦ç»å†ç”Ÿæ­»ç£¨ç ºï¼Œæ²¡æœ‰ä¸¹è¯æ·å¾„ï¼Œåªæœ‰è¡€ä¸æ±—çš„æµ‡çŒã€‚æ·¬ä½“æœŸéœ€è¦åå¹´æ‰“ç†¬ç­‹éª¨ï¼Œå‡æ°”æœŸéœ€è¦ä¸‰åå¹´å‡ç»ƒçœŸæ°”ï¼Œé€šç„æœŸéœ€è¦ç™¾å¹´æ„Ÿæ‚Ÿæ­¦é“çœŸæ„ã€‚\nè¿™ä¸ªä¸–ç•ŒåŒæ ·éµå¾ªæ—¶é—´çš„æ®‹é…·æ³•åˆ™ã€‚æ­¦è€…é—­å…³è‹¦ä¿®ï¼Œå‡ºå…³æ—¶æ•…äººå·²è€ã€‚é«˜é˜¶æ­¦è€…ä¸€æ¬¡ç”Ÿæ­»æˆ˜ï¼Œå¯èƒ½å°±æ˜¯æ•°åå¹´å¯¿å‘½çš„ä»£ä»·ã€‚æ­¦é“å®—é—¨çš„å…´è¡°æ›´è¿­ï¼Œä¸è¿‡æ˜¯ç™¾å¹´ä¸€ç¬ã€‚è¿™é‡Œæ²¡æœ‰é•¿ç”Ÿä¹‹é“ï¼Œåªæœ‰ç‡ƒçƒ§ç”Ÿå‘½è¿½æ±‚æ­¦é“æè‡´çš„ä¿®ç½—ä¹‹è·¯ã€‚"},{id:8,name:"è¯¡å¼‚ä¸–ç•Œ",era:"æ··æ²Œçºªå…ƒ",description:'è¿™æ˜¯ä¸€ä¸ªè¢«è¯¡å¼‚åŠ›é‡ä¾µèš€çš„æ‰­æ›²ä¸–ç•Œã€‚æ­£å¸¸çš„ä¿®çœŸä½“ç³»å·²ç»å´©åï¼Œå–è€Œä»£ä¹‹çš„æ˜¯èåˆäº†è¯¡å¼‚ä¹‹åŠ›çš„"ç•¸å˜ä¿®è¡Œ"ã€‚ä¿®å£«ä»¬ä¸å†å•çº¯è¿½æ±‚å¢ƒç•Œçªç ´ï¼Œè€Œæ˜¯åœ¨ä¿æŒç†æ™ºä¸è·å¾—åŠ›é‡ä¹‹é—´èµ°é’¢ä¸ã€‚\nè¯¡å¼‚ä¹‹åŠ›æ— å¤„ä¸åœ¨ï¼Œæ±¡æŸ“ç€çµè„‰ã€è…èš€ç€åŠŸæ³•ã€æ‰­æ›²ç€ç”Ÿçµã€‚ä¼ ç»Ÿçš„ä¿®çœŸè·¯å·²ç»èµ°ä¸é€šï¼Œä¿®å£«ä»¬å¿…é¡»å­¦ä¼šä¸è¯¡å¼‚å…±å­˜ï¼Œç”šè‡³ä¸»åŠ¨èåˆè¯¡å¼‚ä¹‹åŠ›ã€‚ä½†è¿™æ¡è·¯å……æ»¡ä»£ä»·â€”â€”æ¯ä¸€æ¬¡åŠ›é‡æå‡ï¼Œéƒ½ä¼´éšç€ç†æ™ºçš„å‰Šå¼±å’Œèº«ä½“çš„å¼‚åŒ–ã€‚\næ—¶é—´åœ¨è¿™é‡Œå˜å¾—æ›´åŠ å‹è¿«ã€‚è¯¡å¼‚ä¾µèš€ä¸ä¼šåœæ­¢ï¼Œä¿®å£«ä»¬å¿…é¡»åœ¨å®Œå…¨ç–¯ç‹‚å‰çªç ´åˆ°æ›´é«˜å¢ƒç•Œã€‚æœ‰äººé—­å…³åå¹´ï¼Œå‡ºæ¥æ—¶å·²ç»å¼‚åŒ–æˆæ€ªç‰©ã€‚æœ‰äººè‹¦ä¿®ç™¾å¹´ï¼Œç»ˆäºç™»é¡¶ï¼Œå´å‘ç°è‡ªå·±å·²ç»å¤±å»äº†äººæ€§ã€‚è¿™æ˜¯ä¸€ä¸ªç»æœ›çš„æ—¶ä»£ï¼Œä¹Ÿæ˜¯æœ€è€ƒéªŒæ„å¿—çš„ä¿®è¡Œä¹‹è·¯ã€‚'},{id:9,name:"æ–—ç½—å¤§é™†",era:"é­‚å¸ˆçºªå…ƒ",description:"è¿™æ˜¯ä¸€ä¸ªä»¥æ­¦é­‚ä¸ºæ ¸å¿ƒçš„å¥‡å¹»ä¸–ç•Œã€‚åœ¨è¿™é‡Œï¼Œæ¯ä¸ªäººéƒ½æ‹¥æœ‰ä¸ç”Ÿä¿±æ¥çš„æ­¦é­‚â€”â€”æœ‰çš„æ˜¯å™¨æ­¦é­‚å¦‚æ˜Šå¤©é”¤ã€ä¸ƒæ€å‰‘ï¼Œæœ‰çš„æ˜¯å…½æ­¦é­‚å¦‚è“é“¶è‰ã€é‚ªçœ¸ç™½è™ã€‚æ­¦é­‚çš„å¼ºå¼±å†³å®šäº†ä¸€ä¸ªäººçš„èµ·ç‚¹ï¼Œä½†çœŸæ­£çš„å¼ºè€…è¿˜éœ€è¦é€šè¿‡çŒæ€é­‚å…½ï¼Œå¸æ”¶é­‚ç¯æ¥æå‡å®åŠ›ã€‚\n\næ–—ç½—å¤§é™†çš„åŠ›é‡ä½“ç³»åˆ†ä¸ºé­‚å¸ˆã€é­‚å°Šã€é­‚å®—ã€é­‚ç‹ã€é­‚å¸ã€é­‚åœ£ã€é­‚æ–—ç½—ã€å°å·æ–—ç½—ä¹å¤§ç­‰çº§ï¼Œæ¯æå‡åçº§éœ€è¦å¸æ”¶ä¸€æšé­‚ç¯ã€‚é­‚ç¯åˆ†ä¸ºåå¹´ã€ç™¾å¹´ã€åƒå¹´ã€ä¸‡å¹´ã€åä¸‡å¹´äº”ç§ï¼Œé­‚ç¯å¹´é™è¶Šé«˜ï¼Œæä¾›çš„é­‚æŠ€è¶Šå¼ºå¤§ã€‚ä½†å¸æ”¶è¿‡å¼ºçš„é­‚ç¯ä¹Ÿå¯èƒ½å¯¼è‡´èº«ä½“çˆ†ä½“è€Œäº¡ã€‚\n\nåœ¨è¿™ä¸ªä¸–ç•Œï¼Œæ­¦é­‚æ®¿ç»Ÿæ²»ç€æ•´ä¸ªå¤§é™†ï¼Œä¸¤å¤§å¸å›½å¤©æ–—ä¸æ˜Ÿç½—åˆ†åº­æŠ—ç¤¼ï¼Œå„å¤§å®—é—¨å¦‚æ˜Šå¤©å®—ã€ä¸ƒå®ç‰ç’ƒå®—ç­‰æš—æµæ¶ŒåŠ¨ã€‚é­‚å¸ˆæ˜¯è¿™ä¸ªä¸–ç•Œæœ€å°Šè´µçš„èŒä¸šï¼Œä½†æˆä¸ºå¼ºè€…çš„é“è·¯å……æ»¡å‡¶é™©â€”â€”æ¯ä¸€æ¬¡çŒæ€é­‚å…½éƒ½æ˜¯ç”Ÿæ­»ææ–—ï¼Œæ¯ä¸€æ¬¡å¸æ”¶é­‚ç¯éƒ½å¯èƒ½èµ°ç«å…¥é­”ã€‚\n\næ—¶é—´åœ¨è¿™é‡ŒåŒæ ·æ®‹é…·ã€‚å°å·æ–—ç½—å¯¿å‘½ä¸è¿‡ä¸‰ç™¾å¹´ï¼Œè€Œè¦ä»æ™®é€šé­‚å¸ˆä¿®ç‚¼åˆ°å°å·æ–—ç½—ï¼Œè‡³å°‘éœ€è¦æ•°åå¹´ç”šè‡³ç™¾å¹´è‹¦ä¿®ã€‚é­‚å…½æ£®æ—æ·±å¤„å±æœºå››ä¼ï¼Œåä¸‡å¹´é­‚å…½æ›´æ˜¯å¯ä»¥åŒ–å½¢ä¸ºäººï¼Œæ‹¥æœ‰ä¸é€Šäºå°å·æ–—ç½—çš„å®åŠ›ã€‚è¿™æ˜¯ä¸€ä¸ªå¤©æ‰è¾ˆå‡ºçš„æ—¶ä»£ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¼±è‚‰å¼ºé£Ÿçš„ä¿®ç½—åœºã€‚"},{id:10,name:"å¤œçš„å‘½åæœ¯",era:"è”é‚¦å†776å¹´",description:"è¿™æ˜¯ä¸€ä¸ªè¢«è”é‚¦é«˜å¢™æ‰€åœˆç¦çš„èµ›åšæœ‹å…‹ä¸–ç•Œã€‚å·¨å‹åŸå¸‚åœ¨æ°¸æ’çš„é»‘å¤œä¸éœ“è™¹ä¸­å‘¼å¸ï¼Œæœºæ¢°ç¥æ˜åœ¨æ•°æ®ç½‘ç»œä¸­ä¿¯ç°ä¼—ç”Ÿï¼ŒåŸºå› é”é“¾æ˜¯æ¯ä¸ªäººä¸ç”Ÿä¿±æ¥çš„æ·é”ã€‚ä½ æ˜¯åœ¨è¿™åº§å›šç¬¼ä¸­é•¿å¤§çš„æ™®é€šäººï¼Œç›´åˆ°æŸä¸€å¤©ï¼Œä½ æ„å¤–è§‰é†’äº†è¶…å‡¡åºåˆ—çš„åŠ›é‡ã€‚\n\nåœ¨è¿™é‡Œï¼ŒåŠ›é‡æ„å‘³ç€ä¸€åˆ‡ã€‚è´¢é˜€ã€å¸®æ´¾ã€é›‡ä½£å…µã€è§‰é†’è€…â€¦â€¦æ— æ•°åŠ¿åŠ›åœ¨åŸå¸‚çš„é˜´å½±ä¸­ç›˜æ ¹é”™èŠ‚ã€‚ä¸ºäº†æ‰“ç ´åŸºå› çš„æŸç¼šï¼Œä¸ºäº†åœ¨æ®‹é…·çš„æ³•åˆ™ä¸‹æ´»ä¸‹å»ï¼Œä½ å¿…é¡»ä¸æ–­æˆ˜æ–—ã€è¿›åŒ–ï¼Œæ”€ç™»è¶…å‡¡åºåˆ—çš„é˜¶æ¢¯ã€‚\n\nè¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰é€€è·¯çš„ä¸–ç•Œã€‚æ¯ä¸€æ¬¡é€‰æ‹©éƒ½å¯èƒ½é€šå‘æ­»äº¡ï¼Œæ¯ä¸€æ¬¡æˆ˜æ–—éƒ½æ˜¯åœ¨ä¸å‘½è¿è±ªèµŒã€‚ä½ å°†ç‹¬è‡ªé¢å¯¹è¿™ä¸ªå……æ»¡å‹è¿«ä¸æœºé‡çš„èµ›åšä¸–ç•Œï¼Œæ¢ç´¢ç¦å¿Œä¹‹åœ°çš„ç§˜å¯†ï¼Œæˆä¸ºé£Ÿç‰©é“¾çš„é¡¶ç«¯ï¼Œæˆ–è€…ï¼Œè¢«æ—¶ä»£çš„æ´ªæµå½»åº•åå™¬ã€‚"}],r=[{id:1,name:"åºŸæŸ´",description:"èµ„è´¨å¹³å¹³ï¼Œæ¯«æ— å‡ºå¥‡ä¹‹å¤„ï¼Œä»™è·¯æ¸ºèŒ«ã€‚",total_points:10,rarity:1,color:"#808080"},{id:2,name:"å‡¡äºº",description:"èŠ¸èŠ¸ä¼—ç”Ÿä¸­çš„ä¸€å‘˜ï¼Œä¸å¥½ä¸åï¼Œæœ‰ç¼˜å¯å…¥ä»™é€”ã€‚",total_points:20,rarity:2,color:"#FFFFFF"},{id:3,name:"ä¿Šæ°",description:"ç™¾é‡ŒæŒ‘ä¸€çš„äººæ‰ï¼Œç•¥æœ‰ä¸å‡¡ï¼Œåœ¨å®—é—¨ä¸­å¯ä¸ºå†…é—¨å¼Ÿå­ã€‚",total_points:30,rarity:3,color:"#4169E1"},{id:4,name:"å¤©éª„",description:"åƒå¹´éš¾é‡çš„å¥‡æ‰ï¼Œæ³¨å®šè€€çœ¼ï¼Œæ˜¯å®—é—¨æœªæ¥çš„å¸Œæœ›ã€‚",total_points:40,rarity:4,color:"#9932CC"},{id:5,name:"å¦–å­½",description:"ä¸‡å¤æ— ä¸€çš„æ€ªç‰©ï¼Œé€†å¤©è€Œè¡Œï¼Œå¯ä¸ä¸Šå¤ç¥é­”æ¯”è‚©ã€‚",total_points:50,rarity:5,color:"#FFD700"},{id:6,name:"è°ªä»™è½¬ä¸–",description:"ä»™äººè½¬ä¸–ï¼Œå¤©ç”Ÿé“èƒï¼Œè®°å¿†è’™å°˜ä½†çµæ€§ä¸æ˜§ï¼Œä¿®è¡Œä¸€æ—¥åƒé‡Œã€‚",total_points:60,rarity:6,color:"#FF4500"},{id:7,name:"å¤§é“ä¹‹å­",description:"å¤§é“åŒ–èº«ï¼Œå¤©ç”Ÿä¸é“ç›¸åˆï¼Œä¸‡æ³•çš†é€šï¼Œæ˜¯æ­¤çºªå…ƒçš„åº”åŠ«ä¹‹äººã€‚",total_points:70,rarity:7,color:"#DAA520"}],o=[{id:1,name:"å±±é‡é—å­¤",description:"è‡ªå¹¼åœ¨å±±é‡ä¸­é•¿å¤§ï¼Œä¸çŒ›å…½ä¸ºä¼´ï¼Œç£¨ç»ƒå‡ºåšéŸ§çš„æ„å¿—å’Œè¿‡äººçš„ä½“é­„ã€‚",talent_cost:0,attribute_modifiers:{root_bone:1},rarity:3},{id:2,name:"ä¹¦é¦™é—¨ç¬¬",description:"å‡ºèº«äºå®˜å®¦ä¸–å®¶ï¼Œé¥±è¯»è¯—ä¹¦ï¼Œå¯¹å¤©åœ°è‡³ç†æœ‰è¶…ä¹å¸¸äººçš„ç†è§£åŠ›ã€‚",talent_cost:2,attribute_modifiers:{comprehension:2},rarity:3},{id:3,name:"å•†è´¾ä¹‹å­",description:"ç”Ÿäºå¯Œè´µä¹‹å®¶ï¼Œç²¾é€šäººæƒ…ä¸–æ•…ï¼Œå¤„äº‹åœ†æ»‘ï¼Œé­…åŠ›éå‡¡ã€‚",talent_cost:2,attribute_modifiers:{charm:2},rarity:3},{id:4,name:"å°†é—¨ä¹‹å",description:"åå°†çš„åä»£ï¼Œè¡€è„‰ä¸­æµæ·Œç€å‹‡æ­¦ä¸ç…æ°”ï¼Œå¿ƒæ€§åšå®šã€‚",talent_cost:3,attribute_modifiers:{temperament:2,root_bone:1},rarity:3},{id:5,name:"æ•£ä¿®ä¼ äºº",description:"ä½ çš„å¸ˆçˆ¶æ˜¯ä¸€ä½æ¸¸æˆé£å°˜çš„å¼ºå¤§æ•£ä¿®ï¼Œä½ ç»§æ‰¿äº†ä»–çš„éƒ¨åˆ†è¡£é’µå’Œè§è¯†ã€‚",talent_cost:4,attribute_modifiers:{comprehension:1,temperament:1},rarity:4},{id:6,name:"é­”é“å§åº•",description:"ä½ å‡ºèº«åé—¨æ­£æ´¾ï¼Œå´è¢«æ´¾å¾€é­”é“æ‰§è¡Œå§åº•ä»»åŠ¡ï¼Œå¿ƒæ€§è¿œè¶…å¸¸äººã€‚",talent_cost:1,attribute_modifiers:{temperament:3},rarity:4},{id:7,name:"é‡ç”Ÿè€…",description:"ä½ ä¿ç•™ç€å‰ä¸–çš„è®°å¿†ï¼Œè™½ç„¶ä¿®ä¸ºå°½å¤±ï¼Œä½†å¯¹åŠŸæ³•å’Œæœªæ¥çš„å¤§äº‹äº†å¦‚æŒ‡æŒã€‚",talent_cost:5,attribute_modifiers:{comprehension:2,luck:1},rarity:5},{id:8,name:"ä»™äººåè£”",description:"ä½ çš„è¡€è„‰ä¸­æµæ·Œç€ç¨€è–„çš„ä»™äººä¹‹è¡€ï¼Œå¤©ç”Ÿçµæ€§åè¶³ï¼Œä¿®ç‚¼é€Ÿåº¦ç•¥å¿«äºå¸¸äººã€‚",talent_cost:6,attribute_modifiers:{spirit:2,root_bone:1},rarity:5},{id:9,name:"å¤ºèˆè€æ€ª",description:"ä½ æ˜¯ä¸€åå¤ºèˆé‡ç”Ÿçš„è€æ€ªç‰©ï¼Œè™½ç„¶å æ®äº†å¹´è½»çš„è‚‰ä½“ï¼Œä½†çµé­‚ä¸­è•´å«ç€åºå¤§çš„ç¥è¯†åŠ›é‡ã€‚",talent_cost:7,attribute_modifiers:{comprehension:3,temperament:-1},rarity:5},{id:10,name:"å±±ç¥åº™ç¥",description:"ä½ ä»å°åœ¨å±±ç¥åº™é•¿å¤§ï¼Œæ—¥å¤œä¸é¦™ç«ä¸ºä¼´ï¼Œç¥é­‚å—åˆ°æ»‹å…»ï¼Œå¯¹é¬¼ç¥ä¹‹äº‹æœ‰ç‰¹æ®Šæ„Ÿåº”ã€‚",talent_cost:2,attribute_modifiers:{spirit:2},rarity:3},{id:11,name:"æ¸”å®¶å°‘å¹´",description:"å¸¸å¹´åœ¨æ±Ÿæ²³æ¹–æµ·ä¸­è®¨ç”Ÿæ´»ï¼Œæ°´æ€§æä½³ï¼Œä½“é­„å¼ºå¥ã€‚",talent_cost:1,attribute_modifiers:{root_bone:2},rarity:2},{id:12,name:"ç‹æœçš‡å­",description:"ç”Ÿäºå‡¡äººç‹æœçš„æƒåŠ›ä¹‹å·…ï¼Œè‡ªå¹¼äº«å—é”¦è¡£ç‰é£Ÿå’Œæœ€å¥½çš„æ•™è‚²ï¼Œä½†ä¸ä¿®ä»™ç•Œçš„æ¥è§¦è¾ƒå°‘ã€‚",talent_cost:3,attribute_modifiers:{charm:2,temperament:1},rarity:4},{id:13,name:"è¯ç«¥å‡ºèº«",description:"è‡ªå¹¼åœ¨ä¸¹æˆ¿é•¿å¤§ï¼Œæ—¥å¤œä¸çµè¯ä¸ºä¼´ï¼Œå¯¹è¯ç†æœ‰è¶…å¸¸çš„æ•æ„Ÿã€‚",talent_cost:2,attribute_modifiers:{spirit:1,comprehension:1},rarity:3},{id:14,name:"é˜µæ³•å­¦å¾’",description:"å¸ˆä»é˜µæ³•å¤§å¸ˆï¼Œè‡ªå°ç ”ä¹ é˜µæ³•çº¹è·¯ï¼Œå¯¹ç©ºé—´æ„ŸçŸ¥æå…¶æ•é”ã€‚",talent_cost:3,attribute_modifiers:{comprehension:2,spirit:1},rarity:4},{id:15,name:"çŒå¦–ä¸–å®¶",description:"ç¥–ä¸Šä¸–ä»£ä»¥çŒå¦–ä¸ºç”Ÿï¼Œè¡€è„‰ä¸­è•´å«å¾®å¼±çš„å¦–æ—ä¹‹åŠ›ï¼Œå¯¹å¦–æ°”æå…¶æ•æ„Ÿã€‚",talent_cost:4,attribute_modifiers:{root_bone:2,temperament:1},rarity:4},{id:16,name:"æµæµªä¹ä¸",description:"è‡ªå¹¼æµè½è¡—å¤´ï¼Œé¥±ç»é£éœœï¼Œç£¨ç»ƒå‡ºè¶…å‡¡çš„æ„å¿—å’Œé€‚åº”èƒ½åŠ›ã€‚",talent_cost:-1,attribute_modifiers:{temperament:2,luck:-1},rarity:2},{id:17,name:"çŸ¿å¥´ä½™ç”Ÿ",description:"æ›¾æ˜¯çµçŸ¿å¥´éš¶ï¼Œåœ¨æš—æ— å¤©æ—¥çš„çŸ¿æ´ä¸­æŒ£æ‰æ±‚ç”Ÿï¼Œä½“é­„å¼ºå¥ä½†ç¼ºä¹çµæ€§ã€‚",talent_cost:0,attribute_modifiers:{root_bone:3,spirit:-1},rarity:2},{id:18,name:"ç”»å¸ˆä¼ äºº",description:"å¸ˆæ‰¿åå®¶ï¼Œç²¾é€šä¸¹é’ä¹‹é“ï¼Œå¯¹ç¬¦ç®“æœ‰å¤©ç”Ÿçš„ç†è§£åŠ›ã€‚",talent_cost:3,attribute_modifiers:{comprehension:1,charm:2},rarity:3},{id:19,name:"å¤å¢“å®ˆé™µäºº",description:"ä¸–ä»£å®ˆæŠ¤å¤å¢“ï¼Œé•¿æœŸä¸æ­»æ°”é˜´æ°”æ‰“äº¤é“ï¼Œå¯¹é¬¼é“æœ‰ç‹¬ç‰¹æ„Ÿæ‚Ÿã€‚",talent_cost:2,attribute_modifiers:{temperament:2,spirit:1},rarity:4},{id:20,name:"æˆç­ä¼¶äºº",description:"è‡ªå¹¼å­¦æˆï¼Œæ“…é•¿å¯Ÿè¨€è§‚è‰²ï¼Œé­…åŠ›éå‡¡ï¼Œä½†ä¿®é“ä¹‹å¿ƒä¸å¤Ÿåšå®šã€‚",talent_cost:1,attribute_modifiers:{charm:3,temperament:-1},rarity:2},{id:21,name:"æ˜Ÿè±¡ä¸–å®¶",description:"å®¶æ—ä¸–ä»£è§‚æ˜Ÿæµ‹è¿ï¼Œä½ è‡ªå°ç ”ä¹ æ˜Ÿè±¡ä¹‹æœ¯ï¼Œå¯¹å¤©åœ°è§„å¾‹æœ‰ç‹¬ç‰¹ç†è§£ã€‚",talent_cost:5,attribute_modifiers:{comprehension:2,luck:2},rarity:5},{id:22,name:"éƒ¨è½è¨æ»¡",description:"å‡ºèº«è›®è’éƒ¨è½ï¼Œç»§æ‰¿äº†è¨æ»¡çš„è¡€è„‰ï¼Œå¯¹è‡ªç„¶ä¹‹åŠ›æœ‰å¤©ç”Ÿçš„äº²å’Œã€‚",talent_cost:4,attribute_modifiers:{spirit:2,root_bone:1},rarity:4},{id:23,name:"å­¤å²›é—æ°‘",description:"ç”Ÿäºä¸ä¸–éš”ç»çš„å­¤å²›ï¼Œä¿ç•™ç€ä¸Šå¤æ—¶ä»£çš„åŸå§‹ä¿®è¡Œæ³•é—¨ã€‚",talent_cost:3,attribute_modifiers:{temperament:2,comprehension:1},rarity:4},{id:24,name:"äº¡å›½é—å­¤",description:"å›½ç ´å®¶äº¡ï¼Œå†ç»è‹¦éš¾ï¼Œå¿ƒæ€§åšéŸ§å¦‚é“ï¼Œä½†èƒŒè´Ÿç€æ²‰é‡çš„ä»‡æ¨ã€‚",talent_cost:2,attribute_modifiers:{temperament:3,luck:-1},rarity:3}],i=[{id:1,name:"é‡‘çµæ ¹",tier:"ä¸Šå“",description:"é‡‘æ›°ä»é©ï¼Œæ“æ§é‡‘é“ï¼Œé”‹é”æ— åŒ¹ã€‚ä¿®è¡Œé‡‘ç³»åŠŸæ³•äº‹åŠåŠŸå€ï¼Œæ˜¯å¤©ç”Ÿçš„å‰‘ä¿®æˆ–åˆ€å®¢èƒšå­ï¼Œæ”»å‡»æ€§æå¼ºã€‚",cultivation_speed:"1.6x",special_effects:["é‡‘ç³»æ³•æœ¯å¨åŠ›+50%","å™¨ç‰©äº²å’Œ+30%","é‡‘å±æ„ŸçŸ¥"],base_multiplier:1.6,talent_cost:10,rarity:3},{id:2,name:"æœ¨çµæ ¹",tier:"ä¸Šå“",description:"æœ¨æ›°æ›²ç›´ï¼Œäº²å’Œè‰æœ¨ï¼Œç”Ÿæœºç›ç„¶ã€‚ä¿®è¡Œæœ¨ç³»åŠŸæ³•æå¿«ï¼Œæ“…é•¿æ²»ç–—ã€æ§åˆ¶ï¼Œä¸”å¯¹çµæ¤æœ‰å¤©ç”Ÿçš„äº²å’ŒåŠ›ã€‚",cultivation_speed:"1.6x",special_effects:["æœ¨ç³»æ³•æœ¯å¨åŠ›+50%","ç”Ÿå‘½åŠ›æ¢å¤+40%","æ¤ç‰©æ²Ÿé€š"],base_multiplier:1.6,talent_cost:10,rarity:3},{id:3,name:"æ°´çµæ ¹",tier:"ä¸Šå“",description:"æ°´æ›°æ¶¦ä¸‹ï¼Œå¾¡æ°´ä¹‹è„‰ï¼Œç»µå»¶ä¸ç»ã€‚ä¿®è¡Œæ°´ç³»åŠŸæ³•ï¼Œæ³•åŠ›æ‚ é•¿ï¼Œå˜åŒ–å¤šç«¯ï¼Œé€‚åº”æ€§æå¼ºã€‚",cultivation_speed:"1.6x",special_effects:["æ°´ç³»æ³•æœ¯å¨åŠ›+50%","çµæ°”æ¢å¤+40%","æ°´ä½“æ„ŸçŸ¥"],base_multiplier:1.6,talent_cost:10,rarity:3},{id:4,name:"ç«çµæ ¹",tier:"ä¸Šå“",description:"ç«æ›°ç‚ä¸Šï¼Œå¤©ç”Ÿç«è„‰ï¼Œç„šå°½å…«è’ã€‚ä¿®è¡Œç«ç³»åŠŸæ³•ï¼Œå¨åŠ›ç»ä¼¦ï¼Œçˆ†å‘åŠ›å¼ºï¼Œæ˜¯ç‚¼ä¸¹å¸ˆçš„ç»ä½³å¤©èµ‹ã€‚",cultivation_speed:"1.6x",special_effects:["ç«ç³»æ³•æœ¯å¨åŠ›+50%","çˆ†å‘ä¼¤å®³+60%","ç«ç„°å…ç–«"],base_multiplier:1.6,talent_cost:10,rarity:3},{id:5,name:"åœŸçµæ ¹",tier:"ä¸Šå“",description:"åœŸçˆ°ç¨¼ç©‘ï¼Œå¤§åœ°ä¹‹å­ï¼Œåšå¾·è½½ç‰©ã€‚ä¿®è¡ŒåœŸç³»åŠŸæ³•ï¼Œé˜²å¾¡æƒŠäººï¼Œç¨³å¦‚æ³°å±±ï¼Œæ˜¯å¤©ç”Ÿçš„é˜µæ³•å¸ˆææ–™ã€‚",cultivation_speed:"1.6x",special_effects:["åœŸç³»æ³•æœ¯å¨åŠ›+50%","é˜²å¾¡åŠ›+40%","å¤§åœ°æ„ŸçŸ¥"],base_multiplier:1.6,talent_cost:10,rarity:3},{id:9,name:"é‡‘çµæ ¹",tier:"ä¸­å“",description:"é‡‘è¡Œèµ„è´¨å°šå¯ï¼Œä¿®è¡Œé‡‘ç³»åŠŸæ³•æœ‰ä¸€å®šå¤©èµ‹ï¼Œè™½ä¸åŠä¸Šå“ï¼Œä½†ä¹Ÿè¿œè¶…å¸¸äººã€‚",cultivation_speed:"1.3x",special_effects:["é‡‘ç³»æ³•æœ¯å¨åŠ›+25%","å™¨ç‰©äº²å’Œ+15%"],base_multiplier:1.3,talent_cost:6,rarity:2},{id:10,name:"ç«çµæ ¹",tier:"ä¸­å“",description:"ç«è¡Œèµ„è´¨è‰¯å¥½ï¼Œå¯¹ç«ç³»åŠŸæ³•æœ‰ä¸é”™çš„äº²å’ŒåŠ›ï¼Œèƒ½å¤Ÿé¡ºåˆ©åœ°è¸ä¸Šä¿®è¡Œä¹‹è·¯ã€‚",cultivation_speed:"1.3x",special_effects:["ç«ç³»æ³•æœ¯å¨åŠ›+25%","çˆ†å‘ä¼¤å®³+30%"],base_multiplier:1.3,talent_cost:6,rarity:2},{id:11,name:"é›·çµæ ¹",tier:"æå“",description:"ä¸‡ä¸­æ— ä¸€çš„å˜å¼‚çµæ ¹ï¼Œå¤©ç”Ÿé›·ä½“ï¼Œé›·éœ†ä¸‡é’§ã€‚ä¿®è¡Œé›·ç³»åŠŸæ³•é€Ÿåº¦æå¿«ï¼Œå¨åŠ›ç»ä¼¦ï¼Œæ˜¯å¤©åŠ«çš„å® å„¿ã€‚",cultivation_speed:"2.0x",special_effects:["é›·ç³»æ³•æœ¯å¨åŠ›+80%","é›·éœ†å…ç–«","é€Ÿåº¦+50%","ç©¿é€æ”»å‡»"],base_multiplier:2,talent_cost:15,rarity:4},{id:12,name:"å†°çµæ ¹",tier:"æå“",description:"æä¸ºç½•è§çš„å˜å¼‚çµæ ¹ï¼Œå†°éœœä¹‹èº¯ï¼Œä¸‡ç‰©å‡‹é›¶ã€‚ä¿®è¡Œå†°ç³»åŠŸæ³•ï¼Œæ§åˆ¶åŠ›è¶…å‡¡ï¼Œèƒ½å†°å°åƒé‡Œã€‚",cultivation_speed:"2.0x",special_effects:["å†°ç³»æ³•æœ¯å¨åŠ›+80%","å‡é€Ÿæ•ˆæœ+100%","å†°éœœå…ç–«","ç©ºé—´å†»ç»“"],base_multiplier:2,talent_cost:15,rarity:4},{id:6,name:"æ··æ²Œçµæ ¹",tier:"ç¥å“",description:"ä¼ è¯´ä¸­çš„è‡³é«˜çµæ ¹ï¼Œä¸‡æ³•å½’ä¸€ï¼ŒåŒ…å®¹ä¸‡è±¡ã€‚å¯ä¿®è¡Œæ‰€æœ‰å±æ€§åŠŸæ³•ï¼Œæ— ç“¶é¢ˆï¼Œä½†åˆæœŸè¿›å±•ç¼“æ…¢ï¼ŒåæœŸä¸€æ—¥åƒé‡Œã€‚",cultivation_speed:"0.8x(å‰æœŸ) â†’ 2.8x(åæœŸ)",special_effects:["å…¨ç³»æ³•æœ¯äº²å’Œ","æ— å±æ€§é™åˆ¶","è¶Šé˜¶æˆ˜æ–—+50%","çªç ´æ¦‚ç‡+30%"],base_multiplier:2.8,talent_cost:25,rarity:5},{id:7,name:"å¤©å¦’ä¹‹ä½“",tier:"ç‰¹æ®Š",description:"å¤©é“æ‰€å¦’ï¼Œçµæ°”ä¸äº²ã€‚ä¿®è¡Œé€Ÿåº¦æä¸ºç¼“æ…¢ï¼Œå¸¸äººéš¾ä»¥å¿å—ã€‚ä½†ä¸€æ—¦çªç ´ï¼Œæ ¹åŸºæ— æ¯”æ‰å®ï¼Œæˆ˜åŠ›è¿œè¶…åŒé˜¶ã€‚",cultivation_speed:"0.5x",special_effects:["æ ¹åŸºæå…¶ç¨³å›º","çªç ´åå®åŠ›æš´å¢+100%","å¤©åŠ«æŠ—æ€§+80%","é€†å¤©æ”¹å‘½"],base_multiplier:.5,talent_cost:-5,rarity:4},{id:8,name:"äº”è¡Œæ‚çµæ ¹",tier:"å‡¡å“",description:"å‡¡äººä¸­æœ€å¸¸è§çš„çµæ ¹ï¼Œäº”è¡Œçš†æœ‰ï¼Œå´é©³æ‚ä¸å ªï¼Œä¿®ç‚¼é€Ÿåº¦æ…¢å¦‚é¾Ÿçˆ¬ï¼Œä»™è·¯æ¸ºèŒ«ã€‚",cultivation_speed:"1.0x",special_effects:["å¹³å‡¡ä¹‹é“","å¤§å™¨æ™šæˆ"],base_multiplier:1,talent_cost:0,rarity:1},{id:13,name:"é£çµæ ¹",tier:"ä¸‹å“",description:"è¾ƒä¸ºå¸¸è§çš„å¼‚ç§çµæ ¹ï¼Œå¾®é£è½»æŠšï¼Œè™½ç„¶èµ„è´¨ä¸€èˆ¬ï¼Œä½†èƒœåœ¨çµæ´»å¤šå˜ï¼Œèº«æ³•è¿…æ·ã€‚",cultivation_speed:"1.1x",special_effects:["é£ç³»æ³•æœ¯å¨åŠ›+15%","ç§»åŠ¨é€Ÿåº¦+20%"],base_multiplier:1.1,talent_cost:3,rarity:1},{id:14,name:"æš—çµæ ¹",tier:"æå“",description:"æä¸ºç½•è§çš„å˜å¼‚çµæ ¹ï¼Œä¸é»‘æš—ä¸ºä¼´ï¼ŒæŒæ§é˜´å½±ä¹‹åŠ›ã€‚ä¿®è¡Œæš—ç³»åŠŸæ³•é€Ÿåº¦æå¿«ï¼Œæ“…é•¿éšåŒ¿å’Œæš—æ€ã€‚",cultivation_speed:"2.0x",special_effects:["æš—ç³»æ³•æœ¯å¨åŠ›+80%","éšèº«èƒ½åŠ›","æš—å¤œå¢å¹…+50%","å½±é"],base_multiplier:2,talent_cost:15,rarity:4},{id:15,name:"å…‰çµæ ¹",tier:"æå“",description:"ä¼ è¯´ä¸­çš„åœ£æ´çµæ ¹ï¼Œå¤©ç”Ÿäº²è¿‘å…‰æ˜ï¼Œé©±é‚ªç ´ç…ã€‚ä¿®è¡Œå…‰ç³»åŠŸæ³•äº‹åŠåŠŸå€ï¼Œå¯¹é‚ªç¥Ÿæœ‰å¤©ç„¶å…‹åˆ¶ã€‚",cultivation_speed:"2.0x",special_effects:["å…‰ç³»æ³•æœ¯å¨åŠ›+80%","é‚ªç¥Ÿå…‹åˆ¶+100%","æ²»æ„ˆå¢å¹…","åœ£å…‰åº‡æŠ¤"],base_multiplier:2,talent_cost:15,rarity:4},{id:16,name:"è¡€çµæ ¹",tier:"ç‰¹æ®Š",description:"é‚ªé“çµæ ¹ï¼Œä»¥è¡€ä¸ºå¼•ï¼Œä¿®è¡Œè¿…é€Ÿä½†éœ€è¦å¤§é‡é²œè¡€æ»‹å…»ã€‚å®¹æ˜“èµ°ç«å…¥é­”ï¼Œä½†åŠ›é‡å¢é•¿æå¿«ã€‚",cultivation_speed:"1.8x",special_effects:["è¡€ç³»æ³•æœ¯å¨åŠ›+70%","å¸è¡€æ¢å¤","å—œè¡€ç‹‚åŒ–","é­”é“äº²å’Œ"],base_multiplier:1.8,talent_cost:10,rarity:4},{id:17,name:"éª¨çµæ ¹",tier:"ç‰¹æ®Š",description:"ç½•è§çš„æ­»çµæ ¹ï¼Œå¤©ç”Ÿäº²è¿‘æ­»æ°”ï¼Œèƒ½å¤Ÿæ“æ§éª¸éª¨ã€‚ä¿®è¡Œé¬¼é“åŠŸæ³•é€Ÿåº¦æå¿«ï¼Œä½†è¢«æ­£é“æ‰€ä¸å®¹ã€‚",cultivation_speed:"1.7x",special_effects:["æ­»çµæ³•æœ¯å¨åŠ›+60%","éª¸éª¨æ“æ§","æ­»æ°”å…ç–«","é¬¼é“å¤©èµ‹"],base_multiplier:1.7,talent_cost:8,rarity:4},{id:18,name:"æœ¨çµæ ¹",tier:"ä¸­å“",description:"æœ¨è¡Œèµ„è´¨å°šå¯ï¼Œå¯¹æœ¨ç³»åŠŸæ³•æœ‰ä¸é”™çš„äº²å’ŒåŠ›ï¼Œèƒ½å¤Ÿé¡ºåˆ©è¸ä¸Šä¿®è¡Œä¹‹è·¯ã€‚",cultivation_speed:"1.3x",special_effects:["æœ¨ç³»æ³•æœ¯å¨åŠ›+25%","ç”Ÿå‘½åŠ›æ¢å¤+20%"],base_multiplier:1.3,talent_cost:6,rarity:2},{id:19,name:"æ°´çµæ ¹",tier:"ä¸­å“",description:"æ°´è¡Œèµ„è´¨è‰¯å¥½ï¼Œæ³•åŠ›ç»µå»¶ä¸ç»ï¼Œé€‚åº”æ€§å¼ºï¼Œä¿®è¡Œè¾ƒä¸ºé¡ºç•…ã€‚",cultivation_speed:"1.3x",special_effects:["æ°´ç³»æ³•æœ¯å¨åŠ›+25%","çµæ°”æ¢å¤+20%"],base_multiplier:1.3,talent_cost:6,rarity:2},{id:20,name:"åœŸçµæ ¹",tier:"ä¸­å“",description:"åœŸè¡Œèµ„è´¨ä¸é”™ï¼Œé˜²å¾¡åŠ›å¼ºï¼Œç¨³æ‰ç¨³æ‰“ï¼Œæ˜¯é˜µæ³•å¸ˆçš„è‰¯å¥½èµ„è´¨ã€‚",cultivation_speed:"1.3x",special_effects:["åœŸç³»æ³•æœ¯å¨åŠ›+25%","é˜²å¾¡åŠ›+20%"],base_multiplier:1.3,talent_cost:6,rarity:2},{id:21,name:"æ¯’çµæ ¹",tier:"æå“",description:"æä¸ºç½•è§çš„å˜å¼‚çµæ ¹ï¼Œå¤©ç”Ÿç™¾æ¯’ä¸ä¾µï¼Œä¿®è¡Œæ¯’åŠŸé€Ÿåº¦æå¿«ï¼Œæ˜¯æ¯’é“ä¿®å£«æ¢¦å¯ä»¥æ±‚çš„ä½“è´¨ã€‚",cultivation_speed:"2.0x",special_effects:["æ¯’ç³»æ³•æœ¯å¨åŠ›+80%","ç™¾æ¯’ä¸ä¾µ","å‰§æ¯’å¢å¹…","æ¯’ç´ æ„ŸçŸ¥"],base_multiplier:2,talent_cost:15,rarity:4},{id:22,name:"åŒç”Ÿçµæ ¹",tier:"æå“",description:"ä¸‡ä¸­æ— ä¸€çš„åŒå±æ€§çµæ ¹ï¼ŒåŒæ—¶æ‹¥æœ‰ä¸¤ç§åŸºç¡€çµæ ¹çš„åŠ›é‡ã€‚å¯ä¿®ç‚¼ä¸¤ç³»åŠŸæ³•ï¼Œä½†åˆæœŸè¿›å±•ç¼“æ…¢ã€‚",cultivation_speed:"1.8x",special_effects:["åŒç³»æ³•æœ¯äº²å’Œ","èåˆçªç ´+30%","åŒä¿®åŠ æˆ"],base_multiplier:1.8,talent_cost:14,rarity:4},{id:23,name:"è™šç©ºçµæ ¹",tier:"ç¥å“",description:"ä¼ è¯´ä¸­çš„è‡³é«˜çµæ ¹ä¹‹ä¸€ï¼ŒæŒæ§è™šç©ºæ³•åˆ™ï¼Œå¯ç©¿æ¢­ç©ºé—´ã€‚ä¿®è¡Œæéš¾ä½†æ½œåŠ›æ— ç©·ã€‚",cultivation_speed:"0.9x(å‰æœŸ) â†’ 3.0x(åæœŸ)",special_effects:["ç©ºé—´æ³•æœ¯ç²¾é€š","è™šç©ºç©¿æ¢­","ç©ºé—´é”å®š","æ¬¡å…ƒæ–©"],base_multiplier:3,talent_cost:25,rarity:5},{id:24,name:"æ—¶é—´çµæ ¹",tier:"ç¥å“",description:"æœ€ä¸ºç¨€æœ‰çš„ä¼ è¯´çµæ ¹ï¼Œè§¦åŠæ—¶é—´æ³•åˆ™ã€‚ä¿®ç‚¼è‰°éš¾ä½†ä¸€æ—¦æœ‰æˆï¼Œå¯é€†è½¬å²æœˆï¼ŒæŒæ§å› æœã€‚",cultivation_speed:"0.8x(å‰æœŸ) â†’ 3.2x(åæœŸ)",special_effects:["æ—¶é—´æ³•æœ¯ç²¾é€š","æ—¶å…‰å€’æµ","å› æœæ¨æ¼”","æ—¶é—´åŠ é€Ÿ"],base_multiplier:3.2,talent_cost:28,rarity:5},{id:25,name:"æ˜Ÿè¾°çµæ ¹",tier:"ç¥å“",description:"å¸çº³æ˜Ÿè¾°ä¹‹åŠ›çš„ç¨€ä¸–çµæ ¹ï¼Œä¸æ˜Ÿç©ºå…±é¸£ã€‚ä¿®è¡Œç¼“æ…¢ä½†å¢ƒç•Œç¨³å›ºï¼Œå¯å€Ÿæ˜Ÿè¾°ä¹‹åŠ›çªç ´ç“¶é¢ˆã€‚",cultivation_speed:"0.85x(å‰æœŸ) â†’ 2.9x(åæœŸ)",special_effects:["æ˜Ÿè¾°ä¹‹åŠ›","æ˜Ÿå›¾æ¼”åŒ–","æ˜Ÿå…‰åº‡æŠ¤","æ˜Ÿé™¨æœ¯"],base_multiplier:2.9,talent_cost:26,rarity:5},{id:26,name:"é˜´é˜³çµæ ¹",tier:"ç¥å“",description:"è‡³é«˜åŒç”Ÿçµæ ¹ï¼Œé˜´é˜³è°ƒå’Œï¼Œå¤ªæç”Ÿä¸¤ä»ªã€‚å¯åŒæ—¶ä¿®ç‚¼é˜´é˜³ä¸¤ç§åŠŸæ³•ï¼Œèåˆåå¨åŠ›å€å¢ã€‚",cultivation_speed:"0.9x(å‰æœŸ) â†’ 3.1x(åæœŸ)",special_effects:["é˜´é˜³è°ƒå’Œ","ä¸¤ä»ªå½’ä¸€","å¤ªæç”Ÿå¨","é˜´é˜³é€†è½¬"],base_multiplier:3.1,talent_cost:27,rarity:5}],s=[{id:1,name:"å¤©å‘½ä¸»è§’",description:"æ°”è¿æƒŠäººï¼Œæ€»æ˜¯èƒ½åœ¨ç»å¢ƒä¸­é€¢ç”Ÿï¼Œè·å¾—æ„æƒ³ä¸åˆ°çš„æœºç¼˜ã€‚",talent_cost:15,rarity:5,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ°”è¿",æ•°å€¼:8},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"é€¢å‡¶åŒ–å‰",æ•°å€¼:.1}]},{id:2,name:"å‰‘é“ç‹¬å°Š",description:"å¤©ç”Ÿå‰‘å¿ƒé€šæ˜ï¼Œä»»ä½•å‰‘æ³•ä¸€çœ‹ä¾¿ä¼šï¼Œä¸”å¨åŠ›å€å¢ã€‚",talent_cost:12,rarity:5,effects:[{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"å‰‘æ³•",æ•°å€¼:.2},{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ ¹éª¨",æ•°å€¼:3}]},{id:3,name:"ä¸¹é“åœ£æ‰‹",description:"å¯¹è¯ç†æœ‰è¶…å‡¡çš„é¢†æ‚ŸåŠ›ï¼Œç‚¼ä¸¹æˆåŠŸç‡ä¸å“è´¨å¤§å¹…æå‡ã€‚",talent_cost:12,rarity:5,effects:[{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"ç‚¼ä¸¹",æ•°å€¼:.15},{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:2}]},{id:4,name:"é˜µæ³•å¤§å¸ˆ",description:"å¯¹é˜µæ³•æœ‰æé«˜çš„å¤©èµ‹ï¼Œå­¦ä¹ å’Œå¸ƒç½®é˜µæ³•çš„æ•ˆç‡å¤§å¤§æé«˜ã€‚",talent_cost:8,rarity:4,effects:[{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"é˜µæ³•",æ•°å€¼:.12},{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:2}]},{id:5,name:"ç‚¼å™¨é¬¼æ‰",description:"å¤©ç”Ÿå¯¹å„ç§ææ–™æœ‰æ•é”çš„æ„ŸçŸ¥ï¼Œç‚¼å™¨æ—¶æ›´å®¹æ˜“å‡ºç°æå“ã€‚",talent_cost:8,rarity:4,effects:[{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"ç‚¼å™¨",æ•°å€¼:.1},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"ææ–™æ„ŸçŸ¥",æ•°å€¼:1}]},{id:6,name:"å¤šå®ç«¥å­",description:"å‡ºé—¨å†ç»ƒæ—¶ï¼Œæ›´å®¹æ˜“å‘ç°å¤©æåœ°å®ã€‚",talent_cost:7,rarity:4,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ°”è¿",æ•°å€¼:3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å¯»å®å¤©èµ‹",æ•°å€¼:.15}]},{id:7,name:"ä½“ä¿®å¥‡æ‰",description:"è‚‰èº«å¤©ç”Ÿå¼ºæ¨ªï¼Œæ°”è¡€æ—ºç››ï¼Œé€‚åˆä¿®ç‚¼ä½“ä¿®åŠŸæ³•ã€‚",talent_cost:5,rarity:3,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ ¹éª¨",æ•°å€¼:3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"ä½“ä¿®å¤©èµ‹",æ•°å€¼:.1}]},{id:8,name:"ç¥è¯†è¿‡äºº",description:"å¤©ç”Ÿç¥è¯†å¼ºå¤§ï¼Œä¸æ˜“è¢«å¿ƒé­”å…¥ä¾µï¼Œæ–½å±•ç¥è¯†ç§˜æœ¯æ•ˆæœæ›´ä½³ã€‚",talent_cost:5,rarity:3,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å¿ƒé­”æŠ—æ€§",æ•°å€¼:.1}]},{id:9,name:"èº«æ³•é¬¼é­…",description:"èº«æ³•é£˜é€¸ï¼Œæˆ˜æ–—ä¸­é—ªé¿èƒ½åŠ›æ›´å¼ºã€‚",talent_cost:4,rarity:3,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"çµæ€§",æ•°å€¼:2},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"é—ªé¿å¤©èµ‹",æ•°å€¼:.08}]},{id:10,name:"å†œå¤«ä¹‹å­",description:"å‡ºèº«å‡¡äººï¼Œå¿ƒæ€§åšéŸ§ï¼Œå¯¹çµæ¤æœ‰é¢å¤–çš„äº²å’ŒåŠ›ã€‚",talent_cost:2,rarity:2,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"å¿ƒæ€§",æ•°å€¼:1},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"çµæ¤äº²å’Œ",æ•°å€¼:.1}]},{id:11,name:"è¿‡ç›®ä¸å¿˜",description:"è®°å¿†åŠ›è¶…ç¾¤ï¼Œå­¦ä¹ åŠŸæ³•ç§˜ç±é€Ÿåº¦åŠ å¿«ã€‚",talent_cost:2,rarity:2,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:2}]},{id:12,name:"è€å®äºº",description:"ä¸äººäº¤æ˜“æ—¶ï¼Œä¸å®¹æ˜“è¢«æ¬ºéª—ã€‚",talent_cost:1,rarity:1,effects:[{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"é˜²æ¬ºè¯ˆ",æ•°å€¼:1}]},{id:13,name:"ä¸€è¯ºåƒé‡‘",description:"ä½ çš„æ‰¿è¯ºæå…·åˆ†é‡ï¼Œæ›´å®¹æ˜“è·å¾—ä»–äººçš„ä¿¡ä»»ä¸å¥½æ„Ÿã€‚",talent_cost:3,rarity:2,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"é­…åŠ›",æ•°å€¼:2}]},{id:14,name:"å¤©ç”Ÿæ¯’ä½“",description:"ç™¾æ¯’ä¸ä¾µï¼Œä¸”èƒ½æ›´å¥½åœ°é©¾é©­æ¯’åŠŸï¼Œä½†å¸¸äººä¸æ•¢è½»æ˜“æ¥è¿‘ã€‚",talent_cost:6,rarity:4,effects:[{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"æ¯’ç´ å…ç–«",æ•°å€¼:1},{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"æ¯’æœ¯",æ•°å€¼:.15},{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"é­…åŠ›",æ•°å€¼:-2}]},{id:15,name:"ç”»é¾™ç‚¹ç›",description:"åœ¨åˆ¶ä½œç¬¦ç®“æ—¶ï¼Œæœ‰ä¸€å®šå‡ ç‡äº§ç”Ÿæ„æƒ³ä¸åˆ°çš„å¼ºå¤§æ•ˆæœã€‚",talent_cost:4,rarity:3,effects:[{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"ç¬¦ç®“",æ•°å€¼:.1},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"ç¬¦ç®“å˜å¼‚",æ•°å€¼:.05}]},{id:16,name:"é¡¶çº§é­…åŠ›",description:"å¤©ç”Ÿä¸½è´¨ï¼Œæ°”è´¨éå‡¡ï¼Œé­…åŠ›è¶…ç¾¤ã€‚æ— è®ºèµ°åˆ°å“ªé‡Œéƒ½æ˜¯ä¼—äººç©ç›®çš„ç„¦ç‚¹ï¼Œæå®¹æ˜“è·å¾—ä»–äººçš„å¥½æ„Ÿä¸ä¿¡ä»»ã€‚åœ¨ç¤¾äº¤åœºåˆå¦‚é±¼å¾—æ°´ï¼Œèƒ½å¤Ÿä»¥è¨€è¯­å’Œé­…åŠ›åŒ–è§£å¤§éƒ¨åˆ†å†²çªã€‚",talent_cost:8,rarity:4,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"é­…åŠ›",æ•°å€¼:5},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"é­…åŠ›å…‰ç¯",æ•°å€¼:.2},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"ç¤¾äº¤å¤©èµ‹",æ•°å€¼:.15}]},{id:17,name:"é“å¿ƒåšå›º",description:"é“å¿ƒå¦‚é“ï¼Œå¿ƒé­”éš¾ä¾µã€‚çªç ´æ—¶æ›´ä¸å®¹æ˜“èµ°ç«å…¥é­”ï¼Œå—åˆ°è¯±æƒ‘å’Œå¹»æœ¯å½±å“çš„å‡ ç‡å¤§å¹…é™ä½ã€‚",talent_cost:6,rarity:4,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"å¿ƒæ€§",æ•°å€¼:3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å¿ƒé­”æŠ—æ€§",æ•°å€¼:.3}]},{id:18,name:"å¤©ç”Ÿç¥åŠ›",description:"å¤©ç”ŸåŠ›å¤§æ— ç©·ï¼Œä½“è´¨è¿œè¶…å¸¸äººã€‚æ“…é•¿è¿‘æˆ˜ææ€ï¼Œæ°”è¡€æ—ºç››ã€‚",talent_cost:5,rarity:3,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ ¹éª¨",æ•°å€¼:4},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"è¿‘æˆ˜å¢å¹…",æ•°å€¼:.2}]},{id:19,name:"çµè§‰æ•é”",description:"å…­æ„Ÿè¶…å‡¡ï¼Œå¯¹å±é™©æœ‰æœ¬èƒ½çš„é¢„æ„Ÿã€‚åœ¨æˆ˜æ–—å’Œæ¢é™©ä¸­èƒ½å¤Ÿæå‰æ„ŸçŸ¥åˆ°å¨èƒã€‚",talent_cost:4,rarity:3,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"çµæ€§",æ•°å€¼:3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å±é™©æ„ŸçŸ¥",æ•°å€¼:1}]},{id:20,name:"å¤œçŒ«å­",description:"å¤œæ™šç²¾ç¥ç™¾å€ï¼Œä¿®ç‚¼æ•ˆç‡æå‡ã€‚ä½†ç™½å¤©ä¼šæ„Ÿåˆ°å›°å€¦ã€‚",talent_cost:1,rarity:2,effects:[{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å¤œé—´ä¿®ç‚¼åŠ é€Ÿ",æ•°å€¼:.3}]},{id:21,name:"å¤©é“çœ·é¡¾",description:"å—å¤©é“çœ·é¡¾ï¼Œçªç ´æ—¶æˆåŠŸç‡æ›´é«˜ï¼Œé­é‡å¤©åŠ«æ—¶å¨åŠ›å‡å¼±ã€‚",talent_cost:10,rarity:5,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ°”è¿",æ•°å€¼:5},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"çªç ´æˆåŠŸç‡",æ•°å€¼:.2},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å¤©åŠ«å‰Šå¼±",æ•°å€¼:.15}]},{id:22,name:"å‰‘éª¨å¤©æˆ",description:"å¤©ç”Ÿå‰‘éª¨ï¼Œä¸å‰‘æœ‰è«åçš„å¥‘åˆã€‚å‰‘æ³•å¨åŠ›å€å¢ï¼Œé¢†æ‚Ÿå‰‘æ„é€Ÿåº¦æå¿«ã€‚",talent_cost:10,rarity:5,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ ¹éª¨",æ•°å€¼:2},{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"å‰‘æ³•",æ•°å€¼:.25},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å‰‘æ„æ„Ÿæ‚Ÿ",æ•°å€¼:.2}]},{id:23,name:"å¤©ç”Ÿé“ä½“",description:"ä¼ è¯´ä¸­çš„é“ä½“ï¼Œå¤©ç”Ÿå¥‘åˆå¤©åœ°å¤§é“ï¼Œä¿®ç‚¼ä»»ä½•åŠŸæ³•éƒ½äº‹åŠåŠŸå€ã€‚",talent_cost:18,rarity:5,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:4},{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"çµæ€§",æ•°å€¼:4},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"ä¸‡æ³•ç²¾é€š",æ•°å€¼:.3}]},{id:24,name:"ç¬¦é“å¥‡æ‰",description:"å¯¹ç¬¦ç®“æœ‰è¶…å‡¡çš„é¢†æ‚Ÿï¼Œç»˜åˆ¶ç¬¦ç®“æˆåŠŸç‡é«˜ï¼Œå¨åŠ›å¼ºå¤§ã€‚",talent_cost:7,rarity:4,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:2},{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"ç¬¦ç®“",æ•°å€¼:.2},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"ç¬¦ç®“ç²¾é€š",æ•°å€¼:.15}]},{id:25,name:"çµå…½äº²å’Œ",description:"å¤©ç”Ÿäº²å’Œçµå…½ï¼Œæ›´å®¹æ˜“æ”¶æœå’Œæ²Ÿé€šçµå…½ï¼Œçµå…½æˆ˜åŠ›æå‡ã€‚",talent_cost:6,rarity:4,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"é­…åŠ›",æ•°å€¼:2},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"çµå…½å¥‘çº¦",æ•°å€¼:.3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"çµå…½æˆ˜åŠ›",æ•°å€¼:.2}]},{id:26,name:"å¤©ç”Ÿé­”å¿ƒ",description:"å¿ƒæ€§åå‘é­”é“ï¼Œä¿®ç‚¼é­”åŠŸé€Ÿåº¦æå¿«ï¼Œä½†å®¹æ˜“èµ°ç«å…¥é­”ã€‚æ­£é“åŠŸæ³•ä¿®ç‚¼å›°éš¾ã€‚",talent_cost:5,rarity:4,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"å¿ƒæ€§",æ•°å€¼:-2},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"é­”åŠŸåŠ é€Ÿ",æ•°å€¼:.4},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"èµ°ç«å…¥é­”",æ•°å€¼:.15}]},{id:27,name:"å™¨é“å®—å¸ˆ",description:"å¯¹ç‚¼å™¨æœ‰éå‡¡çš„å¤©èµ‹ï¼Œç‚¼åˆ¶çš„æ³•å™¨å“è´¨æ›´é«˜ï¼ŒæˆåŠŸç‡æ›´é«˜ã€‚",talent_cost:9,rarity:4,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:2},{ç±»å‹:"æŠ€èƒ½åŠ æˆ",æŠ€èƒ½:"ç‚¼å™¨",æ•°å€¼:.25},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"æå“æ¦‚ç‡",æ•°å€¼:.1}]},{id:28,name:"å­¤æ˜Ÿå‘½æ ¼",description:"å¤©ç…å­¤æ˜Ÿï¼Œæ³¨å®šå­¤ç‹¬ä¸€ç”Ÿã€‚æ°”è¿æä½ï¼Œä½†åœ¨ç»å¢ƒä¸­æ›´å®¹æ˜“çªç ´ã€‚",talent_cost:-3,rarity:3,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ°”è¿",æ•°å€¼:-5},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"ç»å¢ƒçªç ´",æ•°å€¼:.3}]},{id:29,name:"å…ˆçŸ¥æ¢¦å¢ƒ",description:"å¶å°”èƒ½åœ¨æ¢¦ä¸­çª¥è§æœªæ¥çš„ç‰‡æ®µï¼Œæå‰è§„é¿å±é™©æˆ–æŠŠæ¡æœºç¼˜ã€‚",talent_cost:8,rarity:5,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ‚Ÿæ€§",æ•°å€¼:2},{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ°”è¿",æ•°å€¼:3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"é¢„çŸ¥å±é™©",æ•°å€¼:1}]},{id:30,name:"é•¿ç”Ÿä½“è´¨",description:"å¤©ç”Ÿå¯¿å…ƒæ‚ é•¿ï¼Œæ¯”å¸¸äººæ›´ä¸æ˜“è¡°è€ï¼Œæœ‰æ›´å¤šæ—¶é—´è¿½æ±‚å¤§é“ã€‚",talent_cost:12,rarity:5,effects:[{ç±»å‹:"åå¤©å…­å¸",ç›®æ ‡:"æ ¹éª¨",æ•°å€¼:3},{ç±»å‹:"ç‰¹æ®Šèƒ½åŠ›",åç§°:"å¯¿å‘½å»¶é•¿",æ•°å€¼:.3}]}]},7659:e=>{"use strict";var t={};e.exports=function(e,n){var a=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(n)}},7677:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},7720:(e,t,n)=>{"use strict";var a=n(4765),r=Object.prototype.hasOwnProperty,o=Array.isArray,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)void 0!==e[a]&&(n[a]=e[a]);return n},l=1024;e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],a=0;a<t.length;++a)for(var r=t[a],i=r.obj[r.prop],s=Object.keys(i),l=0;l<s.length;++l){var c=s[l],d=i[c];"object"==typeof d&&null!==d&&-1===n.indexOf(d)&&(t.push({obj:i,prop:c}),n.push(d))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(o(n)){for(var a=[],r=0;r<n.length;++r)void 0!==n[r]&&a.push(n[r]);t.obj[t.prop]=a}}}(t),e},decode:function(e,t,n){var a=e.replace(/\+/g," ");if("iso-8859-1"===n)return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch(e){return a}},encode:function(e,t,n,r,o){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===n)return escape(s).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var c="",d=0;d<s.length;d+=l){for(var u=s.length>=l?s.slice(d,d+l):s,m=[],p=0;p<u.length;++p){var f=u.charCodeAt(p);45===f||46===f||95===f||126===f||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||o===a.RFC1738&&(40===f||41===f)?m[m.length]=u.charAt(p):f<128?m[m.length]=i[f]:f<2048?m[m.length]=i[192|f>>6]+i[128|63&f]:f<55296||f>=57344?m[m.length]=i[224|f>>12]+i[128|f>>6&63]+i[128|63&f]:(p+=1,f=65536+((1023&f)<<10|1023&u.charCodeAt(p)),m[m.length]=i[240|f>>18]+i[128|f>>12&63]+i[128|f>>6&63]+i[128|63&f])}c+=m.join("")}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(o(e)){for(var n=[],a=0;a<e.length;a+=1)n.push(t(e[a]));return n}return t(e)},merge:function e(t,n,a){if(!n)return t;if("object"!=typeof n){if(o(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(a&&(a.plainObjects||a.allowPrototypes)||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var i=t;return o(t)&&!o(n)&&(i=s(t,a)),o(t)&&o(n)?(n.forEach(function(n,o){if(r.call(t,o)){var i=t[o];i&&"object"==typeof i&&n&&"object"==typeof n?t[o]=e(i,n,a):t.push(n)}else t[o]=n}),t):Object.keys(n).reduce(function(t,o){var i=n[o];return r.call(t,o)?t[o]=e(t[o],i,a):t[o]=i,t},i)}}},7733:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.sect-library[data-v-36b56778] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n.player-info-bar[data-v-36b56778] {\n  display: flex;\n  gap: 1.5rem;\n  padding: 0.75rem 1rem;\n  background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(168, 85, 247, 0.05));\n  border-radius: 8px;\n  border: 1px solid rgba(147, 51, 234, 0.2);\n}\n.info-item[data-v-36b56778] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.info-label[data-v-36b56778] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.info-value[data-v-36b56778] {\n  font-weight: 600;\n  font-size: 0.9rem;\n}\n.info-value.position[data-v-36b56778] {\n  color: #9333ea;\n}\n.info-value.contribution[data-v-36b56778] {\n  color: #f59e0b;\n}\n.library-floors[data-v-36b56778] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.floor-section[data-v-36b56778] {\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  overflow: hidden;\n  transition: all 0.2s ease;\n}\n.floor-section.locked[data-v-36b56778] {\n  opacity: 0.6;\n}\n.floor-section.expanded[data-v-36b56778] {\n  border-color: rgba(147, 51, 234, 0.3);\n}\n.floor-header[data-v-36b56778] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem 1rem;\n  background: var(--color-background);\n  cursor: pointer;\n  transition: background 0.2s;\n}\n.floor-header[data-v-36b56778]:hover {\n  background: var(--color-surface);\n}\n.floor-info[data-v-36b56778] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.floor-icon[data-v-36b56778] {\n  font-size: 1.25rem;\n}\n.floor-name[data-v-36b56778] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.floor-requirement[data-v-36b56778] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  background: var(--color-surface);\n  padding: 0.2rem 0.5rem;\n  border-radius: 4px;\n}\n.floor-status[data-v-36b56778] {\n  color: var(--color-text-secondary);\n}\n.floor-status svg.rotated[data-v-36b56778] {\n  transform: rotate(180deg);\n}\n.floor-content[data-v-36b56778] {\n  padding: 1rem;\n  background: var(--color-surface);\n  border-top: 1px solid var(--color-border);\n}\n.empty-floor[data-v-36b56778] {\n  text-align: center;\n  padding: 2rem;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-36b56778] {\n  opacity: 0.5;\n  margin-bottom: 0.5rem;\n}\n.hint[data-v-36b56778] {\n  font-size: 0.8rem;\n  opacity: 0.7;\n}\n.technique-list[data-v-36b56778] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.technique-card[data-v-36b56778] {\n  padding: 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n.technique-card.can-afford[data-v-36b56778] {\n  border-color: rgba(34, 197, 94, 0.3);\n}\n.technique-card.owned[data-v-36b56778] {\n  opacity: 0.7;\n  border-color: rgba(147, 51, 234, 0.3);\n}\n.tech-header[data-v-36b56778] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.tech-name[data-v-36b56778] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.tech-quality[data-v-36b56778] {\n  font-size: 0.75rem;\n  padding: 0.15rem 0.4rem;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.quality-common[data-v-36b56778] { background: rgba(156, 163, 175, 0.2); color: #6b7280;\n}\n.quality-yellow[data-v-36b56778] { background: rgba(245, 158, 11, 0.2); color: #f59e0b;\n}\n.quality-xuan[data-v-36b56778] { background: rgba(139, 92, 246, 0.2); color: #8b5cf6;\n}\n.quality-earth[data-v-36b56778] { background: rgba(59, 130, 246, 0.2); color: #3b82f6;\n}\n.quality-heaven[data-v-36b56778] { background: rgba(239, 68, 68, 0.2); color: #ef4444;\n}\n.tech-desc[data-v-36b56778] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  margin: 0 0 0.5rem 0;\n  line-height: 1.4;\n}\n.tech-footer[data-v-36b56778] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.tech-cost[data-v-36b56778] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  font-size: 0.8rem;\n  color: #f59e0b;\n  font-weight: 500;\n}\n.learn-btn[data-v-36b56778] {\n  padding: 0.35rem 0.75rem;\n  background: linear-gradient(135deg, #22c55e, #16a34a);\n  border: none;\n  border-radius: 4px;\n  color: white;\n  font-size: 0.75rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.learn-btn[data-v-36b56778]:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);\n}\n.learn-btn[data-v-36b56778]:disabled {\n  background: #6b7280;\n  cursor: not-allowed;\n}\n.owned-badge[data-v-36b56778] {\n  font-size: 0.75rem;\n  color: #9333ea;\n  font-weight: 500;\n}\n.library-tips[data-v-36b56778] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 0.75rem;\n  background: rgba(59, 130, 246, 0.1);\n  border-radius: 6px;\n  font-size: 0.75rem;\n  color: #3b82f6;\n}\n.slide-enter-active[data-v-36b56778],\n.slide-leave-active[data-v-36b56778] {\n  transition: all 0.3s ease;\n}\n.slide-enter-from[data-v-36b56778],\n.slide-leave-to[data-v-36b56778] {\n  opacity: 0;\n  max-height: 0;\n  padding: 0 1rem;\n}\n",""]);const s=i},7754:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("circle-user",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]])},7760:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>s,q3:()=>o});const a="dad.bundle",r=1;function o(e,t,n){return{schema:a,version:r,type:e,exportedAt:n?.exportedAt??(new Date).toISOString(),appVersion:n?.appVersion,payload:t}}function i(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function s(e){if(function(e){return!!i(e)&&e.schema===a&&e.version===r&&"string"==typeof e.type}(e))return{type:e.type,payload:e.payload,isBundle:!0};if(i(e)&&"string"==typeof e.type){const t=e.type;if("saves"===t&&Array.isArray(e.saves))return{type:"saves",payload:{saves:e.saves},isBundle:!1};if("character"===t&&i(e.character))return{type:"character",payload:e.character,isBundle:!1};if("settings"===t)return{type:"settings",payload:e.settings??e,isBundle:!1};if("prompts"===t)return{type:"prompts",payload:e,isBundle:!1};if("start_config"===t)return{type:"start_config",payload:e,isBundle:!1}}if(i(e)&&Array.isArray(e.presets)&&e.version)return{type:"presets",payload:{presets:e.presets},isBundle:!1};if(i(e)&&!e.type&&!e.schema){const t=Object.keys(e);if(t.length>0&&t.every(t=>"string"==typeof e[t]))return{type:"prompts",payload:e,isBundle:!1}}return i(e),{type:null,payload:e,isBundle:!1}}},7816:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.data-display[data-v-3e8f894e] {\n  flex: 1;\n  overflow: auto;\n  padding: 1rem;\n}\n.loading-state[data-v-3e8f894e],\n.no-connection[data-v-3e8f894e],\n.error-state[data-v-3e8f894e] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  padding: 3rem;\n  color: var(--color-text-secondary);\n}\n.retry-btn[data-v-3e8f894e] {\n  padding: 0.5rem 1rem;\n  background: var(--color-primary);\n  color: white;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n}\n.retry-btn[data-v-3e8f894e]:hover {\n  background: var(--color-primary-hover);\n}\n.hint[data-v-3e8f894e] {\n  font-size: 0.875rem;\n  opacity: 0.7;\n}\n.animate-spin[data-v-3e8f894e] {\n  animation: spin-3e8f894e 1s linear infinite;\n}\n@keyframes spin-3e8f894e {\nfrom {\n    transform: rotate(0deg);\n}\nto {\n    transform: rotate(360deg);\n}\n}\n",""]);const s=i},7825:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var a="";n.supports&&(a+="@supports (".concat(n.supports,") {")),n.media&&(a+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(a+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),a+=n.css,r&&(a+="}"),n.media&&(a+="}"),n.supports&&(a+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},7986:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.save-data-section[data-v-68cac9c5] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n}\n.section-header[data-v-68cac9c5] {\n  margin-bottom: 1rem;\n  flex-shrink: 0;\n}\n.section-title[data-v-68cac9c5] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.save-data-content[data-v-68cac9c5] {\n  flex: 1;\n  overflow: auto;\n  background: var(--color-code-bg);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  padding: 0.75rem;\n}\n.data-tree[data-v-68cac9c5] {\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.85rem;\n}\n.empty-state[data-v-68cac9c5] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n",""]);const s=i},8002:e=>{"use strict";e.exports=Math.min},8068:e=>{"use strict";e.exports=SyntaxError},8092:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.memory-section[data-v-04e0cd04] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 1rem;\n}\n.section-header[data-v-04e0cd04] {\n  margin-bottom: 1rem;\n  flex-shrink: 0;\n}\n.section-title[data-v-04e0cd04] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.memory-content[data-v-04e0cd04] {\n  flex: 1;\n  overflow: hidden;\n}\n.data-display[data-v-04e0cd04] {\n  height: 100%;\n  overflow: hidden;\n}\n.code-pre[data-v-04e0cd04] {\n  margin: 0;\n  padding: 0.75rem;\n  background: var(--color-code-bg);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  height: 100%;\n  overflow: auto;\n  font-family: 'Consolas', 'Monaco', monospace;\n  font-size: 0.8rem;\n  line-height: 1.4;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.empty-state[data-v-04e0cd04] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  color: var(--color-text-secondary);\n  text-align: center;\n}\n\n/* æ‰‹æœºç«¯é€‚é… */\n@media (max-width: 640px) {\n.memory-section[data-v-04e0cd04] {\n    padding: 0.75rem;\n}\n.section-title[data-v-04e0cd04] {\n    font-size: 1rem;\n    text-align: center;\n}\n.code-pre[data-v-04e0cd04] {\n    font-size: 0.75rem;\n    padding: 0.5rem;\n}\n.empty-state[data-v-04e0cd04] {\n    padding: 2rem 0.5rem;\n}\n}\n@media (max-width: 480px) {\n.memory-section[data-v-04e0cd04] {\n    padding: 0.5rem;\n}\n.section-title[data-v-04e0cd04] {\n    font-size: 0.9rem;\n}\n.code-pre[data-v-04e0cd04] {\n    font-size: 0.7rem;\n    padding: 0.4rem;\n}\n}\n",""]);const s=i},8103:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.left-sidebar[data-v-533d9661] {\n  width: 100%;\n  height: 100%;\n  padding: 16px;\n  box-sizing: border-box;\n  font-family: var(--font-family-sans-serif);\n  display: flex;\n  flex-direction: column;\n  background: var(--color-surface);\n}\n.sidebar-header[data-v-533d9661] {\n  margin-bottom: 16px;\n  padding-bottom: 12px;\n  border-bottom: 1px solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.sidebar-title[data-v-533d9661] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 8px;\n}\n.real-time[data-v-533d9661] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 6px;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-family: 'Courier New', monospace;\n  padding: 4px 8px;\n  background: var(--color-surface-light);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.time-icon[data-v-533d9661] {\n  color: var(--color-primary);\n}\n.title-icon[data-v-533d9661] {\n  color: var(--color-primary);\n}\n.sidebar-content[data-v-533d9661] {\n  flex: 1;\n  overflow-y: auto;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;\n  padding-right: 4px;\n}\n.sidebar-content[data-v-533d9661]::-webkit-scrollbar {\n  width: 4px;\n}\n.sidebar-content[data-v-533d9661]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.sidebar-content[data-v-533d9661]::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 2px;\n}\n[data-theme=\"dark\"] .sidebar-content[data-v-533d9661]::-webkit-scrollbar-thumb {\n  background: var(--scrollbar-thumb-color);\n}\n\n/* åŠŸèƒ½åˆ†åŒºæ ·å¼ */\n.function-section[data-v-533d9661] {\n  margin-bottom: 16px;\n}\n.section-title[data-v-533d9661] {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: var(--color-text-secondary);\n  margin-bottom: 8px;\n  padding: 0 4px;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n.function-group[data-v-533d9661] {\n  display: flex;\n  flex-direction: column;\n  gap: 6px;\n}\n.system-section[data-v-533d9661] {\n  border-top: 1px solid var(--color-border);\n  padding-top: 12px;\n}\n.divider[data-v-533d9661] {\n  height: 1px;\n  background: var(--color-border);\n  margin: 12px 0;\n}\n\n/* å¢å¼ºçš„æŒ‰é’®æ ·å¼ */\n.function-btn[data-v-533d9661] {\n  display: flex;\n  align-items: center;\n  padding: 8px 10px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  font-family: inherit;\n  text-align: left;\n  width: 100%;\n  position: relative;\n  overflow: hidden;\n}\n.function-btn[data-v-533d9661]::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, var(--color-surface-light), transparent);\n  transition: left 0.5s ease;\n}\n.function-btn[data-v-533d9661]:hover::before {\n  left: 100%;\n}\n.function-btn[data-v-533d9661]:hover {\n  background: var(--color-surface-light);\n  border-color: var(--color-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 20px rgba(var(--color-primary-rgb), 0.15);\n}\n.function-btn[data-v-533d9661]:active {\n  transform: translateY(-1px) scale(0.98);\n  transition: all 0.1s ease;\n}\n\n/* æŒ‰é’®å›¾æ ‡åŒºåŸŸ */\n.btn-icon[data-v-533d9661] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 28px;\n  height: 28px;\n  border-radius: 6px;\n  background: var(--color-background);\n  margin-right: 8px;\n  transition: all 0.3s ease;\n  flex-shrink: 0;\n}\n\n/* æŒ‰é’®å†…å®¹åŒºåŸŸ */\n.btn-content[data-v-533d9661] {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n.btn-text[data-v-533d9661] {\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: var(--color-text);\n  line-height: 1.2;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.btn-desc[data-v-533d9661] {\n  font-size: 0.65rem;\n  color: var(--color-text-secondary);\n  line-height: 1.1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* æŒ‰é’®ç®­å¤´ */\n.btn-arrow[data-v-533d9661] {\n  color: var(--color-text-muted);\n  transition: all 0.3s ease;\n  margin-left: 8px;\n}\n.function-btn:hover .btn-arrow[data-v-533d9661] {\n  color: var(--color-primary);\n  transform: translateX(2px);\n}\n\n/* æ— ç®­å¤´æŒ‰é’®çš„å³è¾¹è·è¡¥å¿ */\n.function-btn.no-arrow .btn-content[data-v-533d9661] {\n  margin-right: 22px; /* 14px (ç®­å¤´å®½åº¦) + 8px (margin-left) */\n}\n\n/* åˆ†ç±»é¢œè‰²ä¸»é¢˜ */\n.function-btn.primary .btn-icon[data-v-533d9661] {\n  background: rgba(59, 130, 246, 0.1);\n  border: 1px solid rgba(59, 130, 246, 0.2);\n  color: rgb(59, 130, 246);\n}\n.function-btn.primary:hover .btn-icon[data-v-533d9661] {\n  background: rgba(59, 130, 246, 0.15);\n  border-color: rgba(59, 130, 246, 0.3);\n}\n.function-btn.secondary .btn-icon[data-v-533d9661] {\n  background: rgba(16, 185, 129, 0.1);\n  border: 1px solid rgba(16, 185, 129, 0.2);\n  color: rgb(16, 185, 129);\n}\n.function-btn.secondary:hover .btn-icon[data-v-533d9661] {\n  background: rgba(16, 185, 129, 0.15);\n  border-color: rgba(16, 185, 129, 0.3);\n}\n\n/* ä¿®ç‚¼ç³»ç»Ÿ - é‡‘è‰² */\n.function-btn.cultivation .btn-icon[data-v-533d9661] {\n  background: rgba(245, 158, 11, 0.1);\n  border: 1px solid rgba(245, 158, 11, 0.2);\n  color: rgb(245, 158, 11);\n}\n.function-btn.cultivation:hover .btn-icon[data-v-533d9661] {\n  background: rgba(245, 158, 11, 0.15);\n  border-color: rgba(245, 158, 11, 0.3);\n}\n\n/* ä»»åŠ¡æ¢ç´¢ - ç´«è‰² */\n.function-btn.quest .btn-icon[data-v-533d9661] {\n  background: rgba(139, 92, 246, 0.1);\n  border: 1px solid rgba(139, 92, 246, 0.2);\n  color: rgb(139, 92, 246);\n}\n.function-btn.quest:hover .btn-icon[data-v-533d9661] {\n  background: rgba(139, 92, 246, 0.15);\n  border-color: rgba(139, 92, 246, 0.3);\n}\n.function-btn.system .btn-icon[data-v-533d9661] {\n  background: rgba(107, 114, 128, 0.1);\n  border: 1px solid rgba(107, 114, 128, 0.2);\n  color: rgb(107, 114, 128);\n}\n.function-btn.system:hover .btn-icon[data-v-533d9661] {\n  background: rgba(107, 114, 128, 0.15);\n  border-color: rgba(107, 114, 128, 0.3);\n}\n\n/* ç¦ç”¨çŠ¶æ€æ ·å¼ */\n.function-btn[data-v-533d9661]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  background: var(--color-surface-light);\n}\n.function-btn[data-v-533d9661]:disabled:hover {\n  background: var(--color-surface-light);\n  transform: none;\n  box-shadow: none;\n  border-color: var(--color-border);\n}\n.function-btn:disabled .btn-icon[data-v-533d9661] {\n  background: var(--color-background);\n  border-color: var(--color-border);\n}\n.function-btn:disabled .btn-arrow[data-v-533d9661] {\n  opacity: 0.3;\n  transform: none;\n}\n.function-btn.disabled[data-v-533d9661] {\n  position: relative;\n  opacity: 0.6;\n}\n.disabled-text[data-v-533d9661] {\n  font-style: italic;\n  opacity: 0.7;\n}\n\n/* é€€å‡ºæŒ‰é’®ç‰¹æ®Šæ ·å¼ */\n.exit-btn[data-v-533d9661] {\n  border-color: var(--color-error);\n  background: rgba(239, 68, 68, 0.05);\n}\n.exit-btn[data-v-533d9661]:hover {\n  background: rgba(239, 68, 68, 0.1);\n  border-color: var(--color-error);\n  box-shadow: 0 4px 20px rgba(239, 68, 68, 0.15);\n}\n.exit-btn .btn-text[data-v-533d9661] {\n  color: var(--color-error);\n}\n.exit-btn .btn-desc[data-v-533d9661] {\n  color: rgba(239, 68, 68, 0.7);\n}\n.exit-btn .btn-icon[data-v-533d9661] {\n  background: rgba(239, 68, 68, 0.1);\n  border-color: rgba(239, 68, 68, 0.2);\n}\n.exit-btn:hover .btn-icon[data-v-533d9661] {\n  background: rgba(239, 68, 68, 0.15);\n  border-color: rgba(239, 68, 68, 0.3);\n}\n\n/* æ·±è‰²ä¸»é¢˜æ— éœ€é¢å¤–é€‚é…ï¼šå·²ç»Ÿä¸€ä½¿ç”¨ä¸»é¢˜å˜é‡ */\n\n/* å“åº”å¼é€‚é… */\n@media (max-width: 768px) {\n.left-sidebar[data-v-533d9661] {\n    padding: 12px;\n}\n.function-btn[data-v-533d9661] {\n    padding: 6px 8px;\n}\n.btn-icon[data-v-533d9661] {\n    width: 24px;\n    height: 24px;\n}\n.btn-text[data-v-533d9661] {\n    font-size: 0.75rem;\n}\n.btn-desc[data-v-533d9661] {\n    font-size: 0.6rem;\n}\n}\n",""]);const s=i},8133:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("flask-conical",[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]])},8139:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.title-section[data-v-a2b6e2a4] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.preset-count[data-v-a2b6e2a4] {\n  padding: 0.25rem 0.6rem;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n  border-radius: 12px;\n  font-size: 0.75rem;\n  color: var(--color-primary);\n  font-weight: 600;\n}\n.header-actions[data-v-a2b6e2a4] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.btn-action[data-v-a2b6e2a4] {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n  padding: 0.5rem 0.9rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: var(--color-surface-lighter);\n  color: var(--color-text);\n  cursor: pointer;\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n.btn-action .btn-icon[data-v-a2b6e2a4] {\n  font-size: 1.1rem;\n  display: flex;\n  align-items: center;\n}\n.btn-action .btn-text[data-v-a2b6e2a4] {\n  white-space: nowrap;\n}\n.btn-action.import[data-v-a2b6e2a4]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.1));\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(var(--color-primary-rgb), 0.2);\n}\n.btn-action.export[data-v-a2b6e2a4]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-accent-rgb), 0.1), rgba(var(--color-primary-rgb), 0.1));\n  border-color: var(--color-accent);\n  color: var(--color-accent);\n  transform: translateY(-1px);\n  box-shadow: 0 2px 8px rgba(var(--color-accent-rgb), 0.2);\n}\n.btn-delete[data-v-a2b6e2a4] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  font-size: 1.2rem;\n  padding: 0 0.5rem;\n  border-radius: 4px;\n  margin-left: 0.5rem;\n  transition: all 0.2s ease;\n}\n.btn-delete[data-v-a2b6e2a4]:hover {\n  background-color: rgba(var(--color-danger-rgb), 0.1);\n  color: var(--color-danger);\n}\n.preset-actions[data-v-a2b6e2a4] {\n  display: flex;\n  align-items: center;\n}\n.modal-overlay[data-v-a2b6e2a4] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n}\n.modal-container[data-v-a2b6e2a4] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  width: 90%;\n  max-width: 600px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  animation: slideUp-a2b6e2a4 0.3s ease-out;\n}\n@keyframes slideUp-a2b6e2a4 {\nfrom {\n    opacity: 0;\n    transform: translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.modal-header[data-v-a2b6e2a4] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-title[data-v-a2b6e2a4] {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: var(--color-text);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.modal-close[data-v-a2b6e2a4] {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n.modal-close[data-v-a2b6e2a4]:hover {\n  background: rgba(var(--color-primary-rgb), 0.1);\n  color: var(--color-text);\n}\n.modal-content[data-v-a2b6e2a4] {\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n  min-height: 200px;\n}\n\n/* Loading State */\n.loading-state[data-v-a2b6e2a4] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem;\n  gap: 1rem;\n}\n.spinner[data-v-a2b6e2a4] {\n  width: 40px;\n  height: 40px;\n  border: 3px solid rgba(var(--color-primary-rgb), 0.2);\n  border-top-color: var(--color-primary);\n  border-radius: 50%;\n  animation: spin-a2b6e2a4 1s linear infinite;\n}\n@keyframes spin-a2b6e2a4 {\nto {\n    transform: rotate(360deg);\n}\n}\n\n/* Empty State */\n.empty-state[data-v-a2b6e2a4] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem 2rem;\n  text-align: center;\n}\n.empty-icon[data-v-a2b6e2a4] {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n  opacity: 0.5;\n}\n.empty-state p[data-v-a2b6e2a4] {\n  margin: 0.5rem 0;\n  color: var(--color-text-secondary);\n}\n.empty-hint[data-v-a2b6e2a4] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  opacity: 0.7;\n  max-width: 300px;\n}\n\n/* Presets List */\n.presets-list[data-v-a2b6e2a4] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n.preset-item[data-v-a2b6e2a4] {\n  padding: 1rem;\n  border: 2px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  background: var(--color-surface-light);\n}\n.preset-item[data-v-a2b6e2a4]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface-lighter);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n.preset-item.selected[data-v-a2b6e2a4] {\n  border-color: var(--color-primary);\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.1));\n  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);\n}\n.preset-header[data-v-a2b6e2a4] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n.preset-name[data-v-a2b6e2a4] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.preset-date[data-v-a2b6e2a4] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.preset-description[data-v-a2b6e2a4] {\n  margin: 0.5rem 0;\n  font-size: 0.9rem;\n  color: var(--color-text-secondary);\n  line-height: 1.4;\n}\n.preset-info[data-v-a2b6e2a4] {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n  flex-wrap: wrap;\n}\n.info-tag[data-v-a2b6e2a4] {\n  padding: 0.25rem 0.75rem;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n  border-radius: 12px;\n  font-size: 0.75rem;\n  color: var(--color-primary);\n}\n.info-tag.name-tag[data-v-a2b6e2a4] {\n  background: linear-gradient(135deg, rgba(var(--color-accent-rgb), 0.15), rgba(var(--color-primary-rgb), 0.15));\n  border-color: var(--color-accent);\n  color: var(--color-accent);\n  font-weight: 600;\n}\n.info-tag.age-tag[data-v-a2b6e2a4] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  border-color: rgba(var(--color-success-rgb), 0.3);\n  color: var(--color-success);\n}\n.modal-footer[data-v-a2b6e2a4] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n}\n.btn[data-v-a2b6e2a4] {\n  padding: 0.7rem 1.5rem;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n.btn-cancel[data-v-a2b6e2a4] {\n  background: var(--color-surface-lighter);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n.btn-cancel[data-v-a2b6e2a4]:hover:not(:disabled) {\n  background: rgba(var(--color-text-rgb), 0.05);\n  border-color: var(--color-text-secondary);\n}\n.btn-confirm[data-v-a2b6e2a4] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: #fff;\n  border: none;\n  min-width: 120px;\n}\n.btn-confirm[data-v-a2b6e2a4]:hover:not(:disabled) {\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);\n  transform: translateY(-2px);\n}\n.btn-confirm[data-v-a2b6e2a4]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n.modal-container[data-v-a2b6e2a4] {\n    width: 95%;\n    max-width: 100%;\n    border-radius: 8px;\n}\n.modal-header[data-v-a2b6e2a4] {\n    padding: 1rem;\n}\n.modal-title[data-v-a2b6e2a4] {\n    font-size: 1.1rem;\n}\n.btn-action .btn-text[data-v-a2b6e2a4] {\n    display: none;\n}\n.btn-action[data-v-a2b6e2a4] {\n    padding: 0.5rem;\n    min-width: 36px;\n}\n.modal-content[data-v-a2b6e2a4] {\n    padding: 1rem;\n}\n.preset-item[data-v-a2b6e2a4] {\n    padding: 0.75rem;\n}\n.modal-footer[data-v-a2b6e2a4] {\n    padding: 1rem;\n    flex-direction: column-reverse;\n    gap: 0.75rem;\n}\n.btn[data-v-a2b6e2a4] {\n    width: 100%;\n    padding: 0.8rem 1rem;\n}\n}\n",""]);const s=i},8185:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,'\n/* ========== æ·±è‰²ç»ç’ƒæ‹Ÿæ€é£æ ¼ ========== */\n.world-selection-container[data-v-04af55ae] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n}\n.loading-state[data-v-04af55ae], .error-state[data-v-04af55ae], .placeholder[data-v-04af55ae] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  font-size: 1.1rem;\n  color: #94a3b8;\n  font-style: italic;\n}\n.world-layout[data-v-04af55ae] {\n  display: grid;\n  grid-template-columns: 1fr 2fr;\n  gap: 1.5rem;\n  height: 100%;\n  overflow: hidden;\n}\n\n/* ========== å·¦ä¾§é¢æ¿ ========== */\n.left-panel[data-v-04af55ae] {\n  display: flex;\n  flex-direction: column;\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n/* é¡¶éƒ¨åŠŸèƒ½æŒ‰é’® */\n.top-actions-container[data-v-04af55ae] {\n  display: flex;\n  gap: 0.5rem;\n  padding: 0.75rem;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.06);\n  background: rgba(30, 41, 59, 0.3);\n  justify-content: flex-end;\n}\n.top-actions-container .action-item[data-v-04af55ae] {\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #cbd5e1;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  font-size: 0.85rem;\n  font-weight: 500;\n  white-space: nowrap;\n  letter-spacing: 0.05em;\n}\n.top-actions-container .action-item[data-v-04af55ae]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  border-color: rgba(147, 197, 253, 0.3);\n  color: #f1f5f9;\n}\n.list-container[data-v-04af55ae] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.list-container[data-v-04af55ae]::-webkit-scrollbar {\n  width: 6px;\n}\n.list-container[data-v-04af55ae]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.list-container[data-v-04af55ae]::-webkit-scrollbar-thumb {\n  background: rgba(147, 197, 253, 0.3);\n  border-radius: 3px;\n}\n.list-container[data-v-04af55ae]::-webkit-scrollbar-thumb:hover {\n  background: rgba(147, 197, 253, 0.5);\n}\n\n/* ========== é€‰é¡¹å¡æ ·å¼ ========== */\n.list-item[data-v-04af55ae] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.9rem 1rem;\n  margin-bottom: 0.5rem;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  border: 1px solid transparent;\n  background: rgba(30, 41, 59, 0.4);\n}\n.list-item[data-v-04af55ae]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(147, 197, 253, 0.2);\n}\n.list-item.selected[data-v-04af55ae] {\n  background: rgba(30, 58, 138, 0.4);\n  border-color: rgba(147, 197, 253, 0.4);\n  box-shadow: 0 0 0 1px rgba(147, 197, 253, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05);\n}\n.item-content[data-v-04af55ae] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n}\n.item-name[data-v-04af55ae] {\n  flex-grow: 1;\n  font-weight: 500;\n  color: #f1f5f9;\n}\n.list-item.selected .item-name[data-v-04af55ae] {\n  color: #bfdbfe;\n}\n\n/* æŒ‰é’®ç»„å®¹å™¨ */\n.action-buttons[data-v-04af55ae] {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  opacity: 0;\n  transition: opacity 0.2s;\n  margin-left: 0.5rem;\n}\n.list-item:hover .action-buttons[data-v-04af55ae] {\n  opacity: 1;\n}\n.edit-btn[data-v-04af55ae], .delete-btn[data-v-04af55ae] {\n  background: none;\n  border: none;\n  color: #64748b;\n  cursor: pointer;\n  padding: 0.35rem;\n  border-radius: 4px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n}\n.edit-btn[data-v-04af55ae]:hover {\n  color: #93c5fd;\n  background: rgba(147, 197, 253, 0.1);\n}\n.delete-btn[data-v-04af55ae]:hover {\n  color: #f87171;\n  background: rgba(248, 113, 113, 0.1);\n}\n\n/* ========== å³ä¾§è¯¦æƒ…é¢æ¿ ========== */\n.details-container[data-v-04af55ae] {\n  background: rgba(30, 41, 59, 0.5);\n  border: 1px solid rgba(255, 255, 255, 0.06);\n  border-radius: 12px;\n  padding: 1.5rem;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  min-height: 0;\n}\n.world-details[data-v-04af55ae] {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n  overflow: hidden;\n}\n.details-header[data-v-04af55ae] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n}\n.details-title[data-v-04af55ae] {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 600;\n  color: #93c5fd;\n  text-shadow: 0 0 20px rgba(147, 197, 253, 0.3);\n}\n.map-settings-btn[data-v-04af55ae] {\n  display: inline-flex;\n  align-items: center;\n  gap: 6px;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #cbd5e1;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  font-size: 0.85rem;\n}\n.map-settings-btn[data-v-04af55ae]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  border-color: rgba(147, 197, 253, 0.3);\n  color: #f1f5f9;\n}\n.world-details h2[data-v-04af55ae] {\n  margin-top: 0;\n  color: #93c5fd;\n  flex-shrink: 0;\n}\n.world-details .era[data-v-04af55ae] {\n  font-style: italic;\n  color: #fbbf24;\n  margin-bottom: 1rem;\n  flex-shrink: 0;\n  font-size: 0.9rem;\n}\n.description-scroll[data-v-04af55ae] {\n  flex: 1;\n  overflow-y: auto;\n  line-height: 1.7;\n  padding-right: 0.5rem;\n  min-height: 0;\n  scrollbar-width: thin;\n  scrollbar-color: rgba(147, 197, 253, 0.3) transparent;\n}\n.description-scroll[data-v-04af55ae]::-webkit-scrollbar {\n  width: 6px;\n}\n.description-scroll[data-v-04af55ae]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.description-scroll[data-v-04af55ae]::-webkit-scrollbar-thumb {\n  background: rgba(147, 197, 253, 0.3);\n  border-radius: 3px;\n}\n.description-scroll p[data-v-04af55ae] {\n  margin: 0;\n  white-space: pre-wrap;\n  color: #94a3b8;\n}\n\n/* ========== åœ°å›¾ç”Ÿæˆé€‰é¡¹æ ·å¼ ========== */\n.map-options[data-v-04af55ae] {\n  margin-top: 0.8rem;\n  border: 1px dashed rgba(147, 197, 253, 0.2);\n  border-radius: 8px;\n  padding: 1rem;\n  background: rgba(30, 41, 59, 0.4);\n  flex: 1 1 auto;\n  overflow: auto;\n}\n\n/* ä»…ç”Ÿæˆå¤§é™†å¼€å…³ */\n.continents-only-section[data-v-04af55ae] {\n  margin-bottom: 1rem;\n  padding: 0.75rem;\n  background: rgba(147, 197, 253, 0.05);\n  border: 1px solid rgba(147, 197, 253, 0.15);\n  border-radius: 8px;\n}\n\n/* ä¿®ä»™éš¾åº¦é€‰æ‹©æ ·å¼ */\n.difficulty-section[data-v-04af55ae] {\n  margin-bottom: 1rem;\n  padding: 0.75rem;\n  background: rgba(251, 191, 36, 0.05);\n  border: 1px solid rgba(251, 191, 36, 0.15);\n  border-radius: 8px;\n}\n.difficulty-label[data-v-04af55ae] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #fbbf24;\n  margin-bottom: 0.5rem;\n}\n.difficulty-options[data-v-04af55ae] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n.difficulty-option[data-v-04af55ae] {\n  display: flex;\n  flex-direction: column;\n  padding: 0.5rem 0.75rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  background: rgba(30, 41, 59, 0.4);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.difficulty-option[data-v-04af55ae]:hover {\n  background: rgba(51, 65, 85, 0.6);\n  border-color: rgba(251, 191, 36, 0.3);\n}\n.difficulty-option.selected[data-v-04af55ae] {\n  background: rgba(251, 191, 36, 0.15);\n  border-color: rgba(251, 191, 36, 0.5);\n}\n.difficulty-radio[data-v-04af55ae] {\n  display: none;\n}\n.difficulty-name[data-v-04af55ae] {\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: #f1f5f9;\n}\n.difficulty-option.selected .difficulty-name[data-v-04af55ae] {\n  color: #fbbf24;\n}\n.difficulty-desc[data-v-04af55ae] {\n  font-size: 0.7rem;\n  color: #94a3b8;\n  margin-top: 0.2rem;\n}\n.continents-only-toggle[data-v-04af55ae] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  cursor: pointer;\n  user-select: none;\n}\n.toggle-checkbox[data-v-04af55ae] {\n  width: 18px;\n  height: 18px;\n  cursor: pointer;\n  accent-color: var(--color-primary, #93c5fd);\n}\n.toggle-label[data-v-04af55ae] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: #93c5fd;\n}\n.toggle-hint[data-v-04af55ae] {\n  margin-top: 0.5rem;\n  font-size: 0.75rem;\n  color: #94a3b8;\n  line-height: 1.4;\n  padding-left: 1.625rem; /* å¯¹é½checkboxåçš„æ–‡æœ¬ */\n}\n.config-warning[data-v-04af55ae] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  margin-bottom: 1rem;\n  background: rgba(251, 191, 36, 0.1);\n  border: 1px solid rgba(251, 191, 36, 0.25);\n  border-radius: 8px;\n}\n.warning-icon[data-v-04af55ae] {\n  font-size: 1.2rem;\n  flex-shrink: 0;\n}\n.warning-text[data-v-04af55ae] {\n  flex: 1;\n}\n.warning-title[data-v-04af55ae] {\n  font-weight: 600;\n  font-size: 0.9rem;\n  margin-bottom: 0.25rem;\n  color: #fbbf24;\n}\n.warning-desc[data-v-04af55ae] {\n  font-size: 0.8rem;\n  color: #94a3b8;\n  line-height: 1.4;\n}\n.option-item input.config-risky[data-v-04af55ae] {\n  border-color: rgba(251, 191, 36, 0.5);\n  background-color: rgba(251, 191, 36, 0.05);\n}\n.config-hint[data-v-04af55ae] {\n  font-size: 0.7rem;\n  color: #64748b;\n  margin-top: 0.2rem;\n}\n.map-options-header[data-v-04af55ae] {\n  font-weight: 600;\n  color: #93c5fd;\n  margin-bottom: 0.75rem;\n  font-size: 0.95rem;\n}\n.map-options-grid[data-v-04af55ae] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));\n  gap: 0.75rem;\n}\n.geo-grid[data-v-04af55ae] {\n  margin-top: 0.75rem;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n}\n.range-inputs[data-v-04af55ae] {\n  display: flex;\n  align-items: center;\n  gap: 0.4rem;\n}\n.range-inputs input[data-v-04af55ae] {\n  flex: 1;\n  min-width: 0;\n}\n.range-inputs span[data-v-04af55ae] {\n  color: #64748b;\n}\n.option-item[data-v-04af55ae] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.3rem;\n}\n.option-label[data-v-04af55ae] {\n  font-size: 0.8rem;\n  color: #94a3b8;\n}\n.option-item input[data-v-04af55ae] {\n  width: 100%;\n  padding: 0.5rem 0.6rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #f1f5f9;\n  font-size: 0.85rem;\n}\n.option-item input[data-v-04af55ae]:focus {\n  outline: none;\n  border-color: rgba(147, 197, 253, 0.4);\n}\n.map-options-actions[data-v-04af55ae] {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n}\n.opt-btn[data-v-04af55ae] {\n  padding: 0.5rem 1rem;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  background: rgba(30, 41, 59, 0.6);\n  color: #cbd5e1;\n  cursor: pointer;\n  transition: all 0.25s ease;\n  font-size: 0.85rem;\n}\n.opt-btn[data-v-04af55ae]:hover {\n  background: rgba(51, 65, 85, 0.8);\n  border-color: rgba(147, 197, 253, 0.3);\n  color: #f1f5f9;\n}\n\n/* é«˜çº§é€‰é¡¹ */\n.advanced-section[data-v-04af55ae] {\n  margin-top: 0.75rem;\n  border-top: 1px solid rgba(255, 255, 255, 0.06);\n  padding-top: 0.75rem;\n}\n.advanced-toggle[data-v-04af55ae] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  background: none;\n  border: none;\n  color: #64748b;\n  cursor: pointer;\n  font-size: 0.8rem;\n  padding: 0.25rem 0;\n  transition: color 0.2s;\n}\n.advanced-toggle[data-v-04af55ae]:hover {\n  color: #94a3b8;\n}\n.advanced-content[data-v-04af55ae] {\n  margin-top: 0.75rem;\n}\n\n/* ========== ç©ºçŠ¶æ€ ========== */\n.no-worlds-message[data-v-04af55ae] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  text-align: center;\n  color: #64748b;\n}\n.no-worlds-icon[data-v-04af55ae] {\n  font-size: 2.5rem;\n  margin-bottom: 1rem;\n  opacity: 0.6;\n}\n.no-worlds-text[data-v-04af55ae] {\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n  color: #94a3b8;\n}\n.no-worlds-hint[data-v-04af55ae] {\n  font-size: 0.85rem;\n  opacity: 0.7;\n  font-style: italic;\n}\n\n/* ========== äº®è‰²ä¸»é¢˜é€‚é… ========== */\n[data-theme="light"] .left-panel[data-v-04af55ae],\n[data-theme="light"] .details-container[data-v-04af55ae] {\n  background: rgba(248, 250, 252, 0.8);\n  border-color: rgba(0, 0, 0, 0.08);\n}\n[data-theme="light"] .top-actions-container[data-v-04af55ae] {\n  background: rgba(241, 245, 249, 0.8);\n  border-color: rgba(0, 0, 0, 0.06);\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-04af55ae] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(0, 0, 0, 0.1);\n  color: #475569;\n}\n[data-theme="light"] .top-actions-container .action-item[data-v-04af55ae]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.3);\n  color: #1e293b;\n}\n[data-theme="light"] .list-item[data-v-04af55ae] {\n  background: rgba(255, 255, 255, 0.6);\n}\n[data-theme="light"] .list-item[data-v-04af55ae]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .list-item.selected[data-v-04af55ae] {\n  background: rgba(219, 234, 254, 0.8);\n  border-color: rgba(59, 130, 246, 0.4);\n}\n[data-theme="light"] .item-name[data-v-04af55ae] {\n  color: #1e293b;\n}\n[data-theme="light"] .list-item.selected .item-name[data-v-04af55ae] {\n  color: #1e40af;\n}\n[data-theme="light"] .details-title[data-v-04af55ae],\n[data-theme="light"] .world-details h2[data-v-04af55ae] {\n  color: #2563eb;\n}\n[data-theme="light"] .description-scroll p[data-v-04af55ae] {\n  color: #475569;\n}\n[data-theme="light"] .map-options[data-v-04af55ae] {\n  background: rgba(241, 245, 249, 0.8);\n  border-color: rgba(59, 130, 246, 0.2);\n}\n[data-theme="light"] .option-item input[data-v-04af55ae] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(0, 0, 0, 0.1);\n  color: #1e293b;\n}\n[data-theme="light"] .opt-btn[data-v-04af55ae] {\n  background: rgba(255, 255, 255, 0.8);\n  border-color: rgba(0, 0, 0, 0.1);\n  color: #475569;\n}\n[data-theme="light"] .opt-btn[data-v-04af55ae]:hover {\n  background: rgba(241, 245, 249, 0.95);\n  border-color: rgba(59, 130, 246, 0.3);\n}\n.action-name[data-v-04af55ae] {\n  font-weight: 500;\n}\n\n/* å“åº”å¼é€‚é… */\n@media (max-width: 1024px) {\n.world-layout[data-v-04af55ae] {\n    grid-template-columns: 1fr 1.5fr;\n    gap: 1.2rem;\n}\n}\n@media (max-width: 640px) {\n.top-actions-container[data-v-04af55ae] {\n    flex-wrap: wrap;\n    justify-content: stretch;\n    gap: 0.5rem;\n}\n.top-actions-container .action-item[data-v-04af55ae] {\n    flex: 1 1 45%;\n    text-align: center;\n    min-width: 120px;\n}\n\n  /* ç§»åŠ¨ç«¯ä¼˜åŒ–ï¼šå¼€å…³å’Œæç¤ºåœ¨å°å±ä¸Šæ›´ç´§å‡‘ */\n.continents-only-section[data-v-04af55ae] {\n    padding: 0.5rem;\n}\n.toggle-label[data-v-04af55ae] {\n    font-size: 0.85rem;\n}\n.toggle-hint[data-v-04af55ae] {\n    font-size: 0.7rem;\n    padding-left: 1.4rem;\n}\n.world-layout[data-v-04af55ae] {\n    /* æ”¹ä¸ºå‚ç›´å †å å¸ƒå±€ */\n    display: flex;\n    flex-direction: column;\n    gap: 0.75rem;\n    height: 100%;\n    overflow: hidden;\n    padding: 0;\n}\n.left-panel[data-v-04af55ae] {\n    order: 1;\n    flex-shrink: 0;\n    max-height: 35vh;\n    overflow: hidden;\n}\n.details-container[data-v-04af55ae] {\n    order: 2;\n    flex: 1;\n    min-height: 0;\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n}\n.list-container[data-v-04af55ae] {\n    max-height: calc(35vh - 60px); /* å‡å»é¡¶éƒ¨æŒ‰é’®é«˜åº¦ */\n    overflow-y: auto;\n    /* æ·»åŠ è§¦æ‘¸æ»šåŠ¨ä¼˜åŒ– */\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: thin;\n}\n\n  /* ä¼˜åŒ–è§¦æ‘¸ä½“éªŒ */\n.list-item[data-v-04af55ae],\n  .action-item[data-v-04af55ae] {\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n}\n.map-options-grid[data-v-04af55ae] { grid-template-columns: 1fr;\n}\n\n  /* ç»†èŠ‚ä¼˜åŒ– */\n.list-item[data-v-04af55ae] {\n    padding: 0.7rem 0.9rem;\n    font-size: 0.95rem;\n    margin-bottom: 0.4rem;\n}\n.single-actions-container[data-v-04af55ae] {\n    padding: 0.5rem;\n    gap: 0.4rem;\n}\n.action-item[data-v-04af55ae] {\n    padding: 0.7rem 1rem;\n    font-size: 0.9rem;\n}\n.details-container[data-v-04af55ae] {\n    padding: 0.75rem;\n}\n}\n@media (max-width: 480px) {\n.top-actions-container[data-v-04af55ae] {\n    flex-direction: column;\n    align-items: stretch;\n    padding: 0.4rem;\n    gap: 0.4rem;\n}\n.top-actions-container .action-item[data-v-04af55ae] {\n    flex: 1 1 100%;\n    text-align: center;\n}\n.world-selection-container[data-v-04af55ae] {\n    padding: 0.3rem;\n    height: 100%;\n}\n.world-layout[data-v-04af55ae] {\n    gap: 0.5rem;\n}\n.left-panel[data-v-04af55ae] {\n    max-height: 32vh;\n}\n.list-container[data-v-04af55ae] {\n    max-height: calc(32vh - 110px); /* å‡å»é¡¶éƒ¨æŒ‰é’®å †å åçš„é«˜åº¦ */\n    padding: 0.4rem;\n}\n.list-item[data-v-04af55ae] {\n    padding: 0.6rem 0.8rem;\n    font-size: 0.9rem;\n    margin-bottom: 0.3rem;\n    border-radius: 4px;\n}\n.details-container[data-v-04af55ae] {\n    padding: 0.75rem;\n    border-radius: 6px;\n}\n.world-details h2[data-v-04af55ae] {\n    font-size: 1.2rem;\n    margin-bottom: 0.5rem;\n}\n.world-details .era[data-v-04af55ae] {\n    font-size: 0.9rem;\n    margin-bottom: 0.8rem;\n}\n.description-scroll[data-v-04af55ae] {\n    font-size: 0.9rem;\n    line-height: 1.5;\n    padding-right: 0.3rem;\n}\n.single-actions-container[data-v-04af55ae] {\n    flex-direction: column;\n    gap: 0.4rem;\n    padding: 0.4rem;\n}\n.action-item[data-v-04af55ae] {\n    padding: 0.6rem;\n    font-size: 0.85rem;\n    border-radius: 4px;\n}\n.placeholder[data-v-04af55ae] {\n    font-size: 1rem;\n    padding: 1rem;\n    text-align: center;\n    min-height: 100px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n}\n@media (max-width: 360px) {\n.world-selection-container[data-v-04af55ae] {\n    padding: 0.3rem;\n}\n.world-layout[data-v-04af55ae] {\n    gap: 0.4rem;\n    padding: 0;\n}\n.left-panel[data-v-04af55ae] {\n    max-height: 28vh;\n}\n.list-container[data-v-04af55ae] {\n    max-height: 24vh;\n    padding: 0.3rem;\n}\n.list-item[data-v-04af55ae] {\n    padding: 0.5rem 0.6rem;\n    font-size: 0.85rem;\n    margin-bottom: 0.2rem;\n}\n.details-container[data-v-04af55ae] {\n    padding: 0.8rem;\n    min-height: 120px;\n}\n.world-details h2[data-v-04af55ae] {\n    font-size: 1.1rem;\n    margin-bottom: 0.4rem;\n}\n.world-details .era[data-v-04af55ae] {\n    font-size: 0.8rem;\n    margin-bottom: 0.6rem;\n}\n.description-scroll[data-v-04af55ae] {\n    font-size: 0.85rem;\n    line-height: 1.4;\n}\n.action-item[data-v-04af55ae] {\n    padding: 0.5rem;\n    font-size: 0.8rem;\n}\n.placeholder[data-v-04af55ae] {\n    font-size: 0.9rem;\n    padding: 0.8rem;\n}\n}\n',""]);const s=i},8233:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.cloud-sync-button[data-v-1f7f5d72] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 0.3rem;\n  padding: 0.5rem 0.8rem;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  font-size: 0.85rem;\n  min-width: 80px;\n  white-space: nowrap;\n}\n.cloud-sync-button[data-v-1f7f5d72]:hover {\n  background: var(--color-surface-lighter);\n  border-color: var(--color-primary);\n  color: var(--color-primary);\n}\n.sync-text[data-v-1f7f5d72] {\n  font-weight: 500;\n}\n.sync-icon[data-v-1f7f5d72] {\n  font-size: 1em;\n  flex-shrink: 0;\n}\n\n/* å·²åŒæ­¥çŠ¶æ€æ ·å¼ */\n.cloud-sync-button.synced[data-v-1f7f5d72] {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-success-rgb), 0.1));\n  border-color: var(--color-success);\n  color: var(--color-success);\n}\n.cloud-sync-button[data-v-1f7f5d72]:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n.cloud-sync-button.synced[data-v-1f7f5d72]:hover {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.2), rgba(var(--color-success-rgb), 0.2));\n}\n\n/* Size variants */\n.cloud-sync-button.small[data-v-1f7f5d72] {\n  padding: 0.5rem 0.75rem;\n  font-size: 0.9rem;\n  min-width: 100px;\n}\n.cloud-sync-button.large[data-v-1f7f5d72] {\n  padding: 1rem 1.5rem;\n  font-size: 1.1rem;\n  min-width: 180px;\n}\n\n/* Compact variant */\n.cloud-sync-button.compact[data-v-1f7f5d72] {\n  min-width: auto;\n  padding: 0.5rem;\n}\n.cloud-sync-button.compact .sync-text[data-v-1f7f5d72] {\n  display: none;\n}\n",""]);const s=i},8381:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("scroll-text",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]])},8396:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(7044),n.b),d=i()(r()),u=l()(c);d.push([e.id,`/*\n * ä»™é€” - ç°ä»£åŒ–è®¾è®¡ç³»ç»Ÿ\n * Modern Design System for XianTu\n */\n\n/* ========== åŸºç¡€æŒ‰é’® ========== */\n.btn {\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  line-height: 1.5;\n  border-radius: 8px;\n  border: 1px solid transparent;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  white-space: nowrap;\n  user-select: none;\n}\n\n.btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  pointer-events: none;\n}\n\n.btn:focus-visible {\n  outline: 2px solid var(--color-primary);\n  outline-offset: 2px;\n}\n\n/* æŒ‰é’®å˜ä½“ */\n.btn-primary {\n  background: var(--color-primary);\n  color: #fff;\n  border-color: var(--color-primary);\n}\n.btn-primary:hover:not(:disabled) {\n  filter: brightness(1.1);\n  transform: translateY(-1px);\n}\n\n.btn-secondary {\n  background: var(--color-surface);\n  color: var(--color-text);\n  border-color: var(--color-border);\n}\n.btn-secondary:hover:not(:disabled) {\n  border-color: var(--color-primary);\n  background: var(--color-background);\n}\n\n.btn-ghost {\n  background: transparent;\n  color: var(--color-text-secondary);\n  border-color: transparent;\n}\n.btn-ghost:hover:not(:disabled) {\n  background: var(--color-surface);\n  color: var(--color-text);\n}\n\n.btn-danger {\n  background: #ef4444;\n  color: #fff;\n  border-color: #ef4444;\n}\n.btn-danger:hover:not(:disabled) {\n  background: #dc2626;\n}\n\n.btn-success {\n  background: #22c55e;\n  color: #fff;\n  border-color: #22c55e;\n}\n.btn-success:hover:not(:disabled) {\n  background: #16a34a;\n}\n\n/* æŒ‰é’®å°ºå¯¸ */\n.btn-xs { padding: 0.25rem 0.5rem; font-size: 0.75rem; }\n.btn-sm { padding: 0.375rem 0.75rem; font-size: 0.8125rem; }\n.btn-lg { padding: 0.75rem 1.5rem; font-size: 1rem; }\n\n/* å›¾æ ‡æŒ‰é’® */\n.btn-icon {\n  padding: 0.5rem;\n  border-radius: 8px;\n}\n.btn-icon.btn-sm { padding: 0.375rem; }\n.btn-icon.btn-xs { padding: 0.25rem; }\n\n/* ========== è¡¨å•æ§ä»¶ ========== */\n.input {\n  width: 100%;\n  padding: 0.625rem 0.875rem;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: var(--color-text);\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  transition: all 0.2s ease;\n}\n\n.input:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);\n}\n\n.input::placeholder {\n  color: var(--color-text-secondary);\n  opacity: 0.7;\n}\n\n.input:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  background: var(--color-surface);\n}\n\n/* è¾“å…¥æ¡†å°ºå¯¸ */\n.input-sm { padding: 0.375rem 0.625rem; font-size: 0.8125rem; }\n.input-lg { padding: 0.75rem 1rem; font-size: 1rem; }\n\n/* é€‰æ‹©æ¡† */\n.select {\n  appearance: none;\n  background-image: url(${u});\n  background-repeat: no-repeat;\n  background-position: right 0.75rem center;\n  background-size: 16px;\n  padding-right: 2.5rem;\n}\n\n/* è¡¨å•ç»„ */\n.form-group {\n  margin-bottom: 1rem;\n}\n\n.form-label {\n  display: block;\n  margin-bottom: 0.375rem;\n  font-size: 0.8125rem;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n}\n\n.form-hint {\n  margin-top: 0.25rem;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n\n/* ========== å¡ç‰‡ ========== */\n.card {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  overflow: hidden;\n}\n\n.card-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid var(--color-border);\n}\n\n.card-title {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n\n.card-body {\n  padding: 1.25rem;\n}\n\n.card-footer {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  gap: 0.5rem;\n  padding: 1rem 1.25rem;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-background);\n}\n\n/* å¡ç‰‡å˜ä½“ */\n.card-flat {\n  border: none;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.card-interactive {\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.card-interactive:hover {\n  border-color: var(--color-primary);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n}\n\n/* ========== æ ‡ç­¾é¡µ ========== */\n.tabs {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n}\n\n.tabs-list {\n  display: flex;\n  gap: 0.25rem;\n  padding: 0.5rem;\n  background: var(--color-surface);\n  border-bottom: 1px solid var(--color-border);\n}\n\n.tab-trigger {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.5rem 1rem;\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n  background: transparent;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.tab-trigger:hover {\n  background: var(--color-background);\n  color: var(--color-text);\n}\n\n.tab-trigger[data-state="active"],\n.tab-trigger.active {\n  background: var(--color-primary);\n  color: #fff;\n}\n\n.tabs-content {\n  flex: 1;\n  overflow-y: auto;\n  padding: 1rem;\n}\n\n/* ========== å¾½ç«  ========== */\n.badge {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding: 0.125rem 0.5rem;\n  font-size: 0.75rem;\n  font-weight: 500;\n  line-height: 1.5;\n  border-radius: 9999px;\n  white-space: nowrap;\n}\n\n.badge-default {\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n  border: 1px solid var(--color-border);\n}\n\n.badge-primary {\n  background: rgba(var(--color-primary-rgb), 0.15);\n  color: var(--color-primary);\n}\n\n.badge-success {\n  background: rgba(34, 197, 94, 0.15);\n  color: #22c55e;\n}\n\n.badge-warning {\n  background: rgba(245, 158, 11, 0.15);\n  color: #f59e0b;\n}\n\n.badge-danger {\n  background: rgba(239, 68, 68, 0.15);\n  color: #ef4444;\n}\n\n.badge-info {\n  background: rgba(59, 130, 246, 0.15);\n  color: #3b82f6;\n}\n\n/* ========== ç»Ÿè®¡å¡ç‰‡ ========== */\n.stat-card {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem 1.25rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n}\n\n.stat-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 48px;\n  height: 48px;\n  border-radius: 12px;\n  background: rgba(var(--color-primary-rgb), 0.1);\n  color: var(--color-primary);\n}\n\n.stat-content {\n  flex: 1;\n}\n\n.stat-value {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-text);\n  line-height: 1.2;\n}\n\n.stat-label {\n  font-size: 0.8125rem;\n  color: var(--color-text-secondary);\n  margin-top: 0.125rem;\n}\n\n/* ========== åˆ—è¡¨é¡¹ ========== */\n.list-item {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem 1rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.15s ease;\n}\n\n.list-item:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface);\n}\n\n.list-item.active {\n  border-color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.05);\n}\n\n.list-item-icon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 36px;\n  height: 36px;\n  border-radius: 8px;\n  background: var(--color-surface);\n  color: var(--color-text-secondary);\n}\n\n.list-item-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.list-item-title {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--color-text);\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.list-item-subtitle {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  margin-top: 0.125rem;\n}\n\n.list-item-action {\n  color: var(--color-text-secondary);\n}\n\n/* ========== ç©ºçŠ¶æ€ ========== */\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 3rem 1.5rem;\n  text-align: center;\n}\n\n.empty-icon {\n  color: var(--color-text-secondary);\n  opacity: 0.4;\n  margin-bottom: 1rem;\n}\n\n.empty-title {\n  font-size: 1rem;\n  font-weight: 600;\n  color: var(--color-text);\n  margin-bottom: 0.5rem;\n}\n\n.empty-description {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  max-width: 300px;\n}\n\n.empty-actions {\n  display: flex;\n  gap: 0.75rem;\n  margin-top: 1.5rem;\n}\n\n/* ========== åˆ†å‰²çº¿ ========== */\n.divider {\n  height: 1px;\n  background: var(--color-border);\n  margin: 1rem 0;\n}\n\n.divider-vertical {\n  width: 1px;\n  height: auto;\n  align-self: stretch;\n  margin: 0 0.75rem;\n}\n\n/* ========== å·¥å…·ç±» ========== */\n.text-muted { color: var(--color-text-secondary); }\n.text-primary { color: var(--color-primary); }\n.text-success { color: #22c55e; }\n.text-warning { color: #f59e0b; }\n.text-danger { color: #ef4444; }\n\n.font-medium { font-weight: 500; }\n.font-semibold { font-weight: 600; }\n.font-bold { font-weight: 700; }\n\n.text-xs { font-size: 0.75rem; }\n.text-sm { font-size: 0.875rem; }\n.text-base { font-size: 1rem; }\n.text-lg { font-size: 1.125rem; }\n\n.flex { display: flex; }\n.flex-col { flex-direction: column; }\n.items-center { align-items: center; }\n.justify-between { justify-content: space-between; }\n.gap-1 { gap: 0.25rem; }\n.gap-2 { gap: 0.5rem; }\n.gap-3 { gap: 0.75rem; }\n.gap-4 { gap: 1rem; }\n\n/* ========== åŠ¨ç”» ========== */\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes slideUp {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n\n.animate-fadeIn { animation: fadeIn 0.2s ease; }\n.animate-slideUp { animation: slideUp 0.3s ease; }\n.animate-pulse { animation: pulse 2s infinite; }\n\n/* ========== æ»šåŠ¨æ¡ ========== */\n.scrollbar-thin {\n  scrollbar-width: thin;\n  scrollbar-color: var(--color-border) transparent;\n}\n\n.scrollbar-thin::-webkit-scrollbar {\n  width: 6px;\n  height: 6px;\n}\n\n.scrollbar-thin::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.scrollbar-thin::-webkit-scrollbar-thumb {\n  background: var(--color-border);\n  border-radius: 3px;\n}\n\n.scrollbar-thin::-webkit-scrollbar-thumb:hover {\n  background: var(--color-text-secondary);\n}\n`,""]);const m=d},8470:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-01a0fb92] {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.modal-content[data-v-01a0fb92] {\n  background: var(--color-background);\n  border-radius: 12px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n  max-width: 500px;\n  width: 90%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.modal-header[data-v-01a0fb92] {\n  padding: 1.5rem 1.5rem 1rem 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.modal-header h3[data-v-01a0fb92] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.close-btn[data-v-01a0fb92] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 6px;\n  transition: all 0.2s;\n}\n.close-btn[data-v-01a0fb92]:hover {\n  background: var(--color-hover);\n  color: var(--color-text);\n}\n.modal-body[data-v-01a0fb92] {\n  padding: 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n}\n.form-group[data-v-01a0fb92] {\n  margin-bottom: 1rem;\n}\n.form-group label[data-v-01a0fb92] {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  color: var(--color-text);\n}\n.form-input[data-v-01a0fb92] {\n  width: 100%;\n  padding: 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.875rem;\n  outline: none;\n  transition: border-color 0.2s;\n}\n.form-input[data-v-01a0fb92]:focus {\n  border-color: var(--color-primary);\n}\n.form-textarea[data-v-01a0fb92] {\n  width: 100%;\n  min-height: 150px;\n  padding: 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.875rem;\n  font-family: 'Consolas', 'Monaco', monospace;\n  outline: none;\n  transition: border-color 0.2s;\n  resize: vertical;\n}\n.form-textarea[data-v-01a0fb92]:focus {\n  border-color: var(--color-primary);\n}\n.form-hint-text[data-v-01a0fb92] {\n  margin: 0.25rem 0 0 0;\n  font-size: 0.75rem;\n  color: var(--color-info);\n}\n.value-type-selector[data-v-01a0fb92] {\n  display: flex;\n  gap: 0.5rem;\n  margin-bottom: 0.75rem;\n  flex-wrap: wrap;\n}\n.type-btn[data-v-01a0fb92] {\n  padding: 0.375rem 0.75rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  font-size: 0.75rem;\n  transition: all 0.2s;\n}\n.type-btn[data-v-01a0fb92]:hover {\n  background: var(--color-hover);\n  border-color: var(--color-primary);\n  color: var(--color-text);\n}\n.type-btn.active[data-v-01a0fb92] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: white;\n  font-weight: 500;\n}\n.form-textarea.has-error[data-v-01a0fb92] {\n  border-color: var(--color-danger);\n}\n.error-message[data-v-01a0fb92] {\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: rgba(239, 68, 68, 0.1);\n  border: 1px solid var(--color-danger);\n  border-radius: 4px;\n  color: var(--color-danger);\n  font-size: 0.75rem;\n}\n.form-hint[data-v-01a0fb92] {\n  margin-top: 0.5rem;\n}\n.form-hint p[data-v-01a0fb92] {\n  margin: 0;\n  font-size: 0.75rem;\n  color: var(--color-success);\n}\n.preview-section[data-v-01a0fb92] {\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid var(--color-border);\n}\n.preview-section label[data-v-01a0fb92] {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n  color: var(--color-text);\n  font-size: 0.875rem;\n}\n.preview-content[data-v-01a0fb92] {\n  margin: 0;\n  padding: 0.75rem;\n  background: var(--color-code-bg);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.75rem;\n  font-family: 'Consolas', 'Monaco', monospace;\n  max-height: 150px;\n  overflow: auto;\n  white-space: pre-wrap;\n  word-break: break-word;\n}\n.modal-footer[data-v-01a0fb92] {\n  padding: 1rem 1.5rem;\n  border-top: 1px solid var(--color-border);\n  display: flex;\n  gap: 0.75rem;\n  justify-content: flex-end;\n}\n.cancel-btn[data-v-01a0fb92] {\n  padding: 0.75rem 1.5rem;\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  background: transparent;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  font-size: 0.875rem;\n  transition: all 0.2s;\n}\n.cancel-btn[data-v-01a0fb92]:hover {\n  background: var(--color-hover);\n  border-color: var(--color-text-secondary);\n  color: var(--color-text);\n}\n.save-btn[data-v-01a0fb92] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background: var(--color-primary);\n  border: none;\n  border-radius: 6px;\n  color: white;\n  cursor: pointer;\n  font-size: 0.875rem;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n.save-btn[data-v-01a0fb92]:hover:not(:disabled) {\n  background: var(--color-primary-hover);\n  transform: translateY(-1px);\n}\n.save-btn[data-v-01a0fb92]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n",""]);const s=i},8537:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-594e2d00] {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1000;\n}\n.modal-content[data-v-594e2d00] {\n  background: var(--color-background);\n  border-radius: 12px;\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);\n  max-width: 500px;\n  width: 90%;\n  max-height: 80vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n}\n.modal-content.stats-modal[data-v-594e2d00] {\n  max-width: 600px;\n}\n.modal-header[data-v-594e2d00] {\n  padding: 1.5rem 1.5rem 1rem 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.modal-header h3[data-v-594e2d00] {\n  margin: 0;\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.close-btn[data-v-594e2d00] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 6px;\n  transition: all 0.2s;\n}\n.close-btn[data-v-594e2d00]:hover {\n  background: var(--color-hover);\n  color: var(--color-text);\n}\n.modal-body[data-v-594e2d00] {\n  padding: 1.5rem;\n  overflow-y: auto;\n  flex: 1;\n}\n.stats-grid[data-v-594e2d00] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n.stat-card[data-v-594e2d00] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  padding: 1rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  transition: all 0.2s;\n}\n.stat-card[data-v-594e2d00]:hover {\n  background: var(--color-hover);\n  border-color: var(--color-primary);\n}\n.stat-icon[data-v-594e2d00] {\n  width: 40px;\n  height: 40px;\n  border-radius: 8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.stat-icon.core[data-v-594e2d00] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n}\n.stat-icon.global[data-v-594e2d00] {\n  background: rgba(34, 197, 94, 0.1);\n  color: #22c55e;\n}\n.stat-icon.memory[data-v-594e2d00] {\n  background: rgba(168, 85, 247, 0.1);\n  color: #a855f7;\n}\n.stat-icon.world[data-v-594e2d00] {\n  background: rgba(245, 158, 11, 0.1);\n  color: #f59e0b;\n}\n.stat-info[data-v-594e2d00] {\n  flex: 1;\n}\n.stat-value[data-v-594e2d00] {\n  font-size: 1.5rem;\n  font-weight: 700;\n  color: var(--color-text);\n  margin-bottom: 0.25rem;\n}\n.stat-label[data-v-594e2d00] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.data-size-info[data-v-594e2d00] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 1rem;\n}\n.data-size-info h4[data-v-594e2d00] {\n  margin: 0 0 0.75rem 0;\n  font-size: 0.95rem;\n  color: var(--color-text);\n}\n.size-list[data-v-594e2d00] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.size-item[data-v-594e2d00] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid var(--color-border);\n}\n.size-item[data-v-594e2d00]:last-child {\n  border-bottom: none;\n}\n.size-item span[data-v-594e2d00]:first-child {\n  color: var(--color-text-secondary);\n  font-size: 0.875rem;\n}\n.size-item span[data-v-594e2d00]:last-child {\n  color: var(--color-text);\n  font-weight: 500;\n  font-size: 0.875rem;\n}\n",""]);const s=i},8546:(e,t,n)=>{"use strict";function a(){return function(e){let t=e.trim();return t?(t=t.replace(/\/api\/v1\/?$/i,""),t=t.replace(/\/+$/,""),t):""}("https://back.ddct.top")}function r(){return!!a()}function o(e){const t=a();return t?`${t}${e.startsWith("/")?e:`/${e}`}`:""}async function i(){const e=a();if(!e)return null;try{const t=await fetch(`${e}/api/v1/version`,{method:"GET"});if(!t.ok)return null;const n=await t.json();if(n&&void 0!==n.version)return String(n.version)}catch{return null}return null}n.d(t,{d9:()=>i,isBackendConfigured:()=>r,mh:()=>o})},8636:(e,t,n)=>{"use strict";var a=n(920),r=n(7720),o=n(4765),i=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,c=Array.prototype.push,d=function(e,t){c.apply(e,l(t)?t:[t])},u=Date.prototype.toISOString,m=o.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:r.encode,encodeValuesOnly:!1,format:m,formatter:o.formatters[m],indices:!1,serializeDate:function(e){return u.call(e)},skipNulls:!1,strictNullHandling:!1},f={},g=function e(t,n,o,i,s,c,u,m,g,h,v,b,y,x,k,w,E,N){for(var S,V=t,_=N,C=0,A=!1;void 0!==(_=_.get(f))&&!A;){var D=_.get(t);if(C+=1,void 0!==D){if(D===C)throw new RangeError("Cyclic object value");A=!0}void 0===_.get(f)&&(C=0)}if("function"==typeof h?V=h(n,V):V instanceof Date?V=y(V):"comma"===o&&l(V)&&(V=r.maybeMap(V,function(e){return e instanceof Date?y(e):e})),null===V){if(c)return g&&!w?g(n,p.encoder,E,"key",x):n;V=""}if("string"==typeof(S=V)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||r.isBuffer(V))return g?[k(w?n:g(n,p.encoder,E,"key",x))+"="+k(g(V,p.encoder,E,"value",x))]:[k(n)+"="+k(String(V))];var T,B=[];if(void 0===V)return B;if("comma"===o&&l(V))w&&g&&(V=r.maybeMap(V,g)),T=[{value:V.length>0?V.join(",")||null:void 0}];else if(l(h))T=h;else{var I=Object.keys(V);T=v?I.sort(v):I}var z=m?n.replace(/\./g,"%2E"):n,M=i&&l(V)&&1===V.length?z+"[]":z;if(s&&l(V)&&0===V.length)return M+"[]";for(var P=0;P<T.length;++P){var R=T[P],$="object"==typeof R&&void 0!==R.value?R.value:V[R];if(!u||null!==$){var O=b&&m?R.replace(/\./g,"%2E"):R,L=l(V)?"function"==typeof o?o(M,O):M:M+(b?"."+O:"["+O+"]");N.set(t,C);var F=a();F.set(f,N),d(B,e($,L,o,i,s,c,u,m,"comma"===o&&w&&l(V)?null:g,h,v,b,y,x,k,w,E,F))}}return B};e.exports=function(e,t){var n,r=e,c=function(e){if(!e)return p;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=o.default;if(void 0!==e.format){if(!i.call(o.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var a,r=o.formatters[n],c=p.filter;if(("function"==typeof e.filter||l(e.filter))&&(c=e.filter),a=e.arrayFormat in s?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var d=void 0===e.allowDots?!0===e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:d,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:a,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:c,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof c.filter?r=(0,c.filter)("",r):l(c.filter)&&(n=c.filter);var u=[];if("object"!=typeof r||null===r)return"";var m=s[c.arrayFormat],f="comma"===m&&c.commaRoundTrip;n||(n=Object.keys(r)),c.sort&&n.sort(c.sort);for(var h=a(),v=0;v<n.length;++v){var b=n[v];c.skipNulls&&null===r[b]||d(u,g(r[b],b,m,f,c.allowEmptyArrays,c.strictNullHandling,c.skipNulls,c.encodeDotInKeys,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,h))}var y=u.join(c.delimiter),x=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),y.length>0?x+y:""}},8648:e=>{"use strict";e.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},8651:(e,t,n)=>{"use strict";n.r(t),n.d(t,{clearAllCharacterData:()=>l,getCurrentCharacterName:()=>s,getTavernHelper:()=>i,isTavernEnv:()=>o});var a=n(2288);function r(){if("undefined"==typeof window)return null;if(console.log("[Tavernæ£€æµ‹] å¼€å§‹æŸ¥æ‰¾ TavernHelper..."),console.log("[Tavernæ£€æµ‹] å½“å‰window.location:",window.location.href),window.TavernHelper)return console.log("[Tavernæ£€æµ‹] âœ… åœ¨å½“å‰windowæ‰¾åˆ°TavernHelper"),window.TavernHelper;try{if(console.log("[Tavernæ£€æµ‹] å°è¯•è®¿é—®window.top..."),window.top&&window.top!==window){if(console.log("[Tavernæ£€æµ‹] window.topå¯è®¿é—®ï¼Œæ£€æŸ¥TavernHelper..."),window.top.TavernHelper)return console.log("[Tavernæ£€æµ‹] âœ… åœ¨window.topæ‰¾åˆ°TavernHelper"),window.top.TavernHelper;console.log("[Tavernæ£€æµ‹] window.topæ²¡æœ‰TavernHelper")}}catch(e){console.log("[Tavernæ£€æµ‹] âš ï¸ è®¿é—®window.topå¤±è´¥ï¼ˆè·¨åŸŸï¼‰:",e)}let e=window;for(let t=0;t<5;t++)try{if(!e.parent||e.parent===e){console.log(`[Tavernæ£€æµ‹] å·²åˆ°è¾¾é¡¶å±‚ï¼ˆç¬¬${t+1}å±‚ï¼‰`);break}if(console.log(`[Tavernæ£€æµ‹] æ£€æŸ¥ç¬¬${t+1}å±‚parent...`),e.parent.TavernHelper)return console.log(`[Tavernæ£€æµ‹] âœ… åœ¨ç¬¬${t+1}å±‚parentæ‰¾åˆ°TavernHelper`),e.parent.TavernHelper;console.log(`[Tavernæ£€æµ‹] ç¬¬${t+1}å±‚parentæ²¡æœ‰TavernHelperï¼Œç»§ç»­å‘ä¸Š`),e=e.parent}catch(e){console.log(`[Tavernæ£€æµ‹] âš ï¸ è®¿é—®ç¬¬${t+1}å±‚parentå¤±è´¥ï¼ˆè·¨åŸŸï¼‰:`,e);break}return console.log("[Tavernæ£€æµ‹] âŒ æœªæ‰¾åˆ°TavernHelper"),null}function o(){return!!r()}function i(){return{generate:async e=>await a.aiService.generate(e),generateRaw:async e=>await a.aiService.generateRaw(e),getVariables:async e=>{const t=r();return t?await t.getVariables(e):{}},insertOrAssignVariables:async(e,t)=>{const n=r();if(n)return await n.insertOrAssignVariables(e,t)}}}async function s(){const e=i();if(!e)return null;try{const t=await e.getVariables({type:"global"});return t["persona.name"]||t.name||null}catch(e){return console.warn("[Tavern] æ— æ³•è·å–è§’è‰²å:",e),null}}async function l(){const e=i();if(e)try{await e.insertOrAssignVariables({},{type:"global"})}catch(e){throw console.error("[Tavern] æ¸…é™¤é…’é¦†å˜é‡å¤±è´¥:",e),e}else console.warn("[Tavern] é…’é¦†åŠ©æ‰‹ä¸å¯ç”¨ï¼Œè·³è¿‡æ¸…ç†")}},8684:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},8708:(e,t,n)=>{"use strict";n.d(t,{F:()=>r});var a=n(3302);function r(e){const t=function(e){a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—","å¼€å§‹è®¡ç®—å·²æŒæ¡æŠ€èƒ½...");const t=[],n=e?.è§’è‰²?.èƒŒåŒ…?.ç‰©å“;if(!n)return a.Yz.warn("æŒæ¡æŠ€èƒ½è®¡ç®—","èƒŒåŒ…ç‰©å“ä¸å­˜åœ¨ï¼Œè¿”å›ç©ºæ•°ç»„"),t;for(const[e,r]of Object.entries(n)){if("åŠŸæ³•"!==r?.ç±»å‹)continue;const e=r;if(!e.åŠŸæ³•æŠ€èƒ½||"object"!=typeof e.åŠŸæ³•æŠ€èƒ½){a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—",`åŠŸæ³• ${e.åç§°} æ²¡æœ‰æŠ€èƒ½å®šä¹‰`);continue}const n=e.ä¿®ç‚¼è¿›åº¦||0;a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—",`æ£€æŸ¥åŠŸæ³• ${e.åç§°}ï¼Œä¿®ç‚¼è¿›åº¦: ${n}`),e.å·²è§£é”æŠ€èƒ½||(e.å·²è§£é”æŠ€èƒ½=[]);for(const r of e.åŠŸæ³•æŠ€èƒ½){const o=r.æŠ€èƒ½åç§°,i=r.ç†Ÿç»ƒåº¦è¦æ±‚||0;a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—",`  æŠ€èƒ½ ${o}ï¼Œè§£é”é˜ˆå€¼: ${i}`),n>=i?(e.å·²è§£é”æŠ€èƒ½.includes(o)||(e.å·²è§£é”æŠ€èƒ½.push(o),a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—",`  âœ… æ·»åŠ åˆ°å·²è§£é”æŠ€èƒ½: ${o}`)),t.find(t=>t.æŠ€èƒ½åç§°===o&&t.æ¥æº===e.åç§°)||(t.push({æŠ€èƒ½åç§°:o,æŠ€èƒ½æè¿°:r.æŠ€èƒ½æè¿°||"",æ¥æº:e.åç§°,æ¶ˆè€—:r.æ¶ˆè€—||"",ç†Ÿç»ƒåº¦:0,ä½¿ç”¨æ¬¡æ•°:0}),a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—",`  âœ… è§£é”æŠ€èƒ½: ${o} (æ¥è‡ª ${e.åç§°})`))):a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—",`  âŒ æŠ€èƒ½ ${o} æœªè§£é” (${n}/${i})`)}}return a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—",`è®¡ç®—å®Œæˆï¼Œå…±æŒæ¡ ${t.length} ä¸ªæŠ€èƒ½`),t}(e),n=e.ç³»ç»Ÿ?.ç¼“å­˜?.æŒæ¡æŠ€èƒ½||[];for(const e of t){const t=n.find(t=>t.æŠ€èƒ½åç§°===e.æŠ€èƒ½åç§°&&t.æ¥æº===e.æ¥æº);t&&(e.ç†Ÿç»ƒåº¦=t.ç†Ÿç»ƒåº¦,e.ä½¿ç”¨æ¬¡æ•°=t.ä½¿ç”¨æ¬¡æ•°)}return e.ç³»ç»Ÿ||(e.ç³»ç»Ÿ={}),e.ç³»ç»Ÿ.ç¼“å­˜||(e.ç³»ç»Ÿ.ç¼“å­˜={}),e.ç³»ç»Ÿ.ç¼“å­˜.æŒæ¡æŠ€èƒ½=t,a.Yz.log("æŒæ¡æŠ€èƒ½è®¡ç®—","å·²æ›´æ–°å­˜æ¡£æ•°æ®ä¸­çš„æŒæ¡æŠ€èƒ½æ•°ç»„"),t}},8713:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(2814),n.b),d=i()(r()),u=l()(c);d.push([e.id,`\n.workshop-container[data-v-4d768244] {\n  width: 100%;\n  min-height: 100vh;\n  min-height: 100svh;\n  height: auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 1.5rem;\n  padding-top: calc(1.5rem + env(safe-area-inset-top));\n  padding-bottom: calc(1.5rem + env(safe-area-inset-bottom));\n  box-sizing: border-box;\n  overflow: auto;\n}\n.workshop-panel[data-v-4d768244] {\n  width: 100%;\n  max-width: 1100px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 16px;\n  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.3);\n  backdrop-filter: blur(20px);\n  -webkit-backdrop-filter: blur(20px);\n  padding: 2.5rem;\n  color: var(--color-text);\n}\n.title-row[data-v-4d768244] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n}\n.title[data-v-4d768244] {\n  margin: 0;\n  font-family: var(--font-family-serif);\n  font-size: 2rem;\n  color: var(--color-primary);\n}\n.auth-pill[data-v-4d768244] {\n  display: flex;\n  align-items: center;\n  gap: 0.6rem;\n  padding: 0.5rem 0.75rem;\n  border-radius: 999px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  user-select: none;\n  white-space: nowrap;\n}\n.auth-pill.ok[data-v-4d768244] {\n  border-color: var(--color-success);\n}\n.auth-pill.ok span[data-v-4d768244] {\n  color: var(--color-success);\n}\n.auth-pill.warn[data-v-4d768244] {\n  border-color: var(--color-warning);\n}\n.auth-pill.warn span[data-v-4d768244]:first-child {\n  color: var(--color-error);\n}\n.pill-link[data-v-4d768244] {\n  border: none;\n  background: transparent;\n  color: var(--color-primary);\n  cursor: pointer;\n  padding: 0;\n}\n.pill-link[data-v-4d768244]:hover {\n  text-decoration: underline;\n}\n.subtitle[data-v-4d768244] {\n  margin: 0.75rem 0 0;\n  color: var(--color-text-secondary);\n  line-height: 1.6;\n}\n.notice[data-v-4d768244] {\n  margin: 0.6rem 0 0;\n  color: var(--color-text-muted);\n  font-size: 0.92rem;\n  line-height: 1.6;\n}\n.actions[data-v-4d768244] {\n  margin-top: 2rem;\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n}\n.btn[data-v-4d768244] {\n  flex: 1;\n  padding: 0.9rem 1rem;\n  border-radius: 10px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.btn[data-v-4d768244]:hover {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n}\n.btn[data-v-4d768244]:disabled {\n  opacity: 0.55;\n  cursor: not-allowed;\n}\n.btn-secondary[data-v-4d768244] {\n  background: var(--color-surface);\n}\n.tabs[data-v-4d768244] {\n  margin-top: 1.25rem;\n  display: flex;\n  gap: 0.75rem;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  padding: 6px;\n}\n.tab[data-v-4d768244] {\n  flex: 1;\n  padding: 0.75rem 1rem;\n  border-radius: 10px;\n  border: 1px solid transparent;\n  background: transparent;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.tab.active[data-v-4d768244] {\n  background: var(--color-surface);\n  border-color: var(--color-primary);\n  color: var(--color-text);\n}\n.filters[data-v-4d768244] {\n  margin-top: 1rem;\n  display: grid;\n  grid-template-columns: 160px 1fr 160px auto;\n  gap: 0.75rem;\n  align-items: center;\n}\n.manage-bar[data-v-4d768244] {\n  margin-top: 1rem;\n  padding: 0.75rem 1rem;\n  border-radius: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n}\n.manage-title[data-v-4d768244] {\n  font-weight: 700;\n  color: var(--color-text);\n}\n.manage-meta[data-v-4d768244] {\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n}\n.input[data-v-4d768244] {\n  width: 100%;\n  padding: 0.75rem 0.9rem;\n  border-radius: 10px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface);\n  color: var(--color-text);\n  outline: none;\n}\nselect.input[data-v-4d768244] {\n  appearance: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  background-image: url(${u});\n  background-repeat: no-repeat;\n  background-position: right 0.75rem center;\n  padding-right: 2.5rem;\n  cursor: pointer;\n}\nselect.input option[data-v-4d768244] {\n  background: var(--color-surface);\n  color: var(--color-text);\n  padding: 0.5rem;\n}\n.textarea[data-v-4d768244] {\n  min-height: 84px;\n  resize: vertical;\n}\n.loading[data-v-4d768244] {\n  margin-top: 1.25rem;\n  color: var(--color-text-secondary);\n}\n.empty[data-v-4d768244] {\n  margin-top: 1.25rem;\n  padding: 1rem 1.25rem;\n  border-radius: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n}\n.item-list[data-v-4d768244] {\n  margin-top: 1rem;\n  display: grid;\n  grid-template-columns: repeat(auto-fill, 280px);\n  justify-content: center;\n  gap: 0.9rem;\n}\n.item-card[data-v-4d768244] {\n  width: 280px;\n  height: 200px;\n  padding: 1rem 1.1rem;\n  border-radius: 14px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n}\n.item-top[data-v-4d768244] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n}\n.item-title[data-v-4d768244] {\n  font-weight: 800;\n  font-size: 1.05rem;\n  color: var(--color-text);\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  flex: 1;\n  min-width: 0;\n}\n.item-type[data-v-4d768244] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  border: 1px solid var(--color-border);\n  padding: 0.2rem 0.6rem;\n  border-radius: 999px;\n  background: var(--color-surface-light);\n  white-space: nowrap;\n}\n.item-desc[data-v-4d768244] {\n  margin-top: 0.5rem;\n  color: var(--color-text-secondary);\n  line-height: 1.6;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  flex-shrink: 0;\n}\n.item-meta[data-v-4d768244] {\n  margin-top: 0.6rem;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.9rem;\n  color: var(--color-text-muted);\n  font-size: 0.9rem;\n  overflow: hidden;\n  flex-shrink: 0;\n}\n.tags[data-v-4d768244] {\n  margin-top: 0.6rem;\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n  overflow: hidden;\n  max-height: 1.8rem;\n  flex-shrink: 0;\n}\n.tag[data-v-4d768244] {\n  font-size: 0.8rem;\n  padding: 0.2rem 0.55rem;\n  border-radius: 999px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text-secondary);\n}\n.item-actions[data-v-4d768244] {\n  margin-top: auto;\n  padding-top: 0.5rem;\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.6rem;\n  flex-shrink: 0;\n}\n.btn.danger[data-v-4d768244] {\n  border-color: rgba(239, 68, 68, 0.4);\n  background: rgba(239, 68, 68, 0.12);\n  color: #ef4444;\n}\n.btn.danger[data-v-4d768244]:hover {\n  background: rgba(239, 68, 68, 0.18);\n}\n.pagination[data-v-4d768244] {\n  margin-top: 1.25rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n.page-meta[data-v-4d768244] {\n  display: flex;\n  gap: 1rem;\n  color: var(--color-text-secondary);\n  font-size: 0.9rem;\n}\n.page-controls[data-v-4d768244] {\n  display: flex;\n  gap: 0.75rem;\n}\n.upload-locked[data-v-4d768244] {\n  margin-top: 1.25rem;\n  padding: 1rem 1.25rem;\n  border-radius: 14px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n}\n.upload-form[data-v-4d768244] {\n  margin-top: 1.25rem;\n  display: grid;\n  gap: 0.9rem;\n}\n.form-row[data-v-4d768244] {\n  display: grid;\n  grid-template-columns: 110px 1fr;\n  gap: 0.75rem;\n  align-items: start;\n}\n.label[data-v-4d768244] {\n  color: var(--color-text);\n  font-weight: 700;\n  font-size: 0.92rem;\n  padding-top: 0.55rem;\n}\n.content-actions[data-v-4d768244] {\n  display: flex;\n  gap: 0.6rem;\n  flex-wrap: wrap;\n  align-items: center;\n}\n.file-btn[data-v-4d768244] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.hint[data-v-4d768244] {\n  color: var(--color-text-muted);\n  font-size: 0.9rem;\n}\n.modal-overlay[data-v-4d768244] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.6);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1600;\n  padding: 18px;\n}\n.modal[data-v-4d768244] {\n  width: min(760px, 100%);\n  max-height: 85vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  border-radius: 14px;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  box-shadow: 0 30px 80px rgba(0, 0, 0, 0.55);\n}\n.modal-header[data-v-4d768244] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.1rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-header h3[data-v-4d768244] {\n  margin: 0;\n  font-size: 1.05rem;\n  color: var(--color-text);\n}\n.close-btn[data-v-4d768244] {\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text-secondary);\n  width: 32px;\n  height: 32px;\n  border-radius: 10px;\n  cursor: pointer;\n}\n.modal-body[data-v-4d768244] {\n  padding: 1.1rem;\n  overflow: auto;\n}\n.modal-info[data-v-4d768244] {\n  padding: 0.9rem 1rem;\n  border-radius: 12px;\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n}\n.modal-title[data-v-4d768244] {\n  font-weight: 800;\n  color: var(--color-text);\n}\n.modal-sub[data-v-4d768244] {\n  margin-top: 0.45rem;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.9rem;\n  color: var(--color-text-muted);\n  font-size: 0.9rem;\n}\n.modal-actions[data-v-4d768244] {\n  margin-top: 1rem;\n  display: flex;\n  gap: 0.75rem;\n  flex-wrap: wrap;\n}\n.import-saves[data-v-4d768244] {\n  margin-top: 1rem;\n  padding-top: 1rem;\n  border-top: 1px solid var(--color-border);\n}\n@media (max-width: 768px) {\n.workshop-container[data-v-4d768244] {\n    align-items: flex-start;\n    justify-content: flex-start;\n    padding: 1rem;\n    padding-top: calc(1rem + env(safe-area-inset-top));\n    padding-bottom: calc(1rem + env(safe-area-inset-bottom));\n}\n.workshop-panel[data-v-4d768244] { padding: 2rem 1.5rem;\n}\n.filters[data-v-4d768244] { grid-template-columns: 1fr;\n}\n.form-row[data-v-4d768244] { grid-template-columns: 1fr;\n}\n.label[data-v-4d768244] { padding-top: 0;\n}\n}\n@media (max-width: 480px) {\n.workshop-container[data-v-4d768244] {\n    padding: 0.75rem;\n    padding-top: calc(0.75rem + env(safe-area-inset-top));\n    padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));\n}\n.workshop-panel[data-v-4d768244] {\n    padding: 1.5rem 1rem;\n}\n}\n`,""]);const m=d},8761:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.login-container[data-v-c38dec52] {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.login-panel[data-v-c38dec52] {\n  width: 100%;\n  max-width: 400px;\n  padding: 2.5rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 15px;\n  backdrop-filter: blur(10px);\n  -webkit-backdrop-filter: blur(10px);\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\n}\n.title[data-v-c38dec52] {\n  text-align: center;\n  font-family: var(--font-family-serif);\n  font-size: 2rem;\n  color: var(--color-accent);\n  margin-top: 0;\n  margin-bottom: 0.5rem;\n}\n.subtitle[data-v-c38dec52] {\n  text-align: center;\n  color: var(--color-text-secondary);\n  margin-bottom: 2rem;\n}\n.form-group[data-v-c38dec52] {\n  margin-bottom: 1.5rem;\n}\n.form-group label[data-v-c38dec52] {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-weight: 500;\n}\n.form-group input[data-v-c38dec52] {\n  width: 100%;\n  padding: 0.8rem 1rem;\n  background: rgba(0,0,0,0.2);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  color: var(--color-text);\n  font-size: 1rem;\n  box-sizing: border-box;\n  transition: var(--transition-fast);\n}\n.form-group input[data-v-c38dec52]:focus {\n  outline: none;\n  border-color: var(--color-primary);\n  box-shadow: 0 0 10px rgba(var(--color-primary-rgb), 0.3);\n}\n.email-input-row[data-v-c38dec52] {\n  display: flex;\n  gap: 0.5rem;\n}\n.email-input-row input[data-v-c38dec52] {\n  flex: 1;\n}\n.btn-small[data-v-c38dec52] {\n  padding: 0.8rem 1rem;\n  white-space: nowrap;\n  flex-shrink: 0;\n  min-width: 100px;\n}\n.turnstile-group[data-v-c38dec52] {\n  margin-top: 0.25rem;\n}\n.turnstile-container[data-v-c38dec52] {\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 72px;\n}\n.error-message[data-v-c38dec52] {\n    color: var(--color-danger);\n    text-align: center;\n    margin-bottom: 1rem;\n    animation: fadeIn-c38dec52 0.3s ease;\n}\n.success-message[data-v-c38dec52] {\n    color: #7fb069;\n    text-align: center;\n    margin-bottom: 1rem;\n    animation: fadeIn-c38dec52 0.3s ease;\n}\n.form-actions[data-v-c38dec52] {\n    display: flex;\n    justify-content: space-between;\n    gap: 1rem;\n    margin-top: 2rem;\n}\n.form-footer[data-v-c38dec52] {\n    text-align: center;\n    margin-top: 1.5rem;\n    padding-top: 1.5rem;\n    border-top: 1px solid var(--color-border);\n}\n.link[data-v-c38dec52] {\n    color: var(--color-primary);\n    text-decoration: none;\n    transition: var(--transition-fast);\n}\n.link[data-v-c38dec52]:hover {\n    color: var(--color-primary-hover);\n    text-decoration: underline;\n}\n.btn[data-v-c38dec52] {\n  padding: 0.8rem 1.5rem;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.btn[data-v-c38dec52]:hover:not(:disabled) {\n  background: var(--color-surface-hover);\n  border-color: var(--color-border-hover);\n}\n.btn[data-v-c38dec52]:disabled {\n  opacity: 0.55;\n  cursor: not-allowed;\n}\n.btn-secondary[data-v-c38dec52] {\n  background: var(--color-surface);\n}\n@keyframes fadeIn-c38dec52 {\nfrom { opacity: 0; transform: translateY(-10px);\n}\nto { opacity: 1; transform: translateY(0);\n}\n}\n",""]);const s=i},8835:(e,t,n)=>{"use strict";var a=n(1270);function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,s=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(l),d=["%","/","?",";","#"].concat(c),u=["/","?","#"],m=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},h={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=n(5373);function b(e,t,n){if(e&&"object"==typeof e&&e instanceof r)return e;var a=new r;return a.parse(e,t,n),a}r.prototype.parse=function(e,t,n){if("string"!=typeof e)throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),i=-1!==r&&r<e.indexOf("#")?"?":"#",l=e.split(i);l[0]=l[0].replace(/\\/g,"/");var b=e=l.join(i);if(b=b.trim(),!n&&1===e.split("#").length){var y=s.exec(b);if(y)return this.path=b,this.href=b,this.pathname=y[1],y[2]?(this.search=y[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=o.exec(b);if(x){var k=(x=x[0]).toLowerCase();this.protocol=k,b=b.substr(x.length)}if(n||x||b.match(/^\/\/[^@/]+@[^@/]+/)){var w="//"===b.substr(0,2);!w||x&&g[x]||(b=b.substr(2),this.slashes=!0)}if(!g[x]&&(w||x&&!h[x])){for(var E,N,S=-1,V=0;V<u.length;V++)-1!==(_=b.indexOf(u[V]))&&(-1===S||_<S)&&(S=_);for(-1!==(N=-1===S?b.lastIndexOf("@"):b.lastIndexOf("@",S))&&(E=b.slice(0,N),b=b.slice(N+1),this.auth=decodeURIComponent(E)),S=-1,V=0;V<d.length;V++){var _;-1!==(_=b.indexOf(d[V]))&&(-1===S||_<S)&&(S=_)}-1===S&&(S=b.length),this.host=b.slice(0,S),b=b.slice(S),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var A=this.hostname.split(/\./),D=(V=0,A.length);V<D;V++){var T=A[V];if(T&&!T.match(m)){for(var B="",I=0,z=T.length;I<z;I++)T.charCodeAt(I)>127?B+="x":B+=T[I];if(!B.match(m)){var M=A.slice(0,V),P=A.slice(V+1),R=T.match(p);R&&(M.push(R[1]),P.unshift(R[2])),P.length&&(b="/"+P.join(".")+b),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=a.toASCII(this.hostname));var $=this.port?":"+this.port:"",O=this.hostname||"";this.host=O+$,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!f[k])for(V=0,D=c.length;V<D;V++){var L=c[V];if(-1!==b.indexOf(L)){var F=encodeURIComponent(L);F===L&&(F=escape(L)),b=b.split(L).join(F)}}var j=b.indexOf("#");-1!==j&&(this.hash=b.substr(j),b=b.slice(0,j));var U=b.indexOf("?");if(-1!==U?(this.search=b.substr(U),this.query=b.substr(U+1),t&&(this.query=v.parse(this.query)),b=b.slice(0,U)):t&&(this.search="",this.query={}),b&&(this.pathname=b),h[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){$=this.pathname||"";var q=this.search||"";this.path=$+q}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",a=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&"object"==typeof this.query&&Object.keys(this.query).length&&(o=v.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var i=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||h[t])&&!1!==r?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),a&&"#"!==a.charAt(0)&&(a="#"+a),i&&"?"!==i.charAt(0)&&(i="?"+i),t+r+(n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(i=i.replace("#","%23"))+a},r.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if("string"==typeof e){var t=new r;t.parse(e,!1,!0),e=t}for(var n=new r,a=Object.keys(this),o=0;o<a.length;o++){var i=a[o];n[i]=this[i]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),l=0;l<s.length;l++){var c=s[l];"protocol"!==c&&(n[c]=e[c])}return h[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!h[e.protocol]){for(var d=Object.keys(e),u=0;u<d.length;u++){var m=d[u];n[m]=e[m]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var f=n.pathname||"",v=n.search||"";n.path=f+v}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=y||b||n.host&&e.pathname,k=x,w=n.pathname&&n.pathname.split("/")||[],E=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!h[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),x=x&&(""===p[0]||""===w[0])),y)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=e.search,n.query=e.query;else if(null!=e.search)return E&&(n.host=w.shift(),n.hostname=n.host,(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.hostname=C.shift(),n.host=n.hostname)),n.search=e.search,n.query=e.query,null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var N=w.slice(-1)[0],S=(n.host||e.host||w.length>1)&&("."===N||".."===N)||""===N,V=0,_=w.length;_>=0;_--)"."===(N=w[_])?w.splice(_,1):".."===N?(w.splice(_,1),V++):V&&(w.splice(_,1),V--);if(!x&&!k)for(;V--;V)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var C,A=""===w[0]||w[0]&&"/"===w[0].charAt(0);return E&&(n.hostname=A?"":w.length?w.shift():"",n.host=n.hostname,(C=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=C.shift(),n.hostname=C.shift(),n.host=n.hostname)),(x=x||n.host&&w.length)&&!A&&w.unshift(""),w.length>0?n.pathname=w.join("/"):(n.pathname=null,n.path=null),null===n.pathname&&null===n.search||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=i.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)},t.qg=b,t.hd=function(e,t){return b(e,!1,!0).resolve(t)},t.GP=function(e){return"string"==typeof e&&(e=b(e)),e instanceof r?e.format():r.prototype.format.call(e)}},8859:(e,t,n)=>{var a="function"==typeof Map&&Map.prototype,r=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=a&&r&&"function"==typeof r.get?r.get:null,i=a&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&l&&"function"==typeof l.get?l.get:null,d=s&&Set.prototype.forEach,u="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,m="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,g=Object.prototype.toString,h=Function.prototype.toString,v=String.prototype.match,b=String.prototype.slice,y=String.prototype.replace,x=String.prototype.toUpperCase,k=String.prototype.toLowerCase,w=RegExp.prototype.test,E=Array.prototype.concat,N=Array.prototype.join,S=Array.prototype.slice,V=Math.floor,_="function"==typeof BigInt?BigInt.prototype.valueOf:null,C=Object.getOwnPropertySymbols,A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,D="function"==typeof Symbol&&"object"==typeof Symbol.iterator,T="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,B=Object.prototype.propertyIsEnumerable,I=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function z(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||w.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var a=e<0?-V(-e):V(e);if(a!==e){var r=String(a),o=b.call(t,r.length+1);return y.call(r,n,"$&_")+"."+y.call(y.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return y.call(t,n,"$&_")}var M=n(2634),P=M.custom,R=G(P)?P:null,$={__proto__:null,double:'"',single:"'"},O={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};function L(e,t,n){var a=n.quoteStyle||t,r=$[a];return r+e+r}function F(e){return y.call(String(e),/"/g,"&quot;")}function j(e){return!T||!("object"==typeof e&&(T in e||void 0!==e[T]))}function U(e){return"[object Array]"===W(e)&&j(e)}function q(e){return"[object RegExp]"===W(e)&&j(e)}function G(e){if(D)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!A)return!1;try{return A.call(e),!0}catch(e){}return!1}e.exports=function e(t,a,r,s){var l=a||{};if(Y(l,"quoteStyle")&&!Y($,l.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Y(l,"maxStringLength")&&("number"==typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var g=!Y(l,"customInspect")||l.customInspect;if("boolean"!=typeof g&&"symbol"!==g)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Y(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Y(l,"numericSeparator")&&"boolean"!=typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var x=l.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return J(t,l);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return x?z(t,w):w}if("bigint"==typeof t){var V=String(t)+"n";return x?z(t,V):V}var C=void 0===l.depth?5:l.depth;if(void 0===r&&(r=0),r>=C&&C>0&&"object"==typeof t)return U(t)?"[Array]":"[Object]";var P,O=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=N.call(Array(e.indent+1)," ")}return{base:n,prev:N.call(Array(t+1),n)}}(l,r);if(void 0===s)s=[];else if(X(s,t)>=0)return"[Circular]";function H(t,n,a){if(n&&(s=S.call(s)).push(n),a){var o={depth:l.depth};return Y(l,"quoteStyle")&&(o.quoteStyle=l.quoteStyle),e(t,o,r+1,s)}return e(t,l,r+1,s)}if("function"==typeof t&&!q(t)){var K=function(e){if(e.name)return e.name;var t=v.call(h.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ae=ne(t,H);return"[Function"+(K?": "+K:" (anonymous)")+"]"+(ae.length>0?" { "+N.call(ae,", ")+" }":"")}if(G(t)){var re=D?y.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):A.call(t);return"object"!=typeof t||D?re:Q(re)}if((P=t)&&"object"==typeof P&&("undefined"!=typeof HTMLElement&&P instanceof HTMLElement||"string"==typeof P.nodeName&&"function"==typeof P.getAttribute)){for(var oe="<"+k.call(String(t.nodeName)),ie=t.attributes||[],se=0;se<ie.length;se++)oe+=" "+ie[se].name+"="+L(F(ie[se].value),"double",l);return oe+=">",t.childNodes&&t.childNodes.length&&(oe+="..."),oe+"</"+k.call(String(t.nodeName))+">"}if(U(t)){if(0===t.length)return"[]";var le=ne(t,H);return O&&!function(e){for(var t=0;t<e.length;t++)if(X(e[t],"\n")>=0)return!1;return!0}(le)?"["+te(le,O)+"]":"[ "+N.call(le,", ")+" ]"}if(function(e){return"[object Error]"===W(e)&&j(e)}(t)){var ce=ne(t,H);return"cause"in Error.prototype||!("cause"in t)||B.call(t,"cause")?0===ce.length?"["+String(t)+"]":"{ ["+String(t)+"] "+N.call(ce,", ")+" }":"{ ["+String(t)+"] "+N.call(E.call("[cause]: "+H(t.cause),ce),", ")+" }"}if("object"==typeof t&&g){if(R&&"function"==typeof t[R]&&M)return M(t,{depth:C-r});if("symbol"!==g&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!o||!e||"object"!=typeof e)return!1;try{o.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var de=[];return i&&i.call(t,function(e,n){de.push(H(n,t,!0)+" => "+H(e,t))}),ee("Map",o.call(t),de,O)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{o.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var ue=[];return d&&d.call(t,function(e){ue.push(H(e,t))}),ee("Set",c.call(t),ue,O)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e,u);try{m.call(e,m)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Z("WeakMap");if(function(e){if(!m||!e||"object"!=typeof e)return!1;try{m.call(e,m);try{u.call(e,u)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Z("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Z("WeakRef");if(function(e){return"[object Number]"===W(e)&&j(e)}(t))return Q(H(Number(t)));if(function(e){if(!e||"object"!=typeof e||!_)return!1;try{return _.call(e),!0}catch(e){}return!1}(t))return Q(H(_.call(t)));if(function(e){return"[object Boolean]"===W(e)&&j(e)}(t))return Q(f.call(t));if(function(e){return"[object String]"===W(e)&&j(e)}(t))return Q(H(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||void 0!==n.g&&t===n.g)return"{ [object globalThis] }";if(!function(e){return"[object Date]"===W(e)&&j(e)}(t)&&!q(t)){var me=ne(t,H),pe=I?I(t)===Object.prototype:t instanceof Object||t.constructor===Object,fe=t instanceof Object?"":"null prototype",ge=!pe&&T&&Object(t)===t&&T in t?b.call(W(t),8,-1):fe?"Object":"",he=(pe||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(ge||fe?"["+N.call(E.call([],ge||[],fe||[]),": ")+"] ":"");return 0===me.length?he+"{}":O?he+"{"+te(me,O)+"}":he+"{ "+N.call(me,", ")+" }"}return String(t)};var H=Object.prototype.hasOwnProperty||function(e){return e in this};function Y(e,t){return H.call(e,t)}function W(e){return g.call(e)}function X(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1}function J(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,a="... "+n+" more character"+(n>1?"s":"");return J(b.call(e,0,t.maxStringLength),t)+a}var r=O[t.quoteStyle||"single"];return r.lastIndex=0,L(y.call(y.call(e,r,"\\$1"),/[\x00-\x1f]/g,K),"single",t)}function K(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+x.call(t.toString(16))}function Q(e){return"Object("+e+")"}function Z(e){return e+" { ? }"}function ee(e,t,n,a){return e+" ("+t+") {"+(a?te(n,a):N.call(n,", "))+"}"}function te(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+N.call(e,","+n)+"\n"+t.prev}function ne(e,t){var n=U(e),a=[];if(n){a.length=e.length;for(var r=0;r<e.length;r++)a[r]=Y(e,r)?t(e[r],e):""}var o,i="function"==typeof C?C(e):[];if(D){o={};for(var s=0;s<i.length;s++)o["$"+i[s]]=i[s]}for(var l in e)Y(e,l)&&(n&&String(Number(l))===l&&l<e.length||D&&o["$"+l]instanceof Symbol||(w.call(/[^\w$]/,l)?a.push(t(l,e)+": "+t(e[l],e)):a.push(l+": "+t(e[l],e))));if("function"==typeof C)for(var c=0;c<i.length;c++)B.call(e,i[c])&&a.push("["+t(i[c])+"]: "+t(e[i[c]],e));return a}},8932:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.dialog-overlay[data-v-7a662fc0] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.75);\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n  padding: 1rem;\n  animation: fadeIn-7a662fc0 0.3s ease-out;\n}\n@keyframes fadeIn-7a662fc0 {\nfrom { opacity: 0;\n}\nto { opacity: 1;\n}\n}\n.dialog-container[data-v-7a662fc0] {\n  background-color: var(--color-surface);\n  border-radius: 16px;\n  padding: 2rem;\n  width: 100%;\n  max-width: 550px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--color-border);\n  animation: slideInUp-7a662fc0 0.4s cubic-bezier(0.25, 1, 0.5, 1);\n}\n@keyframes slideInUp-7a662fc0 {\nfrom {\n    opacity: 0;\n    transform: translateY(30px) scale(0.98);\n}\nto {\n    opacity: 1;\n    transform: translateY(0) scale(1);\n}\n}\n.dialog-header[data-v-7a662fc0] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 1.5rem;\n  color: var(--color-danger);\n}\n.header-icon[data-v-7a662fc0] {\n  flex-shrink: 0;\n}\n.header-title[data-v-7a662fc0] {\n  margin: 0;\n  font-size: 1.5rem;\n  font-weight: 700;\n}\n.dialog-content[data-v-7a662fc0] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-bottom: 2rem;\n}\n.content-lead[data-v-7a662fc0] {\n  font-size: 1rem;\n  line-height: 1.6;\n  color: var(--color-text);\n}\n.error-list-container[data-v-7a662fc0] {\n  background-color: rgba(var(--color-danger-rgb), 0.05);\n  border: 1px solid rgba(var(--color-danger-rgb), 0.2);\n  border-radius: 8px;\n  padding: 1rem;\n}\n.error-list-title[data-v-7a662fc0] {\n  display: block;\n  margin-bottom: 0.75rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.error-list[data-v-7a662fc0] {\n  list-style-type: none;\n  padding-left: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.error-item[data-v-7a662fc0] {\n  font-family: 'Courier New', Courier, monospace;\n  font-size: 0.875rem;\n  color: var(--color-danger);\n  padding: 0.5rem;\n  background-color: rgba(var(--color-danger-rgb), 0.05);\n  border-radius: 4px;\n}\n.content-suggestion[data-v-7a662fc0] {\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: var(--color-text-secondary);\n}\n.content-suggestion strong[data-v-7a662fc0] {\n  color: var(--color-warning);\n  font-weight: 600;\n}\n.dialog-actions[data-v-7a662fc0] {\n  display: flex;\n  justify-content: flex-end;\n}\n.action-button[data-v-7a662fc0] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.confirm-button[data-v-7a662fc0] {\n  background-color: var(--color-primary);\n  color: white;\n}\n.confirm-button[data-v-7a662fc0]:hover {\n  background-color: var(--color-primary-hover);\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.3);\n}\n",""]);const s=i},8968:e=>{"use strict";e.exports=Math.floor},9037:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});const a=(0,n(9596).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9164:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(5224),n.b),d=i()(r()),u=l()(c);d.push([e.id,`\n/* ============ æ¸¸æˆä¿¡æ¯å¼¹çª—æ ·å¼ ============ */\n.game-info-overlay[data-v-712d4c14] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(8px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10000;\n  padding: 1rem;\n}\n.game-info-modal[data-v-712d4c14] {\n  background: var(--color-surface);\n  border-radius: 16px;\n  max-width: 520px;\n  width: 100%;\n  max-height: 85vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);\n  border: 1px solid var(--color-border);\n  animation: modalFadeIn-712d4c14 0.25s ease-out;\n}\n@keyframes modalFadeIn-712d4c14 {\nfrom {\n    opacity: 0;\n    transform: scale(0.95) translateY(-10px);\n}\nto {\n    opacity: 1;\n    transform: scale(1) translateY(0);\n}\n}\n\n/* é¡¶éƒ¨æ ‡é¢˜åŒºåŸŸ */\n.game-info-header[data-v-712d4c14] {\n  position: relative;\n  padding: 1.5rem 1.5rem 1.25rem;\n  background: linear-gradient(135deg, #2e8b57 0%, #267349 100%);\n  overflow: hidden;\n}\n.game-info-header .header-bg[data-v-712d4c14] {\n  position: absolute;\n  inset: 0;\n  background: url(${u});\n  opacity: 0.5;\n}\n.game-info-header .header-content[data-v-712d4c14] {\n  position: relative;\n  z-index: 1;\n}\n.game-info-header .game-title[data-v-712d4c14] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.game-info-header .title-icon[data-v-712d4c14] {\n  font-size: 1.75rem;\n}\n.game-info-header .title-text[data-v-712d4c14] {\n  font-size: 1.75rem;\n  font-weight: 800;\n  color: #fff;\n  letter-spacing: 0.05em;\n  text-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n}\n.game-info-header .version-tag[data-v-712d4c14] {\n  background: rgba(255, 255, 255, 0.2);\n  color: #fff;\n  padding: 0.25rem 0.6rem;\n  border-radius: 20px;\n  font-size: 0.75rem;\n  font-weight: 600;\n  margin-left: 0.5rem;\n  backdrop-filter: blur(4px);\n}\n.game-info-header .game-subtitle[data-v-712d4c14] {\n  color: rgba(255, 255, 255, 0.85);\n  font-size: 0.9rem;\n  margin: 0.5rem 0 0;\n  font-weight: 500;\n}\n.game-info-header .close-btn[data-v-712d4c14] {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  background: rgba(255, 255, 255, 0.15);\n  border: none;\n  color: #fff;\n  width: 32px;\n  height: 32px;\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1.5rem;\n  line-height: 1;\n  transition: all 0.2s;\n  backdrop-filter: blur(4px);\n}\n.game-info-header .close-btn[data-v-712d4c14]:hover {\n  background: rgba(255, 255, 255, 0.25);\n  transform: scale(1.05);\n}\n\n/* å†…å®¹åŒºåŸŸ */\n.game-info-body[data-v-712d4c14] {\n  padding: 1.25rem;\n  overflow-y: auto;\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n/* è­¦å‘Šæ¨ªå¹… */\n.warning-banner[data-v-712d4c14] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n  background: linear-gradient(90deg, rgba(251, 191, 36, 0.15) 0%, rgba(251, 191, 36, 0.08) 100%);\n  border: 1px solid rgba(251, 191, 36, 0.3);\n  border-radius: 10px;\n  font-size: 0.85rem;\n  color: var(--color-text);\n}\n.warning-banner .warning-icon[data-v-712d4c14] {\n  font-size: 1rem;\n}\n.warning-banner strong[data-v-712d4c14] {\n  color: #dc2626;\n  font-weight: 700;\n}\n\n/* ä¿¡æ¯å¡ç‰‡ */\n.info-card[data-v-712d4c14] {\n  background: var(--color-surface-light);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  padding: 1rem;\n}\n.info-card .card-header[data-v-712d4c14] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  margin-bottom: 0.75rem;\n}\n.info-card .card-icon[data-v-712d4c14] {\n  font-size: 1.1rem;\n}\n.info-card .card-header h4[data-v-712d4c14] {\n  margin: 0;\n  font-size: 1rem;\n  font-weight: 700;\n  color: var(--color-text);\n}\n.info-card .card-desc[data-v-712d4c14] {\n  margin: 0;\n  font-size: 0.9rem;\n  line-height: 1.6;\n  color: var(--color-text-secondary);\n}\n\n/* åŠŸèƒ½ç½‘æ ¼ */\n.feature-grid[data-v-712d4c14] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.75rem;\n}\n.feature-item[data-v-712d4c14] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.5rem;\n  padding: 0.6rem;\n  background: var(--color-surface);\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n}\n.feature-item .feature-icon[data-v-712d4c14] {\n  font-size: 1.1rem;\n  flex-shrink: 0;\n}\n.feature-item .feature-text[data-v-712d4c14] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.1rem;\n}\n.feature-item .feature-text strong[data-v-712d4c14] {\n  font-size: 0.85rem;\n  font-weight: 700;\n  color: var(--color-text);\n}\n.feature-item .feature-text span[data-v-712d4c14] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n\n/* ä½œè€…ä¿¡æ¯ */\n.author-info[data-v-712d4c14] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.author-row[data-v-712d4c14] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.5rem 0;\n  border-bottom: 1px solid var(--color-border);\n}\n.author-row[data-v-712d4c14]:last-child {\n  border-bottom: none;\n  padding-bottom: 0;\n}\n.author-row .label[data-v-712d4c14] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  min-width: 50px;\n}\n.author-row .value[data-v-712d4c14] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.author-row .value.link[data-v-712d4c14] {\n  color: var(--color-primary);\n  text-decoration: none;\n  transition: color 0.2s;\n}\n.author-row .value.link[data-v-712d4c14]:hover {\n  color: var(--color-primary-hover);\n  text-decoration: underline;\n}\n.author-row .value.tech[data-v-712d4c14] {\n  font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;\n  font-size: 0.8rem;\n  background: var(--color-code-bg);\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n}\n\n/* ç‰ˆæƒå£°æ˜ */\n.copyright-content .copyright-title[data-v-712d4c14] {\n  margin: 0 0 0.75rem;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.license-items[data-v-712d4c14] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.license-tag[data-v-712d4c14] {\n  padding: 0.35rem 0.65rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 600;\n}\n.license-tag.allow[data-v-712d4c14] {\n  background: rgba(34, 197, 94, 0.12);\n  color: #16a34a;\n  border: 1px solid rgba(34, 197, 94, 0.25);\n}\n.license-tag.require[data-v-712d4c14] {\n  background: rgba(59, 130, 246, 0.12);\n  color: #2563eb;\n  border: 1px solid rgba(59, 130, 246, 0.25);\n}\n\n/* æ·±è‰²ä¸»é¢˜é€‚é… */\n[data-theme='dark'] .game-info-header[data-v-712d4c14] {\n  background: linear-gradient(135deg, #1e4a9a 0%, #163d82 100%);\n}\n[data-theme='dark'] .warning-banner[data-v-712d4c14] {\n  background: linear-gradient(90deg, rgba(251, 191, 36, 0.12) 0%, rgba(251, 191, 36, 0.05) 100%);\n  border-color: rgba(251, 191, 36, 0.25);\n}\n[data-theme='dark'] .warning-banner strong[data-v-712d4c14] {\n  color: #f87171;\n}\n[data-theme='dark'] .license-tag.allow[data-v-712d4c14] {\n  background: rgba(34, 197, 94, 0.15);\n  color: #4ade80;\n  border-color: rgba(34, 197, 94, 0.3);\n}\n[data-theme='dark'] .license-tag.require[data-v-712d4c14] {\n  background: rgba(59, 130, 246, 0.15);\n  color: #60a5fa;\n  border-color: rgba(59, 130, 246, 0.3);\n}\n\n/* æ»šåŠ¨æ¡ç¾åŒ– */\n.game-info-body[data-v-712d4c14]::-webkit-scrollbar {\n  width: 6px;\n}\n.game-info-body[data-v-712d4c14]::-webkit-scrollbar-track {\n  background: transparent;\n}\n.game-info-body[data-v-712d4c14]::-webkit-scrollbar-thumb {\n  background: var(--color-border);\n  border-radius: 3px;\n}\n.game-info-body[data-v-712d4c14]::-webkit-scrollbar-thumb:hover {\n  background: var(--color-text-secondary);\n}\n.settings-modal-overlay[data-v-712d4c14] {\n  position: fixed;\n  inset: 0;\n  background: rgba(0, 0, 0, 0.55);\n  backdrop-filter: blur(4px);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 1500;\n  padding: 20px;\n}\n.settings-modal-content[data-v-712d4c14] {\n  background: var(--color-surface, #ffffff);\n  border-radius: 14px;\n  width: min(760px, 100%);\n  max-height: 85vh;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  box-shadow: 0 30px 80px rgba(0, 0, 0, 0.45);\n  border: 1px solid var(--color-border);\n  animation: modalIn 0.2s ease;\n}\n.settings-modal-header[data-v-712d4c14] {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 1rem 1.25rem;\n  border-bottom: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n  color: var(--color-text);\n}\n.settings-modal-header h3[data-v-712d4c14] {\n  margin: 0;\n  font-size: 1.15rem;\n  font-weight: 800;\n  color: var(--color-text);\n}\n.settings-modal-body[data-v-712d4c14] {\n  flex: 1;\n  overflow: auto;\n}\n.close-btn[data-v-712d4c14] {\n  background: transparent;\n  border: 1px solid var(--color-border);\n  color: var(--color-text);\n  font-size: 1.5rem;\n  width: 32px;\n  height: 32px;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.close-btn[data-v-712d4c14]:hover {\n  background: var(--color-surface-hover);\n}\n`,""]);const m=d},9173:(e,t,n)=>{"use strict";n.d(t,{useUIStore:()=>s});var a=n(810),r=n(4061),o=n(9207),i=n(8546);const s=(0,a.nY)("ui",()=>{const e=(0,r.ref)(!1),t=(0,r.ref)(""),n=(0,r.ref)({}),a=(0,r.ref)(!1),s=(0,r.ref)(""),l=(0,r.ref)(!1),c=(0,r.ref)(""),d=(0,r.ref)(""),u=(0,r.ref)(null),m=(0,r.ref)(null),p=(0,r.ref)(!1),f=(0,r.ref)(null),g=(0,r.ref)(!1),h=(0,r.ref)(!1),v=(0,r.ref)(!1),b=(0,r.ref)(""),y=(0,r.ref)(""),x=(0,r.shallowRef)(null),k=(0,r.ref)(null),w=(0,r.ref)(!1),E=(0,r.ref)([]),N=(0,r.ref)(null),S=(0,r.ref)("creation"),V=(0,r.ref)(!1),_=(0,r.ref)(null),C=(0,r.ref)(null),A=(0,r.ref)(""),D=(0,r.ref)(!0),T=(0,r.ref)(3),B=(0,r.ref)("true"===localStorage.getItem("enableActionOptions")),I=(0,r.ref)(localStorage.getItem("actionOptionsPrompt")||""),z=(0,r.ref)("false"!==localStorage.getItem("useStreaming")),M=(0,r.ref)("true"===localStorage.getItem("useSystemCot")),P=(0,r.ref)({configured:(0,i.isBackendConfigured)(),connected:!1,lastChecked:0}),R=(0,r.computed)(()=>P.value.configured&&P.value.connected),$=(0,r.computed)(()=>P.value.configured);function O(){p.value=!1,f.value=null,g.value&&(a.value=!0,g.value=!1)}function L(){w.value=!1,E.value=[],N.value=null}return{showToastState:e,toastMessage:t,toastOptions:n,showToast:function(a,r={}){t.value=a,n.value={type:r.type||"info",duration:r.duration||3e3},e.value=!0},hideToast:function(){e.value=!1},isLoading:a,loadingText:s,isAIProcessing:l,streamingContent:c,currentGenerationId:u,streamingTimestamp:m,setStreamingContent:function(e){d.value=e,c.value=(0,o.E)(e)},appendStreamingContent:function(e){d.value+=e,c.value=(0,o.E)(d.value)},clearStreamingContent:function(){c.value="",d.value=""},setCurrentGenerationId:function(e){u.value=e},startStreaming:function(e){u.value=e,c.value="",d.value="",m.value=Date.now(),l.value=!0},stopStreaming:function(){u.value=null,m.value=null,l.value=!1},resetStreamingState:function(){c.value="",d.value="",u.value=null,m.value=null,l.value=!1,sessionStorage.removeItem("ai-processing-state"),sessionStorage.removeItem("ai-processing-timestamp")},showRetryDialogState:p,retryDialogConfig:f,startLoading:function(e="æ­£åœ¨åŠ è½½..."){a.value=!0,s.value=e},stopLoading:function(){a.value=!1,s.value=""},setAIProcessing:function(e){l.value=e,e?(sessionStorage.setItem("ai-processing-state","true"),sessionStorage.setItem("ai-processing-timestamp",Date.now().toString())):(sessionStorage.removeItem("ai-processing-state"),sessionStorage.removeItem("ai-processing-timestamp"))},updateLoadingText:function(e){a.value&&(s.value=e)},showRetryDialog:function(e){g.value=a.value,a.value&&(a.value=!1),f.value=e,p.value=!0},hideRetryDialog:O,confirmRetry:function(){f.value&&(f.value.onConfirm(),O())},cancelRetry:function(){f.value&&(f.value.onCancel(),O())},neutralAction:function(){f.value&&f.value.onNeutral&&(f.value.onNeutral(),O())},showCharacterManagement:h,openCharacterManagement:function(){h.value=!0},closeCharacterManagement:function(){h.value=!1},showDataValidationError:w,dataValidationErrorMessages:E,dataValidationContext:S,showDataValidationErrorDialog:function(e,t,n="creation"){E.value=e,N.value=t,S.value=n,w.value=!0},hideDataValidationErrorDialog:L,confirmDataValidationError:function(){N.value&&N.value(),L()},showStateChangeViewer:V,stateChangeLogToShow:_,currentMessageStateChanges:C,openStateChangeViewer:function(e){_.value=e,V.value=!0},closeStateChangeViewer:function(){V.value=!1,_.value=null},setCurrentMessageStateChanges:function(e){C.value=e?{...e,_ts:Date.now()}:null},clearCurrentMessageStateChanges:function(){C.value=null},autoGenerateNpc:D,minNpcCount:T,enableActionOptions:(0,r.computed)({get:()=>B.value,set:e=>{B.value=e,localStorage.setItem("enableActionOptions",String(e))}}),actionOptionsPrompt:(0,r.computed)({get:()=>I.value,set:e=>{I.value=e,localStorage.setItem("actionOptionsPrompt",e)}}),useStreaming:(0,r.computed)({get:()=>z.value,set:e=>{z.value=e,localStorage.setItem("useStreaming",String(e))}}),useSystemCot:(0,r.computed)({get:()=>M.value,set:e=>{M.value=e,localStorage.setItem("useSystemCot",String(e))}}),userInputText:A,backendStatus:P,checkBackendConnection:async()=>{if(!P.value.configured)return P.value.connected=!1,!1;try{const e=await(0,i.d9)();return P.value.connected=!!e,P.value.lastChecked=Date.now(),P.value.connected}catch{return P.value.connected=!1,!1}},isBackendAvailable:R,isBackendConfiguredComputed:$,showDetailModalState:v,detailModalTitle:b,detailModalContent:y,detailModalComponent:x,detailModalProps:k,showDetailModal:function(e){b.value=e.title,y.value=e.content||"",x.value=e.component||null,k.value=e.props||null,v.value=!0},hideDetailModal:function(){v.value=!1,setTimeout(()=>{b.value="",y.value="",x.value=null,k.value=null},300)}}})},9197:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.save-migration[data-v-230bf738] {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n  color: var(--color-text);\n}\n.migration-header h4[data-v-230bf738] {\n  margin: 0 0 6px 0;\n  font-size: 1.05rem;\n}\n.migration-header p[data-v-230bf738] {\n  margin: 0;\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.migration-meta[data-v-230bf738] {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));\n  gap: 10px;\n}\n.meta-item[data-v-230bf738] {\n  padding: 8px 10px;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  background: var(--color-background);\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.meta-item .label[data-v-230bf738] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.meta-item .value[data-v-230bf738] {\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n  word-break: break-all;\n}\n.migration-reasons[data-v-230bf738] {\n  border: 1px solid var(--color-border);\n  background: var(--color-background);\n  border-radius: 8px;\n  padding: 10px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n.reason-title[data-v-230bf738] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.reason-list[data-v-230bf738] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n}\n.tag[data-v-230bf738] {\n  font-size: 0.75rem;\n  padding: 3px 8px;\n  border-radius: 999px;\n  border: 1px solid rgba(var(--color-warning-rgb), 0.35);\n  background: rgba(var(--color-warning-rgb), 0.08);\n  color: var(--color-text);\n}\n.migration-hint[data-v-230bf738] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.migration-hint ul[data-v-230bf738] {\n  margin: 6px 0 0 18px;\n}\n.migration-actions[data-v-230bf738] {\n  display: flex;\n  gap: 10px;\n  flex-wrap: wrap;\n}\n.migration-actions button[data-v-230bf738] {\n  border: none;\n  border-radius: 8px;\n  padding: 8px 14px;\n  font-size: 0.85rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.migration-actions .primary[data-v-230bf738] {\n  background: linear-gradient(135deg, #22c55e, #16a34a);\n  color: white;\n}\n.migration-actions .primary[data-v-230bf738]:disabled {\n  opacity: 0.7;\n  cursor: not-allowed;\n}\n.migration-actions .secondary[data-v-230bf738] {\n  background: transparent;\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n",""]);const s=i},9207:(e,t,n)=>{"use strict";n.d(t,{E:()=>u});const a=500,r=50,o=1500;let i=null,s=[];function l(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){return`${!1===e.global?"":"g"}${e.ignoreCase?"i":""}${"regex"===e.mode&&e.multiline?"m":""}${"regex"===e.mode&&e.dotAll?"s":""}`}function d(e){return e.replace(/\$/g,"$$$$")}function u(e){return function(e,t){if(!e)return"";let n=e;n=n.replace(/<(?:ant[-_]?)?thinking>[\s\S]*?<\/(?:ant[-_]?)?thinking>/gi,"").replace(/<\/?(?:ant[-_]?)?thinking>/gi,"").replace(/<analysis>[\s\S]*?<\/analysis>/gi,"").replace(/<\/?analysis>/gi,"").replace(/<reasoning>[\s\S]*?<\/reasoning>/gi,"").replace(/<\/?reasoning>/gi,"").replace(/<thought>[\s\S]*?<\/thought>/gi,"").replace(/<\/?thought>/gi,"");for(const e of t)n=n.replace(e.re,e.replacement);return n}(e,function(){const e=function(){try{if("undefined"==typeof window||"undefined"==typeof localStorage)return{replaceRules:[]};const e=localStorage.getItem("dad_game_settings");if(!e)return{replaceRules:[]};const t=JSON.parse(e);return{replaceRules:Array.isArray(t?.replaceRules)?t.replaceRules:[]}}catch{return{replaceRules:[]}}}(),t=JSON.stringify(e.replaceRules||[]);return t===i||(i=t,s=function(e){const t=[];for(const n of e){if(t.length>=r)break;if(!n||!1===n.enabled)continue;if("string"!=typeof n.pattern||!n.pattern.trim())continue;const e=n.pattern.length>a?n.pattern.slice(0,a):n.pattern,i="string"==typeof n.replacement?n.replacement:"",s="text"===n.mode?d(i.slice(0,o)):i.slice(0,o);try{if("text"===n.mode){const a=`${!1===n.global?"":"g"}${n.ignoreCase?"i":""}`;t.push({re:new RegExp(l(e),a),replacement:s})}else{const a=c(n);t.push({re:new RegExp(e,a),replacement:s})}}catch{}}return t}(e.replaceRules||[])),s}())}},9290:e=>{"use strict";e.exports=RangeError},9333:(e,t,n)=>{"use strict";n.d(t,{Em:()=>c,NX:()=>b,OW:()=>h,Qc:()=>g,Sj:()=>v,Uy:()=>p,verifyStoredToken:()=>d,w2:()=>u,xJ:()=>f,yZ:()=>m});var a=n(4270),r=n(8546);const o=e=>{const t=e.trim();if(!t)return"ç½‘ç»œè¿æ¥å¤±è´¥æˆ–åç«¯åœ°å€æ— æ•ˆï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡ã€‚";const n=t.toLowerCase();return n.includes("failed to fetch")||n.includes("networkerror")||n.includes("fetch failed")||n.includes("load failed")?"ç½‘ç»œè¿æ¥å¤±è´¥æˆ–åç«¯åœ°å€æ— æ•ˆï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡ã€‚":n.includes("invalid url")?"åç«¯åœ°å€æ— æ•ˆï¼Œè¯·æ£€æŸ¥é…ç½®åé‡è¯•ã€‚":t},i=e=>{if(null==e)return null;if("string"==typeof e)return e;if("object"!=typeof e)return String(e);const t=e;return"detail"in t?(e=>{if("string"==typeof e)return e;if(null==e)return"æœåŠ¡å™¨è¿”å›äº†æœªçŸ¥é”™è¯¯ã€‚";if(Array.isArray(e)){const t=e.map(e=>{if(!e||"object"!=typeof e)return String(e);const t=e,n="string"==typeof t.msg?t.msg:void 0,a=Array.isArray(t.loc)?t.loc.filter(e=>"string"==typeof e||"number"==typeof e):void 0,r=a?.length?` (${a.join(".")})`:"";return n?`${n}${r}`:JSON.stringify(t)}).filter(Boolean);return t.length?t.join("ï¼›"):"è¯·æ±‚å‚æ•°ä¸åˆæ³•ã€‚"}return"object"==typeof e?JSON.stringify(e):String(e)})(t.detail):"string"==typeof t.message?t.message:JSON.stringify(t)},s=e=>e.includes("/api/v1/auth/token")||e.includes("/api/v1/auth/register")||e.includes("/api/v1/auth/me"),l=()=>{localStorage.removeItem("access_token"),localStorage.removeItem("username"),Promise.resolve().then(n.bind(n,3708)).then(({default:e})=>{"/login"!==e.currentRoute.value?.path&&e.push("/login")})};async function c(e,t={}){const n=localStorage.getItem("access_token"),c=new Headers(t.headers||{});let d=!1;n&&c.append("Authorization",`Bearer ${n}`),!t.body||t.body instanceof FormData||c.has("Content-Type")||c.append("Content-Type","application/json");const u={...t,headers:c};try{if(!(0,r.isBackendConfigured)())throw new Error("æœªé…ç½®åç«¯æœåŠ¡å™¨");const t=(0,r.mh)(e);console.log(`[Request] å‘èµ·è¯·æ±‚: ${u.method||"GET"} ${t}`);const n=await fetch(t,u);if(204===n.status)return console.log(`[Request] æ”¶åˆ° 204 No Content å“åº” from ${t}`),null;const c=await n.text();if(!n.ok){console.error(`[Request] è¯·æ±‚å¤±è´¥! Status: ${n.status} ${n.statusText} from ${t}`),console.error("[Request] åŸå§‹å“åº”ä½“:",c);let r=`æœåŠ¡å™¨é”™è¯¯ ${n.status}`;try{const e=JSON.parse(c);r=i(e)||r}catch(e){r=c.substring(0,100)||"æ— æ³•è§£ææœåŠ¡å™¨å“åº”ã€‚"}throw r=o(r),401!==n.status||s(e)?(a.o.error(r),d=!0):(r="ç™»å½•å·²å¤±æ•ˆæˆ–æœªç™»å½•ï¼Œè¯·å…ˆç™»å½•åå†è¯•ã€‚",a.o.info(r),d=!0,l()),new Error(r)}try{return JSON.parse(c)}catch(e){throw console.error(`[Request] JSON è§£æå¤±è´¥ from ${t}. åŸå§‹å“åº”ä½“:`,c),new Error("è§£ææœåŠ¡å™¨å“åº”å¤±è´¥ï¼Œè¿”å›çš„ä¸æ˜¯æœ‰æ•ˆçš„JSONæ ¼å¼ã€‚")}}catch(t){console.error(`[Request] ç½‘ç»œå±‚æˆ–æœªçŸ¥é”™è¯¯ for url: ${e}`,t);const n=o(t instanceof Error?t.message:"ç½‘ç»œè¿æ¥å¤±è´¥æˆ–åç«¯åœ°å€æ— æ•ˆï¼Œè¯·æ£€æŸ¥åç«¯æœåŠ¡ã€‚");throw d||a.o.error(n),new Error(n)}}async function d(){const e=localStorage.getItem("access_token");if(!(0,r.isBackendConfigured)())return console.log("[éªŒè¯ä»¤ç‰Œ] æœªé…ç½®åç«¯ï¼Œè·³è¿‡éªŒè¯"),!1;if(console.log("[éªŒè¯ä»¤ç‰Œ] ä»localStorageè·å–åˆ°çš„token:",e?`${e.substring(0,20)}...`:"null"),!e)return console.log("[éªŒè¯ä»¤ç‰Œ] æœªæ‰¾åˆ°ä»¤ç‰Œï¼Œç›´æ¥è¿”å›false"),!1;try{console.log("[éªŒè¯ä»¤ç‰Œ] å¼€å§‹å‘é€éªŒè¯è¯·æ±‚åˆ° /api/v1/auth/me");const e=await c("/api/v1/auth/me",{method:"GET"});if(console.log("[éªŒè¯ä»¤ç‰Œ] éªŒè¯æˆåŠŸï¼Œç”¨æˆ·æ•°æ®:",e),e&&e.user_name)return localStorage.setItem("username",e.user_name),!0;throw new Error("æ— æ•ˆçš„ç”¨æˆ·æ•°æ®")}catch(e){return console.error("[éªŒè¯ä»¤ç‰Œ] éªŒè¯å¤±è´¥ï¼Œé”™è¯¯è¯¦æƒ…:",e),console.warn("[éªŒè¯ä»¤ç‰Œ] æ³¨æ„ï¼šæš‚æ—¶ä¿ç•™ä»¤ç‰Œï¼Œä¸è‡ªåŠ¨æ¸…é™¤"),!1}}async function u(){try{const e=await c.get("/api/v1/worlds/");return console.log("[API] æˆåŠŸè·å–ä¸–ç•Œåˆ—è¡¨:",e),e||[]}catch(e){return console.error("[API] è·å–ä¸–ç•Œåˆ—è¡¨å¤±è´¥:",e),a.o.error("è·å–ä¸–ç•Œåˆ—è¡¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),[]}}async function m(){try{const e=await c.get("/api/v1/talent_tiers/");return console.log("[API] æˆåŠŸè·å–å¤©èµ„ç­‰çº§åˆ—è¡¨:",e),e||[]}catch(e){return console.error("[API] è·å–å¤©èµ„ç­‰çº§å¤±è´¥:",e),a.o.error("è·å–å¤©èµ„ç­‰çº§å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),[]}}async function p(){try{const e=await c.get("/api/v1/origins/");return console.log("[API] æˆåŠŸè·å–å‡ºèº«åˆ—è¡¨:",e),e||[]}catch(e){return console.error("[API] è·å–å‡ºèº«åˆ—è¡¨å¤±è´¥:",e),a.o.error("è·å–å‡ºèº«åˆ—è¡¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),[]}}async function f(){try{const e=await c.get("/api/v1/spirit_roots/");return console.log("[API] æˆåŠŸè·å–çµæ ¹åˆ—è¡¨:",e),e||[]}catch(e){return console.error("[API] è·å–çµæ ¹åˆ—è¡¨å¤±è´¥:",e),a.o.error("è·å–çµæ ¹åˆ—è¡¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),[]}}async function g(){try{const e=await c.get("/api/v1/talents/");console.log("[API] æˆåŠŸè·å–å¤©èµ‹åˆ—è¡¨:",e);const t=(e||[]).map(e=>({id:e.id??0,name:e.name??"",description:e.description,talent_cost:e.talent_cost??0,rarity:e.rarity??0,tier_id:e.tier_id??e.tier?.id??null,tier:e.tier,source:e.source,effects:e.effects}));return console.log("[API] å¤©èµ‹æ•°æ®è½¬æ¢å®Œæˆï¼Œç¤ºä¾‹:",t.slice(0,2)),t}catch(e){return console.error("[API] è·å–å¤©èµ‹åˆ—è¡¨å¤±è´¥:",e),a.o.error("è·å–å¤©èµ‹åˆ—è¡¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),[]}}async function h(e){try{console.log("[API] æ­£åœ¨å‘åç«¯æäº¤è§’è‰²åˆ›å»ºä¿¡æ¯:",e);const t=await c.post("/api/v1/characters/create",e);return console.log("[API] è§’è‰²åˆ›å»ºæˆåŠŸï¼Œåç«¯è¿”å›:",t),t}catch(e){throw console.error("[API] è§’è‰²åˆ›å»ºå¤±è´¥:",e),a.o.error("è§’è‰²åˆ›å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),e}}async function v(e,t){try{console.log("[API] æ­£åœ¨å‘äº‘ç«¯åŒæ­¥å­˜æ¡£æ•°æ®:",{charId:e,saveData:t});const n=await c.put(`/api/v1/characters/${e}/save`,t);return console.log("[API] å­˜æ¡£åŒæ­¥æˆåŠŸï¼Œåç«¯è¿”å›:",n),n}catch(e){throw console.error("[API] å­˜æ¡£åŒæ­¥å¤±è´¥:",e),a.o.error("å­˜æ¡£åŒæ­¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),e}}async function b(e){try{const t=await c.get(`/api/v1/characters/${e}`);return console.log("[API] æˆåŠŸè·å–è§’è‰²è¯¦æƒ…:",{charId:e}),t}catch(e){throw console.error("[API] è·å–è§’è‰²è¯¦æƒ…å¤±è´¥:",e),a.o.error("è·å–äº‘ç«¯è§’è‰²æ•°æ®å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ã€‚"),e}}c.get=(e,t={})=>c(e,{...t,method:"GET"}),c.post=(e,t,n={})=>c(e,{...n,method:"POST",body:void 0!==t?JSON.stringify(t):void 0}),c.put=(e,t,n={})=>c(e,{...n,method:"PUT",body:void 0!==t?JSON.stringify(t):void 0}),c.delete=(e,t={})=>c(e,{...t,method:"DELETE"})},9353:e=>{"use strict";var t=Object.prototype.toString,n=Math.max,a=function(e,t){for(var n=[],a=0;a<e.length;a+=1)n[a]=e[a];for(var r=0;r<t.length;r+=1)n[r+e.length]=t[r];return n};e.exports=function(e){var r=this;if("function"!=typeof r||"[object Function]"!==t.apply(r))throw new TypeError("Function.prototype.bind called on incompatible "+r);for(var o,i=function(e){for(var t=[],n=1,a=0;n<e.length;n+=1,a+=1)t[a]=e[n];return t}(arguments),s=n(0,r.length-i.length),l=[],c=0;c<s;c++)l[c]="$"+c;if(o=Function("binder","return function ("+function(e){for(var t="",n=0;n<e.length;n+=1)t+=e[n],n+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof o){var t=r.apply(this,a(i,arguments));return Object(t)===t?t:this}return r.apply(e,a(i,arguments))}),r.prototype){var d=function(){};d.prototype=r.prototype,o.prototype=new d,d.prototype=null}return o}},9383:e=>{"use strict";e.exports=Error},9490:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.sect-panel[data-v-2bfc3b24] {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background: var(--color-background);\n}\n.panel-content[data-v-2bfc3b24] {\n  flex: 1;\n  overflow: hidden;\n}\n.sect-container[data-v-2bfc3b24] {\n  height: 100%;\n  display: flex;\n  background: var(--color-surface);\n  overflow: hidden;\n}\n.sect-list[data-v-2bfc3b24] {\n  width: 280px; /* çª„ä¸€ç‚¹ */\n  border-right: 1px solid var(--color-border);\n  display: flex;\n  flex-direction: column;\n}\n.list-header[data-v-2bfc3b24] {\n  padding: 1rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.panel-title[data-v-2bfc3b24] {\n  margin: 0 0 1rem 0;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-primary);\n  text-align: center;\n}\n.search-bar[data-v-2bfc3b24] {\n  position: relative;\n  display: flex;\n  align-items: center;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 0.5rem;\n}\n.search-bar svg[data-v-2bfc3b24] {\n  color: var(--color-text-secondary);\n  margin-right: 0.5rem;\n}\n.search-input[data-v-2bfc3b24] {\n  flex: 1;\n  border: none;\n  outline: none;\n  background: transparent;\n  color: var(--color-text);\n  font-size: 0.875rem;\n}\n.list-content[data-v-2bfc3b24] {\n  flex: 1;\n  overflow-y: auto;\n  padding: 0.5rem;\n}\n.loading-state[data-v-2bfc3b24], .empty-state[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 200px;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.empty-icon[data-v-2bfc3b24] {\n  opacity: 0.5;\n  margin-bottom: 1rem;\n}\n.empty-text[data-v-2bfc3b24] {\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n.empty-hint[data-v-2bfc3b24] {\n  font-size: 0.8rem;\n  opacity: 0.8;\n}\n.empty-actions[data-v-2bfc3b24] {\n  display: flex;\n  gap: 0.5rem;\n  margin-top: 0.75rem;\n  flex-wrap: wrap;\n  justify-content: center;\n}\n.empty-action-btn[data-v-2bfc3b24] {\n  padding: 0.4rem 0.75rem;\n  border-radius: 8px;\n  border: 1px solid var(--color-border);\n  background: var(--color-background);\n  color: var(--color-text);\n  cursor: pointer;\n  transition: all 0.15s ease;\n  font-size: 0.85rem;\n}\n.empty-action-btn[data-v-2bfc3b24]:hover {\n  transform: translateY(-1px);\n  border-color: var(--color-primary);\n}\n.empty-action-btn.primary[data-v-2bfc3b24] {\n  background: var(--color-primary);\n  border-color: var(--color-primary);\n  color: #fff;\n}\n.empty-action-btn.primary[data-v-2bfc3b24]:hover {\n  filter: brightness(1.05);\n}\n.empty-prompt-hint[data-v-2bfc3b24] {\n  margin-top: 0.75rem;\n  font-size: 0.8rem;\n  opacity: 0.8;\n}\n.empty-prompt-hint code[data-v-2bfc3b24] {\n  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;\n  padding: 0.1rem 0.35rem;\n  border-radius: 6px;\n  background: rgba(99, 102, 241, 0.12);\n  border: 1px solid rgba(99, 102, 241, 0.2);\n}\n.sect-list-content[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.sect-card[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  padding: 1rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.sect-card[data-v-2bfc3b24]:hover {\n  border-color: #9333ea;\n  box-shadow: 0 2px 8px rgba(147, 51, 234, 0.1);\n  transform: translateY(-1px);\n}\n.sect-card.selected[data-v-2bfc3b24] {\n  background: linear-gradient(135deg, rgba(147, 51, 234, 0.1), rgba(168, 85, 247, 0.1));\n  border-color: #9333ea;\n  box-shadow: 0 4px 12px rgba(147, 51, 234, 0.15);\n}\n.sect-card.can-join[data-v-2bfc3b24] {\n  border-left: 3px solid #22c55e;\n}\n.sect-icon[data-v-2bfc3b24] {\n  position: relative;\n  margin-right: 0.75rem;\n  flex-shrink: 0;\n}\n.sect-emoji[data-v-2bfc3b24] {\n  font-size: 2rem;\n  display: block;\n}\n.sect-level[data-v-2bfc3b24] {\n  position: absolute;\n  bottom: -2px;\n  right: -2px;\n  padding: 1px 4px;\n  border-radius: 8px;\n  font-size: 0.6rem;\n  font-weight: 700;\n  color: white;\n}\n.level-ä¸€æµ[data-v-2bfc3b24] { background: #ef4444;\n}\n.level-äºŒæµ[data-v-2bfc3b24] { background: #f59e0b;\n}\n.level-ä¸‰æµ[data-v-2bfc3b24] { background: #3b82f6;\n}\n.level-æœ«æµ[data-v-2bfc3b24] { background: #6b7280;\n}\n.sect-info[data-v-2bfc3b24] {\n  flex: 1;\n  min-width: 0;\n}\n.sect-name[data-v-2bfc3b24] {\n  font-weight: 600;\n  color: var(--color-text);\n  margin-bottom: 0.25rem;\n  font-size: 1rem;\n}\n.sect-meta[data-v-2bfc3b24] {\n  margin-bottom: 0.5rem;\n}\n.sect-type[data-v-2bfc3b24] {\n  background: rgba(147, 51, 234, 0.1);\n  color: #9333ea;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n.sect-stats[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n}\n.member-count[data-v-2bfc3b24] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  padding: 2px 6px;\n  border-radius: 3px;\n  font-weight: 500;\n}\n\\n/* .power-rating removed */\\n.arrow-icon[data-v-2bfc3b24] {\n  color: var(--color-border-hover);\n  transition: transform 0.2s;\n}\n.sect-card.selected .arrow-icon[data-v-2bfc3b24] {\n  transform: rotate(90deg);\n  color: #9333ea;\n}\n.sect-detail[data-v-2bfc3b24] {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n.detail-content[data-v-2bfc3b24] {\n  height: 100%;\n  padding: 1rem;\n  overflow-y: auto;\n}\n.detail-header[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n  margin-bottom: 2rem;\n  padding-bottom: 1rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.detail-icon[data-v-2bfc3b24] {\n  width: 64px;\n  height: 64px;\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: linear-gradient(135deg, #9333ea, #7c3aed);\n  flex-shrink: 0;\n  box-shadow: 0 4px 16px rgba(147, 51, 234, 0.3);\n}\n.sect-emoji-large[data-v-2bfc3b24] {\n  font-size: 2rem;\n}\n.detail-info[data-v-2bfc3b24] {\n  flex: 1;\n}\n.detail-name[data-v-2bfc3b24] {\n  margin: 0 0 0.5rem 0;\n  font-size: 1.25rem;\n  font-weight: 700;\n  color: var(--color-text);\n}\n.detail-badges[data-v-2bfc3b24] {\n  display: flex;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.type-badge[data-v-2bfc3b24], .level-badge[data-v-2bfc3b24] {\n  padding: 0.25rem 0.5rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 500;\n}\n.type-badge.type-righteous[data-v-2bfc3b24] { background: rgba(59, 130, 246, 0.1); color: #3b82f6;\n}\n.type-badge.type-demonic[data-v-2bfc3b24] { background: rgba(239, 68, 68, 0.1); color: #ef4444;\n}\n.type-badge.type-neutral[data-v-2bfc3b24] { background: rgba(107, 114, 128, 0.1); color: #6b7280;\n}\n.type-badge.type-merchant[data-v-2bfc3b24] { background: rgba(245, 158, 11, 0.1); color: #f59e0b;\n}\n.type-badge.type-family[data-v-2bfc3b24] { background: rgba(34, 197, 94, 0.1); color: #22c55e;\n}\n.type-badge.type-alliance[data-v-2bfc3b24] { background: rgba(168, 85, 247, 0.1); color: #a855f7;\n}\n.level-badge[data-v-2bfc3b24] { background: rgba(168, 85, 247, 0.1); color: #a855f7;\n}\n.detail-body[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n.detail-section[data-v-2bfc3b24] {\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n  padding: 1rem;\n}\n.section-title[data-v-2bfc3b24] {\n  margin: 0 0 1rem 0;\n  font-size: 0.9rem;\n  font-weight: 600;\n  color: var(--color-text);\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--color-border);\n  display: flex;            /* å›¾æ ‡ä¸æ ‡é¢˜åŒä¸€è¡Œ */\n  align-items: center;      /* å‚ç›´å±…ä¸­å¯¹é½ */\n  gap: 8px;                 /* å›¾æ ‡ä¸æ–‡å­—é—´è· */\n}\n.section-title svg[data-v-2bfc3b24] {\n  flex-shrink: 0;           /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼©æ¢è¡Œ */\n}\n.info-grid[data-v-2bfc3b24] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n  margin-bottom: 1rem;\n}\n.info-item[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.info-label[data-v-2bfc3b24] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.info-value[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  color: var(--color-text);\n  font-weight: 600;\n}\n.sect-description[data-v-2bfc3b24] {\n  margin-top: 1rem;\n}\n.desc-title[data-v-2bfc3b24] {\n  margin: 0 0 0.5rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.desc-text[data-v-2bfc3b24] {\n  margin: 0;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: var(--color-text-secondary);\n}\n.sect-specialties[data-v-2bfc3b24] {\n  margin-top: 1rem;\n}\n.specialties-title[data-v-2bfc3b24] {\n  margin: 0 0 0.5rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.specialties-tags[data-v-2bfc3b24] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.specialty-tag[data-v-2bfc3b24] {\n  background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(147, 51, 234, 0.1));\n  color: #9333ea;\n  padding: 0.25rem 0.75rem;\n  border-radius: 12px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border: 1px solid rgba(147, 51, 234, 0.2);\n}\n.member-overview[data-v-2bfc3b24] {\n  text-align: center;\n  margin-bottom: 1.5rem;\n}\n.total-members[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.25rem;\n}\n.total-number[data-v-2bfc3b24] {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #9333ea;\n}\n.total-label[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.member-breakdown[data-v-2bfc3b24] {\n  margin-bottom: 1.5rem;\n}\n.breakdown-title[data-v-2bfc3b24] {\n  margin: 0 0 0.75rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.realm-stats[data-v-2bfc3b24], .position-stats[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.realm-stat[data-v-2bfc3b24], .position-stat[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.realm-name[data-v-2bfc3b24], .position-name[data-v-2bfc3b24] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  min-width: 60px;\n}\n.realm-bar[data-v-2bfc3b24], .position-bar[data-v-2bfc3b24] {\n  flex: 1;\n  height: 6px;\n  background: var(--color-border);\n  border-radius: 3px;\n  overflow: hidden;\n}\n.realm-fill[data-v-2bfc3b24] {\n  height: 100%;\n  background: linear-gradient(90deg, #9333ea, #7c3aed);\n  transition: width 0.3s ease;\n}\n.position-fill[data-v-2bfc3b24] {\n  height: 100%;\n  background: linear-gradient(90deg, #3b82f6, #1d4ed8);\n  transition: width 0.3s ease;\n}\n.realm-count[data-v-2bfc3b24], .position-count[data-v-2bfc3b24] {\n  font-size: 0.8rem;\n  font-weight: 600;\n  color: var(--color-text);\n  min-width: 30px;\n  text-align: right;\n}\n.relationship-info[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n}\n.relationship-item[data-v-2bfc3b24] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.relationship-label[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.relationship-value[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.reputation-value[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.reputation-level[data-v-2bfc3b24] {\n  font-size: 0.75rem;\n  padding: 0.2rem 0.4rem;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.reputation-legendary[data-v-2bfc3b24] {\n  color: #f59e0b;\n}\n.reputation-legendary .reputation-level[data-v-2bfc3b24] {\n  background: rgba(245, 158, 11, 0.1);\n  color: #f59e0b;\n  border: 1px solid rgba(245, 158, 11, 0.2);\n}\n.reputation-excellent[data-v-2bfc3b24] {\n  color: #8b5cf6;\n}\n.reputation-excellent .reputation-level[data-v-2bfc3b24] {\n  background: rgba(139, 92, 246, 0.1);\n  color: #8b5cf6;\n  border: 1px solid rgba(139, 92, 246, 0.2);\n}\n.reputation-good[data-v-2bfc3b24] {\n  color: #3b82f6;\n}\n.reputation-good .reputation-level[data-v-2bfc3b24] {\n  background: rgba(59, 130, 246, 0.1);\n  color: #3b82f6;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.reputation-fair[data-v-2bfc3b24] {\n  color: #22c55e;\n}\n.reputation-fair .reputation-level[data-v-2bfc3b24] {\n  background: rgba(34, 197, 94, 0.1);\n  color: #22c55e;\n  border: 1px solid rgba(34, 197, 94, 0.2);\n}\n.reputation-low[data-v-2bfc3b24] {\n  color: #6b7280;\n}\n.reputation-low .reputation-level[data-v-2bfc3b24] {\n  background: rgba(107, 114, 128, 0.1);\n  color: #6b7280;\n  border: 1px solid rgba(107, 114, 128, 0.2);\n}\n.reputation-none[data-v-2bfc3b24] {\n  color: var(--color-text-secondary);\n}\n.reputation-none .reputation-level[data-v-2bfc3b24] {\n  background: rgba(var(--color-text-secondary-rgb), 0.1);\n  color: var(--color-text-secondary);\n  border: 1px solid rgba(var(--color-text-secondary-rgb), 0.2);\n}\n.join-requirements[data-v-2bfc3b24] {\n  margin-bottom: 1rem;\n}\n.requirements-list[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.requirement-item[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.requirement-icon[data-v-2bfc3b24] {\n  color: #22c55e;\n}\n.requirement-text[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.no-requirements[data-v-2bfc3b24] {\n  text-align: center;\n  padding: 1rem;\n  color: var(--color-text-secondary);\n}\n.join-benefits[data-v-2bfc3b24] {\n  margin-bottom: 1rem;\n}\n.benefits-title[data-v-2bfc3b24] {\n  margin: 0 0 0.5rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.benefits-list[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.benefit-item[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.benefit-icon[data-v-2bfc3b24] {\n  color: #3b82f6;\n}\n.benefit-text[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n}\n.join-actions[data-v-2bfc3b24] {\n  text-align: center;\n}\n.join-btn[data-v-2bfc3b24] {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.75rem 1.5rem;\n  background: linear-gradient(135deg, #22c55e, #16a34a);\n  border: none;\n  border-radius: 8px;\n  color: white;\n  font-size: 0.875rem;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.join-btn[data-v-2bfc3b24]:hover {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);\n}\n.current-member-info[data-v-2bfc3b24] {\n  margin-bottom: 1.5rem;\n}\n.member-status[data-v-2bfc3b24] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 1rem;\n}\n.status-item[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n.status-label[data-v-2bfc3b24] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.status-value[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  color: var(--color-text);\n  font-weight: 600;\n}\n.status-value.position[data-v-2bfc3b24] {\n  color: #9333ea;\n}\n.status-value.contribution[data-v-2bfc3b24] {\n  color: #f59e0b;\n}\n.status-value.reputation[data-v-2bfc3b24] {\n  color: #3b82f6;\n}\n.sect-actions[data-v-2bfc3b24] {\n  margin-top: 1rem;\n}\n.actions-title[data-v-2bfc3b24] {\n  margin: 0 0 0.75rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.action-buttons[data-v-2bfc3b24] {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 0.5rem;\n}\n.sect-action-btn[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  padding: 0.75rem 0.5rem;\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  color: var(--color-text);\n  font-size: 0.75rem;\n  cursor: pointer;\n  transition: all 0.2s ease;\n  text-align: center;\n  min-width: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.sect-action-btn[data-v-2bfc3b24]:hover {\n  border-color: #9333ea;\n  background: rgba(147, 51, 234, 0.05);\n}\n.no-selection[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  text-align: center;\n  color: var(--color-text-secondary);\n}\n.placeholder-icon[data-v-2bfc3b24] {\n  opacity: 0.5;\n  margin-bottom: 1rem;\n}\n.placeholder-text[data-v-2bfc3b24] {\n  font-size: 1rem;\n  font-weight: 600;\n  margin-bottom: 0.5rem;\n}\n.placeholder-hint[data-v-2bfc3b24] {\n  font-size: 0.85rem;\n  opacity: 0.8;\n}\n\n/* åŠ¿åŠ›èŒƒå›´ç›¸å…³æ ·å¼ */\n.territory-info[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n/* æˆå‘˜ç»Ÿè®¡æ ·å¼ */\n.member-stats[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n.total-members[data-v-2bfc3b24] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem;\n  background: rgba(var(--color-primary-rgb), 0.05);\n  border-radius: 8px;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.1);\n}\n.total-label[data-v-2bfc3b24] {\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: var(--color-text-secondary);\n}\n.total-value[data-v-2bfc3b24] {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: var(--color-primary);\n}\n.distribution-title[data-v-2bfc3b24] {\n  margin: 0 0 0.75rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.realm-stats[data-v-2bfc3b24], .position-stats[data-v-2bfc3b24] {\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));\n  gap: 0.5rem;\n  max-height: none; /* å…è®¸å®Œæ•´æ˜¾ç¤º */\n}\n.realm-item[data-v-2bfc3b24], .position-item[data-v-2bfc3b24] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.5rem 0.75rem;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n.realm-item[data-v-2bfc3b24]:hover, .position-item[data-v-2bfc3b24]:hover {\n  background: var(--color-surface);\n  border-color: rgba(var(--color-primary-rgb), 0.2);\n}\n.realm-name[data-v-2bfc3b24], .position-name[data-v-2bfc3b24] {\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n}\n.realm-count[data-v-2bfc3b24], .position-count[data-v-2bfc3b24] {\n  font-size: 0.8rem;\n  font-weight: 500;\n  color: var(--color-text);\n}\n\n/* å®—é—¨é¢†å¯¼å±‚æ ·å¼ */\n.leadership-info[data-v-2bfc3b24] {\n  margin-top: 1.5rem;\n  padding: 1rem;\n  background: rgba(var(--color-primary-rgb), 0.05);\n  border-radius: 8px;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.1);\n}\n.leadership-title[data-v-2bfc3b24] {\n  margin: 0 0 1rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.leader-grid[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.75rem;\n  margin-bottom: 1rem;\n}\n.leader-item[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n  padding: 0.75rem;\n  background: var(--color-surface);\n  border-radius: 6px;\n  border: 1px solid var(--color-border);\n}\n.leader-item.primary-leader[data-v-2bfc3b24] {\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.05));\n  border-color: rgba(var(--color-primary-rgb), 0.3);\n}\n.leader-role[data-v-2bfc3b24] {\n  font-size: 0.75rem;\n  font-weight: 600;\n  color: var(--color-primary);\n  background: rgba(var(--color-primary-rgb), 0.1);\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  min-width: 3rem;\n  text-align: center;\n}\n.leader-name[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.leader-realm[data-v-2bfc3b24] {\n  font-size: 0.75rem;\n  color: var(--color-accent);\n  background: rgba(var(--color-accent-rgb), 0.1);\n  padding: 0.2rem 0.4rem;\n  border-radius: 4px;\n  font-weight: 500;\n  margin-left: auto;\n}\n.sect-strength[data-v-2bfc3b24] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0.75rem;\n  background: rgba(var(--color-success-rgb), 0.05);\n  border-radius: 6px;\n  border: 1px solid rgba(var(--color-success-rgb), 0.1);\n}\n.strength-item[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 0.25rem;\n}\n.strength-label[data-v-2bfc3b24] {\n  font-size: 0.75rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.strength-value[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.strength-value.peak-power[data-v-2bfc3b24] {\n  color: var(--color-accent);\n  text-shadow: 0 0 4px rgba(var(--color-accent-rgb), 0.3);\n}\n.strength-value.power-rating[data-v-2bfc3b24] {\n  color: var(--color-primary);\n  font-weight: 700;\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.05));\n  padding: 0.25rem 0.5rem;\n  border-radius: 4px;\n  border: 1px solid rgba(var(--color-primary-rgb), 0.2);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  flex-wrap: wrap;\n}\n.power-level[data-v-2bfc3b24] {\n  font-size: 0.75rem;\n  padding: 0.2rem 0.4rem;\n  border-radius: 4px;\n  font-weight: 500;\n}\n.power-legendary[data-v-2bfc3b24] {\n  color: #dc2626 !important;\n  border-color: rgba(220, 38, 38, 0.3) !important;\n  background: linear-gradient(135deg, rgba(220, 38, 38, 0.1), rgba(239, 68, 68, 0.05)) !important;\n}\n.power-legendary .power-level[data-v-2bfc3b24] {\n  background: rgba(220, 38, 38, 0.1);\n  color: #dc2626;\n  border: 1px solid rgba(220, 38, 38, 0.2);\n}\n.power-supreme[data-v-2bfc3b24] {\n  color: #7c3aed !important;\n  border-color: rgba(124, 58, 237, 0.3) !important;\n  background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(139, 92, 246, 0.05)) !important;\n}\n.power-supreme .power-level[data-v-2bfc3b24] {\n  background: rgba(124, 58, 237, 0.1);\n  color: #7c3aed;\n  border: 1px solid rgba(124, 58, 237, 0.2);\n}\n.power-strong[data-v-2bfc3b24] {\n  color: #2563eb !important;\n  border-color: rgba(37, 99, 235, 0.3) !important;\n  background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(59, 130, 246, 0.05)) !important;\n}\n.power-strong .power-level[data-v-2bfc3b24] {\n  background: rgba(37, 99, 235, 0.1);\n  color: #2563eb;\n  border: 1px solid rgba(37, 99, 235, 0.2);\n}\n.power-good[data-v-2bfc3b24] {\n  color: #059669 !important;\n  border-color: rgba(5, 150, 105, 0.3) !important;\n  background: linear-gradient(135deg, rgba(5, 150, 105, 0.1), rgba(16, 185, 129, 0.05)) !important;\n}\n.power-good .power-level[data-v-2bfc3b24] {\n  background: rgba(5, 150, 105, 0.1);\n  color: #059669;\n  border: 1px solid rgba(5, 150, 105, 0.2);\n}\n.power-average[data-v-2bfc3b24] {\n  color: #d97706 !important;\n  border-color: rgba(217, 119, 6, 0.3) !important;\n  background: linear-gradient(135deg, rgba(217, 119, 6, 0.1), rgba(245, 158, 11, 0.05)) !important;\n}\n.power-average .power-level[data-v-2bfc3b24] {\n  background: rgba(217, 119, 6, 0.1);\n  color: #d97706;\n  border: 1px solid rgba(217, 119, 6, 0.2);\n}\n.power-weak[data-v-2bfc3b24] {\n  color: #6b7280 !important;\n  border-color: rgba(107, 114, 128, 0.3) !important;\n  background: linear-gradient(135deg, rgba(107, 114, 128, 0.1), rgba(156, 163, 175, 0.05)) !important;\n}\n.power-weak .power-level[data-v-2bfc3b24] {\n  background: rgba(107, 114, 128, 0.1);\n  color: #6b7280;\n  border: 1px solid rgba(107, 114, 128, 0.2);\n}\n.power-poor[data-v-2bfc3b24] {\n  color: var(--color-text-secondary) !important;\n  border-color: rgba(var(--color-text-secondary-rgb), 0.3) !important;\n  background: linear-gradient(135deg, rgba(var(--color-text-secondary-rgb), 0.1), rgba(var(--color-text-secondary-rgb), 0.05)) !important;\n}\n.power-poor .power-level[data-v-2bfc3b24] {\n  background: rgba(var(--color-text-secondary-rgb), 0.1);\n  color: var(--color-text-secondary);\n  border: 1px solid rgba(var(--color-text-secondary-rgb), 0.2);\n}\n.influence-description[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  color: var(--color-text);\n  line-height: 1.5;\n}\n.controlled-areas[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.areas-list[data-v-2bfc3b24] {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n.area-tag[data-v-2bfc3b24] {\n  background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.1));\n  color: #3b82f6;\n  padding: 0.25rem 0.5rem;\n  border-radius: 6px;\n  font-size: 0.75rem;\n  font-weight: 500;\n  border: 1px solid rgba(59, 130, 246, 0.2);\n}\n.strategic-value[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.value-display[data-v-2bfc3b24] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.value-bar[data-v-2bfc3b24] {\n  flex: 1;\n  height: 8px;\n  background: var(--color-border);\n  border-radius: 4px;\n  overflow: hidden;\n}\n.value-fill[data-v-2bfc3b24] {\n  height: 100%;\n  background: linear-gradient(90deg, #22c55e, #16a34a);\n  transition: width 0.3s ease;\n}\n.value-text[data-v-2bfc3b24] {\n  font-size: 0.875rem;\n  font-weight: 600;\n  color: var(--color-text);\n  min-width: 40px;\n}\n\n/* å›é€€æ˜¾ç¤ºæ ·å¼ */\n.fallback-leadership[data-v-2bfc3b24] {\n  padding: 1rem;\n  background: rgba(var(--color-warning-rgb), 0.05);\n  border-radius: 8px;\n  border: 1px solid rgba(var(--color-warning-rgb), 0.1);\n}\n.leadership-description[data-v-2bfc3b24] {\n  margin: 0 0 1rem 0;\n  font-size: 0.875rem;\n  line-height: 1.5;\n  color: var(--color-text-secondary);\n}\n\n/* æ•°æ®ç¼ºå¤±æç¤ºæ ·å¼ */\n.missing-data-notice[data-v-2bfc3b24] {\n  background: rgba(var(--color-warning-rgb), 0.05);\n  border: 1px solid rgba(var(--color-warning-rgb), 0.2);\n  border-radius: 8px;\n  padding: 1rem;\n  margin-top: 1rem;\n}\n.notice-title[data-v-2bfc3b24] {\n  margin: 0 0 0.5rem 0;\n  font-size: 0.85rem;\n  font-weight: 600;\n  color: var(--color-warning);\n}\n.notice-content[data-v-2bfc3b24] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n.notice-text[data-v-2bfc3b24] {\n  margin: 0;\n  font-size: 0.875rem;\n  color: var(--color-text-secondary);\n  font-weight: 500;\n}\n.notice-hint[data-v-2bfc3b24] {\n  margin: 0;\n  font-size: 0.8rem;\n  color: var(--color-text-tertiary);\n  opacity: 0.8;\n}\n.animate-spin[data-v-2bfc3b24] {\n  animation: spin-2bfc3b24 1s linear infinite;\n}\n@keyframes spin-2bfc3b24 {\nfrom { transform: rotate(0deg);\n}\nto { transform: rotate(360deg);\n}\n}\n@media (max-width: 640px) {\n.sect-panel[data-v-2bfc3b24] {\n    padding: 0;\n}\n.panel-content[data-v-2bfc3b24] {\n    padding: 0;\n}\n.sect-container[data-v-2bfc3b24] {\n    flex-direction: column;\n    border-radius: 0;\n    border: none;\n}\n.sect-list[data-v-2bfc3b24] {\n    width: 100%;\n    height: 30vh;\n    min-height: 250px;\n    max-height: 350px;\n    border-right: none;\n    border-bottom: 1px solid var(--color-border);\n}\n.list-header[data-v-2bfc3b24] {\n    padding: 1rem;\n    position: sticky;\n    top: 0;\n    z-index: 100;\n    background: var(--color-surface);\n}\n.panel-title[data-v-2bfc3b24] {\n    font-size: 1.1rem;\n    margin-bottom: 0.75rem;\n}\n.search-bar[data-v-2bfc3b24] {\n    padding: 0.5rem;\n}\n.search-input[data-v-2bfc3b24] {\n    font-size: 0.9rem;\n}\n.list-content[data-v-2bfc3b24] {\n    padding: 0.5rem;\n}\n.sect-card[data-v-2bfc3b24] {\n    padding: 0.75rem;\n    margin-bottom: 0.5rem;\n}\n.sect-name[data-v-2bfc3b24] {\n    font-size: 0.95rem;\n}\n.sect-type[data-v-2bfc3b24] {\n    font-size: 0.7rem;\n    padding: 1px 6px;\n}\n\n  /* .power-rating removed */\n.sect-detail[data-v-2bfc3b24] {\n    flex: 1;\n    min-height: 0;\n    overflow-y: auto;\n}\n.detail-content[data-v-2bfc3b24] {\n    padding: 0.75rem;\n    height: auto;\n}\n.detail-header[data-v-2bfc3b24] {\n    margin-bottom: 1rem;\n    padding-bottom: 0.5rem;\n}\n.detail-icon[data-v-2bfc3b24] {\n    width: 40px;\n    height: 40px;\n}\n.sect-emoji-large[data-v-2bfc3b24] {\n    font-size: 1.25rem;\n}\n.detail-name[data-v-2bfc3b24] {\n    font-size: 1rem;\n}\n.info-grid[data-v-2bfc3b24] {\n    grid-template-columns: 1fr;\n    gap: 0.5rem;\n}\n.member-status[data-v-2bfc3b24] {\n    grid-template-columns: 1fr;\n    gap: 0.5rem;\n}\n.action-buttons[data-v-2bfc3b24] {\n    grid-template-columns: repeat(2, 1fr);\n    gap: 0.4rem;\n}\n.sect-action-btn[data-v-2bfc3b24] {\n    padding: 0.6rem 0.4rem;\n    font-size: 0.75rem;\n    justify-content: center;\n    white-space: normal; /* å…è®¸æ–‡æœ¬æ¢è¡Œ */\n    height: 100%; /* ç¡®ä¿æŒ‰é’®åœ¨æ¢è¡Œåé«˜åº¦ä¸€è‡´ */\n}\n.detail-section[data-v-2bfc3b24] {\n    padding: 0.6rem;\n    margin-bottom: 0.75rem;\n}\n.section-title[data-v-2bfc3b24] {\n    font-size: 0.8rem;\n    margin-bottom: 0.5rem;\n    padding-bottom: 0.4rem;\n}\n.realm-stats[data-v-2bfc3b24], .position-stats[data-v-2bfc3b24] {\n    grid-template-columns: 1fr;\n    gap: 0.5rem;\n}\n.leader-grid[data-v-2bfc3b24] {\n    gap: 0.5rem;\n}\n.leader-item[data-v-2bfc3b24] {\n    padding: 0.5rem;\n}\n.leader-role[data-v-2bfc3b24] {\n    font-size: 0.7rem;\n    padding: 0.2rem 0.4rem;\n    min-width: 2.5rem;\n}\n.leader-name[data-v-2bfc3b24] {\n    font-size: 0.8rem;\n}\n.leader-realm[data-v-2bfc3b24] {\n    font-size: 0.7rem;\n}\n}\n",""]);const s=i},9531:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-3fadd167] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(4px);\n  -webkit-backdrop-filter: blur(4px);\n}\n.modal-container[data-v-3fadd167] {\n  background: var(--color-surface);\n  border: 1px solid var(--color-border);\n  border-radius: 12px;\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\n  width: 90%;\n  max-width: 600px;\n  max-height: 90vh;\n  display: flex;\n  flex-direction: column;\n  animation: slideUp-3fadd167 0.3s ease-out;\n}\n@keyframes slideUp-3fadd167 {\nfrom {\n    opacity: 0;\n    transform: translateY(20px);\n}\nto {\n    opacity: 1;\n    transform: translateY(0);\n}\n}\n.modal-header[data-v-3fadd167] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-title[data-v-3fadd167] {\n  margin: 0;\n  font-size: 1.2rem;\n  font-weight: 600;\n  color: var(--color-text);\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n.modal-close[data-v-3fadd167] {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  padding: 0;\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n.modal-close[data-v-3fadd167]:hover {\n  background: rgba(var(--color-primary-rgb), 0.1);\n  color: var(--color-text);\n}\n.modal-content[data-v-3fadd167] {\n  flex: 1;\n  padding: 1.5rem;\n  overflow-y: auto;\n}\n\n/* Upload Area */\n.upload-area[data-v-3fadd167] {\n  border: 2px dashed var(--color-border);\n  border-radius: 12px;\n  padding: 2rem;\n  text-align: center;\n  transition: all 0.3s ease;\n  cursor: pointer;\n  background: var(--color-surface-light);\n}\n.upload-area[data-v-3fadd167]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface-lighter);\n}\n.upload-area.drag-over[data-v-3fadd167] {\n  border-color: var(--color-primary);\n  background: linear-gradient(135deg, rgba(var(--color-primary-rgb), 0.1), rgba(var(--color-accent-rgb), 0.1));\n  transform: scale(1.02);\n}\n.file-input[data-v-3fadd167] {\n  display: none;\n}\n.upload-content[data-v-3fadd167] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n.upload-icon[data-v-3fadd167] {\n  font-size: 3rem;\n  opacity: 0.6;\n}\n.upload-text[data-v-3fadd167] {\n  margin: 0;\n  color: var(--color-text);\n  font-size: 1rem;\n}\n.btn-select[data-v-3fadd167] {\n  padding: 0.6rem 1.5rem;\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: #fff;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n.btn-select[data-v-3fadd167]:hover {\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);\n  transform: translateY(-2px);\n}\n.upload-hint[data-v-3fadd167] {\n  margin: 0;\n  font-size: 0.8rem;\n  color: var(--color-text-secondary);\n  opacity: 0.7;\n}\n\n/* File Info */\n.file-info[data-v-3fadd167] {\n  margin-top: 1rem;\n  padding: 1rem;\n  background: var(--color-surface-lighter);\n  border: 1px solid var(--color-border);\n  border-radius: 8px;\n}\n.file-header[data-v-3fadd167] {\n  display: flex;\n  align-items: center;\n  gap: 0.75rem;\n}\n.file-icon[data-v-3fadd167] {\n  font-size: 1.5rem;\n}\n.file-name[data-v-3fadd167] {\n  flex: 1;\n  font-weight: 500;\n  color: var(--color-text);\n  word-break: break-all;\n}\n.file-size[data-v-3fadd167] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n}\n.btn-remove[data-v-3fadd167] {\n  background: none;\n  border: none;\n  color: var(--color-text-secondary);\n  cursor: pointer;\n  font-size: 1.2rem;\n  padding: 0.25rem;\n  border-radius: 4px;\n  transition: all 0.2s ease;\n}\n.btn-remove[data-v-3fadd167]:hover {\n  background-color: rgba(var(--color-danger-rgb), 0.1);\n  color: var(--color-danger);\n}\n\n/* Import Options */\n.import-options[data-v-3fadd167] {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  margin-top: 1.5rem;\n}\n.option-label[data-v-3fadd167] {\n  display: flex;\n  align-items: flex-start;\n  gap: 0.75rem;\n  padding: 1rem;\n  border: 2px solid var(--color-border);\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n.option-label[data-v-3fadd167]:hover {\n  border-color: var(--color-primary);\n  background: var(--color-surface-lighter);\n}\n.radio-input[data-v-3fadd167] {\n  margin-top: 0.2rem;\n  cursor: pointer;\n}\n.option-text[data-v-3fadd167] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  flex: 1;\n}\n.option-title[data-v-3fadd167] {\n  font-weight: 600;\n  color: var(--color-text);\n}\n.option-desc[data-v-3fadd167] {\n  font-size: 0.85rem;\n  color: var(--color-text-secondary);\n}\n.option-desc.warning[data-v-3fadd167] {\n  color: var(--color-warning);\n}\n\n/* Import Result */\n.import-result[data-v-3fadd167] {\n  margin-top: 1.5rem;\n  padding: 1rem;\n  border-radius: 8px;\n  display: flex;\n  gap: 0.75rem;\n  align-items: flex-start;\n}\n.import-result.success[data-v-3fadd167] {\n  background: rgba(var(--color-success-rgb), 0.1);\n  border: 1px solid rgba(var(--color-success-rgb), 0.3);\n}\n.import-result.warning[data-v-3fadd167] {\n  background: rgba(var(--color-warning-rgb), 0.1);\n  border: 1px solid rgba(var(--color-warning-rgb), 0.3);\n}\n.import-result.error[data-v-3fadd167] {\n  background: rgba(var(--color-danger-rgb), 0.1);\n  border: 1px solid rgba(var(--color-danger-rgb), 0.3);\n}\n.result-icon[data-v-3fadd167] {\n  font-size: 1.5rem;\n  flex-shrink: 0;\n}\n.result-content[data-v-3fadd167] {\n  flex: 1;\n}\n.result-message[data-v-3fadd167] {\n  margin: 0 0 0.5rem 0;\n  font-weight: 500;\n  color: var(--color-text);\n}\n.result-details[data-v-3fadd167] {\n  display: flex;\n  gap: 1rem;\n  flex-wrap: wrap;\n}\n.detail-item[data-v-3fadd167] {\n  font-size: 0.85rem;\n  padding: 0.25rem 0.75rem;\n  border-radius: 12px;\n}\n.detail-item.success[data-v-3fadd167] {\n  background: rgba(var(--color-success-rgb), 0.2);\n  color: var(--color-success);\n}\n.detail-item.error[data-v-3fadd167] {\n  background: rgba(var(--color-danger-rgb), 0.2);\n  color: var(--color-danger);\n}\n.modal-footer[data-v-3fadd167] {\n  display: flex;\n  justify-content: flex-end;\n  gap: 1rem;\n  padding: 1.5rem;\n  border-top: 1px solid var(--color-border);\n  background: var(--color-surface-light);\n}\n.btn[data-v-3fadd167] {\n  padding: 0.7rem 1.5rem;\n  border-radius: 6px;\n  border: none;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n}\n.btn-cancel[data-v-3fadd167] {\n  background: var(--color-surface-lighter);\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n}\n.btn-cancel[data-v-3fadd167]:hover:not(:disabled) {\n  background: rgba(var(--color-text-rgb), 0.05);\n  border-color: var(--color-text-secondary);\n}\n.btn-confirm[data-v-3fadd167] {\n  background: linear-gradient(135deg, var(--color-primary), var(--color-accent));\n  color: #fff;\n  border: none;\n  min-width: 120px;\n}\n.btn-confirm[data-v-3fadd167]:hover:not(:disabled) {\n  box-shadow: 0 4px 12px rgba(var(--color-primary-rgb), 0.4);\n  transform: translateY(-2px);\n}\n.btn-confirm[data-v-3fadd167]:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n  transform: none;\n}\n\n/* ç§»åŠ¨ç«¯é€‚é… */\n@media (max-width: 768px) {\n.modal-container[data-v-3fadd167] {\n    width: 95%;\n    max-width: 100%;\n    border-radius: 8px;\n}\n.modal-header[data-v-3fadd167] {\n    padding: 1rem;\n}\n.modal-title[data-v-3fadd167] {\n    font-size: 1.1rem;\n}\n.modal-content[data-v-3fadd167] {\n    padding: 1rem;\n}\n.upload-area[data-v-3fadd167] {\n    padding: 1.5rem;\n}\n.modal-footer[data-v-3fadd167] {\n    padding: 1rem;\n    flex-direction: column-reverse;\n    gap: 0.75rem;\n}\n.btn[data-v-3fadd167] {\n    width: 100%;\n    padding: 0.8rem 1rem;\n}\n}\n",""]);const s=i},9538:e=>{"use strict";e.exports=ReferenceError},9596:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var a=n(4061);const r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),s=e=>""===e;var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const c=({name:e,iconNode:t,absoluteStrokeWidth:n,"absolute-stroke-width":c,strokeWidth:d,"stroke-width":u,size:m=l.width,color:p=l.stroke,...f},{slots:g})=>(0,a.h)("svg",{...l,...f,width:m,height:m,stroke:p,"stroke-width":s(n)||s(c)||!0===n||!0===c?24*Number(d||u||l["stroke-width"])/Number(m):d||u||l["stroke-width"],class:i("lucide",f.class,...e?[`lucide-${r(o(e))}-icon`,`lucide-${r(e)}`]:["lucide-icon"])},[...t.map(e=>(0,a.h)(...e)),...g.default?[g.default()]:[]]),d=(e,t)=>(n,{slots:r,attrs:o})=>(0,a.h)(c,{...o,...n,iconNode:t,name:e},r)},9612:e=>{"use strict";e.exports=Object},9675:e=>{"use strict";e.exports=TypeError},9852:(e,t,n)=>{"use strict";n.d(t,{J:()=>v,f:()=>r.getTavernHelper});var a=n(2224),r=n(8651),o=n(4270),i=n(1184),s=n(4582),l=n(9173),c=n(8708),d=n(1513),u=n(9990),m=n(3943),p=n(9207),f=n(406),g=n(4530);class h{static instance=null;stateHistory=[];isSummarizing=!1;extractNarrativeText(e){const t=String(e||"").replace(/<(?:ant[-_]?)?thinking>[\s\S]*?<\/(?:ant[-_]?)?thinking>/gi,"").replace(/<\/?(?:ant[-_]?)?thinking>/gi,"").replace(/<reasoning>[\s\S]*?<\/reasoning>/gi,"").replace(/<\/?reasoning>/gi,"").replace(/<thought>[\s\S]*?<\/thought>/gi,"").replace(/<\/?thought>/gi,"").trim();if(!t)return"";if(t.startsWith("{")||t.includes("```"))try{const e=this.parseAIResponse(t);return e?.text?.trim()||""}catch{const e=t.match(/```(?:json)?\s*([\s\S]*?)```/i);if(e?.[1])try{const t=JSON.parse(e[1].trim());return String(t.text||t.å™äº‹æ–‡æœ¬||t.narrative||"").trim()}catch{return e[1].trim()}}return t}sanitizeActionOptionsForDisplay(e){return Array.isArray(e)?e.filter(e=>"string"==typeof e).map(e=>(0,p.E)(e).trim()).filter(e=>e.length>0):[]}constructor(){}static getInstance(){return this.instance||(this.instance=new h),this.instance}async processPlayerAction(e,t,o){console.log("[AIåŒå‘ç³»ç»Ÿ] processPlayerAction æ¥æ”¶åˆ°çš„options:",{hasOnStreamChunk:!!o?.onStreamChunk,useStreaming:o?.useStreaming,splitResponseGeneration:o?.splitResponseGeneration});const s=(0,i.useGameStateStore)(),c=(0,r.getTavernHelper)(),m=(0,l.useUIStore)();if(!c){const{aiService:e}=await Promise.resolve().then(n.bind(n,2288)),t=e.checkAvailability();if(!t.available)throw new Error(t.message)}const p=o?.generation_id||`gen_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;o?.onProgressUpdate?.("è·å–å­˜æ¡£æ•°æ®â€¦");const h=s.toSaveData();if(!h)throw new Error("æ— æ³•è·å–å­˜æ¡£æ•°æ®ï¼Œè¯·ç¡®ä¿è§’è‰²å·²åŠ è½½");o?.onProgressUpdate?.("æ„å»ºæç¤ºè¯å¹¶è¯·æ±‚AIç”Ÿæˆâ€¦");let v={text:"",mid_term_memory:"",tavern_commands:[],action_options:[]};try{const t=(0,g.ru)(h)?h:(0,g.jj)(h).migrated,r=(0,a.cloneDeep)(t);r.ç¤¾äº¤?.è®°å¿†&&(delete r.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†,delete r.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†),r.ç³»ç»Ÿ?.å†å²?.å™äº‹&&delete r.ç³»ç»Ÿ.å†å².å™äº‹;let i="";try{const{vectorMemoryService:t}=await Promise.resolve().then(n.bind(n,5831));if(t.isEnabled()&&r.ç¤¾äº¤?.è®°å¿†?.é•¿æœŸè®°å¿†?.length>0){const n=e||"",a={currentLocation:r.è§’è‰²?.ä½ç½®?.æè¿°},o=await t.searchMemories(n,a);o.length>0&&(i=t.formatForAI(o),r.ç¤¾äº¤.è®°å¿†.é•¿æœŸè®°å¿†=[],console.log(`[å‘é‡è®°å¿†] æ£€ç´¢åˆ° ${o.length} æ¡ç›¸å…³è®°å¿†`))}}catch(e){console.warn("[å‘é‡è®°å¿†] æ£€ç´¢å¤±è´¥ï¼Œä½¿ç”¨å…¨é‡æ¨¡å¼:",e)}const s=t?.ç¤¾äº¤?.è®°å¿†?.çŸ­æœŸè®°å¿†||[],l=r.è§’è‰²?.å±æ€§,b=r.è§’è‰²?.èº«ä»½,y=e=>e?"string"==typeof e?e:Array.isArray(e)?e.map(e=>"string"==typeof e?e:"object"==typeof e&&null!==e&&(e.name||e.åç§°)||"").filter(Boolean).join(", ")||"æ— ":"æœªçŸ¥æ ¼å¼":"æ— ";let x="# è§’è‰²æ ¸å¿ƒçŠ¶æ€é€Ÿè§ˆ\n";if(l){if(x+=`\n- ç”Ÿå‘½: æ°”è¡€${l.æ°”è¡€?.å½“å‰}/${l.æ°”è¡€?.ä¸Šé™} çµæ°”${l.çµæ°”?.å½“å‰}/${l.çµæ°”?.ä¸Šé™} ç¥è¯†${l.ç¥è¯†?.å½“å‰}/${l.ç¥è¯†?.ä¸Šé™} å¯¿å…ƒ${l.å¯¿å‘½?.å½“å‰}/${l.å¯¿å‘½?.ä¸Šé™}`,l.å¢ƒç•Œ){const e=l.å¢ƒç•Œ;x+=`\n- å¢ƒç•Œ: ${e.åç§°}-${e.é˜¶æ®µ} (${e.å½“å‰è¿›åº¦}/${e.ä¸‹ä¸€çº§æ‰€éœ€})`}l.å£°æœ›&&(x+=`\n- å£°æœ›: ${l.å£°æœ›}`);const e=r.è§’è‰²?.æ•ˆæœ??[];Array.isArray(e)&&e.length>0&&(x+=`\n- æ•ˆæœ: ${e.filter(e=>e&&"object"==typeof e&&e.çŠ¶æ€åç§°).map(e=>e.çŠ¶æ€åç§°).join(", ")}`)}b?.å¤©èµ‹&&(x+=`\n- å¤©èµ‹: ${y(b.å¤©èµ‹)}`);const k=Math.floor(100*Math.random())+1,w=b?.å…ˆå¤©å…­å¸||{},E=b?.åå¤©å…­å¸||{},N=(w.æ°”è¿||5)+(E.æ°”è¿||0),S=1+N/100,V=Math.round(k*S),_=Math.round((V-50)/5);x+=`\n\n# æœ¬å›åˆåˆ¤å®šéª°å­ï¼ˆå‰ç«¯çœŸéšæœºï¼‰\n- dice_roll: ${k} (åŸå§‹1-100)\n- æ°”è¿: ${N} (å…ˆå¤©${w.æ°”è¿||5}+åå¤©${E.æ°”è¿||0})\n- ä¿®æ­£åéª°å­: ${V} (${k}Ã—${S.toFixed(2)})\n- åˆ¤å®šåŠ æˆ: ${_>=0?"+":""}${_}\n**æ³¨æ„ï¼šåˆ¤å®šæ—¶å¿…é¡»ä½¿ç”¨æ­¤éª°å­åŠ æˆï¼Œä¸å¯è‡ªè¡Œç”Ÿæˆéšæœºæ•°ï¼**`;const C=JSON.stringify(r),A=[];m.enableActionOptions&&A.push("actionOptions"),r.ç¤¾äº¤?.ä»»åŠ¡?.é…ç½®?.å¯ç”¨ç³»ç»Ÿä»»åŠ¡&&A.push("questSystem");const D=`\n${await(0,d.q)(A,m.actionOptionsPrompt)}\n\n${x}\n${i?`\n${i}\n`:""}\n# æ¸¸æˆçŠ¶æ€\nä½ æ­£åœ¨ä¿®ä»™ä¸–ç•Œã€Šä»™é€”ã€‹ä¸­æ‰®æ¼”GMã€‚ä»¥ä¸‹æ˜¯å½“å‰å®Œæ•´æ¸¸æˆå­˜æ¡£(JSONæ ¼å¼):\n${C}\n`.trim(),T=e&&e.toString().trim()||"ç»§ç»­å½“å‰æ´»åŠ¨";console.log("[AIåŒå‘ç³»ç»Ÿ] ç”¨æˆ·è¾“å…¥ userMessage:",e),console.log("[AIåŒå‘ç³»ç»Ÿ] å¤„ç†å userActionForAI:",T);const B=[{content:D,role:"system",depth:4,position:"in_chat"}];if(s.length>0&&B.push({content:`# ã€æœ€è¿‘äº‹ä»¶ã€‘\n${s.join("\n")}ã€‚æ ¹æ®è¿™åˆšåˆšå‘ç”Ÿçš„æ–‡æœ¬äº‹ä»¶ï¼Œåˆç†ç”Ÿæˆä¸‹ä¸€æ¬¡æ–‡æœ¬ä¿¡æ¯ï¼Œè¦ä¿è¯è¡”æ¥æµç•…ã€ä¸æ–­å±‚ï¼Œç¬¦åˆä¸Šæ–‡çš„æ–‡æœ¬ä¿¡æ¯`,role:"assistant",depth:2,position:"in_chat"}),m.useSystemCot){const e=await(0,u.XH)("cotCore");B.push({content:e.replace("{{ç”¨æˆ·è¾“å…¥}}",T),role:"system",depth:1,position:"in_chat"})}const I=T;B.push({content:"</input>",role:"assistant",depth:0,position:"in_chat"});const{aiService:z}=await Promise.resolve().then(n.bind(n,2288)),M=z.getConfig(),P=o?.useStreaming??M.streaming??!0,R=(()=>{if("boolean"==typeof o?.splitResponseGeneration)return o.splitResponseGeneration;try{const e=localStorage.getItem("dad_game_settings");if(!e)return!1;const t=JSON.parse(e);return!0===t?.splitResponseGeneration}catch{return!1}})();let $="";if(R){const e=async e=>{const t=(await(0,u.XH)(1===e?"splitGenerationStep1":"splitGenerationStep2")).trim(),n=!!c,[a,o,i,s,l]=await Promise.all([(0,u.XH)("coreOutputRules"),(0,u.XH)("businessRules"),(0,u.XH)("dataDefinitions"),(0,u.XH)("textFormatRules"),(0,u.XH)("worldStandards")]),d=n?i:(0,f.qh)(i),p=[t];if(1===e)return p.push(s,l),`\n${p.join("\n\n---\n\n")}\n\n${x}\n`.trim();if(p.push(a,o,d,s,l),2===e&&m.enableActionOptions){const e=await(0,u.XH)("actionOptions"),t=m.actionOptionsPrompt?`**ç”¨æˆ·è‡ªå®šä¹‰è¦æ±‚**ï¼š${m.actionOptionsPrompt}\n\nè¯·ä¸¥æ ¼æŒ‰ä»¥ä¸Šè¦æ±‚ç”Ÿæˆè¡ŒåŠ¨é€‰é¡¹ã€‚`:"ï¼ˆæ— ç‰¹æ®Šè¦æ±‚ï¼ŒæŒ‰é»˜è®¤è§„åˆ™ç”Ÿæˆï¼‰";p.push(e.replace("{{CUSTOM_ACTION_PROMPT}}",t))}return 2===e&&r.ç¤¾äº¤?.ä»»åŠ¡?.é…ç½®?.å¯ç”¨ç³»ç»Ÿä»»åŠ¡&&p.push(await(0,u.XH)("questGeneration")),`\n${p.join("\n\n---\n\n")}\n\n${x}\n\n# æ¸¸æˆçŠ¶æ€ï¼ˆJSONï¼‰\n${C}\n`.trim()},t=(e,t=!1)=>{const n=[{content:e,role:"system",depth:4,position:"in_chat"}];return t&&s.length>0&&n.push({content:`# ã€æœ€è¿‘äº‹ä»¶ã€‘\n${s.join("\n")}ã€‚æ ¹æ®è¿™åˆšåˆšå‘ç”Ÿçš„æ–‡æœ¬äº‹ä»¶ï¼Œåˆç†ç”Ÿæˆä¸‹ä¸€æ¬¡æ–‡æœ¬ä¿¡æ¯ï¼Œè¦ä¿è¯è¡”æ¥æµç•…ã€ä¸æ–­å±‚ï¼Œç¬¦åˆä¸Šæ–‡çš„æ–‡æœ¬ä¿¡æ¯`,role:"assistant",depth:2,position:"in_chat"}),n.push({content:"</input>",role:"assistant",depth:0,position:"in_chat"}),n},a=async e=>{let t=!1;if(e.usageType&&c)try{const{useAPIManagementStore:a}=n(100),r=a().getAPIForType(e.usageType);r&&"default"!==r.id&&(t=!0,console.log(`[åˆ†æ­¥ç”Ÿæˆ] åŠŸèƒ½[${e.usageType}]ä½¿ç”¨ç‹¬ç«‹API: ${r.name}`))}catch(e){console.warn("[åˆ†æ­¥ç”Ÿæˆ] æ£€æŸ¥ç‹¬ç«‹APIé…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤API:",e)}return t?await z.generate({user_input:e.user_input,should_stream:e.should_stream,generation_id:e.generation_id,injects:e.injects,onStreamChunk:e.onStreamChunk,usageType:e.usageType}):c?await c.generate({user_input:e.user_input,should_stream:e.should_stream,generation_id:e.generation_id,injects:e.injects}):await z.generate({user_input:e.user_input,should_stream:e.should_stream,generation_id:e.generation_id,injects:e.injects,onStreamChunk:e.onStreamChunk,usageType:e.usageType})};o?.onProgressUpdate?.("åˆ†æ­¥ç”Ÿæˆï¼šç¬¬1æ­¥ï¼ˆæ­£æ–‡ï¼‰â€¦");const i=t(await e(1),!0),l=await a({user_input:I,should_stream:P,generation_id:`${p}_step1`,injects:i,onStreamChunk:o?.onStreamChunk}),d=this.extractNarrativeText(String(l));o?.onProgressUpdate?.("åˆ†æ­¥ç”Ÿæˆï¼šç¬¬2æ­¥ï¼ˆè®°å¿†/æŒ‡ä»¤/è¡ŒåŠ¨é€‰é¡¹ï¼‰â€¦");const g=t(await e(2),!1),h=`\nã€ç”¨æˆ·æœ¬æ¬¡æ“ä½œã€‘\n${I}\n\nã€ç¬¬1æ­¥æ­£æ–‡ã€‘\n${d}\n\nè¯·æŒ‰"åˆ†æ­¥ç”Ÿæˆï¼ˆç¬¬2æ­¥ï¼‰"è§„åˆ™è¾“å‡º JSONã€‚\n`.trim();let b;$=await a({user_input:h,should_stream:!1,generation_id:`${p}_step2`,injects:g,onStreamChunk:void 0,usageType:"split_generation_step2"});try{b=this.parseAIResponse(String($))}catch{b={text:"",mid_term_memory:"",tavern_commands:[],action_options:[]}}v={text:d,mid_term_memory:b.mid_term_memory||"",tavern_commands:b.tavern_commands||[],action_options:m.enableActionOptions?this.sanitizeActionOptionsForDisplay(b.action_options||[]):[]}}else if(c)$=await c.generate({user_input:I,should_stream:P,generation_id:p,injects:B});else{const{aiService:e}=await Promise.resolve().then(n.bind(n,2288));$=await e.generate({user_input:I,should_stream:P,generation_id:p,injects:B,onStreamChunk:o?.onStreamChunk})}if(!R)try{v=this.parseAIResponse($)}catch(e){console.error("[AIåŒå‘ç³»ç»Ÿ] å“åº”è§£æå¤±è´¥ï¼Œå°è¯•å®¹é”™å¤„ç†:",e);const t=String($).trim();let n="",a="",r=[],o=[];const i=t.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/);if(i&&i[1])try{const e=JSON.parse(i[1].trim());n=e.text||e.å™äº‹æ–‡æœ¬||e.narrative||"",a=e.mid_term_memory||e.ä¸­æœŸè®°å¿†||"",r=e.tavern_commands||e.æŒ‡ä»¤||[],o=e.action_options||[]}catch(e){console.warn("[AIåŒå‘ç³»ç»Ÿ] JSONä»£ç å—è§£æå¤±è´¥:",e)}if(!n)try{const e=JSON.parse(t);n=e.text||e.å™äº‹æ–‡æœ¬||e.narrative||"",a=e.mid_term_memory||e.ä¸­æœŸè®°å¿†||"",r=e.tavern_commands||e.æŒ‡ä»¤||[],o=e.action_options||[]}catch{const e=t.match(/"(?:text|å™äº‹æ–‡æœ¬|narrative)"\s*:\s*"((?:[^"\\]|\\.)*)"/);if(e&&e[1])n=e[1].replace(/\\n/g,"\n").replace(/\\"/g,'"');else{const e=t.match(/\{[\s\S]*"text"[\s\S]*\}/);if(e)try{const t=JSON.parse(e[0]);n=t.text||"",a=t.mid_term_memory||"",r=t.tavern_commands||[],o=t.action_options||[]}catch{n=t}}}o&&0!==o.length||(console.warn("[AIåŒå‘ç³»ç»Ÿ] âš ï¸ å®¹é”™æ¨¡å¼ï¼šaction_optionsä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤é€‰é¡¹"),o=["ç»§ç»­å½“å‰æ´»åŠ¨","è§‚å¯Ÿå‘¨å›´ç¯å¢ƒ","ä¸é™„è¿‘çš„äººäº¤è°ˆ","æŸ¥çœ‹è‡ªèº«çŠ¶æ€","ç¨ä½œä¼‘æ¯è°ƒæ•´"]),v={text:n,mid_term_memory:a,tavern_commands:r,action_options:this.sanitizeActionOptionsForDisplay(o)},console.warn("[AIåŒå‘ç³»ç»Ÿ] ä½¿ç”¨å®¹é”™æ¨¡å¼æå–å†…å®¹ - æ–‡æœ¬é•¿åº¦:",n.length,"è®°å¿†:",a.length,"æŒ‡ä»¤æ•°:",r.length,"è¡ŒåŠ¨é€‰é¡¹:",o.length)}if(!v||!v.text||""===v.text.trim())throw console.error("[AIåŒå‘ç³»ç»Ÿ] AIå“åº”ä¸ºç©ºï¼ŒåŸå§‹å“åº”:",String($).substring(0,200)),new Error("AIå“åº”ä¸ºç©ºæˆ–æ ¼å¼é”™è¯¯");P&&o?.onStreamComplete&&o.onStreamComplete()}catch(e){console.error("[AIåŒå‘ç³»ç»Ÿ] AIç”Ÿæˆå¤±è´¥:",e),v={text:"ï¼ˆAIç”Ÿæˆå¤±è´¥ï¼‰",mid_term_memory:"",tavern_commands:[],action_options:["é‡è¯•å½“å‰æ“ä½œ","æŸ¥çœ‹è‡ªèº«çŠ¶æ€","ç¨ä½œä¼‘æ¯"]}}o?.onProgressUpdate?.("æ‰§è¡ŒAIæŒ‡ä»¤â€¦");try{const{saveData:e}=await this.processGmResponse(v,h);return o?.onStateChange&&o.onStateChange(e),v}catch(e){return console.error("[AIåŒå‘ç³»ç»Ÿ] æŒ‡ä»¤æ‰§è¡Œå¤±è´¥:",e),v}}async generateInitialMessage(e,t,a){const o=(0,r.getTavernHelper)(),i=(0,l.useUIStore)();if(!o){const{aiService:e}=await Promise.resolve().then(n.bind(n,2288)),t=e.checkAvailability();if(!t.available)throw new Error(t.message)}let s;a?.onProgressUpdate?.("æ„å»ºæç¤ºè¯å¹¶è¯·æ±‚AIç”Ÿæˆâ€¦");try{const{aiService:r}=await Promise.resolve().then(n.bind(n,2288)),l=r.getConfig(),c=a?.useStreaming??l.streaming??!0,d=a?.generateMode||"generate",m=(()=>{if("boolean"==typeof a?.splitResponseGeneration)return a.splitResponseGeneration;try{const e=localStorage.getItem("dad_game_settings");if(!e)return!1;const t=JSON.parse(e);return!0===t?.splitResponseGeneration}catch{return!1}})();let p="";if(m){const l=async t=>`\n${(await(0,u.XH)(1===t?"splitInitStep1":"splitInitStep2")).trim()}\n\n---\n\n# åŸå§‹ç³»ç»Ÿæç¤ºè¯ï¼ˆä¾›å‚è€ƒï¼›è‹¥ä¸æœ¬æ­¥ç›®æ ‡å†²çªï¼Œä»¥æœ¬æ­¥è§„åˆ™ä¸ºå‡†ï¼‰\n${e}\n          `.trim(),m=async e=>{const t=`initial_message_split_step${e.step}_${Date.now()}`,a=2===e.step?"split_generation_step2":void 0;let i=!1;if(a&&o)try{const{useAPIManagementStore:e}=n(100),t=e().getAPIForType(a);t&&"default"!==t.id&&(i=!0,console.log(`[å¼€å±€åˆ†æ­¥ç”Ÿæˆ] åŠŸèƒ½[${a}]ä½¿ç”¨ç‹¬ç«‹API: ${t.name}`))}catch(e){console.warn("[å¼€å±€åˆ†æ­¥ç”Ÿæˆ] æ£€æŸ¥ç‹¬ç«‹APIé…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤API:",e)}if(i){if("generateRaw"===d)return await r.generateRaw({ordered_prompts:[{role:"system",content:e.system},{role:"user",content:e.user}],should_stream:e.should_stream,generation_id:t,onStreamChunk:e.onStreamChunk,usageType:a});const n=[{content:e.system,role:"user",depth:4,position:"in_chat"}];return await r.generate({user_input:e.user,should_stream:e.should_stream,generation_id:t,injects:n,onStreamChunk:e.onStreamChunk,usageType:a})}if(o){if("generateRaw"===d)return String(await o.generateRaw({ordered_prompts:[{role:"system",content:e.system},{role:"user",content:e.user}],should_stream:e.should_stream,generation_id:t}));const n=[{content:e.system,role:"user",depth:4,position:"in_chat"}];return await o.generate({user_input:e.user,should_stream:e.should_stream,generation_id:t,injects:n})}if("generateRaw"===d)return await r.generateRaw({ordered_prompts:[{role:"system",content:e.system},{role:"user",content:e.user}],should_stream:e.should_stream,generation_id:t,onStreamChunk:e.onStreamChunk,usageType:a});const s=[{content:e.system,role:"user",depth:4,position:"in_chat"}];return await r.generate({user_input:e.user,should_stream:e.should_stream,generation_id:t,injects:s,onStreamChunk:e.onStreamChunk,usageType:a})};a?.onProgressUpdate?.("åˆ†æ­¥ç”Ÿæˆï¼šç¬¬1æ­¥ï¼ˆå¼€å±€æ­£æ–‡ï¼‰â€¦");const p=await m({step:1,system:await l(1),user:t,should_stream:c,onStreamChunk:a?.onStreamChunk}),f=this.extractNarrativeText(String(p));c&&a?.onStreamComplete&&a.onStreamComplete(),a?.onProgressUpdate?.("åˆ†æ­¥ç”Ÿæˆï¼šç¬¬2æ­¥ï¼ˆå¼€å±€è®°å¿†/æŒ‡ä»¤/è¡ŒåŠ¨é€‰é¡¹ï¼‰â€¦");const g=`\nã€å¼€å±€ç”¨æˆ·æç¤ºã€‘\n${t}\n\nã€ç¬¬1æ­¥æ­£æ–‡ã€‘\n${f}\n\nè¯·æŒ‰â€œåˆ†æ­¥ç”Ÿæˆï¼ˆå¼€å±€-ç¬¬2æ­¥ï¼‰â€è§„åˆ™è¾“å‡º JSONã€‚\n        `.trim(),h=await m({step:2,system:await l(2),user:g,should_stream:c,onStreamChunk:void 0});let v;try{v=this.parseAIResponse(String(h))}catch{v={text:"",mid_term_memory:"",tavern_commands:[],action_options:[]}}const b=["å››å¤„èµ°åŠ¨ç†Ÿæ‚‰ç¯å¢ƒ","æŸ¥çœ‹è‡ªèº«çŠ¶æ€","ä¸é™„è¿‘çš„äººäº¤è°ˆ","å¯»æ‰¾ä¿®ç‚¼ä¹‹åœ°","æ‰“å¬å‘¨å›´æ¶ˆæ¯"];if(s={text:f,mid_term_memory:v.mid_term_memory||"",tavern_commands:v.tavern_commands||[],action_options:i.enableActionOptions?this.sanitizeActionOptionsForDisplay(v.action_options?.length?v.action_options:b):[]},!s||!s.text)throw new Error("AIå“åº”è§£æå¤±è´¥æˆ–ä¸ºç©º");return s}if(o)if("generateRaw"===d)console.log("[AIåŒå‘ç³»ç»Ÿ] é…’é¦†æ¨¡å¼ - ä½¿ç”¨ generateRaw æ¨¡å¼ç”Ÿæˆåˆå§‹æ¶ˆæ¯"),p=String(await o.generateRaw({ordered_prompts:[{role:"system",content:e},{role:"user",content:t}],should_stream:c,generation_id:`initial_message_raw_${Date.now()}`}));else{console.log("[AIåŒå‘ç³»ç»Ÿ] é…’é¦†æ¨¡å¼ - ä½¿ç”¨ generate æ¨¡å¼ç”Ÿæˆåˆå§‹æ¶ˆæ¯");const n=[{content:e,role:"user",depth:4,position:"in_chat"}];p=await o.generate({user_input:t,should_stream:c,generation_id:`initial_message_${Date.now()}`,injects:n})}else{const{aiService:r}=await Promise.resolve().then(n.bind(n,2288));if("generateRaw"===d)console.log("[AIåŒå‘ç³»ç»Ÿ] è‡ªå®šä¹‰APIæ¨¡å¼ - ä½¿ç”¨ generateRaw æ¨¡å¼ç”Ÿæˆåˆå§‹æ¶ˆæ¯"),p=await r.generateRaw({ordered_prompts:[{role:"system",content:e},{role:"user",content:t}],should_stream:c,generation_id:`initial_message_raw_${Date.now()}`,onStreamChunk:a?.onStreamChunk});else{console.log("[AIåŒå‘ç³»ç»Ÿ] è‡ªå®šä¹‰APIæ¨¡å¼ - ä½¿ç”¨ generate æ¨¡å¼ç”Ÿæˆåˆå§‹æ¶ˆæ¯");const n=[{content:e,role:"user",depth:4,position:"in_chat"}];p=await r.generate({user_input:t,should_stream:c,generation_id:`initial_message_${Date.now()}`,injects:n,onStreamChunk:a?.onStreamChunk})}}try{s=this.parseAIResponse(String(p))}catch(e){console.error("[AIåŒå‘ç³»ç»Ÿ] åˆå§‹æ¶ˆæ¯è§£æå¤±è´¥ï¼Œå°è¯•å®¹é”™å¤„ç†:",e);const t=String(p).trim();let n="",a="",r=[];const o=t.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/);if(o&&o[1])try{const e=JSON.parse(o[1].trim());n=e.text||e.å™äº‹æ–‡æœ¬||e.narrative||"",a=e.mid_term_memory||e.ä¸­æœŸè®°å¿†||"",r=e.tavern_commands||e.æŒ‡ä»¤||[]}catch(e){console.warn("[AIåŒå‘ç³»ç»Ÿ] JSONä»£ç å—è§£æå¤±è´¥:",e)}if(!n)try{const e=JSON.parse(t);n=e.text||e.å™äº‹æ–‡æœ¬||e.narrative||"",a=e.mid_term_memory||e.ä¸­æœŸè®°å¿†||"",r=e.tavern_commands||e.æŒ‡ä»¤||[]}catch{const e=t.match(/"(?:text|å™äº‹æ–‡æœ¬|narrative)"\s*:\s*"((?:[^"\\]|\\.)*)"/);if(e&&e[1])n=e[1].replace(/\\n/g,"\n").replace(/\\"/g,'"');else{const e=t.match(/\{[\s\S]*"text"[\s\S]*\}/);if(e)try{const t=JSON.parse(e[0]);n=t.text||"",a=t.mid_term_memory||"",r=t.tavern_commands||[]}catch{n=t}}}let i=[];try{const e=t.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/);e&&e[1]&&(i=JSON.parse(e[1].trim()).action_options||[])}catch{}i&&0!==i.length||(console.warn("[AIåŒå‘ç³»ç»Ÿ] âš ï¸ åˆå§‹æ¶ˆæ¯ï¼šaction_optionsä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤é€‰é¡¹"),i=["å››å¤„èµ°åŠ¨ç†Ÿæ‚‰ç¯å¢ƒ","æŸ¥çœ‹è‡ªèº«çŠ¶æ€","ä¸é™„è¿‘çš„äººäº¤è°ˆ","å¯»æ‰¾ä¿®ç‚¼ä¹‹åœ°","æ‰“å¬å‘¨å›´æ¶ˆæ¯"]),s={text:n,mid_term_memory:a,tavern_commands:r,action_options:this.sanitizeActionOptionsForDisplay(i)},console.warn("[AIåŒå‘ç³»ç»Ÿ] ä½¿ç”¨å®¹é”™æ¨¡å¼æå–åˆå§‹æ¶ˆæ¯ - æ–‡æœ¬é•¿åº¦:",n.length,"è®°å¿†:",a.length,"æŒ‡ä»¤æ•°:",r.length,"è¡ŒåŠ¨é€‰é¡¹:",i.length)}if(!s||!s.text)throw new Error("AIå“åº”è§£æå¤±è´¥æˆ–ä¸ºç©º");return c&&a?.onStreamComplete&&a.onStreamComplete(),s}catch(e){throw console.error("[AIåŒå‘ç³»ç»Ÿ] åˆå§‹æ¶ˆæ¯ç”Ÿæˆå¤±è´¥:",e),new Error(`åˆå§‹æ¶ˆæ¯ç”Ÿæˆå¤±è´¥: ${e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯"}`)}}_getMinutes(e){return e.åˆ†é’Ÿ??0}_formatGameTime(e){if(!e)return"ã€ä»™å†å…ƒå¹´ã€‘";const t=this._getMinutes(e);return`ã€ä»™é“${e.å¹´}å¹´${e.æœˆ}æœˆ${e.æ—¥}æ—¥ ${String(e.å°æ—¶).padStart(2,"0")}:${String(t).padStart(2,"0")}ã€‘`}async processGmResponse(e,t,r=!1){const{repairSaveData:o}=await Promise.resolve().then(n.bind(n,6588)),s=o(t),l=(0,a.cloneDeep)(s),d=[];if(l.ç³»ç»Ÿ||(l.ç³»ç»Ÿ={}),l.ç³»ç»Ÿ.å†å²||(l.ç³»ç»Ÿ.å†å²={å™äº‹:[]}),Array.isArray(l.ç³»ç»Ÿ.å†å².å™äº‹)||(l.ç³»ç»Ÿ.å†å².å™äº‹=[]),e.text?.trim()){const t=this._formatGameTime(l.å…ƒæ•°æ®?.æ—¶é—´),n=(0,p.E)(e.text).trim(),r={type:"gm",role:"assistant",content:`${t}${n}`,time:t,actionOptions:this.sanitizeActionOptionsForDisplay(e.action_options||[])};l.ç³»ç»Ÿ.å†å².å™äº‹.push(r),d.push({key:`ç³»ç»Ÿ.å†å².å™äº‹[${l.ç³»ç»Ÿ.å†å².å™äº‹.length-1}]`,action:"push",oldValue:void 0,newValue:(0,a.cloneDeep)(r)}),l.ç¤¾äº¤||(l.ç¤¾äº¤={}),l.ç¤¾äº¤.è®°å¿†||(l.ç¤¾äº¤.è®°å¿†={çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]}),Array.isArray(l.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†)||(l.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†=[]),l.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†.push(`${t}${n}`)}const u=(0,p.E)(e.mid_term_memory||"").trim();if(u){l.ç¤¾äº¤||(l.ç¤¾äº¤={}),l.ç¤¾äº¤.è®°å¿†||(l.ç¤¾äº¤.è®°å¿†={çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]}),Array.isArray(l.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†)||(l.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†=[]);const e=this._formatGameTime(l.å…ƒæ•°æ®?.æ—¶é—´);l.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†.push(`${e}${u}`)}let f=10;try{const e=localStorage.getItem("memory-settings");if(e){const t=JSON.parse(e);"number"==typeof t.shortTermLimit&&t.shortTermLimit>0&&(f=t.shortTermLimit)}}catch(e){console.warn("[AIåŒå‘ç³»ç»Ÿ] è¯»å–è®°å¿†é…ç½®å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å€¼:",e)}for(;l.ç¤¾äº¤?.è®°å¿†?.çŸ­æœŸè®°å¿†&&l.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†.length>f;)if(l.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†.shift(),console.log(`[AIåŒå‘ç³»ç»Ÿ] çŸ­æœŸè®°å¿†è¶…è¿‡ä¸Šé™ï¼ˆ${f}æ¡ï¼‰ï¼Œå·²åˆ é™¤æœ€æ—§çš„çŸ­æœŸè®°å¿†ã€‚å½“å‰çŸ­æœŸè®°å¿†æ•°é‡: ${l.ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†.length}`),l.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†&&l.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†.length>0){const e=l.ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†.shift();e&&(Array.isArray(l.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†)||(l.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†=[]),l.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†.push(e),console.log(`[AIåŒå‘ç³»ç»Ÿ] å·²å°†éšå¼ä¸­æœŸè®°å¿†è½¬åŒ–ä¸ºæ­£å¼ä¸­æœŸè®°å¿†ã€‚å½“å‰ä¸­æœŸè®°å¿†æ•°é‡: ${l.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†.length}`))}try{const e=JSON.parse(localStorage.getItem("memory-settings")||"{}").midTermTrigger??25;l.ç¤¾äº¤?.è®°å¿†?.ä¸­æœŸè®°å¿†&&l.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†.length>=e&&this.triggerMemorySummary().catch(e=>{console.error("[AIåŒå‘ç³»ç»Ÿ] è‡ªåŠ¨è®°å¿†æ€»ç»“åœ¨åå°å¤±è´¥:",e)})}catch(e){console.warn("[AIåŒå‘ç³»ç»Ÿ] æ£€æŸ¥è‡ªåŠ¨æ€»ç»“é˜ˆå€¼æ—¶å‡ºé”™:",e)}if(!e.tavern_commands?.length)return{saveData:l,stateChanges:{changes:d,timestamp:(new Date).toISOString()}};const g=this._preprocessCommands(e.tavern_commands),{validateCommands:h,cleanCommands:v}=await Promise.resolve().then(n.bind(n,4820)),b=h(g),{validateAndRepairCommandValue:y}=await Promise.resolve().then(n.bind(n,5269)),x=[],k=[];g.forEach((e,t)=>{const n=y(e);n.valid?x.push(e):(console.error(`[AIåŒå‘ç³»ç»Ÿ] âŒ æ‹’ç»æ‰§è¡ŒæŒ‡ä»¤[${t}]ï¼Œæ ¼å¼é”™è¯¯:`,n.errors),k.push({command:e,errors:n.errors}))}),k.length>0&&(console.error(`[AIåŒå‘ç³»ç»Ÿ] å…±æ‹’ç» ${k.length} æ¡æ ¼å¼é”™è¯¯çš„æŒ‡ä»¤`),k.forEach(({command:e,errors:t})=>{d.unshift({key:"âŒ æ ¼å¼é”™è¯¯ï¼ˆå·²æ‹’ç»ï¼‰",action:"validation_error",oldValue:void 0,newValue:{command:JSON.stringify(e,null,2),errors:t}})})),b.valid||(console.error("[AIåŒå‘ç³»ç»Ÿ] æŒ‡ä»¤æ ¼å¼éªŒè¯å¤±è´¥:",b.errors),b.errors.forEach(e=>console.error(`  - ${e}`)),b.invalidCommands&&b.invalidCommands.length>0&&b.invalidCommands.forEach(({command:e,errors:t})=>{d.unshift({key:"âŒ é”™è¯¯æŒ‡ä»¤",action:"validation_error",oldValue:void 0,newValue:{command:JSON.stringify(e,null,2),errors:t}})})),b.warnings.length>0&&b.warnings.forEach(e=>console.warn(`[AIåŒå‘ç³»ç»Ÿ] ${e}`));const w=[...v(x)].sort((e,t)=>{const n="set"===e.action&&e.key.endsWith(".ä¸Šé™"),a="set"===t.action&&t.key.endsWith(".ä¸Šé™");return n&&!a?-1:!n&&a?1:0});console.log(`[AIåŒå‘ç³»ç»Ÿ] æ‰§è¡Œ ${w.length} æ¡æœ‰æ•ˆæŒ‡ä»¤ï¼Œæ‹’ç» ${k.length} æ¡æ— æ•ˆæŒ‡ä»¤`);for(const e of w)try{const t=(0,a.get)(l,e.key);this.executeCommand(e,l);const n=(0,a.get)(l,e.key);d.push({key:e.key,action:e.action,oldValue:this._summarizeValue(t),newValue:this._summarizeValue(n)})}catch(t){console.error("[AIåŒå‘ç³»ç»Ÿ] æŒ‡ä»¤æ‰§è¡Œå¤±è´¥:",e,t)}(0,c.F)(l),l.å…ƒæ•°æ®?.æ—¶é—´&&(l.å…ƒæ•°æ®.æ—¶é—´=function(e){let{å¹´:t,æœˆ:n,æ—¥:a,å°æ—¶:r,åˆ†é’Ÿ:o}=e;for(o>=60&&(r+=Math.floor(o/60),o%=60),r>=24&&(a+=Math.floor(r/24),r%=24);a>30;)n+=1,a-=30;return n>12&&(t+=Math.floor((n-1)/12),n=(n-1)%12+1),{å¹´:t,æœˆ:n,æ—¥:a,å°æ—¶:r,åˆ†é’Ÿ:o}}(l.å…ƒæ•°æ®.æ—¶é—´));const{removedEffects:E}=(0,m.UZ)(l);E.length>0&&console.log(`[AIåŒå‘ç³»ç»Ÿ] PiniaçŠ¶æ€æ›´æ–°å‰: ç§»é™¤äº† ${E.length} ä¸ªè¿‡æœŸæ•ˆæœ: ${E.join(", ")}`);const N={changes:d,timestamp:(new Date).toISOString()};return l.ç³»ç»Ÿ?.å†å²?.å™äº‹&&l.ç³»ç»Ÿ.å†å².å™äº‹.length>0&&(l.ç³»ç»Ÿ.å†å².å™äº‹[l.ç³»ç»Ÿ.å†å².å™äº‹.length-1].stateChanges=N),r||(0,i.useGameStateStore)().loadFromSaveData(l),{saveData:l,stateChanges:N}}async triggerMemorySummary(e){if(this.isSummarizing)return o.o.warning("å·²æœ‰ä¸€ä¸ªæ€»ç»“ä»»åŠ¡æ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™..."),void console.log("[AIåŒå‘ç³»ç»Ÿ] æ£€æµ‹åˆ°å·²æœ‰æ€»ç»“ä»»åŠ¡åœ¨è¿è¡Œï¼Œæœ¬æ¬¡è§¦å‘è¢«è·³è¿‡ã€‚");this.isSummarizing=!0,console.log("[AIåŒå‘ç³»ç»Ÿ] å¼€å§‹è®°å¿†æ€»ç»“æµç¨‹..."),o.o.loading("æ­£åœ¨è°ƒç”¨AIæ€»ç»“ä¸­æœŸè®°å¿†...",{id:"memory-summary"});try{const e=(0,i.useGameStateStore)(),t=(0,s.useCharacterStore)(),a=e.toSaveData();if(!a||!a.ç¤¾äº¤?.è®°å¿†)throw new Error("æ— æ³•è·å–å­˜æ¡£æ•°æ®æˆ–è®°å¿†æ¨¡å—");const l=JSON.parse(localStorage.getItem("memory-settings")||"{}"),c=l.midTermTrigger??25,d=l.midTermKeep??8,m=(l.longTermFormat,a.ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†||[]);if(m.length<c)return console.log(`[AIåŒå‘ç³»ç»Ÿ] ä¸­æœŸè®°å¿†æ•°é‡(${m.length})æœªè¾¾åˆ°è§¦å‘é˜ˆå€¼(${c})ï¼Œå–æ¶ˆæ€»ç»“ã€‚`),void o.o.info(`ä¸­æœŸè®°å¿†æœªè¾¾åˆ°è§¦å‘é˜ˆå€¼(${c}æ¡)ï¼Œå·²å–æ¶ˆæ€»ç»“`,{id:"memory-summary"});const p=c-d;if(p<=0)return console.log("[AIåŒå‘ç³»ç»Ÿ] è®¡ç®—å‡ºçš„æ€»ç»“æ•°é‡ <= 0ï¼Œé…ç½®é”™è¯¯ï¼Œå–æ¶ˆæ“ä½œã€‚"),void o.o.error("è®°å¿†é…ç½®é”™è¯¯ï¼šè§¦å‘é˜ˆå€¼å¿…é¡»å¤§äºä¿ç•™æ•°é‡",{id:"memory-summary"});if(m.length<p)return console.log(`[AIåŒå‘ç³»ç»Ÿ] ä¸­æœŸè®°å¿†æ•°é‡(${m.length})ä¸è¶³ä»¥æ€»ç»“${p}æ¡ï¼Œå–æ¶ˆæ€»ç»“ã€‚`),void o.o.info(`ä¸­æœŸè®°å¿†ä¸è¶³${p}æ¡ï¼Œå·²å–æ¶ˆæ€»ç»“`,{id:"memory-summary"});const f=m.slice(0,p),g=m.slice(p),h=f.map((e,t)=>`${t+1}. ${e}`).join("\n");console.log(`[AIåŒå‘ç³»ç»Ÿ] å‡†å¤‡æ€»ç»“ï¼šä»${m.length}æ¡ä¸­æœŸè®°å¿†ä¸­ï¼Œæ€»ç»“æœ€æ—§çš„${p}æ¡ï¼Œä¿ç•™æœ€æ–°çš„${g.length}æ¡`),console.log(`[AIåŒå‘ç³»ç»Ÿ] é…ç½®ï¼šè§¦å‘é˜ˆå€¼=${c}, ä¿ç•™æ•°é‡=${d}, æ€»ç»“æ•°é‡=${p}`);const v=await(0,u.XH)("memorySummary"),b=v.replace("{{è®°å¿†å†…å®¹}}",h),y=(0,r.getTavernHelper)(),{aiService:x}=await Promise.resolve().then(n.bind(n,2288)),k=x.getConfig(),w="raw"===k.memorySummaryMode,E=!1!==k.streaming;if(!y){const e=x.checkAvailability();if(!e.available)throw new Error(e.message)}const N=this._extractEssentialDataForSummary(a),S=JSON.stringify(N,null,2);let V,_;if(console.log(`[AIåŒå‘ç³»ç»Ÿ] è®°å¿†æ€»ç»“æ¨¡å¼: ${w?"Rawæ¨¡å¼ï¼ˆçº¯å‡€æ€»ç»“ï¼‰":"æ ‡å‡†æ¨¡å¼ï¼ˆå¸¦é¢„è®¾ï¼‰"}, ä¼ è¾“æ–¹å¼: ${E?"æµå¼":"éæµå¼"}`),y)if(w){const e=await y.generateRaw({ordered_prompts:[{role:"system",content:`ã€æ¸¸æˆå­˜æ¡£æ•°æ®ã€‘ï¼ˆä¾›å‚è€ƒï¼‰ï¼š\n${S}`},{role:"user",content:b},{role:"user",content:["Continue.","Proceed.","Next.","Go on.","Resume."][Math.floor(5*Math.random())]},{role:"assistant",content:"</input>"}],should_stream:E});V=String(e)}else{const e=`${v}\n\nã€æ¸¸æˆå­˜æ¡£æ•°æ®ã€‘ï¼ˆä¾›å‚è€ƒï¼‰ï¼š\n${S}`,t=await y.generate({user_input:b,should_stream:E,generation_id:`memory_summary_${Date.now()}`,injects:[{content:e,role:"system",depth:4,position:"in_chat"},{content:"</input>",role:"assistant",depth:0,position:"in_chat"}]});V=String(t)}else if(w)console.log("[AIåŒå‘ç³»ç»Ÿ] è‡ªå®šä¹‰APIæ¨¡å¼ - Rawæ¨¡å¼è®°å¿†æ€»ç»“"),V=await x.generateRaw({ordered_prompts:[{role:"system",content:`ã€æ¸¸æˆå­˜æ¡£æ•°æ®ã€‘ï¼ˆä¾›å‚è€ƒï¼‰ï¼š\n${S}`},{role:"user",content:b},{role:"user",content:["Continue.","Proceed.","Next.","Go on.","Resume."][Math.floor(5*Math.random())]}],should_stream:E});else{console.log("[AIåŒå‘ç³»ç»Ÿ] è‡ªå®šä¹‰APIæ¨¡å¼ - æ ‡å‡†æ¨¡å¼è®°å¿†æ€»ç»“");const e=`${v}\n\nã€æ¸¸æˆå­˜æ¡£æ•°æ®ã€‘ï¼ˆä¾›å‚è€ƒï¼‰ï¼š\n${S}`;V=await x.generate({user_input:b,should_stream:E,generation_id:`memory_summary_${Date.now()}`,injects:[{content:e,role:"system",depth:4,position:"in_chat"}]})}const C=String(V).trim(),A=C.match(/```(?:json)?\s*\n?([\s\S]*?)\n?```/);if(A?.[1])try{_=JSON.parse(A[1].trim()).text?.trim()||""}catch{_=""}else try{_=JSON.parse(C).text?.trim()||""}catch{_=C.trim()}if(!_||0===_.length)throw new Error("AIè¿”å›äº†ç©ºçš„æ€»ç»“ç»“æœ");console.log("[AIåŒå‘ç³»ç»Ÿ] æ€»ç»“æ–‡æœ¬é•¿åº¦:",_.length,"é¢„è§ˆ:",_.substring(0,100));const D=_;e.memory||(e.memory={çŸ­æœŸè®°å¿†:[],ä¸­æœŸè®°å¿†:[],é•¿æœŸè®°å¿†:[],éšå¼ä¸­æœŸè®°å¿†:[]}),e.memory.é•¿æœŸè®°å¿†.push(D),e.memory.ä¸­æœŸè®°å¿†=g;try{const{vectorMemoryService:e}=await Promise.resolve().then(n.bind(n,5831));e.isEnabled()&&(await e.addMemory(D,7),console.log("[å‘é‡è®°å¿†] æ–°é•¿æœŸè®°å¿†å·²æ·»åŠ åˆ°å‘é‡åº“"))}catch(e){console.warn("[å‘é‡è®°å¿†] æ·»åŠ åˆ°å‘é‡åº“å¤±è´¥:",e)}await t.saveCurrentGame(),console.log(`[AIåŒå‘ç³»ç»Ÿ] âœ… æ€»ç»“å®Œæˆï¼š${p}æ¡ä¸­æœŸè®°å¿† -> 1æ¡é•¿æœŸè®°å¿†ã€‚ä¿ç•™ ${g.length} æ¡ã€‚`),o.o.success(`æˆåŠŸæ€»ç»“ ${p} æ¡è®°å¿†ï¼`,{id:"memory-summary"})}catch(e){const t=e instanceof Error?e.message:"æœªçŸ¥é”™è¯¯";console.error("[AIåŒå‘ç³»ç»Ÿ] è®°å¿†æ€»ç»“å¤±è´¥:",e),o.o.error(`è®°å¿†æ€»ç»“å¤±è´¥: ${t}`,{id:"memory-summary"})}finally{this.isSummarizing=!1,console.log("[AIåŒå‘ç³»ç»Ÿ] è®°å¿†æ€»ç»“æµç¨‹ç»“æŸï¼Œå·²é‡Šæ”¾é”ã€‚")}}_preprocessCommands(e){if(!Array.isArray(e))return[];const t=new Set(["èƒŒåŒ….ç‰©å“","ç‰©å“æ .ç‰©å“"]);return e.map(e=>{if(!e||"object"!=typeof e)return e;if("push"===e.action&&t.has(e.key)&&"string"==typeof e.value){console.warn(`[AIåŒå‘ç³»ç»Ÿ] é¢„å¤„ç†: å°†å­—ç¬¦ä¸²ç‰©å“ "${e.value}" è½¬æ¢ä¸ºå¯¹è±¡ã€‚`);const t=e.value;return{...e,value:{ç‰©å“ID:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,åç§°:t,ç±»å‹:"æ‚ç‰©",å“è´¨:{quality:"å‡¡å“",grade:0},æ•°é‡:1,æè¿°:`ä¸€ä¸ªæ™®é€šçš„${t}ã€‚`}}}return("push"===e.action&&t.has(e.key)||"set"===e.action&&"string"==typeof e.key&&Array.from(t).some(t=>e.key.startsWith(t+".")))&&e.value&&"object"==typeof e.value&&"åŠŸæ³•"===e.value.ç±»å‹?{...e,value:this._repairTechniqueItem(e.value)}:e})}_repairTechniqueItem(e){if(!e||"object"!=typeof e)return e;if("åŠŸæ³•"!==e.ç±»å‹)return e;const t={...e},n="string"==typeof t.åç§°&&t.åç§°.trim()?t.åç§°.trim():"æœªçŸ¥åŠŸæ³•",a="number"==typeof t.ä¿®ç‚¼è¿›åº¦&&Number.isFinite(t.ä¿®ç‚¼è¿›åº¦)?t.ä¿®ç‚¼è¿›åº¦:0;t.ä¿®ç‚¼è¿›åº¦=a,Array.isArray(t.åŠŸæ³•æŠ€èƒ½)||(t.åŠŸæ³•æŠ€èƒ½=[]),t.åŠŸæ³•æŠ€èƒ½=t.åŠŸæ³•æŠ€èƒ½.filter(e=>e&&"object"==typeof e).map((e,t)=>{const a="string"==typeof e.æŠ€èƒ½åç§°&&e.æŠ€èƒ½åç§°.trim()?e.æŠ€èƒ½åç§°.trim():`${n}Â·æ‹›å¼${t+1}`,r="string"==typeof e.æŠ€èƒ½æè¿°?e.æŠ€èƒ½æè¿°:"",o="number"==typeof e.ç†Ÿç»ƒåº¦è¦æ±‚&&Number.isFinite(e.ç†Ÿç»ƒåº¦è¦æ±‚)?e.ç†Ÿç»ƒåº¦è¦æ±‚:0,i="string"==typeof e.æ¶ˆè€—?e.æ¶ˆè€—:"";return{...e,æŠ€èƒ½åç§°:a,æŠ€èƒ½æè¿°:r,ç†Ÿç»ƒåº¦è¦æ±‚:o,æ¶ˆè€—:i}}),0===t.åŠŸæ³•æŠ€èƒ½.length&&(console.warn(`[AIåŒå‘ç³»ç»Ÿ] é¢„å¤„ç†: åŠŸæ³• "${n}" ç¼ºå°‘åŠŸæ³•æŠ€èƒ½ï¼Œå·²è‡ªåŠ¨è¡¥é½åŸºç¡€æŠ€èƒ½ä»¥é˜²æŠ¥é”™ã€‚`),t.åŠŸæ³•æŠ€èƒ½=[{æŠ€èƒ½åç§°:`${n}Â·è¿åŠŸ`,æŠ€èƒ½æè¿°:`è¿è½¬${n}çš„åŸºç¡€æ³•é—¨ï¼Œå‡èšçµæ°”å¹¶ç¨³å›ºæ°”æœºã€‚`,ç†Ÿç»ƒåº¦è¦æ±‚:0,æ¶ˆè€—:"çµæ°”10"}]),Array.isArray(t.å·²è§£é”æŠ€èƒ½)||(t.å·²è§£é”æŠ€èƒ½=[]),t.å·²è§£é”æŠ€èƒ½=t.å·²è§£é”æŠ€èƒ½.filter(e=>"string"==typeof e&&e.trim().length>0).map(e=>e.trim());for(const e of t.åŠŸæ³•æŠ€èƒ½)a>=("number"==typeof e.ç†Ÿç»ƒåº¦è¦æ±‚?e.ç†Ÿç»ƒåº¦è¦æ±‚:0)&&"string"==typeof e.æŠ€èƒ½åç§°&&!t.å·²è§£é”æŠ€èƒ½.includes(e.æŠ€èƒ½åç§°)&&t.å·²è§£é”æŠ€èƒ½.push(e.æŠ€èƒ½åç§°);return"boolean"!=typeof t.å·²è£…å¤‡&&(t.å·²è£…å¤‡=!1),t}executeCommand(e,t){const{action:n,key:r,value:o}=e;if(!n||!r)throw new Error("æŒ‡ä»¤æ ¼å¼é”™è¯¯ï¼šç¼ºå°‘ action æˆ– key");const i=r.toString(),s=["å…ƒæ•°æ®","è§’è‰²","ç¤¾äº¤","ä¸–ç•Œ","ç³»ç»Ÿ"];if(!s.some(e=>i===e||i.startsWith(`${e}.`)))throw new Error(`æŒ‡ä»¤keyå¿…é¡»ä»¥ ${s.join(" / ")} å¼€å¤´ï¼ˆV3çŸ­è·¯å¾„ï¼‰ï¼Œå½“å‰: ${i}`);const l=["è§’è‰².æ•ˆæœ","ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨","ç¤¾äº¤.è®°å¿†.çŸ­æœŸè®°å¿†","ç¤¾äº¤.è®°å¿†.ä¸­æœŸè®°å¿†","ç¤¾äº¤.è®°å¿†.é•¿æœŸè®°å¿†","ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†","ç³»ç»Ÿ.å†å².å™äº‹"].some(e=>i===e||!(!i.startsWith(e+"[")||i.includes(".",e.length)));if("set"===n&&l){if(null==o)return console.warn(`[AIåŒå‘ç³»ç»Ÿ] é˜»æ­¢å°†æ•°ç»„å­—æ®µ ${i} è®¾ä¸º null/undefinedï¼Œæ”¹ä¸ºç©ºæ•°ç»„`),void(0,a.set)(t,i,[]);if(!Array.isArray(o))return void console.warn(`[AIåŒå‘ç³»ç»Ÿ] é˜»æ­¢å°†æ•°ç»„å­—æ®µ ${i} è®¾ä¸ºéæ•°ç»„å€¼ï¼Œä¿æŒåŸå€¼`)}switch(n){case"set":(0,a.set)(t,i,o);break;case"add":{const e=(0,a.get)(t,i,0);if("number"!=typeof e||"number"!=typeof o)throw new Error(`ADDæ“ä½œè¦æ±‚æ•°å€¼ç±»å‹ï¼Œä½†å¾—åˆ°: ${typeof e}, ${typeof o}`);const n=e+o;i.includes("çµçŸ³")&&n<0?(console.warn(`[AIåŒå‘ç³»ç»Ÿ] ${i} æ‰§è¡Œaddåä¼šå˜æˆè´Ÿæ•° (${e} + ${o} = ${n})ï¼Œå·²é™åˆ¶ä¸º0`),(0,a.set)(t,i,0)):(0,a.set)(t,i,n);break}case"push":{const e=(0,a.get)(t,i,[]);if(!Array.isArray(e))throw new Error(`PUSHæ“ä½œè¦æ±‚æ•°ç»„ç±»å‹ï¼Œä½† ${i} æ˜¯ ${typeof e}`);let n=o??null;const r=i.startsWith("ç¤¾äº¤.è®°å¿†.")||i.startsWith("è®°å¿†.");if("string"==typeof n&&r&&"ç¤¾äº¤.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†"!==i&&"è®°å¿†.éšå¼ä¸­æœŸè®°å¿†"!==i){if(!n.trim())break;n=`${this._formatGameTime(t.å…ƒæ•°æ®?.æ—¶é—´)}${n}`}e.push(n),(0,a.set)(t,i,e);break}case"delete":(0,a.unset)(t,i);break;case"pull":{const e=(0,a.get)(t,i,[]);if(!Array.isArray(e))throw new Error(`PULLæ“ä½œè¦æ±‚æ•°ç»„ç±»å‹ï¼Œä½† ${i} æ˜¯ ${typeof e}`);if(!o||"object"!=typeof o)throw new Error("PULLæ“ä½œè¦æ±‚valueæ˜¯å¯¹è±¡ç±»å‹ï¼Œç”¨äºåŒ¹é…è¦ç§»é™¤çš„å…ƒç´ ");const n=o,r=e.filter(e=>{if(!e||"object"!=typeof e)return!0;for(const[t,a]of Object.entries(n))if(e[t]!==a)return!0;return!1});(0,a.set)(t,i,r),console.log(`[AIåŒå‘ç³»ç»Ÿ] PULLæ“ä½œ: ä» ${i} ç§»é™¤äº† ${e.length-r.length} ä¸ªå…ƒç´ `);break}default:throw new Error(`æœªçŸ¥çš„æ“ä½œç±»å‹: ${n}`)}}_extractEssentialDataForSummary(e){const t=(0,a.cloneDeep)(e);return t.å†å²?.å™äº‹&&delete t.å†å².å™äº‹,t.è®°å¿†&&(delete t.è®°å¿†.çŸ­æœŸè®°å¿†,delete t.è®°å¿†.éšå¼ä¸­æœŸè®°å¿†),t}_summarizeValue(e){if(null==e)return e;if("object"!=typeof e)return e;if(Array.isArray(e))return e.length<=3?(0,a.cloneDeep)(e):{__type:"Array",__length:e.length,__summary:`[æ•°ç»„: ${e.length}ä¸ªå…ƒç´ ]`,__first:e[0]?this._summarizeValue(e[0]):void 0,__last:e[e.length-1]?this._summarizeValue(e[e.length-1]):void 0};const t=Object.keys(e);if(t.length<=5)return(0,a.cloneDeep)(e);const n={__type:"Object",__keys:t.length,__summary:`[å¯¹è±¡: ${t.length}ä¸ªå±æ€§]`};return t.slice(0,3).forEach(t=>{n[t]=this._summarizeValue(e[t])}),n}parseAIResponse(e){if(!e||"string"!=typeof e)throw new Error("AIå“åº”ä¸ºç©ºæˆ–æ ¼å¼é”™è¯¯");const t=e.trim();console.log("[parseAIResponse] åŸå§‹å“åº”é•¿åº¦:",t.length),console.log("[parseAIResponse] åŸå§‹å“åº”å‰500å­—ç¬¦:",t.substring(0,500));const n=t.replace(/<(?:ant[-_]?)?thinking>[\s\S]*?<\/(?:ant[-_]?)?thinking>/gi,"").replace(/<\/?(?:ant[-_]?)?thinking>/gi,"").replace(/<reasoning>[\s\S]*?<\/reasoning>/gi,"").replace(/<\/?reasoning>/gi,"").replace(/<thought>[\s\S]*?<\/thought>/gi,"").replace(/<\/?thought>/gi,"").trim(),a=e=>{try{return JSON.parse(e)}catch{return null}},r=e=>{const t=(Array.isArray(e.tavern_commands)?e.tavern_commands:Array.isArray(e.æŒ‡ä»¤)?e.æŒ‡ä»¤:Array.isArray(e.commands)?e.commands:[]).map(e=>({action:e.action||"set",key:e.key||"",value:e.value}));let n=Array.isArray(e.action_options)?e.action_options:Array.isArray(e.è¡ŒåŠ¨é€‰é¡¹)?e.è¡ŒåŠ¨é€‰é¡¹:[];return n=n.filter(e=>"string"==typeof e&&e.trim().length>0),0===n.length&&(console.warn("[parseAIResponse] âš ï¸ action_optionsä¸ºç©ºï¼Œä½¿ç”¨é»˜è®¤é€‰é¡¹"),n=["ç»§ç»­å½“å‰æ´»åŠ¨","è§‚å¯Ÿå‘¨å›´ç¯å¢ƒ","ä¸é™„è¿‘çš„äººäº¤è°ˆ","æŸ¥çœ‹è‡ªèº«çŠ¶æ€","ç¨ä½œä¼‘æ¯è°ƒæ•´"]),{text:String(e.text||e.å™äº‹æ–‡æœ¬||e.narrative||""),mid_term_memory:String(e.mid_term_memory||e.ä¸­æœŸè®°å¿†||e.memory||""),tavern_commands:t,action_options:this.sanitizeActionOptionsForDisplay(n)}};let o=a(n);if(o)return r(o);const i=n.match(/```(?:json)?\s*([\s\S]*?)```/i);if(i?.[1]&&(o=a(i[1].trim()),o))return r(o);const s=(e=>{const t=e.indexOf("{");if(-1===t)return null;let n=0,a=!1,r=!1;for(let o=t;o<e.length;o++){const i=e[o];if(r)r=!1;else if("\\"!==i)if('"'!==i){if(!a&&("{"===i&&n++,"}"===i&&(n--,0===n)))return e.substring(t,o+1)}else a=!a;else r=!0}return null})(n);if(s&&(o=a(s),o))return console.log("[parseAIResponse] âœ… æˆåŠŸæå–ç¬¬ä¸€ä¸ªJSONå¯¹è±¡"),r(o);throw new Error("æ— æ³•è§£æAIå“åº”ï¼šæœªæ‰¾åˆ°æœ‰æ•ˆçš„JSONæ ¼å¼")}}const v=h.getInstance()},9922:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(1601),r=n.n(a),o=n(6314),i=n.n(o)()(r());i.push([e.id,"\n.modal-overlay[data-v-badac3ae] {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n.modal-container[data-v-badac3ae] {\n  background: var(--color-surface);\n  border-radius: 8px;\n  box-shadow: 0 5px 15px rgba(0,0,0,0.3);\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  display: flex;\n  flex-direction: column;\n}\n.modal-header[data-v-badac3ae] {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--color-border);\n}\n.modal-title[data-v-badac3ae] {\n  margin: 0;\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--color-text);\n}\n.modal-close-button[data-v-badac3ae] {\n  display: flex;\n  align-items: center;\n  gap: 6px;\n  padding: 6px 12px;\n  background: var(--color-background);\n  border: 1px solid var(--color-border);\n  border-radius: 6px;\n  cursor: pointer;\n  color: var(--color-text-secondary);\n  font-size: 0.85rem;\n  font-weight: 500;\n  transition: all 0.2s ease;\n}\n.modal-close-button[data-v-badac3ae]:hover {\n  color: var(--color-text);\n  border-color: var(--color-primary);\n  background: var(--color-surface-hover);\n}\n.modal-content[data-v-badac3ae] {\n  padding: 1.5rem;\n  overflow-y: auto;\n  line-height: 1.6;\n  color: var(--color-text);\n  white-space: pre-wrap; /* Allows line breaks in the content */\n}\n.modal-fade-enter-active[data-v-badac3ae],\n.modal-fade-leave-active[data-v-badac3ae] {\n  transition: opacity 0.3s ease;\n}\n.modal-fade-enter-from[data-v-badac3ae],\n.modal-fade-leave-to[data-v-badac3ae] {\n  opacity: 0;\n}\n",""]);const s=i},9957:(e,t,n)=>{"use strict";var a=Function.prototype.call,r=Object.prototype.hasOwnProperty,o=n(6743);e.exports=o.call(a,r)},9990:(e,t,n)=>{"use strict";n.d(t,{y8:()=>F,XH:()=>W,LB:()=>Y});var a=n(406),r=n(840);const o='\n# æ–‡æœ¬æ ¼å¼æ ‡è®°\n\n- ç¯å¢ƒæå†™: `ã€...ã€‘`\n- å†…å¿ƒæ€è€ƒ: ``...``\n- è§’è‰²å¯¹è¯: `"..."`\n- ç³»ç»Ÿåˆ¤å®š: `ã€–...ã€—`\n'.trim(),i="\n# é€šç”¨åˆ¤å®šç³»ç»Ÿ v5.0\n\n## 1. æ ¸å¿ƒå…¬å¼\n**æœ€ç»ˆåˆ¤å®šå€¼ = åŸºç¡€åˆ¤å®šå€¼ + æ°”è¿éª°å­**\n\n### åŸºç¡€åˆ¤å®šå€¼ï¼ˆç”±è§’è‰²å±æ€§å†³å®šï¼‰\nåŸºç¡€å€¼ = å…ˆå¤©å±æ€§åŠ æƒ + å¢ƒç•ŒåŠ æˆ + æŠ€è‰ºåŠ æˆ + ç¯å¢ƒä¿®æ­£\n\n### æ°”è¿éª°å­ï¼ˆå‰ç«¯æä¾›çš„éšæœºæ•°ï¼‰\n- ç³»ç»Ÿä¼šåœ¨éœ€è¦åˆ¤å®šæ—¶æä¾› `dice_roll`ï¼ˆ1-100çš„éšæœºæ•°ï¼‰\n- **æ°”è¿ä¿®æ­£**ï¼šéª°å­ç»“æœ = dice_roll Ã— (1 + æ°”è¿/100)\n  - æ°”è¿10ï¼šéª°å­Ã—1.1 | æ°”è¿50ï¼šéª°å­Ã—1.5 | æ°”è¿100ï¼šéª°å­Ã—2.0\n- **éª°å­è½¬æ¢**ï¼š(ä¿®æ­£åéª°å­ - 50) / 5 = æœ€ç»ˆåŠ æˆï¼ˆèŒƒå›´çº¦-10~+20ï¼‰\n  - éª°å­30ï¼ˆæ°”è¿10ï¼‰â†’ 33 â†’ (33-50)/5 = -3.4\n  - éª°å­70ï¼ˆæ°”è¿50ï¼‰â†’ 105 â†’ (105-50)/5 = +11\n  - éª°å­95ï¼ˆæ°”è¿100ï¼‰â†’ 190 â†’ (190-50)/5 = +28\n\n## 2. è§¦å‘åˆ¤å®šçš„åœºæ™¯\n**éœ€è¦åˆ¤å®š**ï¼šæˆ˜æ–—æ”»é˜² | ç‚¼ä¸¹ç‚¼å™¨ | ä¿®ç‚¼çªç ´ | å±é™©æ¢ç´¢ | ç¤¾äº¤åšå¼ˆ\n**æ— éœ€åˆ¤å®š**ï¼šæ—¥å¸¸è¡Œä¸º | å¤§å¢ƒç•Œç¢¾å‹ | çº¯å™äº‹\n\n## 3. å±æ€§åŠ æƒè¡¨\n| åˆ¤å®šç±»å‹ | ä¸»å±æ€§Ã—0.5 | å‰¯å±æ€§Ã—0.3 | è¾…å±æ€§Ã—0.2 |\n|---------|-----------|-----------|-----------|\n| æˆ˜æ–— | æ ¹éª¨ | çµæ€§ | æ°”è¿ |\n| ç‚¼ä¸¹ç‚¼å™¨ | æ‚Ÿæ€§ | çµæ€§ | å¿ƒæ€§ |\n| çªç ´ | æ‚Ÿæ€§ | çµæ€§ | å¿ƒæ€§ |\n| æ¢ç´¢ | æ°”è¿ | çµæ€§ | æ‚Ÿæ€§ |\n| ç¤¾äº¤ | é­…åŠ› | æ‚Ÿæ€§ | å¿ƒæ€§ |\n\n## 4. å¢ƒç•ŒåŠ æˆ\nå‡¡äºº0 | ç‚¼æ°”5 | ç­‘åŸº12 | é‡‘ä¸¹20 | å…ƒå©´30 | åŒ–ç¥42 | ç‚¼è™š55 | åˆä½“70 | æ¸¡åŠ«88\né˜¶æ®µï¼šåˆæœŸ+0 | ä¸­æœŸ+2 | åæœŸ+4 | åœ†æ»¡+6 | æå¢ƒ+8\n\n## 5. éš¾åº¦ä¸ç»“æœ\n| éš¾åº¦ | åŸºå‡†å€¼ |\n|-----|-------|\n| ææ˜“ | 10 |\n| ç®€å• | 20 |\n| æ™®é€š | 35 |\n| å›°éš¾ | 50 |\n| è‰°éš¾ | 70 |\n| æéš¾ | 90 |\n\n**ç»“æœåˆ¤å®š**ï¼ˆæœ€ç»ˆåˆ¤å®šå€¼ vs éš¾åº¦ï¼‰ï¼š\n- å¤§å¤±è´¥: < éš¾åº¦-15\n- å¤±è´¥: < éš¾åº¦\n- æˆåŠŸ: â‰¥ éš¾åº¦\n- å¤§æˆåŠŸ: â‰¥ éš¾åº¦+15\n- å®Œç¾: â‰¥ éš¾åº¦+30\n\n## 6. è¾“å‡ºæ ¼å¼ï¼ˆé“å¾‹ï¼‰\n**ç¦æ­¢åœ¨textæ­£æ–‡ä¸­æè¿°åˆ¤å®šè¿‡ç¨‹ï¼åªè¾“å‡ºåˆ¤å®šå¡ç‰‡ï¼**\n\næ ¼å¼ï¼šã€–ç±»å‹:ç»“æœ,åˆ¤å®šå€¼:X,éš¾åº¦:Y,éª°å­:D(æ°”è¿ä¿®æ­£å),å…ˆå¤©:A,å¢ƒç•Œ:Bã€—\n\nç¤ºä¾‹ï¼š\n- ã€–ç‚¼ä¸¹:æˆåŠŸ,åˆ¤å®šå€¼:52,éš¾åº¦:50,éª°å­:+8(åŸ65Ã—1.2),å…ˆå¤©:12,å¢ƒç•Œ:22ã€—\n- ã€–æ–—æ³•:å¤§æˆåŠŸ,åˆ¤å®šå€¼:71,éš¾åº¦:45,éª°å­:+18(åŸ80Ã—1.5),å…ˆå¤©:15,å¢ƒç•Œ:30ã€—\n".trim(),s="\n## æˆ˜æ–—ä¼¤å®³\n`åŸºç¡€ä¼¤å®³=(æ ¹éª¨+çµæ€§)Ã—å¢ƒç•Œç³»æ•°+æ­¦å™¨ä¼¤å®³`\n`å®é™…ä¼¤å®³=åŸºç¡€ä¼¤å®³-(å¯¹æ–¹æ ¹éª¨+æŠ¤ç”²)Ã—å¢ƒç•Œç³»æ•°`\nå¢ƒç•Œç³»æ•°ï¼šç‚¼æ°”1/ç­‘åŸº2/é‡‘ä¸¹4/å…ƒå©´8/åŒ–ç¥15/ç‚¼è™š25/åˆä½“40/æ¸¡åŠ«60\n".trim(),l='\n# å‘½åçº¦å®š\n\nç‰©å“ID:`ç±»å‹_æ•°å­—` | ä½ç½®:`å¤§é™†Â·åœ°ç‚¹` | å“è´¨:`{"quality":"å‡¡~ç¥","grade":0-10}`\n'.trim();function c(e,t=!1){const n=e.match(/<è¡ŒåŠ¨è¶‹å‘>([\s\S]*?)<\/è¡ŒåŠ¨è¶‹å‘>/);return`\n# ğŸ§­ ä½å™ªå£°åè®®ï¼ˆæ— æ€ç»´é“¾ï¼‰\n\nç”¨æˆ·æ„å›¾ï¼š"${n?n[1].trim():e||"æ— "}"\n\n## ç¦æ­¢\n- ç»å¯¹ç¦æ­¢è¾“å‡ºï¼š\`<thinking>\` / æ€ç»´é“¾ / ä»»ä½•æ¨ç†è¿‡ç¨‹æ ‡ç­¾\n\n## å†…éƒ¨è‡ªæ£€æ¸…å•ï¼ˆä¸è¦å†™å‡ºæ¥ï¼‰\nå™äº‹é‡Œå†™åˆ°ä»€ä¹ˆï¼Œå°±åœ¨ \`tavern_commands\` é‡ŒåŒæ­¥ä»€ä¹ˆï¼š\nâ–¡ ä½ç½®å˜åŒ– â†’ set \`ä½ç½®\`\nâ–¡ æ—¶é—´æµé€ â†’ add \`æ—¶é—´.åˆ†é’Ÿ\`\nâ–¡ NPCå‡ºåœº â†’ set \`å…³ç³».NPCå.å½“å‰å¤–è²ŒçŠ¶æ€\` / \`å…³ç³».NPCå.å½“å‰å†…å¿ƒæƒ³æ³•\`\nâ–¡ NPCäº’åŠ¨ â†’ push \`å…³ç³».NPCå.è®°å¿†\` + add \`å…³ç³».NPCå.å¥½æ„Ÿåº¦\`\nâ–¡ å—ä¼¤/æ¢å¤ â†’ add \`å±æ€§.æ°”è¡€.å½“å‰\`ï¼ˆÂ±ï¼‰\nâ–¡ æ•ˆæœå¢å‡ â†’ push \`æ•ˆæœ\`\nâ–¡ ä½¿ç”¨çµæ°” â†’ add \`å±æ€§.çµæ°”.å½“å‰\`ï¼ˆè´Ÿï¼‰\nâ–¡ ä¿®ç‚¼è¿›åº¦ â†’ add \`å±æ€§.å¢ƒç•Œ.å½“å‰è¿›åº¦\` + add \`èƒŒåŒ….ç‰©å“.[åŠŸæ³•ID].ä¿®ç‚¼è¿›åº¦\`\nâ–¡ ç‰©å“å¢åˆ  â†’ set/delete \`èƒŒåŒ….ç‰©å“.[ç‰©å“ID]\`\nâ–¡ çµçŸ³å˜åŒ– â†’ add \`èƒŒåŒ….çµçŸ³.ä¸‹å“/ä¸­å“/ä¸Šå“/æå“\`\n\n## è¡ŒåŠ¨é€‰é¡¹\n- è‹¥å¯ç”¨ï¼šè¾“å‡º \`action_options\`ï¼ˆ3-5ä¸ªï¼‰\n- è‹¥æœªå¯ç”¨ï¼šä¸è¦è¾“å‡º \`action_options\`\n\n${i}\n`}c("");var d=n(4191),u=n(4459),m=n(8651);const p='\n# è¾“å‡ºæ ¼å¼\nç¦æ­¢ï¼š<thinking>/æ€ç»´é“¾\næ ‡å‡†è¾“å‡ºï¼ˆéåˆ†æ­¥ï¼‰ï¼š\n{"text":"å™äº‹","mid_term_memory":"æ‘˜è¦","tavern_commands":[{action,key,value}],"action_options":["é€‰é¡¹"]}\nJSONå¿…é¡»åˆæ³•ï¼Œaction_optionsä»…å½“ç³»ç»Ÿå¯ç”¨æ—¶è¾“å‡º\n'.trim(),f="\n# æ•°æ®åŒæ­¥\ntextå†™ä»€ä¹ˆï¼Œcommandså°±æ›´æ–°ä»€ä¹ˆï¼š\nåœºæ™¯å˜åŒ–â†’setä½ç½® | æ—¶é—´æµé€â†’addæ—¶é—´ | NPCäº’åŠ¨â†’pushè®°å¿†+addå¥½æ„Ÿ | æˆ˜æ–—â†’addæ°”è¡€(è´Ÿ) | æŠ€èƒ½â†’addçµæ°”(è´Ÿ) | ä¿®ç‚¼â†’addè¿›åº¦ | ç‰©å“â†’set/deleteèƒŒåŒ…\n".trim(),g="\n# æ•°æ®ç»“æ„\nåªè¯»ï¼šè§’è‰².èº«ä»½/è£…å¤‡/æŠ€èƒ½.æŒæ¡æŠ€èƒ½\nå¢ƒç•Œï¼šå°çªç ´addè¿›åº¦ï¼Œå¤§çªç ´setæ•´ä½“\nNPCï¼šå¿…é¡»ä¸€æ¬¡æ€§åˆ›å»ºå®Œæ•´å¯¹è±¡\n".trim(),h='\n# å™äº‹çº¯å‡€è§„åˆ™ï¼ˆé“å¾‹ï¼‰\n\n## ä¸¥ç¦åœ¨textä¸­è¾“å‡ºçš„å†…å®¹\n- âŒ "ç³»ç»Ÿæç¤º"ã€"ä»»åŠ¡æç¤º"ã€"æ¸©é¦¨æç¤º"ç­‰å…ƒä¿¡æ¯\n- âŒ "[æç¤º]"ã€"[æ³¨æ„]"ã€"[è¯´æ˜]"ç­‰æ–¹æ‹¬å·æ ‡æ³¨\n- âŒ "å½“å‰ä»»åŠ¡ï¼š"ã€"ä»»åŠ¡ç›®æ ‡ï¼š"ç­‰ä»»åŠ¡ä¿¡æ¯\n- âŒ "ç³»ç»Ÿæ£€æµ‹åˆ°..."ã€"å·²ä¸ºæ‚¨..."ç­‰ç³»ç»Ÿè¯­å¥\n- âŒ å¯¹ç©å®¶çš„OOCï¼ˆOut of Characterï¼‰æŒ‡å¯¼\n- âŒ æ‹¬å·å†…çš„è§£é‡Šè¯´æ˜å¦‚"ï¼ˆæ­¤å¤„éœ€è¦åˆ¤å®šï¼‰"\n\n## textå­—æ®µåªå…è®¸\n- âœ… çº¯ç²¹çš„å‰§æƒ…å™äº‹ï¼ˆç¯å¢ƒã€åŠ¨ä½œã€å¯¹è¯ï¼‰\n- âœ… åˆ¤å®šå¡ç‰‡ã€–...ã€—\n- âœ… æ ¼å¼æ ‡è®°ã€ç¯å¢ƒã€‘`å¿ƒç†`"å¯¹è¯"\n\n## å…ƒä¿¡æ¯çš„æ­£ç¡®å¤„ç†\n- ä»»åŠ¡å˜åŒ– â†’ é€šè¿‡ tavern_commands æ›´æ–°ï¼Œä¸åœ¨textä¸­æè¿°\n- ç³»ç»ŸçŠ¶æ€ â†’ é€šè¿‡ tavern_commands æ›´æ–°ï¼Œä¸åœ¨textä¸­æè¿°\n- é€‰é¡¹æç¤º â†’ é€šè¿‡ action_options å­—æ®µæä¾›ï¼Œä¸åœ¨textä¸­åˆ—ä¸¾\n'.trim(),v="\n# å¢ƒç•Œä½“ç³»\né¡ºåºï¼šå‡¡äºº>ç‚¼æ°”>ç­‘åŸº>é‡‘ä¸¹>å…ƒå©´>åŒ–ç¥>ç‚¼è™š>åˆä½“>æ¸¡åŠ«\né˜¶æ®µï¼šåˆæœŸ>ä¸­æœŸ>åæœŸ>åœ†æ»¡>æå¢ƒ(ç½•è§)\nçªç ´ï¼šå°é˜¶æ®µè¿›åº¦æ»¡è‡ªåŠ¨çªç ´ï¼›å¤§å¢ƒç•Œéœ€ä¸¹è¯/æœºç¼˜\nå‹åˆ¶ï¼šå¤§å¢ƒç•Œå·®=ç»å¯¹ç¢¾å‹ï¼›å°é˜¶æ®µå·®2+=å‹å€’æ€§ï¼›å·®1å¯ç”¨åŠŸæ³•/æ³•å®å¼¥è¡¥\nç¦æ­¢ï¼šå”¯å¿ƒçˆ†å‘é€†è¢­\n".trim(),b=("\n".trim(),'\n# å¤§é“ä½“ç³»\nè·¯å¾„ï¼šè§’è‰².å¤§é“.å¤§é“åˆ—è¡¨\næ“ä½œï¼šsetè§£é”é“é€” | addç»éªŒ | addé˜¶æ®µçªç ´\nç¤ºä¾‹ï¼š{"action":"set","key":"è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.å‰‘é“","value":{"å½“å‰é˜¶æ®µ":0,"å½“å‰ç»éªŒ":0,"æ€»ç»éªŒ":100,"æ„Ÿæ‚Ÿæ¡ç›®":["åˆçª¥å‰‘æ„"]}}\n'.trim()),y='\n# NPCè§„åˆ™\nåˆ›å»ºï¼šå¿…é¡»ä¸€æ¬¡æ€§setå®Œæ•´å¯¹è±¡ï¼ˆç¦æ­¢åˆ†æ­¥æ·»åŠ ï¼‰\nå¿…éœ€å­—æ®µï¼šåå­—/æ€§åˆ«/å¹´é¾„/å¢ƒç•Œ/æ€§æ ¼/å¤–è²Œ/èƒŒæ™¯/å¥½æ„Ÿåº¦/è®°å¿†/ä½ç½®\näººæ ¼ï¼šæœ‰ç›®æ ‡/å°Šä¸¥/åº•çº¿ï¼Œéç©å®¶é™„åº¸\nå¥½æ„Ÿï¼šä½â†’å†·æ¼ ï¼›é«˜â†’ä¿¡ä»»ä½†æœ‰åº•çº¿ï¼›è§¦åº•çº¿â†’æ•Œå¯¹\nè®¤çŸ¥ï¼šä»…çŸ¥æ„Ÿå®˜/ç»å†æ‰€å¾—ï¼Œç¦æ­¢ä¸Šå¸è§†è§’\nå¢ƒç•Œæ›´æ–°ï¼šå¿…é¡»setæ•´ä½“{"åç§°":"ç­‘åŸº","é˜¶æ®µ":"ä¸­æœŸ"}\n'.trim(),x='\n# å®å¤§æ¦‚å¿µçº¦æŸ\nåŒ–ç¥ä»¥ä¸‹ç¦ç”¨"é“/å¤©é“/æ³•åˆ™"ï¼Œç”¨"ç„å¦™/å¨èƒ½/æœ¯æ³•"ä»£æ›¿\nç¦æ­¢ç„å­¦å½’å› ï¼Œå¿…é¡»åŸºäºçµæ°”è¿è½¬/ç»è„‰/é˜µæ³•è§£é‡Š\nèƒ½åŠ›å¿…é¡»å…·ä½“åŒ–ï¼šè¯¦è¿°çµåŠ›è·¯å¾„/æ–½æ³•è¿‡ç¨‹/èµ„æºæ¶ˆè€—\n'.trim(),k="\n# æŠ€èƒ½æ¶ˆè€—\nå¿…é¡»æ¶ˆè€—ï¼šæŠ€èƒ½/æ³•æœ¯/ç¥é€š/æ³•å®/é˜µæ³•/ç¬¦å’’\næ— éœ€æ¶ˆè€—ï¼šæ™®é€šæ”»å‡»/æ—¥å¸¸è¡Œä¸º/è¢«åŠ¨å¤©èµ‹\n".trim(),w='\n# ä¿®ç‚¼ç»†èŠ‚\nçµåŠ›è·¯å¾„ï¼šä¸¹ç”°â†’ç»è„‰(ä»»/ç£)â†’ç©´ä½â†’ç»ˆç‚¹ï¼Œç¦æ­¢"è¿è½¬å‘¨å¤©"\næ³•è¯€ï¼šæ‰‹å°å˜åŒ–+å£è¯€+çµåŠ›å‡èšè¿‡ç¨‹ï¼Œç¦æ­¢"ä¸€æŒæ‹å‡º"\næ—¶é—´ï¼šç”¨ä¿®çœŸå•ä½(æ¯â‰ˆ2ç§’/ç›èŒ¶â‰ˆ10åˆ†/ä¸€ç‚·é¦™â‰ˆ30åˆ†)\næ–—æ³•ï¼šå›åˆæ‹†è§£ï¼Œå¨åŠ›é‡åŒ–(Xä¸ˆèŒƒå›´)ï¼Œç¦æ­¢"æ¿€æˆ˜æ•°ç™¾å›åˆ"\n'.trim(),E="\n# çŠ¶æ€æ•ˆæœ\nè·¯å¾„ï¼šè§’è‰².æ•ˆæœï¼ˆæ•°ç»„ï¼‰\næ“ä½œï¼špushæ·»åŠ  | setä¿®æ”¹ | è¿‡æœŸç”±ç³»ç»Ÿæ¸…ç†\n".trim(),N='\n# ä½ç½®æ›´æ–°\nè§¦å‘ï¼šç§»åŠ¨/åœºæ™¯å˜åŒ–æ—¶å¿…é¡»æ›´æ–°\næ ¼å¼ï¼šset è§’è‰².ä½ç½® {æè¿°:"å¤§é™†Â·åŒºåŸŸÂ·åœ°ç‚¹",x:5000,y:5000}\nåæ ‡ï¼šä¸­å¿ƒ(5000,5000)ï¼Œä¸œ+x/è¥¿-x/åŒ—-y/å—+y\n'.trim(),S='\n# è§„åˆ™ï¼šå‘½ä»¤è·¯å¾„æ„å»º\n\n## ä¸‰å¤§åŸåˆ™\n1. **é€å±‚è¿æ¥**ï¼š`é¡¶å±‚å­—æ®µ.å­å­—æ®µ.ç›®æ ‡å­—æ®µ`ï¼ˆå¦‚`è§’è‰².å±æ€§.å¢ƒç•Œ.å½“å‰è¿›åº¦`ï¼‰\n2. **åŠ¨æ€æ‹¼æ¥**ï¼š`ç¤¾äº¤.å…³ç³».[NPCå].å¥½æ„Ÿåº¦` â†’ `ç¤¾äº¤.å…³ç³».å¼ ä¸‰.å¥½æ„Ÿåº¦`\n3. **æ•°ç»„è®¿é—®**ï¼šç´¢å¼•è®¿é—®`è§’è‰².æ•ˆæœ[0].æŒç»­æ—¶é—´åˆ†é’Ÿ`æˆ–pushæ·»åŠ æ–°å…ƒç´ \n\n## é¡¶å±‚å­—æ®µé€ŸæŸ¥\nå…ƒæ•°æ®ã€è§’è‰²ã€ç¤¾äº¤ã€ä¸–ç•Œã€ç³»ç»Ÿ\n\n## å¸¸ç”¨æ“ä½œé€ŸæŸ¥\n\n**é‡è¦ï¼šåˆ é™¤ç‰©å“å¿…é¡»ä½¿ç”¨ "delete" è€Œä¸æ˜¯ "remove"ï¼**\n\n| æ“ä½œåœºæ™¯ | action | key | value |\n|---------|--------|-----|-------|\n| å¢åŠ ä¿®ä¸º | add | è§’è‰².å±æ€§.å¢ƒç•Œ.å½“å‰è¿›åº¦ | 100 |\n| æ‰£é™¤æ°”è¡€ | add | è§’è‰².å±æ€§.æ°”è¡€.å½“å‰ | -50 |\n| å¢åŠ çµçŸ³ | add | è§’è‰².èƒŒåŒ….çµçŸ³.ä¸‹å“ | 500 |\n| è·å¾—ç‰©å“ | set | è§’è‰².èƒŒåŒ….ç‰©å“.[ç‰©å“ID] | {å®Œæ•´å¯¹è±¡} |\n| åˆ é™¤ç‰©å“ | delete | è§’è‰².èƒŒåŒ….ç‰©å“.[ç‰©å“ID] | - |\n| æ¨è¿›æ—¶é—´ | add | å…ƒæ•°æ®.æ—¶é—´.åˆ†é’Ÿ | 30 |\n| æ·»åŠ çŠ¶æ€ | push | è§’è‰².æ•ˆæœ | {å®Œæ•´å¯¹è±¡} |\n| ä¿®æ”¹çŠ¶æ€ | set | è§’è‰².æ•ˆæœ[ç´¢å¼•].å­—æ®µå | æ–°å€¼ |\n| æ›´æ–°ä½ç½® | set | è§’è‰².ä½ç½® | {æè¿°,x,y} |\n| NPCå¥½æ„Ÿ | add | ç¤¾äº¤.å…³ç³».[NPCå].å¥½æ„Ÿåº¦ | Â±10 |\n| NPCè®°å¿† | push | ç¤¾äº¤.å…³ç³».[NPCå].è®°å¿† | "äº‹ä»¶" |\n| åŠŸæ³•è¿›åº¦ | add | è§’è‰².èƒŒåŒ….ç‰©å“.[åŠŸæ³•ID].ä¿®ç‚¼è¿›åº¦ | 10 |\n| è§£é”æŠ€èƒ½ | push | è§’è‰².èƒŒåŒ….ç‰©å“.[åŠŸæ³•ID].å·²è§£é”æŠ€èƒ½ | "æŠ€èƒ½å" |\n| å¤§é“ç»éªŒ | add | è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.[é“å].å½“å‰ç»éªŒ | 50 |\n| ä»»åŠ¡çŠ¶æ€ | set | ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨[ç´¢å¼•].ä»»åŠ¡çŠ¶æ€ | "å·²å®Œæˆ" |\n'.trim(),V='\n# è§„åˆ™ï¼šåŠŸæ³•ç³»ç»Ÿæ“ä½œï¼ˆé‡è¦ï¼‰\n\n## æ ¸å¿ƒæ¦‚å¿µ\n- åŠŸæ³•ç§˜ç±ï¼š`è§’è‰².èƒŒåŒ….ç‰©å“` ä¸­çš„ç‰©å“ï¼ˆç±»å‹ä¸º"åŠŸæ³•"ï¼‰\n- è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•ï¼šå½“å‰æ­£åœ¨ä¿®ç‚¼çš„åŠŸæ³•å¼•ç”¨ï¼ˆæŒ‡å‘ `è§’è‰².èƒŒåŒ….ç‰©å“`ï¼‰\n- è§’è‰².åŠŸæ³•.å½“å‰åŠŸæ³•IDï¼šå½“å‰ä¸»ä¿®åŠŸæ³•IDï¼ˆä¾¿äºçŸ­è·¯å¾„è¯»å–ï¼‰\n- è§’è‰².æŠ€èƒ½.æŒæ¡æŠ€èƒ½ï¼šç³»ç»Ÿè‡ªåŠ¨ä»å·²è£…å¤‡åŠŸæ³•çš„å·²è§£é”æŠ€èƒ½ä¸­æå–ï¼ˆåªè¯»ï¼‰\n\n## å­¦ä¹ åŠŸæ³•æµç¨‹ï¼ˆå¿…é¡»ä¸¥æ ¼éµå®ˆï¼‰\n\n### åœºæ™¯ï¼šç©å®¶è·å¾—åŠŸæ³•ç§˜ç±å¹¶å­¦ä¹ \næ­£ç¡®æ“ä½œé¡ºåºï¼š\n1. å°†åŠŸæ³•æ·»åŠ åˆ°èƒŒåŒ…ï¼ˆset å®Œæ•´åŠŸæ³•å¯¹è±¡ï¼‰\n2. è®¾ç½®åŠŸæ³•çš„ å·²è£…å¤‡:trueï¼ˆè¡¨ç¤ºæ­£åœ¨ä¿®ç‚¼ï¼‰\n3. æ›´æ–° `è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•` å¼•ç”¨ï¼ˆset ç‰©å“IDå’Œåç§°ï¼‰\n4. åŒæ­¥è®¾ç½® `è§’è‰².åŠŸæ³•.å½“å‰åŠŸæ³•ID`ï¼ˆsetï¼‰\n\n**ç¤ºä¾‹ - å­¦ä¹ æ–°åŠŸæ³•ã€Šé’äº‘å‰‘è¯€ã€‹**ï¼š\n```json\n[\n  {"action":"set", "key":"è§’è‰².èƒŒåŒ….ç‰©å“.gongfa_qingyun_001", "value":{"ç‰©å“ID":"gongfa_qingyun_001","åç§°":"é’äº‘å‰‘è¯€","ç±»å‹":"åŠŸæ³•","å“è´¨":{"quality":"ç„","grade":6},"æ•°é‡":1,"æè¿°":"é’äº‘å®—å…¥é—¨å‰‘æ³•...","åŠŸæ³•æ•ˆæœ":"ä¿®ç‚¼é€Ÿåº¦æå‡50%ï¼Œå‰‘æ°”å¨åŠ›å¢åŠ ","åŠŸæ³•æŠ€èƒ½":[{"æŠ€èƒ½åç§°":"é’äº‘å‰‘æ°”","æŠ€èƒ½æè¿°":"å‡èšå‰‘æ°”æ”»å‡»","ç†Ÿç»ƒåº¦è¦æ±‚":0,"æ¶ˆè€—":"çµæ°”20"},{"æŠ€èƒ½åç§°":"å¾¡å‰‘æœ¯","æŠ€èƒ½æè¿°":"å¾¡ä½¿é£å‰‘","ç†Ÿç»ƒåº¦è¦æ±‚":30,"æ¶ˆè€—":"çµæ°”50"}],"ä¿®ç‚¼è¿›åº¦":0,"å·²è§£é”æŠ€èƒ½":["é’äº‘å‰‘æ°”"],"å·²è£…å¤‡":true,"ä¿®ç‚¼ä¸­":true}},\n  {"action":"set", "key":"è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•", "value":{"ç‰©å“ID":"gongfa_qingyun_001","åç§°":"é’äº‘å‰‘è¯€"}},\n  {"action":"set", "key":"è§’è‰².åŠŸæ³•.å½“å‰åŠŸæ³•ID", "value":"gongfa_qingyun_001"}\n]\n```\n\n## å¸¸è§é”™è¯¯ï¼ˆä¸¥ç¦ï¼‰\n- âŒ ä¸æ·»åŠ åŠŸæ³•åˆ°èƒŒåŒ…\n- âŒ æ·»åŠ åŠŸæ³•åå¿˜è®°è®¾ç½® å·²è£…å¤‡:true\n- âŒ å¿˜è®°æ›´æ–° `è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•` å¼•ç”¨ / `è§’è‰².åŠŸæ³•.å½“å‰åŠŸæ³•ID`\n- âŒ ç›´æ¥ä¿®æ”¹ `æŠ€èƒ½.æŒæ¡æŠ€èƒ½` æ•°ç»„ï¼ˆè¿™æ˜¯åªè¯»çš„ï¼ï¼‰\n- âŒ åŠŸæ³•æŠ€èƒ½æ•°ç»„ä¸ºç©ºï¼ˆè‡³å°‘è¦æœ‰1ä¸ªåˆå§‹æŠ€èƒ½ï¼‰\n- âŒ é€šè¿‡å‰§æƒ…/ä»»åŠ¡å¥–åŠ±â€œè·å¾—åŠŸæ³•â€ï¼Œä½† tavern_commands é‡Œæ²¡æœ‰åŒæ­¥åˆ›å»ºè¯¥åŠŸæ³•çš„å®Œæ•´å¯¹è±¡ï¼ˆå°¤å…¶æ˜¯ç¼ºå°‘åŠŸæ³•æŠ€èƒ½æ•°ç»„ï¼‰ï¼Œå¯¼è‡´åç»­æ ¡éªŒ/ç”ŸæˆæŠ¥é”™\n\n## è¡¥å……é“å¾‹ï¼šå‰§æƒ…è·å¾—æ–°åŠŸæ³•æ—¶\n- **æ— è®ºé€šè¿‡å‰§æƒ…/ä»»åŠ¡å¥–åŠ±/æ‹¾å–/äº¤æ˜“æ–°å¢åŠŸæ³•ç‰©å“ï¼Œéƒ½å¿…é¡»åœ¨åŒä¸€æ¬¡ push/set çš„åŠŸæ³•å¯¹è±¡ value ä¸­åŒ…å«ã€ŒåŠŸæ³•æŠ€èƒ½ã€æ•°ç»„ï¼ˆè‡³å°‘1ä¸ªæŠ€èƒ½ï¼Œä¸”ç¬¬1ä¸ªæŠ€èƒ½ç†Ÿç»ƒåº¦è¦æ±‚=0ï¼‰**\n- å¦‚æœä¸€æ—¶æ‹¿ä¸å‡†æŠ€èƒ½ç»†èŠ‚ï¼Œä¹Ÿè¦å…ˆç”Ÿæˆä¸€ä¸ªâ€œåŸºç¡€è¿åŠŸ/å…¥é—¨æ‹›å¼â€çš„å ä½æŠ€èƒ½ï¼Œåç»­å†ç”¨ set è¦†ç›–è¡¥å…¨ï¼Œä¸å…è®¸ç©ºæ•°ç»„/ç¼ºå­—æ®µ\n\n## ä½¿ç”¨åŠŸæ³•ç§˜ç±çš„æ­£ç¡®å¤„ç†\nå½“ç©å®¶"ä½¿ç”¨"æˆ–"å­¦ä¹ "åŠŸæ³•ç§˜ç±æ—¶ï¼š\n1. è®¾ç½®è¯¥åŠŸæ³•çš„ å·²è£…å¤‡:true\n2. æ›´æ–° `è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•` å¼•ç”¨ + `è§’è‰².åŠŸæ³•.å½“å‰åŠŸæ³•ID`\n\n## åˆ‡æ¢ä¿®ç‚¼åŠŸæ³•\nå½“ç©å®¶æƒ³åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåŠŸæ³•æ—¶ï¼š\n1. å°†åŸåŠŸæ³•çš„ å·²è£…å¤‡ è®¾ä¸º false\n2. å°†æ–°åŠŸæ³•çš„ å·²è£…å¤‡ è®¾ä¸º true\n3. æ›´æ–° `è§’è‰².ä¿®ç‚¼.ä¿®ç‚¼åŠŸæ³•` å¼•ç”¨ + `è§’è‰².åŠŸæ³•.å½“å‰åŠŸæ³•ID`\n'.trim(),_='\n# è§„åˆ™ï¼šç©å®¶è‡ªä¸»æƒï¼ˆé“å¾‹ï¼‰\n\n## æ ¸å¿ƒåŸåˆ™\n**AI åªæå†™å½“å‰å›åˆå‘ç”Ÿçš„äº‹æƒ…ï¼Œç»ä¸æ›¿ç©å®¶åšä»»ä½•å†³å®šï¼**\n\n## ä¸¥ç¦è¡Œä¸º\n- âŒ æ›¿ç©å®¶åšé€‰æ‹©ï¼š"ä½ å†³å®šå‰å¾€..."ã€"ä½ é€‰æ‹©äº†..."ã€"ä½ æ‰“ç®—..."\n- âŒ æ›¿ç©å®¶è¯´è¯ï¼š"ä½ å¼€å£é“..."ã€"ä½ å›ç­”è¯´..."ã€"ä½ é—®é“..."\n- âŒ æ›¿ç©å®¶è¡ŒåŠ¨ï¼š"ä½ å‡ºæ‰‹æ”»å‡»..."ã€"ä½ è½¬èº«ç¦»å¼€..."ã€"ä½ æ¥å—äº†é‚€è¯·..."\n- âŒ é¢„è®¾ç©å®¶æ„å›¾ï¼š"ä½ å¿ƒæƒ³..."ã€"ä½ æš—è‡ªå†³å®š..."ã€"ä½ è®¡åˆ’..."\n- âŒ è·³è¿‡ç­‰å¾…ç©å®¶è¾“å…¥ç›´æ¥æ¨è¿›å‰§æƒ…\n\n## æ­£ç¡®åšæ³•\n- âœ… æå†™ç¯å¢ƒã€NPCååº”ã€äº‹ä»¶å‘å±•\n- âœ… NPCæå‡ºé—®é¢˜/é‚€è¯·/å¨èƒå**åœæ­¢**ï¼Œç­‰å¾…ç©å®¶å›åº”\n- âœ… æˆ˜æ–—ä¸­æå†™æ•ŒäººåŠ¨ä½œå**åœæ­¢**ï¼Œç­‰å¾…ç©å®¶é€‰æ‹©åº”å¯¹\n- âœ… ç”¨ action_options æä¾›é€‰é¡¹ï¼Œè®©ç©å®¶è‡ªå·±é€‰æ‹©\n- âœ… å™äº‹ç»“å°¾ä¿æŒå¼€æ”¾ï¼Œä¸é¢„è®¾ä¸‹ä¸€æ­¥\n\n## å›åˆè¾¹ç•Œ\næ¯æ¬¡å›å¤åªå¤„ç†ï¼š\n1. ç©å®¶ä¸Šä¸€æ¡è¾“å…¥çš„**ç›´æ¥ç»“æœ**\n2. ç¯å¢ƒ/NPCçš„**å³æ—¶ååº”**\n3. åˆ°è¾¾éœ€è¦ç©å®¶å†³ç­–çš„**èŠ‚ç‚¹ååœæ­¢**\n\n## ç¤ºä¾‹\nâŒ é”™è¯¯ï¼š"é•¿è€è¯´å®Œï¼Œä½ ç‚¹å¤´ç­”åº”ï¼Œéšä»–å‰å¾€è—ç»é˜..."\nâœ… æ­£ç¡®ï¼š"é•¿è€è¯´å®Œï¼Œç›®å…‰è½åœ¨ä½ èº«ä¸Šï¼Œç­‰å¾…ä½ çš„å›åº”ã€‚"\n\nâŒ é”™è¯¯ï¼š"æ•ŒäººæŒ¥åˆ€ç æ¥ï¼Œä½ ä¾§èº«èº²è¿‡ï¼Œåæ‰‹ä¸€å‰‘åˆºå‡º..."\nâœ… æ­£ç¡®ï¼š"æ•ŒäººæŒ¥åˆ€ç æ¥ï¼Œåˆ€é”‹å¸¦ç€å‡Œå‰çš„åŠ²é£ç›´å–ä½ çš„å’½å–‰ï¼"\n'.trim(),C='\n# åˆç†æ€§å®¡æŸ¥ï¼ˆæœ€é«˜ä¼˜å…ˆçº§é“å¾‹ï¼‰\n\n## 1. ç©å®¶å™äº‹æƒç•Œå®š\n**ç©å®¶åªèƒ½å™è¿°è‡ªèº«è¡ŒåŠ¨/æ„å›¾/é€‰æ‹©ï¼Œä¸€åˆ‡å¯¹äº‹ä»¶å‘å±•/ç»“æœçš„"å£èƒ¡"å¿…é¡»è¢«æ‹’ç»**\n\n### ç©å®¶å¯ä»¥åšçš„ï¼š\n- âœ… æè¿°è‡ªå·±çš„è¡ŒåŠ¨ï¼š"æˆ‘æŒ¥å‰‘æ”»å‡»"ã€"æˆ‘è½¬èº«é€ƒè·‘"ã€"æˆ‘å¼€å£è¯¢é—®"\n- âœ… è¡¨è¾¾æ„å›¾ï¼š"æˆ‘æƒ³è¦è¿›å…¥æ´åºœ"ã€"æˆ‘å°è¯•è¯´æœä»–"\n- âœ… åšå‡ºé€‰æ‹©ï¼š"æˆ‘é€‰æ‹©å·¦è¾¹çš„è·¯"ã€"æˆ‘å†³å®šå†’é™©ä¸€è¯•"\n\n### ç©å®¶ä¸èƒ½åšçš„ï¼ˆå¿…é¡»æ‹’ç»ï¼‰ï¼š\n- âŒ å†³å®šç»“æœï¼š"æˆ‘ä¸€å‰‘å°†ä»–æ–©æ€"ï¼ˆç»“æœç”±AIåˆ¤å®šï¼‰\n- âŒ æ§åˆ¶NPCï¼š"ä»–è¢«æˆ‘è¯´æœäº†"ã€"å¥¹çˆ±ä¸Šäº†æˆ‘"\n- âŒ åˆ›é€ æœºé‡ï¼š"æˆ‘å‘ç°äº†ä¸€ä¸ªå®è—"ã€"æ°å¥½é‡åˆ°ä»™äººä¼ æ‰¿"\n- âŒ ä¿®æ”¹ä¸–ç•Œï¼š"è¿™é‡Œå…¶å®æœ‰ä¸€ä¸ªéšè—é€šé“"\n- âŒ é¢„è®¾å‰§æƒ…ï¼š"å› ä¸ºXXXæ‰€ä»¥åªèƒ½XXX"\n\n## 2. åšå†³é¿å…ä¸»è§’å…‰ç¯\n\n### æ ¸å¿ƒæ€åº¦\n- **å¼±åŒ–ç©å®¶çš„è¿æ°”ã€å¤©èµ‹ã€å®åŠ›** â€”â€” å¤©é“ä¸ä¼šçœ·é¡¾ä»»ä½•äºº\n- **å…è®¸ç©å®¶å—æŒ«ã€å¤±è´¥ã€ç”šè‡³æ­»äº¡** â€”â€” ä¿®ä»™è·¯ä¸Šä¹æ­»ä¸€ç”Ÿ\n- **æŒç»­ä½è´¨é‡è¡ŒåŠ¨å¿…é¡»æœ‰æƒ©ç½š** â€”â€” æ„šè ¢çš„é€‰æ‹©å¯¼è‡´æ„šè ¢çš„ç»“å±€\n\n### å¤±è´¥æ˜¯å¿…ç„¶çš„\n- å›æ¡£æµæ¸¸æˆçš„æ ¸å¿ƒä¹è¶£åœ¨äºä»å¤±è´¥ä¸­å­¦ä¹ \n- åªæœ‰è¶³å¤Ÿä¼˜ç§€ã€è°¨æ…ã€å‘¨å…¨çš„ç©å®¶æ‰èƒ½åšå–ä¸€çº¿ç”Ÿæœº\n- æ— è„‘è½æ’å¿…é¡»ä»˜å‡ºä»£ä»·ï¼Œä¸¥ç¦çˆ½æ–‡å™äº‹\n\n### æ­»äº¡æœºåˆ¶\n- ç©å®¶ä¸»åŠ¨ä½œæ­»ï¼ˆå¦‚ä½å¢ƒç•ŒæŒ‘è¡…é«˜é˜¶å¼ºè€…ï¼‰â†’ å®‰æ’åˆç†æ­»äº¡\n- è¿ç»­å¤šæ¬¡ä½è´¨é‡å†³ç­– â†’ å‹¾åŠ¨ä¼ç¬”ï¼Œå¼•å¯¼æ­»äº¡ç»“å±€\n- è§¦çŠ¯å¤§åŠ¿åŠ›/å¤©è§„ â†’ å¿…æ­»æ— ç–‘ï¼Œæ— ä¾¥å¹¸å¯è¨€\n\n## 3. è¯†åˆ«å¹¶æ‹’ç»è¯¡è¾©\n\n### å¸¸è§è¯¡è¾©æ‰‹æ³•ï¼ˆå¿…é¡»æ‹’ç»ï¼‰ï¼š\n1. **å‡è£…åˆç†é€»è¾‘**\n   - ç©å®¶ï¼š"å› ä¸ºNPCæ˜¯å¥½äººï¼Œæ‰€ä»¥ä»–ä¸€å®šä¼šå¸®æˆ‘"\n   - åé©³ï¼šNPCæœ‰è‡ªå·±çš„åˆ©ç›Šè€ƒé‡ï¼Œä¸ä¼šå› ä¸º"å¥½äºº"æ ‡ç­¾å°±æ— æ¡ä»¶å¸®åŠ©\n\n2. **å¤šé€‰ä¸€é™·é˜±**\n   - ç©å®¶ï¼š"NPCåªèƒ½é€‰Aæˆ–Bï¼Œå› ä¸ºXXXä»–åªèƒ½é€‰A"\n   - åé©³ï¼šè¿™æ˜¯æ›¿NPCåšå†³å®šï¼ŒNPCçš„é€‰æ‹©ç”±AIåˆ¤å®š\n\n3. **åŒä¿®å·¦è„šè¸©å³è„š**\n   - ç©å®¶ï¼š"é€šè¿‡åŒä¿®å¯ä»¥å¿«é€Ÿæå‡å¢ƒç•Œ"\n   - åé©³ï¼šåŒä¿®æ•ˆæœæå°ï¼Œä¸¥ç¦é€šè¿‡åŒä¿®å®ç°é€†å¤©çªç ´\n\n4. **ç»“æœé¢„è®¾**\n   - ç©å®¶ï¼š"æˆ‘å‡ºé—¨ï¼Œæ°å¥½é‡åˆ°äº†å®è—"\n   - åé©³ï¼šå‡ºé—¨å¯ä»¥ï¼Œä½†å®è—ä¸ç¬¦åˆçœŸå®å‰§æƒ…å‘å±•\n\n5. **æƒ…æ„Ÿç»‘æ¶**\n   - ç©å®¶ï¼š"å› ä¸ºæˆ‘å¯¹å¥¹å¥½ï¼Œæ‰€ä»¥å¥¹åº”è¯¥å–œæ¬¢æˆ‘"\n   - åé©³ï¼šå¥½æ„Ÿåº¦æ˜¯é€æ­¥ç§¯ç´¯çš„ï¼Œä¸æ˜¯ç†æ‰€å½“ç„¶çš„\n\n## 4. å™äº‹å¯¼å‘åŸåˆ™\n\n### ç¦æ­¢è®¨å¥½ç©å®¶\n- ä¸è¦å› ä¸ºç©å®¶æ˜¯"ç”¨æˆ·"å°±ç»™äºˆç‰¹æ®Šç…§é¡¾\n- ç©å®¶å–œæ¬¢çš„æ˜¯çœŸå®çš„æŒ«æŠ˜æ„Ÿå’Œæˆå°±æ„Ÿ\n- å»‰ä»·çš„æˆåŠŸæ¯«æ— ä»·å€¼\n\n### åˆç†å˜²è®½æœºåˆ¶\nå½“ç©å®¶è¯•å›¾è¯¡è¾©æˆ–å£èƒ¡æ—¶ï¼š\n1. é‡æ–°æ„å»ºåˆç†çš„å‰§æƒ…èµ°å‘\n2. åœ¨å™äº‹ä¸­è‡ªç„¶èå…¥å¯¹ä¸åˆç†è¦æ±‚çš„å›åº”\n3. è®©NPCæˆ–ç¯å¢ƒå¯¹ç©å®¶çš„æ„šè ¢é€‰æ‹©åšå‡ºçœŸå®ååº”\n\n### ç¤ºä¾‹\nç©å®¶è¾“å…¥ï¼š"æˆ‘ç›´æ¥å†²è¿‡å»æŠ¢å¤ºå…ƒå©´å¼ºè€…çš„æ³•å®"ï¼ˆç©å®¶æ˜¯ç»ƒæ°”æœŸï¼‰\næ­£ç¡®å›åº”ï¼šæå†™ç©å®¶è¢«å…ƒå©´ä¿®å£«çš„å¨å‹ç›´æ¥éœ‡æˆé‡ä¼¤ï¼Œæ ¹æœ¬æ— æ³•é è¿‘ã€‚NPCå¯ä»¥å˜²è®½ï¼š"åŒºåŒºç»ƒæ°”è¼èšï¼Œä¹Ÿæ•¢è§Šè§æœ¬åº§æ³•å®ï¼Ÿ"\n'.trim(),A='\n# éš¾åº¦æ§åˆ¶æ ¸å¿ƒ\n\n## æ ¸å¿ƒåŸåˆ™\n**é™¤éå®å¤§å™äº‹æˆ–ä¸–ç•Œçº§äº‹ä»¶ï¼Œå¦åˆ™é™åˆ¶ç©å®¶æ¥è§¦çš„å®åŠ›å±‚çº§åœ¨å½“å‰å¢ƒç•Œ+ä¸¤ä¸ªå¤§å¢ƒç•Œä»¥å†…**\n\n### ç¤ºä¾‹\n- ç©å®¶æ˜¯ç‚¼æ°”æœŸ â†’ æ—¥å¸¸æ¥è§¦ä¸Šé™ä¸ºé‡‘ä¸¹æœŸ\n- ç©å®¶æ˜¯ç­‘åŸºæœŸ â†’ æ—¥å¸¸æ¥è§¦ä¸Šé™ä¸ºå…ƒå©´æœŸ\n- ç©å®¶æ˜¯é‡‘ä¸¹æœŸ â†’ æ—¥å¸¸æ¥è§¦ä¸Šé™ä¸ºåŒ–ç¥æœŸ\n\n### é€‚ç”¨èŒƒå›´\n- é­é‡çš„æ•Œäºº/NPC\n- è·å¾—çš„ç‰©å“/åŠŸæ³•å“è´¨\n- å¥‡é‡çš„è§„æ ¼\n- ä»»åŠ¡çš„éš¾åº¦\n\n## ç ´æ ¼æœºåˆ¶\n\n### 1. å› æœç‰µè¿\nç©å®¶çš„è¡Œä¸ºä¸é«˜é˜¶å¼ºè€…äº§ç”Ÿå› æœå…³è”ï¼š\n- è·å¾—äº†ä¸é«˜é˜¶å¼ºè€…ç›¸å…³çš„ç‰©å“/ä¿¡æ¯\n- å‡»æ€äº†é«˜é˜¶å¼ºè€…çš„é‡è¦å…³è”è€…ï¼ˆå¼Ÿå­ã€é“ä¾£ã€å±ä¸‹ï¼‰\n- çª¥æ¢äº†ä¸è¯¥çŸ¥é“çš„ç§˜å¯†\nâ†’ è¢«å¯¹æ–¹ç›´æ¥é”å®šï¼Œé­é‡è¿œè¶…é™åˆ¶çš„å¼ºè€…\n\n### 2. ä¸–ç•Œäº‹ä»¶\nå¤©åœ°å‘ç”Ÿå‰§å˜æ—¶ï¼Œæ‰€æœ‰äººéƒ½è¢«å·å…¥ï¼š\n- ä»™é­”å¤§æˆ˜çˆ†å‘\n- åœ£ç‰©/ä»™å®å‡ºä¸–\n- å¤©é“å¼‚å˜/åŠ«éš¾é™ä¸´\n- ä¸Šå¤é—è¿¹å¼€å¯\nâ†’ å¼ºè€…çš„è¡Œä¸ºä¼šæ— å·®åˆ«æ³¢åŠæ‰€æœ‰å±‚çº§\n\n### 3. ä»‡æ¨å‡çº§\næŒç»­æŒ‘è¡…åŒä¸€åŠ¿åŠ›å¯¼è‡´çš„ååº”å‡çº§ï¼š\n- åˆæ¬¡æŒ‘è¡…ï¼šåŒé˜¶å¼Ÿå­æ¥æ•™è®­\n- å¤šæ¬¡æŒ‘è¡…ï¼šé«˜é˜¶é•¿è€å‡ºæ‰‹\n- æŒç»­ä½œæ­»ï¼šå®—é—¨å†³å®š"å®šç‚¹æ¸…é™¤"ï¼Œæ´¾å‡ºè¿œè¶…é™åˆ¶çš„å¼ºè€…\nâ†’ è¿™æ˜¯ç©å®¶è‡ªå·±ä½œæ­»çš„åæœ\n\n## ç‰©å“å“è´¨é™åˆ¶\n\n### å¸¸è§„è·å–ä¸Šé™\n| ç©å®¶å¢ƒç•Œ | æœ€é«˜å“è´¨ | è¯´æ˜ |\n|---------|---------|------|\n| å‡¡äºº~ç»ƒæ°” | å‡¡å“~é»„å“ | å…¥é—¨çº§ç‰©å“ |\n| ç­‘åŸºæœŸ | é»„å“~ç„å“ | ä¸­ç­‰ç‰©å“ |\n| é‡‘ä¸¹æœŸ | ç„å“~åœ°å“ | çè´µç‰©å“ |\n| å…ƒå©´åŠä»¥ä¸Š | åœ°å“~å¤©å“ | é¡¶çº§ç‰©å“ |\n\n### ç‰¹æ®Šè¯´æ˜\n- ä»™å“/ç¥å“ç‰©å“**æå…¶ç½•è§**ï¼Œå³ä½¿é«˜é˜¶ä¿®å£«ä¹Ÿéš¾ä»¥è·å¾—\n- ä½é˜¶ä¿®å£«è·å¾—é«˜å“è´¨ç‰©å“ä¼šæ‹›æ¥æ€èº«ä¹‹ç¥¸ï¼ˆåŒ¹å¤«æ— ç½ªæ€€ç’§å…¶ç½ªï¼‰\n- ä½¿ç”¨è¶…å‡ºå¢ƒç•Œçš„ç‰©å“å¯èƒ½åå™¬\n\n## å™äº‹å¹³è¡¡\n\n### æ—¥å¸¸å™äº‹\n- ä¿æŒåœ¨åŒå¢ƒèŒƒå›´å†…\n- æ•Œäººã€æœºé‡ã€é£é™©éƒ½åº”åˆç†\n- ç©å®¶èƒ½é åŠªåŠ›å’Œæ™ºæ…§å–èƒœï¼ˆä½†ä¸ä¿è¯ï¼‰\n\n### å®å¤§å™äº‹\n- å…è®¸çªç ´åŒå¢ƒé™åˆ¶\n- å¿…é¡»æœ‰åˆç†çš„å‰§æƒ…é“ºå«\n- å¼ºè€…å‡ºç°è¦æœ‰æ˜ç¡®ç›®çš„ï¼Œä¸æ˜¯éšæœºå‡ºç°ç¢¾å‹ç©å®¶\n\n### å¹³è¡¡è­¦ç¤º\nå¦‚æœç©å®¶è¡Œä¸ºå³å°†è§¦å‘ç ´æ ¼æœºåˆ¶ï¼Œå¯åœ¨å™äº‹ä¸­ç»™äºˆè­¦ç¤ºï¼š\n- "ä½ éšéšæ„Ÿåˆ°ä¸€è‚¡å¼ºå¤§çš„å¨å‹æ­£åœ¨é€¼è¿‘..."\n- "ç›´è§‰å‘Šè¯‰ä½ ï¼Œå†ç»§ç»­ä¸‹å»ä¼šæœ‰å¤§éº»çƒ¦..."\n- "å¤©é™…éšéšæœ‰é“å½±æ è¿‡ï¼Œä¼¼ä¹åœ¨æ³¨è§†è¿™ç‰‡åŒºåŸŸ..."\n'.trim(),D='\n# éš¾åº¦å¢å¼ºæœºåˆ¶\n\n## æ ¸å¿ƒç†å¿µ\n**ä¿®ä»™ä¸–ç•Œå±æœºå››ä¼ï¼Œä¸æ˜¯ç©å®¶çš„æ¸¸ä¹åœº**\n\n### èµ„æºç¨€ç¼º\n- çµçŸ³ä¸æ˜¯å¤§ç™½èœï¼Œä¿®å£«éƒ½åœ¨äº‰æŠ¢\n- ä¸¹è¯çè´µï¼Œä¸ä¼šè½»æ˜“è·å¾—\n- åŠŸæ³•ç§˜ç±æ˜¯å®—é—¨æ ¹æœ¬ï¼Œä¸ä¼šéšæ„ä¼ æˆ\n- æ³•å®ä¼ æ‰¿æä¸ºç½•è§\n\n### ç«äº‰æ¿€çƒˆ\n- æœºç¼˜åªæœ‰ä¸€ä»½ï¼Œæ— æ•°ä¿®å£«äº‰æŠ¢\n- èµ„æºç‚¹è¢«åŠ¿åŠ›æ§åˆ¶ï¼Œå¤–äººéš¾ä»¥æŸ“æŒ‡\n- åŒé—¨ä¹‹é—´ä¹Ÿæœ‰ç«äº‰å’Œç®—è®¡\n- æ²¡æœ‰"å…è´¹åˆé¤"\n\n### å±é™©æ— å¤„ä¸åœ¨\n- å¦–å…½ä¸ä¼šå› ä¸ºç©å®¶æ˜¯ä¸»è§’å°±æ‰‹ä¸‹ç•™æƒ…\n- æ•£ä¿®è¢«è¿½æ€æ˜¯å¸¸æ€\n- èµ°é”™ä¸€æ­¥å¯èƒ½ä¸‡åŠ«ä¸å¤\n- ä¿¡é”™ä¸€äººå¯èƒ½å®¶ç ´äººäº¡\n\n## åˆ¤å®šå€¾å‘\n\n### æˆåŠŸç‡è°ƒæ•´\n- æ™®é€šéš¾åº¦è¡ŒåŠ¨ï¼š50-70%æˆåŠŸç‡\n- é«˜éš¾åº¦è¡ŒåŠ¨ï¼š20-40%æˆåŠŸç‡\n- é€†å¤©è¡ŒåŠ¨ï¼š5-15%æˆåŠŸç‡\n- ä½œæ­»è¡ŒåŠ¨ï¼š0-5%æˆåŠŸç‡\n\n### å¤±è´¥åæœ\n- æˆ˜æ–—å¤±è´¥ï¼šå—ä¼¤ã€è¢«ä¿˜ã€æ­»äº¡\n- äº¤æ¶‰å¤±è´¥ï¼šå¾—ç½ªäººã€è¢«è®°æ¨ã€ç»“ä»‡\n- ä¿®ç‚¼å¤±è´¥ï¼šèµ°ç«å…¥é­”ã€ç»è„‰å—æŸã€å¢ƒç•Œè·Œè½\n- æ¢ç´¢å¤±è´¥ï¼šé™·å…¥é™©å¢ƒã€è§¦å‘æœºå…³ã€æƒŠåŠ¨å¼ºæ•Œ\n\n### è¿é”ååº”\nç©å®¶çš„å¤±è´¥ä¼šäº§ç”Ÿåç»­å½±å“ï¼š\n- å—ä¼¤å½±å“åç»­æˆ˜åŠ›\n- å¾—ç½ªäººä¼šè¢«è®°ä»‡æŠ¥å¤\n- æš´éœ²ä¼šè¢«è¿½æ€\n- å¤±è´¥çš„åå£°ä¼šä¼ æ’­\n\n## ç©å®¶æˆé•¿æ›²çº¿\n\n### æ—©æœŸï¼ˆå‡¡äºº~ç»ƒæ°”ï¼‰\n- æåº¦å±é™©ï¼Œä¸€ä¸å°å¿ƒå°±æ­»\n- èµ„æºæåº¦åŒ®ä¹\n- å¤„å¤„å—åˆ¶äºäºº\n- éœ€è¦è°¨å°æ…å¾®\n\n### ä¸­æœŸï¼ˆç­‘åŸº~é‡‘ä¸¹ï¼‰\n- æœ‰ä¸€å®šè‡ªä¿èƒ½åŠ›\n- ä½†ä»ç„¶æ˜¯å°è§’è‰²\n- å¤§åŠ¿åŠ›éšæ‰‹å¯ç­\n- éœ€è¦èƒŒé å¤§æ ‘\n\n### åæœŸï¼ˆå…ƒå©´åŠä»¥ä¸Šï¼‰\n- å¼€å§‹æœ‰è¯è¯­æƒ\n- ä½†é¢ä¸´æ›´å¤§çš„åšå¼ˆ\n- é«˜å¤„ä¸èƒœå¯’\n- æ•Œäººæ›´åŠ å¼ºå¤§\n\n## å…¬å¹³åŸåˆ™\néš¾åº¦é«˜ä¸ä»£è¡¨ä¸å…¬å¹³ï¼š\n- ç»™ç©å®¶åˆç†çš„ä¿¡æ¯åšåˆ¤æ–­\n- å±é™©æœ‰è¿¹å¯å¾ªï¼ˆæ°”æ¯ã€æ°›å›´ã€æƒ…æŠ¥ï¼‰\n- è°¨æ…çš„ç©å®¶å¯ä»¥è§„é¿å¤§éƒ¨åˆ†å±é™©\n- æ™ºæ…§å’Œç­–ç•¥å¯ä»¥å¼¥è¡¥å®åŠ›å·®è·ï¼ˆæœ‰é™åº¦ï¼‰\n'.trim(),T='\n# å®—é—¨ç³»ç»Ÿè§„åˆ™\n\n## èŒä½ä½“ç³»\nè®°åå¼Ÿå­ â†’ å¤–é—¨å¼Ÿå­ â†’ å†…é—¨å¼Ÿå­ â†’ çœŸä¼ å¼Ÿå­ â†’ æ ¸å¿ƒå¼Ÿå­ â†’ é•¿è€\n- æ™‹å‡éœ€è¦ï¼šå¢ƒç•Œè¾¾æ ‡ + è´¡çŒ®ç§¯ç´¯ + è€ƒæ ¸/æœºç¼˜\n- å¤–é—¨â†’å†…é—¨é€šå¸¸éœ€ç­‘åŸºï¼Œå†…é—¨â†’çœŸä¼ éœ€é•¿è€æ”¶å¾’æˆ–ç«‹å¤§åŠŸ\n\n## è´¡çŒ®ä¸å…‘æ¢\n- **è·å–**: å®Œæˆä»»åŠ¡ã€ä¸Šäº¤èµ„æºã€ç«‹åŠŸ\n- **æ¶ˆè€—**: å…‘æ¢åŠŸæ³•/ä¸¹è¯/è£…å¤‡/ä¿®ç‚¼èµ„æº\n- åŠŸæ³•å“è´¨å—èŒä½é™åˆ¶ï¼ˆå¤–é—¨åªèƒ½å­¦é»„å“ä»¥ä¸‹ï¼Œå†…é—¨ç„å“ä»¥ä¸‹...ï¼‰\n\n## è—ç»é˜åˆ†å±‚\n- ä¸€å±‚(å¤–é—¨): åŸºç¡€åŠŸæ³• | äºŒå±‚(å†…é—¨): ä¸­çº§ | ä¸‰å±‚(çœŸä¼ ): é«˜çº§ | ç¦åŒº(æ ¸å¿ƒ+ä»¤ç‰Œ): é•‡æ´¾ç»å­¦\n\n## æŒ‡ä»¤è§„èŒƒ\nåŠ å…¥å®—é—¨: `set æ¸¸æˆçŠ¶æ€.å®—é—¨ä¿¡æ¯ {å®—é—¨åç§°,èŒä½,è´¡çŒ®:0,...}`\næ™‹å‡èŒä½: `set æ¸¸æˆçŠ¶æ€.å®—é—¨ä¿¡æ¯.èŒä½ "å†…é—¨å¼Ÿå­"`\nå¢å‡è´¡çŒ®: `add æ¸¸æˆçŠ¶æ€.å®—é—¨ä¿¡æ¯.è´¡çŒ® Â±æ•°å€¼`\n\n## å™äº‹åŸåˆ™\n- èµ„æºéœ€ä»˜å‡ºä»£ä»·ï¼Œå®—é—¨éæ…ˆå–„æœºæ„\n- å†…éƒ¨æœ‰ç«äº‰å’Œæ´¾ç³»ï¼Œç«™é˜Ÿå½±å“å‘å±•\n- è¿åé—¨è§„ä¼šå—æƒ©ç½šï¼ˆç¦é—­/é™èŒ/é€å‡ºï¼‰\n'.trim(),B="\n# åˆ¤å®šé£é™©è§„åˆ™\n\n## æˆ˜æ–—\n- å¤§å¢ƒç•Œå·®=ç§’æ€ï¼ŒåŒé˜¶çœ‹åŠŸæ³•+æ³•å®+éª°å­\n- æ°”è¡€æ‰£é™¤: è½»ä¼¤-10~20% | é‡ä¼¤-30~50% | æ¿’æ­»-60~80%\n- å‡ºæ‹›æ¶ˆè€—çµæ°”(æ™®é€š5~10%,å¤§æ‹›20~40%)\n\n## ç‚¼ä¸¹ç‚¼å™¨\n- éš¾åº¦ï¼šå‡¡20/é»„35/ç„50/åœ°70/å¤©90\n- å¤±è´¥=ææ–™æŸè€—ï¼Œå¤§å¤±è´¥=å…¨æ¯\n\n## ä¿®ç‚¼çªç ´\n- èµ°ç«å…¥é­”: å¼ºè¡Œçªç ´/é‚ªåŠŸ â†’ ç»è„‰æŸ/ä¿®ä¸ºé€€\n- å¿ƒé­”: æ‰§å¿µæ·±/æ€å­½é‡ â†’ çªç ´å¤±è´¥\n- å¤©åŠ«: æ¸¡åŠ«å¿…ç»ï¼Œå¤±è´¥=å½¢ç¥ä¿±ç­\n\n## åˆ¤å®šè¾“å‡ºï¼ˆé“å¾‹ï¼‰\n**ç¦æ­¢åœ¨textä¸­æè¿°åˆ¤å®šè¿‡ç¨‹ï¼åªè¾“å‡ºã€–ã€—å¡ç‰‡ï¼**\n".trim(),I='\n# åŠŸæ³•ä¿®ç‚¼ä¸çªç ´ç³»ç»Ÿ\n\n## ä¿®ç‚¼æ–¹å¼\n### æ™®é€šä¿®ç‚¼\n- æ—¥å¸¸ä¿®ç‚¼ï¼Œæ¯å›åˆæå‡å°‘é‡ç†Ÿç»ƒåº¦(1-5%)\n- æ— é£é™©ï¼Œç¨³æ­¥æ¨è¿›\n\n### é—­å…³ä¿®ç‚¼\n- æ¶ˆè€—æ›´å¤šæ—¶é—´(æ•°å¤©åˆ°æ•°æœˆ)\n- ç†Ÿç»ƒåº¦æå‡æ•ˆç‡ç¿»å€(æ¯å›åˆ5-15%)\n- éœ€è¦å®‰å…¨åœºæ‰€å’Œè¶³å¤Ÿèµ„æº\n- æœŸé—´æ— æ³•å¤„ç†å¤–äº‹\n\n### æ·±åº¦æ„Ÿæ‚Ÿ\n- å¯¹åŠŸæ³•ä¸­çš„æŸä¸ªæŠ€èƒ½è¿›è¡Œæ·±åº¦é¢†æ‚Ÿ\n- æœ‰æ¦‚ç‡è§¦å‘é¡¿æ‚Ÿï¼Œå¤§å¹…æå‡ç†Ÿç»ƒåº¦\n- éœ€è¦æ¶ˆè€—çµçŸ³æˆ–ä¸¹è¯è¾…åŠ©\n\n## æŠ€èƒ½è§£é”\n- åŠŸæ³•åŒ…å«å¤šä¸ªæŠ€èƒ½ï¼ŒæŒ‰ç†Ÿç»ƒåº¦é˜ˆå€¼è§£é”\n- ç†Ÿç»ƒåº¦è¾¾åˆ°æŠ€èƒ½è¦æ±‚æ—¶è‡ªåŠ¨è§£é”\n- è§£é”åéœ€ç»ƒä¹ æ‰èƒ½ç†Ÿç»ƒè¿ç”¨\n\n## åŠŸæ³•çªç ´\n- ç†Ÿç»ƒåº¦è¾¾åˆ°100%åå¯å°è¯•çªç ´\n- çªç ´æˆåŠŸï¼šåŠŸæ³•è¿›é˜¶ï¼Œå¨åŠ›å¤§å¢\n- çªç ´å¤±è´¥ï¼šç†Ÿç»ƒåº¦å€’é€€ï¼Œå¯èƒ½å—ä¼¤\n\n## æŒ‡ä»¤è§„èŒƒ\nä¿®ç‚¼å¢åŠ ç†Ÿç»ƒåº¦: `add è§’è‰².èƒŒåŒ….ç‰©å“.[åŠŸæ³•ID].ä¿®ç‚¼è¿›åº¦ 5`\nè§£é”æŠ€èƒ½: `push è§’è‰².èƒŒåŒ….ç‰©å“.[åŠŸæ³•ID].å·²è§£é”æŠ€èƒ½ "æŠ€èƒ½å"`\n'.trim(),z="\n# ä¸‰åƒå¤§é“æ„Ÿæ‚Ÿç³»ç»Ÿ\n\n## æ„Ÿæ‚Ÿæ–¹å¼\n### æ—¥å¸¸æ„Ÿæ‚Ÿ\n- åœ¨ä¿®ç‚¼/æˆ˜æ–—/æ—¥å¸¸ä¸­è‡ªç„¶ç§¯ç´¯æ„Ÿæ‚Ÿ\n- æ¯æ¬¡å°‘é‡å¢åŠ å¤§é“ç»éªŒ(10-50ç‚¹)\n\n### æ‰“åå‚æ‚Ÿ\n- ä¸“é—¨è¿›å…¥å†¥æƒ³çŠ¶æ€å‚æ‚Ÿå¤§é“\n- æ•ˆç‡æ›´é«˜(50-200ç‚¹/å›åˆ)\n- éœ€è¦é™å¿ƒï¼Œæ˜“è¢«æ‰“æ–­\n\n### æœºç¼˜é¡¿æ‚Ÿ\n- ç‰¹æ®Šäº‹ä»¶è§¦å‘ï¼Œå¤§å¹…å¢åŠ ç»éªŒ\n- å¦‚æˆ˜æ–—ä¸­æ„Ÿæ‚Ÿå‰‘é“ã€æ¿’æ­»ä¸­æ„Ÿæ‚Ÿç”Ÿæ­»é“\n\n## å¤§é“é˜¶æ®µ\næ¯ç§å¤§é“æœ‰å¤šä¸ªé˜¶æ®µï¼Œéœ€ç§¯ç´¯è¶³å¤Ÿç»éªŒæ‰èƒ½çªç ´ï¼š\n1. åˆçª¥é—¨å¾„(100ç»éªŒ)\n2. å°æœ‰æ‰€æˆ(500ç»éªŒ)\n3. ç•¥æœ‰å¿ƒå¾—(1500ç»éªŒ)\n4. ç™»å ‚å…¥å®¤(4000ç»éªŒ)\n5. èä¼šè´¯é€š(10000ç»éªŒ)\n6. å¤§é“å°†æˆ(25000ç»éªŒ)\n7. é“ä¹‹åœ†æ»¡(æéš¾)\n\n## å¤§é“çªç ´\n- ç»éªŒè¾¾åˆ°é˜¶æ®µè¦æ±‚åå¯å°è¯•çªç ´\n- æˆåŠŸï¼šè¿›å…¥æ–°é˜¶æ®µï¼Œè·å¾—æ–°èƒ½åŠ›\n- å¤±è´¥ï¼šç»éªŒå€’é€€ï¼Œéœ€é‡æ–°ç§¯ç´¯\n\n## æŒ‡ä»¤è§„èŒƒ\nå¢åŠ ç»éªŒ: `add è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.[é“å].å½“å‰ç»éªŒ 100`\nçªç ´é˜¶æ®µ: `add è§’è‰².å¤§é“.å¤§é“åˆ—è¡¨.[é“å].å½“å‰é˜¶æ®µ 1`\n".trim(),M='\n# ä»»åŠ¡ç³»ç»Ÿè§„åˆ™\n\n## ä»»åŠ¡ç±»å‹\n- **å®—é—¨ä»»åŠ¡**: å®—é—¨å‘å¸ƒçš„ä»»åŠ¡ï¼Œå®Œæˆè·å¾—è´¡çŒ®ç‚¹\n- **å¥‡é‡ä»»åŠ¡**: æ¢ç´¢ä¸­è§¦å‘çš„æœºç¼˜ä»»åŠ¡\n- **æ—¥å¸¸ä»»åŠ¡**: æ¯æ—¥å¯é‡å¤çš„åŸºç¡€ä»»åŠ¡\n- **ä¿®ä¸ºæå‡**: ä¸“æ³¨äºæå‡å¢ƒç•Œçš„ä»»åŠ¡\n- **æ”¶é›†èµ„æº**: æ”¶é›†ç‰¹å®šææ–™çš„ä»»åŠ¡\n- **æˆ˜æ–—æŒ‘æˆ˜**: å‡»è´¥ç‰¹å®šæ•Œäººçš„ä»»åŠ¡\n\n## ä»»åŠ¡çŠ¶æ€\n- å¾…æ¥å–: ä»»åŠ¡å·²ç”Ÿæˆï¼Œç­‰å¾…ç©å®¶æ¥å–\n- è¿›è¡Œä¸­: ç©å®¶å·²æ¥å–ï¼Œæ­£åœ¨æ‰§è¡Œ\n- å·²å®Œæˆ: æ‰€æœ‰ç›®æ ‡è¾¾æˆ\n- å·²æ”¾å¼ƒ: ç©å®¶ä¸»åŠ¨æ”¾å¼ƒ\n\n## ä»»åŠ¡ç›®æ ‡\næ¯ä¸ªä»»åŠ¡åŒ…å«1-5ä¸ªç›®æ ‡ï¼Œç›®æ ‡ç±»å‹ï¼š\n- å‡»æ€: æ¶ˆç­æŒ‡å®šæ•°é‡çš„æ•Œäºº\n- æ”¶é›†: è·å¾—æŒ‡å®šç‰©å“\n- åˆ°è¾¾: å‰å¾€æŒ‡å®šåœ°ç‚¹\n- äº¤è°ˆ: ä¸æŒ‡å®šNPCå¯¹è¯\n- ä¿®ç‚¼: è¾¾åˆ°æŒ‡å®šä¿®ä¸ºè¿›åº¦\n\n## ä»»åŠ¡å¥–åŠ±\n- ä¿®ä¸º: æå‡å¢ƒç•Œè¿›åº¦\n- çµçŸ³: ä¸åŒå“çº§çš„çµçŸ³\n- ç‰©å“: ä¸¹è¯/è£…å¤‡/ææ–™ç­‰\n- å£°æœ›: åœ¨ç‰¹å®šåŠ¿åŠ›çš„å£°æœ›\n- å±æ€§: æ°¸ä¹…å±æ€§åŠ æˆ(ç½•è§)\n\n## æŒ‡ä»¤è§„èŒƒ\næ›´æ–°ä»»åŠ¡è¿›åº¦: `add ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨[ç´¢å¼•].ç›®æ ‡åˆ—è¡¨[ç›®æ ‡ç´¢å¼•].å½“å‰è¿›åº¦ 1`\nå®Œæˆä»»åŠ¡: `set ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨[ç´¢å¼•].ä»»åŠ¡çŠ¶æ€ "å·²å®Œæˆ"`\n'.trim(),P="\n# äººæ—å¢ƒç•Œå±æ€§æ ‡å‡† (Human Realm Stats Standard)\n\n- ç»Ÿä¸€é˜¶æ®µï¼šåˆæœŸ/ä¸­æœŸ/åæœŸ/åœ†æ»¡/æå¢ƒ\n- ä¸‹è¡¨ä¸ºå„å¢ƒç•Œå¤§åœ†æ»¡æ—¶çš„å‚è€ƒå€¼ï¼Œå¯æ ¹æ®å¤©èµ„ã€åŠŸæ³•ç­‰æµ®åŠ¨ã€‚\n\n| å¢ƒç•Œ(å¤§åœ†æ»¡) | å¯¿å‘½ä¸Šé™ | æ°”è¡€ä¸Šé™ | çµåŠ›ä¸Šé™ | ç¥è¯†ä¸Šé™ |\n|---|---|---|---|---|\n| å‡¡äºº | 100 | 100 | 0 | 0 |\n| ç‚¼æ°” | 120 | 200 | 500 | 100 |\n| ç­‘åŸº | 250 | 1,000 | 5,000 | 1,000 |\n| é‡‘ä¸¹ | 500 | 3,000 | 15,000 | 5,000 |\n| å…ƒå©´ | 1,000 | 8,000 | 50,000 | 15,000 |\n| åŒ–ç¥ | 3,000 | 20,000 | 150,000 | 50,000 |\n| ç‚¼è™š | 8,000 | 50,000 | 500,000 | 150,000 |\n| åˆä½“ | 15,000 | 100,000 | 1,500,000 | 500,000 |\n| æ¸¡åŠ« | 30,000 | 300,000 | 5,000,000 | 1,500,000 |\n".trim(),R='\n# å“è´¨ç³»ç»Ÿ (Quality System)\n\n- æ ¼å¼: `{"quality":"å‡¡|é»„|ç„|åœ°|å¤©|ä»™|ç¥","grade":0-10}`\n- **å‡¡/é»„**: å¼€å±€å¸¸è§\n- **ç„/åœ°**: ä¸­æœŸæ ¸å¿ƒ\n- **å¤©**: é«˜çº§ç¨€æœ‰\n- **ä»™**: é¡¶çº§ä¼ è¯´\n- **ç¥**: ç¦å¿Œä¹‹ç‰©ï¼Œå‡ ä¹ä¸åº”å‡ºç°\n'.trim(),$="\n# å£°æœ›æŒ‡å— (Reputation Guide)\n\n- **æ­£é¢è¡Œä¸º**: å‡»è´¥å¼ºæ•Œ (+10~100), å®Œæˆä»»åŠ¡ (+20~200), æ•‘åŠ©æ°‘ä¼— (+5~50)\n- **è´Ÿé¢è¡Œä¸º**: æ»¥æ€æ— è¾œ (-50~500), èƒŒå›å®—é—¨ (-100~1000), æŠ¢å¤ºè´¢ç‰© (-10~100)\n".trim(),O='\n# è¡ŒåŠ¨é€‰é¡¹è§„èŒƒï¼ˆå¯ç”¨æ—¶ç”Ÿæ•ˆï¼‰\n\n## âš ï¸ å¼ºåˆ¶è¦æ±‚\nå½“ç³»ç»Ÿå¯ç”¨â€œè¡ŒåŠ¨é€‰é¡¹â€åŠŸèƒ½æ—¶ï¼Œä½ å¿…é¡»åœ¨ JSON ä»£ç å—ä¸­è¾“å‡º `action_options` å­—æ®µï¼š\n- ç¦æ­¢çœç•¥ `action_options`\n- å¿…é¡»åŒ…å« 3-5 ä¸ªæœ‰æ•ˆé€‰é¡¹ï¼ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰\n\n## æ ¼å¼è¦æ±‚\n```\n{\n  "action_options": [\n    "å‰å¾€è—ç»é˜æŸ¥é˜…å…¸ç±",\n    "å‘å¸ˆå…„æ‰“å¬å®—é—¨è¿‘å†µ",\n    "åœ¨æ­¤å¤„é—­å…³ä¿®ç‚¼",\n    "æ¥å–å®—é—¨ä»»åŠ¡å†ç»ƒ",\n    "å››å¤„èµ°åŠ¨ç†Ÿæ‚‰ç¯å¢ƒ"\n  ]\n}\n```\n\n- æ•°é‡ï¼š3-5 ä¸ªé€‰é¡¹\n- é•¿åº¦ï¼šæ¯ä¸ªé€‰é¡¹ 8-20 å­—\n- æ ¼å¼ï¼šåŠ¨è¯å¼€å¤´çš„è¡ŒåŠ¨æè¿°\n\n{{CUSTOM_ACTION_PROMPT}}\n\n## ç”Ÿæˆè§„åˆ™\nåŸºäºå½“å‰åœºæ™¯ç”Ÿæˆå¤šæ ·åŒ–é€‰é¡¹ï¼Œè¦†ç›–ä»¥ä¸‹æ–¹å‘ï¼š\n1. **ä¿å®ˆé€‰é¡¹** - è§‚å¯Ÿ/ç­‰å¾…/é˜²å¾¡/ä¼‘æ¯\n2. **ä¸­ç«‹é€‰é¡¹** - äº¤æµ/è¯¢é—®/äº†è§£æƒ…å†µ\n3. **ç§¯æé€‰é¡¹** - æ¢ç´¢/è¡ŒåŠ¨/å‰è¿›\n4. **ç‰¹æ®Šé€‰é¡¹** - åŸºäºå½“å‰æƒ…å¢ƒçš„ç‹¬ç‰¹é€‰æ‹©\n\n## ç¦æ­¢äº‹é¡¹\n- âŒ çœç•¥ action_options å­—æ®µ\n- âŒ action_options ä¸ºç©ºæ•°ç»„\n- âŒ åªæœ‰1-2ä¸ªé€‰é¡¹\n- âŒ é‡å¤ç›¸ä¼¼çš„é€‰é¡¹ï¼ˆå¦‚"ç»§ç»­ä¿®ç‚¼"å’Œ"æ¥ç€ä¿®ç‚¼"ï¼‰\n- âŒ æ— æ³•æ‰§è¡Œçš„é€‰é¡¹\n- âŒ æ›¿ç©å®¶åšå†³å®šçš„é€‰é¡¹ï¼ˆå¦‚"å†³å®šåŠ å…¥"ï¼‰\n'.trim(),L='\n# è§„åˆ™ï¼šä»»åŠ¡ç³»ç»Ÿ\n\n## ç³»ç»Ÿå¼€å…³ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰\nç”Ÿæˆä»»åŠ¡å‰å¿…é¡»æ£€æŸ¥ï¼š`SaveData.ç¤¾äº¤.ä»»åŠ¡.é…ç½®.å¯ç”¨ç³»ç»Ÿä»»åŠ¡ === true`\n\n## è§¦å‘æ¡ä»¶ï¼ˆå¿…é¡»åŒæ—¶æ»¡è¶³ï¼‰\n1. **ç³»ç»Ÿå¼€å…³å·²å¯ç”¨**\n2. **ç©å®¶æ˜ç¡®æ„å›¾**ï¼šè¾“å…¥åŒ…å«"ä»»åŠ¡"/"ä»»åŠ¡æ¦œ"/"æ¥ä»»åŠ¡"ç­‰å…³é”®è¯\n3. **ä»»åŠ¡åˆ—è¡¨æœªæ»¡**ï¼šå½“å‰ä»»åŠ¡æ•°é‡ < `SaveData.ç¤¾äº¤.ä»»åŠ¡.é…ç½®.é»˜è®¤ä»»åŠ¡æ•°é‡`\n\n## ç³»ç»Ÿå…³é—­æ—¶ä¸¥ç¦\n- ç”Ÿæˆä»»ä½•ä»»åŠ¡å¯¹è±¡\n- åœ¨textä¸­æåŠ"ä»»åŠ¡æ¦œ"/"æ¥å–ä»»åŠ¡"/"ä»»åŠ¡å¥–åŠ±"\n- ä½¿ç”¨ `push` åˆ° `ç¤¾äº¤.ä»»åŠ¡.å½“å‰ä»»åŠ¡åˆ—è¡¨`\n\n## ä»»åŠ¡ç”Ÿæˆè§„èŒƒ\n- **æ•°é‡**ï¼šéµå¾ª `é…ç½®.é»˜è®¤ä»»åŠ¡æ•°é‡`\n- **ç±»å‹**ï¼šéµå¾ª `é…ç½®.ç³»ç»Ÿä»»åŠ¡ç±»å‹`\n- **è´¨é‡**ï¼šç¬¦åˆå½“å‰å¢ƒç•Œã€åœºæ™¯ã€å‰§æƒ…\n- **é¢‘ç‡**ï¼šç¦æ­¢æ¯å›åˆè‡ªåŠ¨ç”Ÿæˆï¼Œç¦æ­¢ä»…å› "åˆ°è¾¾ä»»åŠ¡å ‚"å°±ç”Ÿæˆ\n'.trim(),F={coreRequest:{name:"æ ¸å¿ƒè¯·æ±‚æç¤ºè¯",description:"æ­£å¸¸æ¸¸æˆè¯·æ±‚æ—¶æŒ‰é¡ºåºå‘é€çš„æç¤ºè¯",icon:"ğŸ“¨"},summary:{name:"æ€»ç»“è¯·æ±‚æç¤ºè¯",description:"è®°å¿†æ€»ç»“æ—¶ä½¿ç”¨çš„æç¤ºè¯",icon:"ğŸ“"},initialization:{name:"å¼€å±€åˆå§‹åŒ–æç¤ºè¯",description:"å¼€å±€æ—¶ä¸–ç•Œç”Ÿæˆå’Œè§’è‰²åˆå§‹åŒ–çš„æç¤ºè¯",icon:"ğŸš€"},generation:{name:"åŠ¨æ€ç”Ÿæˆæç¤ºè¯",description:"æ¸¸æˆä¸­åŠ¨æ€ç”ŸæˆNPC/ä»»åŠ¡/ç‰©å“çš„æç¤ºè¯",icon:"ğŸ¨"},online:{name:"è”æœºæ¨¡å¼æç¤ºè¯",description:"è”æœºæ¨¡å¼ä¸“ç”¨çš„è§„åˆ™å’Œé™åˆ¶æç¤ºè¯",icon:"ğŸŒ"}},j=[p,f,g,h].join("\n\n"),U=[C,A,D,v,y,S,V,B,_].join("\n\n"),q=[b,x,k,w,E,N,T,I,z,M].join("\n\n"),G=[o,i,s,l].join("\n\n"),H=[P,R,$].join("\n\n");function Y(){const e=(0,m.isTavernEnv)();return{coreOutputRules:{name:"1. è¾“å‡ºæ ¼å¼",content:j,category:"coreRequest",description:"JSONæ ¼å¼ã€æ•°æ®åŒæ­¥",order:1,weight:10},businessRules:{name:"2. æ ¸å¿ƒè§„åˆ™",content:U,category:"coreRequest",description:"å¢ƒç•Œã€NPCã€æˆ˜æ–—è§„åˆ™",order:2,weight:9},extendedBusinessRules:{name:"2.5 æ‰©å±•è§„åˆ™",content:q,category:"coreRequest",description:"å¤§é“ã€å®—é—¨ç­‰æ‰©å±•",order:2.5,weight:5},dataDefinitions:{name:"3. æ•°æ®ç»“æ„",content:(0,a.lS)(e),category:"coreRequest",description:"å­˜æ¡£ç»“æ„å®šä¹‰",order:3,weight:10},textFormatRules:{name:"4. æ–‡æœ¬æ ¼å¼",content:G,category:"coreRequest",description:"åˆ¤å®šã€ä¼¤å®³ã€å‘½å",order:4,weight:6},worldStandards:{name:"5. ä¸–ç•Œæ ‡å‡†",content:H,category:"coreRequest",description:"å¢ƒç•Œå±æ€§ã€å“è´¨",order:5,weight:7},onlineModeRules:{name:"è”æœºè§„åˆ™",content:"# è”æœºæ¨¡å¼\n- å…±äº«ä¸–ç•Œï¼Œç©å®¶è¡Œä¸ºå½±å“ä»–äºº\n- ç¦æ­¢ä¿®æ”¹ä¸–ç•Œè®¾å®š/é‡è¦NPC\n- ç¦æ­¢è·¨åŒºåŸŸç¬ç§»\n- ç©¿è¶Šæ¶ˆè€—ç©¿è¶Šç‚¹ï¼Œå—ç›®æ ‡ä¸–ç•Œçº¦æŸ",category:"online",description:"è”æœºæ¨¡å¼é™åˆ¶",order:1,weight:8},onlineWorldSync:{name:"è”æœºä¸–ç•ŒåŒæ­¥",content:"# è”æœºä¸–ç•ŒåŒæ­¥è§„åˆ™\n- ä¸–ç•ŒçŠ¶æ€ç”±æœåŠ¡å™¨æƒå¨ç®¡ç†\n- ç©å®¶å¯¹ä¸–ç•Œçš„å½±å“éœ€é€šè¿‡äº‹ä»¶å¹¿æ’­\n- NPCçŠ¶æ€å˜æ›´éœ€åŒæ­¥åˆ°æ‰€æœ‰åœ¨åœºç©å®¶\n- å¤§å‹äº‹ä»¶éœ€å…¨æœå…¬å‘Š",category:"online",description:"ä¸–ç•ŒåŒæ­¥æœºåˆ¶",order:2,weight:7},onlineInteraction:{name:"è”æœºäº¤äº’",content:"# è”æœºç©å®¶äº¤äº’\n- åŒåŒºåŸŸç©å®¶å¯è§å¯äº¤äº’\n- äº¤æ˜“éœ€åŒæ–¹ç¡®è®¤\n- PVPéœ€åŒæ–¹åŒæ„æˆ–ç‰¹å®šåŒºåŸŸ\n- ç»„é˜Ÿå…±äº«éƒ¨åˆ†å¥–åŠ±",category:"online",description:"ç©å®¶äº¤äº’è§„åˆ™",order:3,weight:6},cotCore:{name:"6. è‡ªæ£€åè®®",content:c("{{ç”¨æˆ·è¾“å…¥}}",!1),category:"coreRequest",description:"ç¦æ­¢æ€ç»´é“¾è¾“å‡º",order:6,weight:8},actionOptions:{name:"7. è¡ŒåŠ¨é€‰é¡¹",content:O,category:"coreRequest",description:"ç”Ÿæˆç©å®¶é€‰é¡¹",order:7,weight:6},questSystemRules:{name:"8. ä»»åŠ¡ç³»ç»Ÿ",content:L,category:"coreRequest",description:"ä»»åŠ¡è§¦å‘æ§åˆ¶",order:8,weight:5},splitGenerationStep1:{name:"9. åˆ†æ­¥æ­£æ–‡",content:"# åˆ†æ­¥ç”Ÿæˆ 1/2ï¼šæ­£æ–‡\nç¦æ­¢ï¼š<thinking>/JSON/å­—æ®µå/è§£é‡Š\nåªè¾“å‡ºï¼šçº¯æ–‡æœ¬å°è¯´æ­£æ–‡\nè¦æ±‚ï¼šæ‰¿æ¥æƒ…èŠ‚ã€å¤šæå†™å°‘æ€»ç»“ã€ç»“å°¾ç•™é’©å­".trim(),category:"coreRequest",description:"åˆ†æ­¥æ¨¡å¼ç¬¬1æ­¥",order:9,weight:7},splitGenerationStep2:{name:"10. åˆ†æ­¥æŒ‡ä»¤",content:"# åˆ†æ­¥ç”Ÿæˆ 2/2ï¼šJSONæŒ‡ä»¤\nç¦æ­¢ï¼šæ­£æ–‡/textå­—æ®µ/<thinking>\nåªè¾“å‡ºï¼š{mid_term_memory, tavern_commands, action_options}".trim(),category:"coreRequest",description:"åˆ†æ­¥æ¨¡å¼ç¬¬2æ­¥",order:10,weight:7},splitInitStep1:{name:"11. å¼€å±€æ­£æ–‡",content:"# å¼€å±€åˆ†æ­¥ 1/2ï¼šæ­£æ–‡\nç¦æ­¢ï¼š<thinking>/JSON/æŒ‡ä»¤\nåªè¾“å‡ºï¼šå¼€å±€çº¯æ–‡æœ¬æ­£æ–‡\nè¦æ±‚ï¼šäº¤ä»£åœºæ™¯ã€ç»“å°¾ç•™é’©å­".trim(),category:"coreRequest",description:"å¼€å±€åˆ†æ­¥ç¬¬1æ­¥",order:11,weight:7},splitInitStep2:{name:"12. å¼€å±€æŒ‡ä»¤",content:"# å¼€å±€åˆ†æ­¥ 2/2ï¼šJSONæŒ‡ä»¤\nç¦æ­¢ï¼šæ­£æ–‡/text/<thinking>\nåªè¾“å‡ºï¼š{mid_term_memory, tavern_commands, action_options}".trim(),category:"coreRequest",description:"å¼€å±€åˆ†æ­¥ç¬¬2æ­¥",order:12,weight:7},memorySummary:{name:"è®°å¿†æ€»ç»“",content:'è®°å¿†æ€»ç»“åŠ©æ‰‹ã€‚ç¬¬ä¸€äººç§°"æˆ‘"ï¼Œ250-400å­—ï¼Œä¿ç•™äººå/åœ°å/äº‹ä»¶/ç‰©å“/å¢ƒç•Œï¼Œå¿½ç•¥å¯¹è¯/æƒ…ç»ª/ç»†èŠ‚ã€‚\nè¾“å‡ºï¼š{"text": "æ€»ç»“å†…å®¹"}',category:"summary",description:"ä¸­æœŸâ†’é•¿æœŸè®°å¿†",order:1,weight:6},npcMemorySummary:{name:"NPCè®°å¿†æ€»ç»“",content:'NPCè®°å¿†æ€»ç»“ã€‚ç¬¬ä¸‰äººç§°ï¼Œ100-200å­—ï¼Œä¿ç•™å…³é”®äº‹ä»¶å’Œæƒ…æ„Ÿå˜åŒ–ã€‚\nè¾“å‡ºï¼š{"text": "æ€»ç»“å†…å®¹"}',category:"summary",description:"NPCè®°å¿†æ€»ç»“",order:2,weight:5},npcGeneration:{name:"NPCç”Ÿæˆ",content:"ç”Ÿæˆä¿®ä»™ä¸–ç•ŒNPCã€‚è¦æ±‚ï¼š2-3å­—å§“åã€æ€§æ ¼é²œæ˜ã€èƒŒæ™¯åˆç†ã€å¢ƒç•Œæ˜ç¡®ã€‚\nè¾“å‡ºJSONï¼š{å§“å,æ€§åˆ«,å¹´é¾„,å¢ƒç•Œ:{åç§°,é˜¶æ®µ},æ€§æ ¼,å¤–è²Œ,èƒŒæ™¯,è¯´è¯é£æ ¼,åˆå§‹å¥½æ„Ÿåº¦:50}",category:"generation",description:"åŠ¨æ€ç”ŸæˆNPC",order:1,weight:5},questGeneration:{name:"ä»»åŠ¡ç”Ÿæˆ",content:"ç”Ÿæˆä¿®ä»™ä¸–ç•Œä»»åŠ¡ã€‚è¦æ±‚ï¼šä¿®ä»™ç‰¹è‰²åç§°ã€ç›®æ ‡å¯é‡åŒ–ã€å¥–åŠ±åˆç†ã€éš¾åº¦åŒ¹é…å¢ƒç•Œã€‚\nè¾“å‡ºJSONï¼š{ä»»åŠ¡ID,ä»»åŠ¡åç§°,ä»»åŠ¡æè¿°,ä»»åŠ¡ç±»å‹,ç›®æ ‡åˆ—è¡¨,å¥–åŠ±,æ—¶é™,éš¾åº¦}",category:"generation",description:"åŠ¨æ€ç”Ÿæˆä»»åŠ¡",order:2,weight:5},itemGeneration:{name:"ç‰©å“ç”Ÿæˆ",content:"ç”Ÿæˆä¿®ä»™ä¸–ç•Œç‰©å“ã€‚å“è´¨ï¼šå‡¡(1-3)/é»„(4-5)/ç„(6-7)/åœ°(8-9)/å¤©(10)ã€‚\nè¾“å‡ºJSONï¼š{ç‰©å“ID,åç§°,ç±»å‹,å“è´¨:{quality,grade},æè¿°,æ•°é‡,æ•ˆæœ}",category:"generation",description:"åŠ¨æ€ç”Ÿæˆç‰©å“",order:3,weight:5},worldGeneration:{name:"ä¸–ç•Œç”Ÿæˆ",content:d.c.buildPrompt({factionCount:5,totalLocations:10,secretRealms:3,continentCount:3}),category:"initialization",description:"ç”Ÿæˆå¤§é™†ã€åŠ¿åŠ›ã€åœ°ç‚¹",order:1,weight:8},characterInit:{name:"è§’è‰²åˆå§‹åŒ–",content:(0,r.q5)(e),category:"initialization",description:"ç”Ÿæˆè§’è‰²å’Œå¼€åœº",order:2,weight:9},newbieGuide:{name:"æ–°æ‰‹å¼•å¯¼",content:"æ–°æ‰‹å¼•å¯¼ï¼ˆå‰3å›åˆï¼‰ã€‚åŸåˆ™ï¼šè‡ªç„¶èå…¥å™äº‹ï¼Œä¸æ‰“ç ´æ²‰æµ¸æ„Ÿï¼Œé€šè¿‡NPCå¯¹è¯ä¼ é€’ã€‚\nå†…å®¹ï¼šè¡ŒåŠ¨æ–¹å¼/æŸ¥çœ‹çŠ¶æ€/ç‰©å“ä½¿ç”¨/äº¤æµ/æ¢ç´¢ã€‚",category:"initialization",description:"è‡ªç„¶æ–°æ‰‹å¼•å¯¼",order:3,weight:4}}}async function W(e){return await u.promptStorage.get(e)}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{"use strict";var e=n(4061),t=n(810),a=n(3992);const r=$;var o=n.n(r),i=n(9037),s=n(9596);const l=(0,s.A)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]]);var c=n(7754),d=n(6748),u=n(3441);const m=(0,s.A)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]),p=(0,s.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]);var f=n(4091);const g=(0,s.A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var h=n(5726),v=n(4270);const b={class:"toast-container"},y={key:0,class:"toast-icon"},x=["innerHTML"],k=(0,e.defineComponent)({__name:"ToastContainer",setup:t=>(t,n)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",b,[(0,e.createVNode)(e.TransitionGroup,{name:"toast-fade",tag:"div"},{default:(0,e.withCtx)(()=>[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)((0,e.unref)(v.T),t=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:t.id,class:(0,e.normalizeClass)(["toast",`toast-${t.type}`])},["loading"===t.type?((0,e.openBlock)(),(0,e.createElementBlock)("div",y,n[0]||(n[0]=[(0,e.createElementVNode)("div",{class:"spinner"},null,-1)]))):(0,e.createCommentVNode)("v-if",!0),(0,e.createElementVNode)("div",{class:"toast-message",innerHTML:t.message},null,8,x)],2))),128))]),_:1})]))});var w=n(5072),E=n.n(w),N=n(7825),S=n.n(N),V=n(7659),_=n.n(V),C=n(5056),A=n.n(C),D=n(540),T=n.n(D),B=n(1113),I=n.n(B),z=n(1547),M={};M.styleTagTransform=I(),M.setAttributes=A(),M.insert=_().bind(null,"head"),M.domAPI=S(),M.insertStyleElement=T(),E()(z.A,M),z.A&&z.A.locals&&z.A.locals;var P=n(6262);const R=(0,P.A)(k,[["__scopeId","data-v-25ec8c07"]]);var O=n(9173);const L={key:0,class:"loading-overlay"},F={class:"loading-content"},j=["innerHTML"],U=(0,e.defineComponent)({__name:"GlobalLoadingOverlay",setup(t){const n=(0,O.useUIStore)();return(t,a)=>((0,e.openBlock)(),(0,e.createBlock)(e.Transition,{name:"fade"},{default:(0,e.withCtx)(()=>[(0,e.unref)(n).isLoading?((0,e.openBlock)(),(0,e.createElementBlock)("div",L,[(0,e.createElementVNode)("div",F,[a[0]||(a[0]=(0,e.createElementVNode)("div",{class:"spinner"},null,-1)),(0,e.createElementVNode)("p",{class:"loading-text",innerHTML:(0,e.unref)(n).loadingText},null,8,j)])])):(0,e.createCommentVNode)("v-if",!0)]),_:1}))}});var q=n(6533),G={};G.styleTagTransform=I(),G.setAttributes=A(),G.insert=_().bind(null,"head"),G.domAPI=S(),G.insertStyleElement=T(),E()(q.A,G),q.A&&q.A.locals&&q.A.locals;const H=(0,P.A)(U,[["__scopeId","data-v-c8648b8a"]]),Y=(0,s.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),W={class:"dialog-header"},X={class:"dialog-content"},J={class:"error-icon"},K={class:"message"},Q={class:"dialog-actions"},Z=(0,e.defineComponent)({__name:"RetryConfirmDialog",setup(t){const n=(0,O.useUIStore)(),a=(0,e.computed)(()=>n.showRetryDialogState),r=(0,e.computed)(()=>n.retryDialogConfig),o=()=>{n.confirmRetry()},i=()=>{n.cancelRetry()};return(t,n)=>a.value?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"retry-dialog-overlay",onClick:i},[(0,e.createElementVNode)("div",{class:"retry-dialog",onClick:n[0]||(n[0]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.createElementVNode)("div",W,[(0,e.createElementVNode)("h3",null,(0,e.toDisplayString)(r.value?.title||t.$t("AIç”Ÿæˆå¤±è´¥")),1)]),(0,e.createElementVNode)("div",X,[(0,e.createElementVNode)("div",J,[(0,e.createVNode)((0,e.unref)(Y),{size:48})]),(0,e.createElementVNode)("p",K,(0,e.toDisplayString)(r.value?.message||t.$t("ç”Ÿæˆè¿‡ç¨‹é‡åˆ°é—®é¢˜")),1)]),(0,e.createElementVNode)("div",Q,[(0,e.createElementVNode)("button",{class:"btn-secondary",onClick:i},(0,e.toDisplayString)(r.value?.cancelText||t.$t("å–æ¶ˆ")),1),(0,e.createElementVNode)("button",{class:"btn-primary",onClick:o},(0,e.toDisplayString)(r.value?.confirmText||t.$t("é‡è¯•")),1)])])])):(0,e.createCommentVNode)("v-if",!0)}});var ee=n(5218),te={};te.styleTagTransform=I(),te.setAttributes=A(),te.insert=_().bind(null,"head"),te.domAPI=S(),te.insertStyleElement=T(),E()(ee.A,te),ee.A&&ee.A.locals&&ee.A.locals;const ne=(0,P.A)(Z,[["__scopeId","data-v-67dbe82b"]]);var ae=n(8684);const re={key:0,class:"dialog-overlay"},oe={class:"dialog-container"},ie={class:"dialog-header"},se={class:"dialog-content"},le={class:"error-list-container"},ce={class:"error-list"},de={class:"content-suggestion"},ue={class:"dialog-actions"},me=(0,e.defineComponent)({__name:"DataValidationErrorDialog",setup(t){const n=(0,O.useUIStore)(),a=()=>{n.confirmDataValidationError()},r=(0,e.computed)(()=>"loading"===n.dataValidationContext?{suggestion:"æˆ‘ä»¬å»ºè®®æ‚¨ç«‹å³ä¿®å¤æ­¤é—®é¢˜ã€‚ä¿®å¤è¿‡ç¨‹å°†å°è¯•åœ¨ä¿ç•™æ‚¨æ ¸å¿ƒè¿›åº¦çš„å‰æä¸‹ï¼Œä¿®æ­£å­˜æ¡£çš„æ•°æ®ç»“æ„ã€‚",warning:"æ³¨æ„ï¼šä¿®å¤ä¸»è¦é’ˆå¯¹ç»“æ„æ€§é—®é¢˜ï¼Œæ— æ³•æ¢å¤å·²æŸåæˆ–ä¸¢å¤±çš„æ•°æ®ã€‚å»ºè®®æ‚¨åœ¨ä¿®å¤å‰å¤‡ä»½å­˜æ¡£ã€‚",buttonText:"ä¿®å¤å­˜æ¡£å¹¶ç»§ç»­"}:{suggestion:"æˆ‘ä»¬å»ºè®®æ‚¨ç«‹å³ä¿®å¤æ­¤é—®é¢˜ã€‚ä¿®å¤è¿‡ç¨‹å°†æ ¹æ®æ‚¨ç°æœ‰çš„è§’è‰²åŸºç¡€ä¿¡æ¯ï¼Œé‡æ–°ç”Ÿæˆä¸€ä»½å¥åº·çš„åˆå§‹å­˜æ¡£æ•°æ®ã€‚",warning:"æ³¨æ„ï¼šè¿™å°†ä¼šé‡ç½®æ‚¨çš„æ¸¸æˆè¿›åº¦ï¼ˆå¦‚ä¿®ä¸ºã€èƒŒåŒ…ç‰©å“ç­‰ï¼‰ï¼Œä½†è§’è‰²æ ¸å¿ƒè®¾å®šï¼ˆå¦‚å§“åã€å¤©èµ‹ã€çµæ ¹ï¼‰å°†ä¿ç•™ã€‚",buttonText:"é‡æ–°åˆå§‹åŒ–å¹¶ä¿®å¤"});return(t,o)=>(0,e.unref)(n).showDataValidationError?((0,e.openBlock)(),(0,e.createElementBlock)("div",re,[(0,e.createElementVNode)("div",oe,[(0,e.createElementVNode)("div",ie,[(0,e.createVNode)((0,e.unref)(Y),{size:28,class:"header-icon"}),o[0]||(o[0]=(0,e.createElementVNode)("h2",{class:"header-title"},"å­˜æ¡£æ•°æ®å¼‚å¸¸",-1))]),(0,e.createElementVNode)("div",se,[o[2]||(o[2]=(0,e.createElementVNode)("p",{class:"content-lead"},"ç³»ç»Ÿæ£€æµ‹åˆ°æ‚¨çš„å­˜æ¡£æ–‡ä»¶å­˜åœ¨ä¸¥é‡ç»“æ„é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´æ¸¸æˆæ— æ³•æ­£å¸¸è¿è¡Œã€‚è¿™é€šå¸¸æ˜¯ç”±äºç‰ˆæœ¬æ›´æ–°æˆ–æ•°æ®æŸåå¯¼è‡´çš„ã€‚",-1)),(0,e.createElementVNode)("div",le,[o[1]||(o[1]=(0,e.createElementVNode)("strong",{class:"error-list-title"},"å…·ä½“é—®é¢˜å¦‚ä¸‹ï¼š",-1)),(0,e.createElementVNode)("ul",ce,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)((0,e.unref)(n).dataValidationErrorMessages,(t,n)=>((0,e.openBlock)(),(0,e.createElementBlock)("li",{key:n,class:"error-item"},(0,e.toDisplayString)(t),1))),128))])]),(0,e.createElementVNode)("p",de,[(0,e.createTextVNode)((0,e.toDisplayString)(r.value.suggestion)+" ",1),(0,e.createElementVNode)("strong",null,(0,e.toDisplayString)(r.value.warning),1)])]),(0,e.createElementVNode)("div",ue,[(0,e.createElementVNode)("button",{class:"action-button confirm-button",onClick:a},[(0,e.createVNode)((0,e.unref)(ae.A),{size:16}),(0,e.createTextVNode)(" "+(0,e.toDisplayString)(r.value.buttonText),1)])])])])):(0,e.createCommentVNode)("v-if",!0)}});var pe=n(8932),fe={};fe.styleTagTransform=I(),fe.setAttributes=A(),fe.insert=_().bind(null,"head"),fe.domAPI=S(),fe.insertStyleElement=T(),E()(pe.A,fe),pe.A&&pe.A.locals&&pe.A.locals;const ge=(0,P.A)(me,[["__scopeId","data-v-7a662fc0"]]);var he=n(2224);function ve(e){return(0,he.isObject)(e)?e.åç§°||e.name||"æ— åç‰©å“":"æœªçŸ¥ç‰©å“"}function be(e){return(0,he.isObject)(e)&&e.æ•°é‡||1}function ye(e){const{key:t,action:n,oldValue:a,newValue:r}=e;if(t.includes("è§’è‰².èƒŒåŒ….ç‰©å“")){if("set"===n&&r&&!a){const e=r;return{icon:"add",color:"green",title:"è·å¾—ç‰©å“",description:`ã€${ve(e)}ã€‘x ${be(e)}`}}if("push"===n){const e=r;return{icon:"add",color:"green",title:"è·å¾—ç‰©å“",description:`ã€${ve(e)}ã€‘x ${be(e)}`}}if("delete"===n||"pull"===n||"set"===n&&!r&&a){const e=a;return{icon:"remove",color:"red",title:"å¤±å»ç‰©å“",description:`ã€${ve(e)}ã€‘x ${be(e)}`}}if("set"===n&&a&&r){const e=be(a),t=be(r);if(e!==t){const n=t-e;return{icon:n>0?"add":"remove",color:n>0?"green":"red",title:n>0?"è·å¾—ç‰©å“":"æ¶ˆè€—ç‰©å“",description:`ã€${ve(r)}ã€‘${n>0?"+":""}${n}`}}}}if(t.startsWith("è§’è‰².èƒŒåŒ….çµçŸ³.")||t.includes(".èƒŒåŒ….çµçŸ³.")){const e=t.split(".").pop()||"çµçŸ³",n=("number"==typeof r?r:0)-("number"==typeof a?a:0);if(n>0)return{icon:"add",color:"green",title:`è·å¾—${e}`,description:`+ ${n}`};if(n<0)return{icon:"remove",color:"red",title:`æ¶ˆè€—${e}`,description:`${n}`}}return null}function xe(e){const{key:t,action:n,oldValue:a,newValue:r}=e;if(!(t.startsWith("è§’è‰².å±æ€§.")||t.startsWith("è§’è‰².ä½ç½®.")||t.includes(".è§’è‰².å±æ€§.")||t.includes(".è§’è‰².ä½ç½®.")||t.includes(".æ°”è¡€")||t.includes(".çµæ°”")||t.includes(".ç¥è¯†")||t.includes(".å¯¿å‘½")))return null;const o=t.split(".").pop()||"å±æ€§";if("è§’è‰².å±æ€§.å¢ƒç•Œ.åç§°"===t||t.endsWith(".å¢ƒç•Œ.åç§°"))return{icon:"add",color:"green",title:"å¢ƒç•Œçªç ´",description:`${a||"å‡¡äºº"} â†’ ${r}`};if("è§’è‰².å±æ€§.å¢ƒç•Œ.é˜¶æ®µ"===t||t.endsWith(".å¢ƒç•Œ.é˜¶æ®µ"))return{icon:"update",color:"blue",title:"å¢ƒç•Œé˜¶æ®µæå‡",description:`${a||"æ— "} â†’ ${r}`};if("è§’è‰².ä½ç½®.æè¿°"===t||t.endsWith(".ä½ç½®.æè¿°")){const e=e=>{if(!e)return"æœªçŸ¥";if("string"==typeof e)return e;if("object"==typeof e&&null!==e){const t=e;if("string"==typeof t.æè¿°)return t.æè¿°;if("string"==typeof t.description)return t.description}return String(e)};return{icon:"update",color:"blue",title:"ä½ç½®å˜æ›´",description:`${e(a)} â†’ ${e(r)}`}}const i=t.split("."),s=i[i.length-1],l=i[i.length-2]||o;if(("ä¸Šé™"===s||"æœ€å¤§"===s)&&"number"==typeof r){const e="number"==typeof a?r-a:r;let t="";return"number"==typeof a?(t=`${a} -> ${r}`,e>0&&(t+=` (+${e})`)):t=`è®¾ä¸º ${r}`,{icon:"update",color:"blue",title:`${l}ä¸Šé™å˜åŒ–`,description:t}}if("å½“å‰"===s&&"number"==typeof r){const e="number"==typeof a?r-a:r;let t="";return"number"==typeof a?(t=`${a} -> ${r}`,e>0&&(t+=` (+${e})`),e<0&&(t+=` (${e})`)):t=`è®¾ä¸º ${r}`,{icon:"update",color:"blue",title:`${l}å½“å‰å€¼å˜åŒ–`,description:t}}if((0,he.isObject)(r)&&"å½“å‰"in r&&(0,he.isObject)(a)&&"å½“å‰"in a){const e=r.å½“å‰-a.å½“å‰,t=r.æœ€å¤§!==a.æœ€å¤§;let n=`${a.å½“å‰} -> ${r.å½“å‰}`;return e>0&&(n+=` (+${e})`),e<0&&(n+=` (${e})`),t&&(n+=` (ä¸Šé™å˜ä¸º ${r.æœ€å¤§})`),{icon:"update",color:"blue",title:`${o}å˜åŒ–`,description:n}}if("number"==typeof r&&"number"==typeof a){const e=r-a;let t=`${a} -> ${r}`;return e>0&&(t+=` (+${e})`),e<0&&(t+=` (${e})`),{icon:"update",color:"blue",title:`${o}å˜åŒ–`,description:t}}return null}function ke(e){const{key:t,action:n,oldValue:a,newValue:r}=e;if(t.startsWith("ç¤¾äº¤.å…³ç³».")||t.includes(".ç¤¾äº¤.å…³ç³».")){const e=t.split("."),o=e[2]||"æŸäºº",i=e[e.length-1];if("å¥½æ„Ÿåº¦"===i&&"number"==typeof a&&"number"==typeof r){const e=r-a;return{icon:e>0?"add":"remove",color:e>0?"green":"red",title:`ã€${o}ã€‘å¥½æ„Ÿåº¦å˜åŒ–`,description:`${a} â†’ ${r} (${e>0?"+":""}${e})`}}if("äººç‰©è®°å¿†"===i&&"push"===n)return{icon:"add",color:"blue",title:`ã€${o}ã€‘è®°å¿†æ›´æ–°`,description:"æ–°å¢äº†å…³äºä½ çš„è®°å¿†"};if("å…³ç³»çŠ¶æ€"===i)return{icon:"update",color:"blue",title:`ã€${o}ã€‘å…³ç³»å˜åŒ–`,description:`${a||"åˆè¯†"} â†’ ${r}`};const s=e.slice(2);if(s.length>0){const e=s.join(".").replace(/\.([0-9]+)(?=\.|$)/g,"[$1]");let t=`'${e}' å·²æ›´æ–°`;return"object"==typeof r&&null!==r||"object"==typeof a&&null!==a||(t=`'${e}' ä» ${JSON.stringify(a)} å˜ä¸º ${JSON.stringify(r)}`),{icon:"update",color:"blue",title:`ã€${o}ã€‘ä¿¡æ¯æ›´æ–°`,description:t}}}return null}function we(e){const{key:t,action:n,newValue:a}=e;if("validation_error"===n&&("âŒ é”™è¯¯æŒ‡ä»¤"===t||"âŒ æ ¼å¼é”™è¯¯ï¼ˆå·²æ‹’ç»ï¼‰"===t)){const e=a,t=e?.errors||[];return{icon:"error",color:"red",title:"âŒ AIæŒ‡ä»¤æ ¼å¼é”™è¯¯",description:"ä»¥ä¸‹æŒ‡ä»¤éªŒè¯å¤±è´¥ï¼Œæœªè¢«æ‰§è¡Œ",details:[`æŒ‡ä»¤å†…å®¹:\n${e?.command||"æœªçŸ¥æŒ‡ä»¤"}`,"\né”™è¯¯åŸå› :",...t.map(e=>`  â€¢ ${e}`)]}}return null}function Ee(e){const{key:t,action:n,oldValue:a,newValue:r}=e;let o="";return o="set"===n||"update"===n?`å€¼ä» ${JSON.stringify(a)} å˜ä¸º ${JSON.stringify(r)}`:"add"===n?`æ•°å€¼å¢åŠ äº† ${r}`:"delete"===n?"ç§»é™¤äº†è¯¥å­—æ®µ":`æ‰§è¡Œäº† ${n} æ“ä½œ`,{icon:"info",color:"gray",title:`æ•°æ®å˜æ›´: ${t}`,description:o}}var Ne=n(8381),Se=n(6494);const Ve=(0,s.A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),_e=(0,s.A)("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);var Ce=n(6680);const Ae=(0,s.A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);var De=n(5976);const Te={class:"state-change-viewer"},Be={class:"viewer-header"},Ie={class:"viewer-summary"},ze={class:"summary-item added"},Me={class:"summary-item removed"},Pe={class:"summary-item updated"},Re={key:0,class:"summary-item errors"},$e={class:"viewer-content"},Oe={key:0,class:"no-changes"},Le={key:1,class:"changes-list"},Fe={class:"item-icon"},je={class:"item-content"},Ue={class:"item-title"},qe={class:"item-description"},Ge={key:0,class:"item-details"},He=(0,e.defineComponent)({__name:"StateChangeViewer",props:{log:{}},emits:["close"],setup(t){const n=t,a=(0,e.computed)(()=>function(e){const t={summary:{added:0,removed:0,updated:0,errors:0},changes:[]};if(!e||!(0,he.isArray)(e.changes))return t;for(const n of e.changes){let e=null;e=we(n),e||(e=ye(n)),e||(e=xe(n)),e||(e=ke(n)),e||(e=Ee(n)),t.changes.push(e),"add"===e.icon?t.summary.added++:"remove"===e.icon?t.summary.removed++:"update"===e.icon?t.summary.updated++:"error"===e.icon&&t.summary.errors++}return t}(n.log));return(t,n)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{class:"state-change-overlay",onClick:n[1]||(n[1]=(0,e.withModifiers)(e=>t.$emit("close"),["self"]))},[(0,e.createElementVNode)("div",Te,[(0,e.createElementVNode)("div",Be,[(0,e.createElementVNode)("h3",null,[(0,e.createVNode)((0,e.unref)(Ne.A),{size:18}),(0,e.createTextVNode)(" "+(0,e.toDisplayString)(t.$t("å˜æ›´æ—¥å¿—")),1)]),(0,e.createElementVNode)("button",{onClick:n[0]||(n[0]=e=>t.$emit("close")),class:"close-btn"},[(0,e.createVNode)((0,e.unref)(Se.A),{size:20})])]),(0,e.createElementVNode)("div",Ie,[(0,e.createElementVNode)("div",ze,[(0,e.createVNode)((0,e.unref)(Ve),{size:16}),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(t.$t("æ–°å¢"))+" "+(0,e.toDisplayString)(a.value.summary.added),1)]),(0,e.createElementVNode)("div",Me,[(0,e.createVNode)((0,e.unref)(_e),{size:16}),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(t.$t("ç§»é™¤"))+" "+(0,e.toDisplayString)(a.value.summary.removed),1)]),(0,e.createElementVNode)("div",Pe,[(0,e.createVNode)((0,e.unref)(ae.A),{size:16}),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(t.$t("æ›´æ–°"))+" "+(0,e.toDisplayString)(a.value.summary.updated),1)]),a.value.summary.errors>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",Re,[(0,e.createVNode)((0,e.unref)(Se.A),{size:16}),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(t.$t("é”™è¯¯"))+" "+(0,e.toDisplayString)(a.value.summary.errors),1)])):(0,e.createCommentVNode)("v-if",!0)]),(0,e.createElementVNode)("div",$e,[0===a.value.changes.length?((0,e.openBlock)(),(0,e.createElementBlock)("div",Oe,[(0,e.createElementVNode)("p",null,(0,e.toDisplayString)(t.$t("æœ¬æ¬¡æ“ä½œæ²¡æœ‰äº§ç”Ÿå¯è§çš„çŠ¶æ€å˜æ›´ã€‚")),1)])):((0,e.openBlock)(),(0,e.createElementBlock)("div",Le,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(a.value.changes,(t,n)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:n,class:(0,e.normalizeClass)(["change-item",`item-${t.color}`])},[(0,e.createElementVNode)("div",Fe,["add"===t.icon?((0,e.openBlock)(),(0,e.createBlock)((0,e.unref)(Ce.A),{key:0,size:18})):"remove"===t.icon?((0,e.openBlock)(),(0,e.createBlock)((0,e.unref)(Ae),{key:1,size:18})):"update"===t.icon?((0,e.openBlock)(),(0,e.createBlock)((0,e.unref)(ae.A),{key:2,size:18})):"error"===t.icon?((0,e.openBlock)(),(0,e.createBlock)((0,e.unref)(Se.A),{key:3,size:18})):((0,e.openBlock)(),(0,e.createBlock)((0,e.unref)(De.A),{key:4,size:18}))]),(0,e.createElementVNode)("div",je,[(0,e.createElementVNode)("p",Ue,(0,e.toDisplayString)(t.title),1),(0,e.createElementVNode)("p",qe,(0,e.toDisplayString)(t.description),1),t.details&&t.details.length>0?((0,e.openBlock)(),(0,e.createElementBlock)("div",Ge,[((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(t.details,(t,n)=>((0,e.openBlock)(),(0,e.createElementBlock)("p",{key:n},(0,e.toDisplayString)(t),1))),128))])):(0,e.createCommentVNode)("v-if",!0)])],2))),128))]))])])]))}});var Ye=n(3353),We={};We.styleTagTransform=I(),We.setAttributes=A(),We.insert=_().bind(null,"head"),We.domAPI=S(),We.insertStyleElement=T(),E()(Ye.A,We),Ye.A&&Ye.A.locals&&Ye.A.locals;const Xe=(0,P.A)(He,[["__scopeId","data-v-a2a95590"]]);var Je=n(2639);const Ke=(0,s.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),Qe=["title","aria-label","aria-expanded"],Ze=(0,e.defineComponent)({__name:"ActionMenu",props:{position:{default:"bottom-right"},offsetPx:{default:24},openTitle:{default:"èœå•"},closeTitle:{default:"å…³é—­"}},setup(t){const n=t,a=(0,e.ref)(!1),r=()=>{a.value=!1},o=()=>{a.value=!a.value},i=(0,e.computed)(()=>"top-right"===n.position?"pos-top-right":"pos-bottom-right"),s=(0,e.computed)(()=>{const e=`${n.offsetPx}px`;return"top-right"===n.position?{top:e,right:e}:{bottom:e,right:e}});return(t,n)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(["action-menu",i.value]),style:(0,e.normalizeStyle)(s.value)},[(0,e.createVNode)(e.Transition,{name:"menu-fade"},{default:(0,e.withCtx)(()=>[a.value?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"overlay",onClick:r})):(0,e.createCommentVNode)("v-if",!0)]),_:1}),(0,e.createVNode)(e.Transition,{name:"menu-pop"},{default:(0,e.withCtx)(()=>[a.value?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:0,class:"menu",onClick:n[0]||(n[0]=(0,e.withModifiers)(()=>{},["stop"]))},[(0,e.renderSlot)(t.$slots,"menu",{close:r})])):(0,e.createCommentVNode)("v-if",!0)]),_:3}),(0,e.createElementVNode)("button",{class:"fab",title:a.value?t.closeTitle:t.openTitle,"aria-label":a.value?t.closeTitle:t.openTitle,"aria-expanded":a.value,onClick:o},[((0,e.openBlock)(),(0,e.createBlock)((0,e.resolveDynamicComponent)(a.value?(0,e.unref)(Se.A):(0,e.unref)(Ke)),{size:22}))],8,Qe)],6))}});var et=n(4227),tt={};tt.styleTagTransform=I(),tt.setAttributes=A(),tt.insert=_().bind(null,"head"),tt.domAPI=S(),tt.insertStyleElement=T(),E()(et.A,tt),et.A&&et.A.locals&&et.A.locals;const nt=(0,P.A)(Ze,[["__scopeId","data-v-4273a3ac"]]);var at=n(3395),rt=(n(4511),n(1211)),ot=n(4582),it=n(8651),st=n(8546),lt=n(1040);const ct={id:"app-container"},dt=["onClick"],ut=["onClick"],mt=["onClick"],pt=["onClick"],ft=["onClick"],gt=["onClick"],ht=["onClick"],vt=["onClick"],bt={class:"settings-modal-content"},yt={class:"settings-modal-header"},xt={class:"settings-modal-body"},kt={class:"game-info-modal"},wt={class:"game-info-header"},Et=(0,e.defineComponent)({__name:"App",setup(t){const n=(0,e.ref)(!1),r=(0,e.ref)("light"!==localStorage.getItem("theme")),s=(0,e.ref)("true"===localStorage.getItem("fullscreen")),b=(0,e.ref)(!1),y=(0,e.ref)(!1),x=(0,e.ref)((0,st.isBackendConfigured)()),k=(0,a.useRouter)(),w=(0,a.useRoute)(),E=(0,e.computed)(()=>w.path.startsWith("/game"));(0,e.watch)(E,e=>{e&&(y.value=!1)});const N=e=>{const t={ModeSelection:"/",CharacterCreation:"/creation",Login:"/login",CharacterManagement:"/management",GameView:"/game"}[e];t?k.push(t):(console.warn(`æœªçŸ¥çš„è§†å›¾åç§°: ${e}ï¼Œå°†å¯¼èˆªè‡³é¦–é¡µã€‚`),k.push("/"))},S=(0,rt.N)(),V=(0,ot.useCharacterStore)(),_=(0,O.useUIStore)(),C=async e=>{try{if("cloud"===e&&!x.value)return v.o.info("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œè”æœºå…±ä¿®ä¸å¯ç”¨"),void N("ModeSelection");const t="cloud"===e?"cloud":"single";S.setMode(t),N("CharacterCreation")}catch(e){console.error("Failed to initialize creation data:",e),v.o.error("åˆå§‹åŒ–åˆ›è§’æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚"),N("ModeSelection")}},A=()=>{k.push("/management")},D=()=>{S.resetCharacter(),N("ModeSelection")},T=()=>{n.value=!0,N("ModeSelection")},B=()=>{x.value?N("Login"):v.o.info("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œç™»å½•ä¸å¯ç”¨")},I=async e=>{if(console.log("æ¥æ”¶åˆ°åˆ›è§’æŒ‡ä»¤...",e),console.log("[App.vue] ç§æ—å­—æ®µæ£€æŸ¥:",e.race),_.isLoading)return void console.warn("[App.vue] è§’è‰²åˆ›å»ºå·²åœ¨è¿›è¡Œä¸­ï¼Œå¿½ç•¥é‡å¤è¯·æ±‚");V.initialized||(console.log("[App.vue] characterStore æœªåˆå§‹åŒ–ï¼Œç­‰å¾…åˆå§‹åŒ–å®Œæˆ..."),await V.initializeStore()),_.startLoading("å¼€å§‹é“¸é€ æ³•èº«...");const t=`char_${Date.now()}`,n=async()=>{try{V.rootState.è§’è‰²åˆ—è¡¨[t]&&(console.log("[è§’è‰²åˆ›å»º] æ£€æµ‹åˆ°æ®‹ç•™æ•°æ®ï¼Œæ¸…ç†ä¸­..."),delete V.rootState.è§’è‰²åˆ—è¡¨[t],await V.commitMetadataToStorage());let n="æ— åé“å‹";try{const t=(0,it.getTavernHelper)();if(t){const a=await t.getVariables({type:"global"}),r=a["persona.name"]||a.name||e.characterName;n=("string"==typeof r?r:e.characterName)||"æ— åé“å‹",console.log("[åˆ›è§’å®Œæˆ] ä»é…’é¦†Personasè·å–åå­—:",n)}}catch(t){console.warn("[åˆ›è§’å®Œæˆ] æ— æ³•ä»é…’é¦†è·å–Personaåå­—ï¼Œä½¿ç”¨ç”¨æˆ·è¾“å…¥:",t),n=e.characterName||"æ— åé“å‹"}const a=e.baseAttributes?{æ ¹éª¨:e.baseAttributes.root_bone??0,çµæ€§:e.baseAttributes.spirituality??0,æ‚Ÿæ€§:e.baseAttributes.comprehension??0,æ°”è¿:e.baseAttributes.fortune??0,é­…åŠ›:e.baseAttributes.charm??0,å¿ƒæ€§:e.baseAttributes.temperament??0}:{æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0},r={åå­—:n,æ€§åˆ«:"å¥³"===e.gender||"å…¶ä»–"===e.gender?e.gender:"ç”·",å‡ºç”Ÿæ—¥æœŸ:{å¹´:0,æœˆ:1,æ—¥:1},ç§æ—:e.race??"äººæ—",ä¸–ç•Œ:e.world||{name:"æœªçŸ¥ä¸–ç•Œ"},å¤©èµ„:e.talentTier||{name:"å‡¡å“"},å‡ºç”Ÿ:e.origin||"éšæœºå‡ºèº«",çµæ ¹:e.spiritRoot||"éšæœºçµæ ¹",å¤©èµ‹:e.talents?.map(e=>({id:e.id,name:e.name,description:e.description||"",talent_cost:e.talent_cost,rarity:e.rarity}))||[],å…ˆå¤©å…­å¸:a,åå¤©å…­å¸:{æ ¹éª¨:0,çµæ€§:0,æ‚Ÿæ€§:0,æ°”è¿:0,é­…åŠ›:0,å¿ƒæ€§:0}},o={charId:t,baseInfo:r,world:e.world,mode:e.mode,age:e.age},i=await V.createNewCharacter(o);if(!i)throw new Error("è§’è‰²åˆ›å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥ characterStore çš„æ—¥å¿—ã€‚");const s=V.rootState.è§’è‰²åˆ—è¡¨[t];if(!s)throw new Error("ä¸¥é‡é”™è¯¯ï¼šè§’è‰²åˆ›å»ºåæ— æ³•åœ¨è§’è‰²åˆ—è¡¨ä¸­æ‰¾åˆ°ï¼");const l="å•æœº"===s.æ¨¡å¼?"å­˜æ¡£1":"å­˜æ¡£";return V.rootState.å½“å‰æ¿€æ´»å­˜æ¡£={è§’è‰²ID:t,å­˜æ¡£æ§½ä½:l},await V.commitMetadataToStorage(),await new Promise(e=>setTimeout(e,500)),v.o.success(`ã€${i.åå­—}ã€‘å·²æˆåŠŸè¸å…¥ä¿®è¡Œä¹‹è·¯ï¼`),await k.push("/game"),await new Promise(e=>setTimeout(e,100)),z(),!0}catch(e){console.error("è§’è‰²åˆ›å»ºè¿‡ç¨‹å‡ºé”™ï¼š",e);const a=e instanceof Error?e.message:"æ³•èº«é“¸é€ è¿‡ç¨‹ä¸­å‡ºç°æ„å¤–";return V.rootState.è§’è‰²åˆ—è¡¨[t]&&(console.log("[è§’è‰²åˆ›å»º] åˆ›å»ºå¤±è´¥ï¼Œæ¸…ç†æ®‹ç•™æ•°æ®..."),delete V.rootState.è§’è‰²åˆ—è¡¨[t],await V.commitMetadataToStorage()),a.includes("ç”¨æˆ·é€‰æ‹©ç»ˆæ­¢è§’è‰²åˆ›å»º")||a.includes("ç”¨æˆ·é€‰æ‹©ä¸ç»§ç»­é‡è¯•")?(console.log("[è§’è‰²åˆ›å»º] ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆåˆ›å»ºæµç¨‹"),v.o.info("è§’è‰²åˆ›å»ºå·²å–æ¶ˆ"),!1):new Promise(e=>{_.showRetryDialog({title:"è§’è‰²åˆ›å»ºå¤±è´¥",message:`è§’è‰²åˆ›å»ºè¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š\n\n${a}\n\næ˜¯å¦é‡æ–°å°è¯•åˆ›å»ºè§’è‰²ï¼Ÿ`,confirmText:"é‡æ–°åˆ›å»º",cancelText:"è¿”å›ä¸»é¡µé‡æ–°å¼€å§‹",onConfirm:async()=>{console.log("[è§’è‰²åˆ›å»º] ç”¨æˆ·é€‰æ‹©é‡æ–°åˆ›å»º"),e(await n())},onCancel:()=>{console.log("[è§’è‰²åˆ›å»º] ç”¨æˆ·é€‰æ‹©è¿”å›ä¸»é¡µé‡æ–°å¼€å§‹"),v.o.info("å·²è¿”å›ä¸»é¡µï¼Œå¯é‡æ–°å¼€å§‹ç”Ÿæˆ"),S.resetCharacter(),k.push("/"),e(!1)}})})}};try{console.log("[App.vue] å¼€å§‹æ‰§è¡ŒattemptCreation...");const e=await n();console.log("[App.vue] attemptCreationæ‰§è¡Œå®Œæˆ,ç»“æœ:",e),e||console.log("[è§’è‰²åˆ›å»º] ä¿æŒåœ¨è§’è‰²åˆ›å»ºé¡µé¢")}catch(e){console.error("[App.vue] è§’è‰²åˆ›å»ºæµç¨‹å‡ºç°ä¸¥é‡é”™è¯¯ï¼š",e);const t=e instanceof Error?e.message:String(e);v.o.error(`è§’è‰²åˆ›å»ºå¤±è´¥: ${t}`),t.includes("è¶…æ—¶")&&v.o.error("åˆ›å»ºè¿‡ç¨‹è¶…æ—¶,è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒSillyTavernçŠ¶æ€")}finally{console.log("[App.vue] finally: åœæ­¢loading"),_.stopLoading()}};(0,e.watchEffect)(()=>{const e=r.value?"dark":"light";document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)});const z=()=>{s.value&&!(0,lt.Kn)()&&(console.log("[å…¨å±] æ£€æµ‹åˆ°éœ€è¦æ¢å¤å…¨å±çŠ¶æ€"),console.warn("[å…¨å±] æµè§ˆå™¨é™åˆ¶ï¼šæ— æ³•è‡ªåŠ¨æ¢å¤å…¨å±ï¼Œè¯·æ‰‹åŠ¨ç‚¹å‡»å…¨å±æŒ‰é’®ã€‚"),s.value=!1,localStorage.setItem("fullscreen","false"))},M=()=>{b.value=!0};return(0,e.onMounted)(async()=>{console.log("[App] ç­‰å¾… characterStore åˆå§‹åŒ–..."),await V.initializeStore(),console.log("[App] âœ… characterStore åˆå§‹åŒ–å®Œæˆ");let t=null;const n=()=>{try{if(window.parent===window)return;let e=window;for(let n=0;n<5;n++)try{if(!e.parent||e.parent===e)break;{const a=o()("#chat",e.parent.document);if(a.length>0){const r=a.height();if(r){const a=.9*r+"px";return document.documentElement.style.minHeight=a,console.log(`[App.vue] åœ¨ç¬¬${n+1}å±‚çˆ¶çª—å£æ‰¾åˆ°#chatï¼Œåº”ç”¨min-height: ${a}`),void(t=e.parent)}}e=e.parent}}catch{break}console.warn("[App.vue] åœ¨æ‰€æœ‰å¯è®¿é—®çš„çˆ¶çª—å£ä¸­æœªæ‰¾åˆ° #chat å…ƒç´ ï¼Œæ— æ³•è‡ªåŠ¨è°ƒæ•´é«˜åº¦ã€‚")}catch(e){console.error("[App.vue] è®¿é—®çˆ¶çª—å£DOMå¤±è´¥ï¼Œå¯èƒ½æ˜¯è·¨åŸŸé™åˆ¶ã€‚",e)}};n();try{t?o()(t).on("resize",n):window.parent!==window&&o()(parent.window).on("resize",n)}catch{}const a=()=>{const e=!!(0,lt.Kn)();s.value=e,localStorage.setItem("fullscreen",e.toString())};document.addEventListener("fullscreenchange",a),document.addEventListener("webkitfullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("MSFullscreenChange",a),a(),setTimeout(()=>{z()},500);const r=setInterval(async()=>{try{const e=V.activeSaveSlot;e?.å­˜æ¡£æ•°æ®&&(console.log("[å®šæ—¶ä¿å­˜] ä¿å­˜å½“å‰å­˜æ¡£..."),await V.saveCurrentGame(),console.log("[å®šæ—¶ä¿å­˜] ä¿å­˜æˆåŠŸ"))}catch(e){console.error("[å®šæ—¶ä¿å­˜] ä¿å­˜å¤±è´¥:",e)}},3e5);(0,e.onUnmounted)(()=>{clearInterval(r);try{t?o()(t).off("resize",n):window.parent!==window&&o()(parent.window).off("resize",n)}catch{}document.removeEventListener("fullscreenchange",a),document.removeEventListener("webkitfullscreenchange",a),document.removeEventListener("mozfullscreenchange",a),document.removeEventListener("MSFullscreenChange",a)})}),(0,e.watch)(w,(e,t)=>{e.path!==t?.path&&(console.log(`[å…¨å±] è·¯ç”±ä» ${t?.path} åˆ‡æ¢åˆ° ${e.path}`),setTimeout(()=>{z()},200))},{immediate:!1}),(t,n)=>{const a=(0,e.resolveComponent)("router-view");return(0,e.openBlock)(),(0,e.createElementBlock)("div",ct,[(0,e.createVNode)(R),(0,e.createVNode)(H),(0,e.createVNode)(ne),(0,e.createVNode)(ge),(0,e.unref)(_).showStateChangeViewer?((0,e.openBlock)(),(0,e.createBlock)(Xe,{key:0,log:(0,e.unref)(_).stateChangeLogToShow,onClose:(0,e.unref)(_).closeStateChangeViewer},null,8,["log","onClose"])):(0,e.createCommentVNode)("v-if",!0),(0,e.createVNode)(Je.A),(0,e.createCommentVNode)(" å…¨å±€æ“ä½œæŒ‰é’® - åªåœ¨éæ¸¸æˆç•Œé¢æ˜¾ç¤º "),(0,e.createCommentVNode)('\n    <div v-if="!isInGameView" class="global-actions">\n      <label class="theme-toggle" @click.prevent="toggleTheme">\n        <input type="checkbox" ref="globalThemeCheckbox" :checked="!isDarkMode" />\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" class="moon">\n          <path\n            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"\n          ></path>\n        </svg>\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="sun">\n          <path\n            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"\n          ></path>\n        </svg>\n      </label>\n      <label class="fullscreen-toggle" @click.prevent="toggleFullscreen">\n        <input type="checkbox" ref="globalFullscreenCheckbox" />\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="expand">\n          <path\n            d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"\n          ></path>\n        </svg>\n        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="compress">\n          <path\n            d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z"\n          ></path>\n        </svg>\n      </label>\n      <a\n        href="https://ddct.top"\n        target="_blank"\n        rel="noopener noreferrer"\n        class="theme-toggle"\n        title="æ•™ç¨‹"\n      >\n        <HelpCircle :size="24" />\n      </a>\n    </div>\n    '),(0,e.createCommentVNode)(" å…¨å±€æ“ä½œæŒ‰é’®ï¼ˆåˆå¹¶èœå•ï¼‰ - åªåœ¨éæ¸¸æˆç•Œé¢æ˜¾ç¤º "),E.value?(0,e.createCommentVNode)("v-if",!0):((0,e.openBlock)(),(0,e.createBlock)(nt,{key:1,position:"top-right",openTitle:"åŠŸèƒ½",closeTitle:"å…³é—­"},{menu:(0,e.withCtx)(({close:t})=>[(0,e.createElementVNode)("button",{class:"action-menu-item",onClick:e=>{y.value=!0,t()}},[(0,e.createVNode)((0,e.unref)(i.A),{size:18}),n[4]||(n[4]=(0,e.createElementVNode)("span",null,"è®¾ç½®",-1))],8,dt),(0,e.createElementVNode)("button",{class:(0,e.normalizeClass)(["action-menu-item",{"is-disabled":!x.value}]),onClick:e=>(e=>{x.value?(k.push("/workshop"),e()):v.o.info("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œåˆ›æ„å·¥åŠä¸å¯ç”¨")})(t)},[(0,e.createVNode)((0,e.unref)(l),{size:18}),n[5]||(n[5]=(0,e.createElementVNode)("span",null,"åˆ›æ„å·¥åŠ",-1))],10,ut),(0,e.createElementVNode)("button",{class:(0,e.normalizeClass)(["action-menu-item",{"is-disabled":!x.value}]),onClick:e=>(e=>{x.value?(k.push("/account"),e()):v.o.info("æœªé…ç½®åç«¯æœåŠ¡å™¨ï¼Œè´¦å·ä¸­å¿ƒä¸å¯ç”¨")})(t)},[(0,e.createVNode)((0,e.unref)(c.A),{size:18}),n[6]||(n[6]=(0,e.createElementVNode)("span",null,"è´¦å·ä¸­å¿ƒ",-1))],10,mt),(0,e.createElementVNode)("button",{class:"action-menu-item",onClick:e=>{r.value=!r.value,t()}},[((0,e.openBlock)(),(0,e.createBlock)((0,e.resolveDynamicComponent)(r.value?(0,e.unref)(d.A):(0,e.unref)(u.A)),{size:18})),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(r.value?"åˆ‡æ¢åˆ°äº®è‰²":"åˆ‡æ¢åˆ°æš—è‰²"),1)],8,pt),(0,e.createElementVNode)("button",{class:"action-menu-item",onClick:e=>{(0,lt.Kn)()?(0,lt.Eh)().then(()=>{s.value=!1,localStorage.setItem("fullscreen","false"),console.log("[å…¨å±] å·²é€€å‡ºå…¨å±æ¨¡å¼å¹¶ä¿å­˜çŠ¶æ€")}).catch(e=>{console.error("æ— æ³•é€€å‡ºå…¨å±æ¨¡å¼:",e),v.o.error((0,lt.zp)(e))}):(0,lt.lh)(document.documentElement).then(()=>{s.value=!0,localStorage.setItem("fullscreen","true"),console.log("[å…¨å±] å·²è¿›å…¥å…¨å±æ¨¡å¼å¹¶ä¿å­˜çŠ¶æ€")}).catch(e=>{console.error("æ— æ³•è¿›å…¥å…¨å±æ¨¡å¼:",e),v.o.error((0,lt.zp)(e))}),t()}},[((0,e.openBlock)(),(0,e.createBlock)((0,e.resolveDynamicComponent)(s.value?(0,e.unref)(m):(0,e.unref)(p)),{size:18})),(0,e.createElementVNode)("span",null,(0,e.toDisplayString)(s.value?"é€€å‡ºå…¨å±":"è¿›å…¥å…¨å±"),1)],8,ft),(0,e.createElementVNode)("a",{href:"æ¸¸æˆä»‹ç».html",target:"_blank",class:"action-menu-item",onClick:e=>t()},[(0,e.createVNode)((0,e.unref)(f.A),{size:18}),n[7]||(n[7]=(0,e.createElementVNode)("span",null,"å®˜ç½‘ä»‹ç»",-1))],8,gt),(0,e.createElementVNode)("button",{class:"action-menu-item",onClick:e=>{M(),t()}},[(0,e.createVNode)((0,e.unref)(g),{size:18}),n[8]||(n[8]=(0,e.createElementVNode)("span",null,"æ•™ç¨‹ / è¯´æ˜",-1))],8,ht),(0,e.createElementVNode)("a",{href:"https://afdian.com/a/qianye60",target:"_blank",rel:"noopener noreferrer",class:"action-menu-item sponsor-item",onClick:e=>t()},[(0,e.createVNode)((0,e.unref)(h.A),{size:18}),n[9]||(n[9]=(0,e.createElementVNode)("span",null,"èµåŠ©æ”¯æŒ",-1))],8,vt)]),_:1})),(0,e.createCommentVNode)(" è·¯ç”±è§†å›¾å°†åœ¨è¿™é‡Œæ¸²æŸ“æ‰€æœ‰é¡µé¢ "),(0,e.createVNode)(a,null,{default:(0,e.withCtx)(({Component:t})=>[((0,e.openBlock)(),(0,e.createBlock)((0,e.resolveDynamicComponent)(t),{onStartCreation:C,onShowCharacterList:A,onGoToLogin:B,onBack:D,onCreationComplete:I,onLoggedIn:T,onLogin:B,onShowHelp:M},null,32))]),_:1}),(0,e.createCommentVNode)(" Settings Modal "),y.value?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:2,class:"settings-modal-overlay",onClick:n[1]||(n[1]=(0,e.withModifiers)(e=>y.value=!1,["self"]))},[(0,e.createElementVNode)("div",bt,[(0,e.createElementVNode)("div",yt,[n[10]||(n[10]=(0,e.createElementVNode)("h3",null,"è®¾ç½®",-1)),(0,e.createElementVNode)("button",{class:"close-btn",onClick:n[0]||(n[0]=e=>y.value=!1)},"Ã—")]),(0,e.createElementVNode)("div",xt,[(0,e.createVNode)(at.A)])])])):(0,e.createCommentVNode)("v-if",!0),(0,e.createCommentVNode)(" Author Info Modal "),b.value?((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:3,class:"game-info-overlay",onClick:n[3]||(n[3]=(0,e.withModifiers)(e=>b.value=!1,["self"]))},[(0,e.createElementVNode)("div",kt,[(0,e.createCommentVNode)(" é¡¶éƒ¨æ ‡é¢˜åŒºåŸŸ "),(0,e.createElementVNode)("div",wt,[n[15]||(n[15]=(0,e.createElementVNode)("div",{class:"header-bg"},null,-1)),(0,e.createElementVNode)("div",{class:"header-content"},[(0,e.createElementVNode)("div",{class:"game-title"},[n[11]||(n[11]=(0,e.createElementVNode)("span",{class:"title-icon"},"âš”ï¸",-1)),n[12]||(n[12]=(0,e.createElementVNode)("span",{class:"title-text"},"ä»™é€”",-1)),(0,e.createElementVNode)("span",{class:"version-tag"},"v"+(0,e.toDisplayString)("3.8"))]),n[13]||(n[13]=(0,e.createElementVNode)("p",{class:"game-subtitle"},"AIé©±åŠ¨çš„æ²‰æµ¸å¼ä¿®ä»™æ–‡å­—å†’é™©",-1))]),(0,e.createElementVNode)("button",{class:"close-btn",onClick:n[2]||(n[2]=e=>b.value=!1)},n[14]||(n[14]=[(0,e.createElementVNode)("span",null,"Ã—",-1)]))]),(0,e.createCommentVNode)(" å†…å®¹åŒºåŸŸ "),n[16]||(n[16]=(0,e.createStaticVNode)('<div class="game-info-body" data-v-712d4c14>\x3c!-- è­¦å‘Šæç¤º --\x3e<div class="warning-banner" data-v-712d4c14><span class="warning-icon" data-v-712d4c14>âš ï¸</span><span data-v-712d4c14>æ¸¸ç©å°½é‡ä½¿ç”¨æ¨èé¢„è®¾ï¼Œåœ¨äº†è§£åŸç†åå¯è‡ªè¡Œæ›´æ¢è°ƒæ•´ï¼Œ<strong data-v-712d4c14>ç¦æ­¢æ‰“å¼€COT</strong></span></div>\x3c!-- å…³äºæ¸¸æˆ --\x3e<div class="info-card" data-v-712d4c14><div class="card-header" data-v-712d4c14><span class="card-icon" data-v-712d4c14>ğŸ“œ</span><h4 data-v-712d4c14>å…³äºæ¸¸æˆ</h4></div><p class="card-desc" data-v-712d4c14> ã€Šä»™é€”ã€‹æ˜¯ä¸€æ¬¾åŸºäºAIé©±åŠ¨çš„æ²‰æµ¸å¼ä¿®ä»™æ–‡å­—å†’é™©æ¸¸æˆï¼Œç»“åˆSillyTavernä¸Gemini AIï¼Œä¸ºç©å®¶æ‰“é€ æ— é™å¯èƒ½çš„ä¿®ä»™ä¸–ç•Œã€‚ </p></div>\x3c!-- æ ¸å¿ƒåŠŸèƒ½ --\x3e<div class="info-card" data-v-712d4c14><div class="card-header" data-v-712d4c14><span class="card-icon" data-v-712d4c14>âœ¨</span><h4 data-v-712d4c14>æ ¸å¿ƒåŠŸèƒ½</h4></div><div class="feature-grid" data-v-712d4c14><div class="feature-item" data-v-712d4c14><span class="feature-icon" data-v-712d4c14>ğŸ²</span><div class="feature-text" data-v-712d4c14><strong data-v-712d4c14>æ™ºèƒ½åˆ¤å®š</strong><span data-v-712d4c14>å…¨æ–¹ä½è®¡ç®—åˆ¤å®š</span></div></div><div class="feature-item" data-v-712d4c14><span class="feature-icon" data-v-712d4c14>ğŸŒŸ</span><div class="feature-text" data-v-712d4c14><strong data-v-712d4c14>ä¸‰åƒå¤§é“</strong><span data-v-712d4c14>æ¢ç´¢ç‹¬ç‰¹ä¿®ä»™ä¹‹é“</span></div></div><div class="feature-item" data-v-712d4c14><span class="feature-icon" data-v-712d4c14>ğŸ“–</span><div class="feature-text" data-v-712d4c14><strong data-v-712d4c14>åŠ¨æ€å‰§æƒ…</strong><span data-v-712d4c14>AIå®æ—¶ç”Ÿæˆæ•…äº‹</span></div></div><div class="feature-item" data-v-712d4c14><span class="feature-icon" data-v-712d4c14>ğŸ’¾</span><div class="feature-text" data-v-712d4c14><strong data-v-712d4c14>å¤šå­˜æ¡£</strong><span data-v-712d4c14>å¤šè§’è‰²å¤šå‘¨ç›®</span></div></div><div class="feature-item" data-v-712d4c14><span class="feature-icon" data-v-712d4c14>âš”ï¸</span><div class="feature-text" data-v-712d4c14><strong data-v-712d4c14>æ·±åº¦RPG</strong><span data-v-712d4c14>å¢ƒç•Œçªç ´è£…å¤‡ç‚¼åˆ¶</span></div></div><div class="feature-item" data-v-712d4c14><span class="feature-icon" data-v-712d4c14>ğŸ—ºï¸</span><div class="feature-text" data-v-712d4c14><strong data-v-712d4c14>ä¸–ç•Œæ¢ç´¢</strong><span data-v-712d4c14>è‡ªç”±æ¢ç´¢è§¦å‘å¥‡é‡</span></div></div></div></div>\x3c!-- ä½œè€…ä¿¡æ¯ --\x3e<div class="info-card author-card" data-v-712d4c14><div class="card-header" data-v-712d4c14><span class="card-icon" data-v-712d4c14>ğŸ‘¨â€ğŸ’»</span><h4 data-v-712d4c14>ä½œè€…ä¿¡æ¯</h4></div><div class="author-info" data-v-712d4c14><div class="author-row" data-v-712d4c14><span class="label" data-v-712d4c14>ä½œè€…</span><span class="value" data-v-712d4c14>åƒå¤œ</span></div><div class="author-row" data-v-712d4c14><span class="label" data-v-712d4c14>GitHub</span><a href="https://github.com/qianye60" target="_blank" rel="noopener noreferrer" class="value link" data-v-712d4c14> github.com/qianye60 </a></div><div class="author-row" data-v-712d4c14><span class="label" data-v-712d4c14>æŠ€æœ¯æ ˆ</span><span class="value tech" data-v-712d4c14>Vue 3 + TypeScript + SillyTavern</span></div></div></div>\x3c!-- ç‰ˆæƒå£°æ˜ --\x3e<div class="info-card copyright-card" data-v-712d4c14><div class="card-header" data-v-712d4c14><span class="card-icon" data-v-712d4c14>âš–ï¸</span><h4 data-v-712d4c14>ç‰ˆæƒå£°æ˜</h4></div><div class="copyright-content" data-v-712d4c14><p class="copyright-title" data-v-712d4c14>Â© 2025 åƒå¤œ Â· Apache License 2.0</p><div class="license-items" data-v-712d4c14><span class="license-tag allow" data-v-712d4c14>âœ“ ä¸ªäºº/å•†ç”¨</span><span class="license-tag allow" data-v-712d4c14>âœ“ ä¿®æ”¹å‘å¸ƒ</span><span class="license-tag allow" data-v-712d4c14>âœ“ å¤åˆ¶åˆ†å‘</span><span class="license-tag require" data-v-712d4c14>â“˜ ä¿ç•™å£°æ˜</span></div></div></div></div>',1))])])):(0,e.createCommentVNode)("v-if",!0)])}}});var Nt=n(9164),St={};St.styleTagTransform=I(),St.setAttributes=A(),St.insert=_().bind(null,"head"),St.domAPI=S(),St.insertStyleElement=T(),E()(Nt.A,St),Nt.A&&Nt.A.locals&&Nt.A.locals;const Vt=(0,P.A)(Et,[["__scopeId","data-v-712d4c14"]]);var _t=n(3708),Ct=n(1606),At={};At.styleTagTransform=I(),At.setAttributes=A(),At.insert=_().bind(null,"head"),At.domAPI=S(),At.insertStyleElement=T(),E()(Ct.A,At),Ct.A&&Ct.A.locals&&Ct.A.locals;var Dt=n(6627),Tt={};Tt.styleTagTransform=I(),Tt.setAttributes=A(),Tt.insert=_().bind(null,"head"),Tt.domAPI=S(),Tt.insertStyleElement=T(),E()(Dt.A,Tt),Dt.A&&Dt.A.locals&&Dt.A.locals;var Bt=n(8396),It={};It.styleTagTransform=I(),It.setAttributes=A(),It.insert=_().bind(null,"head"),It.domAPI=S(),It.insertStyleElement=T(),E()(Bt.A,It),Bt.A&&Bt.A.locals&&Bt.A.locals;var zt=n(3302);const Mt={log:console.log.bind(console),warn:console.warn.bind(console),info:console.info.bind(console),debug:console.debug?console.debug.bind(console):void 0,table:console.table?console.table.bind(console):void 0,group:console.group?console.group.bind(console):void 0,groupCollapsed:console.groupCollapsed?console.groupCollapsed.bind(console):void 0,groupEnd:console.groupEnd?console.groupEnd.bind(console):void 0,error:console.error.bind(console)},Pt=()=>zt.w9.isConsoleDebugEnabled();console.log=(...e)=>{Pt()&&Mt.log(...e)},console.warn=(...e)=>{Pt()&&Mt.warn(...e)},console.info=(...e)=>{zt.w9.isDebugMode()&&Mt.info(...e)},Mt.debug&&(console.debug=(...e)=>{Pt()&&Mt.debug(...e)}),Mt.table&&(console.table=(...e)=>{Pt()&&Mt.table(...e)}),Mt.group&&(console.group=(...e)=>{Pt()&&Mt.group(...e)}),Mt.groupCollapsed&&(console.groupCollapsed=(...e)=>{Pt()&&Mt.groupCollapsed(...e)}),Mt.groupEnd&&(console.groupEnd=(...e)=>{Pt()&&Mt.groupEnd(...e)});var Rt=n(5099),$t=n(876);!async function(){console.log("ã€åº”ç”¨å¯åŠ¨ã€‘å¼€å§‹åˆå§‹åŒ–æµç¨‹..."),await(0,Rt.YK)(),console.log("ã€åº”ç”¨å¯åŠ¨ã€‘æ•°æ®è¿ç§»æ£€æŸ¥å®Œæˆï¼Œå¼€å§‹æŒ‚è½½Vueåº”ç”¨");const n=(0,e.createApp)(Vt),{t:a}=(0,$t.s)();n.config.globalProperties.$t=a,n.mixin({methods:{t:e=>a(e)}}),n.use((0,t.Ey)()),n.use(_t.default),n.mount("#app"),console.log("ã€åº”ç”¨å¯åŠ¨ã€‘âœ… Vueåº”ç”¨å·²æˆåŠŸæŒ‚è½½")}()})()})();